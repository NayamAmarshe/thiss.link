var K1=Object.defineProperty;var dP=Object.getOwnPropertyDescriptor;var fP=Object.getOwnPropertyNames;var pP=Object.prototype.hasOwnProperty;var mP=(zr=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(zr,{get:(hn,Pu)=>(typeof require<"u"?require:hn)[Pu]}):zr)(function(zr){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+zr+'" is not supported')});var T_=(zr,hn)=>()=>(zr&&(hn=zr(zr=0)),hn);var I_=(zr,hn,Pu,Jt)=>{if(hn&&typeof hn=="object"||typeof hn=="function")for(let ae of fP(hn))!pP.call(zr,ae)&&ae!==Pu&&K1(zr,ae,{get:()=>hn[ae],enumerable:!(Jt=dP(hn,ae))||Jt.enumerable});return zr},Qm=(zr,hn,Pu)=>(I_(zr,hn,"default"),Pu&&I_(Pu,hn,"default"));var x_=zr=>I_(K1({},"__esModule",{value:!0}),zr);var Hw={};import*as EP from"node:async_hooks";var W1=T_(()=>{Qm(Hw,EP)});var Kw={};import*as _P from"node:buffer";var J1=T_(()=>{Qm(Kw,_P)});var Ww={};import*as IP from"async_hooks";var Q1=T_(()=>{Qm(Ww,IP)});var C_=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/[slug]"),TP=((zr,hn,Pu)=>(hn._ENTRIES={},zr.__RSC_SERVER_MANIFEST='{"node":{"bc739e46f07436238c103a2aa25f334d61cc43ec":{"workers":{"app/page":"24501"},"layer":{"app/page":"action-browser"}},"d190c6abc77b9ad5e6b1b18930229ac61a410b1f":{"workers":{"app/page":"24501"},"layer":{"app/page":"action-browser"}}},"edge":{"bc739e46f07436238c103a2aa25f334d61cc43ec":{"workers":{"app/[slug]/page":"7505"},"layer":{"app/[slug]/page":"action-browser"}},"d190c6abc77b9ad5e6b1b18930229ac61a410b1f":{"workers":{"app/[slug]/page":"7505"},"layer":{"app/[slug]/page":"action-browser"}},"990083f62ad32e4709fdee275f80991c7e071a72":{"workers":{"app/[slug]/page":"7505"},"layer":{"app/[slug]/page":"action-browser"}}},"encryptionKey":"process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY"}',hn.__RSC_MANIFEST=hn.__RSC_MANIFEST||{},hn.__RSC_MANIFEST["/[slug]/page"]={moduleLoading:{prefix:"/_next/",crossOrigin:null},ssrModuleMapping:{80:{"*":{id:"41868",name:"*",chunks:[],async:!1}},1060:{"*":{id:"9727",name:"*",chunks:[],async:!1}},2648:{"*":{id:"45996",name:"*",chunks:[],async:!1}},2846:{"*":{id:"12994",name:"*",chunks:[],async:!1}},4047:{"*":{id:"4376",name:"*",chunks:[],async:!1}},4707:{"*":{id:"79671",name:"*",chunks:[],async:!1}},5581:{"*":{id:"94195",name:"*",chunks:[],async:!1}},6050:{"*":{id:"22307",name:"*",chunks:[],async:!1}},6423:{"*":{id:"84759",name:"*",chunks:[],async:!1}},9107:{"*":{id:"96114",name:"*",chunks:[],async:!1}}},edgeSSRModuleMapping:{80:{"*":{id:"7245",name:"*",chunks:[],async:!1}},1060:{"*":{id:"9027",name:"*",chunks:[],async:!1}},1956:{"*":{id:"5291",name:"*",chunks:[],async:!1}},2648:{"*":{id:"5996",name:"*",chunks:[],async:!1}},2846:{"*":{id:"7034",name:"*",chunks:[],async:!1}},4707:{"*":{id:"7603",name:"*",chunks:[],async:!1}},5501:{"*":{id:"8823",name:"*",chunks:[],async:!1}},5581:{"*":{id:"599",name:"*",chunks:[],async:!1}},6050:{"*":{id:"2307",name:"*",chunks:[],async:!1}},6110:{"*":{id:"5975",name:"*",chunks:[],async:!1}},6423:{"*":{id:"4782",name:"*",chunks:[],async:!1}},7973:{"*":{id:"5826",name:"*",chunks:[],async:!1}},9060:{"*":{id:"4504",name:"*",chunks:[],async:!1}},9107:{"*":{id:"3785",name:"*",chunks:[],async:!1}}},clientModules:{"/Users/macbook-air/Public/maglit/node_modules/next/dist/client/components/app-router.js":{id:2846,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/app-router.js":{id:2846,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/client/components/client-page.js":{id:9107,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/client-page.js":{id:9107,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/client/components/error-boundary.js":{id:1060,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/error-boundary.js":{id:1060,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/client/components/layout-router.js":{id:4707,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/layout-router.js":{id:4707,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/client/components/not-found-boundary.js":{id:80,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/not-found-boundary.js":{id:80,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/client/components/render-from-template-context.js":{id:6423,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/render-from-template-context.js":{id:6423,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/shared/lib/app-router-context.shared-runtime.js":{id:1956,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js":{id:1956,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/shared/lib/hooks-client-context.shared-runtime.js":{id:9060,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/shared/lib/hooks-client-context.shared-runtime.js":{id:9060,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/shared/lib/loadable-context.shared-runtime.js":{id:6110,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/shared/lib/loadable-context.shared-runtime.js":{id:6110,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/shared/lib/server-inserted-html.shared-runtime.js":{id:5501,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/shared/lib/server-inserted-html.shared-runtime.js":{id:5501,name:"*",chunks:[],async:!1},"/Users/macbook-air/Public/maglit/components/providers.tsx":{id:5581,name:"*",chunks:["240","static/chunks/240-7434b084cb91107e.js","542","static/chunks/542-7fd914c2654c64ba.js","185","static/chunks/app/layout-44d2f9d20c6d67ed.js"],async:!1},"/Users/macbook-air/Public/maglit/node_modules/react-toastify/dist/ReactToastify.css":{id:2648,name:"*",chunks:["240","static/chunks/240-7434b084cb91107e.js","542","static/chunks/542-7fd914c2654c64ba.js","185","static/chunks/app/layout-44d2f9d20c6d67ed.js"],async:!1},"/Users/macbook-air/Public/maglit/styles/globals.css":{id:6050,name:"*",chunks:["240","static/chunks/240-7434b084cb91107e.js","542","static/chunks/542-7fd914c2654c64ba.js","185","static/chunks/app/layout-44d2f9d20c6d67ed.js"],async:!1},"/Users/macbook-air/Public/maglit/app/page.tsx":{id:4047,name:"*",chunks:["699","static/chunks/8e1d74a4-30d93767dc4c2caa.js","358","static/chunks/bc9e92e6-885740d1413e4a0d.js","400","static/chunks/938157b5-b169c06568b202a7.js","240","static/chunks/240-7434b084cb91107e.js","46","static/chunks/46-66e689ebce4dd59c.js","542","static/chunks/542-7fd914c2654c64ba.js","44","static/chunks/44-037471bf712b5798.js","747","static/chunks/747-c5e3aa624c5fdbe7.js","931","static/chunks/app/page-864669550b1dc44d.js"],async:!1},"/Users/macbook-air/Public/maglit/app/[slug]/page.tsx":{id:7973,name:"*",chunks:["699","static/chunks/8e1d74a4-30d93767dc4c2caa.js","358","static/chunks/bc9e92e6-885740d1413e4a0d.js","400","static/chunks/938157b5-b169c06568b202a7.js","240","static/chunks/240-7434b084cb91107e.js","46","static/chunks/46-66e689ebce4dd59c.js","747","static/chunks/747-c5e3aa624c5fdbe7.js","42","static/chunks/app/%5Bslug%5D/page-7cfd3e8896989214.js"],async:!1}},entryCSSFiles:{"/Users/macbook-air/Public/maglit/":[],"/Users/macbook-air/Public/maglit/app/layout":["static/css/51a2cf58b88f9e35.css"],"/Users/macbook-air/Public/maglit/app/page":[],"/Users/macbook-air/Public/maglit/app/[slug]/page":[]}},zr.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-d165db001b09cafc.js","static/chunks/fd9d1056-b89fad6531df1122.js","static/chunks/30-2226e5274f93aac5.js","static/chunks/main-app-9d8661727d847a35.js"],pages:{"/_app":["static/chunks/webpack-d165db001b09cafc.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-d5f5fed8a52f9ef7.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-d165db001b09cafc.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-d5f5fed8a52f9ef7.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},zr.__BUILD_MANIFEST.lowPriorityFiles=["/static/ffZVfpHfyCKVY9p5yhVM7/_buildManifest.js",,"/static/ffZVfpHfyCKVY9p5yhVM7/_ssgManifest.js"],zr.__REACT_LOADABLE_MANIFEST="{}",zr.__NEXT_FONT_MANIFEST='{"pages":{},"app":{},"appUsingSizeAdjust":false,"pagesUsingSizeAdjust":false}',zr.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var Jt={},ae={};function M(q){var Z=ae[q];if(Z!==void 0)return Z.exports;var W=ae[q]={exports:{}},j=!0;try{Jt[q](W,W.exports,M),j=!1}finally{j&&delete ae[q]}return W.exports}M.m=Jt,(()=>{var q=[];M.O=(Z,W,j,z)=>{if(W){z=z||0;for(var y=q.length;y>0&&q[y-1][2]>z;y--)q[y]=q[y-1];q[y]=[W,j,z];return}for(var S=1/0,y=0;y<q.length;y++){for(var[W,j,z]=q[y],k=!0,I=0;I<W.length;I++)S>=z&&Object.keys(M.O).every(Y=>M.O[Y](W[I]))?W.splice(I--,1):(k=!1,z<S&&(S=z));if(k){q.splice(y--,1);var x=j();x!==void 0&&(Z=x)}}return Z}})(),M.n=q=>{var Z=q&&q.__esModule?()=>q.default:()=>q;return M.d(Z,{a:Z}),Z},(()=>{var q,Z=Object.getPrototypeOf?W=>Object.getPrototypeOf(W):W=>W.__proto__;M.t=function(W,j){if(1&j&&(W=this(W)),8&j||typeof W=="object"&&W&&(4&j&&W.__esModule||16&j&&typeof W.then=="function"))return W;var z=Object.create(null);M.r(z);var y={};q=q||[null,Z({}),Z([]),Z(Z)];for(var S=2&j&&W;typeof S=="object"&&!~q.indexOf(S);S=Z(S))Object.getOwnPropertyNames(S).forEach(k=>y[k]=()=>W[k]);return y.default=()=>W,M.d(z,y),z}})(),M.d=(q,Z)=>{for(var W in Z)M.o(Z,W)&&!M.o(q,W)&&Object.defineProperty(q,W,{enumerable:!0,get:Z[W]})},M.e=()=>Promise.resolve(),M.g=function(){if(typeof hn=="object")return hn;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),M.o=(q,Z)=>Object.prototype.hasOwnProperty.call(q,Z),M.r=q=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(q,"__esModule",{value:!0})},(()=>{var q={993:0};M.O.j=j=>q[j]===0;var Z=(j,z)=>{var y,S,[k,I,x]=z,C=0;if(k.some(U=>q[U]!==0)){for(y in I)M.o(I,y)&&(M.m[y]=I[y]);if(x)var N=x(M)}for(j&&j(z);C<k.length;C++)S=k[C],M.o(q,S)&&q[S]&&q[S][0](),q[S]=0;return M.O(N)},W=zr.webpackChunk_N_E=zr.webpackChunk_N_E||[];W.forEach(Z.bind(null,0)),W.push=Z.bind(null,W.push.bind(W))})(),M.nc=void 0})(),(zr.webpackChunk_N_E=zr.webpackChunk_N_E||[]).push([[42],{2067:Jt=>{"use strict";Jt.exports=(W1(),x_(Hw))},6195:Jt=>{"use strict";Jt.exports=(J1(),x_(Kw))},4769:(Jt,ae,M)=>{"use strict";let q,Z,W,j;M.r(ae),M.d(ae,{ComponentMod:()=>Lu,default:()=>yu});var z,y,S,k,I,x,C,N,U,K,Y,ee,fe,Se,ze,Ue,at,vt={};M.r(vt),M.d(vt,{DynamicServerError:()=>os,isDynamicServerError:()=>hi});var jt={};async function re(){let Be="globalThis._ENTRIES"in hn&&hn._ENTRIES.middleware_instrumentation&&(await hn._ENTRIES.middleware_instrumentation).register;if(Be)try{await Be()}catch(B){throw B.message=`An error occurred while loading instrumentation hook: ${B.message}`,B}}M.r(jt),M.d(jt,{AppRouter:()=>_i,ClientPageRoot:()=>$n,GlobalError:()=>as,LayoutRouter:()=>yi,NotFoundBoundary:()=>sn,Postpone:()=>pe,RenderFromTemplateContext:()=>Wi,__next_app__:()=>nc,actionAsyncStorage:()=>Pi.W,createDynamicallyTrackedSearchParams:()=>mr,createUntrackedSearchParams:()=>pr,decodeAction:()=>Zt.decodeAction,decodeFormState:()=>Zt.decodeFormState,decodeReply:()=>Zt.decodeReply,originalPathname:()=>Jl,pages:()=>kl,patchFetch:()=>tl,preconnect:()=>Za,preloadFont:()=>ko,preloadStyle:()=>Qi,renderToReadableStream:()=>Zt.renderToReadableStream,requestAsyncStorage:()=>Ct.O,routeModule:()=>Ac,serverHooks:()=>vt,staticGenerationAsyncStorage:()=>Ui.A,taintObjectReference:()=>ll,tree:()=>Ou});let F=null;function Q(){return F||(F=re()),F}function se(Be){return`The edge runtime does not support Node.js '${Be}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==M.g.process&&(process.env=M.g.process.env,M.g.process=process),Object.defineProperty(hn,"__import_unsupported",{value:function(Be){let B=new Proxy(function(){},{get(le,be){if(be==="then")return{};throw Error(se(Be))},construct(){throw Error(se(Be))},apply(le,be,Xe){if(typeof Xe[0]=="function")return Xe[0](B);throw Error(se(Be))}});return new Proxy({},{get:()=>B})},enumerable:!1,configurable:!0}),Q();var me=M(8269),ce=M(6536);let Ke=Symbol("response"),Je=Symbol("passThrough"),He=Symbol("waitUntil");class _e{constructor(B){this[He]=[],this[Je]=!1}respondWith(B){this[Ke]||(this[Ke]=Promise.resolve(B))}passThroughOnException(){this[Je]=!0}waitUntil(B){this[He].push(B)}}class Fe extends _e{constructor(B){super(B.request),this.sourcePage=B.page}get request(){throw new me.qJ({page:this.sourcePage})}respondWith(){throw new me.qJ({page:this.sourcePage})}}var pt=M(7967),lr=M(1641),Ne=M(9141),tt=M(3659);let we=Symbol("internal response"),Ce=new Set([301,302,303,307,308]);function We(Be,B){var le;if(!(Be==null||(le=Be.request)==null)&&le.headers){if(!(Be.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let be=[];for(let[Xe,ot]of Be.request.headers)B.set("x-middleware-request-"+Xe,ot),be.push(Xe);B.set("x-middleware-override-headers",be.join(","))}}class ve extends Response{constructor(B,le={}){super(B,le);let be=this.headers,Xe=new Proxy(new lr.nV(be),{get(ot,Gt,cr){switch(Gt){case"delete":case"set":return(...Er)=>{let br=Reflect.apply(ot[Gt],ot,Er),nn=new Headers(be);return br instanceof lr.nV&&be.set("x-middleware-set-cookie",br.getAll().map(Mn=>(0,lr.Q7)(Mn)).join(",")),We(le,nn),br};default:return tt.g.get(ot,Gt,cr)}}});this[we]={cookies:Xe,url:le.url?new Ne.c(le.url,{headers:(0,ce.lb)(be),nextConfig:le.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[we].cookies}static json(B,le){let be=Response.json(B,le);return new ve(be.body,be)}static redirect(B,le){let be=typeof le=="number"?le:le?.status??307;if(!Ce.has(be))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let Xe=typeof le=="object"?le:{},ot=new Headers(Xe?.headers);return ot.set("Location",(0,ce.r4)(B)),new ve(null,{...Xe,headers:ot,status:be})}static rewrite(B,le){let be=new Headers(le?.headers);return be.set("x-middleware-rewrite",(0,ce.r4)(B)),We(le,be),new ve(null,{...le,headers:be})}static next(B){let le=new Headers(B?.headers);return le.set("x-middleware-next","1"),We(B,le),new ve(null,{...B,headers:le})}}function Ve(Be,B){let le=typeof B=="string"?new URL(B):B,be=new URL(Be,B),Xe=le.protocol+"//"+le.host;return be.protocol+"//"+be.host===Xe?be.toString().replace(Xe,""):be.toString()}var gt=M(7538),mt=M(1959),lt=M(9338),et=M(7580),bt=M(5358),Ct=M(8983),Ee=M(7081),Qe=M(1427);function yt(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID,previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}class Rt extends pt.I{constructor(B){super(B.input,B.init),this.sourcePage=B.page}get request(){throw new me.qJ({page:this.sourcePage})}respondWith(){throw new me.qJ({page:this.sourcePage})}waitUntil(){throw new me.qJ({page:this.sourcePage})}}let Et={keys:Be=>Array.from(Be.keys()),get:(Be,B)=>Be.get(B)??void 0},rr=(Be,B)=>(0,Ee.Yz)().withPropagatedContext(Be.headers,B,Et),an=!1;async function Hr(Be){let B,le;(function(){if(!an&&(an=!0,process.env.NEXT_PRIVATE_TEST_PROXY==="true")){let{interceptTestApis:Un,wrapRequestHandler:ns}=M(5916);Un(),rr=ns(rr)}})(),await Q();let be=zr.__BUILD_MANIFEST!==void 0;Be.request.url=(0,mt.b)(Be.request.url);let Xe=new Ne.c(Be.request.url,{headers:Be.request.headers,nextConfig:Be.request.nextConfig});for(let Un of[...Xe.searchParams.keys()]){let ns=Xe.searchParams.getAll(Un);if(Un!==et.dN&&Un.startsWith(et.dN)){let di=Un.substring(et.dN.length);for(let Di of(Xe.searchParams.delete(di),ns))Xe.searchParams.append(di,Di);Xe.searchParams.delete(Un)}}let ot=Xe.buildId;Xe.buildId="";let Gt=Be.request.headers["x-nextjs-data"];Gt&&Xe.pathname==="/index"&&(Xe.pathname="/");let cr=(0,ce.EK)(Be.request.headers),Er=new Map;if(!be)for(let Un of lt.vu){let ns=Un.toString().toLowerCase();cr.get(ns)&&(Er.set(ns,cr.get(ns)),cr.delete(ns))}let br=new Rt({page:Be.page,input:(0,gt.T)(Xe,!0).toString(),init:{body:Be.request.body,geo:Be.request.geo,headers:cr,ip:Be.request.ip,method:Be.request.method,nextConfig:Be.request.nextConfig,signal:Be.request.signal}});Gt&&Object.defineProperty(br,"__isData",{enumerable:!1,value:!0}),!hn.__incrementalCache&&Be.IncrementalCache&&(hn.__incrementalCache=new Be.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:Be.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:yt()})}));let nn=new Fe({request:br,page:Be.page});if((B=await rr(br,()=>Be.page==="/middleware"||Be.page==="/src/middleware"?(0,Ee.Yz)().trace(Qe.dI.execute,{spanName:`middleware ${br.method} ${br.nextUrl.pathname}`,attributes:{"http.target":br.nextUrl.pathname,"http.method":br.method}},()=>bt.B.wrap(Ct.O,{req:br,renderOpts:{onUpdateCookies:Un=>{le=Un},previewProps:yt()}},()=>Be.handler(br,nn))):Be.handler(br,nn)))&&!(B instanceof Response))throw TypeError("Expected an instance of Response to be returned");B&&le&&B.headers.set("set-cookie",le);let Mn=B?.headers.get("x-middleware-rewrite");if(B&&Mn&&!be){let Un=new Ne.c(Mn,{forceLocale:!0,headers:Be.request.headers,nextConfig:Be.request.nextConfig});Un.host===br.nextUrl.host&&(Un.buildId=ot||Un.buildId,B.headers.set("x-middleware-rewrite",String(Un)));let ns=Ve(String(Un),String(Xe));Gt&&B.headers.set("x-nextjs-rewrite",ns)}let Bn=B?.headers.get("Location");if(B&&Bn&&!be){let Un=new Ne.c(Bn,{forceLocale:!1,headers:Be.request.headers,nextConfig:Be.request.nextConfig});B=new Response(B.body,B),Un.host===br.nextUrl.host&&(Un.buildId=ot||Un.buildId,B.headers.set("Location",String(Un))),Gt&&(B.headers.delete("Location"),B.headers.set("x-nextjs-redirect",Ve(String(Un),String(Xe))))}let Ci=B||ve.next(),dn=Ci.headers.get("x-middleware-override-headers"),Wn=[];if(dn){for(let[Un,ns]of Er)Ci.headers.set(`x-middleware-request-${Un}`,ns),Wn.push(Un);Wn.length>0&&Ci.headers.set("x-middleware-override-headers",dn+","+Wn.join(","))}return{response:Ci,waitUntil:Promise.all(nn[He]),fetchMetrics:br.fetchMetrics}}var gn=M(7506),Or=M(4737);let wn="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",Tn=`(${wn}[.]){3}${wn}`,tn="(?:[0-9a-fA-F]{1,4})",rn=RegExp(`^((?:${tn}:){7}(?:${tn}|:)|(?:${tn}:){6}(?:${Tn}|:${tn}|:)|(?:${tn}:){5}(?::${Tn}|(:${tn}){1,2}|:)|(?:${tn}:){4}(?:(:${tn}){0,1}:${Tn}|(:${tn}){1,3}|:)|(?:${tn}:){3}(?:(:${tn}){0,2}:${Tn}|(:${tn}){1,4}|:)|(?:${tn}:){2}(?:(:${tn}){0,3}:${Tn}|(:${tn}){1,5}|:)|(?:${tn}:){1}(?:(:${tn}){0,4}:${Tn}|(:${tn}){1,6}|:)|(?::((?::${tn}){0,5}:${Tn}|(?::${tn}){1,7}|:)))(%[0-9a-zA-Z-.:]{1,})?$`);var on=M(8613);function cn(Be){return Be.statusCode||(Be.permanent?on.X.PermanentRedirect:on.X.TemporaryRedirect)}M(8027);let On={client:"client",server:"server",edgeServer:"edge-server"};On.client,On.server,On.edgeServer;let Pt="/_not-found",_n=""+Pt+"/page",si="pages-manifest.json",zi="app-paths-manifest.json",Hs="server",es=["/_document","/_app","/_error"];Symbol("polyfills");let Ri=["/500"];var kn=M(8631),st=M(1057);function Ht({revalidate:Be,swrDelta:B}){let le=B?`stale-while-revalidate=${B}`:"stale-while-revalidate";return Be===0?"private, no-cache, no-store, max-age=0, must-revalidate":typeof Be=="number"?`s-maxage=${Be}, ${le}`:`s-maxage=${et.BR}, ${le}`}var zt=M(9022),Yt=M(2650),tr=M(9558);function En(Be){let B=Be.replace(/\\/g,"/");return B.startsWith("/index/")&&!(0,kn.$)(B)?B.slice(6):B!=="/index"?B:"/"}var Kr=M(7106),li=M(3786),pn=M(7278);function In(Be,B){let le=[],be=(0,pn.Bo)(Be,le,{delimiter:"/",sensitive:typeof B?.sensitive=="boolean"&&B.sensitive,strict:B?.strict}),Xe=(0,pn.WS)(B?.regexModifier?new RegExp(B.regexModifier(be.source),be.flags):be,le);return(ot,Gt)=>{if(typeof ot!="string")return!1;let cr=Xe(ot);if(!cr)return!1;if(B?.removeUnnamedParams)for(let Er of le)typeof Er.name=="number"&&delete cr.params[Er.name];return{...Gt,...cr.params}}}var qn=M(9963),Ln=M(8215),Ei=M(5374),Ha=M(6037);function fi(Be){if(Be.startsWith("/"))return function(le,be){let Xe=new URL("http://n"),ot=le.startsWith(".")?new URL("http://n"):Xe,{pathname:Gt,searchParams:cr,search:Er,hash:br,href:nn,origin:Mn}=new URL(le,ot);if(Mn!==Xe.origin)throw Error("invariant: invalid relative URL, router received "+le);return{pathname:Gt,query:(0,Ha.u5)(cr),search:Er,hash:br,href:nn.slice(Xe.origin.length)}}(Be);let B=new URL(Be);return{hash:B.hash,hostname:B.hostname,href:B.href,pathname:B.pathname,port:B.port,protocol:B.protocol,query:(0,Ha.u5)(B.searchParams),search:B.search}}var Us=M(9567);function ds(Be){return function(){let{cookie:B}=Be;if(!B)return{};let{parse:le}=M(3143);return le(Array.isArray(B)?B.join("; "):B)}}function ui(Be){return Be.replace(/__ESC_COLON_/gi,":")}function Ki(Be,B){if(!Be.includes(":"))return Be;for(let le of Object.keys(B))Be.includes(":"+le)&&(Be=Be.replace(RegExp(":"+le+"\\*","g"),":"+le+"--ESCAPED_PARAM_ASTERISKS").replace(RegExp(":"+le+"\\?","g"),":"+le+"--ESCAPED_PARAM_QUESTION").replace(RegExp(":"+le+"\\+","g"),":"+le+"--ESCAPED_PARAM_PLUS").replace(RegExp(":"+le+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+le));return Be=Be.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,pn.MY)("/"+Be,{validate:!1})(B).slice(1)}function $s(Be,B,le,be,Xe){if(be&&B&&Xe){let ot=(0,Or.parse)(Be.url,!0);for(let Gt of(delete ot.search,Object.keys(ot.query)))(Gt!==et.dN&&Gt.startsWith(et.dN)||(le||Object.keys(Xe.groups)).includes(Gt))&&delete ot.query[Gt];Be.url=(0,Or.format)(ot)}}function Is(Be,B,le){if(!le)return Be;for(let be of Object.keys(le.groups)){let{optional:Xe,repeat:ot}=le.groups[be],Gt=`[${ot?"...":""}${be}]`;Xe&&(Gt=`[${Gt}]`);let cr=Be.indexOf(Gt);if(cr>-1){let Er,br=B[be];Er=Array.isArray(br)?br.map(nn=>nn&&encodeURIComponent(nn)).join("/"):br?encodeURIComponent(br):"",Be=Be.slice(0,cr)+Er+Be.slice(cr+Gt.length)}}return Be}function wa(Be,B,le,be){let Xe=!0;return le?{params:Be=Object.keys(le.groups).reduce((ot,Gt)=>{let cr=Be[Gt];typeof cr=="string"&&(cr=(0,mt.b)(cr)),Array.isArray(cr)&&(cr=cr.map(nn=>(typeof nn=="string"&&(nn=(0,mt.b)(nn)),nn)));let Er=be[Gt],br=le.groups[Gt].optional;return((Array.isArray(Er)?Er.some(nn=>Array.isArray(cr)?cr.some(Mn=>Mn.includes(nn)):cr?.includes(nn)):cr?.includes(Er))||cr===void 0&&!(br&&B))&&(Xe=!1),br&&(!cr||Array.isArray(cr)&&cr.length===1&&(cr[0]==="index"||cr[0]===`[[...${Gt}]]`))&&(cr=void 0,delete Be[Gt]),cr&&typeof cr=="string"&&le.groups[Gt].repeat&&(cr=cr.split("/")),cr&&(ot[Gt]=cr),ot},{}),hasValidParams:Xe}:{params:Be,hasValidParams:!1}}function ua(Be){return typeof Be=="object"&&Be!==null&&"name"in Be&&"message"in Be}function ea(Be){return ua(Be)?Be:Error(function(B){if(Object.prototype.toString.call(B)!=="[object Object]")return!1;let le=Object.getPrototypeOf(B);return le===null||le.hasOwnProperty("isPrototypeOf")}(Be)?JSON.stringify(Be):Be+"")}var Gi=M(2070),na=M(7274),Bs=M(9556),wo=M(4372);class Te{constructor(B){this.provider=B}normalize(B){return this.provider.analyze(B).pathname}}class dt{insert(B){this._insert(B.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(B){B===void 0&&(B="/");let le=[...this.children.keys()].sort();this.slugName!==null&&le.splice(le.indexOf("[]"),1),this.restSlugName!==null&&le.splice(le.indexOf("[...]"),1),this.optionalRestSlugName!==null&&le.splice(le.indexOf("[[...]]"),1);let be=le.map(Xe=>this.children.get(Xe)._smoosh(""+B+Xe+"/")).reduce((Xe,ot)=>[...Xe,...ot],[]);if(this.slugName!==null&&be.push(...this.children.get("[]")._smoosh(B+"["+this.slugName+"]/")),!this.placeholder){let Xe=B==="/"?"/":B.slice(0,-1);if(this.optionalRestSlugName!=null)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+Xe+'" and "'+Xe+"[[..."+this.optionalRestSlugName+']]").');be.unshift(Xe)}return this.restSlugName!==null&&be.push(...this.children.get("[...]")._smoosh(B+"[..."+this.restSlugName+"]/")),this.optionalRestSlugName!==null&&be.push(...this.children.get("[[...]]")._smoosh(B+"[[..."+this.optionalRestSlugName+"]]/")),be}_insert(B,le,be){if(B.length===0){this.placeholder=!1;return}if(be)throw Error("Catch-all must be the last part of the URL.");let Xe=B[0];if(Xe.startsWith("[")&&Xe.endsWith("]")){let cr=function(Er,br){if(Er!==null&&Er!==br)throw Error("You cannot use different slug names for the same dynamic path ('"+Er+"' !== '"+br+"').");le.forEach(nn=>{if(nn===br)throw Error('You cannot have the same slug name "'+br+'" repeat within a single dynamic path');if(nn.replace(/\W/g,"")===Xe.replace(/\W/g,""))throw Error('You cannot have the slug names "'+nn+'" and "'+br+'" differ only by non-word symbols within a single dynamic path')}),le.push(br)},ot=Xe.slice(1,-1),Gt=!1;if(ot.startsWith("[")&&ot.endsWith("]")&&(ot=ot.slice(1,-1),Gt=!0),ot.startsWith("...")&&(ot=ot.substring(3),be=!0),ot.startsWith("[")||ot.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+ot+"').");if(ot.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+ot+"').");if(be)if(Gt){if(this.restSlugName!=null)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+B[0]+'" ).');cr(this.optionalRestSlugName,ot),this.optionalRestSlugName=ot,Xe="[[...]]"}else{if(this.optionalRestSlugName!=null)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+B[0]+'").');cr(this.restSlugName,ot),this.restSlugName=ot,Xe="[...]"}else{if(Gt)throw Error('Optional route parameters are not yet supported ("'+B[0]+'").');cr(this.slugName,ot),this.slugName=ot,Xe="[]"}}this.children.has(Xe)||this.children.set(Xe,new dt),this.children.get(Xe)._insert(B.slice(1),le,be)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}class At{constructor(B){this.definition=B,(0,kn.$)(B.pathname)&&(this.dynamic=(0,Ln.t)((0,qn.vG)(B.pathname)))}get identity(){return this.definition.pathname}get isDynamic(){return this.dynamic!==void 0}match(B){let le=this.test(B);return le?{definition:this.definition,params:le.params}:null}test(B){if(this.dynamic){let le=this.dynamic(B);return le?{params:le}:null}return B===this.definition.pathname?{}:null}}class $t extends At{get identity(){var B;return`${this.definition.pathname}?__nextLocale=${(B=this.definition.i18n)==null?void 0:B.locale}`}match(B,le){var be,Xe;let ot=this.test(B,le);return ot?{definition:this.definition,params:ot.params,detectedLocale:(le==null||(be=le.i18n)==null?void 0:be.detectedLocale)??((Xe=this.definition.i18n)==null?void 0:Xe.locale)}:null}test(B,le){return this.definition.i18n&&le?.i18n?this.definition.i18n.locale&&le.i18n.detectedLocale&&this.definition.i18n.locale!==le.i18n.detectedLocale?null:super.test(le.i18n.pathname):super.test(B)}}var Ut=M(9951),Jr=M(4439);class Sr{get compilationID(){return this.providers.length}async waitTillReady(){this.waitTillReadyPromise&&(await this.waitTillReadyPromise,delete this.waitTillReadyPromise)}async reload(){let{promise:B,resolve:le,reject:be}=new Jr.Y;this.waitTillReadyPromise=B;let Xe=this.compilationID;try{let ot=[],Gt=await Promise.all(this.providers.map(dn=>dn.matchers())),cr=new Map,Er={};for(let dn of Gt)for(let Wn of dn){Wn.duplicated&&delete Wn.duplicated;let Un=cr.get(Wn.definition.pathname);if(Un){let ns=Er[Wn.definition.pathname]??[Un];ns.push(Wn),Er[Wn.definition.pathname]=ns,Un.duplicated=ns,Wn.duplicated=ns}ot.push(Wn),cr.set(Wn.definition.pathname,Wn)}if(this.matchers.duplicates=Er,this.previousMatchers.length===ot.length&&this.previousMatchers.every((dn,Wn)=>dn===ot[Wn]))return;this.previousMatchers=ot,this.matchers.static=ot.filter(dn=>!dn.isDynamic);let br=ot.filter(dn=>dn.isDynamic),nn=new Map,Mn=[];for(let dn=0;dn<br.length;dn++){let Wn=br[dn].definition.pathname,Un=nn.get(Wn)??[];Un.push(dn),Un.length===1&&(nn.set(Wn,Un),Mn.push(Wn))}let Bn=function(dn){let Wn=new dt;return dn.forEach(Un=>Wn.insert(Un)),Wn.smoosh()}(Mn),Ci=[];for(let dn of Bn){let Wn=nn.get(dn);if(!Array.isArray(Wn))throw Error("Invariant: expected to find identity in indexes map");let Un=Wn.map(ns=>br[ns]);Ci.push(...Un)}if(this.matchers.dynamic=Ci,this.compilationID!==Xe)throw Error("Invariant: expected compilation to finish before new matchers were added, possible missing await")}catch(ot){be(ot)}finally{this.lastCompilationID=Xe,le()}}push(B){this.providers.push(B)}async test(B,le){return await this.match(B,le)!==null}async match(B,le){for await(let be of this.matchAll(B,le))return be;return null}validate(B,le,be){var Xe;return le instanceof $t?le.match(B,be):(Xe=be.i18n)!=null&&Xe.inferredFromDefault?le.match(be.i18n.pathname):le.match(B)}async*matchAll(B,le){if(this.lastCompilationID!==this.compilationID)throw Error("Invariant: expected routes to have been loaded before match");if(B=(0,Ut.e)(B),!(0,kn.$)(B))for(let be of this.matchers.static){let Xe=this.validate(B,be,le);Xe&&(yield Xe)}if(le?.skipDynamic)return null;for(let be of this.matchers.dynamic){let Xe=this.validate(B,be,le);Xe&&(yield Xe)}return null}constructor(){this.providers=[],this.matchers={static:[],dynamic:[],duplicates:{}},this.lastCompilationID=this.compilationID,this.previousMatchers=[]}}class Qn{constructor(B=[]){this.normalizers=B}push(B){this.normalizers.push(B)}normalize(B){return this.normalizers.reduce((le,be)=>be.normalize(le),B)}}var zn=M(3889),Qr=M.n(zn);class yr{constructor(...B){this.prefix=Qr().posix.join(...B)}normalize(B){return Qr().posix.join(this.prefix,B)}}function pi(Be){return/^\/index(\/|$)/.test(Be)&&!(0,kn.$)(Be)?"/index"+Be:Be==="/"?"/index":(0,Ut.e)(Be)}class wi extends yr{constructor(){super("app")}normalize(B){return super.normalize(pi(B))}}class $a extends yr{constructor(B){super(B,Hs)}normalize(B){return super.normalize(B)}}(function(Be){Be.PAGES="pages",Be.ROOT="root",Be.APP="app"})(z||(z={}));function Lr(Be){return{normalize:Be}}M(1958);class Br{normalize(B){return B.replace(/%5F/g,"_")}}class Nn extends Qn{constructor(){super([Lr(mt.w),new Br])}normalize(B){return super.normalize(B)}}class As{constructor(B){this.filename=new $a(B),this.pathname=new Nn,this.bundlePath=new wi}}(function(Be){Be.PAGES="PAGES",Be.PAGES_API="PAGES_API",Be.APP_PAGE="APP_PAGE",Be.APP_ROUTE="APP_ROUTE"})(y||(y={}));class ql extends At{get identity(){return`${this.definition.pathname}?__nextPage=${this.definition.page}`}}class Jo{constructor(B){this.loader=B,this.cached=[]}async matchers(){let B=await this.loader.load();if(!B)return[];if(this.data&&this.loader.compare(this.data,B))return this.cached;this.data=B;let le=await this.transform(B);return this.cached=le,le}}class qs extends Jo{constructor(B,le){super({load:async()=>le.load(B),compare:(be,Xe)=>be===Xe})}}class xl extends qs{constructor(B,le){super(zi,le),this.normalizers=new As(B)}async transform(B){let le=Object.keys(B).filter(ot=>ot.endsWith("/page")),be={};for(let ot of le){let Gt=this.normalizers.pathname.normalize(ot);Gt in be?be[Gt].push(ot):be[Gt]=[ot]}let Xe=[];for(let[ot,Gt]of Object.entries(be)){let cr=Gt[0],Er=this.normalizers.filename.normalize(B[cr]),br=this.normalizers.bundlePath.normalize(cr);Xe.push(new ql({kind:y.APP_PAGE,pathname:ot,page:cr,bundlePath:br,filename:Er,appPaths:Gt}))}return Xe}}class Au extends At{}class tc extends qs{constructor(B,le){super(zi,le),this.normalizers=new As(B)}async transform(B){let le=Object.keys(B).filter(Xe=>Xe.endsWith("/route")),be=[];for(let Xe of le){let ot=this.normalizers.filename.normalize(B[Xe]),Gt=this.normalizers.pathname.normalize(Xe),cr=this.normalizers.bundlePath.normalize(Xe);be.push(new Au({kind:y.APP_ROUTE,pathname:Gt,page:Xe,bundlePath:cr,filename:ot}))}return be}}function $o(Be){return Be==="/api"||!!Be?.startsWith("/api/")}class Rc extends At{}class ru extends $t{}class ci extends Qn{constructor(){super([Lr(pi),new yr("pages")])}normalize(B){return super.normalize(B)}}class Zo extends yr{constructor(B){super(B,Hs)}normalize(B){return super.normalize(B)}}class ta{constructor(B){this.filename=new Zo(B),this.bundlePath=new ci}}class bi extends qs{constructor(B,le,be){super(si,le),this.i18nProvider=be,this.normalizers=new ta(B)}async transform(B){let le=Object.keys(B).filter(Xe=>$o(Xe)),be=[];for(let Xe of le)if(this.i18nProvider){let{detectedLocale:ot,pathname:Gt}=this.i18nProvider.analyze(Xe);be.push(new ru({kind:y.PAGES_API,pathname:Gt,page:Xe,bundlePath:this.normalizers.bundlePath.normalize(Xe),filename:this.normalizers.filename.normalize(B[Xe]),i18n:{locale:ot}}))}else be.push(new Rc({kind:y.PAGES_API,pathname:Xe,page:Xe,bundlePath:this.normalizers.bundlePath.normalize(Xe),filename:this.normalizers.filename.normalize(B[Xe])}));return be}}class Mo extends At{}class Ts extends $t{}class io extends qs{constructor(B,le,be){super(si,le),this.i18nProvider=be,this.normalizers=new ta(B)}async transform(B){let le=Object.keys(B).filter(Xe=>!$o(Xe)).filter(Xe=>{var ot;let Gt=((ot=this.i18nProvider)==null?void 0:ot.analyze(Xe).pathname)??Xe;return!es.includes(Gt)}),be=[];for(let Xe of le)if(this.i18nProvider){let{detectedLocale:ot,pathname:Gt}=this.i18nProvider.analyze(Xe);be.push(new Ts({kind:y.PAGES,pathname:Gt,page:Xe,bundlePath:this.normalizers.bundlePath.normalize(Xe),filename:this.normalizers.filename.normalize(B[Xe]),i18n:{locale:ot}}))}else be.push(new Mo({kind:y.PAGES,pathname:Xe,page:Xe,bundlePath:this.normalizers.bundlePath.normalize(Xe),filename:this.normalizers.filename.normalize(B[Xe])}));return be}}class Ns{constructor(B){this.getter=B}load(B){return this.getter(B)}}class An{constructor(B){var le;if(this.config=B,!B.locales.length)throw Error("Invariant: No locales provided");this.lowerCaseLocales=B.locales.map(be=>be.toLowerCase()),this.lowerCaseDomains=(le=B.domains)==null?void 0:le.map(be=>{var Xe;let ot=be.domain.toLowerCase();return{defaultLocale:be.defaultLocale.toLowerCase(),hostname:ot.split(":",1)[0],domain:ot,locales:(Xe=be.locales)==null?void 0:Xe.map(Gt=>Gt.toLowerCase()),http:be.http}})}detectDomainLocale(B,le){if(B&&this.lowerCaseDomains&&this.config.domains){le&&(le=le.toLowerCase());for(let Xe=0;Xe<this.lowerCaseDomains.length;Xe++){var be;let ot=this.lowerCaseDomains[Xe];if(ot.hostname===B||((be=ot.locales)==null?void 0:be.some(Gt=>Gt===le)))return this.config.domains[Xe]}}}fromQuery(B,le){let be=le.__nextLocale;if(be){let Xe=this.analyze(B);if(Xe.detectedLocale){if(Xe.detectedLocale!==be)throw Error(`Invariant: The detected locale does not match the locale in the query. Expected to find '${be}' in '${B}' but found '${Xe.detectedLocale}'}`);B=Xe.pathname}}return{pathname:B,detectedLocale:be,inferredFromDefault:le.__nextInferredLocaleFromDefault==="1"}}validate(B){return this.lowerCaseLocales.includes(B.toLowerCase())}validateQuery(B){return(!B.__nextLocale||!!this.validate(B.__nextLocale))&&(!B.__nextDefaultLocale||!!this.validate(B.__nextDefaultLocale))}analyze(B,le={}){let be=le.defaultLocale,Xe=typeof be=="string",ot=B.split("/",2);if(!ot[1])return{detectedLocale:be,pathname:B,inferredFromDefault:Xe};let Gt=ot[1].toLowerCase(),cr=this.lowerCaseLocales.indexOf(Gt);return cr<0||(be=this.config.locales[cr],Xe=!1,B=B.slice(be.length+1)||"/"),{detectedLocale:be,pathname:B,inferredFromDefault:Xe}}}async function Qa(Be,B,le,be){}M(4009),M(3655);var zl=M(3395);let ii=In("/_next/data/:path*");class ba{constructor(B){this.suffix=B}match(B){return!!B.endsWith(this.suffix)}normalize(B,le){return le||this.match(B)?B.substring(0,B.length-this.suffix.length):B}}class Gl extends ba{constructor(){super(et.hd)}}class Hl{constructor(B){if(this.prefix=B,B.endsWith("/"))throw Error(`PrefixPathnameNormalizer: prefix "${B}" should not end with a slash`)}match(B){return!!(B===this.prefix||B.startsWith(this.prefix+"/"))}normalize(B,le){return le||this.match(B)?B.length===this.prefix.length?"/":B.substring(this.prefix.length):B}}class nu extends Hl{constructor(){super("/_next/postponed/resume")}normalize(B,le){return le||this.match(B)?En(B=super.normalize(B,!0)):B}}class so extends ba{constructor(){super(et.Vz)}}function Cl(Be){for(let[B]of lt.vu)delete Be[B.toLowerCase()]}class fc extends ba{constructor(){super(et.Sx)}}class Pc{constructor(B){if(this.suffix=new ba(".json"),!B)throw Error("Invariant: buildID is required");this.prefix=new Hl(`/_next/data/${B}`)}match(B){return this.prefix.match(B)&&this.suffix.match(B)}normalize(B,le){return le||this.match(B)?(B=this.prefix.normalize(B,!0),En(B=this.suffix.normalize(B,!0))):B}}var pa=M(7514);function Qt(Be){return Be.replace(/(?:\/index)?\/?$/,"")||"/"}var Sa=M(6195).Buffer;class ma extends Error{}class wl extends Error{constructor(B){super(),this.innerError=B}}class pc{constructor(B){var le,be,Xe;this.handleRSCRequest=(di,Di,ri)=>{var xn,Ti;if(!ri.pathname)return!1;if((xn=this.normalizers.prefetchRSC)!=null&&xn.match(ri.pathname))ri.pathname=this.normalizers.prefetchRSC.normalize(ri.pathname,!0),di.headers[lt.A.toLowerCase()]="1",di.headers[lt.qw.toLowerCase()]="1",(0,Gi.kL)(di,"isRSCRequest",!0),(0,Gi.kL)(di,"isPrefetchRSCRequest",!0);else if((Ti=this.normalizers.rsc)!=null&&Ti.match(ri.pathname))ri.pathname=this.normalizers.rsc.normalize(ri.pathname,!0),di.headers[lt.A.toLowerCase()]="1",(0,Gi.kL)(di,"isRSCRequest",!0);else return di.headers["x-now-route-matches"]&&Cl(di.headers),!1;if(di.url){let Js=(0,Or.parse)(di.url);Js.pathname=ri.pathname,di.url=(0,Or.format)(Js)}return!1},this.handleNextDataRequest=async(di,Di,ri)=>{let xn=this.getMiddleware(),Ti=function(Yi){return typeof Yi=="string"&&ii(Yi)}(ri.pathname);if(!Ti||!Ti.path)return!1;if(Ti.path[0]!==this.buildId)return await this.render404(di,Di,ri),!0;Ti.path.shift();let Js=Ti.path[Ti.path.length-1];if(typeof Js!="string"||!Js.endsWith(".json"))return await this.render404(di,Di,ri),!0;let ga=`/${Ti.path.join("/")}`;if(ga=function(Yi,Ms){return Ms===void 0&&(Ms=""),Yi=Yi.replace(/\\/g,"/"),(Yi=Ms&&Yi.endsWith(Ms)?Yi.slice(0,-Ms.length):Yi).startsWith("/index/")&&!(0,kn.$)(Yi)?Yi=Yi.slice(6):Yi==="/index"&&(Yi="/"),Yi}(ga,".json"),xn&&(this.nextConfig.trailingSlash&&!ga.endsWith("/")&&(ga+="/"),!this.nextConfig.trailingSlash&&ga.length>1&&ga.endsWith("/")&&(ga=ga.substring(0,ga.length-1))),this.i18nProvider){var xi;let Yi=di==null||(xi=di.headers.host)==null?void 0:xi.split(":",1)[0].toLowerCase(),Ms=this.i18nProvider.detectDomainLocale(Yi),qa=Ms?.defaultLocale??this.i18nProvider.config.defaultLocale,Ka=this.i18nProvider.analyze(ga);if(Ka.detectedLocale&&(ga=Ka.pathname),ri.query.__nextLocale=Ka.detectedLocale,ri.query.__nextDefaultLocale=qa,Ka.detectedLocale||delete ri.query.__nextInferredLocaleFromDefault,!Ka.detectedLocale&&!xn)return ri.query.__nextLocale=qa,await this.render404(di,Di,ri),!0}return ri.pathname=ga,ri.query.__nextDataReq="1",!1},this.handleNextImageRequest=()=>!1,this.handleCatchallRenderRequest=()=>!1,this.handleCatchallMiddlewareRequest=()=>!1,this.normalize=di=>{let Di=[];for(let ri of(this.normalizers.data&&Di.push(this.normalizers.data),this.normalizers.postponed&&Di.push(this.normalizers.postponed),this.normalizers.prefetchRSC&&Di.push(this.normalizers.prefetchRSC),this.normalizers.rsc&&Di.push(this.normalizers.rsc),this.normalizers.action&&Di.push(this.normalizers.action),Di))if(ri.match(di))return ri.normalize(di,!0);return di},this.normalizeAndAttachMetadata=async(di,Di,ri)=>{let xn=await this.handleNextImageRequest(di,Di,ri);return!!(xn||this.enabledDirectories.pages&&(xn=await this.handleNextDataRequest(di,Di,ri)))},this.prepared=!1,this.preparedPromise=null,this.customErrorNo404Warn=(0,gn.gf)(()=>{Kr.ZK(`You have added a custom /_error page without a custom /404 page. This prevents the 404 page from being auto statically optimized.
See here for info: https://nextjs.org/docs/messages/custom-error-no-custom-404`)});let{dir:ot=".",quiet:Gt=!1,conf:cr,dev:Er=!1,minimalMode:br=!1,customServer:nn=!0,hostname:Mn,port:Bn,experimentalTestProxy:Ci}=B;this.experimentalTestProxy=Ci,this.serverOptions=B,this.dir=ot,this.quiet=Gt,this.loadEnvConfig({dev:Er}),this.nextConfig=cr,this.hostname=Mn,this.hostname&&(this.fetchHostname=function(di){return rn.test(di)?`[${di}]`:di}(this.hostname)),this.port=Bn,this.distDir=this.nextConfig.distDir,this.publicDir=this.getPublicDir(),this.hasStaticDir=!br&&this.getHasStaticDir(),this.i18nProvider=(le=this.nextConfig.i18n)!=null&&le.locales?new An(this.nextConfig.i18n):void 0,this.localeNormalizer=this.i18nProvider?new Te(this.i18nProvider):void 0;let{serverRuntimeConfig:dn={},publicRuntimeConfig:Wn,assetPrefix:Un,generateEtags:ns}=this.nextConfig;this.buildId=this.getBuildId(),this.minimalMode=br||!!process.env.NEXT_PRIVATE_MINIMAL_MODE,this.enabledDirectories=this.getEnabledDirectories(Er),this.normalizers={postponed:this.enabledDirectories.app&&this.nextConfig.experimental.ppr&&this.minimalMode?new nu:void 0,rsc:this.enabledDirectories.app&&this.minimalMode?new Gl:void 0,prefetchRSC:this.enabledDirectories.app&&this.nextConfig.experimental.ppr&&this.minimalMode?new fc:void 0,data:this.enabledDirectories.pages?new Pc(this.buildId):void 0,action:this.enabledDirectories.app&&this.minimalMode?new so:void 0},this.nextFontManifest=this.getNextFontManifest(),this.renderOpts={supportsDynamicResponse:!0,trailingSlash:this.nextConfig.trailingSlash,deploymentId:this.nextConfig.deploymentId,strictNextHead:!!this.nextConfig.experimental.strictNextHead,poweredByHeader:this.nextConfig.poweredByHeader,canonicalBase:this.nextConfig.amp.canonicalBase||"",buildId:this.buildId,generateEtags:ns,previewProps:this.getPrerenderManifest().preview,customServer:nn===!0||void 0,ampOptimizerConfig:(be=this.nextConfig.experimental.amp)==null?void 0:be.optimizer,basePath:this.nextConfig.basePath,images:this.nextConfig.images,optimizeFonts:this.nextConfig.optimizeFonts,fontManifest:this.nextConfig.optimizeFonts&&!Er?this.getFontManifest():void 0,optimizeCss:this.nextConfig.experimental.optimizeCss,nextConfigOutput:this.nextConfig.output,nextScriptWorkers:this.nextConfig.experimental.nextScriptWorkers,disableOptimizedLoading:this.nextConfig.experimental.disableOptimizedLoading,domainLocales:(Xe=this.nextConfig.i18n)==null?void 0:Xe.domains,distDir:this.distDir,serverComponents:this.enabledDirectories.app,enableTainting:this.nextConfig.experimental.taint,crossOrigin:this.nextConfig.crossOrigin?this.nextConfig.crossOrigin:void 0,largePageDataBytes:this.nextConfig.experimental.largePageDataBytes,runtimeConfig:Object.keys(Wn).length>0?Wn:void 0,isExperimentalCompile:this.nextConfig.experimental.isExperimentalCompile,experimental:{ppr:this.enabledDirectories.app&&this.nextConfig.experimental.ppr===!0,missingSuspenseWithCSRBailout:this.nextConfig.experimental.missingSuspenseWithCSRBailout===!0,swrDelta:this.nextConfig.experimental.swrDelta}},this.pagesManifest=this.getPagesManifest(),this.appPathsManifest=this.getAppPathsManifest(),this.appPathRoutes=this.getAppPathRoutes(),this.interceptionRoutePatterns=this.getinterceptionRoutePatterns(),this.matchers=this.getRouteMatchers(),this.matchers.reload(),this.setAssetPrefix(Un),this.responseCache=this.getResponseCache({dev:Er})}reloadMatchers(){return this.matchers.reload()}getRouteMatchers(){let B=new Ns(be=>{switch(be){case si:return this.getPagesManifest()??null;case zi:return this.getAppPathsManifest()??null;default:return null}}),le=new Sr;return le.push(new io(this.distDir,B,this.i18nProvider)),le.push(new bi(this.distDir,B,this.i18nProvider)),this.enabledDirectories.app&&(le.push(new xl(this.distDir,B)),le.push(new tc(this.distDir,B))),le}logError(B){this.quiet||Kr.vU(B)}async handleRequest(B,le,be){await this.prepare();let Xe=B.method.toUpperCase(),ot=Bo(B)?"RSC ":"",Gt=(0,Ee.Yz)();return Gt.withPropagatedContext(B.headers,()=>Gt.trace(Qe._J.handleRequest,{spanName:`${ot}${Xe} ${B.url}`,kind:Ee.MU.SERVER,attributes:{"http.method":Xe,"http.target":B.url,"next.rsc":!!ot}},async cr=>this.handleRequestImpl(B,le,be).finally(()=>{if(!cr)return;cr.setAttributes({"http.status_code":le.statusCode});let Er=Gt.getRootSpanAttributes();if(!Er)return;if(Er.get("next.span_type")!==Qe._J.handleRequest){console.warn(`Unexpected root span type '${Er.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);return}let br=Er.get("next.route");if(br){let nn=`${ot}${Xe} ${br}`;cr.setAttributes({"next.route":br,"http.route":br,"next.span_name":nn}),cr.updateName(nn)}})))}async handleRequestImpl(B,le,be){try{var Xe,ot,Gt,cr,Er,br,nn,Mn,Bn,Ci;await this.matchers.waitTillReady();let dn=le.originalResponse||le,Wn=dn.setHeader.bind(dn);dn.setHeader=(xi,Yi)=>{if(!dn.headersSent){if(xi.toLowerCase()==="set-cookie"){let Ms=(0,Gi.OX)(B,"middlewareCookie");Ms&&Array.isArray(Yi)&&Yi.every((qa,Ka)=>qa===Ms[Ka])||(Yi=[...new Set([...Ms||[],...typeof Yi=="string"?[Yi]:Array.isArray(Yi)?Yi:[]])])}return Wn(xi,Yi)}};let Un=(B.url||"").split("?",1)[0];if(Un?.match(/(\\|\/\/)/)){let xi=(0,gn.U3)(B.url);le.redirect(xi,308).body(xi).send();return}if(!be||typeof be!="object"){if(!B.url)throw Error("Invariant: url can not be undefined");be=(0,Or.parse)(B.url,!0)}if(!be.pathname)throw Error("Invariant: pathname can't be empty");typeof be.query=="string"&&(be.query=Object.fromEntries(new URLSearchParams(be.query)));let{originalRequest:ns=B}=B,di=ns?.headers["x-forwarded-proto"],Di=di?di==="https":!!(!(ns==null||(Xe=ns.socket)==null)&&Xe.encrypted);if(B.headers["x-forwarded-host"]??=B.headers.host??this.hostname,B.headers["x-forwarded-port"]??=this.port?this.port.toString():Di?"443":"80",B.headers["x-forwarded-proto"]??=Di?"https":"http",B.headers["x-forwarded-for"]??=(ot=ns.socket)==null?void 0:ot.remoteAddress,(Gt=this.i18nProvider)!=null&&Gt.validateQuery(be.query)||(delete be.query.__nextLocale,delete be.query.__nextDefaultLocale,delete be.query.__nextInferredLocaleFromDefault),this.attachRequestMeta(B,be),this.minimalMode&&this.enabledDirectories.app&&await this.handleRSCRequest(B,le,be))return;let ri=(cr=this.i18nProvider)==null?void 0:cr.detectDomainLocale((0,Bs.F)(be,B.headers)),xn=ri?.defaultLocale||((Er=this.nextConfig.i18n)==null?void 0:Er.defaultLocale);be.query.__nextDefaultLocale=xn;let Ti=fi(B.url.replace(/^\/+/,"/")),Js=(0,wo.a)(Ti.pathname,{nextConfig:this.nextConfig,i18nProvider:this.i18nProvider});Ti.pathname=Js.pathname,Js.basePath&&(B.url=(0,na.n)(B.url,this.nextConfig.basePath));let ga=this.minimalMode&&typeof B.headers["x-matched-path"]=="string";if(ga)try{this.enabledDirectories.app&&(B.url.match(/^\/index($|\?)/)&&(B.url=B.url.replace(/^\/index/,"/")),be.pathname=be.pathname==="/index"?"/":be.pathname);let{pathname:xi}=new URL(B.headers["x-matched-path"],"http://localhost"),{pathname:Yi}=new URL(B.url,"http://localhost");if((br=this.normalizers.data)!=null&&br.match(Yi))be.query.__nextDataReq="1";else if(((nn=this.normalizers.postponed)==null?void 0:nn.match(xi))&&B.method==="POST"){let V=[];for await(let ne of B.body)V.push(ne);let L=Sa.concat(V).toString("utf8");(0,Gi.kL)(B,"postponed",L),B.headers["x-now-route-matches"]||(Yi=this.normalizers.postponed.normalize(xi,!0))}xi=this.normalize(xi);let Ms=this.stripNextDataPath(Yi),qa=(Mn=this.i18nProvider)==null?void 0:Mn.analyze(xi,{defaultLocale:xn});qa&&(be.query.__nextLocale=qa.detectedLocale,qa.inferredFromDefault?be.query.__nextInferredLocaleFromDefault="1":delete be.query.__nextInferredLocaleFromDefault);let Ka=xi=En(xi),aa=(0,kn.$)(Ka);if(!aa){let V=await this.matchers.match(Ka,{i18n:qa});V&&(Ka=V.definition.pathname,aa=V.params!==void 0)}qa&&(xi=qa.pathname);let gs=function({page:V,i18n:L,basePath:ne,rewrites:Pe,pageIsDynamic:Oe,trailingSlash:kt,caseSensitive:Nt}){let Mt,sr,vr;return Oe&&(Mt=(0,qn.JV)(V,!1),vr=(sr=(0,Ln.t)(Mt))(V)),{handleRewrites:function(kr,Mr){let fn={},ti=Mr.pathname,Fn=yn=>{let bn=In(yn.source+(kt?"(/)?":""),{removeUnnamedParams:!0,strict:!0,sensitive:!!Nt})(Mr.pathname);if((yn.has||yn.missing)&&bn){let Ur=function(hs,Pr,Si,mn){Si===void 0&&(Si=[]),mn===void 0&&(mn=[]);let ki={},Es=Fi=>{let Ai,Qs=Fi.key;switch(Fi.type){case"header":Qs=Qs.toLowerCase(),Ai=hs.headers[Qs];break;case"cookie":Ai="cookies"in hs?hs.cookies[Fi.key]:ds(hs.headers)()[Fi.key];break;case"query":Ai=Pr[Qs];break;case"host":{let{host:Ls}=hs?.headers||{};Ai=Ls?.split(":",1)[0].toLowerCase()}}if(!Fi.value&&Ai)return ki[function(Ls){let ca="";for(let Zr=0;Zr<Ls.length;Zr++){let _s=Ls.charCodeAt(Zr);(_s>64&&_s<91||_s>96&&_s<123)&&(ca+=Ls[Zr])}return ca}(Qs)]=Ai,!0;if(Ai){let Ls=RegExp("^"+Fi.value+"$"),ca=Array.isArray(Ai)?Ai.slice(-1)[0].match(Ls):Ai.match(Ls);if(ca)return Array.isArray(ca)&&(ca.groups?Object.keys(ca.groups).forEach(Zr=>{ki[Zr]=ca.groups[Zr]}):Fi.type==="host"&&ca[0]&&(ki.host=ca[0])),!0}return!1};return!!Si.every(Fi=>Es(Fi))&&!mn.some(Fi=>Es(Fi))&&ki}(kr,Mr.query,yn.has,yn.missing);Ur?Object.assign(bn,Ur):bn=!1}if(bn){let{parsedDestination:Ur,destQuery:hs}=function(Pr){let Si,mn=Object.assign({},Pr.query);delete mn.__nextLocale,delete mn.__nextDefaultLocale,delete mn.__nextDataReq,delete mn.__nextInferredLocaleFromDefault,delete mn[lt.H4];let ki=Pr.destination;for(let _r of Object.keys({...Pr.params,...mn}))ki=ki.replace(RegExp(":"+(0,Ei.f)(_r),"g"),"__ESC_COLON_"+_r);let Es=fi(ki),Fi=Es.query,Ai=ui(""+Es.pathname+(Es.hash||"")),Qs=ui(Es.hostname||""),Ls=[],ca=[];(0,pn.Bo)(Ai,Ls),(0,pn.Bo)(Qs,ca);let Zr=[];Ls.forEach(_r=>Zr.push(_r.name)),ca.forEach(_r=>Zr.push(_r.name));let _s=(0,pn.MY)(Ai,{validate:!1}),zs=(0,pn.MY)(Qs,{validate:!1});for(let[_r,Nr]of Object.entries(Fi))Array.isArray(Nr)?Fi[_r]=Nr.map(Cn=>Ki(ui(Cn),Pr.params)):typeof Nr=="string"&&(Fi[_r]=Ki(ui(Nr),Pr.params));let go=Object.keys(Pr.params).filter(_r=>_r!=="nextInternalLocale");if(Pr.appendParamsToQuery&&!go.some(_r=>Zr.includes(_r)))for(let _r of go)_r in Fi||(Fi[_r]=Pr.params[_r]);if((0,Us.Ag)(Ai))for(let _r of Ai.split("/")){let Nr=Us.Wz.find(Cn=>_r.startsWith(Cn));if(Nr){Pr.params[0]=Nr;break}}try{let[_r,Nr]=(Si=_s(Pr.params)).split("#",2);Es.hostname=zs(Pr.params),Es.pathname=_r,Es.hash=(Nr?"#":"")+(Nr||""),delete Es.search}catch(_r){throw _r.message.match(/Expected .*? to not repeat, but got an array/)?Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match"):_r}return Es.query={...mn,...Es.query},{newUrl:Si,destQuery:Fi,parsedDestination:Es}}({appendParamsToQuery:!0,destination:yn.destination,params:bn,query:Mr.query});if(Ur.protocol)return!0;if(Object.assign(fn,hs,bn),Object.assign(Mr.query,Ur.query),delete Ur.query,Object.assign(Mr,Ur),ti=Mr.pathname,ne&&(ti=ti.replace(RegExp(`^${ne}`),"")||"/"),L){let Pr=(0,li.h)(ti,L.locales);ti=Pr.pathname,Mr.query.nextInternalLocale=Pr.detectedLocale||bn.nextInternalLocale}if(ti===V)return!0;if(Oe&&sr){let Pr=sr(ti);if(Pr)return Mr.query={...Mr.query,...Pr},!0}}return!1};for(let yn of Pe.beforeFiles||[])Fn(yn);if(ti!==V){let yn=!1;for(let bn of Pe.afterFiles||[])if(yn=Fn(bn))break;if(!yn&&!(()=>{let bn=(0,tr.Q)(ti||"");return bn===(0,tr.Q)(V)||sr?.(bn)})()){for(let bn of Pe.fallback||[])if(yn=Fn(bn))break}}return fn},defaultRouteRegex:Mt,dynamicRouteMatcher:sr,defaultRouteMatches:vr,getParamsFromRouteMatches:function(kr,Mr,fn){return(0,Ln.t)(function(){let{groups:ti,routeKeys:Fn}=Mt;return{re:{exec:yn=>{let bn=Object.fromEntries(new URLSearchParams(yn)),Ur=L&&fn&&bn[1]===fn;for(let Si of Object.keys(bn)){let mn=bn[Si];Si!==et.dN&&Si.startsWith(et.dN)&&(bn[Si.substring(et.dN.length)]=mn,delete bn[Si])}let hs=Object.keys(Fn||{}),Pr=Si=>{if(L){let mn=Array.isArray(Si),ki=mn?Si[0]:Si;if(typeof ki=="string"&&L.locales.some(Es=>Es.toLowerCase()===ki.toLowerCase()&&(fn=Es,Mr.locale=fn,!0)))return mn&&Si.splice(0,1),!mn||Si.length===0}return!1};return hs.every(Si=>bn[Si])?hs.reduce((Si,mn)=>{let ki=Fn?.[mn];return ki&&!Pr(bn[mn])&&(Si[ti[ki].pos]=bn[mn]),Si},{}):Object.keys(bn).reduce((Si,mn)=>{if(!Pr(bn[mn])){let ki=mn;return Ur&&(ki=parseInt(mn,10)-1+""),Object.assign(Si,{[ki]:bn[mn]})}return Si},{})}},groups:ti}}())(kr.headers["x-now-route-matches"])},normalizeDynamicRouteParams:(kr,Mr)=>wa(kr,Mr,Mt,vr),normalizeVercelUrl:(kr,Mr,fn)=>$s(kr,Mr,fn,Oe,Mt),interpolateDynamicPath:(kr,Mr)=>Is(kr,Mr,Mt)}}({pageIsDynamic:aa,page:Ka,i18n:this.nextConfig.i18n,basePath:this.nextConfig.basePath,rewrites:((Bn=this.getRoutesManifest())==null?void 0:Bn.rewrites)||{beforeFiles:[],afterFiles:[],fallback:[]},caseSensitive:!!this.nextConfig.experimental.caseSensitiveRoutes});xn&&!Js.locale&&(be.pathname=`/${xn}${be.pathname}`);let Qo=be.pathname,Ro=gs.handleRewrites(B,be),ul=Object.keys(Ro),rl=Qo!==be.pathname;rl&&be.pathname&&(0,Gi.kL)(B,"rewroteURL",be.pathname);let ic=new Set;for(let V of Object.keys(be.query)){let L=be.query[V];if(V!==et.dN&&V.startsWith(et.dN)){let ne=V.substring(et.dN.length);be.query[ne]=L,ic.add(ne),delete be.query[V]}}if(aa){let V={},L=gs.normalizeDynamicRouteParams(be.query);if(!L.hasValidParams&&aa&&!(0,kn.$)(Ms)){let ne=gs.dynamicRouteMatcher==null?void 0:gs.dynamicRouteMatcher.call(gs,Ms);ne&&(gs.normalizeDynamicRouteParams(ne),Object.assign(L.params,ne),L.hasValidParams=!0)}if(L.hasValidParams&&(V=L.params),B.headers["x-now-route-matches"]&&(0,kn.$)(xi)&&!L.hasValidParams){let ne={},Pe=gs.getParamsFromRouteMatches(B,ne,be.query.__nextLocale||"");ne.locale&&(be.query.__nextLocale=ne.locale,delete be.query.__nextInferredLocaleFromDefault),(L=gs.normalizeDynamicRouteParams(Pe,!0)).hasValidParams&&(V=L.params)}aa&&gs.defaultRouteMatches&&Ms===Ka&&!L.hasValidParams&&!gs.normalizeDynamicRouteParams({...V},!0).hasValidParams&&(V=gs.defaultRouteMatches),V&&(xi=gs.interpolateDynamicPath(Ka,V),B.url=gs.interpolateDynamicPath(B.url,V))}for(let V of((aa||rl)&&gs.normalizeVercelUrl(B,!0,[...ul,...Object.keys(((Ci=gs.defaultRouteRegex)==null?void 0:Ci.groups)||{})]),ic))delete be.query[V];if(be.pathname=xi,Ti.pathname=be.pathname,await this.normalizeAndAttachMetadata(B,le,be))return}catch(xi){if(xi instanceof gn._9||xi instanceof gn.KM)return le.statusCode=400,this.renderError(null,B,le,"/_error",{});throw xi}if((0,Gi.kL)(B,"isLocaleDomain",!!ri),Js.locale&&(B.url=(0,Or.format)(Ti),(0,Gi.kL)(B,"didStripLocale",!0)),this.minimalMode&&be.query.__nextLocale||(Js.locale?be.query.__nextLocale=Js.locale:xn&&(be.query.__nextLocale=xn,be.query.__nextInferredLocaleFromDefault="1")),!this.serverOptions.webServerConfig&&!(0,Gi.OX)(B,"incrementalCache")){let xi="https:";try{xi=new URL((0,Gi.OX)(B,"initURL")||"/","http://n").protocol}catch{}let Yi=await this.getIncrementalCache({requestHeaders:Object.assign({},B.headers),requestProtocol:xi.substring(0,xi.length-1)});Yi.resetRequestCache(),(0,Gi.kL)(B,"incrementalCache",Yi),hn.__incrementalCache=Yi}return(0,Gi.OX)(B,"invokePath"),!ga&&Js.basePath&&(be.pathname=(0,na.n)(be.pathname,Js.basePath)),le.statusCode=200,await this.run(B,le,be)}catch(dn){if(dn instanceof ma)throw dn;if(dn&&typeof dn=="object"&&dn.code==="ERR_INVALID_URL"||dn instanceof gn._9||dn instanceof gn.KM)return le.statusCode=400,this.renderError(null,B,le,"/_error",{});if(this.minimalMode||this.renderOpts.dev||dn.bubble)throw dn;this.logError(ea(dn)),le.statusCode=500,le.body("Internal Server Error").send()}}getRequestHandlerWithMetadata(B){let le=this.getRequestHandler();return(be,Xe,ot)=>((0,Gi.lx)(be,B),le(be,Xe,ot))}getRequestHandler(){return this.handleRequest.bind(this)}setAssetPrefix(B){this.renderOpts.assetPrefix=B?B.replace(/\/$/,""):""}async prepare(){if(!this.prepared)return this.preparedPromise===null&&(this.preparedPromise=this.prepareImpl().then(()=>{this.prepared=!0,this.preparedPromise=null})),this.preparedPromise}async prepareImpl(){}async close(){}getAppPathRoutes(){let B={};return Object.keys(this.appPathsManifest||{}).forEach(le=>{let be=(0,mt.w)(le);B[be]||(B[be]=[]),B[be].push(le)}),B}async run(B,le,be){return(0,Ee.Yz)().trace(Qe._J.run,async()=>this.runImpl(B,le,be))}async runImpl(B,le,be){await this.handleCatchallRenderRequest(B,le,be)}async pipe(B,le){return(0,Ee.Yz)().trace(Qe._J.pipe,async()=>this.pipeImpl(B,le))}async pipeImpl(B,le){let be=(0,zt.Q)(le.req.headers["user-agent"]||""),Xe={...le,renderOpts:{...this.renderOpts,supportsDynamicResponse:!be,isBot:!!be}},ot=await B(Xe);if(ot===null)return;let{req:Gt,res:cr}=Xe,Er=cr.statusCode,{body:br,type:nn}=ot,{revalidate:Mn}=ot;if(!cr.sent){let{generateEtags:Bn,poweredByHeader:Ci,dev:dn}=this.renderOpts;dn&&(cr.setHeader("Cache-Control","no-store, must-revalidate"),Mn=void 0),await this.sendRenderResult(Gt,cr,{result:br,type:nn,generateEtags:Bn,poweredByHeader:Ci,revalidate:Mn,swrDelta:this.nextConfig.experimental.swrDelta}),cr.statusCode=Er}}async getStaticHTML(B,le){let be={...le,renderOpts:{...this.renderOpts,supportsDynamicResponse:!1}},Xe=await B(be);return Xe===null?null:Xe.body.toUnchunkedString()}async render(B,le,be,Xe={},ot,Gt=!1){return(0,Ee.Yz)().trace(Qe._J.render,async()=>this.renderImpl(B,le,be,Xe,ot,Gt))}async renderImpl(B,le,be,Xe={},ot,Gt=!1){var cr,Er;return be.startsWith("/")||console.warn(`Cannot render page with path "${be}", did you mean "/${be}"?. See more info here: https://nextjs.org/docs/messages/render-no-starting-slash`),this.renderOpts.customServer&&be==="/index"&&!await this.hasPage("/index")&&(be="/"),!Gt&&!this.minimalMode&&!Xe.__nextDataReq&&(((cr=B.url)==null?void 0:cr.match(/^\/_next\//))||this.hasStaticDir&&B.url.match(/^\/static\//))?this.handleRequest(B,le,ot):(Er=be,es.includes(Er)?this.render404(B,le,ot):this.pipe(br=>this.renderToResponse(br),{req:B,res:le,pathname:be,query:Xe}))}async getStaticPaths({pathname:B}){var le;let be=(le=this.getPrerenderManifest().dynamicRoutes[B])==null?void 0:le.fallback;return{staticPaths:void 0,fallbackMode:typeof be=="string"?"static":be===null?"blocking":be}}async renderToResponseWithComponents(B,le){return(0,Ee.Yz)().trace(Qe._J.renderToResponseWithComponents,async()=>this.renderToResponseWithComponentsImpl(B,le))}pathCouldBeIntercepted(B){return(0,Us.Ag)(B)||this.interceptionRoutePatterns.some(le=>le.test(B))}setVaryHeader(B,le,be,Xe){let ot=`${lt.A}, ${lt.ph}, ${lt.qw}`,Gt=Bo(B),cr=!1;be&&this.pathCouldBeIntercepted(Xe)?(le.setHeader("vary",`${ot}, ${lt.TP}`),cr=!0):(be||Gt)&&le.setHeader("vary",ot),cr||delete B.headers[lt.TP]}async renderToResponseWithComponentsImpl({req:B,res:le,pathname:be,renderOpts:Xe},{components:ot,query:Gt}){var cr,Er,br,nn,Mn,Bn,Ci;let dn,Wn,Un;be===Pt&&(be="/404");let ns=be==="/_error",di=be==="/404"||ns&&le.statusCode===404,Di=be==="/500"||ns&&le.statusCode===500,ri=ot.isAppPath===!0,xn=!!ot.getServerSideProps,Ti=!!ot.getStaticPaths,Js=(0,pa.x)(B),ga=!!((cr=ot.Component)!=null&&cr.getInitialProps),xi=!!ot.getStaticProps,Yi=(0,Or.parse)(B.url||"").pathname||"/",Ms=(0,Gi.OX)(B,"rewroteURL")||Yi;this.setVaryHeader(B,le,ri,Ms);let qa=!1,Ka=(0,kn.$)(ot.page),aa=this.getPrerenderManifest();if(ri&&Ka){let Fn=await this.getStaticPaths({pathname:be,page:ot.page,isAppPath:ri,requestHeaders:B.headers});if(dn=Fn.staticPaths,qa=(Wn=Fn.fallbackMode)!==void 0,this.nextConfig.output==="export"){let yn=ot.page;if(Wn!=="static")throw Error(`Page "${yn}" is missing exported function "generateStaticParams()", which is required with "output: export" config.`);let bn=(0,tr.Q)(Ms);if(!dn?.includes(bn))throw Error(`Page "${yn}" is missing param "${bn}" in "generateStaticParams()", which is required with "output: export" config.`)}qa&&(Ti=!0)}qa||dn?.includes(Ms)||B.headers["x-now-route-matches"]?xi=!0:this.renderOpts.dev||(xi||=!!aa.routes[Qt(be)]);let gs=!!(Gt.__nextDataReq||B.headers["x-nextjs-data"]&&this.serverOptions.webServerConfig)&&(xi||xn),Qo=(B.headers[lt.qw.toLowerCase()]==="1"||(0,Gi.OX)(B,"isPrefetchRSCRequest"))??!1;if(!xi&&B.headers["x-middleware-prefetch"]&&!(di||be==="/_error"))return le.setHeader("x-matched-path",be),le.setHeader("x-middleware-skip","1"),le.setHeader("cache-control","private, no-cache, no-store, max-age=0, must-revalidate"),le.body("{}").send(),null;delete Gt.__nextDataReq,xi&&this.minimalMode&&B.headers["x-matched-path"]&&B.url.startsWith("/_next/data")&&(B.url=this.stripNextDataPath(B.url)),B.headers["x-nextjs-data"]&&(!le.statusCode||le.statusCode===200)&&le.setHeader("x-nextjs-matched-path",`${Gt.__nextLocale?`/${Gt.__nextLocale}`:""}${be}`);let Ro=Bo(B),ul=(0,Gi.OX)(B,"postponed"),rl=Xe.experimental.ppr&&Ro&&!Qo;if(!di||gs||Ro||(le.statusCode=404),Ri.includes(be)&&(le.statusCode=parseInt(be.slice(1),10)),!Js&&!ul&&!di&&!Di&&be!=="/_error"&&B.method!=="HEAD"&&B.method!=="GET"&&(typeof ot.Component=="string"||xi))return le.statusCode=405,le.setHeader("Allow",["GET","HEAD"]),await this.renderError(null,B,le,be),null;if(typeof ot.Component=="string")return{type:"html",body:Yt.Z.fromStatic(ot.Component)};if(Gt.amp||delete Gt.amp,Xe.supportsDynamicResponse===!0){let Fn=(0,zt.Q)(B.headers["user-agent"]||""),yn=typeof((Mn=ot.Document)==null?void 0:Mn.getInitialProps)!="function"||"__NEXT_BUILTIN_DOCUMENT__"in ot.Document;Xe.supportsDynamicResponse=!xi&&!Fn&&!Gt.amp&&yn,Xe.isBot=Fn}!gs&&ri&&Xe.dev&&(Xe.supportsDynamicResponse=!0);let ic=xi?(Er=this.nextConfig.i18n)==null?void 0:Er.defaultLocale:Gt.__nextDefaultLocale,V=Gt.__nextLocale,L=(br=this.nextConfig.i18n)==null?void 0:br.locales;ri&&!Xe.dev&&xi&&Ro&&!rl&&(!((Ci=Xe.runtime)===et.Jp.experimentalEdge||Ci===et.Jp.edge)||this.serverOptions.webServerConfig)&&Cl(B.headers);let ne=!1,Pe=!1;xi&&({isOnDemandRevalidate:ne,revalidateOnlyGenerated:Pe}=(0,st.Iq)(B,this.renderOpts.previewProps)),xi&&this.minimalMode&&B.headers["x-matched-path"]&&(Ms=Yi),Yi=(0,tr.Q)(Yi),Ms=(0,tr.Q)(Ms),this.localeNormalizer&&(Ms=this.localeNormalizer.normalize(Ms)),gs&&(Ms=this.stripNextDataPath(Ms),Yi=this.stripNextDataPath(Yi));let Oe=null;!xi||Xe.supportsDynamicResponse||Js||ul||rl||(Oe=`${V?`/${V}`:""}${(be==="/"||Ms==="/")&&V?"":Ms}${Gt.amp?".amp":""}`),(di||Di)&&xi&&(Oe=`${V?`/${V}`:""}${be}${Gt.amp?".amp":""}`),Oe&&(Oe=(Oe=Oe.split("/").map(Fn=>{try{Fn=decodeURIComponent(Fn).replace(RegExp("([/#?]|%(2f|23|3f))","gi"),yn=>encodeURIComponent(yn))}catch{throw new gn._9("failed to decode param")}return Fn}).join("/"))==="/index"&&be==="/"?"/":Oe);let kt="https:";try{kt=new URL((0,Gi.OX)(B,"initURL")||"/","http://n").protocol}catch{}let Nt=hn.__incrementalCache||await this.getIncrementalCache({requestHeaders:Object.assign({},B.headers),requestProtocol:kt.substring(0,kt.length-1)});Nt?.resetRequestCache();let{routeModule:Mt}=ot,sr=!!(this.nextConfig.experimental.ppr&&(this.renderOpts.dev||this.experimentalTestProxy)&&Gt.__nextppronly),vr=async({postponed:Fn})=>{let yn,bn=!gs&&Xe.dev===!0||!xi&&!Ti||typeof Fn=="string"||rl,Ur=(0,Or.parse)(B.url||"",!0).query;Xe.params&&Object.keys(Xe.params).forEach(Fi=>{delete Ur[Fi]});let hs=Yi!=="/"&&this.nextConfig.trailingSlash,Pr=(0,Or.format)({pathname:`${Ms}${hs?"/":""}`,query:Ur}),Si={...ot,...Xe,...ri?{incrementalCache:Nt,isRevalidate:xi&&!Fn&&!rl,originalPathname:ot.ComponentMod.originalPathname,serverActions:this.nextConfig.experimental.serverActions}:{},isNextDataRequest:gs,resolvedUrl:Pr,locale:V,locales:L,defaultLocale:ic,multiZoneDraftMode:this.nextConfig.experimental.multiZoneDraftMode,resolvedAsPath:xn||ga?(0,Or.format)({pathname:`${Yi}${hs?"/":""}`,query:Ur}):Pr,supportsDynamicResponse:bn,isOnDemandRevalidate:ne,isDraftMode:!1,isServerAction:Js,postponed:Fn};if(sr&&(bn=!1,Si.nextExport=!0,Si.supportsDynamicResponse=!1,Si.isStaticGeneration=!0,Si.isRevalidate=!0,Si.isDebugPPRSkeleton=!0),Mt)if(Mt.definition.kind===y.APP_ROUTE){let Fi={params:Xe.params,prerenderManifest:aa,renderOpts:{experimental:{ppr:!1},originalPathname:ot.ComponentMod.originalPathname,supportsDynamicResponse:bn,incrementalCache:Nt,isRevalidate:xi}};try{let Ai=zl.Og.fromBaseNextRequest(B,(0,zl.Ub)(le.originalResponse)),Qs=await Mt.handle(Ai,Fi);return B.fetchMetrics=Fi.renderOpts.fetchMetrics,Fi.renderOpts.fetchTags,await Qa(B,le,Qs,Fi.renderOpts.waitUntil),null}catch(Ai){if(xi)throw Ai;return Kr.vU(Ai),await Qa(B,le,new Response(null,{status:500})),null}}else if(Mt.definition.kind===y.PAGES)Si.nextFontManifest=this.nextFontManifest,Si.clientReferenceManifest=ot.clientReferenceManifest,yn=await Mt.render(B.originalRequest??B,le.originalResponse??le,{page:be,params:Xe.params,query:Gt,renderOpts:Si});else if(Mt.definition.kind===y.APP_PAGE){let Fi=ot.routeModule;Si.nextFontManifest=this.nextFontManifest,yn=await Fi.render(B.originalRequest??B,le.originalResponse??le,{page:di?"/404":be,params:Xe.params,query:Gt,renderOpts:Si})}else throw Error("Invariant: Unknown route module type");else yn=await this.renderHTML(B,le,be,Gt,Si);let{metadata:mn}=yn,{headers:ki={},fetchTags:Es}=mn;if(Es&&(ki[et.Et]=Es),B.fetchMetrics=mn.fetchMetrics,ri&&xi&&mn.revalidate===0&&!this.renderOpts.dev&&!Si.experimental.ppr){let Fi=mn.staticBailoutInfo,Ai=Error(`Page changed from static to dynamic at runtime ${Yi}${Fi?.description?`, reason: ${Fi.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`);if(Fi?.stack){let Qs=Fi.stack;Ai.stack=Ai.message+Qs.substring(Qs.indexOf(`
`))}throw Ai}return"isNotFound"in mn&&mn.isNotFound?{value:null,revalidate:mn.revalidate}:mn.isRedirect?{value:{kind:"REDIRECT",props:mn.pageData??mn.flightData},revalidate:mn.revalidate}:yn.isNull?null:{value:{kind:"PAGE",html:yn,pageData:mn.pageData??mn.flightData,postponed:mn.postponed,headers:ki,status:ri?le.statusCode:void 0},revalidate:mn.revalidate}},kr=await this.responseCache.get(Oe,async(Fn,yn,bn)=>{if(this.renderOpts.dev,Fn||le.sent,dn||({staticPaths:dn,fallbackMode:Wn}=Ti?await this.getStaticPaths({pathname:be,requestHeaders:B.headers,isAppPath:ri,page:ot.page}):{staticPaths:void 0,fallbackMode:!1}),Wn==="static"&&(0,zt.Q)(B.headers["user-agent"]||"")&&(Wn="blocking"),ne&&Pe&&!yn&&!this.minimalMode)return await this.render404(B,le),null;yn?.isStale===-1&&(ne=!0),ne&&(Wn!==!1||yn)&&(Wn="blocking");let Ur=Oe??(Xe.dev&&ri?Ms:null);Ur&&Gt.amp&&(Ur=Ur.replace(/\.amp$/,"")),Ur&&dn?.includes(Ur),this.nextConfig.experimental.isExperimentalCompile&&(Wn="blocking");let hs=await vr({postponed:ne||bn||!ul?void 0:ul});return hs?{...hs,revalidate:hs.revalidate}:null},{routeKind:Mt?.definition.kind,incrementalCache:Nt,isOnDemandRevalidate:ne,isPrefetch:B.headers.purpose==="prefetch"});if(!kr){if(Oe&&!(ne&&Pe))throw Error("invariant: cache entry required but not generated");return null}let Mr=((nn=kr.value)==null?void 0:nn.kind)==="PAGE"&&!!kr.value.postponed;!xi||this.minimalMode||rl||Mr&&!Qo||le.setHeader("x-nextjs-cache",ne?"REVALIDATED":kr.isMiss?"MISS":kr.isStale?"STALE":"HIT");let{value:fn}=kr;if(fn?.kind==="IMAGE")throw Error("invariant SSG should not return an image cache value");if(ul)Un=0;else if(this.minimalMode&&Ro&&!Qo&&Xe.experimental.ppr)Un=0;else if(!this.renderOpts.dev||xn&&!gs)if(!di||gs)if(xi)if(di){let Fn=(0,Gi.OX)(B,"notFoundRevalidate");Un=Fn===void 0?0:Fn}else if(Di)Un=0;else if(typeof kr.revalidate=="number"){if(kr.revalidate<1)throw Error(`Invariant: invalid Cache-Control duration provided: ${kr.revalidate} < 1`);Un=kr.revalidate}else kr.revalidate===!1&&(Un=et.BR);else le.getHeader("Cache-Control")||(Un=0);else Un=0;kr.revalidate=Un;let ti=(0,Gi.OX)(B,"onCacheEntry");if(ti&&await ti(kr,{url:(0,Gi.OX)(B,"initURL")}))return null;if(fn){if(fn.kind==="REDIRECT")return kr.revalidate&&!le.getHeader("Cache-Control")&&le.setHeader("Cache-Control",Ht({revalidate:kr.revalidate,swrDelta:this.nextConfig.experimental.swrDelta})),gs?{type:"json",body:Yt.Z.fromStatic(JSON.stringify(fn.props)),revalidate:kr.revalidate}:(await(Fn=>{let yn={destination:Fn.pageProps.__N_REDIRECT,statusCode:Fn.pageProps.__N_REDIRECT_STATUS,basePath:Fn.pageProps.__N_REDIRECT_BASE_PATH},bn=cn(yn),{basePath:Ur}=this.nextConfig;Ur&&yn.basePath!==!1&&yn.destination.startsWith("/")&&(yn.destination=`${Ur}${yn.destination}`),yn.destination.startsWith("/")&&(yn.destination=(0,gn.U3)(yn.destination)),le.redirect(yn.destination,bn).body(yn.destination).send()})(fn.props),null);if(fn.kind==="ROUTE"){let Fn={...fn.headers};return this.minimalMode&&xi||delete Fn[et.Et],await Qa(B,le,new Response(fn.body,{headers:(0,ce.EK)(Fn),status:fn.status||200})),null}if(ri){if(fn.postponed&&ul)throw Error("Invariant: postponed state should not be present on a resume request");if(fn.headers){let bn={...fn.headers};for(let[Ur,hs]of(this.minimalMode&&xi||delete bn[et.Et],Object.entries(bn)))if(hs!==void 0)if(Array.isArray(hs))for(let Pr of hs)le.appendHeader(Ur,Pr);else typeof hs=="number"&&(hs=hs.toString()),le.appendHeader(Ur,hs)}if(this.minimalMode&&xi&&((Bn=fn.headers)==null?void 0:Bn[et.Et])&&le.setHeader(et.Et,fn.headers[et.Et]),!fn.status||Ro&&Xe.experimental.ppr||(le.statusCode=fn.status),fn.postponed&&Ro&&le.setHeader(lt.VT,"1"),Ro){if(typeof fn.pageData!="string"){if(fn.postponed)throw Error("Invariant: Expected postponed to be undefined");return{type:"rsc",body:fn.html,revalidate:rl?0:kr.revalidate}}return{type:"rsc",body:Yt.Z.fromStatic(fn.pageData),revalidate:kr.revalidate}}let Fn=fn.html;if(!fn.postponed||this.minimalMode)return{type:"html",body:Fn,revalidate:kr.revalidate};if(sr)return{type:"html",body:Fn,revalidate:0};let yn=new TransformStream;return Fn.chain(yn.readable),vr({postponed:fn.postponed}).then(async bn=>{var Ur,hs;if(!bn)throw Error("Invariant: expected a result to be returned");if(((Ur=bn.value)==null?void 0:Ur.kind)!=="PAGE")throw Error(`Invariant: expected a page response, got ${(hs=bn.value)==null?void 0:hs.kind}`);await bn.value.html.pipeTo(yn.writable)}).catch(bn=>{yn.writable.abort(bn).catch(Ur=>{console.error("couldn't abort transformer",Ur)})}),{type:"html",body:Fn,revalidate:0}}else return gs?{type:"json",body:Yt.Z.fromStatic(JSON.stringify(fn.pageData)),revalidate:kr.revalidate}:{type:"html",body:fn.html,revalidate:kr.revalidate}}return(0,Gi.kL)(B,"notFoundRevalidate",kr.revalidate),kr.revalidate&&!le.getHeader("Cache-Control")&&le.setHeader("Cache-Control",Ht({revalidate:kr.revalidate,swrDelta:this.nextConfig.experimental.swrDelta})),gs?(le.statusCode=404,le.body('{"notFound":true}').send()):(this.renderOpts.dev&&(Gt.__nextNotFoundSrcPage=be),await this.render404(B,le,{pathname:be,query:Gt},!1)),null}stripNextDataPath(B,le=!0){return B.includes(this.buildId)&&(B=En(B.substring(B.indexOf(this.buildId)+this.buildId.length).replace(/\.json$/,""))),this.localeNormalizer&&le?this.localeNormalizer.normalize(B):B}getOriginalAppPaths(B){if(this.enabledDirectories.app){var le;return((le=this.appPathRoutes)==null?void 0:le[B])||null}return null}async renderPageComponent(B,le){var be,Xe;let{query:ot,pathname:Gt}=B,cr=this.getOriginalAppPaths(Gt),Er=Array.isArray(cr),br=Gt;Er&&(br=cr[cr.length-1]);let nn=await this.findPageComponents({page:br,query:ot,params:B.renderOpts.params||{},isAppPath:Er,sriEnabled:!!((be=this.nextConfig.experimental.sri)!=null&&be.algorithm),appPaths:cr,shouldEnsure:!1});if(nn){(Xe=(0,Ee.Yz)().getRootSpanAttributes())==null||Xe.set("next.route",Gt);try{return await this.renderToResponseWithComponents(B,nn)}catch(Mn){let Bn=Mn instanceof ma;if(!Bn||Bn&&le)throw Mn}}return!1}async renderToResponse(B){return(0,Ee.Yz)().trace(Qe._J.renderToResponse,{spanName:"rendering page",attributes:{"next.route":B.pathname}},async()=>this.renderToResponseImpl(B))}async renderToResponseImpl(B){var le;let{res:be,query:Xe,pathname:ot}=B,Gt=!!Xe._nextBubbleNoFallback;delete Xe[lt.H4],delete Xe._nextBubbleNoFallback;let cr={i18n:(le=this.i18nProvider)==null?void 0:le.fromQuery(ot,Xe)};try{for await(let Er of this.matchers.matchAll(ot,cr)){let br=(0,Gi.OX)(B.req,"invokeOutput");if(!this.minimalMode&&typeof br=="string"&&(0,kn.$)(br||"")&&br!==Er.definition.pathname)continue;let nn=await this.renderPageComponent({...B,pathname:Er.definition.pathname,renderOpts:{...B.renderOpts,params:Er.params}},Gt);if(nn!==!1)return nn}if(this.serverOptions.webServerConfig){B.pathname=this.serverOptions.webServerConfig.page;let Er=await this.renderPageComponent(B,Gt);if(Er!==!1)return Er}}catch(Er){let br=ea(Er);if(Er instanceof gn.At)throw console.error("Invariant: failed to load static page",JSON.stringify({page:ot,url:B.req.url,matchedPath:B.req.headers["x-matched-path"],initUrl:(0,Gi.OX)(B.req,"initURL"),didRewrite:!!(0,Gi.OX)(B.req,"rewroteURL"),rewroteUrl:(0,Gi.OX)(B.req,"rewroteURL")},null,2)),br;if(br instanceof ma&&Gt)throw br;if(br instanceof gn._9||br instanceof gn.KM)return be.statusCode=400,await this.renderErrorToResponse(B,br);be.statusCode=500,await this.hasPage("/500")&&(B.query.__nextCustomErrorRender="1",await this.renderErrorToResponse(B,br),delete B.query.__nextCustomErrorRender);let nn=br instanceof wl;if(!nn){if(this.minimalMode,this.renderOpts.dev)throw ua(br)&&(br.page=ot),br;this.logError(ea(br))}return await this.renderErrorToResponse(B,nn?br.innerError:br)}return this.getMiddleware()&&B.req.headers["x-nextjs-data"]&&(!be.statusCode||be.statusCode===200||be.statusCode===404)?(be.setHeader("x-nextjs-matched-path",`${Xe.__nextLocale?`/${Xe.__nextLocale}`:""}${ot}`),be.statusCode=200,be.setHeader("content-type","application/json"),be.body("{}"),be.send(),null):(be.statusCode=404,this.renderErrorToResponse(B,null))}async renderToHTML(B,le,be,Xe={}){return(0,Ee.Yz)().trace(Qe._J.renderToHTML,async()=>this.renderToHTMLImpl(B,le,be,Xe))}async renderToHTMLImpl(B,le,be,Xe={}){return this.getStaticHTML(ot=>this.renderToResponse(ot),{req:B,res:le,pathname:be,query:Xe})}async renderError(B,le,be,Xe,ot={},Gt=!0){return(0,Ee.Yz)().trace(Qe._J.renderError,async()=>this.renderErrorImpl(B,le,be,Xe,ot,Gt))}async renderErrorImpl(B,le,be,Xe,ot={},Gt=!0){return Gt&&be.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),this.pipe(async cr=>{let Er=await this.renderErrorToResponse(cr,B);if(this.minimalMode&&be.statusCode===500)throw B;return Er},{req:le,res:be,pathname:Xe,query:ot})}async renderErrorToResponse(B,le){return(0,Ee.Yz)().trace(Qe._J.renderErrorToResponse,async()=>this.renderErrorToResponseImpl(B,le))}async renderErrorToResponseImpl(B,le){if(this.renderOpts.dev&&B.pathname==="/favicon.ico")return{type:"html",body:Yt.Z.fromStatic("")};let{res:be,query:Xe}=B;try{let ot=null;be.statusCode===404&&(this.enabledDirectories.app&&(ot=await this.findPageComponents({page:_n,query:Xe,params:{},isAppPath:!0,shouldEnsure:!0,url:B.req.url})),!ot&&await this.hasPage("/404")&&(ot=await this.findPageComponents({page:"/404",query:Xe,params:{},isAppPath:!1,shouldEnsure:!0,url:B.req.url})));let Gt=`/${be.statusCode}`;if(!B.query.__nextCustomErrorRender&&!ot&&Ri.includes(Gt)&&(Gt!=="/500"||!this.renderOpts.dev)&&(ot=await this.findPageComponents({page:Gt,query:Xe,params:{},isAppPath:!1,shouldEnsure:!0,url:B.req.url})),ot||(ot=await this.findPageComponents({page:"/_error",query:Xe,params:{},isAppPath:!1,shouldEnsure:!0,url:B.req.url}),Gt="/_error"),!ot){if(this.renderOpts.dev)return{type:"html",body:Yt.Z.fromStatic(`
              <pre>missing required error components, refreshing...</pre>
              <script>
                async function check() {
                  const res = await fetch(location.href).catch(() => ({}))

                  if (res.status === 200) {
                    location.reload()
                  } else {
                    setTimeout(check, 1000)
                  }
                }
                check()
              <\/script>`)};throw new wl(Error("missing required error components"))}ot.components.routeModule?(0,Gi.kL)(B.req,"match",{definition:ot.components.routeModule.definition,params:void 0}):(0,Gi.d0)(B.req,"match");try{return await this.renderToResponseWithComponents({...B,pathname:Gt,renderOpts:{...B.renderOpts,err:le}},ot)}catch(cr){throw cr instanceof ma?Error("invariant: failed to render error page"):cr}}catch(ot){let Gt=ea(ot),cr=Gt instanceof wl;cr||this.logError(Gt),be.statusCode=500;let Er=await this.getFallbackErrorComponents(B.req.url);return Er?((0,Gi.kL)(B.req,"match",{definition:Er.routeModule.definition,params:void 0}),this.renderToResponseWithComponents({...B,pathname:"/_error",renderOpts:{...B.renderOpts,err:cr?Gt.innerError:Gt}},{query:Xe,components:Er})):{type:"html",body:Yt.Z.fromStatic("Internal Server Error")}}}async renderErrorToHTML(B,le,be,Xe,ot={}){return this.getStaticHTML(Gt=>this.renderErrorToResponse(Gt,B),{req:le,res:be,pathname:Xe,query:ot})}async render404(B,le,be,Xe=!0){let{pathname:ot,query:Gt}=be||(0,Or.parse)(B.url,!0);return this.nextConfig.i18n&&(Gt.__nextLocale||=this.nextConfig.i18n.defaultLocale,Gt.__nextDefaultLocale||=this.nextConfig.i18n.defaultLocale),le.statusCode=404,this.renderError(null,B,le,ot,Gt,Xe)}}function Bo(Be){return Be.headers[lt.A.toLowerCase()]==="1"||!!(0,Gi.OX)(Be,"isRSCRequest")}let Kl=Be=>{let B=Be.length,le=0,be=0,Xe=8997,ot=0,Gt=33826,cr=0,Er=40164,br=0,nn=52210;for(;le<B;)Xe^=Be.charCodeAt(le++),be=435*Xe,ot=435*Gt,cr=435*Er,br=435*nn,cr+=Xe<<8,br+=Gt<<8,ot+=be>>>16,Xe=65535&be,cr+=ot>>>16,Gt=65535&ot,nn=br+(cr>>>16)&65535,Er=65535&cr;return(15&nn)*281474976710656+4294967296*Er+65536*Gt+(Xe^nn>>4)},xs=(Be,B=!1)=>(B?'W/"':'"')+Kl(Be).toString(36)+Be.length.toString(36)+'"';class Rs{constructor(B){this.pendingResponses=new Map,Object.assign(this,{minimalMode:B})}get(B,le,be){var Xe;let ot=B?`${B}-${be.isOnDemandRevalidate?"1":"0"}`:null,Gt=ot?this.pendingResponses.get(ot):null;if(Gt)return Gt;let{promise:cr,resolve:Er,reject:br}=new Jr.Y;ot&&this.pendingResponses.set(ot,cr);let nn=!1,Mn=Bn=>{ot&&this.pendingResponses.set(ot,Promise.resolve(Bn)),nn||(nn=!0,Er(Bn))};return ot&&this.minimalMode&&((Xe=this.previousCacheItem)==null?void 0:Xe.key)===ot&&this.previousCacheItem.expiresAt>Date.now()?(Mn(this.previousCacheItem.entry),this.pendingResponses.delete(ot)):(async()=>{try{let Bn=await le(nn),Ci=Bn===null?null:{...Bn,isMiss:!0};be.isOnDemandRevalidate||Mn(Ci),B&&Bn&&Bn.revalidate!==void 0?this.previousCacheItem={key:ot||B,entry:Bn,expiresAt:Date.now()+1e3}:this.previousCacheItem=void 0,be.isOnDemandRevalidate&&Mn(Ci)}catch(Bn){nn?console.error(Bn):br(Bn)}finally{ot&&this.pendingResponses.delete(ot)}})(),cr}}var Wl=M(5080),Nu=M.n(Wl);let ol=0,rc="x-vercel-cache-tags",ho="x-vercel-sc-headers",Yc="x-vercel-revalidate",Me="x-vercel-cache-item-name",ct=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;async function St(Be,B,le=0){let be=new AbortController,Xe=setTimeout(()=>{be.abort()},500);return fetch(Be,{...B||{},signal:be.signal}).catch(ot=>{if(le!==3)return ct&&console.log(`Fetch failed for ${Be} retry ${le}`),St(Be,B,le+1);throw ot}).finally(()=>{clearTimeout(Xe)})}class Wt{hasMatchingTags(B,le){if(B.length!==le.length)return!1;let be=new Set(B),Xe=new Set(le);if(be.size!==Xe.size)return!1;for(let ot of be)if(!Xe.has(ot))return!1;return!0}static isAvailable(B){return!!(B._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL)}constructor(B){if(this.headers={},this.headers["Content-Type"]="application/json",ho in B._requestHeaders){let Xe=JSON.parse(B._requestHeaders[ho]);for(let ot in Xe)this.headers[ot]=Xe[ot];delete B._requestHeaders[ho]}let le=B._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL,be=B._requestHeaders["x-vercel-sc-basepath"]||process.env.SUSPENSE_CACHE_BASEPATH;if(process.env.SUSPENSE_CACHE_AUTH_TOKEN&&(this.headers.Authorization=`Bearer ${process.env.SUSPENSE_CACHE_AUTH_TOKEN}`),le){let Xe=process.env.SUSPENSE_CACHE_PROTO||"https";this.cacheEndpoint=`${Xe}://${le}${be||""}`,ct&&console.log("using cache endpoint",this.cacheEndpoint)}else ct&&console.log("no cache endpoint available");B.maxMemoryCacheSize?q||(ct&&console.log("using memory store for fetch cache"),q=new(Nu())({max:B.maxMemoryCacheSize,length({value:Xe}){var ot;if(!Xe)return 25;if(Xe.kind==="REDIRECT")return JSON.stringify(Xe.props).length;if(Xe.kind==="IMAGE")throw Error("invariant image should not be incremental-cache");return Xe.kind==="FETCH"?JSON.stringify(Xe.data||"").length:Xe.kind==="ROUTE"?Xe.body.length:Xe.html.length+(((ot=JSON.stringify(Xe.kind==="PAGE"&&Xe.pageData))==null?void 0:ot.length)||0)}})):ct&&console.log("not using memory store for fetch cache")}resetRequestCache(){q?.reset()}async revalidateTag(...B){let[le]=B;if(le=typeof le=="string"?[le]:le,ct&&console.log("revalidateTag",le),le.length){if(Date.now()<ol){ct&&console.log("rate limited ",ol);return}for(let be=0;be<Math.ceil(le.length/64);be++){let Xe=le.slice(64*be,64*be+64);try{let ot=await St(`${this.cacheEndpoint}/v1/suspense-cache/revalidate?tags=${Xe.map(Gt=>encodeURIComponent(Gt)).join(",")}`,{method:"POST",headers:this.headers,next:{internal:!0}});if(ot.status===429){let Gt=ot.headers.get("retry-after")||"60000";ol=Date.now()+parseInt(Gt)}if(!ot.ok)throw Error(`Request failed with status ${ot.status}.`)}catch(ot){console.warn("Failed to revalidate tag",Xe,ot)}}}}async get(...B){var le;let[be,Xe={}]=B,{tags:ot,softTags:Gt,kindHint:cr,fetchIdx:Er,fetchUrl:br}=Xe;if(cr!=="fetch")return null;if(Date.now()<ol)return ct&&console.log("rate limited"),null;let nn=q?.get(be),Mn=(nn==null||(le=nn.value)==null?void 0:le.kind)==="FETCH"&&this.hasMatchingTags(ot??[],nn.value.tags??[]);if(this.cacheEndpoint&&(!nn||!Mn))try{let Bn=Date.now(),Ci=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${be}`,{method:"GET",headers:{...this.headers,[Me]:br,[rc]:ot?.join(",")||"",[et.Ar]:Gt?.join(",")||""},next:{internal:!0,fetchType:"cache-get",fetchUrl:br,fetchIdx:Er}});if(Ci.status===429){let ns=Ci.headers.get("retry-after")||"60000";ol=Date.now()+parseInt(ns)}if(Ci.status===404)return ct&&console.log(`no fetch cache entry for ${be}, duration: ${Date.now()-Bn}ms`),null;if(!Ci.ok)throw console.error(await Ci.text()),Error(`invalid response from cache ${Ci.status}`);let dn=await Ci.json();if(!dn||dn.kind!=="FETCH")throw ct&&console.log({cached:dn}),Error("invalid cache value");if(dn.kind==="FETCH")for(let ns of(dn.tags??=[],ot??[]))dn.tags.includes(ns)||dn.tags.push(ns);let Wn=Ci.headers.get("x-vercel-cache-state"),Un=Ci.headers.get("age");nn={value:dn,lastModified:Wn!=="fresh"?Date.now()-et.BR:Date.now()-1e3*parseInt(Un||"0",10)},ct&&console.log(`got fetch cache entry for ${be}, duration: ${Date.now()-Bn}ms, size: ${Object.keys(dn).length}, cache-state: ${Wn} tags: ${ot?.join(",")} softTags: ${Gt?.join(",")}`),nn&&q?.set(be,nn)}catch(Bn){ct&&console.error("Failed to get from fetch-cache",Bn)}return nn||null}async set(...B){let[le,be,Xe]=B,{fetchCache:ot,fetchIdx:Gt,fetchUrl:cr,tags:Er}=Xe;if(ot){if(Date.now()<ol){ct&&console.log("rate limited");return}if(q?.set(le,{value:be,lastModified:Date.now()}),this.cacheEndpoint)try{let br=Date.now();be!==null&&"revalidate"in be&&(this.headers[Yc]=be.revalidate.toString()),!this.headers[Yc]&&be!==null&&"data"in be&&(this.headers["x-vercel-cache-control"]=be.data.headers["cache-control"]);let nn=JSON.stringify({...be,tags:void 0});ct&&console.log("set cache",le);let Mn=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${le}`,{method:"POST",headers:{...this.headers,[Me]:cr||"",[rc]:Er?.join(",")||""},body:nn,next:{internal:!0,fetchType:"cache-set",fetchUrl:cr,fetchIdx:Gt}});if(Mn.status===429){let Bn=Mn.headers.get("retry-after")||"60000";ol=Date.now()+parseInt(Bn)}if(!Mn.ok)throw ct&&console.log(await Mn.text()),Error(`invalid response ${Mn.status}`);ct&&console.log(`successfully set to fetch-cache for ${le}, duration: ${Date.now()-br}ms, size: ${nn.length}`)}catch(br){ct&&console.error("Failed to update fetch cache",br)}}}}class or{constructor(B){this.fs=B.fs,this.flushToDisk=B.flushToDisk,this.serverDistDir=B.serverDistDir,this.appDir=!!B._appDir,this.pagesDir=!!B._pagesDir,this.revalidatedTags=B.revalidatedTags,this.experimental=B.experimental,this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE,B.maxMemoryCacheSize&&!Z?(this.debug&&console.log("using memory store for fetch cache"),Z=new(Nu())({max:B.maxMemoryCacheSize,length({value:le}){var be;if(!le)return 25;if(le.kind==="REDIRECT")return JSON.stringify(le.props).length;if(le.kind==="IMAGE")throw Error("invariant image should not be incremental-cache");return le.kind==="FETCH"?JSON.stringify(le.data||"").length:le.kind==="ROUTE"?le.body.length:le.html.length+(((be=JSON.stringify(le.pageData))==null?void 0:be.length)||0)}})):this.debug&&console.log("not using memory store for fetch cache"),this.serverDistDir&&this.fs&&(this.tagsManifestPath=Qr().join(this.serverDistDir,"..","cache","fetch-cache","tags-manifest.json"),this.loadTagsManifest())}resetRequestCache(){}loadTagsManifest(){if(this.tagsManifestPath&&this.fs&&!W){try{W=JSON.parse(this.fs.readFileSync(this.tagsManifestPath,"utf8"))}catch{W={version:1,items:{}}}this.debug&&console.log("loadTagsManifest",W)}}async revalidateTag(...B){let[le]=B;if(le=typeof le=="string"?[le]:le,this.debug&&console.log("revalidateTag",le),le.length!==0&&(await this.loadTagsManifest(),W&&this.tagsManifestPath)){for(let be of le){let Xe=W.items[be]||{};Xe.revalidatedAt=Date.now(),W.items[be]=Xe}try{await this.fs.mkdir(Qr().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(W||{})),this.debug&&console.log("Updated tags manifest",W)}catch(be){console.warn("Failed to update tags manifest.",be)}}}async get(...B){var le,be,Xe;let[ot,Gt={}]=B,{tags:cr,softTags:Er,kindHint:br}=Gt,nn=Z?.get(ot);if(this.debug&&console.log("get",ot,cr,br,!!nn),(nn==null||(le=nn.value)==null?void 0:le.kind)==="PAGE"){let Mn,Bn=(Xe=nn.value.headers)==null?void 0:Xe[et.Et];typeof Bn=="string"&&(Mn=Bn.split(",")),Mn?.length&&(this.loadTagsManifest(),Mn.some(Ci=>{var dn;return(W==null||(dn=W.items[Ci])==null?void 0:dn.revalidatedAt)&&W?.items[Ci].revalidatedAt>=(nn?.lastModified||Date.now())})&&(nn=void 0))}return nn&&(nn==null||(be=nn.value)==null?void 0:be.kind)==="FETCH"&&(this.loadTagsManifest(),[...cr||[],...Er||[]].some(Mn=>{var Bn;return!!this.revalidatedTags.includes(Mn)||(W==null||(Bn=W.items[Mn])==null?void 0:Bn.revalidatedAt)&&W?.items[Mn].revalidatedAt>=(nn?.lastModified||Date.now())})&&(nn=void 0)),nn??null}async set(...B){let[le,be,Xe]=B;if(Z?.set(le,{value:be,lastModified:Date.now()}),this.debug&&console.log("set",le),this.flushToDisk){if(be?.kind==="ROUTE"){let ot=this.getFilePath(`${le}.body`,"app");await this.fs.mkdir(Qr().dirname(ot)),await this.fs.writeFile(ot,be.body);let Gt={headers:be.headers,status:be.status,postponed:void 0};await this.fs.writeFile(ot.replace(/\.body$/,et.EX),JSON.stringify(Gt,null,2));return}if(be?.kind==="PAGE"){let ot=typeof be.pageData=="string",Gt=this.getFilePath(`${le}.html`,ot?"app":"pages");if(await this.fs.mkdir(Qr().dirname(Gt)),await this.fs.writeFile(Gt,be.html),await this.fs.writeFile(this.getFilePath(`${le}${ot?this.experimental.ppr?et.Sx:et.hd:et.JT}`,ot?"app":"pages"),ot?be.pageData:JSON.stringify(be.pageData)),be.headers||be.status){let cr={headers:be.headers,status:be.status,postponed:be.postponed};await this.fs.writeFile(Gt.replace(/\.html$/,et.EX),JSON.stringify(cr))}}else if(be?.kind==="FETCH"){let ot=this.getFilePath(le,"fetch");await this.fs.mkdir(Qr().dirname(ot)),await this.fs.writeFile(ot,JSON.stringify({...be,tags:Xe.tags}))}}}detectFileKind(B){if(!this.appDir&&!this.pagesDir)throw Error("Invariant: Can't determine file path kind, no page directory enabled");if(!this.appDir&&this.pagesDir)return"pages";if(this.appDir&&!this.pagesDir)return"app";let le=this.getFilePath(B,"pages");if(this.fs.existsSync(le))return"pages";if(le=this.getFilePath(B,"app"),this.fs.existsSync(le))return"app";throw Error(`Invariant: Unable to determine file path kind for ${B}`)}getFilePath(B,le){switch(le){case"fetch":return Qr().join(this.serverDistDir,"..","cache","fetch-cache",B);case"pages":return Qr().join(this.serverDistDir,"pages",B);case"app":return Qr().join(this.serverDistDir,"app",B);default:throw Error("Invariant: Can't determine file path kind")}}}class Ir{static#e=this.timings=new Map;constructor(B){this.prerenderManifest=B}get(B){var le;let be=Ir.timings.get(B);if(be!==void 0||(be=(le=this.prerenderManifest.routes[B])==null?void 0:le.initialRevalidateSeconds)!==void 0)return be}set(B,le){Ir.timings.set(B,le)}clear(){Ir.timings.clear()}}class Tr{constructor({fs:B,dev:le,appDir:be,pagesDir:Xe,flushToDisk:ot,fetchCache:Gt,minimalMode:cr,serverDistDir:Er,requestHeaders:br,requestProtocol:nn,maxMemoryCacheSize:Mn,getPrerenderManifest:Bn,fetchCacheKeyPrefix:Ci,CurCacheHandler:dn,allowedRevalidateHeaderKeys:Wn,experimental:Un}){var ns,di,Di,ri;this.locks=new Map,this.unlocks=new Map;let xn=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;this.hasCustomCacheHandler=!!dn,dn?xn&&console.log("using custom cache handler",dn.name):(B&&Er&&(xn&&console.log("using filesystem cache handler"),dn=or),Wt.isAvailable({_requestHeaders:br})&&cr&&Gt&&(xn&&console.log("using fetch cache handler"),dn=Wt)),process.env.__NEXT_TEST_MAX_ISR_CACHE&&(Mn=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=le,this.disableForTestmode=process.env.NEXT_PRIVATE_TEST_PROXY==="true",this.minimalMode=cr,this.requestHeaders=br,this.requestProtocol=nn,this.allowedRevalidateHeaderKeys=Wn,this.prerenderManifest=Bn(),this.revalidateTimings=new Ir(this.prerenderManifest),this.fetchCacheKeyPrefix=Ci;let Ti=[];br[et.y3]===((di=this.prerenderManifest)==null||(ns=di.preview)==null?void 0:ns.previewModeId)&&(this.isOnDemandRevalidate=!0),cr&&typeof br[et.of]=="string"&&br[et.X_]===((ri=this.prerenderManifest)==null||(Di=ri.preview)==null?void 0:Di.previewModeId)&&(Ti=br[et.of].split(",")),dn&&(this.cacheHandler=new dn({dev:le,fs:B,flushToDisk:ot,serverDistDir:Er,revalidatedTags:Ti,maxMemoryCacheSize:Mn,_pagesDir:!!Xe,_appDir:!!be,_requestHeaders:br,fetchCacheKeyPrefix:Ci,experimental:Un}))}calculateRevalidate(B,le,be){if(be)return new Date().getTime()-1e3;let Xe=this.revalidateTimings.get(Qt(B))??1;return typeof Xe=="number"?1e3*Xe+le:Xe}_getPathname(B,le){return le?B:pi(B)}resetRequestCache(){var B,le;(le=this.cacheHandler)==null||(B=le.resetRequestCache)==null||B.call(le)}async unlock(B){let le=this.unlocks.get(B);le&&(le(),this.locks.delete(B),this.unlocks.delete(B))}async lock(B){process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY;let le=()=>Promise.resolve(),be=this.locks.get(B);if(be)await be;else{let Xe=new Promise(ot=>{le=async()=>{ot()}});this.locks.set(B,Xe),this.unlocks.set(B,le)}return le}async revalidateTag(B){var le,be;return process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,(be=this.cacheHandler)==null||(le=be.revalidateTag)==null?void 0:le.call(be,B)}async fetchCacheKey(B,le={}){let be=[],Xe=new TextEncoder,ot=new TextDecoder;if(le.body)if(typeof le.body.getReader=="function"){let br=le.body,nn=[];try{await br.pipeTo(new WritableStream({write(dn){typeof dn=="string"?(nn.push(Xe.encode(dn)),be.push(dn)):(nn.push(dn),be.push(ot.decode(dn,{stream:!0})))}})),be.push(ot.decode());let Mn=nn.reduce((dn,Wn)=>dn+Wn.length,0),Bn=new Uint8Array(Mn),Ci=0;for(let dn of nn)Bn.set(dn,Ci),Ci+=dn.length;le._ogBody=Bn}catch(Mn){console.error("Problem reading body",Mn)}}else if(typeof le.body.keys=="function"){let br=le.body;for(let nn of(le._ogBody=le.body,new Set([...br.keys()]))){let Mn=br.getAll(nn);be.push(`${nn}=${(await Promise.all(Mn.map(async Bn=>typeof Bn=="string"?Bn:await Bn.text()))).join(",")}`)}}else if(typeof le.body.arrayBuffer=="function"){let br=le.body,nn=await br.arrayBuffer();be.push(await br.text()),le._ogBody=new Blob([nn],{type:br.type})}else typeof le.body=="string"&&(be.push(le.body),le._ogBody=le.body);let Gt=typeof(le.headers||{}).keys=="function"?Object.fromEntries(le.headers):Object.assign({},le.headers);"traceparent"in Gt&&delete Gt.traceparent;let cr=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",B,le.method,Gt,le.mode,le.redirect,le.credentials,le.referrer,le.referrerPolicy,le.integrity,le.cache,be]);{var Er;let br=Xe.encode(cr);return Er=await crypto.subtle.digest("SHA-256",br),Array.prototype.map.call(new Uint8Array(Er),nn=>nn.toString(16).padStart(2,"0")).join("")}}async get(B,le={}){var be,Xe;let ot,Gt;if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.disableForTestmode||this.dev&&(le.kindHint!=="fetch"||this.requestHeaders["cache-control"]==="no-cache"))return null;B=this._getPathname(B,le.kindHint==="fetch");let cr=null,Er=le.revalidate,br=await((be=this.cacheHandler)==null?void 0:be.get(B,le));if((br==null||(Xe=br.value)==null?void 0:Xe.kind)==="FETCH")return[...le.tags||[],...le.softTags||[]].some(Mn=>{var Bn;return(Bn=this.revalidatedTags)==null?void 0:Bn.includes(Mn)})?null:(Er=Er||br.value.revalidate,{isStale:(Date.now()-(br.lastModified||0))/1e3>Er,value:{kind:"FETCH",data:br.value.data,revalidate:Er},revalidateAfter:Date.now()+1e3*Er});let nn=this.revalidateTimings.get(Qt(B));return br?.lastModified===-1?(ot=-1,Gt=-1*et.BR):ot=(Gt=this.calculateRevalidate(B,br?.lastModified||Date.now(),this.dev&&le.kindHint!=="fetch"))!==!1&&Gt<Date.now()||void 0,br&&(cr={isStale:ot,curRevalidate:nn,revalidateAfter:Gt,value:br.value}),!br&&this.prerenderManifest.notFoundRoutes.includes(B)&&(cr={isStale:ot,value:null,curRevalidate:nn,revalidateAfter:Gt},this.set(B,cr.value,le)),cr}async set(B,le,be){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.disableForTestmode||this.dev&&!be.fetchCache)return;let Xe=JSON.stringify(le).length;if(be.fetchCache&&!this.hasCustomCacheHandler&&Xe>2097152){if(this.dev)throw Error(`Failed to set Next.js data cache, items over 2MB can not be cached (${Xe} bytes)`);return}B=this._getPathname(B,be.fetchCache);try{var ot;be.revalidate===void 0||be.fetchCache||this.revalidateTimings.set(B,be.revalidate),await((ot=this.cacheHandler)==null?void 0:ot.set(B,le,be))}catch(Gt){console.warn("Failed to update prerender cache for",B,Gt)}}}M(3e3);let Cr=new Set(["header","cookie","query","host"]),Yr=/\(\?<([a-zA-Z][a-zA-Z0-9]*)>/g;class qr extends pc{constructor(B){super(B),this.handleCatchallRenderRequest=async(le,be,Xe)=>{let{pathname:ot,query:Gt}=Xe;if(!ot)throw Error("pathname is undefined");let cr=this.serverOptions.webServerConfig.pathname;if(ot!==cr&&(ot=cr,(0,kn.$)(ot))){let br=(0,qn.JV)(ot,!1),nn=(0,Ln.t)(br)(ot),Mn=wa(Gt,!1,br,nn);ot=Is(ot,Mn.hasValidParams?Mn.params:Gt,br),$s(le,!0,Object.keys(br.routeKeys),!0,br)}if(ot=(0,tr.Q)(ot),this.i18nProvider){let{detectedLocale:br}=await this.i18nProvider.analyze(ot);br&&(Xe.query.__nextLocale=br)}let Er=!!Gt._nextBubbleNoFallback;$o(ot)&&delete Gt._nextBubbleNoFallback;try{return await this.render(le,be,ot,Gt,Xe,!0),!0}catch(br){if(br instanceof ma&&Er)return!1;throw br}},Object.assign(this.renderOpts,B.webServerConfig.extendRenderOpts)}async getIncrementalCache({requestHeaders:B}){return new Tr({dev:!!this.renderOpts.dev,requestHeaders:B,requestProtocol:"https",pagesDir:this.enabledDirectories.pages,appDir:this.enabledDirectories.app,allowedRevalidateHeaderKeys:this.nextConfig.experimental.allowedRevalidateHeaderKeys,minimalMode:this.minimalMode,fetchCache:!0,fetchCacheKeyPrefix:this.nextConfig.experimental.fetchCacheKeyPrefix,maxMemoryCacheSize:this.nextConfig.cacheMaxMemorySize,flushToDisk:!1,CurCacheHandler:this.serverOptions.webServerConfig.incrementalCacheHandler,getPrerenderManifest:()=>this.getPrerenderManifest(),experimental:{ppr:!1}})}getResponseCache(){return new Rs(this.minimalMode)}async hasPage(B){return B===this.serverOptions.webServerConfig.page}getBuildId(){return this.serverOptions.webServerConfig.extendRenderOpts.buildId}getEnabledDirectories(){return{app:this.serverOptions.webServerConfig.pagesType==="app",pages:this.serverOptions.webServerConfig.pagesType==="pages"}}getPagesManifest(){return{[this.serverOptions.webServerConfig.pathname]:`server${this.serverOptions.webServerConfig.page}.js`}}getAppPathsManifest(){let B=this.serverOptions.webServerConfig.page;return{[this.serverOptions.webServerConfig.page]:`app${B}.js`}}attachRequestMeta(B,le){(0,Gi.kL)(B,"initQuery",{...le.query})}getPrerenderManifest(){return{version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:yt()}}getNextFontManifest(){return this.serverOptions.webServerConfig.extendRenderOpts.nextFontManifest}renderHTML(B,le,be,Xe,ot){let{renderToHTML:Gt}=this.serverOptions.webServerConfig;if(!Gt)throw Error("Invariant: routeModule should be configured when rendering pages");return be===Pt&&(be="/404"),Gt(B,le,be,Xe,Object.assign(ot,{disableOptimizedLoading:!0,runtime:"experimental-edge"}))}async sendRenderResult(B,le,be){let Xe;if(le.setHeader("X-Edge-Runtime","1"),be.poweredByHeader&&be.type==="html"&&le.setHeader("X-Powered-By","Next.js"),le.getHeader("Content-Type")||le.setHeader("Content-Type",be.result.contentType?be.result.contentType:be.type==="json"?"application/json":"text/html; charset=utf-8"),be.result.isDynamic)Xe=be.result.pipeTo(le.transformStream.writable);else{let ot=be.result.toUnchunkedString();le.setHeader("Content-Length",String(new TextEncoder().encode(ot).buffer.byteLength)),be.generateEtags&&le.setHeader("ETag",xs(ot)),le.body(ot)}le.send(),Xe&&await Xe}async findPageComponents({page:B,query:le,params:be,url:Xe}){let ot=await this.serverOptions.webServerConfig.loadComponent(B);return ot?{query:{...le||{},...be||{}},components:ot}:null}async runApi(){return!0}async handleApiRequest(){return!1}loadEnvConfig(){}getPublicDir(){return""}getHasStaticDir(){return!1}async getFallback(){return""}getFontManifest(){}handleCompression(){}async handleUpgrade(){}async getFallbackErrorComponents(B){return null}getRoutesManifest(){}getMiddleware(){}getFilesystemPaths(){return new Set}async getPrefetchRsc(){return null}getinterceptionRoutePatterns(){var B;return((B=this.serverOptions.webServerConfig.interceptionRouteRewrites)==null?void 0:B.map(le=>new RegExp(function(be,Xe,ot){let Gt=(0,pn.Bo)(Xe.source,[],{strict:!0,sensitive:!1,delimiter:"/"}).source;if(!Xe.internal){var cr;Gt=Gt.replace(/\$$/,"(?:\\/)?$")}let Er=Gt.replace(/\\\//g,"/");return be!=="redirect"?{...Xe,regex:Er}:{...Xe,statusCode:cn(Xe),permanent:void 0,regex:Er}}("rewrite",le).regex)))??[]}}class ln{constructor(B,le,be){this.method=B,this.url=le,this.body=be}get cookies(){return this._cookies?this._cookies:this._cookies=ds(this.headers)()}}class Pn{constructor(B){this.destination=B}redirect(B,le){return this.setHeader("Location",B),this.statusCode=le,le===on.X.PermanentRedirect&&this.setHeader("Refresh",`0;url=${B}`),this}}class Rn extends ln{constructor(B){let le=new URL(B.url);for(let[be,Xe]of(super(B.method,le.href.slice(le.origin.length),B.clone().body),this.request=B,this.fetchMetrics=B.fetchMetrics,this.headers={},B.headers.entries()))this.headers[be]=Xe}async parseBody(B){throw Error("parseBody is not implemented in the web runtime")}}class mi extends Pn{constructor(B=new TransformStream){super(B.writable),this.transformStream=B,this.headers=new Headers,this.textBody=void 0,this.sendPromise=new Jr.Y,this._sent=!1}setHeader(B,le){for(let be of(this.headers.delete(B),Array.isArray(le)?le:[le]))this.headers.append(B,be);return this}removeHeader(B){return this.headers.delete(B),this}getHeaderValues(B){var le;return(le=this.getHeader(B))==null?void 0:le.split(",").map(be=>be.trimStart())}getHeader(B){return this.headers.get(B)??void 0}getHeaders(){return(0,ce.lb)(this.headers)}hasHeader(B){return this.headers.has(B)}appendHeader(B,le){return this.headers.append(B,le),this}body(B){return this.textBody=B,this}send(){this.sendPromise.resolve(),this._sent=!0}get sent(){return this._sent}async toResponse(){return this.sent||await this.sendPromise.promise,new Response(this.textBody??this.transformStream.readable,{headers:this.headers,status:this.statusCode,statusText:this.statusMessage})}}let Vi=Symbol.for("__next_internal_waitUntil__"),Dn=hn[Vi]||(hn[Vi]={waitUntilCounter:0,waitUntilResolve:void 0,waitUntilPromise:null});var ts=M(2042),Fs=M(4630);(function(Be){Be.PAGES="PAGES",Be.PAGES_API="PAGES_API",Be.APP_PAGE="APP_PAGE",Be.APP_ROUTE="APP_ROUTE"})(S||(S={}));var gi=M(8264);(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/error-boundary.js#ErrorBoundaryHandler`),(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/error-boundary.js#GlobalError`);let as=(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/error-boundary.js#default`);(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/error-boundary.js#ErrorBoundary`);var Zt=M(796);(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/app-router.js#getServerActionDispatcher`),(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/app-router.js#urlToUrlWithoutFlightMarker`),(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/app-router.js#createEmptyCacheNode`);let _i=(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/app-router.js#default`),yi=(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/layout-router.js#default`),Wi=(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/render-from-template-context.js#default`);var Ui=M(9182),Pi=M(2296);let $n=(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/client-page.js#ClientPageRoot`);var ws=M(7908);let bs="DYNAMIC_SERVER_USAGE";class os extends Error{constructor(B){super("Dynamic server usage: "+B),this.description=B,this.digest=bs}}function hi(Be){return typeof Be=="object"&&Be!==null&&"digest"in Be&&typeof Be.digest=="string"&&Be.digest===bs}class xe extends Error{constructor(...B){super(...B),this.code="NEXT_STATIC_GEN_BAILOUT"}}let T=typeof ws.unstable_postpone=="function";function G(Be,B){let le=new URL(Be.urlPathname,"http://n").pathname;if(Be.isUnstableCacheCallback)throw Error(`Route ${le} used "${B}" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${B}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if(Be.dynamicShouldError)throw new xe(`Route ${le} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${B}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(Be.prerenderState)wt(Be.prerenderState,B,le);else if(Be.revalidate=0,Be.isStaticGeneration){let be=new os(`Route ${le} couldn't be rendered statically because it used \`${B}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw Be.dynamicUsageDescription=B,Be.dynamicUsageStack=be.stack,be}}function pe({reason:Be,prerenderState:B,pathname:le}){wt(B,Be,le)}function qe(Be,B){Be.prerenderState&&wt(Be.prerenderState,B,Be.urlPathname)}function wt(Be,B,le){(function(){if(!T)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")})();let be=`Route ${le} needs to bail out of prerendering at this point because it used ${B}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`;Be.dynamicAccesses.push({stack:Be.isDebugSkeleton?Error().stack:void 0,expression:B}),ws.unstable_postpone(be)}class Dt{static get(B,le,be){let Xe=Reflect.get(B,le,be);return typeof Xe=="function"?Xe.bind(B):Xe}static set(B,le,be,Xe){return Reflect.set(B,le,be,Xe)}static has(B,le){return Reflect.has(B,le)}static deleteProperty(B,le){return Reflect.deleteProperty(B,le)}}function pr(Be){let B=Ui.A.getStore();return B&&B.forceStatic?{}:Be}function mr(Be){let B=Ui.A.getStore();return B?B.forceStatic?{}:B.isStaticGeneration||B.dynamicShouldError?new Proxy({},{get:(le,be,Xe)=>(typeof be=="string"&&G(B,"searchParams."+be),Dt.get(le,be,Xe)),has:(le,be)=>(typeof be=="string"&&G(B,"searchParams."+be),Reflect.has(le,be)),ownKeys:le=>(G(B,"searchParams"),Reflect.ownKeys(le))}):Be:Be}let sn=(0,gi.D)(String.raw`/Users/macbook-air/Public/maglit/node_modules/next/dist/esm/client/components/not-found-boundary.js#NotFoundBoundary`);(function(Be){Be.handleRequest="BaseServer.handleRequest",Be.run="BaseServer.run",Be.pipe="BaseServer.pipe",Be.getStaticHTML="BaseServer.getStaticHTML",Be.render="BaseServer.render",Be.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",Be.renderToResponse="BaseServer.renderToResponse",Be.renderToHTML="BaseServer.renderToHTML",Be.renderError="BaseServer.renderError",Be.renderErrorToResponse="BaseServer.renderErrorToResponse",Be.renderErrorToHTML="BaseServer.renderErrorToHTML",Be.render404="BaseServer.render404"})(k||(k={})),function(Be){Be.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",Be.loadComponents="LoadComponents.loadComponents"}(I||(I={})),function(Be){Be.getRequestHandler="NextServer.getRequestHandler",Be.getServer="NextServer.getServer",Be.getServerRequestHandler="NextServer.getServerRequestHandler",Be.createServer="createServer.createServer"}(x||(x={})),function(Be){Be.compression="NextNodeServer.compression",Be.getBuildId="NextNodeServer.getBuildId",Be.createComponentTree="NextNodeServer.createComponentTree",Be.clientComponentLoading="NextNodeServer.clientComponentLoading",Be.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",Be.generateStaticRoutes="NextNodeServer.generateStaticRoutes",Be.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",Be.generatePublicRoutes="NextNodeServer.generatePublicRoutes",Be.generateImageRoutes="NextNodeServer.generateImageRoutes.route",Be.sendRenderResult="NextNodeServer.sendRenderResult",Be.proxyRequest="NextNodeServer.proxyRequest",Be.runApi="NextNodeServer.runApi",Be.render="NextNodeServer.render",Be.renderHTML="NextNodeServer.renderHTML",Be.imageOptimizer="NextNodeServer.imageOptimizer",Be.getPagePath="NextNodeServer.getPagePath",Be.getRoutesManifest="NextNodeServer.getRoutesManifest",Be.findPageComponents="NextNodeServer.findPageComponents",Be.getFontManifest="NextNodeServer.getFontManifest",Be.getServerComponentManifest="NextNodeServer.getServerComponentManifest",Be.getRequestHandler="NextNodeServer.getRequestHandler",Be.renderToHTML="NextNodeServer.renderToHTML",Be.renderError="NextNodeServer.renderError",Be.renderErrorToHTML="NextNodeServer.renderErrorToHTML",Be.render404="NextNodeServer.render404",Be.startResponse="NextNodeServer.startResponse",Be.route="route",Be.onProxyReq="onProxyReq",Be.apiResolver="apiResolver",Be.internalFetch="internalFetch"}(C||(C={})),(N||(N={})).startServer="startServer.startServer",function(Be){Be.getServerSideProps="Render.getServerSideProps",Be.getStaticProps="Render.getStaticProps",Be.renderToString="Render.renderToString",Be.renderDocument="Render.renderDocument",Be.createBodyResult="Render.createBodyResult"}(U||(U={})),function(Be){Be.renderToString="AppRender.renderToString",Be.renderToReadableStream="AppRender.renderToReadableStream",Be.getBodyResult="AppRender.getBodyResult",Be.fetch="AppRender.fetch"}(K||(K={})),(Y||(Y={})).executeRoute="Router.executeRoute",(ee||(ee={})).runHandler="Node.runHandler",(fe||(fe={})).runHandler="AppRouteRouteHandlers.runHandler",function(Be){Be.generateMetadata="ResolveMetadata.generateMetadata",Be.generateViewport="ResolveMetadata.generateViewport"}(Se||(Se={})),(ze||(ze={})).execute="Middleware.execute";let Sn=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],us=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"],{context:Cs,propagation:xa,trace:Ea,SpanStatusCode:el,SpanKind:ia,ROOT_CONTEXT:Ss}=j=M(8819),_a=Be=>Be!==null&&typeof Be=="object"&&typeof Be.then=="function",sa=(Be,B)=>{B?.bubble===!0?Be.setAttribute("next.bubble",!0):(B&&Be.recordException(B),Be.setStatus({code:el.ERROR,message:B?.message})),Be.end()},Ks=new Map,Oa=j.createContextKey("next.rootSpanId"),ys=0,Ia=()=>ys++;class fo{getTracerInstance(){return Ea.getTracer("next.js","0.0.1")}getContext(){return Cs}getActiveScopeSpan(){return Ea.getSpan(Cs?.active())}withPropagatedContext(B,le,be){let Xe=Cs.active();if(Ea.getSpanContext(Xe))return le();let ot=xa.extract(Xe,B,be);return Cs.with(ot,le)}trace(...B){var le;let[be,Xe,ot]=B,{fn:Gt,options:cr}=typeof Xe=="function"?{fn:Xe,options:{}}:{fn:ot,options:{...Xe}},Er=cr.spanName??be;if(!Sn.includes(be)&&process.env.NEXT_OTEL_VERBOSE!=="1"||cr.hideSpan)return Gt();let br=this.getSpanContext(cr?.parentSpan??this.getActiveScopeSpan()),nn=!1;br?(le=Ea.getSpanContext(br))!=null&&le.isRemote&&(nn=!0):(br=Cs?.active()??Ss,nn=!0);let Mn=Ia();return cr.attributes={"next.span_name":Er,"next.span_type":be,...cr.attributes},Cs.with(br.setValue(Oa,Mn),()=>this.getTracerInstance().startActiveSpan(Er,cr,Bn=>{let Ci="performance"in hn?hn.performance.now():void 0,dn=()=>{Ks.delete(Mn),Ci&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&us.includes(be||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(be.split(".").pop()||"").replace(/[A-Z]/g,Wn=>"-"+Wn.toLowerCase())}`,{start:Ci,end:performance.now()})};nn&&Ks.set(Mn,new Map(Object.entries(cr.attributes??{})));try{if(Gt.length>1)return Gt(Bn,Un=>sa(Bn,Un));let Wn=Gt(Bn);return _a(Wn)?Wn.then(Un=>(Bn.end(),Un)).catch(Un=>{throw sa(Bn,Un),Un}).finally(dn):(Bn.end(),dn(),Wn)}catch(Wn){throw sa(Bn,Wn),dn(),Wn}}))}wrap(...B){let le=this,[be,Xe,ot]=B.length===3?B:[B[0],{},B[1]];return Sn.includes(be)||process.env.NEXT_OTEL_VERBOSE==="1"?function(){let Gt=Xe;typeof Gt=="function"&&typeof ot=="function"&&(Gt=Gt.apply(this,arguments));let cr=arguments.length-1,Er=arguments[cr];if(typeof Er!="function")return le.trace(be,Gt,()=>ot.apply(this,arguments));{let br=le.getContext().bind(Cs.active(),Er);return le.trace(be,Gt,(nn,Mn)=>(arguments[cr]=function(Bn){return Mn?.(Bn),br.apply(this,arguments)},ot.apply(this,arguments)))}}:ot}startSpan(...B){let[le,be]=B,Xe=this.getSpanContext(be?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(le,be,Xe)}getSpanContext(B){return B?Ea.setSpan(Cs.active(),B):void 0}getRootSpanAttributes(){let B=Cs.active().getValue(Oa);return Ks.get(B)}}let Da=(()=>{let Be=new fo;return()=>Be})(),po="_N_T_",ms={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"};({...ms,GROUP:(ms.reactServerComponents,ms.actionBrowser,ms.appMetadataRoute,ms.appRouteHandler,ms.instrument,ms.serverSideRendering,ms.appPagesBrowser,ms.middleware,ms.api,ms.reactServerComponents,ms.actionBrowser,ms.appMetadataRoute,ms.appRouteHandler,ms.serverSideRendering,ms.appPagesBrowser,ms.shared,ms.instrument)});let{env:mo,stdout:Lo}=((Ue=hn)==null?void 0:Ue.process)??{},Ya=mo&&!mo.NO_COLOR&&(mo.FORCE_COLOR||Lo?.isTTY&&!mo.CI&&mo.TERM!=="dumb"),Ji=(Be,B,le,be)=>{let Xe=Be.substring(0,be)+le,ot=Be.substring(be+B.length),Gt=ot.indexOf(B);return~Gt?Xe+Ji(ot,B,le,Gt):Xe+ot},jn=(Be,B,le=Be)=>Ya?be=>{let Xe=""+be,ot=Xe.indexOf(B,Be.length);return~ot?Be+Ji(Xe,B,le,ot)+B:Be+Xe+B}:String,$i=jn("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m");jn("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),jn("\x1B[3m","\x1B[23m"),jn("\x1B[4m","\x1B[24m"),jn("\x1B[7m","\x1B[27m"),jn("\x1B[8m","\x1B[28m"),jn("\x1B[9m","\x1B[29m"),jn("\x1B[30m","\x1B[39m");let cs=jn("\x1B[31m","\x1B[39m"),Ta=jn("\x1B[32m","\x1B[39m"),Ws=jn("\x1B[33m","\x1B[39m");jn("\x1B[34m","\x1B[39m");let Ma=jn("\x1B[35m","\x1B[39m");jn("\x1B[38;2;173;127;168m","\x1B[39m"),jn("\x1B[36m","\x1B[39m");let Gn=jn("\x1B[37m","\x1B[39m");jn("\x1B[90m","\x1B[39m"),jn("\x1B[40m","\x1B[49m"),jn("\x1B[41m","\x1B[49m"),jn("\x1B[42m","\x1B[49m"),jn("\x1B[43m","\x1B[49m"),jn("\x1B[44m","\x1B[49m"),jn("\x1B[45m","\x1B[49m"),jn("\x1B[46m","\x1B[49m"),jn("\x1B[47m","\x1B[49m");let ss={wait:Gn($i("\u25CB")),error:cs($i("\u2A2F")),warn:Ws($i("\u26A0")),ready:"\u25B2",info:Gn($i(" ")),event:Ta($i("\u2713")),trace:Ma($i("\xBB"))},Ds={log:"log",warn:"warn",error:"error"};function Ba(Be){if(!Be.body)return[Be,Be];let[B,le]=Be.body.tee(),be=new Response(B,{status:Be.status,statusText:Be.statusText,headers:Be.headers});Object.defineProperty(be,"url",{value:Be.url});let Xe=new Response(le,{status:Be.status,statusText:Be.statusText,headers:Be.headers});return Object.defineProperty(Xe,"url",{value:Be.url}),[be,Xe]}var Ca=M(6195).Buffer;let Xa=Be=>{let B=["/layout"];if(Be.startsWith("/")){let le=Be.split("/");for(let be=1;be<le.length+1;be++){let Xe=le.slice(0,be).join("/");Xe&&(Xe.endsWith("/page")||Xe.endsWith("/route")||(Xe=`${Xe}${Xe.endsWith("/")?"":"/"}layout`),B.push(Xe))}}return B};function rs(Be,B){var le;Be&&((le=Be.requestEndedState)==null||le.ended)}var Li=M(5105);function Qi(Be,B){let le={as:"style"};typeof B=="string"&&(le.crossOrigin=B),Li.preload(Be,le)}function ko(Be,B,le){let be={as:"font",type:B};typeof le=="string"&&(be.crossOrigin=le),Li.preload(Be,be)}function Za(Be,B){Li.preconnect(Be,typeof B=="string"?{crossOrigin:B}:void 0)}let ll=function(){throw Error("Taint can only be used with the taint flag.")};function tl(){return function(Be){var B;if("__nextPatched"in(B=hn.fetch)&&B.__nextPatched===!0)return;let le=function(be){let Xe=ws.cache(ot=>[]);return function(ot,Gt){let cr,Er;if(Gt&&Gt.signal)return be(ot,Gt);if(typeof ot!="string"||Gt){let Ci=typeof ot=="string"||ot instanceof URL?new Request(ot,Gt):ot;if(Ci.method!=="GET"&&Ci.method!=="HEAD"||Ci.keepalive)return be(ot,Gt);Er=JSON.stringify([Ci.method,Array.from(Ci.headers.entries()),null,Ci.redirect,null,Ci.referrer,Ci.referrerPolicy,null]),cr=Ci.url}else Er='["GET",[],null,"follow",null,null,null,null]',cr=ot;let br=Xe(cr);for(let Ci=0,dn=br.length;Ci<dn;Ci+=1){let[Wn,Un]=br[Ci];if(Wn===Er)return Un.then(()=>{let ns=br[Ci][2];if(!ns)throw Error("No cached response");let[di,Di]=Ba(ns);return br[Ci][2]=Di,di})}let nn=new AbortController,Mn=be(ot,{...Gt,signal:nn.signal}),Bn=[Er,Mn,null];return br.push(Bn),Mn.then(Ci=>{let[dn,Wn]=Ba(Ci);return Bn[2]=Wn,dn})}}(hn.fetch);hn.fetch=function(be,{serverHooks:{DynamicServerError:Xe},staticGenerationAsyncStorage:ot}){let Gt=async(cr,Er)=>{var br,nn;let Mn;try{(Mn=new URL(cr instanceof Request?cr.url:cr)).username="",Mn.password=""}catch{Mn=void 0}let Bn=Mn?.href??"",Ci=Date.now(),dn=(Er==null||(br=Er.method)==null?void 0:br.toUpperCase())||"GET",Wn=(Er==null||(nn=Er.next)==null?void 0:nn.internal)===!0,Un=process.env.NEXT_OTEL_FETCH_DISABLED==="1";return Da().trace(Wn?C.internalFetch:K.fetch,{hideSpan:Un,kind:ia.CLIENT,spanName:["fetch",dn,Bn].filter(Boolean).join(" "),attributes:{"http.url":Bn,"http.method":dn,"net.peer.name":Mn?.hostname,"net.peer.port":Mn?.port||void 0}},async()=>{var ns;let di,Di,ri;if(Wn)return be(cr,Er);let xn=ot.getStore();if(!xn||xn.isDraftMode)return be(cr,Er);let Ti=cr&&typeof cr=="object"&&typeof cr.method=="string",Js=Nt=>Er?.[Nt]||(Ti?cr[Nt]:null),ga=Nt=>{var Mt,sr,vr;return(Er==null||(Mt=Er.next)==null?void 0:Mt[Nt])!==void 0?Er==null||(sr=Er.next)==null?void 0:sr[Nt]:Ti?(vr=cr.next)==null?void 0:vr[Nt]:void 0},xi=ga("revalidate"),Yi=function(Nt,Mt){let sr=[],vr=[];for(let kr=0;kr<Nt.length;kr++){let Mr=Nt[kr];if(typeof Mr!="string"?vr.push({tag:Mr,reason:"invalid type, must be a string"}):Mr.length>256?vr.push({tag:Mr,reason:"exceeded max length of 256"}):sr.push(Mr),sr.length>128){console.warn(`Warning: exceeded max tag count for ${Mt}, dropped tags:`,Nt.slice(kr).join(", "));break}}if(vr.length>0)for(let{tag:kr,reason:Mr}of(console.warn(`Warning: invalid tags passed to ${Mt}: `),vr))console.log(`tag: "${kr}" ${Mr}`);return sr}(ga("tags")||[],`fetch ${cr.toString()}`);if(Array.isArray(Yi))for(let Nt of(xn.tags||(xn.tags=[]),Yi))xn.tags.includes(Nt)||xn.tags.push(Nt);let Ms=function(Nt){var Mt,sr;let vr=[],{pagePath:kr,urlPathname:Mr}=Nt;if(Array.isArray(Nt.tags)||(Nt.tags=[]),kr)for(let fn of Xa(kr))fn=`${po}${fn}`,(Mt=Nt.tags)!=null&&Mt.includes(fn)||Nt.tags.push(fn),vr.push(fn);if(Mr){let fn=new URL(Mr,"http://n").pathname,ti=`${po}${fn}`;(sr=Nt.tags)!=null&&sr.includes(ti)||Nt.tags.push(ti),vr.push(ti)}return vr}(xn),qa=xn.fetchCache,Ka=!!xn.isUnstableNoStore,aa=Js("cache"),gs="";typeof aa=="string"&&xi!==void 0&&(Ti&&aa==="default"||function(...Nt){(function(Mt,...sr){(sr[0]===""||sr[0]===void 0)&&sr.length===1&&sr.shift();let vr=Mt in Ds?Ds[Mt]:"log",kr=ss[Mt];sr.length===0?console[vr](""):console[vr](" "+kr,...sr)})("warn",...Nt)}(`fetch for ${Bn} on ${xn.urlPathname} specified "cache: ${aa}" and "revalidate: ${xi}", only one should be specified.`),aa=void 0),aa==="force-cache"?xi=!1:(aa==="no-cache"||aa==="no-store"||qa==="force-no-store"||qa==="only-no-store")&&(xi=0),(aa==="no-cache"||aa==="no-store")&&(gs=`cache: ${aa}`),ri=function(Nt,Mt){try{let sr;if(Nt===!1)sr=Nt;else if(typeof Nt=="number"&&!isNaN(Nt)&&Nt>-1)sr=Nt;else if(Nt!==void 0)throw Error(`Invalid revalidate value "${Nt}" on "${Mt}", must be a non-negative number or "false"`);return sr}catch(sr){if(sr instanceof Error&&sr.message.includes("Invalid revalidate"))throw sr;return}}(xi,xn.urlPathname);let Qo=Js("headers"),Ro=typeof Qo?.get=="function"?Qo:new Headers(Qo||{}),ul=Ro.get("authorization")||Ro.get("cookie"),rl=!["get","head"].includes(((ns=Js("method"))==null?void 0:ns.toLowerCase())||"get"),ic=(ul||rl)&&xn.revalidate===0;switch(qa){case"force-no-store":gs="fetchCache = force-no-store";break;case"only-no-store":if(aa==="force-cache"||ri!==void 0&&(ri===!1||ri>0))throw Error(`cache: 'force-cache' used on fetch for ${Bn} with 'export const fetchCache = 'only-no-store'`);gs="fetchCache = only-no-store";break;case"only-cache":if(aa==="no-store")throw Error(`cache: 'no-store' used on fetch for ${Bn} with 'export const fetchCache = 'only-cache'`);break;case"force-cache":(xi===void 0||xi===0)&&(gs="fetchCache = force-cache",ri=!1)}ri===void 0?qa==="default-cache"?(ri=!1,gs="fetchCache = default-cache"):ic?(ri=0,gs="auto no cache"):qa==="default-no-store"?(ri=0,gs="fetchCache = default-no-store"):Ka?(ri=0,gs="noStore call"):(gs="auto cache",ri=typeof xn.revalidate!="boolean"&&xn.revalidate!==void 0&&xn.revalidate):gs||(gs=`revalidate: ${ri}`),xn.forceStatic&&ri===0||ic||xn.revalidate!==void 0&&(typeof ri!="number"||xn.revalidate!==!1&&(typeof xn.revalidate!="number"||!(ri<xn.revalidate)))||(ri===0&&qe(xn,"revalidate: 0"),xn.revalidate=ri);let V=typeof ri=="number"&&ri>0||ri===!1;if(xn.incrementalCache&&V)try{di=await xn.incrementalCache.fetchCacheKey(Bn,Ti?cr:Er)}catch{console.error("Failed to generate cache key for",cr)}let L=xn.nextFetchId??1;xn.nextFetchId=L+1;let ne=typeof ri!="number"?31536e3:ri,Pe=async(Nt,Mt)=>{let sr=["credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...Nt?[]:["signal"]];if(Ti){let kr=cr,Mr={body:kr._ogBody||kr.body};for(let fn of sr)Mr[fn]=kr[fn];cr=new Request(kr.url,Mr)}else if(Er){let{_ogBody:kr,body:Mr,signal:fn,...ti}=Er;Er={...ti,body:kr||Mr,signal:Nt?void 0:fn}}let vr={...Er,next:{...Er?.next,fetchType:"origin",fetchIdx:L}};return be(cr,vr).then(async kr=>{if(Nt||rs(xn,{start:Ci,url:Bn,cacheReason:Mt||gs,cacheStatus:ri===0||Mt?"skip":"miss",status:kr.status,method:vr.method||"GET"}),kr.status===200&&xn.incrementalCache&&di&&V){let Mr=Ca.from(await kr.arrayBuffer());try{await xn.incrementalCache.set(di,{kind:"FETCH",data:{headers:Object.fromEntries(kr.headers.entries()),body:Mr.toString("base64"),status:kr.status,url:kr.url},revalidate:ne},{fetchCache:!0,revalidate:ri,fetchUrl:Bn,fetchIdx:L,tags:Yi})}catch(ti){console.warn("Failed to set fetch cache",cr,ti)}let fn=new Response(Mr,{headers:new Headers(kr.headers),status:kr.status});return Object.defineProperty(fn,"url",{value:kr.url}),fn}return kr})},Oe=()=>Promise.resolve(),kt=!1;if(di&&xn.incrementalCache){Oe=await xn.incrementalCache.lock(di);let Nt=xn.isOnDemandRevalidate?null:await xn.incrementalCache.get(di,{kindHint:"fetch",revalidate:ri,fetchUrl:Bn,fetchIdx:L,tags:Yi,softTags:Ms});if(Nt?await Oe():Di="cache-control: no-cache (hard refresh)",Nt?.value&&Nt.value.kind==="FETCH")if(xn.isRevalidate&&Nt.isStale)kt=!0;else{if(Nt.isStale&&(xn.pendingRevalidates??={},!xn.pendingRevalidates[di])){let vr=Pe(!0).then(async kr=>({body:await kr.arrayBuffer(),headers:kr.headers,status:kr.status,statusText:kr.statusText})).finally(()=>{xn.pendingRevalidates??={},delete xn.pendingRevalidates[di||""]});vr.catch(console.error),xn.pendingRevalidates[di]=vr}let Mt=Nt.value.data;rs(xn,{start:Ci,url:Bn,cacheReason:gs,cacheStatus:"hit",status:Mt.status||200,method:Er?.method||"GET"});let sr=new Response(Ca.from(Mt.body,"base64"),{headers:Mt.headers,status:Mt.status});return Object.defineProperty(sr,"url",{value:Nt.value.data.url}),sr}}if(xn.isStaticGeneration&&Er&&typeof Er=="object"){let{cache:Nt}=Er;if(delete Er.cache,!xn.forceStatic&&Nt==="no-store"){let vr=`no-store fetch ${cr}${xn.urlPathname?` ${xn.urlPathname}`:""}`;qe(xn,vr),xn.revalidate=0;let kr=new Xe(vr);throw xn.dynamicUsageErr=kr,xn.dynamicUsageDescription=vr,kr}let Mt="next"in Er,{next:sr={}}=Er;if(typeof sr.revalidate=="number"&&(xn.revalidate===void 0||typeof xn.revalidate=="number"&&sr.revalidate<xn.revalidate)){if(!xn.forceDynamic&&!xn.forceStatic&&sr.revalidate===0){let vr=`revalidate: 0 fetch ${cr}${xn.urlPathname?` ${xn.urlPathname}`:""}`;qe(xn,vr);let kr=new Xe(vr);throw xn.dynamicUsageErr=kr,xn.dynamicUsageDescription=vr,kr}xn.forceStatic&&sr.revalidate===0||(xn.revalidate=sr.revalidate)}Mt&&delete Er.next}if(!di||!kt)return Pe(!1,Di).finally(Oe);{xn.pendingRevalidates??={};let Nt=xn.pendingRevalidates[di];if(Nt){let sr=await Nt;return new Response(sr.body,{headers:sr.headers,status:sr.status,statusText:sr.statusText})}let Mt=Pe(!0,Di).then(Ba);return(Nt=Mt.then(async sr=>{let vr=sr[0];return{body:await vr.arrayBuffer(),headers:vr.headers,status:vr.status,statusText:vr.statusText}}).finally(()=>{if(di){var sr;(sr=xn.pendingRevalidates)!=null&&sr[di]&&delete xn.pendingRevalidates[di]}})).catch(()=>{}),xn.pendingRevalidates[di]=Nt,Mt.then(sr=>sr[1])}})};return Gt.__nextPatched=!0,Gt.__nextGetStaticStore=()=>ot,Gt._nextOriginalFetch=be,Gt}(le,Be)}({serverHooks:vt,staticGenerationAsyncStorage:Ui.A})}let Ou=["",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(M.bind(M,8369)),"/Users/macbook-air/Public/maglit/app/[slug]/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(M.bind(M,6045)),"/Users/macbook-air/Public/maglit/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(M.bind(M,2520)),"next/dist/client/components/not-found-error"]}],kl=["/Users/macbook-air/Public/maglit/app/[slug]/page.tsx"],Jl="/[slug]/page",nc={require:M,loadChunk:()=>Promise.resolve()},Ac=new Fs.AppPageRouteModule({definition:{kind:S.APP_PAGE,page:"/[slug]/page",pathname:"/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:Ou}});var sf=M(5787),gu=M(527);let Nc=Be=>Be?JSON.parse(Be):void 0,af=zr.__BUILD_MANIFEST,Oc=Nc(zr.__REACT_LOADABLE_MANIFEST),Du=(at=zr.__RSC_MANIFEST)==null?void 0:at["/[slug]/page"],eo=Nc(zr.__RSC_SERVER_MANIFEST),iu=Nc(zr.__NEXT_FONT_MANIFEST),Mu=Nc(zr.__INTERCEPTION_ROUTE_REWRITE_MANIFEST)??[];Du&&eo&&(0,sf.Mo)({clientReferenceManifest:Du,serverActionsManifest:eo,serverModuleMap:(0,gu.w)({serverActionsManifest:eo,pageName:"/[slug]/page"})});let Xc=function({dev:Be,page:B,appMod:le,pageMod:be,errorMod:Xe,error500Mod:ot,pagesType:Gt,Document:cr,buildManifest:Er,reactLoadableManifest:br,interceptionRouteRewrites:nn,renderToHTML:Mn,clientReferenceManifest:Bn,subresourceIntegrityManifest:Ci,serverActionsManifest:dn,serverActions:Wn,config:Un,buildId:ns,nextFontManifest:di,incrementalCacheHandler:Di}){let ri=Gt==="app",xn={dev:Be,buildManifest:Er,reactLoadableManifest:br,subresourceIntegrityManifest:Ci,Document:cr,App:le?.default,clientReferenceManifest:Bn},Ti=new qr({dev:Be,conf:Un,minimalMode:!0,webServerConfig:{page:B,pathname:ri?(0,mt.w)(B):B,pagesType:Gt,interceptionRouteRewrites:nn,extendRenderOpts:{buildId:ns,runtime:et.Jp.experimentalEdge,supportsDynamicResponse:!0,disableOptimizedLoading:!0,serverActionsManifest:dn,serverActions:Wn,nextFontManifest:di},renderToHTML:Mn,incrementalCacheHandler:Di,loadComponent:async Js=>Js===B?{...xn,Component:be.default,pageConfig:be.config||{},getStaticProps:be.getStaticProps,getServerSideProps:be.getServerSideProps,getStaticPaths:be.getStaticPaths,ComponentMod:be,isAppPath:!!be.__next_app__,page:Js,routeModule:be.routeModule}:Js==="/500"&&ot?{...xn,Component:ot.default,pageConfig:ot.config||{},getStaticProps:ot.getStaticProps,getServerSideProps:ot.getServerSideProps,getStaticPaths:ot.getStaticPaths,ComponentMod:ot,page:Js,routeModule:ot.routeModule}:Js==="/_error"?{...xn,Component:Xe.default,pageConfig:Xe.config||{},getStaticProps:Xe.getStaticProps,getServerSideProps:Xe.getServerSideProps,getStaticPaths:Xe.getStaticPaths,ComponentMod:Xe,page:Js,routeModule:Xe.routeModule}:null}}).getRequestHandler();return async function(Js,ga){let xi=new Rn(Js),Yi=new mi;Ti(xi,Yi);let Ms=await Yi.toResponse();if(ga?.waitUntil){let qa=Dn.waitUntilPromise;qa&&ga.waitUntil(qa)}return Ms}}({pagesType:z.APP,dev:!1,page:"/[slug]/page",appMod:null,pageMod:jt,errorMod:null,error500Mod:null,Document:null,buildManifest:af,renderToHTML:ts.f,reactLoadableManifest:Oc,clientReferenceManifest:Du,serverActionsManifest:eo,serverActions:void 0,subresourceIntegrityManifest:void 0,config:{env:{},webpack:null,eslint:{ignoreDuringBuilds:!1},typescript:{ignoreBuildErrors:!1,tsconfigPath:"tsconfig.json"},distDir:".next",cleanDistDir:!0,assetPrefix:"",cacheMaxMemorySize:52428800,configOrigin:"next.config.mjs",useFileSystemPublicRoutes:!0,generateEtags:!0,pageExtensions:["tsx","ts","jsx","js"],poweredByHeader:!0,compress:!0,analyticsId:"",images:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1},devIndicators:{buildActivity:!0,buildActivityPosition:"bottom-right"},onDemandEntries:{maxInactiveAge:6e4,pagesBufferLength:5},amp:{canonicalBase:""},basePath:"",sassOptions:{},trailingSlash:!1,i18n:null,productionBrowserSourceMaps:!1,optimizeFonts:!0,excludeDefaultMomentLocales:!0,serverRuntimeConfig:{},publicRuntimeConfig:{},reactProductionProfiling:!1,reactStrictMode:null,httpAgentOptions:{keepAlive:!0},outputFileTracing:!0,staticPageGenerationTimeout:60,swcMinify:!0,modularizeImports:{"@mui/icons-material":{transform:"@mui/icons-material/{{member}}"},lodash:{transform:"lodash/{{member}}"}},experimental:{multiZoneDraftMode:!1,prerenderEarlyExit:!1,serverMinification:!0,serverSourceMaps:!1,linkNoTouchStart:!1,caseSensitiveRoutes:!1,clientRouterFilter:!0,clientRouterFilterRedirects:!1,fetchCacheKeyPrefix:"",middlewarePrefetch:"flexible",optimisticClientCache:!0,manualClientBasePath:!1,cpus:7,memoryBasedWorkersCount:!1,isrFlushToDisk:!0,workerThreads:!1,optimizeCss:!1,nextScriptWorkers:!1,scrollRestoration:!1,externalDir:!1,disableOptimizedLoading:!1,gzipSize:!0,craCompat:!1,esmExternals:!0,fullySpecified:!1,outputFileTracingRoot:"/Users/macbook-air/Public/maglit",swcTraceProfiling:!1,forceSwcTransforms:!1,largePageDataBytes:128e3,adjustFontFallbacks:!1,adjustFontFallbacksWithSizeAdjust:!1,typedRoutes:!1,instrumentationHook:!1,bundlePagesExternals:!1,parallelServerCompiles:!1,parallelServerBuildTraces:!1,ppr:!1,missingSuspenseWithCSRBailout:!0,optimizeServerReact:!0,useEarlyImport:!1,staleTimes:{dynamic:30,static:300},optimizePackageImports:["lucide-react","date-fns","lodash-es","ramda","antd","react-bootstrap","ahooks","@ant-design/icons","@headlessui/react","@headlessui-float/react","@heroicons/react/20/solid","@heroicons/react/24/solid","@heroicons/react/24/outline","@visx/visx","@tremor/react","rxjs","@mui/material","@mui/icons-material","recharts","react-use","@material-ui/core","@material-ui/icons","@tabler/icons-react","mui-core","react-icons/ai","react-icons/bi","react-icons/bs","react-icons/cg","react-icons/ci","react-icons/di","react-icons/fa","react-icons/fa6","react-icons/fc","react-icons/fi","react-icons/gi","react-icons/go","react-icons/gr","react-icons/hi","react-icons/hi2","react-icons/im","react-icons/io","react-icons/io5","react-icons/lia","react-icons/lib","react-icons/lu","react-icons/md","react-icons/pi","react-icons/ri","react-icons/rx","react-icons/si","react-icons/sl","react-icons/tb","react-icons/tfi","react-icons/ti","react-icons/vsc","react-icons/wi"]},configFile:"/Users/macbook-air/Public/maglit/next.config.mjs",configFileName:"next.config.mjs"},buildId:"ffZVfpHfyCKVY9p5yhVM7",nextFontManifest:iu,incrementalCacheHandler:null,interceptionRouteRewrites:Mu}),Lu=jt;function yu(Be){return Hr({...Be,IncrementalCache:Tr,handler:Xc})}},7505:(Jt,ae,M)=>{let q={bc739e46f07436238c103a2aa25f334d61cc43ec:()=>Promise.resolve().then(M.bind(M,1833)).then(W=>W.createUser),d190c6abc77b9ad5e6b1b18930229ac61a410b1f:()=>Promise.resolve().then(M.bind(M,8837)).then(W=>W.createLink),"990083f62ad32e4709fdee275f80991c7e071a72":()=>Promise.resolve().then(M.bind(M,1163)).then(W=>W.getLink)};async function Z(W,...j){return(await q[W]()).apply(null,j)}Jt.exports={bc739e46f07436238c103a2aa25f334d61cc43ec:Z.bind(null,"bc739e46f07436238c103a2aa25f334d61cc43ec"),d190c6abc77b9ad5e6b1b18930229ac61a410b1f:Z.bind(null,"d190c6abc77b9ad5e6b1b18930229ac61a410b1f"),"990083f62ad32e4709fdee275f80991c7e071a72":Z.bind(null,"990083f62ad32e4709fdee275f80991c7e071a72")}},7463:(Jt,ae,M)=>{Promise.resolve().then(M.bind(M,5826))},5559:(Jt,ae,M)=>{Promise.resolve().then(M.bind(M,599))},982:(Jt,ae,M)=>{Promise.resolve().then(M.bind(M,7034)),Promise.resolve().then(M.bind(M,3785)),Promise.resolve().then(M.bind(M,9027)),Promise.resolve().then(M.bind(M,7603)),Promise.resolve().then(M.bind(M,7245)),Promise.resolve().then(M.bind(M,4782)),Promise.resolve().then(M.bind(M,5291)),Promise.resolve().then(M.bind(M,4504)),Promise.resolve().then(M.bind(M,5975)),Promise.resolve().then(M.bind(M,8823))},5826:(Jt,ae,M)=>{"use strict";let q,Z,W,j;M.r(ae),M.d(ae,{default:()=>rP,runtime:()=>tP});var z,y,S,k,I,x,C,N,U,K,Y,ee,fe,Se,ze,Ue,at,vt,jt,re=M(926),F=M(9220),Q=M.t(F,2),se=M(1845),me=M(8783);function ce(){return null}var Ke=M(6037);let Je=/https?|ftp|gopher|file/;function He(n){let{auth:e,hostname:r}=n,a=n.protocol||"",l=n.pathname||"",c=n.hash||"",p=n.query||"",g=!1;e=e?encodeURIComponent(e).replace(/%3A/i,":")+"@":"",n.host?g=e+n.host:r&&(g=e+(~r.indexOf(":")?"["+r+"]":r),n.port&&(g+=":"+n.port)),p&&typeof p=="object"&&(p=String(Ke.Nn(p)));let b=n.search||p&&"?"+p||"";return a&&!a.endsWith(":")&&(a+=":"),n.slashes||(!a||Je.test(a))&&g!==!1?(g="//"+(g||""),l&&l[0]!=="/"&&(l="/"+l)):g||(g=""),c&&c[0]!=="#"&&(c="#"+c),b&&b[0]!=="?"&&(b="?"+b),""+a+g+(l=l.replace(/[?#]/g,encodeURIComponent))+(b=b.replace("#","%23"))+c}var _e=M(7506),Fe=M(3933),pt=M(5694);function lr(n){if(!(0,_e.sD)(n))return!0;try{let e=(0,_e.Dp)(),r=new URL(n,e);return r.origin===e&&(0,pt.e)(r.pathname)}catch{return!1}}var Ne=M(8631),tt=M(8215),we=M(9963);function Ce(n,e,r){let a,l=typeof e=="string"?e:He(e),c=l.match(/^[a-zA-Z]{1,}:\/\//),p=c?l.slice(c[0].length):l;if((p.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+l+"' passed to next/router in page: '"+n.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");let b=(0,_e.U3)(p);l=(c?c[0]:"")+b}if(!lr(l))return r?[l]:l;try{a=new URL(l.startsWith("#")?n.asPath:n.pathname,"http://n")}catch{a=new URL("/","http://n")}try{let b=new URL(l,a);b.pathname=(0,Fe.R)(b.pathname);let D="";if((0,Ne.$)(b.pathname)&&b.searchParams&&r){let te=(0,Ke.u5)(b.searchParams),{result:ie,params:ye}=function(je,Re,Ye){let ht="",Ze=(0,we.vG)(je),ke=Ze.groups,Ie=(Re!==je?(0,tt.t)(Ze)(Re):"")||Ye;ht=je;let Ae=Object.keys(ke);return Ae.every(it=>{let ut=Ie[it]||"",{repeat:ft,optional:nt}=ke[it],un="["+(ft?"...":"")+it+"]";return nt&&(un=(ut?"":"/")+"["+un+"]"),ft&&!Array.isArray(ut)&&(ut=[ut]),(nt||it in Ie)&&(ht=ht.replace(un,ft?ut.map(is=>encodeURIComponent(is)).join("/"):encodeURIComponent(ut))||"/")})||(ht=""),{params:Ae,result:ht}}(b.pathname,b.pathname,te);if(ie){var g;g={pathname:ie,hash:b.hash,query:function(je,Re){let Ye={};return Object.keys(je).forEach(ht=>{Re.includes(ht)||(Ye[ht]=je[ht])}),Ye}(te,ye)},D=He(g)}}let H=b.origin===a.origin?b.href.slice(b.origin.length):b.href;return r?[H,D||H]:H}catch{return r?[l]:l}}let We=function(n){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];return n};var ve=M(402),Ve=M(5291);typeof zr<"u"&&zr.requestIdleCallback&&zr.requestIdleCallback.bind(window),typeof zr<"u"&&zr.cancelIdleCallback&&zr.cancelIdleCallback.bind(window);var gt=M(1514),mt=M(5912);function lt(n){return typeof n=="string"?n:He(n)}let et=F.forwardRef(function(n,e){let r,a,{href:l,as:c,children:p,prefetch:g=null,passHref:b,replace:D,shallow:H,scroll:te,locale:ie,onClick:ye,onMouseEnter:je,onTouchStart:Re,legacyBehavior:Ye=!1,...ht}=n;r=p,Ye&&(typeof r=="string"||typeof r=="number")&&(r=(0,re.jsx)("a",{children:r}));let Ze=F.useContext(ve.RouterContext),ke=F.useContext(Ve.AppRouterContext),Ie=Ze??ke,Ae=!Ze,it=g!==!1,ut=g===null?mt.Ke.AUTO:mt.Ke.FULL,{href:ft,as:nt}=F.useMemo(()=>{if(!Ze){let fa=lt(l);return{href:fa,as:c?lt(c):fa}}let[ei,Vs]=Ce(Ze,l,!0);return{href:ei,as:c?Ce(Ze,c):Vs||ei}},[Ze,l,c]),un=F.useRef(ft),is=F.useRef(nt);Ye&&(a=F.Children.only(r));let Oi=Ye?a&&typeof a=="object"&&a.ref:e,[Ii,ps,vs]=function(ei){let{rootRef:Vs,rootMargin:fa,disabled:uo}=ei,[Xo,Wo]=(0,F.useState)(!1),xc=(0,F.useRef)(null);return[(0,F.useCallback)(gl=>{xc.current=gl},[]),Xo,(0,F.useCallback)(()=>{Wo(!1)},[])]}({rootMargin:"200px"}),ai=F.useCallback(ei=>{(is.current!==nt||un.current!==ft)&&(vs(),is.current=nt,un.current=ft),Ii(ei),Oi&&(typeof Oi=="function"?Oi(ei):typeof Oi=="object"&&(Oi.current=ei))},[nt,Oi,ft,vs,Ii]);F.useEffect(()=>{},[nt,ft,ps,ie,it,Ze?.locale,Ie,Ae,ut]);let Ni={ref:ai,onClick(ei){Ye||typeof ye!="function"||ye(ei),Ye&&a.props&&typeof a.props.onClick=="function"&&a.props.onClick(ei),Ie&&!ei.defaultPrevented&&function(Vs,fa,uo,Xo,Wo,xc,gl,To,qi){let{nodeName:va}=Vs.currentTarget;if(va.toUpperCase()==="A"&&(function(js){let yl=js.currentTarget.getAttribute("target");return yl&&yl!=="_self"||js.metaKey||js.ctrlKey||js.shiftKey||js.altKey||js.nativeEvent&&js.nativeEvent.which===2}(Vs)||!qi&&!lr(uo)))return;Vs.preventDefault();let Ps=()=>{let js=gl==null||gl;"beforePopState"in fa?fa[Wo?"replace":"push"](uo,Xo,{shallow:xc,locale:To,scroll:js}):fa[Wo?"replace":"push"](Xo||uo,{scroll:js})};qi?F.startTransition(Ps):Ps()}(ei,Ie,ft,nt,D,H,te,ie,Ae)},onMouseEnter(ei){Ye||typeof je!="function"||je(ei),Ye&&a.props&&typeof a.props.onMouseEnter=="function"&&a.props.onMouseEnter(ei)},onTouchStart:function(ei){Ye||typeof Re!="function"||Re(ei),Ye&&a.props&&typeof a.props.onTouchStart=="function"&&a.props.onTouchStart(ei)}};if((0,_e.sD)(nt))Ni.href=nt;else if(!Ye||b||a.type==="a"&&!("href"in a.props)){let ei=ie!==void 0?ie:Ze?.locale,Vs=Ze?.isLocaleDomain&&(Ze?.locales,Ze?.domainLocales,!1);Ni.href=Vs||(0,gt.n)(We(nt,ei,Ze?.defaultLocale))}return Ye?F.cloneElement(a,Ni):(0,re.jsx)("a",{...ht,...Ni,children:r})}),bt=function(n){let e=[],r=0;for(let a=0;a<n.length;a++){let l=n.charCodeAt(a);l<128?e[r++]=l:(l<2048?e[r++]=l>>6|192:((64512&l)==55296&&a+1<n.length&&(64512&n.charCodeAt(a+1))==56320?(l=65536+((1023&l)<<10)+(1023&n.charCodeAt(++a)),e[r++]=l>>18|240,e[r++]=l>>12&63|128):e[r++]=l>>12|224,e[r++]=l>>6&63|128),e[r++]=63&l|128)}return e},Ct=function(n){let e=[],r=0,a=0;for(;r<n.length;){let l=n[r++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){let c=n[r++];e[a++]=String.fromCharCode((31&l)<<6|63&c)}else if(l>239&&l<365){let c=((7&l)<<18|(63&n[r++])<<12|(63&n[r++])<<6|63&n[r++])-65536;e[a++]=String.fromCharCode(55296+(c>>10)),e[a++]=String.fromCharCode(56320+(1023&c))}else{let c=n[r++],p=n[r++];e[a++]=String.fromCharCode((15&l)<<12|(63&c)<<6|63&p)}}return e.join("")},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<n.length;l+=3){let c=n[l],p=l+1<n.length,g=p?n[l+1]:0,b=l+2<n.length,D=b?n[l+2]:0,H=c>>2,te=(3&c)<<4|g>>4,ie=(15&g)<<2|D>>6,ye=63&D;b||(ye=64,p||(ie=64)),a.push(r[H],r[te],r[ie],r[ye])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bt(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ct(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let r=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<n.length;){let c=r[n.charAt(l++)],p=l<n.length?r[n.charAt(l)]:0,g=++l<n.length?r[n.charAt(l)]:64,b=++l<n.length?r[n.charAt(l)]:64;if(++l,c==null||p==null||g==null||b==null)throw new Qe;let D=c<<2|p>>4;if(a.push(D),g!==64){let H=p<<4&240|g>>2;if(a.push(H),b!==64){let te=g<<6&192|b;a.push(te)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Qe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let yt=function(n){let e=bt(n);return Ee.encodeByteArray(e,!0)},Rt=function(n){return yt(n).replace(/\./g,"")},Et=function(n){try{return Ee.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},rr=()=>function(){if(typeof zr<"u")return zr;if(typeof window<"u")return window;if(M.g!==void 0)return M.g;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,an=()=>{if(typeof process>"u"||process.env===void 0)return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Hr=()=>{let n;if(typeof document>"u")return;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Et(n[1]);return e&&JSON.parse(e)},gn=()=>{try{return rr()||an()||Hr()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Or=n=>{var e,r;return(r=(e=gn())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[n]},wn=n=>{let e=Or(n);if(!e)return;let r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw Error(`Invalid host ${e} with no separate hostname and port!`);let a=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),a]:[e.substring(0,r),a]},Tn=()=>{var n;return(n=gn())===null||n===void 0?void 0:n.config},tn=n=>{var e;return(e=gn())===null||e===void 0?void 0:e[`_${n}`]};class rn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,a))}}}function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cn(){return!function(){var n;let e=(n=gn())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(M.g.process)==="[object process]"}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function On(){try{return typeof indexedDB=="object"}catch{return!1}}class Pt extends Error{constructor(e,r,a){super(r),this.code=e,this.customData=a,this.name="FirebaseError",Object.setPrototypeOf(this,Pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_n.prototype.create)}}class _n{constructor(e,r,a){this.service=e,this.serviceName=r,this.errors=a}create(e,...r){let a=r[0]||{},l=`${this.service}/${e}`,c=this.errors[e],p=c?c.replace(si,(b,D)=>{let H=a[D];return H!=null?String(H):`<${D}?>`}):"Error",g=`${this.serviceName}: ${p} (${l}).`;return new Pt(l,g,a)}}let si=/\{\$([^}]+)}/g;function zi(n,e){if(n===e)return!0;let r=Object.keys(n),a=Object.keys(e);for(let l of r){if(!a.includes(l))return!1;let c=n[l],p=e[l];if(Hs(c)&&Hs(p)){if(!zi(c,p))return!1}else if(c!==p)return!1}for(let l of a)if(!r.includes(l))return!1;return!0}function Hs(n){return n!==null&&typeof n=="object"}function es(n){let e=[];for(let[r,a]of Object.entries(n))Array.isArray(a)?a.forEach(l=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Ri(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function kn(n){let e=n.indexOf("?");if(!e)return"";let r=n.indexOf("#",e);return n.substring(e,r>0?r:void 0)}class st{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,a){let l;if(e===void 0&&r===void 0&&a===void 0)throw Error("Missing Observer.");(l=function(p,g){if(typeof p!="object"||p===null)return!1;for(let b of g)if(b in p&&typeof p[b]=="function")return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:r,complete:a}).next===void 0&&(l.next=Ht),l.error===void 0&&(l.error=Ht),l.complete===void 0&&(l.complete=Ht);let c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers!==void 0&&this.observers[e]!==void 0&&(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ht(){}function zt(n){return n&&n._delegate?n._delegate:n}class Yt{constructor(e,r,a){this.name=e,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let tr="[DEFAULT]";class En{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){let a=new rn;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{let l=this.getOrInitializeService({instanceIdentifier:r});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;let a=this.normalizeInstanceIdentifier(e?.identifier),l=(r=e?.optional)!==null&&r!==void 0&&r;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(e.instantiationMode==="EAGER")try{this.getOrInitializeService({instanceIdentifier:tr})}catch{}for(let[r,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(r);try{let c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(e=tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tr){return this.instances.has(e)}getOptions(e=tr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:r={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let l=this.getOrInitializeService({instanceIdentifier:a,options:r});for(let[c,p]of this.instancesDeferred.entries())a===this.normalizeInstanceIdentifier(c)&&p.resolve(l);return l}onInit(e,r){var a;let l=this.normalizeInstanceIdentifier(r),c=(a=this.onInitCallbacks.get(l))!==null&&a!==void 0?a:new Set;c.add(e),this.onInitCallbacks.set(l,c);let p=this.instances.get(l);return p&&e(p,l),()=>{c.delete(e)}}invokeOnInitCallbacks(e,r){let a=this.onInitCallbacks.get(r);if(a)for(let l of a)try{l(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:e===tr?void 0:e,options:r}),this.instances.set(e,a),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=tr){return this.component?this.component.multipleInstances?e:tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}class Kr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let r=this.getProvider(e.name);if(r.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let r=new En(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}let li=[];(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(k||(k={}));let pn={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},In=k.INFO,qn={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},Ln=(n,e,...r)=>{if(e<n.logLevel)return;let a=new Date().toISOString(),l=qn[e];if(l)console[l](`[${a}]  ${n.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ei{constructor(e){this.name=e,this._logLevel=In,this._logHandler=Ln,this._userLogHandler=null,li.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in k))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...e),this._logHandler(this,k.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...e),this._logHandler(this,k.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,k.INFO,...e),this._logHandler(this,k.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,k.WARN,...e),this._logHandler(this,k.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...e),this._logHandler(this,k.ERROR,...e)}}let Ha=(n,e)=>e.some(r=>n instanceof r),fi=new WeakMap,Us=new WeakMap,ds=new WeakMap,ui=new WeakMap,Ki=new WeakMap,$s={get(n,e,r){if(n instanceof IDBTransaction){if(e==="done")return Us.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ds.get(n);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Is(n[e])},set:(n,e,r)=>(n[e]=r,!0),has:(n,e)=>n instanceof IDBTransaction&&(e==="done"||e==="store")||e in n};function Is(n){var e;if(n instanceof IDBRequest)return function(a){let l=new Promise((c,p)=>{let g=()=>{a.removeEventListener("success",b),a.removeEventListener("error",D)},b=()=>{c(Is(a.result)),g()},D=()=>{p(a.error),g()};a.addEventListener("success",b),a.addEventListener("error",D)});return l.then(c=>{c instanceof IDBCursor&&fi.set(c,a)}).catch(()=>{}),Ki.set(l,a),l}(n);if(ui.has(n))return ui.get(n);let r=typeof(e=n)=="function"?e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...a){return e.apply(wa(this),a),Is(fi.get(this))}:function(...a){return Is(e.apply(wa(this),a))}:function(a,...l){let c=e.call(wa(this),a,...l);return ds.set(c,a.sort?a.sort():[a]),Is(c)}:(e instanceof IDBTransaction&&function(a){if(Us.has(a))return;let l=new Promise((c,p)=>{let g=()=>{a.removeEventListener("complete",b),a.removeEventListener("error",D),a.removeEventListener("abort",D)},b=()=>{c(),g()},D=()=>{p(a.error||new DOMException("AbortError","AbortError")),g()};a.addEventListener("complete",b),a.addEventListener("error",D),a.addEventListener("abort",D)});Us.set(a,l)}(e),Ha(e,q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,$s):e);return r!==n&&(ui.set(n,r),Ki.set(r,n)),r}let wa=n=>Ki.get(n),ua=["get","getKey","getAll","getAllKeys","count"],ea=["put","add","delete","clear"],Gi=new Map;function na(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gi.get(e))return Gi.get(e);let r=e.replace(/FromIndex$/,""),a=e!==r,l=ea.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(l||ua.includes(r)))return;let c=async function(p,...g){let b=this.transaction(p,l?"readwrite":"readonly"),D=b.store;return a&&(D=D.index(g.shift())),(await Promise.all([D[r](...g),l&&b.done]))[0]};return Gi.set(e,c),c}$s={...j=$s,get:(n,e,r)=>na(n,e)||j.get(n,e,r),has:(n,e)=>!!na(n,e)||j.has(n,e)};class Bs{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!function(r){let a=r.getComponent();return a?.type==="VERSION"}(e))return null;{let r=e.getImmediate();return`${r.library}/${r.version}`}}).filter(e=>e).join(" ")}}let wo="@firebase/app",Te="0.10.16",dt=new Ei("@firebase/app"),At="[DEFAULT]",$t={[wo]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Ut=new Map,Jr=new Map,Sr=new Map;function Qn(n,e){try{n.container.addComponent(e)}catch(r){dt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,r)}}function zn(n){let e=n.name;if(Sr.has(e))return dt.debug(`There were multiple attempts to register component ${e}.`),!1;for(let r of(Sr.set(e,n),Ut.values()))Qn(r,n);for(let r of Jr.values())Qn(r,n);return!0}function Qr(n,e){let r=n.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),n.container.getProvider(e)}function yr(n){return n.settings!==void 0}let pi=new _n("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class wi{constructor(e,r,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}let $a="11.0.2";function Lr(n,e={}){let r=n;typeof e!="object"&&(e={name:e});let a=Object.assign({name:At,automaticDataCollectionEnabled:!1},e),l=a.name;if(typeof l!="string"||!l)throw pi.create("bad-app-name",{appName:String(l)});if(r||(r=Tn()),!r)throw pi.create("no-options");let c=Ut.get(l);if(c){if(zi(r,c.options)&&zi(a,c.config))return c;throw pi.create("duplicate-app",{appName:l})}let p=new Kr(l);for(let b of Sr.values())p.addComponent(b);let g=new wi(r,a,p);return Ut.set(l,g),g}function Br(n=At){let e=Ut.get(n);if(!e&&n===At&&Tn())return Lr();if(!e)throw pi.create("no-app",{appName:n});return e}function Nn(n,e,r){var a;let l=(a=$t[n])!==null&&a!==void 0?a:n;r&&(l+=`-${r}`);let c=l.match(/\s|\//),p=e.match(/\s|\//);if(c||p){let g=[`Unable to register library "${l}" with version "${e}":`];c&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&p&&g.push("and"),p&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dt.warn(g.join(" "));return}zn(new Yt(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}let As="firebase-heartbeat-store",ql=null;function Jo(){return ql||(ql=function(n,e,{blocked:r,upgrade:a,blocking:l,terminated:c}={}){let p=indexedDB.open(n,1),g=Is(p);return a&&p.addEventListener("upgradeneeded",b=>{a(Is(p.result),b.oldVersion,b.newVersion,Is(p.transaction),b)}),r&&p.addEventListener("blocked",b=>r(b.oldVersion,b.newVersion,b)),g.then(b=>{c&&b.addEventListener("close",()=>c()),l&&b.addEventListener("versionchange",D=>l(D.oldVersion,D.newVersion,D))}).catch(()=>{}),g}("firebase-heartbeat-database",0,{upgrade:(n,e)=>{if(e===0)try{n.createObjectStore(As)}catch(r){console.warn(r)}}}).catch(n=>{throw pi.create("idb-open",{originalErrorMessage:n.message})})),ql}async function qs(n){try{let e=(await Jo()).transaction(As),r=await e.objectStore(As).get(Au(n));return await e.done,r}catch(e){if(e instanceof Pt)dt.warn(e.message);else{let r=pi.create("idb-get",{originalErrorMessage:e?.message});dt.warn(r.message)}}}async function xl(n,e){try{let r=(await Jo()).transaction(As,"readwrite");await r.objectStore(As).put(e,Au(n)),await r.done}catch(r){if(r instanceof Pt)dt.warn(r.message);else{let a=pi.create("idb-set",{originalErrorMessage:r?.message});dt.warn(a.message)}}}function Au(n){return`${n.name}!${n.options.appId}`}class tc{constructor(e){this.container=e,this._heartbeatsCache=null;let r=this.container.getProvider("app").getImmediate();this._storage=new Rc(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,r;try{let a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$o();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{let p=new Date(c.date).valueOf();return Date.now()-p<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}catch(a){dt.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let r=$o(),{heartbeatsToSend:a,unsentEntries:l}=function(p,g=1024){let b=[],D=p.slice();for(let H of p){let te=b.find(ie=>ie.agent===H.agent);if(te){if(te.dates.push(H.date),ru(b)>g){te.dates.pop();break}}else if(b.push({agent:H.agent,dates:[H.date]}),ru(b)>g){b.pop();break}D=D.slice(1)}return{heartbeatsToSend:b,unsentEntries:D}}(this._heartbeatsCache.heartbeats),c=Rt(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(r){return dt.warn(r),""}}}function $o(){return new Date().toISOString().substring(0,10)}class Rc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!On()&&new Promise((e,r)=>{try{let a=!0,l="validate-browser-context-for-indexeddb-analytics-module",c=zr.indexedDB.open(l);c.onsuccess=()=>{c.result.close(),a||zr.indexedDB.deleteDatabase(l),e(!0)},c.onupgradeneeded=()=>{a=!1},c.onerror=()=>{var p;r(((p=c.error)===null||p===void 0?void 0:p.message)||"")}}catch(a){r(a)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await qs(this.app);return e?.heartbeats?e:{heartbeats:[]}}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){let a=await this.read();return xl(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var r;if(await this._canUseIndexedDBPromise){let a=await this.read();return xl(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}}}function ru(n){return Rt(JSON.stringify({version:2,heartbeats:n})).length}zn(new Yt("platform-logger",n=>new Bs(n),"PRIVATE")),zn(new Yt("heartbeat",n=>new tc(n),"PRIVATE")),Nn(wo,Te,""),Nn(wo,Te,"esm2017"),Nn("fire-js","");var ci=function(){return(ci=Object.assign||function(n){for(var e,r=1,a=arguments.length;r<a;r++)for(var l in e=arguments[r])Object.prototype.hasOwnProperty.call(e,l)&&(n[l]=e[l]);return n}).apply(this,arguments)};function Zo(n,e){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&0>e.indexOf(a)&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(n);l<a.length;l++)0>e.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(n,a[l])&&(r[a[l]]=n[a[l]]);return r}function ta(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}typeof SuppressedError=="function"&&SuppressedError;let bi=new _n("auth","Firebase",ta()),Mo=new Ei("@firebase/auth");function Ts(n,...e){Mo.logLevel<=k.ERROR&&Mo.error(`Auth (${$a}): ${n}`,...e)}function io(n,...e){throw zl(n,...e)}function Ns(n,...e){return zl(n,...e)}function An(n,e,r){return new _n("auth","Firebase",Object.assign(Object.assign({},ta()),{[e]:r})).create(e,{appName:n.name})}function Qa(n){return An(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zl(n,...e){if(typeof n!="string"){let r=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(r,...a)}return bi.create(n,...e)}function ii(n,e,...r){if(!n)throw zl(e,...r)}function ba(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ts(e),Error(e)}function Gl(){var n;return typeof zr<"u"&&((n=zr.location)===null||n===void 0?void 0:n.href)||""}function Hl(){var n;return typeof zr<"u"&&((n=zr.location)===null||n===void 0?void 0:n.protocol)||null}class nu{constructor(e,r){var a;this.shortDelay=e,this.longDelay=r,a="Short delay should be less than long delay!",r>e||ba(a),this.isMobile=typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())||typeof navigator=="object"&&navigator.product==="ReactNative"}get(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hl()==="http:"||Hl()==="https:"||function(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function so(n,e){var r,a;r=n.emulator,a="Emulator should always be set here",r||ba(a);let{url:l}=n.emulator;return e?`${l}${e.startsWith("/")?e.slice(1):e}`:l}class Cl{static initialize(e,r,a){this.fetchImpl=e,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof zr<"u"&&"fetch"in zr?zr.fetch:typeof hn<"u"&&hn.fetch?hn.fetch:typeof fetch<"u"?fetch:void ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof zr<"u"&&"Headers"in zr?zr.Headers:typeof hn<"u"&&hn.Headers?hn.Headers:typeof Headers<"u"?Headers:void ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof zr<"u"&&"Response"in zr?zr.Response:typeof hn<"u"&&hn.Response?hn.Response:typeof Response<"u"?Response:void ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let fc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Pc=new nu(3e4,6e4);function pa(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Qt(n,e,r,a,l={}){return Sa(n,l,async()=>{let c={},p={};a&&(e==="GET"?p=a:c={body:JSON.stringify(a)});let g=es(Object.assign({key:n.config.apiKey},p)).slice(1),b=await n._getAdditionalHeaders();b["Content-Type"]="application/json",n.languageCode&&(b["X-Firebase-Locale"]=n.languageCode);let D=Object.assign({method:e,headers:b},c);return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||(D.referrerPolicy="no-referrer"),Cl.fetch()(wl(n,n.config.apiHost,r,g),D)})}async function Sa(n,e,r){n._canInitEmulator=!1;let a=Object.assign(Object.assign({},fc),e);try{let l=new pc(n),c=await Promise.race([r(),l.promise]);l.clearNetworkTimeout();let p=await c.json();if("needConfirmation"in p)throw Bo(n,"account-exists-with-different-credential",p);if(c.ok&&!("errorMessage"in p))return p;{let[g,b]=(c.ok?p.errorMessage:p.error.message).split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bo(n,"credential-already-in-use",p);if(g==="EMAIL_EXISTS")throw Bo(n,"email-already-in-use",p);if(g==="USER_DISABLED")throw Bo(n,"user-disabled",p);let D=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw An(n,D,b);io(n,D)}}catch(l){if(l instanceof Pt)throw l;io(n,"network-request-failed",{message:String(l)})}}async function ma(n,e,r,a,l={}){let c=await Qt(n,e,r,a,l);return"mfaPendingCredential"in c&&io(n,"multi-factor-auth-required",{_serverResponse:c}),c}function wl(n,e,r,a){let l=`${e}${r}?${a}`;return n.config.emulator?so(n.config,l):`${n.config.apiScheme}://${l}`}class pc{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(Ns(this.auth,"network-request-failed")),Pc.get())})}}function Bo(n,e,r){let a={appName:n.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);let l=Ns(n,e,a);return l.customData._tokenResponse=r,l}function Kl(n){return n!==void 0&&n.enterprise!==void 0}class xs{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return function(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Rs(n,e){return Qt(n,"GET","/v2/recaptchaConfig",pa(n,e))}async function Wl(n,e){return Qt(n,"POST","/v1/accounts:delete",e)}async function Nu(n,e){return Qt(n,"POST","/v1/accounts:lookup",e)}function ol(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rc(n,e=!1){let r=zt(n),a=await r.getIdToken(e),l=Yc(a);ii(l&&l.exp&&l.auth_time&&l.iat,r.auth,"internal-error");let c=typeof l.firebase=="object"?l.firebase:void 0,p=c?.sign_in_provider;return{claims:l,token:a,authTime:ol(ho(l.auth_time)),issuedAtTime:ol(ho(l.iat)),expirationTime:ol(ho(l.exp)),signInProvider:p||null,signInSecondFactor:c?.sign_in_second_factor||null}}function ho(n){return 1e3*Number(n)}function Yc(n){let[e,r,a]=n.split(".");if(e===void 0||r===void 0||a===void 0)return Ts("JWT malformed, contained fewer than 3 sections"),null;try{let l=Et(r);return l?JSON.parse(l):(Ts("Failed to decode base64 JWT payload"),null)}catch(l){return Ts("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Me(n){let e=Yc(n);return ii(e,"internal-error"),ii(e.exp!==void 0,"internal-error"),ii(e.iat!==void 0,"internal-error"),Number(e.exp)-Number(e.iat)}async function ct(n,e,r=!1){if(r)return e;try{return await e}catch(a){throw a instanceof Pt&&function({code:l}){return l==="auth/user-disabled"||l==="auth/user-token-expired"}(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}class St{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(!e)return this.errorBackoff=3e4,Math.max(0,((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5);{let a=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),a}}schedule(e=!1){if(!this.isRunning)return;let r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Wt{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function or(n){var e;let r=n.auth,a=await n.getIdToken(),l=await ct(n,Nu(r,{idToken:a}));ii(l?.users.length,r,"internal-error");let c=l.users[0];n._notifyReloadListener(c);let p=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Tr(c.providerUserInfo):[],g=[...n.providerData.filter(H=>!p.some(te=>te.providerId===H.providerId)),...p],b=n.isAnonymous,D=!(n.email&&c.passwordHash)&&!g?.length;Object.assign(n,{uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new Wt(c.createdAt,c.lastLoginAt),isAnonymous:!!b&&D})}async function Ir(n){let e=zt(n);await or(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tr(n){return n.map(e=>{var{providerId:r}=e,a=Zo(e,["providerId"]);return{providerId:r,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}async function Cr(n,e){let r=await Sa(n,{},async()=>{let a=es({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=n.config,p=wl(n,l,"/v1/token",`key=${c}`),g=await n._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",Cl.fetch()(p,{method:"POST",headers:g,body:a})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Yr(n,e){return Qt(n,"POST","/v2/accounts:revokeToken",pa(n,e))}class qr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ii(e.idToken,"internal-error"),ii(e.idToken!==void 0,"internal-error"),ii(e.refreshToken!==void 0,"internal-error");let r="expiresIn"in e&&e.expiresIn!==void 0?Number(e.expiresIn):Me(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ii(e.length!==0,"internal-error");let r=Me(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return r||!this.accessToken||this.isExpired?(ii(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){let{accessToken:a,refreshToken:l,expiresIn:c}=await Cr(e,r);this.updateTokensAndExpiration(a,l,Number(c))}updateTokensAndExpiration(e,r,a){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*a}static fromJSON(e,r){let{refreshToken:a,accessToken:l,expirationTime:c}=r,p=new qr;return a&&(ii(typeof a=="string","internal-error",{appName:e}),p.refreshToken=a),l&&(ii(typeof l=="string","internal-error",{appName:e}),p.accessToken=l),c&&(ii(typeof c=="number","internal-error",{appName:e}),p.expirationTime=c),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qr,this.toJSON())}_performRefresh(){return ba("not implemented")}}function ln(n,e){ii(typeof n=="string"||n===void 0,"internal-error",{appName:e})}class Pn{constructor(e){var{uid:r,auth:a,stsTokenManager:l}=e,c=Zo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new St(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=a,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Wt(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){let r=await ct(this,this.stsTokenManager.getToken(this.auth,e));return ii(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return rc(this,e)}reload(){return Ir(this)}_assign(e){this!==e&&(ii(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let r=new Pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ii(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),r&&await or(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(Qa(this.auth));let e=await this.getIdToken();return await ct(this,Wl(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var a,l,c,p,g,b,D,H;let te=(a=r.displayName)!==null&&a!==void 0?a:void 0,ie=(l=r.email)!==null&&l!==void 0?l:void 0,ye=(c=r.phoneNumber)!==null&&c!==void 0?c:void 0,je=(p=r.photoURL)!==null&&p!==void 0?p:void 0,Re=(g=r.tenantId)!==null&&g!==void 0?g:void 0,Ye=(b=r._redirectEventId)!==null&&b!==void 0?b:void 0,ht=(D=r.createdAt)!==null&&D!==void 0?D:void 0,Ze=(H=r.lastLoginAt)!==null&&H!==void 0?H:void 0,{uid:ke,emailVerified:Ie,isAnonymous:Ae,providerData:it,stsTokenManager:ut}=r;ii(ke&&ut,e,"internal-error");let ft=qr.fromJSON(this.name,ut);ii(typeof ke=="string",e,"internal-error"),ln(te,e.name),ln(ie,e.name),ii(typeof Ie=="boolean",e,"internal-error"),ii(typeof Ae=="boolean",e,"internal-error"),ln(ye,e.name),ln(je,e.name),ln(Re,e.name),ln(Ye,e.name),ln(ht,e.name),ln(Ze,e.name);let nt=new Pn({uid:ke,auth:e,email:ie,emailVerified:Ie,displayName:te,isAnonymous:Ae,photoURL:je,phoneNumber:ye,tenantId:Re,stsTokenManager:ft,createdAt:ht,lastLoginAt:Ze});return it&&Array.isArray(it)&&(nt.providerData=it.map(un=>Object.assign({},un))),Ye&&(nt._redirectEventId=Ye),nt}static async _fromIdTokenResponse(e,r,a=!1){let l=new qr;l.updateFromServerResponse(r);let c=new Pn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a});return await or(c),c}static async _fromGetAccountInfoResponse(e,r,a){let l=r.users[0];ii(l.localId!==void 0,"internal-error");let c=l.providerUserInfo!==void 0?Tr(l.providerUserInfo):[],p=!(l.email&&l.passwordHash)&&!c?.length,g=new qr;g.updateFromIdToken(a);let b=new Pn({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:p});return Object.assign(b,{uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Wt(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length}),b}}let Rn=new Map;function mi(n){var e,r;e="Expected a class definition",n instanceof Function||ba(e);let a=Rn.get(n);return a?(r="Instance stored in cache mismatched with class",a instanceof n||ba(r)):(a=new n,Rn.set(n,a)),a}class Vi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){let r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}function Dn(n,e,r){return`firebase:${n}:${e}:${r}`}Vi.type="NONE";class ts{constructor(e,r,a){this.persistence=e,this.auth=r,this.userKey=a;let{config:l,name:c}=this.auth;this.fullUserKey=Dn(this.userKey,l.apiKey,c),this.fullPersistenceKey=Dn("persistence",l.apiKey,c),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?Pn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,a="authUser"){if(!r.length)return new ts(mi(Vi),e,a);let l=(await Promise.all(r.map(async D=>{if(await D._isAvailable())return D}))).filter(D=>D),c=l[0]||mi(Vi),p=Dn(a,e.config.apiKey,e.name),g=null;for(let D of r)try{let H=await D._get(p);if(H){let te=Pn._fromJSON(e,H);D!==c&&(g=te),c=D;break}}catch{}let b=l.filter(D=>D._shouldAllowMigration);return c._shouldAllowMigration&&b.length&&(c=b[0],g&&await c._set(p,g.toJSON()),await Promise.all(r.map(async D=>{if(D!==c)try{await D._remove(p)}catch{}}))),new ts(c,e,a)}}function Fs(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_i(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";{if(e.includes("edge/"))return"Edge";if(gi(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wi(e))return"Blackberry";if(Ui(e))return"Webos";if(as(e))return"Safari";if((e.includes("chrome/")||Zt(e))&&!e.includes("edge/"))return"Chrome";if(yi(e))return"Android";let r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(r?.length===2)return r[1]}return"Other"}function gi(n=on()){return/firefox\//i.test(n)}function as(n=on()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zt(n=on()){return/crios\//i.test(n)}function _i(n=on()){return/iemobile/i.test(n)}function yi(n=on()){return/android/i.test(n)}function Wi(n=on()){return/blackberry/i.test(n)}function Ui(n=on()){return/webos/i.test(n)}function Pi(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $n(n=on()){return Pi(n)||yi(n)||Ui(n)||Wi(n)||/windows phone/i.test(n)||_i(n)}function ws(n,e=[]){let r;switch(n){case"Browser":r=Fs(on());break;case"Worker":r=`${Fs(on())}-${n}`;break;default:r=n}let a=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${$a}/${a}`}class bs{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){let a=c=>new Promise((p,g)=>{try{let b=e(c);p(b)}catch(b){g(b)}});a.onAbort=r,this.queue.push(a);let l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let r=[];try{for(let a of this.queue)await a(e),a.onAbort&&r.push(a.onAbort)}catch(a){for(let l of(r.reverse(),r))try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function os(n,e={}){return Qt(n,"GET","/v2/passwordPolicy",pa(n,e))}class hi{constructor(e){var r,a,l,c;let p=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=p.minPasswordLength)!==null&&r!==void 0?r:6,p.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=p.maxPasswordLength),p.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=p.containsLowercaseCharacter),p.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=p.containsUppercaseCharacter),p.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=p.containsNumericCharacter),p.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=p.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0&&c,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,a,l,c,p,g;let b={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,b),this.validatePasswordCharacterOptions(e,b),b.isValid&&(b.isValid=(r=b.meetsMinPasswordLength)===null||r===void 0||r),b.isValid&&(b.isValid=(a=b.meetsMaxPasswordLength)===null||a===void 0||a),b.isValid&&(b.isValid=(l=b.containsLowercaseLetter)===null||l===void 0||l),b.isValid&&(b.isValid=(c=b.containsUppercaseLetter)===null||c===void 0||c),b.isValid&&(b.isValid=(p=b.containsNumericCharacter)===null||p===void 0||p),b.isValid&&(b.isValid=(g=b.containsNonAlphanumericCharacter)===null||g===void 0||g),b}validatePasswordLengthOptions(e,r){let a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=e.length>=a),l&&(r.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,r){let a;this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);for(let l=0;l<e.length;l++)a=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,r,a,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class xe{constructor(e,r,a,l){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T(this),this.idTokenSubscription=new T(this),this.beforeStateQueue=new bs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=mi(r)),this._initializationPromise=this.queue(async()=>{var a,l;if(!this._deleted&&(this.persistenceManager=await ts.create(this,e),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let r=await Nu(this,{idToken:e}),a=await Pn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(yr(this.app)){let p=this.app.settings.authIdToken;return p?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(g,g))}):this.directlySetCurrentUser(null)}let a=await this.assertedPersistence.getCurrentUser(),l=a,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let p=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,g=l?._redirectEventId,b=await this.tryRedirectSignIn(e);(!p||p===g)&&b?.user&&(l=b.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(p){l=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return ii(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await or(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(Qa(this));let r=e?zt(e):null;return r&&ii(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ii(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(Qa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(Qa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new hi(await os(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _n("auth","Firebase",e())}onAuthStateChanged(e,r,a){return this.registerStateListener(this.authStateSubscription,e,r,a)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,a){return this.registerStateListener(this.idTokenSubscription,e,r,a)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{let a=this.onAuthStateChanged(()=>{a(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){let r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(r.tenantId=this.tenantId),await Yr(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){let a=await this.getOrInitRedirectPersistenceManager(r);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let r=e&&mi(e)||this._popupRedirectResolver;ii(r,this,"argument-error"),this.redirectPersistenceManager=await ts.create(this,[mi(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let a=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,a,l){if(this._deleted)return()=>{};let c=typeof r=="function"?r:r.next.bind(r),p=!1,g=this._isInitialized?Promise.resolve():this._initializationPromise;if(ii(g,this,"internal-error"),g.then(()=>{p||c(this.currentUser)}),typeof r=="function"){let b=e.addObserver(r,a,l);return()=>{p=!0,b()}}{let b=e.addObserver(r);return()=>{p=!0,b()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ii(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ws(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);let a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(r["X-Firebase-Client"]=a);let l=await this._getAppCheckToken();return l&&(r["X-Firebase-AppCheck"]=l),r}async _getAppCheckToken(){var e;let r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r?.error&&function(a,...l){Mo.logLevel<=k.WARN&&Mo.warn(`Auth (${$a}): ${a}`,...l)}(`Error while retrieving App Check token: ${r.error}`),r?.token}}class T{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(r,a){let l=new st(r,void 0);return l.subscribe.bind(l)}(r=>this.observer=r)}get next(){return ii(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let G={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pe(n){return`__${n}${Math.floor(1e6*Math.random())}`}class qe{constructor(){this.enterprise=new wt}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class wt{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}let Dt="NO_RECAPTCHA";class pr{constructor(e){this.type="recaptcha-enterprise",this.auth=zt(e)}async verify(e="verify",r=!1){async function a(c){if(!r){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(p,g)=>{Rs(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(b=>{if(b.recaptchaKey===void 0)g(Error("recaptcha Enterprise site key undefined"));else{let D=new xs(b);return c.tenantId==null?c._agentRecaptchaConfig=D:c._tenantRecaptchaConfigs[c.tenantId]=D,p(D.siteKey)}}).catch(b=>{g(b)})})}function l(c,p,g){let b=window.grecaptcha;Kl(b)?b.enterprise.ready(()=>{b.enterprise.execute(c,{action:e}).then(D=>{p(D)}).catch(()=>{p(Dt)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qe().execute("siteKey",{action:"verify"}):new Promise((c,p)=>{a(this.auth).then(g=>{if(!r&&Kl(window.grecaptcha))l(g,c,p);else{var b;if(typeof window>"u"){p(Error("RecaptchaVerifier is only supported in browser"));return}let D=G.recaptchaEnterpriseScript;D.length!==0&&(D+=g),(b=D,G.loadJS(b)).then(()=>{l(g,c,p)}).catch(H=>{p(H)})}}).catch(g=>{p(g)})})}}async function mr(n,e,r,a=!1,l=!1){let c,p=new pr(n);if(l)c=Dt;else try{c=await p.verify(r)}catch{c=await p.verify(r,!0)}let g=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){let b=g.phoneEnrollmentInfo.phoneNumber,D=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:b,recaptchaToken:D,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){let b=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:b,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:c}):Object.assign(g,{captchaResponse:c}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function sn(n,e,r,a,l){var c,p;if(l==="EMAIL_PASSWORD_PROVIDER"){if((c=n._getRecaptchaConfig())===null||c===void 0||!c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return a(n,e).catch(async g=>{if(g.code!=="auth/missing-recaptcha-token")return Promise.reject(g);{console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let b=await mr(n,e,r,r==="getOobCode");return a(n,b)}});{let g=await mr(n,e,r,r==="getOobCode");return a(n,g)}}if(l!=="PHONE_PROVIDER")return Promise.reject(l+" provider is not supported.");if(!((p=n._getRecaptchaConfig())===null||p===void 0)&&p.isProviderEnabled("PHONE_PROVIDER")){let g=await mr(n,e,r);return a(n,g).catch(async b=>{var D;if(((D=n._getRecaptchaConfig())===null||D===void 0?void 0:D.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(b.code==="auth/missing-recaptcha-token"||b.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);let H=await mr(n,e,r,!1,!0);return a(n,H)}return Promise.reject(b)})}{let g=await mr(n,e,r,!1,!0);return a(n,g)}}async function Sn(n){let e=zt(n),r=new xs(await Rs(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new pr(e).verify()}function us(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Cs(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}class xa{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ba("not implemented")}_getIdTokenResponse(e){return ba("not implemented")}_linkToIdToken(e,r){return ba("not implemented")}_getReauthenticationResolver(e){return ba("not implemented")}}async function Ea(n,e){return Qt(n,"POST","/v1/accounts:signUp",e)}async function el(n,e){return ma(n,"POST","/v1/accounts:signInWithPassword",pa(n,e))}async function ia(n,e){return ma(n,"POST","/v1/accounts:signInWithEmailLink",pa(n,e))}async function Ss(n,e){return ma(n,"POST","/v1/accounts:signInWithEmailLink",pa(n,e))}class _a extends xa{constructor(e,r,a,l=null){super("password",a),this._email=e,this._password=r,this._tenantId=l}static _fromEmailAndPassword(e,r){return new _a(e,r,"password")}static _fromEmailAndCode(e,r,a=null){return new _a(e,r,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return sn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",el,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ia(e,{email:this._email,oobCode:this._password});default:io(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":return sn(e,{idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ea,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Ss(e,{idToken:r,email:this._email,oobCode:this._password});default:io(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sa(n,e){return ma(n,"POST","/v1/accounts:signInWithIdp",pa(n,e))}class Ks extends xa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let r=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):io("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let r=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:l}=r,c=Zo(r,["providerId","signInMethod"]);if(!a||!l)return null;let p=new Ks(a,l);return p.idToken=c.idToken||void 0,p.accessToken=c.accessToken||void 0,p.secret=c.secret,p.nonce=c.nonce,p.pendingToken=c.pendingToken||null,p}_getIdTokenResponse(e){return sa(e,this.buildRequest())}_linkToIdToken(e,r){let a=this.buildRequest();return a.idToken=r,sa(e,a)}_getReauthenticationResolver(e){let r=this.buildRequest();return r.autoCreate=!1,sa(e,r)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=es(r)}return e}}async function Oa(n,e){return Qt(n,"POST","/v1/accounts:sendVerificationCode",pa(n,e))}async function ys(n,e){return ma(n,"POST","/v1/accounts:signInWithPhoneNumber",pa(n,e))}async function Ia(n,e){let r=await ma(n,"POST","/v1/accounts:signInWithPhoneNumber",pa(n,e));if(r.temporaryProof)throw Bo(n,"account-exists-with-different-credential",r);return r}let fo={USER_NOT_FOUND:"user-not-found"};async function Da(n,e){return ma(n,"POST","/v1/accounts:signInWithPhoneNumber",pa(n,Object.assign(Object.assign({},e),{operation:"REAUTH"})),fo)}class po extends xa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,r){return new po({verificationId:e,verificationCode:r})}static _fromTokenResponse(e,r){return new po({phoneNumber:e,temporaryProof:r})}_getIdTokenResponse(e){return ys(e,this._makeVerificationRequest())}_linkToIdToken(e,r){return Ia(e,Object.assign({idToken:r},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Da(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:r,verificationId:a,verificationCode:l}=this.params;return e&&r?{temporaryProof:e,phoneNumber:r}:{sessionInfo:a,code:l}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:r,verificationCode:a,phoneNumber:l,temporaryProof:c}=e;return a||r||l||c?new po({verificationId:r,verificationCode:a,phoneNumber:l,temporaryProof:c}):null}}class ms{constructor(e){var r,a,l,c,p,g;let b=Ri(kn(e)),D=(r=b.apiKey)!==null&&r!==void 0?r:null,H=(a=b.oobCode)!==null&&a!==void 0?a:null,te=function(ie){switch(ie){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}((l=b.mode)!==null&&l!==void 0?l:null);ii(D&&H&&te,"argument-error"),this.apiKey=D,this.operation=te,this.code=H,this.continueUrl=(c=b.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(p=b.languageCode)!==null&&p!==void 0?p:null,this.tenantId=(g=b.tenantId)!==null&&g!==void 0?g:null}static parseLink(e){let r=function(a){let l=Ri(kn(a)).link,c=l?Ri(kn(l)).deep_link_id:null,p=Ri(kn(a)).deep_link_id;return(p?Ri(kn(p)).link:null)||p||c||l||a}(e);try{return new ms(r)}catch{return null}}}class mo{constructor(){this.providerId=mo.PROVIDER_ID}static credential(e,r){return _a._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){let a=ms.parseLink(r);return ii(a,"argument-error"),_a._fromEmailAndCode(e,a.code,a.tenantId)}}mo.PROVIDER_ID="password",mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Lo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ya extends Lo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ji extends Ya{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ji.PROVIDER_ID="facebook.com";class jn extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ks._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:r,oauthAccessToken:a}=e;if(!r&&!a)return null;try{return jn.credential(r,a)}catch{return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com",jn.PROVIDER_ID="google.com";class $i extends Ya{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com",$i.PROVIDER_ID="github.com";class cs extends Ya{constructor(){super("twitter.com")}static credential(e,r){return Ks._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:r,oauthTokenSecret:a}=e;if(!r||!a)return null;try{return cs.credential(r,a)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com",cs.PROVIDER_ID="twitter.com";class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,a,l=!1){return new Ta({user:await Pn._fromIdTokenResponse(e,a,l),providerId:Ws(a),_tokenResponse:a,operationType:r})}static async _forOperation(e,r,a){return await e._updateTokensIfNecessary(a,!0),new Ta({user:e,providerId:Ws(a),_tokenResponse:a,operationType:r})}}function Ws(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Ma extends Pt{constructor(e,r,a,l){var c;super(r.code,r.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,Ma.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,r,a,l){return new Ma(e,r,a,l)}}function Gn(n,e,r,a){return(e==="reauthenticate"?r._getReauthenticationResolver(n):r._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ma._fromErrorAndOperation(n,l,e,a):l})}async function ss(n,e,r=!1){let a=await ct(n,e._linkToIdToken(n.auth,await n.getIdToken()),r);return Ta._forOperation(n,"link",a)}async function Ds(n,e,r=!1){let{auth:a}=n;if(yr(a.app))return Promise.reject(Qa(a));let l="reauthenticate";try{let c=await ct(n,Gn(a,l,e,n),r);ii(c.idToken,a,"internal-error");let p=Yc(c.idToken);ii(p,a,"internal-error");let{sub:g}=p;return ii(n.uid===g,a,"user-mismatch"),Ta._forOperation(n,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&io(a,"user-mismatch"),c}}async function Ba(n,e,r=!1){if(yr(n.app))return Promise.reject(Qa(n));let a="signIn",l=await Gn(n,a,e),c=await Ta._fromIdTokenResponse(n,a,l);return r||await n._updateCurrentUser(c.user),c}class Ca{constructor(e,r){this.factorId=e,this.uid=r.mfaEnrollmentId,this.enrollmentTime=new Date(r.enrolledAt).toUTCString(),this.displayName=r.displayName}static _fromServerResponse(e,r){return"phoneInfo"in r?Xa._fromServerResponse(e,r):"totpInfo"in r?rs._fromServerResponse(e,r):io(e,"internal-error")}}class Xa extends Ca{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,r){return new Xa(r)}}class rs extends Ca{constructor(e){super("totp",e)}static _fromServerResponse(e,r){return new rs(r)}}class Li{constructor(e,r,a={}){this.isNewUser=e,this.providerId=r,this.profile=a}}class Qi{constructor(e,r,a){this.type=e,this.credential=r,this.user=a}static _fromIdtoken(e,r){return new Qi("enroll",e,r)}static _fromMfaPendingCredential(e){return new Qi("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var r,a;if(e?.multiFactorSession){if(!((r=e.multiFactorSession)===null||r===void 0)&&r.pendingCredential)return Qi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((a=e.multiFactorSession)===null||a===void 0)&&a.idToken)return Qi._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ko{constructor(e,r,a){this.session=e,this.hints=r,this.signInResolver=a}static _fromError(e,r){let a=zt(e),l=r.customData._serverResponse,c=(l.mfaInfo||[]).map(g=>Ca._fromServerResponse(a,g));ii(l.mfaPendingCredential,a,"internal-error");let p=Qi._fromMfaPendingCredential(l.mfaPendingCredential);return new ko(p,c,async g=>{let b=await g._process(a,p);delete l.mfaInfo,delete l.mfaPendingCredential;let D=Object.assign(Object.assign({},l),{idToken:b.idToken,refreshToken:b.refreshToken});switch(r.operationType){case"signIn":let H=await Ta._fromIdTokenResponse(a,r.operationType,D);return await a._updateCurrentUser(H.user),H;case"reauthenticate":return ii(r.user,a,"internal-error"),Ta._forOperation(r.user,r.operationType,D);default:io(a,"internal-error")}})}async resolveSignIn(e){return this.signInResolver(e)}}function Za(n,e){return Qt(n,"POST","/v2/accounts/mfaEnrollment:start",pa(n,e))}class ll{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(r=>{r.mfaInfo&&(this.enrolledFactors=r.mfaInfo.map(a=>Ca._fromServerResponse(e.auth,a)))})}static _fromUser(e){return new ll(e)}async getSession(){return Qi._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,r){let a=await this.getSession(),l=await ct(this.user,e._process(this.user.auth,a,r));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){let r=typeof e=="string"?e:e.uid,a=await this.user.getIdToken();try{var l,c;let p=await ct(this.user,(l=this.user.auth,c={idToken:a,mfaEnrollmentId:r},Qt(l,"POST","/v2/accounts/mfaEnrollment:withdraw",pa(l,c))));this.enrolledFactors=this.enrolledFactors.filter(({uid:g})=>g!==r),await this.user._updateTokensIfNecessary(p),await this.user.reload()}catch(p){throw p}}}let tl="__sak";class Ou{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(tl,"1"),this.storage.removeItem(tl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){let r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class kl extends Ou{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$n(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let r of Object.keys(this.listeners)){let a=this.storage.getItem(r),l=this.localCache[r];a!==l&&e(r,l,a)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((p,g,b)=>{this.notifyListeners(p,b)});return}let a=e.key;r?this.detachListener():this.stopPolling();let l=()=>{let p=this.storage.getItem(a);(r||this.localCache[a]!==p)&&this.notifyListeners(a,p)},c=this.storage.getItem(a);(function(){let p=on();return p.indexOf("MSIE ")>=0||p.indexOf("Trident/")>=0})()&&document.documentMode===10&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,10):l()}notifyListeners(e,r){this.localCache[e]=r;let a=this.listeners[e];if(a)for(let l of Array.from(a))l(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:a}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){let r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}kl.type="LOCAL";class Jl extends Ou{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Jl.type="SESSION";class nc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let r=this.receivers.find(l=>l.isListeningto(e));if(r)return r;let a=new nc(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:r,eventType:a,data:l}=e.data,c=this.handlersMap[a];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:a});let p=Array.from(c).map(async b=>b(e.origin,l)),g=await Promise.all(p.map(async b=>{try{return{fulfilled:!0,value:await b}}catch(D){return{fulfilled:!1,reason:D}}}));e.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),r&&this.handlersMap[e].size!==0||delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ac(n="",e=10){let r="";for(let a=0;a<e;a++)r+=Math.floor(10*Math.random());return n+r}nc.receivers=[];class sf{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,a=50){let l,c,p=typeof MessageChannel<"u"?new MessageChannel:null;if(!p)throw Error("connection_unavailable");return new Promise((g,b)=>{let D=Ac("",20);p.port1.start();let H=setTimeout(()=>{b(Error("unsupported_event"))},a);c={messageChannel:p,onMessage(te){if(te.data.eventId===D)switch(te.data.status){case"ack":clearTimeout(H),l=setTimeout(()=>{b(Error("timeout"))},3e3);break;case"done":clearTimeout(l),g(te.data.response);break;default:clearTimeout(H),clearTimeout(l),b(Error("invalid_response"))}}},this.handlers.add(c),p.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:D,data:r},[p.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function gu(){return window}function Nc(){return gu().WorkerGlobalScope!==void 0&&typeof gu().importScripts=="function"}async function af(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}let Oc="firebaseLocalStorageDb",Du="firebaseLocalStorage",eo="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Mu(n,e){return n.transaction([Du],e?"readwrite":"readonly").objectStore(Du)}function Xc(){let n=indexedDB.open(Oc,1);return new Promise((e,r)=>{n.addEventListener("error",()=>{r(n.error)}),n.addEventListener("upgradeneeded",()=>{let a=n.result;try{a.createObjectStore(Du,{keyPath:eo})}catch(l){r(l)}}),n.addEventListener("success",async()=>{let a=n.result;a.objectStoreNames.contains(Du)?e(a):(a.close(),await new iu(indexedDB.deleteDatabase(Oc)).toPromise(),e(await Xc()))})})}async function Lu(n,e,r){return new iu(Mu(n,!0).put({[eo]:e,value:r})).toPromise()}async function yu(n,e){let r=Mu(n,!1).get(e),a=await new iu(r).toPromise();return a===void 0?null:a.value}function Be(n,e){return new iu(Mu(n,!0).delete(e)).toPromise()}class B{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Xc()),this.db}async _withRetries(e){let r=0;for(;;)try{let a=await this._openDb();return await e(a)}catch(a){if(r++>3)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nc._getInstance(Nc()?zr:null),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await af(),!this.activeServiceWorker)return;this.sender=new sf(this.activeServiceWorker);let a=await this.sender._send("ping",{},800);a&&((e=a[0])===null||e===void 0?void 0:e.fulfilled)&&((r=a[0])===null||r===void 0?void 0:r.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var r;if(this.sender&&this.activeServiceWorker&&(((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Xc();return await Lu(e,tl,"1"),await Be(e,tl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>Lu(a,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){let r=await this._withRetries(a=>yu(a,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Be(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(l=>new iu(Mu(l,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let r=[],a=new Set;if(e.length!==0)for(let{fbase_key:l,value:c}of e)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),r.push(l));for(let l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),r.push(l));return r}notifyListeners(e,r){this.localCache[e]=r;let a=this.listeners[e];if(a)for(let l of Array.from(a))l(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}function le(n,e){return Qt(n,"POST","/v2/accounts/mfaSignIn:start",pa(n,e))}B.type="LOCAL",pe("rcb"),new nu(3e4,6e4);let be="recaptcha";async function Xe(n,e,r){var a;if(!n._getRecaptchaConfig())try{await Sn(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let l;if(l=typeof e=="string"?{phoneNumber:e}:e,"session"in l){let c=l.session;if("phoneNumber"in l){ii(c.type==="enroll",n,"internal-error");let p={idToken:c.credential,phoneEnrollmentInfo:{phoneNumber:l.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await sn(n,p,"mfaSmsEnrollment",async(D,H)=>{if(H.phoneEnrollmentInfo.captchaResponse===Dt){ii(r?.type===be,D,"argument-error");let te=await ot(D,H,r);return Za(D,te)}return Za(D,H)},"PHONE_PROVIDER").catch(D=>Promise.reject(D))).phoneSessionInfo.sessionInfo}{ii(c.type==="signin",n,"internal-error");let p=((a=l.multiFactorHint)===null||a===void 0?void 0:a.uid)||l.multiFactorUid;ii(p,n,"missing-multi-factor-info");let g={mfaPendingCredential:c.credential,mfaEnrollmentId:p,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await sn(n,g,"mfaSmsSignIn",async(H,te)=>{if(te.phoneSignInInfo.captchaResponse===Dt){ii(r?.type===be,H,"argument-error");let ie=await ot(H,te,r);return le(H,ie)}return le(H,te)},"PHONE_PROVIDER").catch(H=>Promise.reject(H))).phoneResponseInfo.sessionInfo}}{let c={phoneNumber:l.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await sn(n,c,"sendVerificationCode",async(b,D)=>{if(D.captchaResponse===Dt){ii(r?.type===be,b,"argument-error");let H=await ot(b,D,r);return Oa(b,H)}return Oa(b,D)},"PHONE_PROVIDER").catch(b=>Promise.reject(b))).sessionInfo}}finally{r?._reset()}}async function ot(n,e,r){ii(r.type===be,n,"argument-error");let a=await r.verify();ii(typeof a=="string",n,"argument-error");let l=Object.assign({},e);if("phoneEnrollmentInfo"in l){let c=l.phoneEnrollmentInfo.phoneNumber,p=l.phoneEnrollmentInfo.captchaResponse,g=l.phoneEnrollmentInfo.clientType,b=l.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:a,captchaResponse:p,clientType:g,recaptchaVersion:b}}),l}if(!("phoneSignInInfo"in l))return Object.assign(l,{recaptchaToken:a}),l;{let c=l.phoneSignInInfo.captchaResponse,p=l.phoneSignInInfo.clientType,g=l.phoneSignInInfo.recaptchaVersion;return Object.assign(l,{phoneSignInInfo:{recaptchaToken:a,captchaResponse:c,clientType:p,recaptchaVersion:g}}),l}}class Gt{constructor(e){this.providerId=Gt.PROVIDER_ID,this.auth=zt(e)}verifyPhoneNumber(e,r){return Xe(this.auth,e,zt(r))}static credential(e,r){return po._fromVerification(e,r)}static credentialFromResult(e){return Gt.credentialFromTaggedObject(e)}static credentialFromError(e){return Gt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:r,temporaryProof:a}=e;return r&&a?po._fromTokenResponse(r,a):null}}function cr(n,e){return e?mi(e):(ii(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}Gt.PROVIDER_ID="phone",Gt.PHONE_SIGN_IN_METHOD="phone";class Er extends xa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sa(e,this._buildIdpRequest())}_linkToIdToken(e,r){return sa(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return sa(e,this._buildIdpRequest())}_buildIdpRequest(e){let r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function br(n){return Ba(n.auth,new Er(n),n.bypassAuthState)}function nn(n){let{auth:e,user:r}=n;return ii(r,e,"internal-error"),Ds(r,new Er(n),n.bypassAuthState)}async function Mn(n){let{auth:e,user:r}=n;return ii(r,e,"internal-error"),ss(r,new Er(n),n.bypassAuthState)}class Bn{constructor(e,r,a,l,c=!1){this.auth=e,this.resolver=a,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){let{urlResponse:r,sessionId:a,postBody:l,tenantId:c,error:p,type:g}=e;if(p){this.reject(p);return}let b={auth:this.auth,requestUri:r,sessionId:a,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(b))}catch(D){this.reject(D)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return br;case"linkViaPopup":case"linkViaRedirect":return Mn;case"reauthViaPopup":case"reauthViaRedirect":return nn;default:io(this.auth,"internal-error")}}resolve(e){var r,a;r=this.pendingPromise,a="Pending promise was never set",r||ba(a),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var r,a;r=this.pendingPromise,a="Pending promise was never set",r||ba(a),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let Ci=new nu(2e3,1e4);async function dn(n,e,r){if(yr(n.app))return Promise.reject(Ns(n,"operation-not-supported-in-this-environment"));let a=zt(n);(function(c,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&io(c,"argument-error"),An(c,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)})(n,e,Lo);let l=cr(a,r);return new Wn(a,"signInViaPopup",e,l).executeNotNull()}class Wn extends Bn{constructor(e,r,a,l,c){super(e,r,l,c),this.provider=a,this.authWindow=null,this.pollId=null,Wn.currentPopupAction&&Wn.currentPopupAction.cancel(),Wn.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return ii(e,this.auth,"internal-error"),e}async onExecution(){var e,r;e=this.filter.length===1,r="Popup operations only handle one event",e||ba(r);let a=Ac();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],a),this.authWindow.associatedEvent=a,this.resolver._originValidation(this.auth).catch(l=>{this.reject(l)}),this.resolver._isIframeWebStorageSupported(this.auth,l=>{l||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wn.currentPopupAction=null}pollUserCancellation(){let e=()=>{var r,a;if(!((a=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ci.get())};e()}}Wn.currentPopupAction=null;let Un=new Map;class ns extends Bn{constructor(e,r,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let e=Un.get(this.auth._key());if(!e){try{let r=await di(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(r){e=()=>Promise.reject(r)}Un.set(this.auth._key(),e)}return this.bypassAuthState||Un.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function di(n,e){let r=xn(e),a=ri(n);if(!await a._isAvailable())return!1;let l=await a._get(r)==="true";return await a._remove(r),l}function Di(n,e){Un.set(n._key(),e)}function ri(n){return mi(n._redirectPersistence)}function xn(n){return Dn("pendingRedirect",n.config.apiKey,n.name)}async function Ti(n,e,r=!1){if(yr(n.app))return Promise.reject(Qa(n));let a=zt(n),l=cr(a,e),c=new ns(a,l,r),p=await c.execute();return p&&!r&&(delete p.user._redirectEventId,await a._persistUserIfCurrent(p.user),await a._setRedirectUser(null,e)),p}class Js{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(r=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xi(a);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var a;if(e.error&&!xi(e)){let l=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";r.onError(Ns(this.auth,l))}else r.onAuthEvent(e)}isEventForConsumer(e,r){let a=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ga(e))}saveEventToCache(e){this.cachedEventUids.add(ga(e)),this.lastProcessedEventTime=Date.now()}}function ga(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xi({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}async function Yi(n,e={}){return Qt(n,"GET","/v1/projects",e)}let Ms=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qa=/^https?/;async function Ka(n){if(n.config.emulator)return;let{authorizedDomains:e}=await Yi(n);for(let r of e)try{if(function(a){let l=Gl(),{protocol:c,hostname:p}=new URL(l);if(a.startsWith("chrome-extension://")){let b=new URL(a);return b.hostname===""&&p===""?c==="chrome-extension:"&&a.replace("chrome-extension://","")===l.replace("chrome-extension://",""):c==="chrome-extension:"&&b.hostname===p}if(!qa.test(c))return!1;if(Ms.test(a))return p===a;let g=a.replace(/\./g,"\\.");return RegExp("^(.+\\."+g+"|"+g+")$","i").test(p)}(r))return}catch{}io(n,"unauthorized-domain")}let aa=new nu(3e4,6e4);function gs(){let n=gu().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let r=0;r<n.CP.length;r++)n.CP[r]=null}}let Qo=null,Ro=new nu(5e3,15e3),ul={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function ic(n){let e=await(Qo=Qo||new Promise((a,l)=>{var c,p,g,b;function D(){gs(),gapi.load("gapi.iframes",{callback:()=>{a(gapi.iframes.getContext())},ontimeout:()=>{gs(),l(Ns(n,"network-request-failed"))},timeout:aa.get()})}if(!((p=(c=gu().gapi)===null||c===void 0?void 0:c.iframes)===null||p===void 0)&&p.Iframe)a(gapi.iframes.getContext());else if(!((g=gu().gapi)===null||g===void 0)&&g.load)D();else{let H=pe("iframefcb");return gu()[H]=()=>{gapi.load?D():l(Ns(n,"network-request-failed"))},(b=`${G.gapiScript}?onload=${H}`,G.loadJS(b)).catch(te=>l(te))}}).catch(a=>{throw Qo=null,a})),r=gu().gapi;return ii(r,n,"internal-error"),e.open({where:document.body,url:function(a){let l=a.config;ii(l.authDomain,a,"auth-domain-config-required");let c=l.emulator?so(l,"emulator/auth/iframe"):`https://${a.config.authDomain}/__/auth/iframe`,p={apiKey:l.apiKey,appName:a.name,v:$a},g=rl.get(a.config.apiHost);g&&(p.eid=g);let b=a._getFrameworks();return b.length&&(p.fw=b.join(",")),`${c}?${es(p).slice(1)}`}(n),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ul,dontclear:!0},a=>new Promise(async(l,c)=>{await a.restyle({setHideOnLeave:!1});let p=Ns(n,"network-request-failed"),g=gu().setTimeout(()=>{c(p)},Ro.get());function b(){gu().clearTimeout(g),l(a)}a.ping(b).then(b,()=>{c(p)})}))}let V={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class L{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}let ne=encodeURIComponent("fac");async function Pe(n,e,r,a,l,c){ii(n.config.authDomain,n,"auth-domain-config-required"),ii(n.config.apiKey,n,"invalid-api-key");let p={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:a,v:$a,eventId:l};if(e instanceof Lo)for(let[D,H]of(e.setDefaultLanguage(n.languageCode),p.providerId=e.providerId||"",!function(te){for(let ie in te)if(Object.prototype.hasOwnProperty.call(te,ie))return!1;return!0}(e.getCustomParameters())&&(p.customParameters=JSON.stringify(e.getCustomParameters())),Object.entries(c||{})))p[D]=H;if(e instanceof Ya){let D=e.getScopes().filter(H=>H!=="");D.length>0&&(p.scopes=D.join(","))}for(let D of(n.tenantId&&(p.tid=n.tenantId),Object.keys(p)))p[D]===void 0&&delete p[D];let g=await n._getAppCheckToken(),b=g?`#${ne}=${encodeURIComponent(g)}`:"";return`${function({config:D}){return D.emulator?so(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(n)}?${es(p).slice(1)}${b}`}let Oe="webStorageSupport";class kt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jl,this._completeRedirectFn=Ti,this._overrideRedirectResult=Di}async _openPopup(e,r,a,l){var c,p,g;p=(c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,g="_initialize() not called before _openPopup()",p||ba(g);let b=await Pe(e,r,a,Gl(),l);return function(D,H,te,ie=500,ye=600){let je=Math.max((window.screen.availHeight-ye)/2,0).toString(),Re=Math.max((window.screen.availWidth-ie)/2,0).toString(),Ye="",ht=Object.assign(Object.assign({},V),{width:ie.toString(),height:ye.toString(),top:je,left:Re}),Ze=on().toLowerCase();te&&(Ye=Zt(Ze)?"_blank":te),gi(Ze)&&(H=H||"http://localhost",ht.scrollbars="yes");let ke=Object.entries(ht).reduce((Ae,[it,ut])=>`${Ae}${it}=${ut},`,"");if(function(Ae=on()){var it;return Pi(Ae)&&!!(!((it=window.navigator)===null||it===void 0)&&it.standalone)}(Ze)&&Ye!=="_self")return function(Ae,it){let ut=document.createElement("a");ut.href=Ae,ut.target=it;let ft=document.createEvent("MouseEvent");ft.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),ut.dispatchEvent(ft)}(H||"",Ye),new L(null);let Ie=window.open(H||"",Ye,ke);ii(Ie,D,"popup-blocked");try{Ie.focus()}catch{}return new L(Ie)}(e,b,Ac())}async _openRedirect(e,r,a,l){var c;return await this._originValidation(e),c=await Pe(e,r,a,Gl(),l),gu().location.href=c,new Promise(()=>{})}_initialize(e){let r=e._key();if(this.eventManagers[r]){var a;let{manager:c,promise:p}=this.eventManagers[r];return c?Promise.resolve(c):(a="If manager is not set, promise should be",p||ba(a),p)}let l=this.initAndGetManager(e);return this.eventManagers[r]={promise:l},l.catch(()=>{delete this.eventManagers[r]}),l}async initAndGetManager(e){let r=await ic(e),a=new Js(e);return r.register("authEvent",l=>(ii(l?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=r,a}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Oe,{type:Oe},a=>{var l;let c=(l=a?.[0])===null||l===void 0?void 0:l[Oe];c!==void 0&&r(!!c),io(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Ka(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return $n()||as()||Pi()}}class Nt{constructor(e){this.factorId=e}_process(e,r,a){switch(r.type){case"enroll":return this._finalizeEnroll(e,r.credential,a);case"signin":return this._finalizeSignIn(e,r.credential);default:return ba("unexpected MultiFactorSessionType")}}}class Mt extends Nt{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Mt(e)}_finalizeEnroll(e,r,a){return Qt(e,"POST","/v2/accounts/mfaEnrollment:finalize",pa(e,{idToken:r,displayName:a,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,r){return Qt(e,"POST","/v2/accounts/mfaSignIn:finalize",pa(e,{mfaPendingCredential:r,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class sr{constructor(){}static assertion(e){return Mt._fromCredential(e)}}sr.FACTOR_ID="phone";class vr{static assertionForEnrollment(e,r){return kr._fromSecret(e,r)}static assertionForSignIn(e,r){return kr._fromEnrollmentId(e,r)}static async generateSecret(e){var r,a;ii(((r=e.user)===null||r===void 0?void 0:r.auth)!==void 0,"internal-error");let l=await Qt(a=e.user.auth,"POST","/v2/accounts/mfaEnrollment:start",pa(a,{idToken:e.credential,totpEnrollmentInfo:{}}));return Mr._fromStartTotpMfaEnrollmentResponse(l,e.user.auth)}}vr.FACTOR_ID="totp";class kr extends Nt{constructor(e,r,a){super("totp"),this.otp=e,this.enrollmentId=r,this.secret=a}static _fromSecret(e,r){return new kr(r,void 0,e)}static _fromEnrollmentId(e,r){return new kr(r,e)}async _finalizeEnroll(e,r,a){return ii(this.secret!==void 0,e,"argument-error"),Qt(e,"POST","/v2/accounts/mfaEnrollment:finalize",pa(e,{idToken:r,displayName:a,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,r){ii(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");let a={verificationCode:this.otp};return Qt(e,"POST","/v2/accounts/mfaSignIn:finalize",pa(e,{mfaPendingCredential:r,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:a}))}}class Mr{constructor(e,r,a,l,c,p,g){this.sessionInfo=p,this.auth=g,this.secretKey=e,this.hashingAlgorithm=r,this.codeLength=a,this.codeIntervalSeconds=l,this.enrollmentCompletionDeadline=c}static _fromStartTotpMfaEnrollmentResponse(e,r){return new Mr(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,r)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,r){var a;let l=!1;return(fn(e)||fn(r))&&(l=!0),l&&(fn(e)&&(e=((a=this.auth.currentUser)===null||a===void 0?void 0:a.email)||"unknownuser"),fn(r)&&(r=this.auth.name)),`otpauth://totp/${r}:${e}?secret=${this.secretKey}&issuer=${r}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function fn(n){return n===void 0||n?.length===0}var ti="@firebase/auth",Fn="1.8.1";class yn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let r=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ii(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let bn=tn("authIdTokenMaxAge")||300,Ur=null,hs=n=>async e=>{let r=e&&await e.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>bn)return;let l=r?.token;Ur!==l&&(Ur=l,await fetch(n,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};G={loadJS:n=>new Promise((e,r)=>{let a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=l=>{let c=Ns("internal-error");c.customData=l,r(c)},a.type="text/javascript",a.charset="UTF-8",function(){var l,c;return(c=(l=document.getElementsByTagName("head"))===null||l===void 0?void 0:l[0])!==null&&c!==void 0?c:document}().appendChild(a)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},function(n){zn(new Yt("auth",(e,{options:r})=>{let a=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:p,authDomain:g}=a.options;ii(p&&!p.includes(":"),"invalid-api-key",{appName:a.name});let b=new xe(a,l,c,{apiKey:p,authDomain:g,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ws(n)});return function(D,H){let te=H?.persistence||[],ie=(Array.isArray(te)?te:[te]).map(mi);H?.errorMap&&D._updateErrorMap(H.errorMap),D._initializeWithPersistence(ie,H?.popupRedirectResolver)}(b,r),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,a)=>{e.getProvider("auth-internal").initialize()})),zn(new Yt("auth-internal",e=>new yn(zt(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(ti,Fn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),Nn(ti,Fn,"esm2017")}("Browser");var Pr=typeof hn<"u"?hn:typeof window<"u"?window:typeof Pu<"u"?Pu:typeof zr<"u"?zr:{},Si={};(function(){function n(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function e(ke,Ie,Ae){Ae||(Ae=0);var it=Array(16);if(typeof Ie=="string")for(var ut=0;16>ut;++ut)it[ut]=Ie.charCodeAt(Ae++)|Ie.charCodeAt(Ae++)<<8|Ie.charCodeAt(Ae++)<<16|Ie.charCodeAt(Ae++)<<24;else for(ut=0;16>ut;++ut)it[ut]=Ie[Ae++]|Ie[Ae++]<<8|Ie[Ae++]<<16|Ie[Ae++]<<24;Ie=ke.g[0],Ae=ke.g[1],ut=ke.g[2];var ft=ke.g[3],nt=Ie+(ft^Ae&(ut^ft))+it[0]+3614090360&4294967295;nt=ft+(ut^(Ie=Ae+(nt<<7&4294967295|nt>>>25))&(Ae^ut))+it[1]+3905402710&4294967295,nt=ut+(Ae^(ft=Ie+(nt<<12&4294967295|nt>>>20))&(Ie^Ae))+it[2]+606105819&4294967295,nt=Ae+(Ie^(ut=ft+(nt<<17&4294967295|nt>>>15))&(ft^Ie))+it[3]+3250441966&4294967295,nt=Ie+(ft^(Ae=ut+(nt<<22&4294967295|nt>>>10))&(ut^ft))+it[4]+4118548399&4294967295,nt=ft+(ut^(Ie=Ae+(nt<<7&4294967295|nt>>>25))&(Ae^ut))+it[5]+1200080426&4294967295,nt=ut+(Ae^(ft=Ie+(nt<<12&4294967295|nt>>>20))&(Ie^Ae))+it[6]+2821735955&4294967295,nt=Ae+(Ie^(ut=ft+(nt<<17&4294967295|nt>>>15))&(ft^Ie))+it[7]+4249261313&4294967295,nt=Ie+(ft^(Ae=ut+(nt<<22&4294967295|nt>>>10))&(ut^ft))+it[8]+1770035416&4294967295,nt=ft+(ut^(Ie=Ae+(nt<<7&4294967295|nt>>>25))&(Ae^ut))+it[9]+2336552879&4294967295,nt=ut+(Ae^(ft=Ie+(nt<<12&4294967295|nt>>>20))&(Ie^Ae))+it[10]+4294925233&4294967295,nt=Ae+(Ie^(ut=ft+(nt<<17&4294967295|nt>>>15))&(ft^Ie))+it[11]+2304563134&4294967295,nt=Ie+(ft^(Ae=ut+(nt<<22&4294967295|nt>>>10))&(ut^ft))+it[12]+1804603682&4294967295,nt=ft+(ut^(Ie=Ae+(nt<<7&4294967295|nt>>>25))&(Ae^ut))+it[13]+4254626195&4294967295,nt=ut+(Ae^(ft=Ie+(nt<<12&4294967295|nt>>>20))&(Ie^Ae))+it[14]+2792965006&4294967295,nt=Ae+(Ie^(ut=ft+(nt<<17&4294967295|nt>>>15))&(ft^Ie))+it[15]+1236535329&4294967295,Ae=ut+(nt<<22&4294967295|nt>>>10),nt=Ie+(ut^ft&(Ae^ut))+it[1]+4129170786&4294967295,Ie=Ae+(nt<<5&4294967295|nt>>>27),nt=ft+(Ae^ut&(Ie^Ae))+it[6]+3225465664&4294967295,ft=Ie+(nt<<9&4294967295|nt>>>23),nt=ut+(Ie^Ae&(ft^Ie))+it[11]+643717713&4294967295,ut=ft+(nt<<14&4294967295|nt>>>18),nt=Ae+(ft^Ie&(ut^ft))+it[0]+3921069994&4294967295,Ae=ut+(nt<<20&4294967295|nt>>>12),nt=Ie+(ut^ft&(Ae^ut))+it[5]+3593408605&4294967295,Ie=Ae+(nt<<5&4294967295|nt>>>27),nt=ft+(Ae^ut&(Ie^Ae))+it[10]+38016083&4294967295,ft=Ie+(nt<<9&4294967295|nt>>>23),nt=ut+(Ie^Ae&(ft^Ie))+it[15]+3634488961&4294967295,ut=ft+(nt<<14&4294967295|nt>>>18),nt=Ae+(ft^Ie&(ut^ft))+it[4]+3889429448&4294967295,Ae=ut+(nt<<20&4294967295|nt>>>12),nt=Ie+(ut^ft&(Ae^ut))+it[9]+568446438&4294967295,Ie=Ae+(nt<<5&4294967295|nt>>>27),nt=ft+(Ae^ut&(Ie^Ae))+it[14]+3275163606&4294967295,ft=Ie+(nt<<9&4294967295|nt>>>23),nt=ut+(Ie^Ae&(ft^Ie))+it[3]+4107603335&4294967295,ut=ft+(nt<<14&4294967295|nt>>>18),nt=Ae+(ft^Ie&(ut^ft))+it[8]+1163531501&4294967295,Ae=ut+(nt<<20&4294967295|nt>>>12),nt=Ie+(ut^ft&(Ae^ut))+it[13]+2850285829&4294967295,Ie=Ae+(nt<<5&4294967295|nt>>>27),nt=ft+(Ae^ut&(Ie^Ae))+it[2]+4243563512&4294967295,ft=Ie+(nt<<9&4294967295|nt>>>23),nt=ut+(Ie^Ae&(ft^Ie))+it[7]+1735328473&4294967295,ut=ft+(nt<<14&4294967295|nt>>>18),nt=Ae+(ft^Ie&(ut^ft))+it[12]+2368359562&4294967295,nt=Ie+((Ae=ut+(nt<<20&4294967295|nt>>>12))^ut^ft)+it[5]+4294588738&4294967295,nt=ft+((Ie=Ae+(nt<<4&4294967295|nt>>>28))^Ae^ut)+it[8]+2272392833&4294967295,nt=ut+((ft=Ie+(nt<<11&4294967295|nt>>>21))^Ie^Ae)+it[11]+1839030562&4294967295,nt=Ae+((ut=ft+(nt<<16&4294967295|nt>>>16))^ft^Ie)+it[14]+4259657740&4294967295,nt=Ie+((Ae=ut+(nt<<23&4294967295|nt>>>9))^ut^ft)+it[1]+2763975236&4294967295,nt=ft+((Ie=Ae+(nt<<4&4294967295|nt>>>28))^Ae^ut)+it[4]+1272893353&4294967295,nt=ut+((ft=Ie+(nt<<11&4294967295|nt>>>21))^Ie^Ae)+it[7]+4139469664&4294967295,nt=Ae+((ut=ft+(nt<<16&4294967295|nt>>>16))^ft^Ie)+it[10]+3200236656&4294967295,nt=Ie+((Ae=ut+(nt<<23&4294967295|nt>>>9))^ut^ft)+it[13]+681279174&4294967295,nt=ft+((Ie=Ae+(nt<<4&4294967295|nt>>>28))^Ae^ut)+it[0]+3936430074&4294967295,nt=ut+((ft=Ie+(nt<<11&4294967295|nt>>>21))^Ie^Ae)+it[3]+3572445317&4294967295,nt=Ae+((ut=ft+(nt<<16&4294967295|nt>>>16))^ft^Ie)+it[6]+76029189&4294967295,nt=Ie+((Ae=ut+(nt<<23&4294967295|nt>>>9))^ut^ft)+it[9]+3654602809&4294967295,nt=ft+((Ie=Ae+(nt<<4&4294967295|nt>>>28))^Ae^ut)+it[12]+3873151461&4294967295,nt=ut+((ft=Ie+(nt<<11&4294967295|nt>>>21))^Ie^Ae)+it[15]+530742520&4294967295,nt=Ae+((ut=ft+(nt<<16&4294967295|nt>>>16))^ft^Ie)+it[2]+3299628645&4294967295,Ae=ut+(nt<<23&4294967295|nt>>>9),nt=Ie+(ut^(Ae|~ft))+it[0]+4096336452&4294967295,Ie=Ae+(nt<<6&4294967295|nt>>>26),nt=ft+(Ae^(Ie|~ut))+it[7]+1126891415&4294967295,ft=Ie+(nt<<10&4294967295|nt>>>22),nt=ut+(Ie^(ft|~Ae))+it[14]+2878612391&4294967295,ut=ft+(nt<<15&4294967295|nt>>>17),nt=Ae+(ft^(ut|~Ie))+it[5]+4237533241&4294967295,Ae=ut+(nt<<21&4294967295|nt>>>11),nt=Ie+(ut^(Ae|~ft))+it[12]+1700485571&4294967295,Ie=Ae+(nt<<6&4294967295|nt>>>26),nt=ft+(Ae^(Ie|~ut))+it[3]+2399980690&4294967295,ft=Ie+(nt<<10&4294967295|nt>>>22),nt=ut+(Ie^(ft|~Ae))+it[10]+4293915773&4294967295,ut=ft+(nt<<15&4294967295|nt>>>17),nt=Ae+(ft^(ut|~Ie))+it[1]+2240044497&4294967295,Ae=ut+(nt<<21&4294967295|nt>>>11),nt=Ie+(ut^(Ae|~ft))+it[8]+1873313359&4294967295,Ie=Ae+(nt<<6&4294967295|nt>>>26),nt=ft+(Ae^(Ie|~ut))+it[15]+4264355552&4294967295,ft=Ie+(nt<<10&4294967295|nt>>>22),nt=ut+(Ie^(ft|~Ae))+it[6]+2734768916&4294967295,ut=ft+(nt<<15&4294967295|nt>>>17),nt=Ae+(ft^(ut|~Ie))+it[13]+1309151649&4294967295,Ae=ut+(nt<<21&4294967295|nt>>>11),nt=Ie+(ut^(Ae|~ft))+it[4]+4149444226&4294967295,Ie=Ae+(nt<<6&4294967295|nt>>>26),nt=ft+(Ae^(Ie|~ut))+it[11]+3174756917&4294967295,ft=Ie+(nt<<10&4294967295|nt>>>22),nt=ut+(Ie^(ft|~Ae))+it[2]+718787259&4294967295,ut=ft+(nt<<15&4294967295|nt>>>17),nt=Ae+(ft^(ut|~Ie))+it[9]+3951481745&4294967295,ke.g[0]=ke.g[0]+Ie&4294967295,ke.g[1]=ke.g[1]+(ut+(nt<<21&4294967295|nt>>>11))&4294967295,ke.g[2]=ke.g[2]+ut&4294967295,ke.g[3]=ke.g[3]+ft&4294967295}function r(ke,Ie){this.h=Ie;for(var Ae=[],it=!0,ut=ke.length-1;0<=ut;ut--){var ft=0|ke[ut];it&&ft==Ie||(Ae[ut]=ft,it=!1)}this.g=Ae}(function(ke,Ie){function Ae(){}Ae.prototype=Ie.prototype,ke.D=Ie.prototype,ke.prototype=new Ae,ke.prototype.constructor=ke,ke.C=function(it,ut,ft){for(var nt=Array(arguments.length-2),un=2;un<arguments.length;un++)nt[un-2]=arguments[un];return Ie.prototype[ut].apply(it,nt)}})(n,function(){this.blockSize=-1}),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},n.prototype.u=function(ke,Ie){Ie===void 0&&(Ie=ke.length);for(var Ae=Ie-this.blockSize,it=this.B,ut=this.h,ft=0;ft<Ie;){if(ut==0)for(;ft<=Ae;)e(this,ke,ft),ft+=this.blockSize;if(typeof ke=="string"){for(;ft<Ie;)if(it[ut++]=ke.charCodeAt(ft++),ut==this.blockSize){e(this,it),ut=0;break}}else for(;ft<Ie;)if(it[ut++]=ke[ft++],ut==this.blockSize){e(this,it),ut=0;break}}this.h=ut,this.o+=Ie},n.prototype.v=function(){var ke=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ke[0]=128;for(var Ie=1;Ie<ke.length-8;++Ie)ke[Ie]=0;var Ae=8*this.o;for(Ie=ke.length-8;Ie<ke.length;++Ie)ke[Ie]=255&Ae,Ae/=256;for(this.u(ke),ke=Array(16),Ie=Ae=0;4>Ie;++Ie)for(var it=0;32>it;it+=8)ke[Ae++]=this.g[Ie]>>>it&255;return ke};var a,l={};function c(ke){var Ie;return-128<=ke&&128>ke?(Ie=function(Ae){return new r([0|Ae],0>Ae?-1:0)},Object.prototype.hasOwnProperty.call(l,ke)?l[ke]:l[ke]=Ie(ke)):new r([0|ke],0>ke?-1:0)}function p(ke){if(isNaN(ke)||!isFinite(ke))return g;if(0>ke)return ie(p(-ke));for(var Ie=[],Ae=1,it=0;ke>=Ae;it++)Ie[it]=ke/Ae|0,Ae*=4294967296;return new r(Ie,0)}var g=c(0),b=c(1),D=c(16777216);function H(ke){if(ke.h!=0)return!1;for(var Ie=0;Ie<ke.g.length;Ie++)if(ke.g[Ie]!=0)return!1;return!0}function te(ke){return ke.h==-1}function ie(ke){for(var Ie=ke.g.length,Ae=[],it=0;it<Ie;it++)Ae[it]=~ke.g[it];return new r(Ae,~ke.h).add(b)}function ye(ke,Ie){return ke.add(ie(Ie))}function je(ke,Ie){for(;(65535&ke[Ie])!=ke[Ie];)ke[Ie+1]+=ke[Ie]>>>16,ke[Ie]&=65535,Ie++}function Re(ke,Ie){this.g=ke,this.h=Ie}function Ye(ke,Ie){if(H(Ie))throw Error("division by zero");if(H(ke))return new Re(g,g);if(te(ke))return Ie=Ye(ie(ke),Ie),new Re(ie(Ie.g),ie(Ie.h));if(te(Ie))return Ie=Ye(ke,ie(Ie)),new Re(ie(Ie.g),Ie.h);if(30<ke.g.length){if(te(ke)||te(Ie))throw Error("slowDivide_ only works with positive integers.");for(var Ae=b,it=Ie;0>=it.l(ke);)Ae=ht(Ae),it=ht(it);var ut=Ze(Ae,1),ft=Ze(it,1);for(it=Ze(it,2),Ae=Ze(Ae,2);!H(it);){var nt=ft.add(it);0>=nt.l(ke)&&(ut=ut.add(Ae),ft=nt),it=Ze(it,1),Ae=Ze(Ae,1)}return Ie=ye(ke,ut.j(Ie)),new Re(ut,Ie)}for(ut=g;0<=ke.l(Ie);){for(it=48>=(it=Math.ceil(Math.log(Ae=Math.max(1,Math.floor(ke.m()/Ie.m())))/Math.LN2))?1:Math.pow(2,it-48),nt=(ft=p(Ae)).j(Ie);te(nt)||0<nt.l(ke);)Ae-=it,nt=(ft=p(Ae)).j(Ie);H(ft)&&(ft=b),ut=ut.add(ft),ke=ye(ke,nt)}return new Re(ut,ke)}function ht(ke){for(var Ie=ke.g.length+1,Ae=[],it=0;it<Ie;it++)Ae[it]=ke.i(it)<<1|ke.i(it-1)>>>31;return new r(Ae,ke.h)}function Ze(ke,Ie){var Ae=Ie>>5;Ie%=32;for(var it=ke.g.length-Ae,ut=[],ft=0;ft<it;ft++)ut[ft]=0<Ie?ke.i(ft+Ae)>>>Ie|ke.i(ft+Ae+1)<<32-Ie:ke.i(ft+Ae);return new r(ut,ke.h)}(a=r.prototype).m=function(){if(te(this))return-ie(this).m();for(var ke=0,Ie=1,Ae=0;Ae<this.g.length;Ae++){var it=this.i(Ae);ke+=(0<=it?it:4294967296+it)*Ie,Ie*=4294967296}return ke},a.toString=function(ke){if(2>(ke=ke||10)||36<ke)throw Error("radix out of range: "+ke);if(H(this))return"0";if(te(this))return"-"+ie(this).toString(ke);for(var Ie=p(Math.pow(ke,6)),Ae=this,it="";;){var ut=Ye(Ae,Ie).g,ft=((0<(Ae=ye(Ae,ut.j(Ie))).g.length?Ae.g[0]:Ae.h)>>>0).toString(ke);if(H(Ae=ut))return ft+it;for(;6>ft.length;)ft="0"+ft;it=ft+it}},a.i=function(ke){return 0>ke?0:ke<this.g.length?this.g[ke]:this.h},a.l=function(ke){return te(ke=ye(this,ke))?-1:H(ke)?0:1},a.abs=function(){return te(this)?ie(this):this},a.add=function(ke){for(var Ie=Math.max(this.g.length,ke.g.length),Ae=[],it=0,ut=0;ut<=Ie;ut++){var ft=it+(65535&this.i(ut))+(65535&ke.i(ut)),nt=(ft>>>16)+(this.i(ut)>>>16)+(ke.i(ut)>>>16);it=nt>>>16,ft&=65535,nt&=65535,Ae[ut]=nt<<16|ft}return new r(Ae,-2147483648&Ae[Ae.length-1]?-1:0)},a.j=function(ke){if(H(this)||H(ke))return g;if(te(this))return te(ke)?ie(this).j(ie(ke)):ie(ie(this).j(ke));if(te(ke))return ie(this.j(ie(ke)));if(0>this.l(D)&&0>ke.l(D))return p(this.m()*ke.m());for(var Ie=this.g.length+ke.g.length,Ae=[],it=0;it<2*Ie;it++)Ae[it]=0;for(it=0;it<this.g.length;it++)for(var ut=0;ut<ke.g.length;ut++){var ft=this.i(it)>>>16,nt=65535&this.i(it),un=ke.i(ut)>>>16,is=65535&ke.i(ut);Ae[2*it+2*ut]+=nt*is,je(Ae,2*it+2*ut),Ae[2*it+2*ut+1]+=ft*is,je(Ae,2*it+2*ut+1),Ae[2*it+2*ut+1]+=nt*un,je(Ae,2*it+2*ut+1),Ae[2*it+2*ut+2]+=ft*un,je(Ae,2*it+2*ut+2)}for(it=0;it<Ie;it++)Ae[it]=Ae[2*it+1]<<16|Ae[2*it];for(it=Ie;it<2*Ie;it++)Ae[it]=0;return new r(Ae,0)},a.A=function(ke){return Ye(this,ke).h},a.and=function(ke){for(var Ie=Math.max(this.g.length,ke.g.length),Ae=[],it=0;it<Ie;it++)Ae[it]=this.i(it)&ke.i(it);return new r(Ae,this.h&ke.h)},a.or=function(ke){for(var Ie=Math.max(this.g.length,ke.g.length),Ae=[],it=0;it<Ie;it++)Ae[it]=this.i(it)|ke.i(it);return new r(Ae,this.h|ke.h)},a.xor=function(ke){for(var Ie=Math.max(this.g.length,ke.g.length),Ae=[],it=0;it<Ie;it++)Ae[it]=this.i(it)^ke.i(it);return new r(Ae,this.h^ke.h)},n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,x=Si.Md5=n,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=p,r.fromString=function ke(Ie,Ae){if(Ie.length==0)throw Error("number format error: empty string");if(2>(Ae=Ae||10)||36<Ae)throw Error("radix out of range: "+Ae);if(Ie.charAt(0)=="-")return ie(ke(Ie.substring(1),Ae));if(0<=Ie.indexOf("-"))throw Error('number format error: interior "-" character');for(var it=p(Math.pow(Ae,8)),ut=g,ft=0;ft<Ie.length;ft+=8){var nt=Math.min(8,Ie.length-ft),un=parseInt(Ie.substring(ft,ft+nt),Ae);8>nt?(nt=p(Math.pow(Ae,nt)),ut=ut.j(nt).add(p(un))):ut=(ut=ut.j(it)).add(p(un))}return ut},I=Si.Integer=r}).apply(Pr!==void 0?Pr:typeof zr<"u"?zr:typeof window<"u"?window:{});var mn=typeof hn<"u"?hn:typeof window<"u"?window:typeof Pu<"u"?Pu:typeof zr<"u"?zr:{},ki={};(function(){var n,e,r,a=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,de,$e){return A==Array.prototype||A==Object.prototype||(A[de]=$e.value),A},l=function(A){A=[typeof hn=="object"&&hn,A,typeof window=="object"&&window,typeof zr=="object"&&zr,typeof mn=="object"&&mn];for(var de=0;de<A.length;++de){var $e=A[de];if($e&&$e.Math==Math)return $e}throw Error("Cannot find global object")}(this);(function(A,de){if(de)e:{var $e=l;A=A.split(".");for(var xt=0;xt<A.length-1;xt++){var Vr=A[xt];if(!(Vr in $e))break e;$e=$e[Vr]}(de=de(xt=$e[A=A[A.length-1]]))!=xt&&de!=null&&a($e,A,{configurable:!0,writable:!0,value:de})}})("Array.prototype.values",function(A){return A||function(){var de,$e,xt,Vr,Gr;return de=this,$e=function(en,ni){return ni},de instanceof String&&(de+=""),xt=0,Vr=!1,(Gr={next:function(){if(!Vr&&xt<de.length){var en=xt++;return{value:$e(en,de[en]),done:!1}}return Vr=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return Gr},Gr}});var c=c||{},p=this||zr;function g(A){var de=typeof A;return(de=de!="object"?de:A?Array.isArray(A)?"array":de:"null")=="array"||de=="object"&&typeof A.length=="number"}function b(A){var de=typeof A;return de=="object"&&A!=null||de=="function"}function D(A,de,$e){return A.call.apply(A.bind,arguments)}function H(A,de,$e){if(!A)throw Error();if(2<arguments.length){var xt=Array.prototype.slice.call(arguments,2);return function(){var Vr=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Vr,xt),A.apply(de,Vr)}}return function(){return A.apply(de,arguments)}}function te(A,de,$e){return(te=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?D:H).apply(null,arguments)}function ie(A,de){var $e=Array.prototype.slice.call(arguments,1);return function(){var xt=$e.slice();return xt.push.apply(xt,arguments),A.apply(this,xt)}}function ye(A,de){function $e(){}$e.prototype=de.prototype,A.aa=de.prototype,A.prototype=new $e,A.prototype.constructor=A,A.Qb=function(xt,Vr,Gr){for(var en=Array(arguments.length-2),ni=2;ni<arguments.length;ni++)en[ni-2]=arguments[ni];return de.prototype[Vr].apply(xt,en)}}function je(A){let de=A.length;if(0<de){let $e=Array(de);for(let xt=0;xt<de;xt++)$e[xt]=A[xt];return $e}return[]}function Re(A,de){for(let $e=1;$e<arguments.length;$e++){let xt=arguments[$e];if(g(xt)){let Vr=A.length||0,Gr=xt.length||0;A.length=Vr+Gr;for(let en=0;en<Gr;en++)A[Vr+en]=xt[en]}else A.push(xt)}}class Ye{constructor(de,$e){this.i=de,this.j=$e,this.h=0,this.g=null}get(){let de;return 0<this.h?(this.h--,de=this.g,this.g=de.next,de.next=null):de=this.i(),de}}function ht(A){return/^[\s\xa0]*$/.test(A)}function Ze(){var A=p.navigator;return A&&(A=A.userAgent)?A:""}function ke(A){return ke[" "](A),A}ke[" "]=function(){};var Ie=Ze().indexOf("Gecko")!=-1&&!(Ze().toLowerCase().indexOf("webkit")!=-1&&Ze().indexOf("Edge")==-1)&&!(Ze().indexOf("Trident")!=-1||Ze().indexOf("MSIE")!=-1)&&Ze().indexOf("Edge")==-1;function Ae(A,de,$e){for(let xt in A)de.call($e,A[xt],xt,A)}function it(A){let de={};for(let $e in A)de[$e]=A[$e];return de}let ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(A,de){let $e,xt;for(let Vr=1;Vr<arguments.length;Vr++){for($e in xt=arguments[Vr])A[$e]=xt[$e];for(let Gr=0;Gr<ut.length;Gr++)$e=ut[Gr],Object.prototype.hasOwnProperty.call(xt,$e)&&(A[$e]=xt[$e])}}class nt{constructor(){this.h=this.g=null}add(de,$e){let xt=un.get();xt.set(de,$e),this.h?this.h.next=xt:this.g=xt,this.h=xt}}var un=new Ye(()=>new is,A=>A.reset());class is{constructor(){this.next=this.g=this.h=null}set(de,$e){this.h=de,this.g=$e,this.next=null}reset(){this.next=this.g=this.h=null}}let Oi,Ii=!1,ps=new nt,vs=()=>{let A=p.Promise.resolve(void 0);Oi=()=>{A.then(ai)}};var ai=()=>{let A;for(var de;A=null,ps.g&&(A=ps.g,ps.g=ps.g.next,ps.g||(ps.h=null),A.next=null),de=A;){try{de.h.call(de.g)}catch($e){(function(xt){p.setTimeout(()=>{throw xt},0)})($e)}un.j(de),100>un.h&&(un.h++,de.next=un.g,un.g=de)}Ii=!1};function Ni(){this.s=this.s,this.C=this.C}function ei(A,de){this.type=A,this.g=this.target=de,this.defaultPrevented=!1}Ni.prototype.s=!1,Ni.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ni.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ei.prototype.h=function(){this.defaultPrevented=!0};var Vs=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var A=!1,de=Object.defineProperty({},"passive",{get:function(){A=!0}});try{let $e=()=>{};p.addEventListener("test",$e,de),p.removeEventListener("test",$e,de)}catch{}return A}();function fa(A,de){if(ei.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A){var $e=this.type=A.type,xt=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;if(this.target=A.target||A.srcElement,this.g=de,de=A.relatedTarget){if(Ie){e:{try{ke(de.nodeName);var Vr=!0;break e}catch{}Vr=!1}Vr||(de=null)}}else $e=="mouseover"?de=A.fromElement:$e=="mouseout"&&(de=A.toElement);this.relatedTarget=de,xt?(this.clientX=xt.clientX!==void 0?xt.clientX:xt.pageX,this.clientY=xt.clientY!==void 0?xt.clientY:xt.pageY,this.screenX=xt.screenX||0,this.screenY=xt.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=typeof A.pointerType=="string"?A.pointerType:uo[A.pointerType]||"",this.state=A.state,this.i=A,A.defaultPrevented&&fa.aa.h.call(this)}}ye(fa,ei);var uo={2:"touch",3:"pen",4:"mouse"};fa.prototype.h=function(){fa.aa.h.call(this);var A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var Xo="closure_listenable_"+(1e6*Math.random()|0),Wo=0;function xc(A,de,$e,xt,Vr){this.listener=A,this.proxy=null,this.src=de,this.type=$e,this.capture=!!xt,this.ha=Vr,this.key=++Wo,this.da=this.fa=!1}function gl(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function To(A){this.src=A,this.g={},this.h=0}function qi(A,de){var $e=de.type;if($e in A.g){var xt,Vr=A.g[$e],Gr=Array.prototype.indexOf.call(Vr,de,void 0);(xt=0<=Gr)&&Array.prototype.splice.call(Vr,Gr,1),xt&&(gl(de),A.g[$e].length==0&&(delete A.g[$e],A.h--))}}function va(A,de,$e,xt){for(var Vr=0;Vr<A.length;++Vr){var Gr=A[Vr];if(!Gr.da&&Gr.listener==de&&!!$e==Gr.capture&&Gr.ha==xt)return Vr}return-1}To.prototype.add=function(A,de,$e,xt,Vr){var Gr=A.toString();(A=this.g[Gr])||(A=this.g[Gr]=[],this.h++);var en=va(A,de,xt,Vr);return-1<en?(de=A[en],$e||(de.fa=!1)):((de=new xc(de,this.src,Gr,!!xt,Vr)).fa=$e,A.push(de)),de};var Ps="closure_lm_"+(1e6*Math.random()|0),js={};function yl(A,de,$e,xt,Vr,Gr){if(!de)throw Error("Invalid event type");var en=b(Vr)?!!Vr.capture:!!Vr,ni=qm(A);if(ni||(A[Ps]=ni=new To(A)),($e=ni.add(de,$e,xt,en,Gr)).proxy)return $e;if(xt=function Zi(Na){return O0.call(Zi.src,Zi.listener,Na)},$e.proxy=xt,xt.src=A,xt.listener=$e,A.addEventListener)Vs||(Vr=en),Vr===void 0&&(Vr=!1),A.addEventListener(de.toString(),xt,Vr);else if(A.attachEvent)A.attachEvent(Bm(de.toString()),xt);else if(A.addListener&&A.removeListener)A.addListener(xt);else throw Error("addEventListener and attachEvent are unavailable.");return $e}function tu(A){if(typeof A!="number"&&A&&!A.da){var de=A.src;if(de&&de[Xo])qi(de.i,A);else{var $e=A.type,xt=A.proxy;de.removeEventListener?de.removeEventListener($e,xt,A.capture):de.detachEvent?de.detachEvent(Bm($e),xt):de.addListener&&de.removeListener&&de.removeListener(xt),($e=qm(de))?(qi($e,A),$e.h==0&&($e.src=null,de[Ps]=null)):gl(A)}}}function Bm(A){return A in js?js[A]:js[A]="on"+A}function O0(A,de){if(A.da)A=!0;else{de=new fa(de,this);var $e=A.listener,xt=A.ha||A.src;A.fa&&tu(A),A=$e.call(xt,de)}return A}function qm(A){return(A=A[Ps])instanceof To?A:null}var Kc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vh(A){return typeof A=="function"?A:(A[Kc]||(A[Kc]=function(de){return A.handleEvent(de)}),A[Kc])}function $l(){Ni.call(this),this.i=new To(this),this.M=this,this.F=null}function Ru(A,de){var $e,xt=A.F;if(xt)for($e=[];xt;xt=xt.F)$e.push(xt);if(A=A.M,xt=de.type||de,typeof de=="string")de=new ei(de,A);else if(de instanceof ei)de.target=de.target||A;else{var Vr=de;ft(de=new ei(xt,A),Vr)}if(Vr=!0,$e)for(var Gr=$e.length-1;0<=Gr;Gr--){var en=de.g=$e[Gr];Vr=zm(en,xt,!0,de)&&Vr}if(Vr=zm(en=de.g=A,xt,!0,de)&&Vr,Vr=zm(en,xt,!1,de)&&Vr,$e)for(Gr=0;Gr<$e.length;Gr++)Vr=zm(en=de.g=$e[Gr],xt,!1,de)&&Vr}function zm(A,de,$e,xt){if(!(de=A.i.g[String(de)]))return!0;de=de.concat();for(var Vr=!0,Gr=0;Gr<de.length;++Gr){var en=de[Gr];if(en&&!en.da&&en.capture==$e){var ni=en.listener,Zi=en.ha||en.src;en.fa&&qi(A.i,en),Vr=ni.call(Zi,xt)!==!1&&Vr}}return Vr&&!xt.defaultPrevented}function fd(A,de,$e){if(typeof A=="function")$e&&(A=te(A,$e));else if(A&&typeof A.handleEvent=="function")A=te(A.handleEvent,A);else throw Error("Invalid listener argument");return 2147483647<Number(de)?-1:p.setTimeout(A,de||0)}ye($l,Ni),$l.prototype[Xo]=!0,$l.prototype.removeEventListener=function(A,de,$e,xt){(function Vr(Gr,en,ni,Zi,Na){if(Array.isArray(en))for(var Ua=0;Ua<en.length;Ua++)Vr(Gr,en[Ua],ni,Zi,Na);else Zi=b(Zi)?!!Zi.capture:!!Zi,ni=Vh(ni),Gr&&Gr[Xo]?(Gr=Gr.i,(en=String(en).toString())in Gr.g&&-1<(ni=va(Ua=Gr.g[en],ni,Zi,Na))&&(gl(Ua[ni]),Array.prototype.splice.call(Ua,ni,1),Ua.length==0&&(delete Gr.g[en],Gr.h--))):Gr&&(Gr=qm(Gr))&&(en=Gr.g[en.toString()],Gr=-1,en&&(Gr=va(en,ni,Zi,Na)),(ni=-1<Gr?en[Gr]:null)&&tu(ni))})(this,A,de,$e,xt)},$l.prototype.N=function(){if($l.aa.N.call(this),this.i){var A,de=this.i;for(A in de.g){for(var $e=de.g[A],xt=0;xt<$e.length;xt++)gl($e[xt]);delete de.g[A],de.h--}}this.F=null},$l.prototype.K=function(A,de,$e,xt){return this.i.add(String(A),de,!1,$e,xt)},$l.prototype.L=function(A,de,$e,xt){return this.i.add(String(A),de,!0,$e,xt)};class Lp extends Ni{constructor(de,$e){super(),this.m=de,this.l=$e,this.h=null,this.i=!1,this.g=null}j(de){this.h=arguments,this.g?this.i=!0:function $e(xt){xt.g=fd(()=>{xt.g=null,xt.i&&(xt.i=!1,$e(xt))},xt.l);let Vr=xt.h;xt.h=null,xt.m.apply(null,Vr)}(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fu(A){Ni.call(this),this.h=A,this.g={}}ye(fu,Ni);var ec=[];function Hf(A){Ae(A.g,function(de,$e){this.g.hasOwnProperty($e)&&tu(de)},A),A.g={}}fu.prototype.N=function(){fu.aa.N.call(this),Hf(this)},fu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cc=p.JSON.stringify,pd=p.JSON.parse,Kf=class{stringify(A){return p.JSON.stringify(A,void 0)}parse(A){return p.JSON.parse(A,void 0)}};function kc(){}function Wf(A){return A.h||(A.h=A.i())}function Gm(){}kc.prototype.h=null;var rf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jp(){ei.call(this,"d")}function Hm(){ei.call(this,"c")}ye(jp,ei),ye(Hm,ei);var Wc={},ry=null;function Km(){return ry=ry||new $l}function md(A){ei.call(this,Wc.La,A)}function Jf(A){let de=Km();Ru(de,new md(de))}function pu(A,de){ei.call(this,Wc.STAT_EVENT,A),this.stat=de}function Bl(A){let de=Km();Ru(de,new pu(de,A))}function gd(A,de){ei.call(this,Wc.Ma,A),this.size=de}function Mw(A,de){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){A()},de)}function Lw(){this.g=!0}function D0(A,de,$e,xt){A.info(function(){return"XMLHTTP TEXT ("+de+"): "+function(Vr,Gr){if(!Vr.g)return Gr;if(!Gr)return null;try{var en=JSON.parse(Gr);if(en){for(Vr=0;Vr<en.length;Vr++)if(Array.isArray(en[Vr])){var ni=en[Vr];if(!(2>ni.length)){var Zi=ni[1];if(Array.isArray(Zi)&&!(1>Zi.length)){var Na=Zi[0];if(Na!="noop"&&Na!="stop"&&Na!="close")for(var Ua=1;Ua<Zi.length;Ua++)Zi[Ua]=""}}}}return Cc(en)}catch{return Gr}}(A,$e)+(xt?" "+xt:"")})}Wc.La="serverreachability",ye(md,ei),Wc.STAT_EVENT="statevent",ye(pu,ei),Wc.Ma="timingevent",ye(gd,ei),Lw.prototype.xa=function(){this.g=!1},Lw.prototype.info=function(){};var uS={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},l1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function cS(){}function ny(A,de,$e,xt){this.j=A,this.i=de,this.l=$e,this.R=xt||1,this.U=new fu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new u1}function u1(){this.i=null,this.g="",this.h=!1}ye(cS,kc),cS.prototype.g=function(){return new XMLHttpRequest},cS.prototype.i=function(){return{}},e=new cS;var c1={},f_={};function p_(A,de,$e){A.L=1,A.v=pS(Wm(de)),A.m=$e,A.P=!0,h1(A,null)}function h1(A,de){A.F=Date.now(),hS(A),A.A=Wm(A.v);var $e=A.A,xt=A.R;Array.isArray(xt)||(xt=[String(xt)]),T1($e.i,"t",xt),A.C=0,$e=A.j.J,A.h=new u1,A.g=q1(A.j,$e?de:null,!A.m),0<A.O&&(A.M=new Lp(te(A.Y,A,A.g),A.O)),de=A.U,$e=A.g,xt=A.ca;var Vr="readystatechange";Array.isArray(Vr)||(Vr&&(ec[0]=Vr.toString()),Vr=ec);for(var Gr=0;Gr<Vr.length;Gr++){var en=function ni(Zi,Na,Ua,Do,dc){if(Do&&Do.once)return function Jc(Co,co,al,Qc,nf){if(Array.isArray(co)){for(var j0=0;j0<co.length;j0++)Jc(Co,co[j0],al,Qc,nf);return null}return al=Vh(al),Co&&Co[Xo]?Co.L(co,al,b(Qc)?!!Qc.capture:!!Qc,nf):yl(Co,co,al,!0,Qc,nf)}(Zi,Na,Ua,Do,dc);if(Array.isArray(Na)){for(var xo=0;xo<Na.length;xo++)ni(Zi,Na[xo],Ua,Do,dc);return null}return Ua=Vh(Ua),Zi&&Zi[Xo]?Zi.K(Na,Ua,b(Do)?!!Do.capture:!!Do,dc):yl(Zi,Na,Ua,!1,Do,dc)}($e,Vr[Gr],xt||de.handleEvent,!1,de.h||de);if(!en)break;de.g[en.key]=en}de=A.H?it(A.H):{},A.m?(A.u||(A.u="POST"),de["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.A,A.u,A.m,de)):(A.u="GET",A.g.ea(A.A,A.u,null,de)),Jf(),function(ni,Zi,Na,Ua,Do,dc){ni.info(function(){if(ni.g)if(dc)for(var xo="",Jc=dc.split("&"),Co=0;Co<Jc.length;Co++){var co=Jc[Co].split("=");if(1<co.length){var al=co[0];co=co[1];var Qc=al.split("_");xo=2<=Qc.length&&Qc[1]=="type"?xo+(al+"=")+co+"&":xo+(al+"=redacted&")}}else xo=null;else xo=dc;return"XMLHTTP REQ ("+Ua+") [attempt "+Do+"]: "+Zi+`
`+Na+`
`+xo})}(A.i,A.u,A.A,A.l,A.R,A.m)}function d1(A){return!!A.g&&A.u=="GET"&&A.L!=2&&A.j.Ca}function hS(A){A.S=Date.now()+A.I,f1(A,A.I)}function f1(A,de){if(A.B!=null)throw Error("WatchDog timer not null");A.B=Mw(te(A.ba,A),de)}function m_(A){A.B&&(p.clearTimeout(A.B),A.B=null)}function jw(A){A.j.G==0||A.J||V1(A.j,A)}function fv(A){m_(A);var de=A.M;de&&typeof de.ma=="function"&&de.ma(),A.M=null,Hf(A.U),A.g&&(de=A.g,A.g=null,de.abort(),de.ma())}function g_(A,de){try{var $e=A.j;if($e.G!=0&&($e.g==A||y_($e.h,A))){if(!A.K&&y_($e.h,A)&&$e.G==3){try{var xt=$e.Da.g.parse(de)}catch{xt=null}if(Array.isArray(xt)&&xt.length==3){var Vr=xt;if(Vr[0]==0){e:if(!$e.u){if($e.g)if($e.g.F+3e3<A.F)wS($e),yS($e);else break e;S_($e),Bl(18)}}else $e.za=Vr[1],0<$e.za-$e.T&&37500>Vr[2]&&$e.F&&$e.v==0&&!$e.C&&($e.C=Mw(te($e.Za,$e),6e3));if(1>=g1($e.h)&&$e.ca){try{$e.ca()}catch{}$e.ca=void 0}}else mv($e,11)}else if((A.K||$e.g==A)&&wS($e),!ht(de))for(Vr=$e.Da.g.parse(de),de=0;de<Vr.length;de++){let ni=Vr[de];if($e.T=ni[0],ni=ni[1],$e.G==2)if(ni[0]=="c"){$e.K=ni[1],$e.ia=ni[2];let Zi=ni[3];Zi!=null&&($e.la=Zi,$e.j.info("VER="+$e.la));let Na=ni[4];Na!=null&&($e.Aa=Na,$e.j.info("SVER="+$e.Aa));let Ua=ni[5];Ua!=null&&typeof Ua=="number"&&0<Ua&&(xt=1.5*Ua,$e.L=xt,$e.j.info("backChannelRequestTimeoutMs_="+xt)),xt=$e;let Do=A.g;if(Do){let dc=Do.g?Do.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dc){var Gr=xt.h;Gr.g||dc.indexOf("spdy")==-1&&dc.indexOf("quic")==-1&&dc.indexOf("h2")==-1||(Gr.j=Gr.l,Gr.g=new Set,Gr.h&&(v_(Gr,Gr.h),Gr.h=null))}if(xt.D){let xo=Do.g?Do.g.getResponseHeader("X-HTTP-Session-Id"):null;xo&&(xt.ya=xo,vl(xt.I,xt.D,xo))}}if($e.G=3,$e.l&&$e.l.ua(),$e.ba&&($e.R=Date.now()-A.F,$e.j.info("Handshake RTT: "+$e.R+"ms")),(xt=$e).qa=B1(xt,xt.J?xt.ia:null,xt.W),A.K){y1(xt.h,A);var en=xt.L;en&&(A.I=en),A.B&&(m_(A),hS(A)),xt.g=A}else j1(xt);0<$e.i.length&&vS($e)}else ni[0]!="stop"&&ni[0]!="close"||mv($e,7);else $e.G==3&&(ni[0]=="stop"||ni[0]=="close"?ni[0]=="stop"?mv($e,7):b_($e):ni[0]!="noop"&&$e.l&&$e.l.ta(ni),$e.v=0)}}Jf(4)}catch{}}ny.prototype.ca=function(A){A=A.target;let de=this.M;de&&Jm(A)==3?de.j():this.Y(A)},ny.prototype.Y=function(A){try{if(A==this.g)e:{let Do=Jm(this.g);var de=this.g.Ba();let dc=this.g.Z();if(!(3>Do)&&(Do!=3||this.g&&(this.h.h||this.g.oa()||N1(this.g)))){this.J||Do!=4||de==7||(de==8||0>=dc?Jf(3):Jf(2)),m_(this);var $e=this.g.Z();this.X=$e;t:if(d1(this)){var xt=N1(this.g);A="";var Vr=xt.length,Gr=Jm(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fv(this),jw(this);var en="";break t}this.h.i=new p.TextDecoder}for(de=0;de<Vr;de++)this.h.h=!0,A+=this.h.i.decode(xt[de],{stream:!(Gr&&de==Vr-1)});xt.length=0,this.h.g+=A,this.C=0,en=this.h.g}else en=this.g.oa();if(this.o=$e==200,function(xo,Jc,Co,co,al,Qc,nf){xo.info(function(){return"XMLHTTP RESP ("+co+") [ attempt "+al+"]: "+Jc+`
`+Co+`
`+Qc+" "+nf})}(this.i,this.u,this.A,this.l,this.R,Do,$e),this.o){if(this.T&&!this.K){t:{if(this.g){var ni,Zi=this.g;if((ni=Zi.g?Zi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ht(ni)){var Na=ni;break t}}Na=null}if($e=Na)D0(this.i,this.l,$e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,g_(this,$e);else{this.o=!1,this.s=3,Bl(12),fv(this),jw(this);break e}}if(this.P){let xo;for($e=!0;!this.J&&this.C<en.length;)if((xo=function(Jc,Co){var co=Jc.C,al=Co.indexOf(`
`,co);return al==-1?f_:isNaN(co=Number(Co.substring(co,al)))?c1:(al+=1)+co>Co.length?f_:(Co=Co.slice(al,al+co),Jc.C=al+co,Co)}(this,en))==f_){Do==4&&(this.s=4,Bl(14),$e=!1),D0(this.i,this.l,null,"[Incomplete Response]");break}else if(xo==c1){this.s=4,Bl(15),D0(this.i,this.l,en,"[Invalid Chunk]"),$e=!1;break}else D0(this.i,this.l,xo,null),g_(this,xo);if(d1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Do!=4||en.length!=0||this.h.h||(this.s=1,Bl(16),$e=!1),this.o=this.o&&$e,$e){if(0<en.length&&!this.W){this.W=!0;var Ua=this.j;Ua.g==this&&Ua.ba&&!Ua.M&&(Ua.j.info("Great, no buffering proxy detected. Bytes received: "+en.length),E_(Ua),Ua.M=!0,Bl(11))}}else D0(this.i,this.l,en,"[Invalid Chunked Response]"),fv(this),jw(this)}else D0(this.i,this.l,en,null),g_(this,en);Do==4&&fv(this),this.o&&!this.J&&(Do==4?V1(this.j,this):(this.o=!1,hS(this)))}else(function(xo){let Jc={};xo=(xo.g&&2<=Jm(xo)&&xo.g.getAllResponseHeaders()||"").split(`\r
`);for(let co=0;co<xo.length;co++){if(ht(xo[co]))continue;var Co=function(nf){var j0=1;nf=nf.split(":");let __=[];for(;0<j0&&nf.length;)__.push(nf.shift()),j0--;return nf.length&&__.push(nf.join(":")),__}(xo[co]);let al=Co[0];if(typeof(Co=Co[1])!="string")continue;Co=Co.trim();let Qc=Jc[al]||[];Jc[al]=Qc,Qc.push(Co)}(function(co,al){for(let Qc in co)al.call(void 0,co[Qc],Qc,co)})(Jc,function(co){return co.join(", ")})})(this.g),$e==400&&0<en.indexOf("Unknown SID")?(this.s=3,Bl(12)):(this.s=0,Bl(13)),fv(this),jw(this)}}}catch{}finally{}},ny.prototype.cancel=function(){this.J=!0,fv(this)},ny.prototype.ba=function(){this.B=null;let A=Date.now();0<=A-this.S?(function(de,$e){de.info(function(){return"TIMEOUT: "+$e})}(this.i,this.A),this.L!=2&&(Jf(),Bl(17)),fv(this),this.s=2,jw(this)):f1(this,this.S-A)};var nP=class{constructor(A,de){this.g=A,this.map=de}};function p1(A){this.l=A||10,A=p.PerformanceNavigationTiming?0<(A=p.performance.getEntriesByType("navigation")).length&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2"):!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function m1(A){return!!A.h||!!A.g&&A.g.size>=A.j}function g1(A){return A.h?1:A.g?A.g.size:0}function y_(A,de){return A.h?A.h==de:!!A.g&&A.g.has(de)}function v_(A,de){A.g?A.g.add(de):A.h=de}function y1(A,de){A.h&&A.h==de?A.h=null:A.g&&A.g.has(de)&&A.g.delete(de)}function v1(A){if(A.h!=null)return A.i.concat(A.h.D);if(A.g!=null&&A.g.size!==0){let de=A.i;for(let $e of A.g.values())de=de.concat($e.D);return de}return je(A.i)}function w1(A,de){if(A.forEach&&typeof A.forEach=="function")A.forEach(de,void 0);else if(g(A)||typeof A=="string")Array.prototype.forEach.call(A,de,void 0);else for(var $e=function(en){if(en.na&&typeof en.na=="function")return en.na();if(!en.V||typeof en.V!="function"){if(typeof Map<"u"&&en instanceof Map)return Array.from(en.keys());if(!(typeof Set<"u"&&en instanceof Set)){if(g(en)||typeof en=="string"){var ni=[];en=en.length;for(var Zi=0;Zi<en;Zi++)ni.push(Zi);return ni}for(let Na in ni=[],Zi=0,en)ni[Zi++]=Na;return ni}}}(A),xt=function(en){if(en.V&&typeof en.V=="function")return en.V();if(typeof Map<"u"&&en instanceof Map||typeof Set<"u"&&en instanceof Set)return Array.from(en.values());if(typeof en=="string")return en.split("");if(g(en)){for(var ni=[],Zi=en.length,Na=0;Na<Zi;Na++)ni.push(en[Na]);return ni}for(Na in ni=[],Zi=0,en)ni[Zi++]=en[Na];return ni}(A),Vr=xt.length,Gr=0;Gr<Vr;Gr++)de.call(void 0,xt[Gr],$e&&$e[Gr],A)}p1.prototype.cancel=function(){if(this.i=v1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let A of this.g.values())A.cancel();this.g.clear()}};var b1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pv(A){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,A instanceof pv){this.h=A.h,dS(this,A.j),this.o=A.o,this.g=A.g,fS(this,A.s),this.l=A.l;var de=A.i,$e=new Uw;$e.i=de.i,de.g&&($e.g=new Map(de.g),$e.h=de.h),S1(this,$e),this.m=A.m}else A&&(de=String(A).match(b1))?(this.h=!1,dS(this,de[1]||"",!0),this.o=Fw(de[2]||""),this.g=Fw(de[3]||"",!0),fS(this,de[4]),this.l=Fw(de[5]||"",!0),S1(this,de[6]||"",!0),this.m=Fw(de[7]||"")):(this.h=!1,this.i=new Uw(null,this.h))}function Wm(A){return new pv(A)}function dS(A,de,$e){A.j=$e?Fw(de,!0):de,A.j&&(A.j=A.j.replace(/:$/,""))}function fS(A,de){if(de){if(isNaN(de=Number(de))||0>de)throw Error("Bad port number "+de);A.s=de}else A.s=null}function S1(A,de,$e){var xt,Vr;de instanceof Uw?(A.i=de,xt=A.i,(Vr=A.h)&&!xt.j&&(iy(xt),xt.i=null,xt.g.forEach(function(Gr,en){var ni=en.toLowerCase();en!=ni&&(_1(this,en),T1(this,ni,Gr))},xt)),xt.j=Vr):($e||(de=Vw(de,oP)),A.i=new Uw(de,A.h))}function vl(A,de,$e){A.i.set(de,$e)}function pS(A){return vl(A,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),A}function Fw(A,de){return A?de?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function Vw(A,de,$e){return typeof A=="string"?(A=encodeURI(A).replace(de,iP),$e&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function iP(A){return"%"+((A=A.charCodeAt(0))>>4&15).toString(16)+(15&A).toString(16)}pv.prototype.toString=function(){var A=[],de=this.j;de&&A.push(Vw(de,E1,!0),":");var $e=this.g;return($e||de=="file")&&(A.push("//"),(de=this.o)&&A.push(Vw(de,E1,!0),"@"),A.push(encodeURIComponent(String($e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),($e=this.s)!=null&&A.push(":",String($e))),($e=this.l)&&(this.g&&$e.charAt(0)!="/"&&A.push("/"),A.push(Vw($e,$e.charAt(0)=="/"?aP:sP,!0))),($e=this.i.toString())&&A.push("?",$e),($e=this.m)&&A.push("#",Vw($e,lP)),A.join("")};var E1=/[#\/\?@]/g,sP=/[#\?:]/g,aP=/[#\?]/g,oP=/[#\?@]/g,lP=/#/g;function Uw(A,de){this.h=this.g=null,this.i=A||null,this.j=!!de}function iy(A){A.g||(A.g=new Map,A.h=0,A.i&&function(de,$e){if(de){de=de.split("&");for(var xt=0;xt<de.length;xt++){var Vr=de[xt].indexOf("="),Gr=null;if(0<=Vr){var en=de[xt].substring(0,Vr);Gr=de[xt].substring(Vr+1)}else en=de[xt];$e(en,Gr?decodeURIComponent(Gr.replace(/\+/g," ")):"")}}}(A.i,function(de,$e){A.add(decodeURIComponent(de.replace(/\+/g," ")),$e)}))}function _1(A,de){iy(A),de=M0(A,de),A.g.has(de)&&(A.i=null,A.h-=A.g.get(de).length,A.g.delete(de))}function I1(A,de){return iy(A),de=M0(A,de),A.g.has(de)}function T1(A,de,$e){_1(A,de),0<$e.length&&(A.i=null,A.g.set(M0(A,de),je($e)),A.h+=$e.length)}function M0(A,de){return de=String(de),A.j&&(de=de.toLowerCase()),de}function sy(A,de,$e,xt,Vr){try{Vr&&(Vr.onload=null,Vr.onerror=null,Vr.onabort=null,Vr.ontimeout=null),xt($e)}catch{}}function uP(){this.g=new Kf}function $w(A){this.l=A.Ub||null,this.j=A.eb||!1}function mS(A,de){$l.call(this),this.D=A,this.o=de,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function x1(A){A.j.read().then(A.Pa.bind(A)).catch(A.ga.bind(A))}function Bw(A){A.readyState=4,A.l=null,A.j=null,A.v=null,qw(A)}function qw(A){A.onreadystatechange&&A.onreadystatechange.call(A)}function C1(A){let de="";return Ae(A,function($e,xt){de+=xt+":"+$e+`\r
`}),de}function w_(A,de,$e){e:{for(xt in $e){var xt=!1;break e}xt=!0}xt||($e=C1($e),typeof A=="string"?$e!=null&&encodeURIComponent(String($e)):vl(A,de,$e))}function mu(A){$l.call(this),this.headers=new Map,this.o=A||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(r=Uw.prototype).add=function(A,de){iy(this),this.i=null,A=M0(this,A);var $e=this.g.get(A);return $e||this.g.set(A,$e=[]),$e.push(de),this.h+=1,this},r.forEach=function(A,de){iy(this),this.g.forEach(function($e,xt){$e.forEach(function(Vr){A.call(de,Vr,xt,this)},this)},this)},r.na=function(){iy(this);let A=Array.from(this.g.values()),de=Array.from(this.g.keys()),$e=[];for(let xt=0;xt<de.length;xt++){let Vr=A[xt];for(let Gr=0;Gr<Vr.length;Gr++)$e.push(de[xt])}return $e},r.V=function(A){iy(this);let de=[];if(typeof A=="string")I1(this,A)&&(de=de.concat(this.g.get(M0(this,A))));else{A=Array.from(this.g.values());for(let $e=0;$e<A.length;$e++)de=de.concat(A[$e])}return de},r.set=function(A,de){return iy(this),this.i=null,I1(this,A=M0(this,A))&&(this.h-=this.g.get(A).length),this.g.set(A,[de]),this.h+=1,this},r.get=function(A,de){return A&&0<(A=this.V(A)).length?String(A[0]):de},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let A=[],de=Array.from(this.g.keys());for(var $e=0;$e<de.length;$e++){var xt=de[$e];let Gr=encodeURIComponent(String(xt)),en=this.V(xt);for(xt=0;xt<en.length;xt++){var Vr=Gr;en[xt]!==""&&(Vr+="="+encodeURIComponent(String(en[xt]))),A.push(Vr)}}return this.i=A.join("&")},ye($w,kc),$w.prototype.g=function(){return new mS(this.l,this.j)},$w.prototype.i=(n={},function(){return n}),ye(mS,$l),(r=mS.prototype).open=function(A,de){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=A,this.A=de,this.readyState=1,qw(this)},r.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let de={headers:this.u,method:this.B,credentials:this.m,cache:void 0};A&&(de.body=A),(this.D||p).fetch(new Request(this.A,de)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bw(this)),this.readyState=0},r.Sa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,qw(this)),this.g&&(this.readyState=3,qw(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(p.ReadableStream!==void 0&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;x1(this)}else A.text().then(this.Ra.bind(this),this.ga.bind(this))},r.Pa=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var de=A.value?A.value:new Uint8Array(0);(de=this.v.decode(de,{stream:!A.done}))&&(this.response=this.responseText+=de)}A.done?Bw(this):qw(this),this.readyState==3&&x1(this)}},r.Ra=function(A){this.g&&(this.response=this.responseText=A,Bw(this))},r.Qa=function(A){this.g&&(this.response=A,Bw(this))},r.ga=function(){this.g&&Bw(this)},r.setRequestHeader=function(A,de){this.u.append(A,de)},r.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let A=[],de=this.h.entries();for(var $e=de.next();!$e.done;)A.push(($e=$e.value)[0]+": "+$e[1]),$e=de.next();return A.join(`\r
`)},Object.defineProperty(mS.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}}),ye(mu,$l);var cP=/^https?$/i,hP=["POST","PUT"];function k1(A,de){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=de,A.m=5,R1(A),gS(A)}function R1(A){A.A||(A.A=!0,Ru(A,"complete"),Ru(A,"error"))}function P1(A){if(A.h&&c!==void 0&&(!A.v[1]||Jm(A)!=4||A.Z()!=2)){if(A.u&&Jm(A)==4)fd(A.Ea,0,A);else if(Ru(A,"readystatechange"),Jm(A)==4){A.h=!1;try{let en=A.Z();switch(en){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var de,$e,xt=!0;break;default:xt=!1}if(!(de=xt)){if($e=en===0){var Vr=String(A.D).match(b1)[1]||null;!Vr&&p.self&&p.self.location&&(Vr=p.self.location.protocol.slice(0,-1)),$e=!cP.test(Vr?Vr.toLowerCase():"")}de=$e}if(de)Ru(A,"complete"),Ru(A,"success");else{A.m=6;try{var Gr=2<Jm(A)?A.g.statusText:""}catch{Gr=""}A.l=Gr+" ["+A.Z()+"]",R1(A)}}finally{gS(A)}}}}function gS(A,de){if(A.g){A1(A);let $e=A.g,xt=A.v[0]?()=>{}:null;A.g=null,A.v=null,de||Ru(A,"ready");try{$e.onreadystatechange=xt}catch{}}}function A1(A){A.I&&(p.clearTimeout(A.I),A.I=null)}function Jm(A){return A.g?A.g.readyState:0}function N1(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.H){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function zw(A,de,$e){return $e&&$e.internalChannelParams&&$e.internalChannelParams[A]||de}function O1(A){this.Aa=0,this.i=[],this.j=new Lw,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zw("failFast",!1,A),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zw("baseRetryDelayMs",5e3,A),this.cb=zw("retryDelaySeedMs",1e4,A),this.Wa=zw("forwardChannelMaxRetries",2,A),this.wa=zw("forwardChannelRequestTimeoutMs",2e4,A),this.pa=A&&A.xmlHttpFactory||void 0,this.Xa=A&&A.Tb||void 0,this.Ca=A&&A.useFetchStreams||!1,this.L=void 0,this.J=A&&A.supportsCrossDomainXhr||!1,this.K="",this.h=new p1(A&&A.concurrentRequestLimit),this.Da=new uP,this.P=A&&A.fastHandshake||!1,this.O=A&&A.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=A&&A.Rb||!1,A&&A.xa&&this.j.xa(),A&&A.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&A&&A.detectBufferingProxy||!1,this.ja=void 0,A&&A.longPollingTimeout&&0<A.longPollingTimeout&&(this.ja=A.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function b_(A){if(D1(A),A.G==3){var de=A.U++,$e=Wm(A.I);if(vl($e,"SID",A.K),vl($e,"RID",de),vl($e,"TYPE","terminate"),Gw(A,$e),(de=new ny(A,A.j,de)).L=2,de.v=pS(Wm($e)),$e=!1,p.navigator&&p.navigator.sendBeacon)try{$e=p.navigator.sendBeacon(de.v.toString(),"")}catch{}!$e&&p.Image&&(new Image().src=de.v,$e=!0),$e||(de.g=q1(de.j,null),de.g.ea(de.v)),de.F=Date.now(),hS(de)}$1(A)}function yS(A){A.g&&(E_(A),A.g.cancel(),A.g=null)}function D1(A){yS(A),A.u&&(p.clearTimeout(A.u),A.u=null),wS(A),A.h.cancel(),A.s&&(typeof A.s=="number"&&p.clearTimeout(A.s),A.s=null)}function vS(A){if(!m1(A.h)&&!A.s){A.s=!0;var de=A.Ga;Oi||vs(),Ii||(Oi(),Ii=!0),ps.add(de,A),A.B=0}}function M1(A,de){var $e;$e=de?de.l:A.U++;let xt=Wm(A.I);vl(xt,"SID",A.K),vl(xt,"RID",$e),vl(xt,"AID",A.T),Gw(A,xt),A.m&&A.o&&w_(xt,A.m,A.o),$e=new ny(A,A.j,$e,A.B+1),A.m===null&&($e.H=A.o),de&&(A.i=de.D.concat(A.i)),de=L1(A,$e,1e3),$e.I=Math.round(.5*A.wa)+Math.round(.5*A.wa*Math.random()),v_(A.h,$e),p_($e,xt,de)}function Gw(A,de){A.H&&Ae(A.H,function($e,xt){vl(de,xt,$e)}),A.l&&w1({},function($e,xt){vl(de,xt,$e)})}function L1(A,de,$e){$e=Math.min(A.i.length,$e);var xt=A.l?te(A.l.Na,A.l,A):null;e:{var Vr=A.i;let Gr=-1;for(;;){let en=["count="+$e];Gr==-1?0<$e?(Gr=Vr[0].g,en.push("ofs="+Gr)):Gr=0:en.push("ofs="+Gr);let ni=!0;for(let Zi=0;Zi<$e;Zi++){let Na=Vr[Zi].g,Ua=Vr[Zi].map;if(0>(Na-=Gr))Gr=Math.max(0,Vr[Zi].g-100),ni=!1;else try{(function(Do,dc,xo){let Jc=xo||"";try{w1(Do,function(Co,co){let al=Co;b(Co)&&(al=Cc(Co)),dc.push(Jc+co+"="+encodeURIComponent(al))})}catch(Co){throw dc.push(Jc+"type="+encodeURIComponent("_badmap")),Co}})(Ua,en,"req"+Na+"_")}catch{xt&&xt(Ua)}}if(ni){xt=en.join("&");break e}}}return A=A.i.splice(0,$e),de.D=A,xt}function j1(A){if(!A.g&&!A.u){A.Y=1;var de=A.Fa;Oi||vs(),Ii||(Oi(),Ii=!0),ps.add(de,A),A.v=0}}function S_(A){return!A.g&&!A.u&&!(3<=A.v)&&(A.Y++,A.u=Mw(te(A.Fa,A),U1(A,A.v)),A.v++,!0)}function E_(A){A.A!=null&&(p.clearTimeout(A.A),A.A=null)}function F1(A){A.g=new ny(A,A.j,"rpc",A.Y),A.m===null&&(A.g.H=A.o),A.g.O=0;var de=Wm(A.qa);vl(de,"RID","rpc"),vl(de,"SID",A.K),vl(de,"AID",A.T),vl(de,"CI",A.F?"0":"1"),!A.F&&A.ja&&vl(de,"TO",A.ja),vl(de,"TYPE","xmlhttp"),Gw(A,de),A.m&&A.o&&w_(de,A.m,A.o),A.L&&(A.g.I=A.L);var $e=A.g;A=A.ia,$e.L=1,$e.v=pS(Wm(de)),$e.m=null,$e.P=!0,h1($e,A)}function wS(A){A.C!=null&&(p.clearTimeout(A.C),A.C=null)}function V1(A,de){var $e=null;if(A.g==de){wS(A),E_(A),A.g=null;var xt=2}else{if(!y_(A.h,de))return;$e=de.D,y1(A.h,de),xt=1}if(A.G!=0){if(de.o)if(xt==1){$e=de.m?de.m.length:0,de=Date.now()-de.F;var Vr,Gr=A.B;Ru(xt=Km(),new gd(xt,$e)),vS(A)}else j1(A);else if((Gr=de.s)==3||Gr==0&&0<de.X||!(xt==1&&(Vr=de,!(g1(A.h)>=A.h.j-(A.s?1:0))&&(A.s?(A.i=Vr.D.concat(A.i),!0):A.G!=1&&A.G!=2&&!(A.B>=(A.Va?0:A.Wa))&&(A.s=Mw(te(A.Ga,A,Vr),U1(A,A.B)),A.B++,!0)))||xt==2&&S_(A)))switch($e&&0<$e.length&&((de=A.h).i=de.i.concat($e)),Gr){case 1:mv(A,5);break;case 4:mv(A,10);break;case 3:mv(A,6);break;default:mv(A,2)}}}function U1(A,de){let $e=A.Ta+Math.floor(Math.random()*A.cb);return A.isActive()||($e*=2),$e*de}function mv(A,de){if(A.j.info("Error code "+de),de==2){var $e=te(A.fb,A),xt=A.Xa;let Vr=!xt;xt=new pv(xt||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||dS(xt,"https"),pS(xt),Vr?function(Gr,en){let ni=new Lw;if(p.Image){let Zi=new Image;Zi.onload=ie(sy,ni,"TestLoadImage: loaded",!0,en,Zi),Zi.onerror=ie(sy,ni,"TestLoadImage: error",!1,en,Zi),Zi.onabort=ie(sy,ni,"TestLoadImage: abort",!1,en,Zi),Zi.ontimeout=ie(sy,ni,"TestLoadImage: timeout",!1,en,Zi),p.setTimeout(function(){Zi.ontimeout&&Zi.ontimeout()},1e4),Zi.src=Gr}else en(!1)}(xt.toString(),$e):function(Gr,en){let ni=new Lw,Zi=new AbortController,Na=setTimeout(()=>{Zi.abort(),sy(ni,"TestPingServer: timeout",!1,en)},1e4);fetch(Gr,{signal:Zi.signal}).then(Ua=>{clearTimeout(Na),Ua.ok?sy(ni,"TestPingServer: ok",!0,en):sy(ni,"TestPingServer: server error",!1,en)}).catch(()=>{clearTimeout(Na),sy(ni,"TestPingServer: error",!1,en)})}(xt.toString(),$e)}else Bl(2);A.G=0,A.l&&A.l.sa(de),$1(A),D1(A)}function $1(A){if(A.G=0,A.ka=[],A.l){let de=v1(A.h);(de.length!=0||A.i.length!=0)&&(Re(A.ka,de),Re(A.ka,A.i),A.h.i.length=0,je(A.i),A.i.length=0),A.l.ra()}}function B1(A,de,$e){var xt=$e instanceof pv?Wm($e):new pv($e);if(xt.g!="")de&&(xt.g=de+"."+xt.g),fS(xt,xt.s);else{var Vr=p.location;xt=Vr.protocol,de=de?de+"."+Vr.hostname:Vr.hostname,Vr=+Vr.port;var Gr=new pv(null);xt&&dS(Gr,xt),de&&(Gr.g=de),Vr&&fS(Gr,Vr),$e&&(Gr.l=$e),xt=Gr}return $e=A.D,de=A.ya,$e&&de&&vl(xt,$e,de),vl(xt,"VER",A.la),Gw(A,xt),xt}function q1(A,de,$e){if(de&&!A.J)throw Error("Can't create secondary domain capable XhrIo object.");return(de=new mu(A.Ca&&!A.pa?new $w({eb:$e}):A.pa)).Ha(A.J),de}function z1(){}function bS(){}function yd(A,de){$l.call(this),this.g=new O1(de),this.l=A,this.h=de&&de.messageUrlParams||null,A=de&&de.messageHeaders||null,de&&de.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=de&&de.initMessageHeaders||null,de&&de.messageContentType&&(A?A["X-WebChannel-Content-Type"]=de.messageContentType:A={"X-WebChannel-Content-Type":de.messageContentType}),de&&de.va&&(A?A["X-WebChannel-Client-Profile"]=de.va:A={"X-WebChannel-Client-Profile":de.va}),this.g.S=A,(A=de&&de.Sb)&&!ht(A)&&(this.g.m=A),this.v=de&&de.supportsCrossDomainXhr||!1,this.u=de&&de.sendRawJson||!1,(de=de&&de.httpSessionIdParam)&&!ht(de)&&(this.g.D=de,(A=this.h)!==null&&de in A&&de in(A=this.h)&&delete A[de]),this.j=new L0(this)}function G1(A){jp.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var de=A.__sm__;if(de){e:{for(let $e in de){A=$e;break e}A=void 0}(this.i=A)&&(A=this.i,de=de!==null&&A in de?de[A]:void 0),this.data=de}else this.data=A}function H1(){Hm.call(this),this.status=1}function L0(A){this.g=A}(r=mu.prototype).Ha=function(A){this.J=A},r.ea=function(A,de,$e,xt){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);de=de?de.toUpperCase():"GET",this.D=A,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():e.g(),this.v=this.o?Wf(this.o):Wf(e),this.g.onreadystatechange=te(this.Ea,this);try{this.B=!0,this.g.open(de,String(A),!0),this.B=!1}catch(Gr){k1(this,Gr);return}if(A=$e||"",$e=new Map(this.headers),xt)if(Object.getPrototypeOf(xt)===Object.prototype)for(var Vr in xt)$e.set(Vr,xt[Vr]);else if(typeof xt.keys=="function"&&typeof xt.get=="function")for(let Gr of xt.keys())$e.set(Gr,xt.get(Gr));else throw Error("Unknown input type for opt_headers: "+String(xt));for(let[Gr,en]of(xt=Array.from($e.keys()).find(ni=>ni.toLowerCase()=="content-type"),Vr=p.FormData&&A instanceof p.FormData,!(0<=Array.prototype.indexOf.call(hP,de,void 0))||xt||Vr||$e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),$e))this.g.setRequestHeader(Gr,en);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{A1(this),this.u=!0,this.g.send(A),this.u=!1}catch(Gr){k1(this,Gr)}},r.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=A||7,Ru(this,"complete"),Ru(this,"abort"),gS(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gS(this,!0)),mu.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?P1(this):this.bb())},r.bb=function(){P1(this)},r.isActive=function(){return!!this.g},r.Z=function(){try{return 2<Jm(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(A){if(this.g){var de=this.g.responseText;return A&&de.indexOf(A)==0&&(de=de.substring(A.length)),pd(de)}},r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)},(r=O1.prototype).la=8,r.G=1,r.connect=function(A,de,$e,xt){Bl(0),this.W=A,this.H=de||{},$e&&xt!==void 0&&(this.H.OSID=$e,this.H.OAID=xt),this.F=this.X,this.I=B1(this,null,this.W),vS(this)},r.Ga=function(A){if(this.s)if(this.s=null,this.G==1){if(!A){this.U=Math.floor(1e5*Math.random()),A=this.U++;let Vr=new ny(this,this.j,A),Gr=this.o;if(this.S&&(Gr?ft(Gr=it(Gr),this.S):Gr=this.S),this.m!==null||this.O||(Vr.H=Gr,Gr=null),this.P)e:{for(var de=0,$e=0;$e<this.i.length;$e++){t:{var xt=this.i[$e];if("__data__"in xt.map&&typeof(xt=xt.map.__data__)=="string"){xt=xt.length;break t}xt=void 0}if(xt===void 0)break;if(4096<(de+=xt)){de=$e;break e}if(de===4096||$e===this.i.length-1){de=$e+1;break e}}de=1e3}else de=1e3;de=L1(this,Vr,de),vl($e=Wm(this.I),"RID",A),vl($e,"CVER",22),this.D&&vl($e,"X-HTTP-Session-Id",this.D),Gw(this,$e),Gr&&(this.O?de="headers="+encodeURIComponent(String(C1(Gr)))+"&"+de:this.m&&w_($e,this.m,Gr)),v_(this.h,Vr),this.Ua&&vl($e,"TYPE","init"),this.P?(vl($e,"$req",de),vl($e,"SID","null"),Vr.T=!0,p_(Vr,$e,null)):p_(Vr,$e,de),this.G=2}}else this.G==3&&(A?M1(this,A):this.i.length==0||m1(this.h)||M1(this))},r.Fa=function(){if(this.u=null,F1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var A=2*this.R;this.j.info("BP detection timer enabled: "+A),this.A=Mw(te(this.ab,this),A)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bl(10),yS(this),F1(this))},r.Za=function(){this.C!=null&&(this.C=null,yS(this),S_(this),Bl(19))},r.fb=function(A){A?(this.j.info("Successfully pinged google.com"),Bl(2)):(this.j.info("Failed to ping google.com"),Bl(1))},r.isActive=function(){return!!this.l&&this.l.isActive(this)},(r=z1.prototype).ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){},bS.prototype.g=function(A,de){return new yd(A,de)},ye(yd,$l),yd.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yd.prototype.close=function(){b_(this.g)},yd.prototype.o=function(A){var de=this.g;if(typeof A=="string"){var $e={};$e.__data__=A,A=$e}else this.u&&(($e={}).__data__=Cc(A),A=$e);de.i.push(new nP(de.Ya++,A)),de.G==3&&vS(de)},yd.prototype.N=function(){this.g.l=null,delete this.j,b_(this.g),delete this.g,yd.aa.N.call(this)},ye(G1,jp),ye(H1,Hm),ye(L0,z1),L0.prototype.ua=function(){Ru(this.g,"a")},L0.prototype.ta=function(A){Ru(this.g,new G1(A))},L0.prototype.sa=function(A){Ru(this.g,new H1)},L0.prototype.ra=function(){Ru(this.g,"b")},bS.prototype.createWebChannel=bS.prototype.g,yd.prototype.send=yd.prototype.o,yd.prototype.open=yd.prototype.m,yd.prototype.close=yd.prototype.close,Se=ki.createWebChannelTransport=function(){return new bS},fe=ki.getStatEventTarget=function(){return Km()},ee=ki.Event=Wc,Y=ki.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uS.NO_ERROR=0,uS.TIMEOUT=8,uS.HTTP_ERROR=6,K=ki.ErrorCode=uS,l1.COMPLETE="complete",U=ki.EventType=l1,Gm.EventType=rf,rf.OPEN="a",rf.CLOSE="b",rf.ERROR="c",rf.MESSAGE="d",$l.prototype.listen=$l.prototype.K,N=ki.WebChannel=Gm,ki.FetchXmlHttpFactory=$w,mu.prototype.listenOnce=mu.prototype.L,mu.prototype.getLastError=mu.prototype.Ka,mu.prototype.getLastErrorCode=mu.prototype.Ba,mu.prototype.getStatus=mu.prototype.Z,mu.prototype.getResponseJson=mu.prototype.Oa,mu.prototype.getResponseText=mu.prototype.oa,mu.prototype.send=mu.prototype.ea,mu.prototype.setWithCredentials=mu.prototype.Ha,C=ki.XhrIo=mu}).apply(mn!==void 0?mn:typeof zr<"u"?zr:typeof window<"u"?window:{});var Es=M(6195).Buffer;let Fi="@firebase/firestore";class Ai{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ai.UNAUTHENTICATED=new Ai(null),Ai.GOOGLE_CREDENTIALS=new Ai("google-credentials-uid"),Ai.FIRST_PARTY=new Ai("first-party-uid"),Ai.MOCK_USER=new Ai("mock-user");let Qs="11.0.2",Ls=new Ei("@firebase/firestore");function ca(){return Ls.logLevel}function Zr(n,...e){if(Ls.logLevel<=k.DEBUG){let r=e.map(go);Ls.debug(`Firestore (${Qs}): ${n}`,...r)}}function _s(n,...e){if(Ls.logLevel<=k.ERROR){let r=e.map(go);Ls.error(`Firestore (${Qs}): ${n}`,...r)}}function zs(n,...e){if(Ls.logLevel<=k.WARN){let r=e.map(go);Ls.warn(`Firestore (${Qs}): ${n}`,...r)}}function go(n){if(typeof n=="string")return n;try{return JSON.stringify(n)}catch{return n}}function _r(n="Unexpected state"){let e=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: `+n;throw _s(e),Error(e)}let Nr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Cn extends Pt{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ks{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class cl{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ju{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ai.UNAUTHENTICATED))}shutdown(){}}class za{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class bl{constructor(e){this.t=e,this.currentUser=Ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){this.o===void 0||_r();let a=this.i,l=b=>this.i!==a?(a=this.i,r(b)):Promise.resolve(),c=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ks,e.enqueueRetryable(()=>l(this.currentUser))};let p=()=>{let b=c;e.enqueueRetryable(async()=>{await b.promise,await l(this.currentUser)})},g=b=>{Zr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit(b=>g(b)),setTimeout(()=>{if(!this.auth){let b=this.t.getImmediate({optional:!0});b?g(b):(Zr("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ks)}},0),p()}getToken(){let e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(Zr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(typeof a.accessToken=="string"||_r(),new cl(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return e===null||typeof e=="string"||_r(),new Ai(e)}}class ka{constructor(e,r,a){this.l=e,this.h=r,this.P=a,this.type="FirstParty",this.user=Ai.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class yo{constructor(e,r,a){this.l=e,this.h=r,this.P=a}getToken(){return Promise.resolve(new ka(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vu{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){this.o===void 0||_r();let a=c=>{c.error!=null&&Zr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);let p=c.token!==this.R;return this.R=c.token,Zr("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?r(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>a(c))};let l=c=>{Zr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){let c=this.A.getImmediate({optional:!0});c?l(c):Zr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(typeof r.token=="string"||_r(),this.R=r.token,new Rl(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class jo{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length,a="";for(;a.length<20;){let l=function(c){let p=typeof zr<"u"&&(zr.crypto||zr.msCrypto),g=new Uint8Array(40);if(p&&typeof p.getRandomValues=="function")p.getRandomValues(g);else for(let b=0;b<40;b++)g[b]=Math.floor(256*Math.random());return g}(0);for(let c=0;c<l.length;++c)a.length<20&&l[c]<r&&(a+=e.charAt(l[c]%e.length))}return a}}function Bi(n,e){return n<e?-1:n>e?1:0}function Zc(n,e,r){return n.length===e.length&&n.every((a,l)=>r(a,e[l]))}class bo{static now(){return bo.fromMillis(Date.now())}static fromDate(e){return bo.fromMillis(e.getTime())}static fromMillis(e){let r=Math.floor(e/1e3);return new bo(r,Math.floor(1e6*(e-1e3*r)))}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0||r>=1e9)throw new Cn(Nr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800||e>=253402300800)throw new Cn(Nr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bi(this.nanoseconds,e.nanoseconds):Bi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xi{static fromTimestamp(e){return new Xi(e)}static min(){return new Xi(new bo(0,0))}static max(){return new Xi(new bo(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gh{constructor(e,r,a){r===void 0?r=0:r>e.length&&_r(),a===void 0?a=e.length-r:a>e.length-r&&_r(),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return gh.comparator(this,e)===0}child(e){let r=this.segments.slice(this.offset,this.limit());return e instanceof gh?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){let a=Math.min(e.length,r.length);for(let l=0;l<a;l++){let c=e.get(l),p=r.get(l);if(c<p)return-1;if(c>p)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class La extends gh{construct(e,r,a){return new La(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let r=[];for(let a of e){if(a.indexOf("//")>=0)throw new Cn(Nr.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(l=>l.length>0))}return new La(r)}static emptyPath(){return new La([])}}let Fp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ao extends gh{construct(e,r,a){return new ao(e,r,a)}static isValidIdentifier(e){return Fp.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ao.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ao(["__name__"])}static fromServerFormat(e){let r=[],a="",l=0,c=()=>{if(a.length===0)throw new Cn(Nr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""},p=!1;for(;l<e.length;){let g=e[l];if(g==="\\"){if(l+1===e.length)throw new Cn(Nr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let b=e[l+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new Cn(Nr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=b,l+=2}else g==="`"?p=!p:g!=="."||p?a+=g:c(),l++}if(c(),p)throw new Cn(Nr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ao(r)}static emptyPath(){return new ao([])}}class Xn{constructor(e){this.path=e}static fromPath(e){return new Xn(La.fromString(e))}static fromName(e){return new Xn(La.fromString(e).popFirst(5))}static empty(){return new Xn(La.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&La.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return La.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xn(new La(e.slice()))}}class Po{constructor(e,r,a,l){this.indexId=e,this.collectionGroup=r,this.fields=a,this.indexState=l}}function wu(n){return n.fields.find(e=>e.kind===2)}function eh(n){return n.fields.filter(e=>e.kind!==2)}Po.UNKNOWN_ID=-1;class Fu{constructor(e,r){this.fieldPath=e,this.kind=r}}class bu{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new bu(0,Sl.min())}}function vd(n,e){let r=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1;return new Sl(Xi.fromTimestamp(a===1e9?new bo(r+1,0):new bo(r,a)),Xn.empty(),e)}function mc(n){return new Sl(n.readTime,n.key,-1)}class Sl{constructor(e,r,a){this.readTime=e,this.documentKey=r,this.largestBatchId=a}static min(){return new Sl(Xi.min(),Xn.empty(),-1)}static max(){return new Sl(Xi.max(),Xn.empty(),-1)}}function yh(n,e){let r=n.readTime.compareTo(e.readTime);return r!==0||(r=Xn.comparator(n.documentKey,e.documentKey))!==0?r:Bi(n.largestBatchId,e.largestBatchId)}let wd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ao(n){if(n.code!==Nr.FAILED_PRECONDITION||n.message!==wd)throw n;Zr("LocalStore","Unexpectedly lost primary lease")}class gr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&_r(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new gr((a,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,l)},this.catchCallback=c=>{this.wrapFailure(r,c).next(a,l)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{let r=e();return r instanceof gr?r:gr.resolve(r)}catch(r){return gr.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):gr.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):gr.reject(r)}static resolve(e){return new gr((r,a)=>{r(e)})}static reject(e){return new gr((r,a)=>{a(e)})}static waitFor(e){return new gr((r,a)=>{let l=0,c=0,p=!1;e.forEach(g=>{++l,g.next(()=>{++c,p&&c===l&&r()},b=>a(b))}),p=!0,c===l&&r()})}static or(e){let r=gr.resolve(!1);for(let a of e)r=r.next(l=>l?gr.resolve(l):a());return r}static forEach(e,r){let a=[];return e.forEach((l,c)=>{a.push(r.call(this,l,c))}),this.waitFor(a)}static mapArray(e,r){return new gr((a,l)=>{let c=e.length,p=Array(c),g=0;for(let b=0;b<c;b++){let D=b;r(e[D]).next(H=>{p[D]=H,++g===c&&a(p)},H=>l(H))}})}static doWhile(e,r){return new gr((a,l)=>{let c=()=>{e()===!0?r().next(()=>{c()},l):a()};c()})}}class Vu{static open(e,r,a,l){try{return new Vu(r,e.transaction(l,a))}catch(c){throw new Uu(r,c)}}constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new ks,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Uu(e,r.error)):this.V.resolve()},this.transaction.onerror=a=>{let l=vh(a.target.error);this.V.reject(new Uu(e,l))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Zr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){return new Sd(this.transaction.objectStore(e))}}class Ql{static delete(e){return Zr("SimpleDb","Removing database:",e),$u(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!On())return!1;if(Ql.S())return!0;let e=on(),r=Ql.D(e),a=Uh(e);return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||0<r&&r<10||0<a&&a<4.5)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,r){return e.store(r)}static D(e){let r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(r?r[1].split("_").slice(0,2).join("."):"-1")}constructor(e,r,a){this.name=e,this.version=r,this.F=a,Ql.D(on())===12.2&&_s("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(Zr("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,a)=>{let l=indexedDB.open(this.name,this.version);l.onsuccess=c=>{r(c.target.result)},l.onblocked=()=>{a(new Uu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{let p=c.target.error;p.name==="VersionError"?a(new Cn(Nr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):p.name==="InvalidStateError"?a(new Cn(Nr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p)):a(new Uu(e,p))},l.onupgradeneeded=c=>{Zr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);let p=c.target.result;this.F.O(p,l.transaction,c.oldVersion,this.version).next(()=>{Zr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,a,l){let c=r==="readonly",p=0;for(;;){++p;try{this.db=await this.M(e);let g=Vu.open(this.db,e,c?"readonly":"readwrite",a),b=l(g).next(D=>(g.g(),D)).catch(D=>(g.abort(D),gr.reject(D))).toPromise();return b.catch(()=>{}),await g.m,b}catch(g){let b=g.name!=="FirebaseError"&&p<3;if(Zr("SimpleDb","Transaction failed with error:",g.message,"Retrying:",b),this.close(),!b)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Uh(n){let e=n.match(/Android ([\d.]+)/i);return Number(e?e[1].split(".").slice(0,2).join("."):"-1")}class bd{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $u(this.B.delete())}}class Uu extends Cn{constructor(e,r){super(Nr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Su(n){return n.name==="IndexedDbTransactionError"}class Sd{constructor(e){this.store=e}put(e,r){let a;return r!==void 0?(Zr("SimpleDb","PUT",this.store.name,e,r),a=this.store.put(r,e)):(Zr("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),$u(a)}add(e){return Zr("SimpleDb","ADD",this.store.name,e,e),$u(this.store.add(e))}get(e){return $u(this.store.get(e)).next(r=>(r===void 0&&(r=null),Zr("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Zr("SimpleDb","DELETE",this.store.name,e),$u(this.store.delete(e))}count(){return Zr("SimpleDb","COUNT",this.store.name),$u(this.store.count())}U(e,r){let a=this.options(e,r),l=a.index?this.store.index(a.index):this.store;if(typeof l.getAll=="function"){let c=l.getAll(a.range);return new gr((p,g)=>{c.onerror=b=>{g(b.target.error)},c.onsuccess=b=>{p(b.target.result)}})}{let c=this.cursor(a),p=[];return this.W(c,(g,b)=>{p.push(b)}).next(()=>p)}}G(e,r){let a=this.store.getAll(e,r===null?void 0:r);return new gr((l,c)=>{a.onerror=p=>{c(p.target.error)},a.onsuccess=p=>{l(p.target.result)}})}j(e,r){Zr("SimpleDb","DELETE ALL",this.store.name);let a=this.options(e,r);a.H=!1;let l=this.cursor(a);return this.W(l,(c,p,g)=>g.delete())}J(e,r){let a;r?a=e:(a={},r=e);let l=this.cursor(a);return this.W(l,r)}Y(e){let r=this.cursor({});return new gr((a,l)=>{r.onerror=c=>{l(vh(c.target.error))},r.onsuccess=c=>{let p=c.target.result;p?e(p.primaryKey,p.value).next(g=>{g?p.continue():a()}):a()}})}W(e,r){let a=[];return new gr((l,c)=>{e.onerror=p=>{c(p.target.error)},e.onsuccess=p=>{let g=p.target.result;if(!g)return void l();let b=new bd(g),D=r(g.primaryKey,g.value,b);if(D instanceof gr){let H=D.catch(te=>(b.done(),gr.reject(te)));a.push(H)}b.isDone?l():b.K===null?g.continue():g.continue(b.K)}}).next(()=>gr.waitFor(a))}options(e,r){let a;return e!==void 0&&(typeof e=="string"?a=e:r=e),{index:a,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){let a=this.store.index(e.index);return e.H?a.openKeyCursor(e.range,r):a.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function $u(n){return new gr((e,r)=>{n.onsuccess=a=>{e(a.target.result)},n.onerror=a=>{r(vh(a.target.error))}})}let gc=!1;function vh(n){let e=Ql.D(on());if(e>=12.2&&e<13){let r="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(r)>=0){let a=new Cn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gc||(gc=!0,setTimeout(()=>{throw a},0)),a}}return n}class Mc{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Zr("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Zr("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Su(r)?Zr("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Ao(r)}await this.X(6e4)})}}class Ed{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){let a=new Set,l=r,c=!0;return gr.doWhile(()=>c===!0&&l>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(p!==null&&!a.has(p))return Zr("IndexBackfiller",`Processing collection: ${p}`),this.ne(e,p,l).next(g=>{l-=g,a.add(p)});c=!1})).next(()=>r-l)}ne(e,r,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(l=>this.localStore.localDocuments.getNextDocuments(e,r,l,a).next(c=>{let p=c.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.re(l,c)).next(g=>(Zr("IndexBackfiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,r,g))).next(()=>p.size)}))}re(e,r){let a=e;return r.changes.forEach((l,c)=>{let p=mc(c);yh(p,a)>0&&(a=p)}),new Sl(a.readTime,a.documentKey,Math.max(r.batchId,e.largestBatchId))}}class oo{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=a=>this.ie(a),this.se=a=>r.writeSequenceNumber(a))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}function Vp(n){return n==null}function th(n){return n===0&&1/n==-1/0}function Qf(n){return typeof n=="number"&&Number.isInteger(n)&&!th(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Fo(n){let e="";for(let r=0;r<n.length;r++)e.length>0&&(e+=""),e=function(a,l){let c=l,p=a.length;for(let g=0;g<p;g++){let b=a.charAt(g);switch(b){case"\0":c+="";break;case"":c+="";break;default:c+=b}}return c}(n.get(r),e);return e+""}function su(n){let e=n.length;if(e>=2||_r(),e===2)return n.charAt(0)===""&&n.charAt(1)===""||_r(),La.emptyPath();let r=e-2,a=[],l="";for(let c=0;c<e;){let p=n.indexOf("",c);switch((p<0||p>r)&&_r(),n.charAt(p+1)){case"":let g,b=n.substring(c,p);l.length===0?g=b:(l+=b,g=l,l=""),a.push(g);break;case"":l+=n.substring(c,p)+"\0";break;case"":l+=n.substring(c,p+1);break;default:_r()}c=p+2}return new La(a)}oo.oe=-1;let Pl=["userId","batchId"],Eu={},Lc=["prefixPath","collectionGroup","readTime","documentId"],jc=["prefixPath","collectionGroup","documentId"],wh=["collectionGroup","readTime","prefixPath","documentId"],bh=["canonicalId","targetId"],Up=["targetId","path"],of=["path","targetId"],Yf=["collectionId","parent"],_d=["indexId","uid"],$h=["uid","sequenceNumber"],Sh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lf=["indexId","uid","orderedDocumentKey"],Xf=["userId","collectionPath","documentId"],El=["userId","collectionPath","largestBatchId"],Bh=["userId","collectionGroup","largestBatchId"],qh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sc=[...qh,"documentOverlays"],Bu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rh=[...Bu,"indexConfiguration","indexState","indexEntries"],qo=[...rh,"globals"];class uf extends Dc{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function So(n,e){return Ql.C(n._e,e)}function Eh(n){let e=0;for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&e++;return e}function _h(n,e){for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&e(r,n[r])}function au(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class oa{constructor(e,r){this.comparator=e,this.root=r||ja.EMPTY}insert(e,r){return new oa(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ja.BLACK,null,null))}remove(e){return new oa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ja.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){let a=this.comparator(e,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){let l=this.comparator(e,a.key);if(l===0)return r+a.left.size;l<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){let e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,r,a,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=r?a(e.key,r):1,r&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ja{constructor(e,r,a,l,c){this.key=e,this.value=r,this.color=a??ja.RED,this.left=l??ja.EMPTY,this.right=c??ja.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,l,c){return new ja(e??this.key,r??this.value,a??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let l=this,c=a(e,l.key);return(l=c<0?l.copy(null,null,null,l.left.insert(e,r,a),null):c===0?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(e,r,a))).fixUp()}removeMin(){if(this.left.isEmpty())return ja.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,r){let a,l=this;if(0>r(e,l.key))l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),r(e,l.key)===0){if(l.right.isEmpty())return ja.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,ja.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,ja.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _r();let e=this.left.check();if(e!==this.right.check())throw _r();return e+(this.isRed()?0:1)}}ja.EMPTY=null,ja.RED=!0,ja.BLACK=!1,ja.EMPTY=new class{constructor(){this.size=0}get key(){throw _r()}get value(){throw _r()}get color(){throw _r()}get left(){throw _r()}get right(){throw _r()}copy(n,e,r,a,l){return this}insert(n,e,r){return new ja(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ha{constructor(e){this.comparator=e,this.data=new oa(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){let a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){let l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;r(l.key)}}forEachWhile(e,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){let r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new yc(this.data.getIterator())}getIteratorFrom(e){return new yc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof ha)||this.size!==e.size)return!1;let r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){let l=r.getNext().key,c=a.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(r=>{e.push(r)}),e}toString(){let e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){let r=new ha(this.comparator);return r.data=e,r}}class yc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vc(n){return n.hasNext()?n.getNext():void 0}class hl{constructor(e){this.fields=e,e.sort(ao.comparator)}static empty(){return new hl([])}unionWith(e){let r=new ha(ao.comparator);for(let a of this.fields)r=r.add(a);for(let a of e)r=r.add(a);return new hl(r.toArray())}covers(e){for(let r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Zc(this.fields,e.fields,(r,a)=>r.isEqual(a))}}class nh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fa{constructor(e){this.binaryString=e}static fromBase64String(e){return new Fa(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new nh("Invalid base64 string: "+a):a}}(e))}static fromUint8Array(e){return new Fa(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){let r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fa.EMPTY_BYTE_STRING=new Fa("");let Id=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qu(n){if(n||_r(),typeof n=="string"){let e=0,r=Id.exec(n);if(r||_r(),r[1]){let a=r[1];e=Number(a=(a+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(n).getTime()/1e3),nanos:e}}return{seconds:Wa(n.seconds),nanos:Wa(n.nanos)}}function Wa(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lo(n){return typeof n=="string"?Fa.fromBase64String(n):Fa.fromUint8Array(n)}function No(n){var e,r;return((r=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function zh(n){let e=n.mapValue.fields.__previous_value__;return No(e)?zh(e):e}function ou(n){let e=qu(n.mapValue.fields.__local_write_time__.timestampValue);return new bo(e.seconds,e.nanos)}class cf{constructor(e,r,a,l,c,p,g,b,D){this.databaseId=e,this.appId=r,this.persistenceKey=a,this.host=l,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=g,this.longPollingOptions=b,this.useFetchStreams=D}}class dl{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new dl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof dl&&e.projectId===this.projectId&&e.database===this.database}}let _u={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gh={nullValue:"NULL_VALUE"};function Vc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?No(n)?4:qp(n)?9007199254740991:Bp(n)?10:11:_r()}function Yl(n,e){if(n===e)return!0;let r=Vc(n);if(r!==Vc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ou(n).isEqual(ou(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;let c=qu(a.timestampValue),p=qu(l.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return lo(n.bytesValue).isEqual(lo(e.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return Wa(n.geoPointValue.latitude)===Wa(e.geoPointValue.latitude)&&Wa(n.geoPointValue.longitude)===Wa(e.geoPointValue.longitude);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Wa(a.integerValue)===Wa(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){let c=Wa(a.doubleValue),p=Wa(l.doubleValue);return c===p?th(c)===th(p):isNaN(c)&&isNaN(p)}return!1}(n,e);case 9:return Zc(n.arrayValue.values||[],e.arrayValue.values||[],Yl);case 10:case 11:return function(a,l){let c=a.mapValue.fields||{},p=l.mapValue.fields||{};if(Eh(c)!==Eh(p))return!1;for(let g in c)if(c.hasOwnProperty(g)&&(p[g]===void 0||!Yl(c[g],p[g])))return!1;return!0}(n,e);default:return _r()}}function Ih(n,e){return(n.values||[]).find(r=>Yl(r,e))!==void 0}function wc(n,e){if(n===e)return 0;let r=Vc(n),a=Vc(e);if(r!==a)return Bi(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return Bi(n.booleanValue,e.booleanValue);case 2:return function(l,c){let p=Wa(l.integerValue||l.doubleValue),g=Wa(c.integerValue||c.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(n,e);case 3:return ac(n.timestampValue,e.timestampValue);case 4:return ac(ou(n),ou(e));case 5:return Bi(n.stringValue,e.stringValue);case 6:return function(l,c){let p=lo(l),g=lo(c);return p.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){let p=l.split("/"),g=c.split("/");for(let b=0;b<p.length&&b<g.length;b++){let D=Bi(p[b],g[b]);if(D!==0)return D}return Bi(p.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){let p=Bi(Wa(l.latitude),Wa(c.latitude));return p!==0?p:Bi(Wa(l.longitude),Wa(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return bc(n.arrayValue,e.arrayValue);case 10:return function(l,c){var p,g,b,D;let H=l.fields||{},te=c.fields||{},ie=(p=H.value)===null||p===void 0?void 0:p.arrayValue,ye=(g=te.value)===null||g===void 0?void 0:g.arrayValue,je=Bi(((b=ie?.values)===null||b===void 0?void 0:b.length)||0,((D=ye?.values)===null||D===void 0?void 0:D.length)||0);return je!==0?je:bc(ie,ye)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===_u.mapValue&&c===_u.mapValue)return 0;if(l===_u.mapValue)return 1;if(c===_u.mapValue)return-1;let p=l.fields||{},g=Object.keys(p),b=c.fields||{},D=Object.keys(b);g.sort(),D.sort();for(let H=0;H<g.length&&H<D.length;++H){let te=Bi(g[H],D[H]);if(te!==0)return te;let ie=wc(p[g[H]],b[D[H]]);if(ie!==0)return ie}return Bi(g.length,D.length)}(n.mapValue,e.mapValue);default:throw _r()}}function ac(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Bi(n,e);let r=qu(n),a=qu(e),l=Bi(r.seconds,a.seconds);return l!==0?l:Bi(r.nanos,a.nanos)}function bc(n,e){let r=n.values||[],a=e.values||[];for(let l=0;l<r.length&&l<a.length;++l){let c=wc(r[l],a[l]);if(c)return c}return Bi(r.length,a.length)}function zu(n){var e,r;return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(a){let l=qu(a);return`time(${l.seconds},${l.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?lo(n.bytesValue).toBase64():"referenceValue"in n?(e=n.referenceValue,Xn.fromName(e).toString()):"geoPointValue"in n?(r=n.geoPointValue,`geo(${r.latitude},${r.longitude})`):"arrayValue"in n?function(a){let l="[",c=!0;for(let p of a.values||[])c?c=!1:l+=",",l+=zu(p);return l+"]"}(n.arrayValue):"mapValue"in n?function(a){let l=Object.keys(a.fields||{}).sort(),c="{",p=!0;for(let g of l)p?p=!1:c+=",",c+=`${g}:${zu(a.fields[g])}`;return c+"}"}(n.mapValue):_r()}function Ra(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ih(n){return!!n&&"integerValue"in n}function Zf(n){return!!n&&"arrayValue"in n}function hf(n){return!!n&&"nullValue"in n}function gv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $p(n){return!!n&&"mapValue"in n}function Bp(n){var e,r;return((r=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Td(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _h(n.mapValue.fields,(r,a)=>e.mapValue.fields[r]=Td(a)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let r=0;r<(n.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Td(n.arrayValue.values[r]);return e}return Object.assign({},n)}function qp(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}let yv={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function ay(n,e){let r=wc(n.value,e.value);return r!==0?r:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ep(n,e){let r=wc(n.value,e.value);return r!==0?r:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class oc{constructor(e){this.value=e}static empty(){return new oc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let a=0;a<e.length-1;++a)if(!$p(r=(r.mapValue.fields||{})[e.get(a)]))return null;return(r=(r.mapValue.fields||{})[e.lastSegment()])||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Td(r)}setAll(e){let r=ao.emptyPath(),a={},l=[];e.forEach((p,g)=>{if(!r.isImmediateParentOf(g)){let b=this.getFieldsMap(r);this.applyChanges(b,a,l),a={},l=[],r=g.popLast()}p?a[g.lastSegment()]=Td(p):l.push(g.lastSegment())});let c=this.getFieldsMap(r);this.applyChanges(c,a,l)}delete(e){let r=this.field(e.popLast());$p(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Yl(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=r.mapValue.fields[e.get(a)];$p(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[e.get(a)]=l),r=l}return r.mapValue.fields}applyChanges(e,r,a){for(let l of(_h(r,(c,p)=>e[c]=p),a))delete e[l]}clone(){return new oc(Td(this.value))}}class Eo{constructor(e,r,a,l,c,p,g){this.key=e,this.documentType=r,this.version=a,this.readTime=l,this.createTime=c,this.data=p,this.documentState=g}static newInvalidDocument(e){return new Eo(e,0,Xi.min(),Xi.min(),Xi.min(),oc.empty(),0)}static newFoundDocument(e,r,a,l){return new Eo(e,1,r,Xi.min(),a,l,0)}static newNoDocument(e,r){return new Eo(e,2,r,Xi.min(),Xi.min(),oc.empty(),0)}static newUnknownDocument(e,r){return new Eo(e,3,r,Xi.min(),Xi.min(),oc.empty(),2)}convertToFoundDocument(e,r){return this.createTime.isEqual(Xi.min())&&(this.documentType===2||this.documentType===0)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Eo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Eo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Uc{constructor(e,r){this.position=e,this.inclusive=r}}function vv(n,e,r){let a=0;for(let l=0;l<n.position.length;l++){let c=e[l],p=n.position[l];if(a=c.field.isKeyField()?Xn.comparator(Xn.fromName(p.referenceValue),r.key):wc(p,r.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function Ym(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let r=0;r<n.position.length;r++)if(!Yl(n.position[r],e.position[r]))return!1;return!0}class zp{constructor(e,r="asc"){this.field=e,this.dir=r}}class oy{}class da extends oy{constructor(e,r,a){super(),this.field=e,this.op=r,this.value=a}static create(e,r,a){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,a):new ly(e,r,a):r==="array-contains"?new bv(e,a):r==="in"?new rp(e,a):r==="not-in"?new np(e,a):r==="array-contains-any"?new Th(e,a):new da(e,r,a)}static createKeyFieldInFilter(e,r,a){return r==="in"?new uy(e,a):new wv(e,a)}matches(e){let r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(wc(r,this.value)):r!==null&&Vc(this.value)===Vc(r)&&this.matchesComparison(wc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _r()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class to extends oy{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new to(e,r)}matches(e){return xd(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xd(n){return n.op==="and"}function Gp(n){return n.op==="or"}function tp(n){return df(n)&&xd(n)}function df(n){for(let e of n.filters)if(e instanceof to)return!1;return!0}function Xm(n,e){let r=n.filters.concat(e);return to.create(r,n.op)}class ly extends da{constructor(e,r,a){super(e,r,a),this.key=Xn.fromName(a.referenceValue)}matches(e){let r=Xn.comparator(e.key,this.key);return this.matchesComparison(r)}}class uy extends da{constructor(e,r){super(e,"in",r),this.keys=cy("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class wv extends da{constructor(e,r){super(e,"not-in",r),this.keys=cy("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function cy(n,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(a=>Xn.fromName(a.referenceValue))}class bv extends da{constructor(e,r){super(e,"array-contains",r)}matches(e){let r=e.data.field(this.field);return Zf(r)&&Ih(r.arrayValue,this.value)}}class rp extends da{constructor(e,r){super(e,"in",r)}matches(e){let r=e.data.field(this.field);return r!==null&&Ih(this.value.arrayValue,r)}}class np extends da{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let r=e.data.field(this.field);return r!==null&&!Ih(this.value.arrayValue,r)}}class Th extends da{constructor(e,r){super(e,"array-contains-any",r)}matches(e){let r=e.data.field(this.field);return!(!Zf(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Ih(this.value.arrayValue,a))}}class Hp{constructor(e,r=null,a=[],l=[],c=null,p=null,g=null){this.path=e,this.collectionGroup=r,this.orderBy=a,this.filters=l,this.limit=c,this.startAt=p,this.endAt=g,this.ue=null}}function ff(n,e=null,r=[],a=[],l=null,c=null,p=null){return new Hp(n,e,r,a,l,c,p)}function sh(n){if(n.ue===null){let e=n.path.canonicalString();n.collectionGroup!==null&&(e+="|cg:"+n.collectionGroup),e+="|f:"+n.filters.map(r=>function a(l){if(l instanceof da)return l.field.canonicalString()+l.op.toString()+zu(l.value);if(tp(l))return l.filters.map(c=>a(c)).join(",");{let c=l.filters.map(p=>a(p)).join(",");return`${l.op}(${c})`}}(r)).join(",")+"|ob:"+n.orderBy.map(r=>r.field.canonicalString()+r.dir).join(","),n.limit==null||(e+="|l:"+n.limit),n.startAt&&(e+="|lb:"+(n.startAt.inclusive?"b:":"a:")+n.startAt.position.map(r=>zu(r)).join(",")),n.endAt&&(e+="|ub:"+(n.endAt.inclusive?"a:":"b:")+n.endAt.position.map(r=>zu(r)).join(",")),n.ue=e}return n.ue}function ah(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let l=0;l<n.orderBy.length;l++){var r,a;if(r=n.orderBy[l],a=e.orderBy[l],!(r.dir===a.dir&&r.field.isEqual(a.field)))return!1}if(n.filters.length!==e.filters.length)return!1;for(let l=0;l<n.filters.length;l++)if(!function c(p,g){return p instanceof da?g instanceof da&&p.op===g.op&&p.field.isEqual(g.field)&&Yl(p.value,g.value):p instanceof to?g instanceof to&&p.op===g.op&&p.filters.length===g.filters.length&&p.filters.reduce((b,D,H)=>b&&c(D,g.filters[H]),!0):void _r()}(n.filters[l],e.filters[l]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ym(n.startAt,e.startAt)&&Ym(n.endAt,e.endAt)}function Kp(n){return Xn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zm(n,e){return n.filters.filter(r=>r instanceof da&&r.field.isEqual(e))}function hy(n,e,r){let a=Gh,l=!0;for(let p of Zm(n,e)){let g=Gh,b=!0;switch(p.op){case"<":case"<=":var c;g="nullValue"in(c=p.value)?Gh:"booleanValue"in c?{booleanValue:!1}:"integerValue"in c||"doubleValue"in c?{doubleValue:NaN}:"timestampValue"in c?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in c?{stringValue:""}:"bytesValue"in c?{bytesValue:""}:"referenceValue"in c?Ra(dl.empty(),Xn.empty()):"geoPointValue"in c?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in c?{arrayValue:{}}:"mapValue"in c?Bp(c)?yv:{mapValue:{}}:_r();break;case"==":case"in":case">=":g=p.value;break;case">":g=p.value,b=!1;break;case"!=":case"not-in":g=Gh}0>ay({value:a,inclusive:l},{value:g,inclusive:b})&&(a=g,l=b)}if(r!==null){for(let p=0;p<n.orderBy.length;++p)if(n.orderBy[p].field.isEqual(e)){let g=r.position[p];0>ay({value:a,inclusive:l},{value:g,inclusive:r.inclusive})&&(a=g,l=r.inclusive);break}}return{value:a,inclusive:l}}function eg(n,e,r){let a=_u,l=!0;for(let p of Zm(n,e)){let g=_u,b=!0;switch(p.op){case">=":case">":var c;g="nullValue"in(c=p.value)?{booleanValue:!1}:"booleanValue"in c?{doubleValue:NaN}:"integerValue"in c||"doubleValue"in c?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in c?{stringValue:""}:"stringValue"in c?{bytesValue:""}:"bytesValue"in c?Ra(dl.empty(),Xn.empty()):"referenceValue"in c?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in c?{arrayValue:{}}:"arrayValue"in c?yv:"mapValue"in c?Bp(c)?{mapValue:{}}:_u:_r(),b=!1;break;case"==":case"in":case"<=":g=p.value;break;case"<":g=p.value,b=!1;break;case"!=":case"not-in":g=_u}ep({value:a,inclusive:l},{value:g,inclusive:b})>0&&(a=g,l=b)}if(r!==null){for(let p=0;p<n.orderBy.length;++p)if(n.orderBy[p].field.isEqual(e)){let g=r.position[p];ep({value:a,inclusive:l},{value:g,inclusive:r.inclusive})>0&&(a=g,l=r.inclusive);break}}return{value:a,inclusive:l}}class xh{constructor(e,r=null,a=[],l=[],c=null,p="F",g=null,b=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=l,this.limit=c,this.limitType=p,this.startAt=g,this.endAt=b,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dy(n){return new xh(n)}function fy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Al(n){return n.collectionGroup!==null}function Wp(n){if(n.ce===null){let e;n.ce=[];let r=new Set;for(let l of n.explicitOrderBy)n.ce.push(l),r.add(l.field.canonicalString());let a=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";(e=new ha(ao.comparator),n.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(e=e.add(c.field))})}),e).forEach(l=>{r.has(l.canonicalString())||l.isKeyField()||n.ce.push(new zp(l,a))}),r.has(ao.keyField().canonicalString())||n.ce.push(new zp(ao.keyField(),a))}return n.ce}function $c(n){return n.le||(n.le=function(e,r){if(e.limitType==="F")return ff(e.path,e.collectionGroup,r,e.filters,e.limit,e.startAt,e.endAt);{r=r.map(c=>{let p=c.dir==="desc"?"asc":"desc";return new zp(c.field,p)});let a=e.endAt?new Uc(e.endAt.position,e.endAt.inclusive):null,l=e.startAt?new Uc(e.startAt.position,e.startAt.inclusive):null;return ff(e.path,e.collectionGroup,r,e.filters,e.limit,a,l)}}(n,Wp(n))),n.le}function Jp(n,e){let r=n.filters.concat([e]);return new xh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),r,n.limit,n.limitType,n.startAt,n.endAt)}function Ch(n,e,r){return new xh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,r,n.startAt,n.endAt)}function pf(n,e){return ah($c(n),$c(e))&&n.limitType===e.limitType}function mf(n){return`${sh($c(n))}|lt:${n.limitType}`}function ip(n){var e;let r;return`Query(target=${r=(e=$c(n)).path.canonicalString(),e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(a=>function l(c){return c instanceof da?`${c.field.canonicalString()} ${c.op} ${zu(c.value)}`:c instanceof to?c.op.toString()+" {"+c.getFilters().map(l).join(" ,")+"}":"Filter"}(a)).join(", ")}]`),e.limit==null||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(a=>`${a.field.canonicalString()} (${a.dir})`).join(", ")}]`),e.startAt&&(r+=", startAt: "+(e.startAt.inclusive?"b:":"a:")+e.startAt.position.map(a=>zu(a)).join(",")),e.endAt&&(r+=", endAt: "+(e.endAt.inclusive?"a:":"b:")+e.endAt.position.map(a=>zu(a)).join(",")),`Target(${r})`}; limitType=${n.limitType})`}function tg(n,e){return e.isFoundDocument()&&function(r,a){let l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Xn.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(n,e)&&function(r,a){for(let l of Wp(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(r,a){for(let l of r.filters)if(!l.matches(a))return!1;return!0}(n,e)&&(!n.startAt||!!function(r,a,l){let c=vv(r,a,l);return r.inclusive?c<=0:c<0}(n.startAt,Wp(n),e))&&(!n.endAt||!!function(r,a,l){let c=vv(r,a,l);return r.inclusive?c>=0:c>0}(n.endAt,Wp(n),e))}function rg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Sv(n){return(e,r)=>{let a=!1;for(let l of Wp(n)){let c=function(p,g,b){let D=p.field.isKeyField()?Xn.comparator(g.key,b.key):function(H,te,ie){let ye=te.data.field(H),je=ie.data.field(H);return ye!==null&&je!==null?wc(ye,je):_r()}(p.field,g,b);switch(p.dir){case"asc":return D;case"desc":return-1*D;default:return _r()}}(l,e,r);if(c!==0)return c;a=a||l.field.isKeyField()}return 0}}class Hh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){let r=this.mapKeyFn(e),a=this.inner[r];if(a!==void 0){for(let[l,c]of a)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,r){let a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,r]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,r]);l.push([e,r]),this.innerSize++}delete(e){let r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[r]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){_h(this.inner,(r,a)=>{for(let[l,c]of a)e(l,c)})}isEmpty(){return au(this.inner)}size(){return this.innerSize}}let lu=new oa(Xn.comparator),gf=new oa(Xn.comparator);function Cd(...n){let e=gf;for(let r of n)e=e.insert(r.key,r);return e}function yf(n){let e=gf;return n.forEach((r,a)=>e=e.insert(r,a.overlayedDocument)),e}function uu(){return new Hh(n=>n.toString(),(n,e)=>n.isEqual(e))}let py=new oa(Xn.comparator),ng=new ha(Xn.comparator);function Ys(...n){let e=ng;for(let r of n)e=e.add(r);return e}let kh=new ha(Bi);function ig(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(e)?"-0":e}}function Qp(n){return{integerValue:""+n}}function vf(n,e){return Qf(e)?Qp(e):ig(n,e)}class Yp{constructor(){this._=void 0}}function wf(n,e){return n instanceof bf?ih(e)||e&&"doubleValue"in e?e:{integerValue:0}:null}class Gu extends Yp{}class zo extends Yp{constructor(e){super(),this.elements=e}}function Rh(n,e){let r=_v(e);for(let a of n.elements)r.some(l=>Yl(l,a))||r.push(a);return{arrayValue:{values:r}}}class kd extends Yp{constructor(e){super(),this.elements=e}}function Ev(n,e){let r=_v(e);for(let a of n.elements)r=r.filter(l=>!Yl(l,a));return{arrayValue:{values:r}}}class bf extends Yp{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Xp(n){return Wa(n.integerValue||n.doubleValue)}function _v(n){return Zf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Sf{constructor(e,r){this.field=e,this.transform=r}}class Rd{constructor(e,r){this.version=e,this.transformResults=r}}class Xl{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Xl}static exists(e){return new Xl(void 0,e)}static updateTime(e){return new Xl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Pd{}function sg(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new og(n.key,Xl.none()):new Ad(n.key,n.data,Xl.none());{let r=n.data,a=oc.empty(),l=new ha(ao.comparator);for(let c of e.fields)if(!l.has(c)){let p=r.field(c);p===null&&c.length>1&&(c=c.popLast(),p=r.field(c)),p===null?a.delete(c):a.set(c,p),l=l.add(c)}return new Nd(n.key,a,new hl(l.toArray()),Xl.none())}}function Ph(n,e,r,a){return n instanceof Ad?function(l,c,p,g){if(!Iu(l.precondition,c))return p;let b=l.value.clone(),D=ag(l.fieldTransforms,g,c);return b.setAll(D),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),null}(n,e,r,a):n instanceof Nd?function(l,c,p,g){if(!Iu(l.precondition,c))return p;let b=ag(l.fieldTransforms,g,c),D=c.data;return D.setAll(Zp(l)),D.setAll(b),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(H=>H.field))}(n,e,r,a):Iu(n.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):r}function my(n,e){var r,a;return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=n.fieldTransforms,a=e.fieldTransforms,!!(r===void 0&&a===void 0||!(!r||!a)&&Zc(r,a,(l,c)=>{var p,g;return l.field.isEqual(c.field)&&(p=l.transform,g=c.transform,p instanceof zo&&g instanceof zo||p instanceof kd&&g instanceof kd?Zc(p.elements,g.elements,Yl):p instanceof bf&&g instanceof bf?Yl(p.Pe,g.Pe):p instanceof Gu&&g instanceof Gu)})))&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ad extends Pd{constructor(e,r,a,l=[]){super(),this.key=e,this.value=r,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Nd extends Pd{constructor(e,r,a,l,c=[]){super(),this.key=e,this.data=r,this.fieldMask=a,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Zp(n){let e=new Map;return n.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let a=n.data.field(r);e.set(r,a)}}),e}function gy(n,e,r){var a;let l=new Map;n.length===r.length||_r();for(let c=0;c<r.length;c++){let p=n[c],g=p.transform,b=e.data.field(p.field);l.set(p.field,(a=r[c],g instanceof zo?Rh(g,b):g instanceof kd?Ev(g,b):a))}return l}function ag(n,e,r){let a=new Map;for(let l of n){let c=l.transform,p=r.data.field(l.field);a.set(l.field,c instanceof Gu?function(g,b){let D={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:g.seconds,nanos:g.nanoseconds}}}};return b&&No(b)&&(b=zh(b)),b&&(D.fields.__previous_value__=b),{mapValue:D}}(e,p):c instanceof zo?Rh(c,p):c instanceof kd?Ev(c,p):function(g,b){let D=wf(g,b),H=Xp(D)+Xp(g.Pe);return ih(D)&&ih(g.Pe)?Qp(H):ig(g.serializer,H)}(c,p))}return a}class og extends Pd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lg extends Pd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class em{constructor(e,r,a,l){this.batchId=e,this.localWriteTime=r,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,r){let a=r.mutationResults;for(let c=0;c<this.mutations.length;c++){let p=this.mutations[c];if(p.key.isEqual(e.key)){var l;l=a[c],p instanceof Ad?function(g,b,D){let H=g.value.clone(),te=gy(g.fieldTransforms,b,D.transformResults);H.setAll(te),b.convertToFoundDocument(D.version,H).setHasCommittedMutations()}(p,e,l):p instanceof Nd?function(g,b,D){if(!Iu(g.precondition,b))return void b.convertToUnknownDocument(D.version);let H=gy(g.fieldTransforms,b,D.transformResults),te=b.data;te.setAll(Zp(g)),te.setAll(H),b.convertToFoundDocument(D.version,te).setHasCommittedMutations()}(p,e,l):function(g,b,D){b.convertToNoDocument(D.version).setHasCommittedMutations()}(0,e,l)}}}applyToLocalView(e,r){for(let a of this.baseMutations)a.key.isEqual(e.key)&&(r=Ph(a,e,r,this.localWriteTime));for(let a of this.mutations)a.key.isEqual(e.key)&&(r=Ph(a,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){let a=uu();return this.mutations.forEach(l=>{let c=e.get(l.key),p=c.overlayedDocument,g=this.applyToLocalView(p,c.mutatedFields),b=sg(p,g=r.has(l.key)?null:g);b!==null&&a.set(l.key,b),p.isValidDocument()||p.convertToNoDocument(Xi.min())}),a}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ys())}isEqual(e){return this.batchId===e.batchId&&Zc(this.mutations,e.mutations,(r,a)=>my(r,a))&&Zc(this.baseMutations,e.baseMutations,(r,a)=>my(r,a))}}class tm{constructor(e,r,a,l){this.batch=e,this.commitVersion=r,this.mutationResults=a,this.docVersions=l}static from(e,r,a){e.mutations.length===a.length||_r();let l=py,c=e.mutations;for(let p=0;p<c.length;p++)l=l.insert(c[p].key,a[p].version);return new tm(e,r,a,l)}}class ug{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Iv{constructor(e,r){this.count=e,this.unchangedNames=r}}function yy(n){if(n===void 0)return _s("GRPC error has no .code"),Nr.UNKNOWN;switch(n){case ze.OK:return Nr.OK;case ze.CANCELLED:return Nr.CANCELLED;case ze.UNKNOWN:return Nr.UNKNOWN;case ze.DEADLINE_EXCEEDED:return Nr.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return Nr.RESOURCE_EXHAUSTED;case ze.INTERNAL:return Nr.INTERNAL;case ze.UNAVAILABLE:return Nr.UNAVAILABLE;case ze.UNAUTHENTICATED:return Nr.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return Nr.INVALID_ARGUMENT;case ze.NOT_FOUND:return Nr.NOT_FOUND;case ze.ALREADY_EXISTS:return Nr.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return Nr.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return Nr.FAILED_PRECONDITION;case ze.ABORTED:return Nr.ABORTED;case ze.OUT_OF_RANGE:return Nr.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return Nr.UNIMPLEMENTED;case ze.DATA_LOSS:return Nr.DATA_LOSS;default:return _r()}}(Ue=ze||(ze={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";let rm=new I([4294967295,4294967295],0);function Tv(n){let e=new TextEncoder().encode(n),r=new x;return r.update(e),new Uint8Array(r.digest())}function xv(n){let e=new DataView(n.buffer),r=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new I([r,a],0),new I([l,c],0)]}class nm{constructor(e,r,a){if(this.bitmap=e,this.padding=r,this.hashCount=a,r<0||r>=8)throw new sp(`Invalid padding: ${r}`);if(a<0||e.length>0&&this.hashCount===0)throw new sp(`Invalid hash count: ${a}`);if(e.length===0&&r!==0)throw new sp(`Invalid padding when bitmap length is 0: ${r}`);this.Te=8*e.length-r,this.Ie=I.fromNumber(this.Te)}Ee(e,r,a){let l=e.add(r.multiply(I.fromNumber(a)));return l.compare(rm)===1&&(l=new I([l.getBits(0),l.getBits(1)],0)),l.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let[r,a]=xv(Tv(e));for(let l=0;l<this.hashCount;l++){let c=this.Ee(r,a,l);if(!this.de(c))return!1}return!0}static create(e,r,a){let l=new nm(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,r);return a.forEach(c=>l.insert(c)),l}insert(e){if(this.Te===0)return;let[r,a]=xv(Tv(e));for(let l=0;l<this.hashCount;l++){let c=this.Ee(r,a,l);this.Ae(c)}}Ae(e){this.bitmap[Math.floor(e/8)]|=1<<e%8}}class sp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class cg{constructor(e,r,a,l,c){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,r,a){let l=new Map;return l.set(e,im.createSynthesizedTargetChangeForCurrentChange(e,r,a)),new cg(Xi.min(),l,new oa(Bi),lu,Ys())}}class im{constructor(e,r,a,l,c){this.resumeToken=e,this.current=r,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,r,a){return new im(a,r,Ys(),Ys(),Ys())}}class Od{constructor(e,r,a,l){this.Re=e,this.removedTargetIds=r,this.key=a,this.Ve=l}}class vy{constructor(e,r){this.targetId=e,this.me=r}}class hg{constructor(e,r,a=Fa.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=r,this.resumeToken=a,this.cause=l}}class Cv{constructor(){this.fe=0,this.ge=Dd(),this.pe=Fa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ys(),r=Ys(),a=Ys();return this.ge.forEach((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:r=r.add(l);break;case 1:a=a.add(l);break;default:_r()}}),new im(this.pe,this.ye,e,r,a)}Ce(){this.we=!1,this.ge=Dd()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,this.fe>=0||_r()}Ne(){this.we=!0,this.ye=!0}}class kv{constructor(e){this.Le=e,this.Be=new Map,this.ke=lu,this.qe=Ef(),this.Qe=Ef(),this.Ke=new oa(Bi)}$e(e){for(let r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(r,e.Ve):this.We(r,e.key,e.Ve);for(let r of e.removedTargetIds)this.We(r,e.key,e.Ve)}Ge(e){this.forEachTarget(e,r=>{let a=this.ze(r);switch(e.state){case 0:this.je(r)&&a.De(e.resumeToken);break;case 1:a.Oe(),a.Se||a.Ce(),a.De(e.resumeToken);break;case 2:a.Oe(),a.Se||this.removeTarget(r);break;case 3:this.je(r)&&(a.Ne(),a.De(e.resumeToken));break;case 4:this.je(r)&&(this.He(r),a.De(e.resumeToken));break;default:_r()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((a,l)=>{this.je(l)&&r(l)})}Je(e){let r=e.targetId,a=e.me.count,l=this.Ye(r);if(l){let c=l.target;if(Kp(c))if(a===0){let p=new Xn(c.path);this.We(r,p,Eo.newNoDocument(p,Xi.min()))}else a===1||_r();else{let p=this.Ze(r);if(p!==a){let g=this.Xe(e),b=g?this.et(g,e,p):1;b!==0&&(this.He(r),this.Ke=this.Ke.insert(r,b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){let r,a,l=e.me.unchangedNames;if(!l||!l.bits)return null;let{bits:{bitmap:c="",padding:p=0},hashCount:g=0}=l;try{r=lo(c).toUint8Array()}catch(b){if(b instanceof nh)return zs("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{a=new nm(r,p,g)}catch(b){return zs(b instanceof sp?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return a.Te===0?null:a}et(e,r,a){return r.me.count===a-this.rt(e,r.targetId)?0:2}rt(e,r){let a=this.Le.getRemoteKeysForTarget(r),l=0;return a.forEach(c=>{let p=this.Le.nt(),g=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.We(r,c,null),l++)}),l}it(e){let r=new Map;this.Be.forEach((c,p)=>{let g=this.Ye(p);if(g){if(c.current&&Kp(g.target)){let b=new Xn(g.target.path);this.st(b).has(p)||this.ot(p,b)||this.We(p,b,Eo.newNoDocument(b,e))}c.be&&(r.set(p,c.ve()),c.Ce())}});let a=Ys();this.Qe.forEach((c,p)=>{let g=!0;p.forEachWhile(b=>{let D=this.Ye(b);return!D||D.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(a=a.add(c))}),this.ke.forEach((c,p)=>p.setReadTime(e));let l=new cg(e,r,this.Ke,this.ke,a);return this.ke=lu,this.qe=Ef(),this.Qe=Ef(),this.Ke=new oa(Bi),l}Ue(e,r){if(!this.je(e))return;let a=this.ot(e,r.key)?2:0;this.ze(e).Fe(r.key,a),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e)),this.Qe=this.Qe.insert(r.key,this._t(r.key).add(e))}We(e,r,a){if(!this.je(e))return;let l=this.ze(e);this.ot(e,r)?l.Fe(r,1):l.Me(r),this.Qe=this.Qe.insert(r,this._t(r).delete(e)),this.Qe=this.Qe.insert(r,this._t(r).add(e)),a&&(this.ke=this.ke.insert(r,a))}removeTarget(e){this.Be.delete(e)}Ze(e){let r=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let r=this.Be.get(e);return r||(r=new Cv,this.Be.set(e,r)),r}_t(e){let r=this.Qe.get(e);return r||(r=new ha(Bi),this.Qe=this.Qe.insert(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new ha(Bi),this.qe=this.qe.insert(e,r)),r}je(e){let r=this.Ye(e)!==null;return r||Zr("WatchChangeAggregator","Detected inactive target",e),r}Ye(e){let r=this.Be.get(e);return r&&r.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Cv),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.We(e,r,null)})}ot(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Ef(){return new oa(Xn.comparator)}function Dd(){return new oa(Xn.comparator)}let _f={asc:"ASCENDING",desc:"DESCENDING"},wy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dg={and:"AND",or:"OR"};class fg{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Ah(n,e){return n.useProto3Json||e==null?e:{value:e}}function If(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function by(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Tu(n){return n||_r(),Xi.fromTimestamp(function(e){let r=qu(e);return new bo(r.seconds,r.nanos)}(n))}function Sy(n,e){return Ey(n,e).canonicalString()}function Ey(n,e){let r=new La(["projects",n.projectId,"databases",n.database]).child("documents");return e===void 0?r:r.child(e)}function F0(n){let e=La.fromString(n);return X(e)||_r(),e}function sm(n,e){return Sy(n.databaseId,e.path)}function Kh(n,e){let r=F0(e);if(r.get(1)!==n.databaseId.projectId)throw new Cn(Nr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+n.databaseId.projectId);if(r.get(3)!==n.databaseId.database)throw new Cn(Nr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+n.databaseId.database);return new Xn(am(r))}function V0(n,e){return Sy(n.databaseId,e)}function U0(n){let e=F0(n);return e.length===4?La.emptyPath():am(e)}function Rv(n){return new La(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function am(n){return n.length>4&&n.get(4)==="documents"||_r(),n.popFirst(5)}function _y(n,e,r){return{name:sm(n,e),fields:r.value.mapValue.fields}}function ap(n,e,r){let a=Kh(n,e.name),l=Tu(e.updateTime),c=e.createTime?Tu(e.createTime):Xi.min(),p=new oc({mapValue:{fields:e.fields}}),g=Eo.newFoundDocument(a,l,c,p);return r&&g.setHasCommittedMutations(),r?g.setHasCommittedMutations():g}function m(n,e){var r;let a;if(e instanceof Ad)a={update:_y(n,e.key,e.value)};else if(e instanceof og)a={delete:sm(n,e.key)};else if(e instanceof Nd)a={update:_y(n,e.key,e.data),updateMask:function(l){let c=[];return l.fields.forEach(p=>c.push(p.canonicalString())),{fieldPaths:c}}(e.fieldMask)};else{if(!(e instanceof lg))return _r();a={verify:sm(n,e.key)}}return e.fieldTransforms.length>0&&(a.updateTransforms=e.fieldTransforms.map(l=>function(c,p){let g=p.transform;if(g instanceof Gu)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof zo)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof kd)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof bf)return{fieldPath:p.field.canonicalString(),increment:g.Pe};throw _r()}(0,l))),e.precondition.isNone||(a.currentDocument=(r=e.precondition).updateTime!==void 0?{updateTime:If(n,r.updateTime.toTimestamp())}:r.exists!==void 0?{exists:r.exists}:_r()),a}function i(n,e){var r;let a=e.currentDocument?(r=e.currentDocument).updateTime!==void 0?Xl.updateTime(Tu(r.updateTime)):r.exists!==void 0?Xl.exists(r.exists):Xl.none():Xl.none(),l=e.updateTransforms?e.updateTransforms.map(c=>{let p;return p=null,"setToServerValue"in c?(c.setToServerValue==="REQUEST_TIME"||_r(),p=new Gu):"appendMissingElements"in c?p=new zo(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new kd(c.removeAllFromArray.values||[]):"increment"in c?p=new bf(n,c.increment):_r(),new Sf(ao.fromServerFormat(c.fieldPath),p)}):[];if(e.update){e.update.name;let c=Kh(n,e.update.name),p=new oc({mapValue:{fields:e.update.fields}});return e.updateMask?new Nd(c,p,new hl((e.updateMask.fieldPaths||[]).map(g=>ao.fromServerFormat(g))),a,l):new Ad(c,p,a,l)}return e.delete?new og(Kh(n,e.delete),a):e.verify?new lg(Kh(n,e.verify),a):_r()}function o(n,e){return{documents:[V0(n,e.path)]}}function d(n,e){var r,a;let l,c={structuredQuery:{}},p=e.path;e.collectionGroup!==null?(l=p,c.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=p.popLast(),c.structuredQuery.from=[{collectionId:p.lastSegment()}]),c.parent=V0(n,l);let g=function(H){if(H.length!==0)return function te(ie){return ie instanceof da?function(ye){if(ye.op==="=="){if(gv(ye.value))return{unaryFilter:{field:_(ye.field),op:"IS_NAN"}};if(hf(ye.value))return{unaryFilter:{field:_(ye.field),op:"IS_NULL"}}}else if(ye.op==="!="){if(gv(ye.value))return{unaryFilter:{field:_(ye.field),op:"IS_NOT_NAN"}};if(hf(ye.value))return{unaryFilter:{field:_(ye.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_(ye.field),op:wy[ye.op],value:ye.value}}}(ie):ie instanceof to?function(ye){let je=ye.getFilters().map(Re=>te(Re));return je.length===1?je[0]:{compositeFilter:{op:dg[ye.op],filters:je}}}(ie):_r()}(to.create(H,"and"))}(e.filters);g&&(c.structuredQuery.where=g);let b=function(H){if(H.length!==0)return H.map(te=>({field:_(te.field),direction:_f[te.dir]}))}(e.orderBy);b&&(c.structuredQuery.orderBy=b);let D=Ah(n,e.limit);return D!==null&&(c.structuredQuery.limit=D),e.startAt&&(c.structuredQuery.startAt={before:(r=e.startAt).inclusive,values:r.position}),e.endAt&&(c.structuredQuery.endAt={before:!(a=e.endAt).inclusive,values:a.position}),{ct:c,parent:l}}function v(n){var e;let r,a=U0(n.parent),l=n.structuredQuery,c=l.from?l.from.length:0,p=null;if(c>0){c===1||_r();let ie=l.from[0];ie.allDescendants?p=ie.collectionId:a=a.child(ie.collectionId)}let g=[];l.where&&(g=function(ie){let ye=function je(Re){return Re.unaryFilter!==void 0?function(Ye){switch(Ye.unaryFilter.op){case"IS_NAN":let ht=O(Ye.unaryFilter.field);return da.create(ht,"==",{doubleValue:NaN});case"IS_NULL":let Ze=O(Ye.unaryFilter.field);return da.create(Ze,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let ke=O(Ye.unaryFilter.field);return da.create(ke,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let Ie=O(Ye.unaryFilter.field);return da.create(Ie,"!=",{nullValue:"NULL_VALUE"});default:return _r()}}(Re):Re.fieldFilter!==void 0?da.create(O(Re.fieldFilter.field),function(Ye){switch(Ye){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _r()}}(Re.fieldFilter.op),Re.fieldFilter.value):Re.compositeFilter!==void 0?to.create(Re.compositeFilter.filters.map(Ye=>je(Ye)),function(Ye){switch(Ye){case"AND":return"and";case"OR":return"or";default:return _r()}}(Re.compositeFilter.op)):_r()}(ie);return ye instanceof to&&tp(ye)?ye.getFilters():[ye]}(l.where));let b=[];l.orderBy&&(b=l.orderBy.map(ie=>new zp(O(ie.field),function(ye){switch(ye){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ie.direction))));let D=null;l.limit&&(D=(r=typeof(e=l.limit)=="object"?e.value:e)==null?null:r);let H=null;l.startAt&&(H=function(ie){let ye=!!ie.before;return new Uc(ie.values||[],ye)}(l.startAt));let te=null;return l.endAt&&(te=function(ie){let ye=!ie.before;return new Uc(ie.values||[],ye)}(l.endAt)),new xh(a,p,b,g,D,"F",H,te)}function _(n){return{fieldPath:n.canonicalString()}}function O(n){return ao.fromServerFormat(n.fieldPath)}function X(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class oe{constructor(e,r,a,l,c=Xi.min(),p=Xi.min(),g=Fa.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=r,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=g,this.expectedCount=b}withSequenceNumber(e){return new oe(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new oe(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ge{constructor(e){this.ht=e}}function Tt(n,e){let r=e.key,a={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ar(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument()){var l;a.document={name:sm(l=n.ht,e.key),fields:e.data.value.mapValue.fields,updateTime:If(l,e.version.toTimestamp()),createTime:If(l,e.createTime.toTimestamp())}}else if(e.isNoDocument())a.noDocument={path:r.path.toArray(),readTime:ur(e.version)};else{if(!e.isUnknownDocument())return _r();a.unknownDocument={path:r.path.toArray(),version:ur(e.version)}}return a}function ar(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ur(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wr(n){let e=new bo(n.seconds,n.nanoseconds);return Xi.fromTimestamp(e)}function vn(n,e){let r=(e.baseMutations||[]).map(c=>i(n.ht,c));for(let c=0;c<e.mutations.length-1;++c){let p=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){let g=e.mutations[c+1];p.updateTransforms=g.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}let a=e.mutations.map(c=>i(n.ht,c)),l=bo.fromMillis(e.localWriteTimeMs);return new em(e.batchId,l,r,a)}function Hn(n){var e;let r=wr(n.readTime),a=n.lastLimboFreeSnapshotVersion!==void 0?wr(n.lastLimboFreeSnapshotVersion):Xi.min();return new oe(n.query.documents!==void 0?((e=n.query).documents.length===1||_r(),$c(dy(U0(e.documents[0])))):$c(v(n.query)),n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,r,a,Fa.fromBase64String(n.resumeToken))}function Jn(n,e){let r,a=ur(e.snapshotVersion),l=ur(e.lastLimboFreeSnapshotVersion);r=Kp(e.target)?o(n.ht,e.target):d(n.ht,e.target).ct;let c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sh(e.target),readTime:a,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:l,query:r}}function Os(n){let e=v({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ch(e,e.limit,"L"):e}function Hi(n,e){return new ug(e.largestBatchId,i(n.ht,e.overlayMutation))}function nr(n,e){let r=e.path.lastSegment();return[n,Fo(e.path.popLast()),r]}function Ot(n,e,r,a){return{indexId:n,uid:e,sequenceNumber:r,readTime:ur(a.readTime),documentKey:Fo(a.documentKey.path),largestBatchId:a.largestBatchId}}class Ft{getBundleMetadata(e,r){return Xt(e).get(r).next(a=>{if(a)return{id:a.bundleId,createTime:wr(a.createTime),version:a.version}})}saveBundleMetadata(e,r){return Xt(e).put({bundleId:r.id,createTime:ur(Tu(r.createTime)),version:r.version})}getNamedQuery(e,r){return hr(e).get(r).next(a=>{if(a)return{name:a.name,query:Os(a.bundledQuery),readTime:wr(a.readTime)}})}saveNamedQuery(e,r){return hr(e).put({name:r.name,readTime:ur(Tu(r.readTime)),bundledQuery:r.bundledQuery})}}function Xt(n){return So(n,"bundles")}function hr(n){return So(n,"namedQueries")}class xr{constructor(e,r){this.serializer=e,this.userId=r}static Pt(e,r){return new xr(e,r.uid||"")}getOverlay(e,r){return qt(e).get(nr(this.userId,r)).next(a=>a?Hi(this.serializer,a):null)}getOverlays(e,r){let a=uu();return gr.forEach(r,l=>this.getOverlay(e,l).next(c=>{c!==null&&a.set(l,c)})).next(()=>a)}saveOverlays(e,r,a){let l=[];return a.forEach((c,p)=>{let g=new ug(r,p);l.push(this.Tt(e,g))}),gr.waitFor(l)}removeOverlaysForBatchId(e,r,a){let l=new Set;r.forEach(p=>l.add(Fo(p.getCollectionPath())));let c=[];return l.forEach(p=>{let g=IDBKeyRange.bound([this.userId,p,a],[this.userId,p,a+1],!1,!0);c.push(qt(e).j("collectionPathOverlayIndex",g))}),gr.waitFor(c)}getOverlaysForCollection(e,r,a){let l=uu(),c=Fo(r),p=IDBKeyRange.bound([this.userId,c,a],[this.userId,c,Number.POSITIVE_INFINITY],!0);return qt(e).U("collectionPathOverlayIndex",p).next(g=>{for(let b of g){let D=Hi(this.serializer,b);l.set(D.getKey(),D)}return l})}getOverlaysForCollectionGroup(e,r,a,l){let c,p=uu(),g=IDBKeyRange.bound([this.userId,r,a],[this.userId,r,Number.POSITIVE_INFINITY],!0);return qt(e).J({index:"collectionGroupOverlayIndex",range:g},(b,D,H)=>{let te=Hi(this.serializer,D);p.size()<l||te.largestBatchId===c?(p.set(te.getKey(),te),c=te.largestBatchId):H.done()}).next(()=>p)}Tt(e,r){return qt(e).put(function(a,l,c){let[p,g,b]=nr(l,c.mutation.key);return{userId:l,collectionPath:g,documentId:b,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:m(a.ht,c.mutation)}}(this.serializer,this.userId,r))}}function qt(n){return So(n,"documentOverlays")}class Nl{It(e){return So(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(r=>{let a=r?.value;return a?Fa.fromUint8Array(a):Fa.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.It(e).put({name:"sessionToken",value:r.toUint8Array()})}}class Sc{constructor(){}Et(e,r){this.dt(e,r),r.At()}dt(e,r){if("nullValue"in e)this.Rt(r,5);else if("booleanValue"in e)this.Rt(r,10),r.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(r,15),r.Vt(Wa(e.integerValue));else if("doubleValue"in e){let a=Wa(e.doubleValue);isNaN(a)?this.Rt(r,13):(this.Rt(r,15),th(a)?r.Vt(0):r.Vt(a))}else if("timestampValue"in e){let a=e.timestampValue;this.Rt(r,20),typeof a=="string"&&(a=qu(a)),r.ft(`${a.seconds||""}`),r.Vt(a.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,r),this.yt(r);else if("bytesValue"in e)this.Rt(r,30),r.wt(lo(e.bytesValue)),this.yt(r);else if("referenceValue"in e)this.St(e.referenceValue,r);else if("geoPointValue"in e){let a=e.geoPointValue;this.Rt(r,45),r.Vt(a.latitude||0),r.Vt(a.longitude||0)}else"mapValue"in e?qp(e)?this.Rt(r,Number.MAX_SAFE_INTEGER):Bp(e)?this.bt(e.mapValue,r):(this.Dt(e.mapValue,r),this.yt(r)):"arrayValue"in e?(this.vt(e.arrayValue,r),this.yt(r)):_r()}gt(e,r){this.Rt(r,25),this.Ct(e,r)}Ct(e,r){r.ft(e)}Dt(e,r){let a=e.fields||{};for(let l of(this.Rt(r,55),Object.keys(a)))this.gt(l,r),this.dt(a[l],r)}bt(e,r){var a,l;let c=e.fields||{};this.Rt(r,53);let p="value",g=((l=(a=c[p].arrayValue)===null||a===void 0?void 0:a.values)===null||l===void 0?void 0:l.length)||0;this.Rt(r,15),r.Vt(Wa(g)),this.gt(p,r),this.dt(c[p],r)}vt(e,r){let a=e.values||[];for(let l of(this.Rt(r,50),a))this.dt(l,r)}St(e,r){this.Rt(r,37),Xn.fromName(e).path.forEach(a=>{this.Rt(r,60),this.Ct(a,r)})}Rt(e,r){e.Vt(r)}yt(e){e.Vt(2)}}function Wh(n){return Math.ceil((64-function(e){let r=0;for(let a=0;a<8;++a){let l=function(c){if(c===0)return 8;let p=0;return c>>4==0&&(p+=4,c<<=4),c>>6==0&&(p+=2,c<<=2),c>>7==0&&(p+=1),p}(255&e[a]);if(r+=l,l!==8)break}return r}(n))/8)}Sc.Ft=new Sc;class om{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){let r=e[Symbol.iterator](),a=r.next();for(;!a.done;)this.xt(a.value),a=r.next();this.Ot()}Nt(e){let r=e[Symbol.iterator](),a=r.next();for(;!a.done;)this.Lt(a.value),a=r.next();this.Bt()}kt(e){for(let r of e){let a=r.charCodeAt(0);if(a<128)this.xt(a);else if(a<2048)this.xt(960|a>>>6),this.xt(128|63&a);else if(r<"\uD800"||"\uDBFF"<r)this.xt(480|a>>>12),this.xt(128|63&a>>>6),this.xt(128|63&a);else{let l=r.codePointAt(0);this.xt(240|l>>>18),this.xt(128|63&l>>>12),this.xt(128|63&l>>>6),this.xt(128|63&l)}}this.Ot()}qt(e){for(let r of e){let a=r.charCodeAt(0);if(a<128)this.Lt(a);else if(a<2048)this.Lt(960|a>>>6),this.Lt(128|63&a);else if(r<"\uD800"||"\uDBFF"<r)this.Lt(480|a>>>12),this.Lt(128|63&a>>>6),this.Lt(128|63&a);else{let l=r.codePointAt(0);this.Lt(240|l>>>18),this.Lt(128|63&l>>>12),this.Lt(128|63&l>>>6),this.Lt(128|63&l)}}this.Bt()}Qt(e){let r=this.Kt(e),a=Wh(r);this.$t(1+a),this.buffer[this.position++]=255&a;for(let l=r.length-a;l<r.length;++l)this.buffer[this.position++]=255&r[l]}Ut(e){let r=this.Kt(e),a=Wh(r);this.$t(1+a),this.buffer[this.position++]=~(255&a);for(let l=r.length-a;l<r.length;++l)this.buffer[this.position++]=~(255&r[l])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){let r=function(l){let c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),a=(128&r[0])!=0;r[0]^=a?255:128;for(let l=1;l<r.length;++l)r[l]^=a?255:0;return r}xt(e){let r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(r)}Lt(e){let r=255&e;r===0?(this.jt(0),this.jt(255)):r===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){let r=e+this.position;if(r<=this.buffer.length)return;let a=2*this.buffer.length;a<r&&(a=r);let l=new Uint8Array(a);l.set(this.buffer),this.buffer=l}}class Jh{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class Iy{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class op{constructor(){this.Jt=new om,this.Yt=new Jh(this.Jt),this.Zt=new Iy(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}class Hu{constructor(e,r,a,l){this.indexId=e,this.documentKey=r,this.arrayValue=a,this.directionalValue=l}en(){let e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,a=new Uint8Array(r);return a.set(this.directionalValue,0),r!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Hu(this.indexId,this.documentKey,this.arrayValue,a)}}function Go(n,e){let r=n.indexId-e.indexId;return r!==0||(r=Ty(n.arrayValue,e.arrayValue))!==0||(r=Ty(n.directionalValue,e.directionalValue))!==0?r:Xn.comparator(n.documentKey,e.documentKey)}function Ty(n,e){for(let r=0;r<n.length&&r<e.length;++r){let a=n[r]-e[r];if(a!==0)return a}return n.length-e.length}class Tf{constructor(e){for(let r of(this.tn=new ha((a,l)=>ao.comparator(a.field,l.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[],e.filters))r.isInequality()?this.tn=this.tn.add(r):this.rn.push(r)}get sn(){return this.tn.size>1}on(e){if(e.collectionGroup===this.collectionId||_r(),this.sn)return!1;let r=wu(e);if(r!==void 0&&!this._n(r))return!1;let a=eh(e),l=new Set,c=0,p=0;for(;c<a.length&&this._n(a[c]);++c)l=l.add(a[c].fieldPath.canonicalString());if(c===a.length)return!0;if(this.tn.size>0){let g=this.tn.getIterator().getNext();if(!l.has(g.field.canonicalString())){let b=a[c];if(!this.an(g,b)||!this.un(this.nn[p++],b))return!1}++c}for(;c<a.length;++c){let g=a[c];if(p>=this.nn.length||!this.un(this.nn[p++],g))return!1}return!0}cn(){if(this.sn)return null;let e=new ha(ao.comparator),r=[];for(let a of this.rn)if(!a.field.isKeyField())if(a.op==="array-contains"||a.op==="array-contains-any")r.push(new Fu(a.field,2));else{if(e.has(a.field))continue;e=e.add(a.field),r.push(new Fu(a.field,0))}for(let a of this.nn)a.field.isKeyField()||e.has(a.field)||(e=e.add(a.field),r.push(new Fu(a.field,a.dir==="asc"?0:1)));return new Po(Po.UNKNOWN_ID,this.collectionId,r,bu.empty())}_n(e){for(let r of this.rn)if(this.an(r,e))return!0;return!1}an(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;let a=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===a}un(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}function pg(n){return n instanceof da}function oh(n){return n instanceof to&&tp(n)}function Pv(n){return pg(n)||oh(n)||function(e){if(e instanceof to&&Gp(e)){for(let r of e.getFilters())if(!pg(r)&&!oh(r))return!1;return!0}return!1}(n)}function mg(n,e){return n instanceof da||n instanceof to||_r(),e instanceof da||e instanceof to||_r(),lp(n instanceof da?e instanceof da?to.create([n,e],"and"):lm(n,e):e instanceof da?lm(e,n):function(r,a){if(r.filters.length>0&&a.filters.length>0||_r(),xd(r)&&xd(a))return Xm(r,a.getFilters());let l=Gp(r)?r:a,c=Gp(r)?a:r,p=l.filters.map(g=>mg(g,c));return to.create(p,"or")}(n,e))}function lm(n,e){if(xd(e))return Xm(e,n.getFilters());{let r=e.filters.map(a=>mg(n,a));return to.create(r,"or")}}function lp(n){if(n instanceof da||n instanceof to||_r(),n instanceof da)return n;let e=n.getFilters();if(e.length===1)return lp(e[0]);if(df(n))return n;let r=e.map(l=>lp(l)),a=[];return r.forEach(l=>{l instanceof da?a.push(l):l instanceof to&&(l.op===n.op?a.push(...l.filters):a.push(l))}),a.length===1?a[0]:to.create(a,n.op)}class xy{constructor(){this.ln=new up}addToCollectionParentIndex(e,r){return this.ln.add(r),gr.resolve()}getCollectionParents(e,r){return gr.resolve(this.ln.getEntries(r))}addFieldIndex(e,r){return gr.resolve()}deleteFieldIndex(e,r){return gr.resolve()}deleteAllFieldIndexes(e){return gr.resolve()}createTargetIndexes(e,r){return gr.resolve()}getDocumentsMatchingTarget(e,r){return gr.resolve(null)}getIndexType(e,r){return gr.resolve(0)}getFieldIndexes(e,r){return gr.resolve([])}getNextCollectionGroupToUpdate(e){return gr.resolve(null)}getMinOffset(e,r){return gr.resolve(Sl.min())}getMinOffsetFromCollectionGroup(e,r){return gr.resolve(Sl.min())}updateCollectionGroup(e,r,a){return gr.resolve()}updateIndexEntries(e,r){return gr.resolve()}}class up{constructor(){this.index={}}add(e){let r=e.lastSegment(),a=e.popLast(),l=this.index[r]||new ha(La.comparator),c=!l.has(a);return this.index[r]=l.add(a),c}has(e){let r=e.lastSegment(),a=e.popLast(),l=this.index[r];return l&&l.has(a)}getEntries(e){return(this.index[e]||new ha(La.comparator)).toArray()}}let Qh=new Uint8Array(0);class Av{constructor(e,r){this.databaseId=r,this.hn=new up,this.Pn=new Hh(a=>sh(a),(a,l)=>ah(a,l)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.hn.has(r)){let a=r.lastSegment(),l=r.popLast();e.addOnCommittedListener(()=>{this.hn.add(r)});let c={collectionId:a,parent:Fo(l)};return um(e).put(c)}return gr.resolve()}getCollectionParents(e,r){let a=[],l=IDBKeyRange.bound([r,""],[r+"\0",""],!1,!0);return um(e).U(l).next(c=>{for(let p of c){if(p.collectionId!==r)break;a.push(su(p.parent))}return a})}addFieldIndex(e,r){let a=xf(e),l={indexId:r.indexId,collectionGroup:r.collectionGroup,fields:r.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};delete l.indexId;let c=a.add(l);if(r.indexState){let p=Cf(e);return c.next(g=>{p.put(Ot(g,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return c.next()}deleteFieldIndex(e,r){let a=xf(e),l=Cf(e),c=Md(e);return a.delete(r.indexId).next(()=>l.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let r=xf(e),a=Md(e),l=Cf(e);return r.j().next(()=>a.j()).next(()=>l.j())}createTargetIndexes(e,r){return gr.forEach(this.Tn(r),a=>this.getIndexType(e,a).next(l=>{if(l===0||l===1){let c=new Tf(a).cn();if(c!=null)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,r){let a=Md(e),l=!0,c=new Map;return gr.forEach(this.Tn(r),p=>this.In(e,p).next(g=>{l&&(l=!!g),c.set(p,g)})).next(()=>{if(l){let p=Ys(),g=[];return gr.forEach(c,(b,D)=>{Zr("IndexedDbIndexManager",`Using index id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Ze=>`${Ze.fieldPath}:${Ze.kind}`).join(",")} to execute ${sh(r)}`);let H=function(Ze,ke){let Ie=wu(ke);if(Ie===void 0)return null;for(let Ae of Zm(Ze,Ie.fieldPath))switch(Ae.op){case"array-contains-any":return Ae.value.arrayValue.values||[];case"array-contains":return[Ae.value]}return null}(D,b),te=function(Ze,ke){let Ie=new Map;for(let Ae of eh(ke))for(let it of Zm(Ze,Ae.fieldPath))switch(it.op){case"==":case"in":Ie.set(Ae.fieldPath.canonicalString(),it.value);break;case"not-in":case"!=":return Ie.set(Ae.fieldPath.canonicalString(),it.value),Array.from(Ie.values())}return null}(D,b),ie=function(Ze,ke){let Ie=[],Ae=!0;for(let it of eh(ke)){let ut=it.kind===0?hy(Ze,it.fieldPath,Ze.startAt):eg(Ze,it.fieldPath,Ze.startAt);Ie.push(ut.value),Ae&&(Ae=ut.inclusive)}return new Uc(Ie,Ae)}(D,b),ye=function(Ze,ke){let Ie=[],Ae=!0;for(let it of eh(ke)){let ut=it.kind===0?eg(Ze,it.fieldPath,Ze.endAt):hy(Ze,it.fieldPath,Ze.endAt);Ie.push(ut.value),Ae&&(Ae=ut.inclusive)}return new Uc(Ie,Ae)}(D,b),je=this.En(b,D,ie),Re=this.En(b,D,ye),Ye=this.dn(b,D,te),ht=this.An(b.indexId,H,je,ie.inclusive,Re,ye.inclusive,Ye);return gr.forEach(ht,Ze=>a.G(Ze,r.limit).next(ke=>{ke.forEach(Ie=>{let Ae=Xn.fromSegments(Ie.documentKey);p.has(Ae)||(p=p.add(Ae),g.push(Ae))})}))}).next(()=>g)}return gr.resolve(null)})}Tn(e){let r=this.Pn.get(e);return r||(r=e.filters.length===0?[e]:function(a){if(a.getFilters().length===0)return[];let l=function c(p){if(p instanceof da||p instanceof to||_r(),p instanceof da)return p;if(p.filters.length===1)return c(p.filters[0]);let g=p.filters.map(D=>c(D)),b=to.create(g,p.op);return Pv(b=lp(b))?b:(b instanceof to||_r(),xd(b)||_r(),b.filters.length>1||_r(),b.filters.reduce((D,H)=>mg(D,H)))}(function c(p){var g,b;if(p instanceof da||p instanceof to||_r(),p instanceof da){if(p instanceof rp){let H=((b=(g=p.value.arrayValue)===null||g===void 0?void 0:g.values)===null||b===void 0?void 0:b.map(te=>da.create(p.field,"==",te)))||[];return to.create(H,"or")}return p}let D=p.filters.map(H=>c(H));return to.create(D,p.op)}(a));return Pv(l)||_r(),pg(l)||oh(l)?[l]:l.getFilters()}(to.create(e.filters,"and")).map(a=>ff(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,r)),r}An(e,r,a,l,c,p,g){let b=(r!=null?r.length:1)*Math.max(a.length,c.length),D=b/(r!=null?r.length:1),H=[];for(let te=0;te<b;++te){let ie=r?this.Rn(r[te/D]):Qh,ye=this.Vn(e,ie,a[te%D],l),je=this.mn(e,ie,c[te%D],p),Re=g.map(Ye=>this.Vn(e,ie,Ye,!0));H.push(...this.createRange(ye,je,Re))}return H}Vn(e,r,a,l){let c=new Hu(e,Xn.empty(),r,a);return l?c:c.en()}mn(e,r,a,l){let c=new Hu(e,Xn.empty(),r,a);return l?c.en():c}In(e,r){let a=new Tf(r),l=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,l).next(c=>{let p=null;for(let g of c)a.on(g)&&(!p||g.fields.length>p.fields.length)&&(p=g);return p})}getIndexType(e,r){let a=2,l=this.Tn(r);return gr.forEach(l,c=>this.In(e,c).next(p=>{p?a!==0&&p.fields.length<function(g){let b=new ha(ao.comparator),D=!1;for(let H of g.filters)for(let te of H.getFlattenedFilters())te.field.isKeyField()||(te.op==="array-contains"||te.op==="array-contains-any"?D=!0:b=b.add(te.field));for(let H of g.orderBy)H.field.isKeyField()||(b=b.add(H.field));return b.size+(D?1:0)}(c)&&(a=1):a=0})).next(()=>r.limit!==null&&l.length>1&&a===2?1:a)}fn(e,r){let a=new op;for(let l of eh(e)){let c=r.data.field(l.fieldPath);if(c==null)return null;let p=a.Xt(l.kind);Sc.Ft.Et(c,p)}return a.Ht()}Rn(e){let r=new op;return Sc.Ft.Et(e,r.Xt(0)),r.Ht()}gn(e,r){let a=new op;return Sc.Ft.Et(Ra(this.databaseId,r),a.Xt(function(l){let c=eh(l);return c.length===0?0:c[c.length-1].kind}(e))),a.Ht()}dn(e,r,a){if(a===null)return[];let l=[];l.push(new op);let c=0;for(let p of eh(e)){let g=a[c++];for(let b of l)if(this.pn(r,p.fieldPath)&&Zf(g))l=this.yn(l,p,g);else{let D=b.Xt(p.kind);Sc.Ft.Et(g,D)}}return this.wn(l)}En(e,r,a){return this.dn(e,r,a.position)}wn(e){let r=[];for(let a=0;a<e.length;++a)r[a]=e[a].Ht();return r}yn(e,r,a){let l=[...e],c=[];for(let p of a.arrayValue.values||[])for(let g of l){let b=new op;b.seed(g.Ht()),Sc.Ft.Et(p,b.Xt(r.kind)),c.push(b)}return c}pn(e,r){return!!e.filters.find(a=>a instanceof da&&a.field.isEqual(r)&&(a.op==="in"||a.op==="not-in"))}getFieldIndexes(e,r){let a=xf(e),l=Cf(e);return(r?a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):a.U()).next(c=>{let p=[];return gr.forEach(c,g=>l.get([g.indexId,this.uid]).next(b=>{p.push(function(D,H){let te=H?new bu(H.sequenceNumber,new Sl(wr(H.readTime),new Xn(su(H.documentKey)),H.largestBatchId)):bu.empty(),ie=D.fields.map(([ye,je])=>new Fu(ao.fromServerFormat(ye),je));return new Po(D.indexId,D.collectionGroup,ie,te)}(g,b))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((a,l)=>{let c=a.indexState.sequenceNumber-l.indexState.sequenceNumber;return c!==0?c:Bi(a.collectionGroup,l.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,a){let l=xf(e),c=Cf(e);return this.Sn(e).next(p=>l.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(g=>gr.forEach(g,b=>c.put(Ot(b.indexId,this.uid,p,a)))))}updateIndexEntries(e,r){let a=new Map;return gr.forEach(r,(l,c)=>{let p=a.get(l.collectionGroup);return(p?gr.resolve(p):this.getFieldIndexes(e,l.collectionGroup)).next(g=>(a.set(l.collectionGroup,g),gr.forEach(g,b=>this.bn(e,l,b).next(D=>{let H=this.Dn(c,b);return D.isEqual(H)?gr.resolve():this.vn(e,c,b,D,H)}))))})}Cn(e,r,a,l){return Md(e).put({indexId:l.indexId,uid:this.uid,arrayValue:l.arrayValue,directionalValue:l.directionalValue,orderedDocumentKey:this.gn(a,r.key),documentKey:r.key.path.toArray()})}Fn(e,r,a,l){return Md(e).delete([l.indexId,this.uid,l.arrayValue,l.directionalValue,this.gn(a,r.key),r.key.path.toArray()])}bn(e,r,a){let l=Md(e),c=new ha(Go);return l.J({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.gn(a,r)])},(p,g)=>{c=c.add(new Hu(a.indexId,r,g.arrayValue,g.directionalValue))}).next(()=>c)}Dn(e,r){let a=new ha(Go),l=this.fn(r,e);if(l==null)return a;let c=wu(r);if(c!=null){let p=e.data.field(c.fieldPath);if(Zf(p))for(let g of p.arrayValue.values||[])a=a.add(new Hu(r.indexId,e.key,this.Rn(g),l))}else a=a.add(new Hu(r.indexId,e.key,Qh,l));return a}vn(e,r,a,l,c){Zr("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);let p=[];return function(g,b,D,H,te){let ie=g.getIterator(),ye=b.getIterator(),je=vc(ie),Re=vc(ye);for(;je||Re;){let Ye=!1,ht=!1;if(je&&Re){let Ze=D(je,Re);Ze<0?ht=!0:Ze>0&&(Ye=!0)}else je!=null?ht=!0:Ye=!0;Ye?(H(Re),Re=vc(ye)):ht?(te(je),je=vc(ie)):(je=vc(ie),Re=vc(ye))}}(l,c,Go,g=>{p.push(this.Cn(e,r,a,g))},g=>{p.push(this.Fn(e,r,a,g))}),gr.waitFor(p)}Sn(e){let r=1;return Cf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,l,c)=>{c.done(),r=l.sequenceNumber+1}).next(()=>r)}createRange(e,r,a){a=a.sort((p,g)=>Go(p,g)).filter((p,g,b)=>!g||Go(p,b[g-1])!==0);let l=[];for(let p of(l.push(e),a)){let g=Go(p,e),b=Go(p,r);if(g===0)l[0]=e.en();else if(g>0&&b<0)l.push(p),l.push(p.en());else if(b>0)break}l.push(r);let c=[];for(let p=0;p<l.length;p+=2){if(this.Mn(l[p],l[p+1]))return[];let g=[l[p].indexId,this.uid,l[p].arrayValue,l[p].directionalValue,Qh,[]],b=[l[p+1].indexId,this.uid,l[p+1].arrayValue,l[p+1].directionalValue,Qh,[]];c.push(IDBKeyRange.bound(g,b))}return c}Mn(e,r){return Go(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Ld)}getMinOffset(e,r){return gr.mapArray(this.Tn(r),a=>this.In(e,a).next(l=>l||_r())).next(Ld)}}function um(n){return So(n,"collectionParents")}function Md(n){return So(n,"indexEntries")}function xf(n){return So(n,"indexConfiguration")}function Cf(n){return So(n,"indexState")}function Ld(n){n.length!==0||_r();let e=n[0].indexState.offset,r=e.largestBatchId;for(let a=1;a<n.length;a++){let l=n[a].indexState.offset;0>yh(l,e)&&(e=l),r<l.largestBatchId&&(r=l.largestBatchId)}return new Sl(e.readTime,e.documentKey,r)}let cm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ol{static withCacheSize(e){return new Ol(e,Ol.DEFAULT_COLLECTION_PERCENTILE,Ol.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}}function Zl(n,e,r){let a=n.store("mutations"),l=n.store("documentMutations"),c=[],p=IDBKeyRange.only(r.batchId),g=0,b=a.J({range:p},(ie,ye,je)=>(g++,je.delete()));c.push(b.next(()=>{g===1||_r()}));let D=[];for(let ie of r.mutations){var H,te;let ye=(H=ie.key.path,te=r.batchId,[e,Fo(H),te]);c.push(l.delete(ye)),D.push(ie.key)}return gr.waitFor(c).next(()=>D)}function Dl(n){let e;if(!n)return 0;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _r();e=n.noDocument}return JSON.stringify(e).length}Ol.DEFAULT_COLLECTION_PERCENTILE=10,Ol.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ol.DEFAULT=new Ol(41943040,Ol.DEFAULT_COLLECTION_PERCENTILE,Ol.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ol.DISABLED=new Ol(-1,0,0);class jd{constructor(e,r,a,l){this.userId=e,this.serializer=r,this.indexManager=a,this.referenceDelegate=l,this.xn={}}static Pt(e,r,a,l){return e.uid!==""||_r(),new jd(e.isAuthenticated()?e.uid:"",r,a,l)}checkEmpty(e){let r=!0,a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yh(e).J({index:"userMutationsIndex",range:a},(l,c,p)=>{r=!1,p.done()}).next(()=>r)}addMutationBatch(e,r,a,l){let c=lh(e),p=Yh(e);return p.add({}).next(g=>{typeof g=="number"||_r();let b=new em(g,r,a,l),D=function(ie,ye,je){let Re=je.baseMutations.map(ht=>m(ie.ht,ht)),Ye=je.mutations.map(ht=>m(ie.ht,ht));return{userId:ye,batchId:je.batchId,localWriteTimeMs:je.localWriteTime.toMillis(),baseMutations:Re,mutations:Ye}}(this.serializer,this.userId,b),H=[],te=new ha((ie,ye)=>Bi(ie.canonicalString(),ye.canonicalString()));for(let ie of l){let ye=[this.userId,Fo(ie.key.path),g];te=te.add(ie.key.path.popLast()),H.push(p.put(D)),H.push(c.put(ye,Eu))}return te.forEach(ie=>{H.push(this.indexManager.addToCollectionParentIndex(e,ie))}),e.addOnCommittedListener(()=>{this.xn[g]=b.keys()}),gr.waitFor(H).next(()=>b)})}lookupMutationBatch(e,r){return Yh(e).get(r).next(a=>a?(a.userId===this.userId||_r(),vn(this.serializer,a)):null)}On(e,r){return this.xn[r]?gr.resolve(this.xn[r]):this.lookupMutationBatch(e,r).next(a=>{if(a){let l=a.keys();return this.xn[r]=l,l}return null})}getNextMutationBatchAfterBatchId(e,r){let a=r+1,l=IDBKeyRange.lowerBound([this.userId,a]),c=null;return Yh(e).J({index:"userMutationsIndex",range:l},(p,g,b)=>{g.userId===this.userId&&(g.batchId>=a||_r(),c=vn(this.serializer,g)),b.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){let r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),a=-1;return Yh(e).J({index:"userMutationsIndex",range:r,reverse:!0},(l,c,p)=>{a=c.batchId,p.done()}).next(()=>a)}getAllMutationBatches(e){let r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yh(e).U("userMutationsIndex",r).next(a=>a.map(l=>vn(this.serializer,l)))}getAllMutationBatchesAffectingDocumentKey(e,r){let a=[this.userId,Fo(r.path)],l=IDBKeyRange.lowerBound(a),c=[];return lh(e).J({range:l},(p,g,b)=>{let[D,H,te]=p,ie=su(H);if(D===this.userId&&r.path.isEqual(ie))return Yh(e).get(te).next(ye=>{if(!ye)throw _r();ye.userId===this.userId||_r(),c.push(vn(this.serializer,ye))});b.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new ha(Bi),l=[];return r.forEach(c=>{let p=[this.userId,Fo(c.path)],g=IDBKeyRange.lowerBound(p),b=lh(e).J({range:g},(D,H,te)=>{let[ie,ye,je]=D,Re=su(ye);ie===this.userId&&c.path.isEqual(Re)?a=a.add(je):te.done()});l.push(b)}),gr.waitFor(l).next(()=>this.Nn(e,a))}getAllMutationBatchesAffectingQuery(e,r){let a=r.path,l=a.length+1,c=[this.userId,Fo(a)],p=IDBKeyRange.lowerBound(c),g=new ha(Bi);return lh(e).J({range:p},(b,D,H)=>{let[te,ie,ye]=b,je=su(ie);te===this.userId&&a.isPrefixOf(je)?je.length===l&&(g=g.add(ye)):H.done()}).next(()=>this.Nn(e,g))}Nn(e,r){let a=[],l=[];return r.forEach(c=>{l.push(Yh(e).get(c).next(p=>{if(p===null)throw _r();p.userId===this.userId||_r(),a.push(vn(this.serializer,p))}))}),gr.waitFor(l).next(()=>a)}removeMutationBatch(e,r){return Zl(e._e,this.userId,r).next(a=>(e.addOnCommittedListener(()=>{this.Ln(r.batchId)}),gr.forEach(a,l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))}Ln(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return gr.resolve();let a=IDBKeyRange.lowerBound([this.userId]),l=[];return lh(e).J({range:a},(c,p,g)=>{if(c[0]===this.userId){let b=su(c[1]);l.push(b)}else g.done()}).next(()=>{l.length===0||_r()})})}containsKey(e,r){return gg(e,this.userId,r)}Bn(e){return yg(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gg(n,e,r){let a=[e,Fo(r.path)],l=a[1],c=IDBKeyRange.lowerBound(a),p=!1;return lh(n).J({range:c,H:!0},(g,b,D)=>{let[H,te,ie]=g;H===e&&te===l&&(p=!0),D.done()}).next(()=>p)}function Yh(n){return So(n,"mutations")}function lh(n){return So(n,"documentMutations")}function yg(n){return So(n,"mutationQueues")}class Xh{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Xh(0)}static Qn(){return new Xh(-1)}}class Nv{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.Kn(e).next(r=>{let a=new Xh(r.highestTargetId);return r.highestTargetId=a.next(),this.$n(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(r=>Xi.fromTimestamp(new bo(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,a){return this.Kn(e).next(l=>(l.highestListenSequenceNumber=r,a&&(l.lastRemoteSnapshotVersion=a.toTimestamp()),r>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=r),this.$n(e,l)))}addTargetData(e,r){return this.Un(e,r).next(()=>this.Kn(e).next(a=>(a.targetCount+=1,this.Wn(r,a),this.$n(e,a))))}updateTargetData(e,r){return this.Un(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>cp(e).delete(r.targetId)).next(()=>this.Kn(e)).next(a=>(a.targetCount>0||_r(),a.targetCount-=1,this.$n(e,a)))}removeTargets(e,r,a){let l=0,c=[];return cp(e).J((p,g)=>{let b=Hn(g);b.sequenceNumber<=r&&a.get(b.targetId)===null&&(l++,c.push(this.removeTargetData(e,b)))}).next(()=>gr.waitFor(c)).next(()=>l)}forEachTarget(e,r){return cp(e).J((a,l)=>{r(Hn(l))})}Kn(e){return Ov(e).get("targetGlobalKey").next(r=>(r!==null||_r(),r))}$n(e,r){return Ov(e).put("targetGlobalKey",r)}Un(e,r){return cp(e).put(Jn(this.serializer,r))}Wn(e,r){let a=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,a=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Kn(e).next(r=>r.targetCount)}getTargetData(e,r){let a=sh(r),l=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]),c=null;return cp(e).J({range:l,index:"queryTargetsIndex"},(p,g,b)=>{let D=Hn(g);ah(r,D.target)&&(c=D,b.done())}).next(()=>c)}addMatchingKeys(e,r,a){let l=[],c=Bc(e);return r.forEach(p=>{let g=Fo(p.path);l.push(c.put({targetId:a,path:g})),l.push(this.referenceDelegate.addReference(e,a,p))}),gr.waitFor(l)}removeMatchingKeys(e,r,a){let l=Bc(e);return gr.forEach(r,c=>{let p=Fo(c.path);return gr.waitFor([l.delete([a,p]),this.referenceDelegate.removeReference(e,a,c)])})}removeMatchingKeysForTargetId(e,r){let a=Bc(e),l=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(l)}getMatchingKeysForTargetId(e,r){let a=IDBKeyRange.bound([r],[r+1],!1,!0),l=Bc(e),c=Ys();return l.J({range:a,H:!0},(p,g,b)=>{let D=new Xn(su(p[1]));c=c.add(D)}).next(()=>c)}containsKey(e,r){let a=Fo(r.path),l=IDBKeyRange.bound([a],[a+"\0"],!1,!0),c=0;return Bc(e).J({index:"documentTargetsIndex",H:!0,range:l},([p,g],b,D)=>{p!==0&&(c++,D.done())}).next(()=>c>0)}ut(e,r){return cp(e).get(r).next(a=>a?Hn(a):null)}}function cp(n){return So(n,"targets")}function Ov(n){return So(n,"targetGlobal")}function Bc(n){return So(n,"targetDocuments")}function vg([n,e],[r,a]){let l=Bi(n,r);return l===0?Bi(e,a):l}class Cy{constructor(e){this.Gn=e,this.buffer=new ha(vg),this.zn=0}jn(){return++this.zn}Hn(e){let r=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(r);else{let a=this.buffer.last();0>vg(r,a)&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Zh{constructor(e,r,a){this.garbageCollector=e,this.asyncQueue=r,this.localStore=a,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Zr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Su(r)?Zr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Ao(r)}await this.Yn(3e5)})}}class kf{constructor(e,r){this.Zn=e,this.params=r}calculateTargetCount(e,r){return this.Zn.Xn(e).next(a=>Math.floor(r/100*a))}nthSequenceNumber(e,r){if(r===0)return gr.resolve(oo.oe);let a=new Cy(r);return this.Zn.forEachTarget(e,l=>a.Hn(l.sequenceNumber)).next(()=>this.Zn.er(e,l=>a.Hn(l))).next(()=>a.maxValue)}removeTargets(e,r,a){return this.Zn.removeTargets(e,r,a)}removeOrphanedDocuments(e,r){return this.Zn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Zr("LruGarbageCollector","Garbage collection skipped; disabled"),gr.resolve(cm)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Zr("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cm):this.tr(e,r))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,r){let a,l,c,p,g,b,D,H=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(te=>(te>this.params.maximumSequenceNumbersToCollect?(Zr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${te}`),l=this.params.maximumSequenceNumbersToCollect):l=te,p=Date.now(),this.nthSequenceNumber(e,l))).next(te=>(a=te,g=Date.now(),this.removeTargets(e,a,r))).next(te=>(c=te,b=Date.now(),this.removeOrphanedDocuments(e,a))).next(te=>(D=Date.now(),ca()<=k.DEBUG&&Zr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-H}ms
	Determined least recently used ${l} in `+(g-p)+`ms
	Removed ${c} targets in `+(b-g)+`ms
	Removed ${te} documents in `+(D-b)+`ms
Total Duration: ${D-H}ms`),gr.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:te})))}}class Ku{constructor(e,r){this.db=e,this.garbageCollector=new kf(this,r)}Xn(e){let r=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(a=>r.next(l=>a+l))}nr(e){let r=0;return this.er(e,a=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}er(e,r){return this.rr(e,(a,l)=>r(l))}addReference(e,r,a){return Ml(e,a)}removeReference(e,r,a){return Ml(e,a)}removeTargets(e,r,a){return this.db.getTargetCache().removeTargets(e,r,a)}markPotentiallyOrphaned(e,r){return Ml(e,r)}ir(e,r){let a;return a=!1,yg(e).Y(l=>gg(e,l,r).next(c=>(c&&(a=!0),gr.resolve(!c)))).next(()=>a)}removeOrphanedDocuments(e,r){let a=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[],c=0;return this.rr(e,(p,g)=>{if(g<=r){let b=this.ir(e,p).next(D=>{if(!D)return c++,a.getEntry(e,p).next(()=>(a.removeEntry(p,Xi.min()),Bc(e).delete([0,Fo(p.path)])))});l.push(b)}}).next(()=>gr.waitFor(l)).next(()=>a.apply(e)).next(()=>c)}removeTarget(e,r){let a=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,r){return Ml(e,r)}rr(e,r){let a=Bc(e),l,c=oo.oe;return a.J({index:"documentTargetsIndex"},([p,g],{path:b,sequenceNumber:D})=>{p===0?(c!==oo.oe&&r(new Xn(su(l)),c),c=D,l=b):c=oo.oe}).next(()=>{c!==oo.oe&&r(new Xn(su(l)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ml(n,e){var r;return Bc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Fo(e.path),sequenceNumber:r}))}class wg{constructor(){this.changes=new Hh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Eo.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();let a=this.changes.get(r);return a!==void 0?gr.resolve(a):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uh{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,a){return Vo(e).put(a)}removeEntry(e,r,a){return Vo(e).delete(function(l,c){let p=l.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],ar(c),p[p.length-1]]}(r,a))}updateMetadata(e,r){return this.getMetadata(e).next(a=>(a.byteSize+=r,this.sr(e,a)))}getEntry(e,r){let a=Eo.newInvalidDocument(r);return Vo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fl(r))},(l,c)=>{a=this._r(r,c)}).next(()=>a)}ar(e,r){let a={size:0,document:Eo.newInvalidDocument(r)};return Vo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fl(r))},(l,c)=>{a={document:this._r(r,c),size:Dl(c)}}).next(()=>a)}getEntries(e,r){let a=lu;return this.ur(e,r,(l,c)=>{let p=this._r(l,c);a=a.insert(l,p)}).next(()=>a)}cr(e,r){let a=lu,l=new oa(Xn.comparator);return this.ur(e,r,(c,p)=>{let g=this._r(c,p);a=a.insert(c,g),l=l.insert(c,Dl(p))}).next(()=>({documents:a,lr:l}))}ur(e,r,a){if(r.isEmpty())return gr.resolve();let l=new ha(Nh);r.forEach(b=>l=l.add(b));let c=IDBKeyRange.bound(fl(l.first()),fl(l.last())),p=l.getIterator(),g=p.getNext();return Vo(e).J({index:"documentKeyIndex",range:c},(b,D,H)=>{let te=Xn.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&0>Nh(g,te);)a(g,null),g=p.getNext();g&&g.isEqual(te)&&(a(g,D),g=p.hasNext()?p.getNext():null),g?H.$(fl(g)):H.done()}).next(()=>{for(;g;)a(g,null),g=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,r,a,l,c){let p=r.path,g=[p.popLast().toArray(),p.lastSegment(),ar(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],b=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vo(e).U(IDBKeyRange.bound(g,b,!0)).next(D=>{c?.incrementDocumentReadCount(D.length);let H=lu;for(let te of D){let ie=this._r(Xn.fromSegments(te.prefixPath.concat(te.collectionGroup,te.documentId)),te);ie.isFoundDocument()&&(tg(r,ie)||l.has(ie.key))&&(H=H.insert(ie.key,ie))}return H})}getAllFromCollectionGroup(e,r,a,l){let c=lu,p=Sg(r,a),g=Sg(r,Sl.max());return Vo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,g,!0)},(b,D,H)=>{let te=this._r(Xn.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);(c=c.insert(te.key,te)).size===l&&H.done()}).next(()=>c)}newChangeBuffer(e){return new bg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return ji(e).get("remoteDocumentGlobalKey").next(r=>(r||_r(),r))}sr(e,r){return ji(e).put("remoteDocumentGlobalKey",r)}_r(e,r){if(r){let a=function(l,c){let p;if(c.document)p=ap(l.ht,c.document,!!c.hasCommittedMutations);else if(c.noDocument){let g=Xn.fromSegments(c.noDocument.path),b=wr(c.noDocument.readTime);p=Eo.newNoDocument(g,b),c.hasCommittedMutations&&p.setHasCommittedMutations()}else{if(!c.unknownDocument)return _r();{let g=Xn.fromSegments(c.unknownDocument.path),b=wr(c.unknownDocument.version);p=Eo.newUnknownDocument(g,b)}}return c.readTime&&p.setReadTime(function(g){let b=new bo(g[0],g[1]);return Xi.fromTimestamp(b)}(c.readTime)),p}(this.serializer,r);if(!(a.isNoDocument()&&a.version.isEqual(Xi.min())))return a}return Eo.newInvalidDocument(e)}}class bg extends wg{constructor(e,r){super(),this.hr=e,this.trackRemovals=r,this.Pr=new Hh(a=>a.toString(),(a,l)=>a.isEqual(l))}applyChanges(e){let r=[],a=0,l=new ha((c,p)=>Bi(c.canonicalString(),p.canonicalString()));return this.changes.forEach((c,p)=>{let g=this.Pr.get(c);if(r.push(this.hr.removeEntry(e,c,g.readTime)),p.isValidDocument()){let b=Tt(this.hr.serializer,p);l=l.add(c.path.popLast());let D=Dl(b);a+=D-g.size,r.push(this.hr.addEntry(e,c,b))}else if(a-=g.size,this.trackRemovals){let b=Tt(this.hr.serializer,p.convertToNoDocument(Xi.min()));r.push(this.hr.addEntry(e,c,b))}}),l.forEach(c=>{r.push(this.hr.indexManager.addToCollectionParentIndex(e,c))}),r.push(this.hr.updateMetadata(e,a)),gr.waitFor(r)}getFromCache(e,r){return this.hr.ar(e,r).next(a=>(this.Pr.set(r,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,r){return this.hr.cr(e,r).next(({documents:a,lr:l})=>(l.forEach((c,p)=>{this.Pr.set(c,{size:p,readTime:a.get(c).readTime})}),a))}}function ji(n){return So(n,"remoteDocumentGlobal")}function Vo(n){return So(n,"remoteDocumentsV14")}function fl(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Sg(n,e){let r=e.documentKey.path.toArray();return[n,ar(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Nh(n,e){let r=n.path.toArray(),a=e.path.toArray(),l=0;for(let c=0;c<r.length-2&&c<a.length-2;++c)if(l=Bi(r[c],a[c]))return l;return(l=Bi(r.length,a.length))||(l=Bi(r[r.length-2],a[a.length-2]))||Bi(r[r.length-1],a[a.length-1])}class Rf{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Fd{constructor(e,r,a,l){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,r){let a=null;return this.documentOverlayCache.getOverlay(e,r).next(l=>(a=l,this.remoteDocumentCache.getEntry(e,r))).next(l=>(a!==null&&Ph(a.mutation,l,hl.empty(),bo.now()),l))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.getLocalViewOfDocuments(e,a,Ys()).next(()=>a))}getLocalViewOfDocuments(e,r,a=Ys()){let l=uu();return this.populateOverlays(e,l,r).next(()=>this.computeViews(e,r,l,a).next(c=>{let p=Cd();return c.forEach((g,b)=>{p=p.insert(g,b.overlayedDocument)}),p}))}getOverlayedDocuments(e,r){let a=uu();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,Ys()))}populateOverlays(e,r,a){let l=[];return a.forEach(c=>{r.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(e,l).next(c=>{c.forEach((p,g)=>{r.set(p,g)})})}computeViews(e,r,a,l){let c=lu,p=uu(),g=uu();return r.forEach((b,D)=>{let H=a.get(D.key);l.has(D.key)&&(H===void 0||H.mutation instanceof Nd)?c=c.insert(D.key,D):H!==void 0?(p.set(D.key,H.mutation.getFieldMask()),Ph(H.mutation,D,H.mutation.getFieldMask(),bo.now())):p.set(D.key,hl.empty())}),this.recalculateAndSaveOverlays(e,c).next(b=>(b.forEach((D,H)=>p.set(D,H)),r.forEach((D,H)=>{var te;return g.set(D,new Rf(H,(te=p.get(D))!==null&&te!==void 0?te:null))}),g))}recalculateAndSaveOverlays(e,r){let a=uu(),l=new oa((p,g)=>p-g),c=Ys();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(p=>{for(let g of p)g.keys().forEach(b=>{let D=r.get(b);if(D===null)return;let H=a.get(b)||hl.empty();H=g.applyToLocalView(D,H),a.set(b,H);let te=(l.get(g.batchId)||Ys()).add(b);l=l.insert(g.batchId,te)})}).next(()=>{let p=[],g=l.getReverseIterator();for(;g.hasNext();){let b=g.getNext(),D=b.key,H=b.value,te=uu();H.forEach(ie=>{if(!c.has(ie)){let ye=sg(r.get(ie),a.get(ie));ye!==null&&te.set(ie,ye),c=c.add(ie)}}),p.push(this.documentOverlayCache.saveOverlays(e,D,te))}return gr.waitFor(p)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,r,a,l){return Xn.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0?this.getDocumentsMatchingDocumentQuery(e,r.path):Al(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,a,l):this.getDocumentsMatchingCollectionQuery(e,r,a,l)}getNextDocuments(e,r,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,a,l).next(c=>{let p=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,a.largestBatchId,l-c.size):gr.resolve(uu()),g=-1,b=c;return p.next(D=>gr.forEach(D,(H,te)=>(g<te.largestBatchId&&(g=te.largestBatchId),c.get(H)?gr.resolve():this.remoteDocumentCache.getEntry(e,H).next(ie=>{b=b.insert(H,ie)}))).next(()=>this.populateOverlays(e,D,c)).next(()=>this.computeViews(e,b,D,Ys())).next(H=>({batchId:g,changes:yf(H)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Xn(r)).next(a=>{let l=Cd();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l})}getDocumentsMatchingCollectionGroupQuery(e,r,a,l){let c=r.collectionGroup,p=Cd();return this.indexManager.getCollectionParents(e,c).next(g=>gr.forEach(g,b=>{let D=new xh(b.child(c),null,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt);return this.getDocumentsMatchingCollectionQuery(e,D,a,l).next(H=>{H.forEach((te,ie)=>{p=p.insert(te,ie)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,r,a,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,a.largestBatchId).next(p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,a,c,l))).next(p=>{c.forEach((b,D)=>{let H=D.getKey();p.get(H)===null&&(p=p.insert(H,Eo.newInvalidDocument(H)))});let g=Cd();return p.forEach((b,D)=>{let H=c.get(b);H!==void 0&&Ph(H.mutation,D,hl.empty(),bo.now()),tg(r,D)&&(g=g.insert(b,D))}),g})}}class Eg{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,r){return gr.resolve(this.Tr.get(r))}saveBundleMetadata(e,r){return this.Tr.set(r.id,{id:r.id,version:r.version,createTime:Tu(r.createTime)}),gr.resolve()}getNamedQuery(e,r){return gr.resolve(this.Ir.get(r))}saveNamedQuery(e,r){return this.Ir.set(r.name,{name:r.name,query:Os(r.bundledQuery),readTime:Tu(r.readTime)}),gr.resolve()}}class Dv{constructor(){this.overlays=new oa(Xn.comparator),this.Er=new Map}getOverlay(e,r){return gr.resolve(this.overlays.get(r))}getOverlays(e,r){let a=uu();return gr.forEach(r,l=>this.getOverlay(e,l).next(c=>{c!==null&&a.set(l,c)})).next(()=>a)}saveOverlays(e,r,a){return a.forEach((l,c)=>{this.Tt(e,r,c)}),gr.resolve()}removeOverlaysForBatchId(e,r,a){let l=this.Er.get(a);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Er.delete(a)),gr.resolve()}getOverlaysForCollection(e,r,a){let l=uu(),c=r.length+1,p=new Xn(r.child("")),g=this.overlays.getIteratorFrom(p);for(;g.hasNext();){let b=g.getNext().value,D=b.getKey();if(!r.isPrefixOf(D.path))break;D.path.length===c&&b.largestBatchId>a&&l.set(b.getKey(),b)}return gr.resolve(l)}getOverlaysForCollectionGroup(e,r,a,l){let c=new oa((D,H)=>D-H),p=this.overlays.getIterator();for(;p.hasNext();){let D=p.getNext().value;if(D.getKey().getCollectionGroup()===r&&D.largestBatchId>a){let H=c.get(D.largestBatchId);H===null&&(H=uu(),c=c.insert(D.largestBatchId,H)),H.set(D.getKey(),D)}}let g=uu(),b=c.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach((D,H)=>g.set(D,H)),!(g.size()>=l)););return gr.resolve(g)}Tt(e,r,a){let l=this.overlays.get(a.key);if(l!==null){let p=this.Er.get(l.largestBatchId).delete(a.key);this.Er.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(a.key,new ug(r,a));let c=this.Er.get(r);c===void 0&&(c=Ys(),this.Er.set(r,c)),this.Er.set(r,c.add(a.key))}}class nl{constructor(){this.sessionToken=Fa.EMPTY_BYTE_STRING}getSessionToken(e){return gr.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,gr.resolve()}}class Oo{constructor(){this.dr=new ha(_l.Ar),this.Rr=new ha(_l.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,r){let a=new _l(e,r);this.dr=this.dr.add(a),this.Rr=this.Rr.add(a)}mr(e,r){e.forEach(a=>this.addReference(a,r))}removeReference(e,r){this.gr(new _l(e,r))}pr(e,r){e.forEach(a=>this.removeReference(a,r))}yr(e){let r=new Xn(new La([])),a=new _l(r,e),l=new _l(r,e+1),c=[];return this.Rr.forEachInRange([a,l],p=>{this.gr(p),c.push(p.key)}),c}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let r=new Xn(new La([])),a=new _l(r,e),l=new _l(r,e+1),c=Ys();return this.Rr.forEachInRange([a,l],p=>{c=c.add(p.key)}),c}containsKey(e){let r=new _l(e,0),a=this.dr.firstAfterOrEqual(r);return a!==null&&e.isEqual(a.key)}}class _l{constructor(e,r){this.key=e,this.br=r}static Ar(e,r){return Xn.comparator(e.key,r.key)||Bi(e.br,r.br)}static Vr(e,r){return Bi(e.br,r.br)||Xn.comparator(e.key,r.key)}}class Vd{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Dr=1,this.vr=new ha(_l.Ar)}checkEmpty(e){return gr.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,a,l){let c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let p=new em(c,r,a,l);for(let g of(this.mutationQueue.push(p),l))this.vr=this.vr.add(new _l(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return gr.resolve(p)}lookupMutationBatch(e,r){return gr.resolve(this.Cr(r))}getNextMutationBatchAfterBatchId(e,r){let a=this.Fr(r+1),l=a<0?0:a;return gr.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return gr.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return gr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){let a=new _l(r,0),l=new _l(r,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([a,l],p=>{let g=this.Cr(p.br);c.push(g)}),gr.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new ha(Bi);return r.forEach(l=>{let c=new _l(l,0),p=new _l(l,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,p],g=>{a=a.add(g.br)})}),gr.resolve(this.Mr(a))}getAllMutationBatchesAffectingQuery(e,r){let a=r.path,l=a.length+1,c=a;Xn.isDocumentKey(c)||(c=c.child(""));let p=new _l(new Xn(c),0),g=new ha(Bi);return this.vr.forEachWhile(b=>{let D=b.key.path;return!!a.isPrefixOf(D)&&(D.length===l&&(g=g.add(b.br)),!0)},p),gr.resolve(this.Mr(g))}Mr(e){let r=[];return e.forEach(a=>{let l=this.Cr(a);l!==null&&r.push(l)}),r}removeMutationBatch(e,r){this.Or(r.batchId,"removed")===0||_r(),this.mutationQueue.shift();let a=this.vr;return gr.forEach(r.mutations,l=>{let c=new _l(l.key,r.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.vr=a})}Ln(e){}containsKey(e,r){let a=new _l(r,0),l=this.vr.firstAfterOrEqual(a);return gr.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,gr.resolve()}Or(e,r){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let r=this.Fr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class _g{constructor(e){this.Nr=e,this.docs=new oa(Xn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){let a=r.key,l=this.docs.get(a),c=l?l.size:0,p=this.Nr(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){let r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){let a=this.docs.get(r);return gr.resolve(a?a.document.mutableCopy():Eo.newInvalidDocument(r))}getEntries(e,r){let a=lu;return r.forEach(l=>{let c=this.docs.get(l);a=a.insert(l,c?c.document.mutableCopy():Eo.newInvalidDocument(l))}),gr.resolve(a)}getDocumentsMatchingQuery(e,r,a,l){let c=lu,p=r.path,g=new Xn(p.child("")),b=this.docs.getIteratorFrom(g);for(;b.hasNext();){let{key:D,value:{document:H}}=b.getNext();if(!p.isPrefixOf(D.path))break;D.path.length>p.length+1||0>=yh(mc(H),a)||(l.has(H.key)||tg(r,H))&&(c=c.insert(H.key,H.mutableCopy()))}return gr.resolve(c)}getAllFromCollectionGroup(e,r,a,l){_r()}Lr(e,r){return gr.forEach(this.docs,a=>r(a))}newChangeBuffer(e){return new ky(this)}getSize(e){return gr.resolve(this.size)}}class ky extends wg{constructor(e){super(),this.hr=e}applyChanges(e){let r=[];return this.changes.forEach((a,l)=>{l.isValidDocument()?r.push(this.hr.addEntry(e,l)):this.hr.removeEntry(a)}),gr.waitFor(r)}getFromCache(e,r){return this.hr.getEntry(e,r)}getAllFromCache(e,r){return this.hr.getEntries(e,r)}}class hp{constructor(e){this.persistence=e,this.Br=new Hh(r=>sh(r),ah),this.lastRemoteSnapshotVersion=Xi.min(),this.highestTargetId=0,this.kr=0,this.qr=new Oo,this.targetCount=0,this.Qr=Xh.qn()}forEachTarget(e,r){return this.Br.forEach((a,l)=>r(l)),gr.resolve()}getLastRemoteSnapshotVersion(e){return gr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gr.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),gr.resolve(this.highestTargetId)}setTargetsMetadata(e,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.kr&&(this.kr=r),gr.resolve()}Un(e){this.Br.set(e.target,e);let r=e.targetId;r>this.highestTargetId&&(this.Qr=new Xh(r),this.highestTargetId=r),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,r){return this.Un(r),this.targetCount+=1,gr.resolve()}updateTargetData(e,r){return this.Un(r),gr.resolve()}removeTargetData(e,r){return this.Br.delete(r.target),this.qr.yr(r.targetId),this.targetCount-=1,gr.resolve()}removeTargets(e,r,a){let l=0,c=[];return this.Br.forEach((p,g)=>{g.sequenceNumber<=r&&a.get(g.targetId)===null&&(this.Br.delete(p),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)}),gr.waitFor(c).next(()=>l)}getTargetCount(e){return gr.resolve(this.targetCount)}getTargetData(e,r){let a=this.Br.get(r)||null;return gr.resolve(a)}addMatchingKeys(e,r,a){return this.qr.mr(r,a),gr.resolve()}removeMatchingKeys(e,r,a){this.qr.pr(r,a);let l=this.persistence.referenceDelegate,c=[];return l&&r.forEach(p=>{c.push(l.markPotentiallyOrphaned(e,p))}),gr.waitFor(c)}removeMatchingKeysForTargetId(e,r){return this.qr.yr(r),gr.resolve()}getMatchingKeysForTargetId(e,r){let a=this.qr.Sr(r);return gr.resolve(a)}containsKey(e,r){return gr.resolve(this.qr.containsKey(r))}}class hm{constructor(e,r){this.Kr={},this.overlays={},this.$r=new oo(0),this.Ur=!1,this.Ur=!0,this.Wr=new nl,this.referenceDelegate=e(this),this.Gr=new hp(this),this.indexManager=new xy,this.remoteDocumentCache=new _g(a=>this.referenceDelegate.zr(a)),this.serializer=new Ge(r),this.jr=new Eg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Dv,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let a=this.Kr[e.toKey()];return a||(a=new Vd(r,this.referenceDelegate),this.Kr[e.toKey()]=a),a}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,r,a){Zr("MemoryPersistence","Starting transaction:",e);let l=new dm(this.$r.next());return this.referenceDelegate.Hr(),a(l).next(c=>this.referenceDelegate.Jr(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Yr(e,r){return gr.or(Object.values(this.Kr).map(a=>()=>a.containsKey(e,r)))}}class dm extends Dc{constructor(e){super(),this.currentSequenceNumber=e}}class dp{constructor(e){this.persistence=e,this.Zr=new Oo,this.Xr=null}static ei(e){return new dp(e)}get ti(){if(this.Xr)return this.Xr;throw _r()}addReference(e,r,a){return this.Zr.addReference(a,r),this.ti.delete(a.toString()),gr.resolve()}removeReference(e,r,a){return this.Zr.removeReference(a,r),this.ti.add(a.toString()),gr.resolve()}markPotentiallyOrphaned(e,r){return this.ti.add(r.toString()),gr.resolve()}removeTarget(e,r){this.Zr.yr(r.targetId).forEach(l=>this.ti.add(l.toString()));let a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(l=>{l.forEach(c=>this.ti.add(c.toString()))}).next(()=>a.removeTargetData(e,r))}Hr(){this.Xr=new Set}Jr(e){let r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gr.forEach(this.ti,a=>{let l=Xn.fromPath(a);return this.ni(e,l).next(c=>{c||r.removeEntry(l,Xi.min())})}).next(()=>(this.Xr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ni(e,r).next(a=>{a?this.ti.delete(r.toString()):this.ti.add(r.toString())})}zr(e){return 0}ni(e,r){return gr.or([()=>gr.resolve(this.Zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Yr(e,r)])}}class fp{constructor(e,r){this.persistence=e,this.ri=new Hh(a=>Fo(a.path),(a,l)=>a.isEqual(l)),this.garbageCollector=new kf(this,r)}static ei(e,r){return new fp(e,r)}Hr(){}Jr(e){return gr.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Xn(e){let r=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>r.next(l=>a+l))}nr(e){let r=0;return this.er(e,a=>{r++}).next(()=>r)}er(e,r){return gr.forEach(this.ri,(a,l)=>this.ir(e,a,l).next(c=>c?gr.resolve():r(l)))}removeTargets(e,r,a){return this.persistence.getTargetCache().removeTargets(e,r,a)}removeOrphanedDocuments(e,r){let a=0,l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.Lr(e,p=>this.ir(e,p,r).next(g=>{g||(a++,c.removeEntry(p,Xi.min()))})).next(()=>c.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,r){return this.ri.set(r,e.currentSequenceNumber),gr.resolve()}removeTarget(e,r){let a=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,r,a){return this.ri.set(a,e.currentSequenceNumber),gr.resolve()}removeReference(e,r,a){return this.ri.set(a,e.currentSequenceNumber),gr.resolve()}updateLimboDocument(e,r){return this.ri.set(r,e.currentSequenceNumber),gr.resolve()}zr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=function a(l){switch(Vc(l)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let p=zh(l);return p?16+a(p):16;case 5:return 2*l.stringValue.length;case 6:return lo(l.bytesValue).approximateByteSize();case 7:return l.referenceValue.length;case 9:return(l.arrayValue.values||[]).reduce((b,D)=>b+a(D),0);case 10:case 11:var c;let g;return c=l.mapValue,g=0,_h(c.fields,(b,D)=>{g+=b.length+a(D)}),g;default:throw _r()}}(e.data.value)),r}ir(e,r,a){return gr.or([()=>this.persistence.Yr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{let l=this.ri.get(r);return gr.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class pp{constructor(e){this.serializer=e}O(e,r,a,l){let c=new Vu("createOrUpgrade",r);a<1&&l>=1&&(function(g){g.createObjectStore("owner")}(e),e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pl,{unique:!0}),e.createObjectStore("documentMutations"),qc(e),function(g){g.createObjectStore("remoteDocuments")}(e));let p=gr.resolve();return a<3&&l>=3&&(a!==0&&(e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal"),qc(e)),p=p.next(()=>function(g){let b=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xi.min().toTimestamp(),targetCount:0};return b.put("targetGlobalKey",D)}(c))),a<4&&l>=4&&(a!==0&&(p=p.next(()=>c.store("mutations").U().next(g=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pl,{unique:!0});let b=c.store("mutations"),D=g.map(H=>b.put(H));return gr.waitFor(D)}))),p=p.next(()=>{(function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),a<5&&l>=5&&(p=p.next(()=>this.ii(c))),a<6&&l>=6&&(p=p.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.si(c)))),a<7&&l>=7&&(p=p.next(()=>this.oi(c))),a<8&&l>=8&&(p=p.next(()=>this._i(e,c))),a<9&&l>=9&&(p=p.next(()=>{e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})),a<10&&l>=10&&(p=p.next(()=>this.ai(c))),a<11&&l>=11&&(p=p.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&l>=12&&(p=p.next(()=>{(function(g){let b=g.createObjectStore("documentOverlays",{keyPath:Xf});b.createIndex("collectionPathOverlayIndex",El,{unique:!1}),b.createIndex("collectionGroupOverlayIndex",Bh,{unique:!1})})(e)})),a<13&&l>=13&&(p=p.next(()=>function(g){let b=g.createObjectStore("remoteDocumentsV14",{keyPath:Lc});b.createIndex("documentKeyIndex",jc),b.createIndex("collectionGroupIndex",wh)}(e)).next(()=>this.ui(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&l>=14&&(p=p.next(()=>this.ci(e,c))),a<15&&l>=15&&(p=p.next(()=>{e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:_d}).createIndex("sequenceNumberIndex",$h,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Sh}).createIndex("documentKeyIndex",lf,{unique:!1})})),a<16&&l>=16&&(p=p.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),a<17&&l>=17&&(p=p.next(()=>{(function(g){g.createObjectStore("globals",{keyPath:"name"})})(e)})),p}si(e){let r=0;return e.store("remoteDocuments").J((a,l)=>{r+=Dl(l)}).next(()=>{let a={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}ii(e){let r=e.store("mutationQueues"),a=e.store("mutations");return r.U().next(l=>gr.forEach(l,c=>{let p=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return a.U("userMutationsIndex",p).next(g=>gr.forEach(g,b=>{b.userId===c.userId||_r();let D=vn(this.serializer,b);return Zl(e,c.userId,D).next(()=>{})}))}))}oi(e){let r=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(l=>{let c=[];return a.J((p,g)=>{let b=new La(p),D=[0,Fo(b)];c.push(r.get(D).next(H=>H?gr.resolve():r.put({targetId:0,path:Fo(b),sequenceNumber:l.highestListenSequenceNumber})))}).next(()=>gr.waitFor(c))})}_i(e,r){e.createObjectStore("collectionParents",{keyPath:Yf});let a=r.store("collectionParents"),l=new up,c=p=>{if(l.add(p)){let g=p.lastSegment(),b=p.popLast();return a.put({collectionId:g,parent:Fo(b)})}};return r.store("remoteDocuments").J({H:!0},(p,g)=>c(new La(p).popLast())).next(()=>r.store("documentMutations").J({H:!0},([p,g,b],D)=>c(su(g).popLast())))}ai(e){let r=e.store("targets");return r.J((a,l)=>{let c=Hn(l),p=Jn(this.serializer,c);return r.put(p)})}ui(e,r){let a=r.store("remoteDocuments"),l=[];return a.J((c,p)=>{let g=r.store("remoteDocumentsV14"),b=(p.document?new Xn(La.fromString(p.document.name).popFirst(5)):p.noDocument?Xn.fromSegments(p.noDocument.path):p.unknownDocument?Xn.fromSegments(p.unknownDocument.path):_r()).path.toArray(),D={prefixPath:b.slice(0,b.length-2),collectionGroup:b[b.length-2],documentId:b[b.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};l.push(g.put(D))}).next(()=>gr.waitFor(l))}ci(e,r){let a=r.store("mutations"),l=new uh(this.serializer),c=new hm(dp.ei,this.serializer.ht);return a.U().next(p=>{let g=new Map;return p.forEach(b=>{var D;let H=(D=g.get(b.userId))!==null&&D!==void 0?D:Ys();vn(this.serializer,b).keys().forEach(te=>H=H.add(te)),g.set(b.userId,H)}),gr.forEach(g,(b,D)=>{let H=new Ai(D),te=xr.Pt(this.serializer,H),ie=c.getIndexManager(H);return new Fd(l,jd.Pt(H,this.serializer,ie,c.referenceDelegate),te,ie).recalculateAndSaveOverlaysForDocumentKeys(new uf(r,oo.oe),b).next()})})}}function qc(n){n.createObjectStore("targetDocuments",{keyPath:Up}).createIndex("documentTargetsIndex",of,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bh,{unique:!0}),n.createObjectStore("targetGlobal")}let fm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pm{constructor(e,r,a,l,c,p,g,b,D,H,te=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=a,this.li=c,this.window=p,this.document=g,this.hi=D,this.Pi=H,this.Ti=te,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=ie=>Promise.resolve(),!pm.p())throw new Cn(Nr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ku(this,l),this.Vi=r+"main",this.serializer=new Ge(b),this.mi=new Ql(this.Vi,this.Ti,new pp(this.serializer)),this.Wr=new Nl,this.Gr=new Nv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new uh(this.serializer),this.jr=new Ft,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,H===!1&&_s("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Cn(Nr.FAILED_PRECONDITION,fm);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new oo(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(r=>{r||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(r=>this.isPrimary&&!r?this.vi(e).next(()=>!1):!!r&&this.Ci(e).next(()=>!0))).catch(e=>{if(Su(e))return Zr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Zr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return Ud(e).get("owner").next(r=>gr.resolve(this.Fi(r)))}Mi(e){return mp(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{let a=So(r,"clientMetadata");return a.U().next(l=>{let c=this.Ni(l,18e5),p=l.filter(g=>c.indexOf(g)===-1);return gr.forEach(p,g=>a.delete(g.clientId)).next(()=>p)})}).catch(()=>[]);if(this.fi)for(let r of e)this.fi.removeItem(this.Li(r.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?gr.resolve(!0):Ud(e).get("owner").next(r=>{if(r!==null&&this.Oi(r.leaseTimestampMs,5e3)&&!this.Bi(r.ownerId)){if(this.Fi(r)&&this.networkEnabled)return!0;if(!this.Fi(r)){if(!r.allowTabSynchronization)throw new Cn(Nr.FAILED_PRECONDITION,fm);return!1}}return!(!this.networkEnabled||!this.inForeground)||mp(e).U().next(a=>this.Ni(a,5e3).find(l=>{if(this.clientId!==l.clientId){let c=!this.networkEnabled&&l.networkEnabled,p=!this.inForeground&&l.inForeground,g=this.networkEnabled===l.networkEnabled;if(c||p&&g)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Zr("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let r=new uf(e,oo.oe);return this.vi(r).next(()=>this.Mi(r))}),this.mi.close(),this.Ki()}Ni(e,r){return e.filter(a=>this.Oi(a.updateTimeMs,r)&&!this.Bi(a.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>mp(e).U().next(r=>this.Ni(r,18e5).map(a=>a.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,r){return jd.Pt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Av(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return xr.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,r,a){var l;let c;Zr("IndexedDbPersistence","Starting transaction:",e);let p=(l=this.Ti)===17?qo:l===16||l===15?rh:l===14||l===13?Bu:l===12?sc:l===11?qh:void _r();return this.mi.runTransaction(e,r==="readonly"?"readonly":"readwrite",p,g=>(c=new uf(g,this.$r?this.$r.next():oo.oe),r==="readwrite-primary"?this.bi(c).next(b=>!!b||this.Di(c)).next(b=>{if(!b)throw _s(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new Cn(Nr.FAILED_PRECONDITION,wd);return a(c)}).next(b=>this.Ci(c).next(()=>b)):this.Ui(c).next(()=>a(c)))).then(g=>(c.raiseOnCommittedEvent(),g))}Ui(e){return Ud(e).get("owner").next(r=>{if(r!==null&&this.Oi(r.leaseTimestampMs,5e3)&&!this.Bi(r.ownerId)&&!this.Fi(r)&&!(this.Pi||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Cn(Nr.FAILED_PRECONDITION,fm)})}Ci(e){let r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ud(e).put("owner",r)}static p(){return Ql.p()}vi(e){let r=Ud(e);return r.get("owner").next(a=>this.Fi(a)?(Zr("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):gr.resolve())}Oi(e,r){let a=Date.now();return!(e<a-r)&&(!(e>a)||(_s(`Detected an update time that is in the future: ${e} > ${a}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ei=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground=this.document.visibilityState==="visible")}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();let r=/(?:Version|Mobile)\/1[456]/;cn()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(e){var r;try{let a=((r=this.fi)===null||r===void 0?void 0:r.getItem(this.Li(e)))!==null;return Zr("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return _s("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(e){_s("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch{}}Li(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ud(n){return So(n,"owner")}function mp(n){return So(n,"clientMetadata")}function $d(n,e){let r=n.projectId;return n.isDefaultDatabase||(r+="."+n.database),"firestore/"+e+"/"+r+"/"}class mm{constructor(e,r,a,l){this.targetId=e,this.fromCache=r,this.Wi=a,this.Gi=l}static zi(e,r){let a=Ys(),l=Ys();for(let c of r.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new mm(e,r.fromCache,a,l)}}class gm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gp{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=cn()?8:Uh(on())>0?6:4}initialize(e,r){this.Zi=e,this.indexManager=r,this.ji=!0}getDocumentsMatchingQuery(e,r,a,l){let c={result:null};return this.Xi(e,r).next(p=>{c.result=p}).next(()=>{if(!c.result)return this.es(e,r,l,a).next(p=>{c.result=p})}).next(()=>{if(c.result)return;let p=new gm;return this.ts(e,r,p).next(g=>{if(c.result=g,this.Hi)return this.ns(e,r,p,g.size)})}).next(()=>c.result)}ns(e,r,a,l){return a.documentReadCount<this.Ji?(ca()<=k.DEBUG&&Zr("QueryEngine","SDK will not create cache indexes for query:",ip(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),gr.resolve()):(ca()<=k.DEBUG&&Zr("QueryEngine","Query:",ip(r),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.Yi*l?(ca()<=k.DEBUG&&Zr("QueryEngine","The SDK decides to create cache indexes for query:",ip(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$c(r))):gr.resolve())}Xi(e,r){if(fy(r))return gr.resolve(null);let a=$c(r);return this.indexManager.getIndexType(e,a).next(l=>l===0?null:(r.limit!==null&&l===1&&(a=$c(r=Ch(r,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,a).next(c=>{let p=Ys(...c);return this.Zi.getDocuments(e,p).next(g=>this.indexManager.getMinOffset(e,a).next(b=>{let D=this.rs(r,g);return this.ss(r,D,p,b.readTime)?this.Xi(e,Ch(r,null,"F")):this.os(e,D,r,b)}))})))}es(e,r,a,l){return fy(r)||l.isEqual(Xi.min())?gr.resolve(null):this.Zi.getDocuments(e,a).next(c=>{let p=this.rs(r,c);return this.ss(r,p,a,l)?gr.resolve(null):(ca()<=k.DEBUG&&Zr("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ip(r)),this.os(e,p,r,vd(l,-1)).next(g=>g))})}rs(e,r){let a=new ha(Sv(e));return r.forEach((l,c)=>{tg(e,c)&&(a=a.add(c))}),a}ss(e,r,a,l){if(e.limit===null)return!1;if(a.size!==r.size)return!0;let c=e.limitType==="F"?r.last():r.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}ts(e,r,a){return ca()<=k.DEBUG&&Zr("QueryEngine","Using full collection scan to execute query:",ip(r)),this.Zi.getDocumentsMatchingQuery(e,r,Sl.min(),a)}os(e,r,a,l){return this.Zi.getDocumentsMatchingQuery(e,a,l).next(c=>(r.forEach(p=>{c=c.insert(p.key,p)}),c))}}class Ry{constructor(e,r,a,l){this.persistence=e,this._s=r,this.serializer=l,this.us=new oa(Bi),this.cs=new Hh(c=>sh(c),ah),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(a)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fd(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.us))}}async function Ig(n,e){return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(l=>{let c=[],p=[],g=Ys();for(let b of a)for(let D of(c.push(b.batchId),b.mutations))g=g.add(D.key);for(let b of l)for(let D of(p.push(b.batchId),b.mutations))g=g.add(D.key);return n.localDocuments.getDocuments(r,g).next(b=>({Ts:b,removedBatchIds:c,addedBatchIds:p}))})})}function Py(n){return n.persistence.runTransaction("Get last remote snapshot version","readonly",e=>n.Gr.getLastRemoteSnapshotVersion(e))}function Pf(n,e,r){let a=Ys(),l=Ys();return r.forEach(c=>a=a.add(c)),e.getEntries(n,a).next(c=>{let p=lu;return r.forEach((g,b)=>{let D=c.get(g);b.isFoundDocument()!==D.isFoundDocument()&&(l=l.add(g)),b.isNoDocument()&&b.version.isEqual(Xi.min())?(e.removeEntry(g,b.readTime),p=p.insert(g,b)):!D.isValidDocument()||b.version.compareTo(D.version)>0||b.version.compareTo(D.version)===0&&D.hasPendingWrites?(e.addEntry(b),p=p.insert(g,b)):Zr("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",b.version)}),{Is:p,Es:l}})}function cu(n,e){return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Gr.getTargetData(r,e).next(l=>l?(a=l,gr.resolve(a)):n.Gr.allocateTargetId(r).next(c=>(a=new oe(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,a).next(()=>a))))}).then(r=>{let a=n.us.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function xu(n,e,r){let a=n.us.get(e);try{r||await n.persistence.runTransaction("Release target",r?"readwrite":"readwrite-primary",l=>n.persistence.referenceDelegate.removeTarget(l,a))}catch(l){if(!Su(l))throw l;Zr("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}n.us=n.us.remove(e),n.cs.delete(a.target)}function lc(n,e,r){let a=Xi.min(),l=Ys();return n.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,b){let D=p.cs.get(b);return D!==void 0?gr.resolve(p.us.get(D)):p.Gr.getTargetData(g,b)}(n,c,$c(e)).next(p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,n.Gr.getMatchingKeysForTargetId(c,p.targetId).next(g=>{l=g})}).next(()=>n._s.getDocumentsMatchingQuery(c,e,r?a:Xi.min(),r?l:Ys())).next(p=>(Af(n,rg(e),p),{documents:p,ds:l})))}function Tg(n,e){let r=n.Gr,a=n.us.get(e);return a?Promise.resolve(a.target):n.persistence.runTransaction("Get target data","readonly",l=>r.ut(l,e).next(c=>c?c.target:null))}function Pa(n,e){let r=n.ls.get(e)||Xi.min();return n.persistence.runTransaction("Get new document changes","readonly",a=>n.hs.getAllFromCollectionGroup(a,e,vd(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Af(n,e,a),a))}function Af(n,e,r){let a=n.ls.get(e)||Xi.min();r.forEach((l,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),n.ls.set(e,a)}function ed(n,e){return`firestore_clients_${n}_${e}`}function Oh(n,e,r){let a=`firestore_mutations_${n}_${r}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function xg(n,e){return`firestore_targets_${n}_${e}`}class yp{constructor(e,r,a,l){this.user=e,this.batchId=r,this.state=a,this.error=l}static fs(e,r,a){let l=JSON.parse(a),c,p=typeof l=="object"&&["pending","acknowledged","rejected"].indexOf(l.state)!==-1&&(l.error===void 0||typeof l.error=="object");return p&&l.error&&(p=typeof l.error.message=="string"&&typeof l.error.code=="string")&&(c=new Cn(l.error.code,l.error.message)),p?new yp(e,r,l.state,c):(_s("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vp{constructor(e,r,a){this.targetId=e,this.state=r,this.error=a}static fs(e,r){let a=JSON.parse(r),l,c=typeof a=="object"&&["not-current","current","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string")&&(l=new Cn(a.error.code,a.error.message)),c?new vp(e,a.state,l):(_s("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ym{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static fs(e,r){let a=JSON.parse(r),l=typeof a=="object"&&a.activeTargetIds instanceof Array,c=kh;for(let p=0;l&&p<a.activeTargetIds.length;++p)l=Qf(a.activeTargetIds[p]),c=c.add(a.activeTargetIds[p]);return l?new ym(e,c):(_s("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Cg{constructor(e,r){this.clientId=e,this.onlineState=r}static fs(e){let r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Cg(r.clientId,r.onlineState):(_s("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kg{constructor(){this.activeTargetIds=kh}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class vm{constructor(e,r,a,l,c){var p,g,b;this.window=e,this.li=r,this.persistenceKey=a,this.ws=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new oa(Bi),this.started=!1,this.vs=[];let D=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Cs=ed(this.persistenceKey,this.ws),this.Fs=(p=this.persistenceKey,`firestore_sequence_number_${p}`),this.Ds=this.Ds.insert(this.ws,new kg),this.Ms=RegExp(`^firestore_clients_${D}_([^_]*)$`),this.xs=RegExp(`^firestore_mutations_${D}_(\\d+)(?:_(.*))?$`),this.Os=RegExp(`^firestore_targets_${D}_(\\d+)$`),this.Ns=(g=this.persistenceKey,`firestore_online_state_${g}`),this.Ls=(b=this.persistenceKey,`firestore_bundle_loaded_v2_${b}`),this.window.addEventListener("storage",this.Ss)}static p(e){return!(!e||!e.localStorage)}async start(){for(let r of await this.syncEngine.$i()){if(r===this.ws)continue;let a=this.getItem(ed(this.persistenceKey,r));if(a){let l=ym.fs(r,a);l&&(this.Ds=this.Ds.insert(l.clientId,l))}}this.Bs();let e=this.storage.getItem(this.Ns);if(e){let r=this.ks(e);r&&this.qs(r)}for(let r of this.vs)this.bs(r);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Fs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(e){let r=!1;return this.Ds.forEach((a,l)=>{l.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Ks(e,"pending")}updateMutationState(e,r,a){this.Ks(e,r,a),this.$s(e)}addLocalQueryTarget(e,r=!0){let a="not-current";if(this.isActiveQueryTarget(e)){let l=this.storage.getItem(xg(this.persistenceKey,e));if(l){let c=vp.fs(e,l);c&&(a=c.state)}}return r&&this.Us.ps(e),this.Bs(),a}removeLocalQueryTarget(e){this.Us.ys(e),this.Bs()}isLocalQueryTarget(e){return this.Us.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xg(this.persistenceKey,e))}updateQueryState(e,r,a){this.Ws(e,r,a)}handleUserChange(e,r,a){r.forEach(l=>{this.$s(l)}),this.currentUser=e,a.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(e){this.Gs(e)}notifyBundleLoaded(e){this.zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(e){let r=this.storage.getItem(e);return Zr("SharedClientState","READ",e,r),r}setItem(e,r){Zr("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Zr("SharedClientState","REMOVE",e),this.storage.removeItem(e)}bs(e){if(e.storageArea===this.storage){if(Zr("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Cs)return void _s("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.Ms.test(e.key)){if(e.newValue==null){let r=this.js(e.key);return this.Hs(r,null)}{let r=this.Js(e.key,e.newValue);if(r)return this.Hs(r.clientId,r)}}else if(this.xs.test(e.key)){if(e.newValue!==null){let r=this.Ys(e.key,e.newValue);if(r)return this.Zs(r)}}else if(this.Os.test(e.key)){if(e.newValue!==null){let r=this.Xs(e.key,e.newValue);if(r)return this.eo(r)}}else if(e.key===this.Ns){if(e.newValue!==null){let r=this.ks(e.newValue);if(r)return this.qs(r)}}else if(e.key===this.Fs){let r=function(a){let l=oo.oe;if(a!=null)try{let c=JSON.parse(a);typeof c=="number"||_r(),l=c}catch(c){_s("SharedClientState","Failed to read sequence number from WebStorage",c)}return l}(e.newValue);r!==oo.oe&&this.sequenceNumberHandler(r)}else if(e.key===this.Ls){let r=this.no(e.newValue);await Promise.all(r.map(a=>this.syncEngine.ro(a)))}}}else this.vs.push(e)})}}get Us(){return this.Ds.get(this.ws)}Bs(){this.setItem(this.Cs,this.Us.gs())}Ks(e,r,a){let l=new yp(this.currentUser,e,r,a),c=Oh(this.persistenceKey,this.currentUser,e);this.setItem(c,l.gs())}$s(e){let r=Oh(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Gs(e){let r={clientId:this.ws,onlineState:e};this.storage.setItem(this.Ns,JSON.stringify(r))}Ws(e,r,a){let l=xg(this.persistenceKey,e),c=new vp(e,r,a);this.setItem(l,c.gs())}zs(e){let r=JSON.stringify(Array.from(e));this.setItem(this.Ls,r)}js(e){let r=this.Ms.exec(e);return r?r[1]:null}Js(e,r){let a=this.js(e);return ym.fs(a,r)}Ys(e,r){let a=this.xs.exec(e),l=Number(a[1]),c=a[2]!==void 0?a[2]:null;return yp.fs(new Ai(c),l,r)}Xs(e,r){let a=Number(this.Os.exec(e)[1]);return vp.fs(a,r)}ks(e){return Cg.fs(e)}no(e){return JSON.parse(e)}async Zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.io(e.batchId,e.state,e.error);Zr("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}eo(e){return this.syncEngine.so(e.targetId,e.state,e.error)}Hs(e,r){let a=r?this.Ds.insert(e,r):this.Ds.remove(e),l=this.Qs(this.Ds),c=this.Qs(a),p=[],g=[];return c.forEach(b=>{l.has(b)||p.push(b)}),l.forEach(b=>{c.has(b)||g.push(b)}),this.syncEngine.oo(p,g).then(()=>{this.Ds=a})}qs(e){this.Ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Qs(e){let r=kh;return e.forEach((a,l)=>{r=r.unionWith(l.activeTargetIds)}),r}}class Dh{constructor(){this._o=new kg,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,a){}addLocalQueryTarget(e,r=!0){return r&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,r,a){this.ao[e]=r}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new kg,Promise.resolve()}handleUserChange(e,r,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rg{uo(e){}shutdown(){}}class Pg{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){for(let e of(Zr("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.To))e(0)}Po(){for(let e of(Zr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.To))e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let wp=null;function Bd(){return wp===null?wp=268435456+Math.round(2147483648*Math.random()):wp++,"0x"+wp.toString(16)}let qd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $0{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}let Il="WebChannelConnection";class wm extends class{get Co(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let r=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+e.host,this.Mo=`projects/${a}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Oo(e,r,a,l,c){let p=Bd(),g=this.No(e,r.toUriEncodedString());Zr("RestConnection",`Sending RPC '${e}' ${p}:`,g,a);let b={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(b,l,c),this.Bo(e,g,b,a).then(D=>(Zr("RestConnection",`Received RPC '${e}' ${p}: `,D),D),D=>{throw zs("RestConnection",`RPC '${e}' ${p} failed with error: `,D,"url: ",g,"request:",a),D})}ko(e,r,a,l,c,p){return this.Oo(e,r,a,l,c)}Lo(e,r,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((l,c)=>e[c]=l),a&&a.headers.forEach((l,c)=>e[c]=l)}No(e,r){let a=qd[e];return`${this.Fo}/v1/${r}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,r,a,l){let c=Bd();return new Promise((p,g)=>{let b=new C;b.setWithCredentials(!0),b.listenOnce(U.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case K.NO_ERROR:let H=b.getResponseJson();Zr(Il,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(H)),p(H);break;case K.TIMEOUT:Zr(Il,`RPC '${e}' ${c} timed out`),g(new Cn(Nr.DEADLINE_EXCEEDED,"Request time out"));break;case K.HTTP_ERROR:let te=b.getStatus();if(Zr(Il,`RPC '${e}' ${c} failed with status:`,te,"response text:",b.getResponseText()),te>0){let ie=b.getResponseJson();Array.isArray(ie)&&(ie=ie[0]);let ye=ie?.error;if(ye&&ye.status&&ye.message){let je=function(Re){let Ye=Re.toLowerCase().replace(/_/g,"-");return Object.values(Nr).indexOf(Ye)>=0?Ye:Nr.UNKNOWN}(ye.status);g(new Cn(je,ye.message))}else g(new Cn(Nr.UNKNOWN,"Server responded with status "+b.getStatus()))}else g(new Cn(Nr.UNAVAILABLE,"Connection failed."));break;default:_r()}}finally{Zr(Il,`RPC '${e}' ${c} completed.`)}});let D=JSON.stringify(l);Zr(Il,`RPC '${e}' ${c} sending request:`,l),b.send(r,"POST",D,a,15)})}qo(e,r,a){let l=Bd(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Se(),g=fe(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;D!==void 0&&(b.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(b.useFetchStreams=!0),this.Lo(b.initMessageHeaders,r,a),b.encodeInitMessageHeaders=!0;let H=c.join("");Zr(Il,`Creating RPC '${e}' stream ${l}: ${H}`,b);let te=p.createWebChannel(H,b),ie=!1,ye=!1,je=new $0({Eo:Ye=>{ye?Zr(Il,`Not sending because RPC '${e}' stream ${l} is closed:`,Ye):(ie||(Zr(Il,`Opening RPC '${e}' stream ${l} transport.`),te.open(),ie=!0),Zr(Il,`RPC '${e}' stream ${l} sending:`,Ye),te.send(Ye))},Ao:()=>te.close()}),Re=(Ye,ht,Ze)=>{Ye.listen(ht,ke=>{try{Ze(ke)}catch(Ie){setTimeout(()=>{throw Ie},0)}})};return Re(te,N.EventType.OPEN,()=>{ye||(Zr(Il,`RPC '${e}' stream ${l} transport opened.`),je.So())}),Re(te,N.EventType.CLOSE,()=>{ye||(ye=!0,Zr(Il,`RPC '${e}' stream ${l} transport closed`),je.Do())}),Re(te,N.EventType.ERROR,Ye=>{ye||(ye=!0,zs(Il,`RPC '${e}' stream ${l} transport errored:`,Ye),je.Do(new Cn(Nr.UNAVAILABLE,"The operation could not be completed")))}),Re(te,N.EventType.MESSAGE,Ye=>{var ht;if(!ye){let Ze=Ye.data[0];Ze||_r();let ke=Ze?.error||((ht=Ze[0])===null||ht===void 0?void 0:ht.error);if(ke){Zr(Il,`RPC '${e}' stream ${l} received error:`,ke);let Ie=ke.status,Ae=function(ut){let ft=ze[ut];if(ft!==void 0)return yy(ft)}(Ie),it=ke.message;Ae===void 0&&(Ae=Nr.INTERNAL,it="Unknown error status: "+Ie+" with message "+ke.message),ye=!0,je.Do(new Cn(Ae,it)),te.close()}else Zr(Il,`RPC '${e}' stream ${l} received:`,Ze),je.vo(Ze)}}),Re(g,ee.STAT_EVENT,Ye=>{Ye.stat===Y.PROXY?Zr(Il,`RPC '${e}' stream ${l} detected buffering proxy`):Ye.stat===Y.NOPROXY&&Zr(Il,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{je.bo()},0),je}}function bp(){return typeof window<"u"?window:null}function td(){return typeof document<"u"?document:null}function zd(n){return new fg(n,!0)}class Ay{constructor(e,r,a=1e3,l=1.5,c=6e4){this.li=e,this.timerId=r,this.Qo=a,this.Ko=l,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let r=Math.floor(this.Uo+this.Ho()),a=Math.max(0,Date.now()-this.Go),l=Math.max(0,r-a);l>0&&Zr("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Uo} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,l,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class Gd{constructor(e,r,a,l,c,p,g,b){this.li=e,this.Yo=a,this.Zo=l,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=g,this.listener=b,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Ay(e,r)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,r){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():r&&r.code===Nr.RESOURCE_EXHAUSTED?(_s(r.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):r&&r.code===Nr.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(r)}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),r=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,l])=>{this.Xo===r&&this.I_(a,l)},a=>{e(()=>{let l=new Cn(Nr.UNKNOWN,"Fetching auth token failed: "+a.message);return this.E_(l)})})}I_(e,r){let a=this.T_(this.Xo);this.stream=this.d_(e,r),this.stream.Ro(()=>{a(()=>this.listener.Ro())}),this.stream.mo(()=>{a(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(l=>{a(()=>this.E_(l))}),this.stream.onMessage(l=>{a(()=>++this.n_==1?this.A_(l):this.onNext(l))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Zr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return r=>{this.li.enqueueAndForget(()=>this.Xo===e?r():(Zr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class il extends Gd{constructor(e,r,a,l,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,l,p),this.serializer=c}d_(e,r){return this.connection.qo("Listen",e,r)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let r=function(l,c){let p;if("targetChange"in c){var g,b;c.targetChange;let D=(g=c.targetChange.targetChangeType||"NO_CHANGE")==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_r(),H=c.targetChange.targetIds||[],te=(b=c.targetChange.resumeToken,l.useProto3Json?(b===void 0||typeof b=="string"||_r(),Fa.fromBase64String(b||"")):(b===void 0||b instanceof Es||b instanceof Uint8Array||_r(),Fa.fromUint8Array(b||new Uint8Array))),ie=c.targetChange.cause;p=new hg(D,H,te,ie&&new Cn(ie.code===void 0?Nr.UNKNOWN:yy(ie.code),ie.message||"")||null)}else if("documentChange"in c){c.documentChange;let D=c.documentChange;D.document,D.document.name,D.document.updateTime;let H=Kh(l,D.document.name),te=Tu(D.document.updateTime),ie=D.document.createTime?Tu(D.document.createTime):Xi.min(),ye=new oc({mapValue:{fields:D.document.fields}}),je=Eo.newFoundDocument(H,te,ie,ye);p=new Od(D.targetIds||[],D.removedTargetIds||[],je.key,je)}else if("documentDelete"in c){c.documentDelete;let D=c.documentDelete;D.document;let H=Kh(l,D.document),te=D.readTime?Tu(D.readTime):Xi.min(),ie=Eo.newNoDocument(H,te);p=new Od([],D.removedTargetIds||[],ie.key,ie)}else if("documentRemove"in c){c.documentRemove;let D=c.documentRemove;D.document;let H=Kh(l,D.document);p=new Od([],D.removedTargetIds||[],H,null)}else{if(!("filter"in c))return _r();{c.filter;let D=c.filter;D.targetId;let{count:H=0,unchangedNames:te}=D,ie=new Iv(H,te);p=new vy(D.targetId,ie)}}return p}(this.serializer,e),a=function(l){if(!("targetChange"in l))return Xi.min();let c=l.targetChange;return c.targetIds&&c.targetIds.length?Xi.min():c.readTime?Tu(c.readTime):Xi.min()}(e);return this.listener.R_(r,a)}V_(e){let r={};r.database=Rv(this.serializer),r.addTarget=function(l,c){let p,g=c.target;if((p=Kp(g)?{documents:o(l,g)}:{query:d(l,g).ct}).targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=by(l,c.resumeToken);let b=Ah(l,c.expectedCount);b!==null&&(p.expectedCount=b)}else if(c.snapshotVersion.compareTo(Xi.min())>0){p.readTime=If(l,c.snapshotVersion.toTimestamp());let b=Ah(l,c.expectedCount);b!==null&&(p.expectedCount=b)}return p}(this.serializer,e);let a=function(l,c){let p=function(g){switch(g){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _r()}}(c.purpose);return p==null?null:{"goog-listen-tags":p}}(this.serializer,e);a&&(r.labels=a),this.c_(r)}m_(e){let r={};r.database=Rv(this.serializer),r.removeTarget=e,this.c_(r)}}class bm extends Gd{constructor(e,r,a,l,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,l,p),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,r){return this.connection.qo("Write",e,r)}A_(e){return e.streamToken||_r(),this.lastStreamToken=e.streamToken,e.writeResults&&e.writeResults.length!==0&&_r(),this.listener.p_()}onNext(e){var r,a;e.streamToken||_r(),this.lastStreamToken=e.streamToken,this.r_.reset();let l=(r=e.writeResults,a=e.commitTime,r&&r.length>0?(a!==void 0||_r(),r.map(p=>{let g;return(g=p.updateTime?Tu(p.updateTime):Tu(a)).isEqual(Xi.min())&&(g=Tu(a)),new Rd(g,p.transformResults||[])})):[]),c=Tu(e.commitTime);return this.listener.y_(c,l)}w_(){let e={};e.database=Rv(this.serializer),this.c_(e)}g_(e){let r={streamToken:this.lastStreamToken,writes:e.map(a=>m(this.serializer,a))};this.c_(r)}}class Sm extends class{}{constructor(e,r,a,l){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=a,this.serializer=l,this.S_=!1}b_(){if(this.S_)throw new Cn(Nr.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,r,a,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection.Oo(e,Ey(r,a),l,c,p)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Nr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Cn(Nr.UNKNOWN,c.toString())})}ko(e,r,a,l,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,g])=>this.connection.ko(e,Ey(r,a),l,p,g,c)).catch(p=>{throw p.name==="FirebaseError"?(p.code===Nr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Cn(Nr.UNKNOWN,p.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Mv{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(_s(r),this.C_=!1):Zr("OnlineStateTracker",r)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}class Ny{constructor(e,r,a,l,c){this.localStore=e,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(p=>{a.enqueueAndForget(async()=>{Wu(this)&&(Zr("RemoteStore","Restarting streams for network reachability change."),await async function(g){g.k_.add(4),await rd(g),g.K_.set("Unknown"),g.k_.delete(4),await Sp(g)}(this))})}),this.K_=new Mv(a,l)}}async function Sp(n){if(Wu(n))for(let e of n.q_)await e(!0)}async function rd(n){for(let e of n.q_)await e(!1)}function Hd(n,e){n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),nd(n)?Ng(n):hc(n).s_()&&Ag(n,e))}function uc(n,e){let r=hc(n);n.B_.delete(e),r.s_()&&Ep(n,e),n.B_.size===0&&(r.s_()?r.a_():Wu(n)&&n.K_.set("Unknown"))}function Ag(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xi.min())>0){let r=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}hc(n).V_(e)}function Ep(n,e){n.U_.xe(e),hc(n).m_(e)}function Ng(n){n.U_=new kv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),hc(n).start(),n.K_.F_()}function nd(n){return Wu(n)&&!hc(n).i_()&&n.B_.size>0}function Wu(n){return n.k_.size===0}async function Kd(n){n.K_.set("Online")}async function Em(n){n.B_.forEach((e,r)=>{Ag(n,e)})}async function Lv(n,e){n.U_=void 0,nd(n)?(n.K_.O_(e),Ng(n)):n.K_.set("Unknown")}async function _m(n,e,r){if(n.K_.set("Online"),e instanceof hg&&e.state===2&&e.cause)try{await async function(a,l){let c=l.cause;for(let p of l.targetIds)a.B_.has(p)&&(await a.remoteSyncer.rejectListen(p,c),a.B_.delete(p),a.U_.removeTarget(p))}(n,e)}catch(a){Zr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Im(n,a)}else if(e instanceof Od?n.U_.$e(e):e instanceof vy?n.U_.Je(e):n.U_.Ge(e),!r.isEqual(Xi.min()))try{let a=await Py(n.localStore);r.compareTo(a)>=0&&await function(l,c){let p=l.U_.it(c);return p.targetChanges.forEach((g,b)=>{if(g.resumeToken.approximateByteSize()>0){let D=l.B_.get(b);D&&l.B_.set(b,D.withResumeToken(g.resumeToken,c))}}),p.targetMismatches.forEach((g,b)=>{let D=l.B_.get(g);if(!D)return;l.B_.set(g,D.withResumeToken(Fa.EMPTY_BYTE_STRING,D.snapshotVersion)),Ep(l,g);let H=new oe(D.target,g,b,D.sequenceNumber);Ag(l,H)}),l.remoteSyncer.applyRemoteEvent(p)}(n,r)}catch(a){Zr("RemoteStore","Failed to raise snapshot:",a),await Im(n,a)}}async function Im(n,e,r){if(!Su(e))throw e;n.k_.add(1),await rd(n),n.K_.set("Offline"),r||(r=()=>Py(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Zr("RemoteStore","Retrying IndexedDB access"),await r(),n.k_.delete(1),await Sp(n)})}function Oy(n,e){return e().catch(r=>Im(n,r,e))}async function zc(n){let e=Lh(n),r=n.L_.length>0?n.L_[n.L_.length-1].batchId:-1;for(;Wu(n)&&n.L_.length<10;)try{let a=await function(l,c){return l.persistence.runTransaction("Get next mutation batch","readonly",p=>(c===void 0&&(c=-1),l.mutationQueue.getNextMutationBatchAfterBatchId(p,c)))}(n.localStore,r);if(a===null){n.L_.length===0&&e.a_();break}r=a.batchId,function(l,c){l.L_.push(c);let p=Lh(l);p.s_()&&p.f_&&p.g_(c.mutations)}(n,a)}catch(a){await Im(n,a)}_p(n)&&Nf(n)}function _p(n){return Wu(n)&&!Lh(n).i_()&&n.L_.length>0}function Nf(n){Lh(n).start()}async function Tm(n){Lh(n).w_()}async function Ip(n){let e=Lh(n);for(let r of n.L_)e.g_(r.mutations)}async function id(n,e,r){let a=n.L_.shift(),l=tm.from(a,e,r);await Oy(n,()=>n.remoteSyncer.applySuccessfulWrite(l)),await zc(n)}async function cc(n,e){e&&Lh(n).f_&&await async function(r,a){var l;if(function(c){switch(c){default:return _r();case Nr.CANCELLED:case Nr.UNKNOWN:case Nr.DEADLINE_EXCEEDED:case Nr.RESOURCE_EXHAUSTED:case Nr.INTERNAL:case Nr.UNAVAILABLE:case Nr.UNAUTHENTICATED:return!1;case Nr.INVALID_ARGUMENT:case Nr.NOT_FOUND:case Nr.ALREADY_EXISTS:case Nr.PERMISSION_DENIED:case Nr.FAILED_PRECONDITION:case Nr.ABORTED:case Nr.OUT_OF_RANGE:case Nr.UNIMPLEMENTED:case Nr.DATA_LOSS:return!0}}(l=a.code)&&l!==Nr.ABORTED){let c=r.L_.shift();Lh(r).__(),await Oy(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,a)),await zc(r)}}(n,e),_p(n)&&Nf(n)}async function Mh(n,e){n.asyncQueue.verifyOperationInProgress(),Zr("RemoteStore","RemoteStore received new credentials");let r=Wu(n);n.k_.add(3),await rd(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Sp(n)}async function ch(n,e){e?(n.k_.delete(2),await Sp(n)):e||(n.k_.add(2),await rd(n),n.K_.set("Unknown"))}function hc(n){var e,r,a;return n.W_||(n.W_=(e=n.datastore,r=n.asyncQueue,a={Ro:Kd.bind(null,n),mo:Em.bind(null,n),po:Lv.bind(null,n),R_:_m.bind(null,n)},e.b_(),new il(r,e.connection,e.authCredentials,e.appCheckCredentials,e.serializer,a)),n.q_.push(async l=>{l?(n.W_.__(),nd(n)?Ng(n):n.K_.set("Unknown")):(await n.W_.stop(),n.U_=void 0)})),n.W_}function Lh(n){var e,r,a;return n.G_||(n.G_=(e=n.datastore,r=n.asyncQueue,a={Ro:()=>Promise.resolve(),mo:Tm.bind(null,n),po:cc.bind(null,n),p_:Ip.bind(null,n),y_:id.bind(null,n)},e.b_(),new bm(r,e.connection,e.authCredentials,e.appCheckCredentials,e.serializer,a)),n.q_.push(async l=>{l?(n.G_.__(),await zc(n)):(await n.G_.stop(),n.L_.length>0&&(Zr("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}class sd{constructor(e,r,a,l,c){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=l,this.removalCallback=c,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,a,l,c){let p=new sd(e,r,Date.now()+a,l,c);return p.start(a),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Cn(Nr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ju(n,e){if(_s("AsyncQueue",`${e}: ${n}`),Su(n))return new Cn(Nr.UNAVAILABLE,`${e}: ${n}`);throw n}class Of{static emptySet(e){return new Of(e.comparator)}constructor(e){this.comparator=e?(r,a)=>e(r,a)||Xn.comparator(r.key,a.key):(r,a)=>Xn.comparator(r.key,a.key),this.keyedMap=Cd(),this.sortedSet=new oa(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,a)=>(e(r),!1))}add(e){let r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){let r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Of)||this.size!==e.size)return!1;let r=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;r.hasNext();){let l=r.getNext().key,c=a.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){let e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){let a=new Of;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=r,a}}class Dy{constructor(){this.z_=new oa(Xn.comparator)}track(e){let r=e.doc.key,a=this.z_.get(r);a?e.type!==0&&a.type===3?this.z_=this.z_.insert(r,e):e.type===3&&a.type!==1?this.z_=this.z_.insert(r,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.z_=this.z_.insert(r,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.z_=this.z_.insert(r,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.z_=this.z_.remove(r):e.type===1&&a.type===2?this.z_=this.z_.insert(r,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.z_=this.z_.insert(r,{type:2,doc:e.doc}):_r():this.z_=this.z_.insert(r,e)}j_(){let e=[];return this.z_.inorderTraversal((r,a)=>{e.push(a)}),e}}class hh{constructor(e,r,a,l,c,p,g,b,D){this.query=e,this.docs=r,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=g,this.excludesMetadataChanges=b,this.hasCachedResults=D}static fromInitialDocuments(e,r,a,l,c){let p=[];return r.forEach(g=>{p.push({type:0,doc:g})}),new hh(e,r,Of.emptySet(r),p,a,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let r=this.docChanges,a=e.docChanges;if(r.length!==a.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==a[l].type||!r[l].doc.isEqual(a[l].doc))return!1;return!0}}class R{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class ue{constructor(){this.queries=Le(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(e,r){let a=e.queries;e.queries=Le(),a.forEach((l,c)=>{for(let p of c.J_)p.onError(r)})})(this,new Cn(Nr.ABORTED,"Firestore shutting down"))}}function Le(){return new Hh(n=>mf(n),pf)}async function _t(n,e){let r=3,a=e.query,l=n.queries.get(a);l?!l.Y_()&&e.Z_()&&(r=2):(l=new R,r=e.Z_()?0:1);try{switch(r){case 0:l.H_=await n.onListen(a,!0);break;case 1:l.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){let p=Ju(c,`Initialization of query '${ip(e.query)}' failed`);return void e.onError(p)}n.queries.set(a,l),l.J_.push(e),e.ea(n.onlineState),l.H_&&e.ta(l.H_)&&Kn(n)}async function Dr(n,e){let r=e.query,a=3,l=n.queries.get(r);if(l){let c=l.J_.indexOf(e);c>=0&&(l.J_.splice(c,1),l.J_.length===0?a=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $r(n,e){let r=!1;for(let a of e){let l=a.query,c=n.queries.get(l);if(c){for(let p of c.J_)p.ta(a)&&(r=!0);c.H_=a}}r&&Kn(n)}function Wr(n,e,r){let a=n.queries.get(e);if(a)for(let l of a.J_)l.onError(r);n.queries.delete(e)}function Kn(n){n.X_.forEach(e=>{e.next()})}(vt=at||(at={})).na="default",vt.Cache="cache";class Mi{constructor(e,r,a){this.query=e,this.ra=r,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=a||{}}ta(e){if(!this.options.includeMetadataChanges){let a=[];for(let l of e.docChanges)l.type!==3&&a.push(l);e=new hh(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ia?this.oa(e)&&(this.ra.next(e),r=!0):this._a(e,this.onlineState)&&(this.aa(e),r=!0),this.sa=e,r}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let r=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),r=!0),r}_a(e,r){return!(e.fromCache&&this.Z_())||(!this.options.ua||r==="Offline")&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let r=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}aa(e){e=hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==at.Cache}}class Xs{constructor(e){this.key=e}}class ra{constructor(e){this.key=e}}class Ga{constructor(e,r){this.query=e,this.da=r,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ys(),this.mutatedKeys=Ys(),this.Va=Sv(e),this.ma=new Of(this.Va)}get fa(){return this.da}ga(e,r){let a=r?r.pa:new Dy,l=r?r.ma:this.ma,c=r?r.mutatedKeys:this.mutatedKeys,p=l,g=!1,b=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,D=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((H,te)=>{let ie=l.get(H),ye=tg(this.query,te)?te:null,je=!!ie&&this.mutatedKeys.has(ie.key),Re=!!ye&&(ye.hasLocalMutations||this.mutatedKeys.has(ye.key)&&ye.hasCommittedMutations),Ye=!1;ie&&ye?ie.data.isEqual(ye.data)?je!==Re&&(a.track({type:3,doc:ye}),Ye=!0):this.ya(ie,ye)||(a.track({type:2,doc:ye}),Ye=!0,(b&&this.Va(ye,b)>0||D&&0>this.Va(ye,D))&&(g=!0)):!ie&&ye?(a.track({type:0,doc:ye}),Ye=!0):ie&&!ye&&(a.track({type:1,doc:ie}),Ye=!0,(b||D)&&(g=!0)),Ye&&(ye?(p=p.add(ye),c=Re?c.add(H):c.delete(H)):(p=p.delete(H),c=c.delete(H)))}),this.query.limit!==null)for(;p.size>this.query.limit;){let H=this.query.limitType==="F"?p.last():p.first();p=p.delete(H.key),c=c.delete(H.key),a.track({type:1,doc:H})}return{ma:p,pa:a,ss:g,mutatedKeys:c}}ya(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,a,l){let c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let p=e.pa.j_();p.sort((H,te)=>function(ie,ye){let je=Re=>{switch(Re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _r()}};return je(ie)-je(ye)}(H.type,te.type)||this.Va(H.doc,te.doc)),this.wa(a),l=l!=null&&l;let g=r&&!l?this.Sa():[],b=this.Ra.size===0&&this.current&&!l?1:0,D=b!==this.Aa;return this.Aa=b,p.length!==0||D?{snapshot:new hh(this.query,e.ma,c,p,e.mutatedKeys,b===0,D,!1,!!a&&a.resumeToken.approximateByteSize()>0),ba:g}:{ba:g}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Dy,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(r=>this.da=this.da.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.da=this.da.delete(r)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=Ys(),this.ma.forEach(a=>{this.Da(a.key)&&(this.Ra=this.Ra.add(a.key))});let r=[];return e.forEach(a=>{this.Ra.has(a)||r.push(new ra(a))}),this.Ra.forEach(a=>{e.has(a)||r.push(new Xs(a))}),r}va(e){this.da=e.ds,this.Ra=Ys();let r=this.ga(e.documents);return this.applyChanges(r,!0)}Ca(){return hh.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class pl{constructor(e,r,a){this.query=e,this.targetId=r,this.view=a}}class Va{constructor(e){this.key=e,this.Fa=!1}}class Cu{constructor(e,r,a,l,c,p){this.localStore=e,this.remoteStore=r,this.eventManager=a,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.Ma={},this.xa=new Hh(g=>mf(g),pf),this.Oa=new Map,this.Na=new Set,this.La=new oa(Xn.comparator),this.Ba=new Map,this.ka=new Oo,this.qa={},this.Qa=new Map,this.Ka=Xh.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Zs(n,e,r=!0){let a,l=Vv(n),c=l.xa.get(e);return c?(l.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await _o(l,e,r,!0),a}async function Aa(n,e){let r=Vv(n);await _o(r,e,!0,!1)}async function _o(n,e,r,a){let l,c=await cu(n.localStore,$c(e)),p=c.targetId,g=n.sharedClientState.addLocalQueryTarget(p,r);return a&&(l=await Ll(n,e,p,g==="current",c.resumeToken)),n.isPrimaryClient&&r&&Hd(n.remoteStore,c),l}async function Ll(n,e,r,a,l){n.Ua=(te,ie,ye)=>async function(je,Re,Ye,ht){let Ze=Re.view.ga(Ye);Ze.ss&&(Ze=await lc(je.localStore,Re.query,!1).then(({documents:it})=>Re.view.ga(it,Ze)));let ke=ht&&ht.targetChanges.get(Re.targetId),Ie=ht&&ht.targetMismatches.get(Re.targetId)!=null,Ae=Re.view.applyChanges(Ze,je.isPrimaryClient,ke,Ie);return q0(je,Re.targetId,Ae.ba),Ae.snapshot}(n,te,ie,ye);let c=await lc(n.localStore,e,!0),p=new Ga(e,c.ds),g=p.ga(c.documents),b=im.createSynthesizedTargetChangeForCurrentChange(r,a&&n.onlineState!=="Offline",l),D=p.applyChanges(g,n.isPrimaryClient,b);q0(n,r,D.ba);let H=new pl(e,r,p);return n.xa.set(e,H),n.Oa.has(r)?n.Oa.get(r).push(e):n.Oa.set(r,[e]),D.snapshot}async function Qu(n,e,r){let a=n.xa.get(e),l=n.Oa.get(a.targetId);if(l.length>1)return n.Oa.set(a.targetId,l.filter(c=>!pf(c,e))),void n.xa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await xu(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&uc(n.remoteStore,a.targetId),xm(n,a.targetId)}).catch(Ao)):(xm(n,a.targetId),await xu(n.localStore,a.targetId,!0))}async function Df(n,e){let r=n.xa.get(e),a=n.Oa.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uc(n.remoteStore,r.targetId))}async function Wd(n,e){try{let r=await function(a,l){let c=l.snapshotVersion,p=a.us;return a.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{let b=a.hs.newChangeBuffer({trackRemovals:!0});p=a.us;let D=[];l.targetChanges.forEach((ie,ye)=>{var je;let Re=p.get(ye);if(!Re)return;D.push(a.Gr.removeMatchingKeys(g,ie.removedDocuments,ye).next(()=>a.Gr.addMatchingKeys(g,ie.addedDocuments,ye)));let Ye=Re.withSequenceNumber(g.currentSequenceNumber);l.targetMismatches.get(ye)!==null?Ye=Ye.withResumeToken(Fa.EMPTY_BYTE_STRING,Xi.min()).withLastLimboFreeSnapshotVersion(Xi.min()):ie.resumeToken.approximateByteSize()>0&&(Ye=Ye.withResumeToken(ie.resumeToken,c)),p=p.insert(ye,Ye),je=Ye,(Re.resumeToken.approximateByteSize()===0||je.snapshotVersion.toMicroseconds()-Re.snapshotVersion.toMicroseconds()>=3e8||ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0)&&D.push(a.Gr.updateTargetData(g,Ye))});let H=lu,te=Ys();if(l.documentUpdates.forEach(ie=>{l.resolvedLimboDocuments.has(ie)&&D.push(a.persistence.referenceDelegate.updateLimboDocument(g,ie))}),D.push(Pf(g,b,l.documentUpdates).next(ie=>{H=ie.Is,te=ie.Es})),!c.isEqual(Xi.min())){let ie=a.Gr.getLastRemoteSnapshotVersion(g).next(ye=>a.Gr.setTargetsMetadata(g,g.currentSequenceNumber,c));D.push(ie)}return gr.waitFor(D).next(()=>b.apply(g)).next(()=>a.localDocuments.getLocalViewOfDocuments(g,H,te)).next(()=>H)}).then(g=>(a.us=p,g))}(n.localStore,e);e.targetChanges.forEach((a,l)=>{let c=n.Ba.get(l);c&&(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1||_r(),a.addedDocuments.size>0?c.Fa=!0:a.modifiedDocuments.size>0?c.Fa||_r():a.removedDocuments.size>0&&(c.Fa||_r(),c.Fa=!1))}),await jh(n,r,e)}catch(r){await Ao(r)}}function My(n,e,r){var a;if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){let l,c=[];n.xa.forEach((p,g)=>{let b=g.view.ea(e);b.snapshot&&c.push(b.snapshot)}),(a=n.eventManager).onlineState=e,l=!1,a.queries.forEach((p,g)=>{for(let b of g.J_)b.ea(e)&&(l=!0)}),l&&Kn(a),c.length&&n.Ma.R_(c),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function B0(n,e,r){n.sharedClientState.updateQueryState(e,"rejected",r);let a=n.Ba.get(e),l=a&&a.key;if(l){let c=new oa(Xn.comparator);c=c.insert(l,Eo.newNoDocument(l,Xi.min()));let p=Ys().add(l),g=new cg(Xi.min(),new Map,new oa(Bi),c,p);await Wd(n,g),n.La=n.La.remove(l),n.Ba.delete(e),jy(n)}else await xu(n.localStore,e,!1).then(()=>xm(n,e,r)).catch(Ao)}async function Jw(n,e){var r;let a=e.batch.batchId;try{let l=await(r=n.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",c=>{let p=e.batch.keys(),g=r.hs.newChangeBuffer({trackRemovals:!0});return function(b,D,H,te){let ie=H.batch,ye=ie.keys(),je=gr.resolve();return ye.forEach(Re=>{je=je.next(()=>te.getEntry(D,Re)).next(Ye=>{let ht=H.docVersions.get(Re);ht!==null||_r(),0>Ye.version.compareTo(ht)&&(ie.applyToRemoteDocument(Ye,H),Ye.isValidDocument()&&(Ye.setReadTime(H.commitVersion),te.addEntry(Ye)))})}),je.next(()=>b.mutationQueue.removeMutationBatch(D,ie))}(r,c,e,g).next(()=>g.apply(c)).next(()=>r.mutationQueue.performConsistencyCheck(c)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(c,p,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,function(b){let D=Ys();for(let H=0;H<b.mutationResults.length;++H)b.mutationResults[H].transformResults.length>0&&(D=D.add(b.batch.mutations[H].key));return D}(e))).next(()=>r.localDocuments.getDocuments(c,p))});Fv(n,a,null),jv(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await jh(n,l)}catch(l){await Ao(l)}}async function SS(n,e,r){var a;try{let l=await(a=n.localStore).persistence.runTransaction("Reject batch","readwrite-primary",c=>{let p;return a.mutationQueue.lookupMutationBatch(c,e).next(g=>(g!==null||_r(),p=g.keys(),a.mutationQueue.removeMutationBatch(c,g))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,p,e)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,p)).next(()=>a.localDocuments.getDocuments(c,p))});Fv(n,e,r),jv(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await jh(n,l)}catch(l){await Ao(l)}}function jv(n,e){(n.Qa.get(e)||[]).forEach(r=>{r.resolve()}),n.Qa.delete(e)}function Fv(n,e,r){let a=n.qa[n.currentUser.toKey()];if(a){let l=a.get(e);l&&(r?l.reject(r):l.resolve(),a=a.remove(e)),n.qa[n.currentUser.toKey()]=a}}function xm(n,e,r=null){for(let a of(n.sharedClientState.removeLocalQueryTarget(e),n.Oa.get(e)))n.xa.delete(a),r&&n.Ma.Wa(a,r);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(a=>{n.ka.containsKey(a)||Ly(n,a)})}function Ly(n,e){n.Na.delete(e.path.canonicalString());let r=n.La.get(e);r!==null&&(uc(n.remoteStore,r),n.La=n.La.remove(e),n.Ba.delete(r),jy(n))}function q0(n,e,r){for(let a of r)a instanceof Xs?(n.ka.addReference(a.key,e),function(l,c){let p=c.key,g=p.path.canonicalString();l.La.get(p)||l.Na.has(g)||(Zr("SyncEngine","New document in limbo: "+p),l.Na.add(g),jy(l))}(n,a)):a instanceof ra?(Zr("SyncEngine","Document no longer in limbo: "+a.key),n.ka.removeReference(a.key,e),n.ka.containsKey(a.key)||Ly(n,a.key)):_r()}function jy(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){let e=n.Na.values().next().value;n.Na.delete(e);let r=new Xn(La.fromString(e)),a=n.Ka.next();n.Ba.set(a,new Va(r)),n.La=n.La.insert(r,a),Hd(n.remoteStore,new oe($c(dy(r.path)),a,"TargetPurposeLimboResolution",oo.oe))}}async function jh(n,e,r){let a=[],l=[],c=[];n.xa.isEmpty()||(n.xa.forEach((p,g)=>{c.push(n.Ua(g,e,r).then(b=>{var D;if((b||r)&&n.isPrimaryClient){let H=b?!b.fromCache:(D=r?.targetChanges.get(g.targetId))===null||D===void 0?void 0:D.current;n.sharedClientState.updateQueryState(g.targetId,H?"current":"not-current")}if(b){a.push(b);let H=mm.zi(g.targetId,b);l.push(H)}}))}),await Promise.all(c),n.Ma.R_(a),await async function(p,g){try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>gr.forEach(g,D=>gr.forEach(D.Wi,H=>p.persistence.referenceDelegate.addReference(b,D.targetId,H)).next(()=>gr.forEach(D.Gi,H=>p.persistence.referenceDelegate.removeReference(b,D.targetId,H)))))}catch(b){if(!Su(b))throw b;Zr("LocalStore","Failed to update sequence numbers: "+b)}for(let b of g){let D=b.targetId;if(!b.fromCache){let H=p.us.get(D),te=H.snapshotVersion,ie=H.withLastLimboFreeSnapshotVersion(te);p.us=p.us.insert(D,ie)}}}(n.localStore,l))}async function z0(n,e){var r;if(!n.currentUser.isEqual(e)){Zr("SyncEngine","User change. New user:",e.toKey());let a=await Ig(n.localStore,e);n.currentUser=e,r="'waitForPendingWrites' promise is rejected due to a user change.",n.Qa.forEach(l=>{l.forEach(c=>{c.reject(new Cn(Nr.CANCELLED,r))})}),n.Qa.clear(),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await jh(n,a.Ts)}}function ES(n,e){let r=n.Ba.get(e);if(r&&r.Fa)return Ys().add(r.key);{let a=Ys(),l=n.Oa.get(e);if(!l)return a;for(let c of l){let p=n.xa.get(c);a=a.unionWith(p.view.fa)}return a}}async function _S(n,e){let r=await lc(n.localStore,e.query,!0),a=e.view.va(r);return n.isPrimaryClient&&q0(n,e.targetId,a.ba),a}async function k_(n,e){return Pa(n.localStore,e).then(r=>jh(n,r))}async function IS(n,e,r,a){let l=await function(c,p){let g=c.mutationQueue;return c.persistence.runTransaction("Lookup mutation documents","readonly",b=>g.On(b,p).next(D=>D?c.localDocuments.getDocuments(b,D):gr.resolve(null)))}(n.localStore,e);l!==null?(r==="pending"?await zc(n.remoteStore):r==="acknowledged"||r==="rejected"?(Fv(n,e,a||null),jv(n,e),function(c,p){c.mutationQueue.Ln(p)}(n.localStore,e)):_r(),await jh(n,l)):Zr("SyncEngine","Cannot apply mutation batch with id: "+e)}async function R_(n,e){if(Vv(n),Qw(n),e===!0&&n.$a!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),a=await Cm(n,r.toArray());for(let l of(n.$a=!0,await ch(n.remoteStore,!0),a))Hd(n.remoteStore,l)}else if(e===!1&&n.$a!==!1){let r=[],a=Promise.resolve();n.Oa.forEach((l,c)=>{n.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(xm(n,c),xu(n.localStore,c,!0))),uc(n.remoteStore,c)}),await a,await Cm(n,r),n.Ba.forEach((l,c)=>{uc(n.remoteStore,c)}),n.ka.wr(),n.Ba=new Map,n.La=new oa(Xn.comparator),n.$a=!1,await ch(n.remoteStore,!1)}}async function Cm(n,e,r){let a=[],l=[];for(let c of e){let p,g=n.Oa.get(c);if(g&&g.length!==0)for(let b of(p=await cu(n.localStore,$c(g[0])),g)){let D=n.xa.get(b),H=await _S(n,D);H.snapshot&&l.push(H.snapshot)}else{let b=await Tg(n.localStore,c);p=await cu(n.localStore,b),await Ll(n,Fy(b),c,!1,p.resumeToken)}a.push(p)}return n.Ma.R_(l),a}function Fy(n){var e,r,a,l;return e=n.path,r=n.collectionGroup,a=n.orderBy,l=n.filters,new xh(e,r,a,l,n.limit,"F",n.startAt,n.endAt)}function P_(n){return n.localStore.persistence.$i()}async function A_(n,e,r,a){if(n.$a)return void Zr("SyncEngine","Ignoring unexpected query state notification.");let l=n.Oa.get(e);if(l&&l.length>0)switch(r){case"current":case"not-current":{let c=await Pa(n.localStore,rg(l[0])),p=cg.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Fa.EMPTY_BYTE_STRING);await jh(n,c,p);break}case"rejected":await xu(n.localStore,e,!0),xm(n,e,a);break;default:_r()}}async function N_(n,e,r){let a=Vv(n);if(a.$a){for(let l of e){if(a.Oa.has(l)&&a.sharedClientState.isActiveQueryTarget(l)){Zr("SyncEngine","Adding an already active target "+l);continue}let c=await Tg(a.localStore,l),p=await cu(a.localStore,c);await Ll(a,Fy(c),p.targetId,!1,p.resumeToken),Hd(a.remoteStore,p)}for(let l of r)a.Oa.has(l)&&await xu(a.localStore,l,!1).then(()=>{uc(a.remoteStore,l),xm(a,l)}).catch(Ao)}}function Vv(n){return n.remoteStore.remoteSyncer.applyRemoteEvent=Wd.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=ES.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=B0.bind(null,n),n.Ma.R_=$r.bind(null,n.eventManager),n.Ma.Wa=Wr.bind(null,n.eventManager),n}function Qw(n){return n.remoteStore.remoteSyncer.applySuccessfulWrite=Jw.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=SS.bind(null,n),n}class Vy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zd(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,r){return null}Ya(e,r){return null}Ha(e){var r;return r=this.persistence,new Ry(r,new gp,e.initialUser,this.serializer)}ja(e){return new hm(dp.ei,this.serializer)}za(e){return new Dh}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vy.provider={build:()=>new Vy};class TS extends Vy{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,r){return this.persistence.referenceDelegate instanceof fp||_r(),new Zh(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}ja(e){let r=this.cacheSizeBytes!==void 0?Ol.withCacheSize(this.cacheSizeBytes):Ol.DEFAULT;return new hm(a=>fp.ei(a,r),this.serializer)}}class xS extends Vy{constructor(e,r,a){super(),this.Za=e,this.cacheSizeBytes=r,this.forceOwnership=a,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await Qw(this.Za.syncEngine),await zc(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){var r;return r=this.persistence,new Ry(r,new gp,e.initialUser,this.serializer)}Ja(e,r){return new Zh(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ya(e,r){let a=new Ed(r,this.persistence);return new Mc(e.asyncQueue,a)}ja(e){let r=$d(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=this.cacheSizeBytes!==void 0?Ol.withCacheSize(this.cacheSizeBytes):Ol.DEFAULT;return new pm(this.synchronizeTabs,r,e.clientId,a,e.asyncQueue,bp(),td(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new Dh}}class Uv{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>My(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=z0.bind(null,this.syncEngine),await ch(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ue}createDatastore(e){let r=zd(e.databaseInfo.databaseId),a=new wm(e.databaseInfo);return new Sm(e.authCredentials,e.appCheckCredentials,a,r)}createRemoteStore(e){var r;return r=this.localStore,new Ny(r,this.datastore,e.asyncQueue,a=>My(this.syncEngine,a,0),Pg.p()?new Pg:new Rg)}createSyncEngine(e,r){return function(a,l,c,p,g,b,D){let H=new Cu(a,l,c,p,g,b);return D&&(H.$a=!0),H}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){Zr("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await rd(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Uv.provider={build:()=>new Uv};class CS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,r){setTimeout(()=>{this.muted||e(r)},0)}}class kS{constructor(e,r,a,l,c){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=l,this.user=Ai.UNAUTHENTICATED,this.clientId=jo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async p=>{Zr("FirestoreClient","Received user=",p.uid),await this.authCredentialListener(p),this.user=p}),this.appCheckCredentials.start(a,p=>(Zr("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let a=Ju(r,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function G0(n,e){n.asyncQueue.verifyOperationInProgress(),Zr("FirestoreClient","Initializing OfflineComponentProvider");let r=n.configuration;await e.initialize(r);let a=r.initialUser;n.setCredentialChangeListener(async l=>{a.isEqual(l)||(await Ig(e.localStore,l),a=l)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Yw(n,e){n.asyncQueue.verifyOperationInProgress();let r=await RS(n);Zr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,n.configuration),n.setCredentialChangeListener(a=>Mh(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>Mh(e.remoteStore,l)),n._onlineComponents=e}async function RS(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Zr("FirestoreClient","Using user provided OfflineComponentProvider");try{await G0(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!(e.name==="FirebaseError"?e.code===Nr.FAILED_PRECONDITION||e.code===Nr.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11))throw e;zs("Error using user provided cache. Falling back to memory cache: "+e),await G0(n,new Vy)}}else Zr("FirestoreClient","Using default OfflineComponentProvider"),await G0(n,new TS(void 0));return n._offlineComponents}async function Xw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Zr("FirestoreClient","Using user provided OnlineComponentProvider"),await Yw(n,n._uninitializedComponentsProvider._online)):(Zr("FirestoreClient","Using default OnlineComponentProvider"),await Yw(n,new Uv))),n._onlineComponents}async function $v(n){let e=await Xw(n),r=e.eventManager;return r.onListen=Zs.bind(null,e.syncEngine),r.onUnlisten=Qu.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Aa.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Df.bind(null,e.syncEngine),r}function Zw(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}let eb=new Map;function tb(n){if(!Xn.isDocumentKey(n))throw new Cn(Nr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Bv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{var e;let r=(e=n).constructor?e.constructor.name:null;return r?`a custom ${r} object`:"an object"}}return typeof n=="function"?"a function":_r()}function qv(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Cn(Nr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=Bv(n);throw new Cn(Nr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return n}class H0{constructor(e){var r,a;if(e.host===void 0){if(e.ssl!==void 0)throw new Cn(Nr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Cn(Nr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(l,c,p,g){if(c===!0&&g===!0)throw new Cn(Nr.INVALID_ARGUMENT,`${l} and ${p} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zw((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Cn(Nr.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Cn(Nr.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Cn(Nr.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var r,a;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(r=this.experimentalLongPollingOptions,a=e.experimentalLongPollingOptions,r.timeoutSeconds===a.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class K0{constructor(e,r,a,l){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Cn(Nr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Cn(Nr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ju;switch(r.type){case"firstParty":return new yo(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Cn(Nr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let r=eb.get(e);r&&(Zr("ComponentProvider","Removing Datastore"),eb.delete(e),r.terminate())}(this),Promise.resolve()}}class ad{constructor(e,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ad(this.firestore,e,this._query)}}class Gc{constructor(e,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gc(this.firestore,e,this._key)}}class Uy extends ad{constructor(e,r,a){super(e,r,dy(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Gc(this.firestore,null,new Xn(e))}withConverter(e){return new Uy(this.firestore,e,this._path)}}class W0{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Ay(this,"async_queue_retry"),this.fu=()=>{let a=td();a&&Zr("AsyncQueue","Visibility state changed to "+a.visibilityState),this.r_.Jo()},this.gu=e;let r=td();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;let r=td();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});let r=new ks;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Su(e))throw e;Zr("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){let r=this.gu.then(()=>(this.Ru=!0,e().catch(a=>{let l;throw this.Au=a,this.Ru=!1,_s("INTERNAL UNHANDLED ERROR: ",(l=a.message||"",a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l)),a}).then(a=>(this.Ru=!1,a))));return this.gu=r,r}enqueueAfterDelay(e,r,a){this.pu(),this.mu.indexOf(e)>-1&&(r=0);let l=sd.createAndSchedule(this,e,r,a,c=>this.Su(c));return this.du.push(l),l}pu(){this.Au&&_r()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(let r of this.du)if(r.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{for(let r of(this.du.sort((a,l)=>a.targetTimeMs-l.targetTimeMs),this.du))if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let r=this.du.indexOf(e);this.du.splice(r,1)}}function zv(n){return function(e,r){if(typeof e!="object"||e===null)return!1;for(let a of r)if(a in e&&typeof e[a]=="function")return!0;return!1}(n,["next","error","complete"])}class J0 extends K0{constructor(e,r,a,l){super(e,r,a,l),this.type="firestore",this._queue=new W0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new W0(e),this._firestoreClient=void 0,await e}}}class Og{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Og(Fa.fromBase64String(e))}catch(r){throw new Cn(Nr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Og(Fa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class km{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Cn(Nr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ao(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tp{constructor(e){this._methodName=e}}class Dg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Cn(Nr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Cn(Nr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bi(this._lat,e._lat)||Bi(this._long,e._long)}}class Gv{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}let rb=/^__.*__$/;class O_{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return this.fieldMask!==null?new Nd(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ad(e,this.data,r,this.fieldTransforms)}}class D_{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return new Nd(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Q0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _r()}}class Hv{constructor(e,r,a,l,c,p){this.settings=e,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=l,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Hv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var r;let a=(r=this.path)===null||r===void 0?void 0:r.child(e),l=this.xu({path:a,Nu:!1});return l.Lu(e),l}Bu(e){var r;let a=(r=this.path)===null||r===void 0?void 0:r.child(e),l=this.xu({path:a,Nu:!1});return l.Fu(),l}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Bt(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Q0(this.Mu)&&rb.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class nb{constructor(e,r,a){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=a||zd(e)}$u(e,r,a,l=!1){return new Hv({Mu:e,methodName:r,Ku:a,path:ao.emptyPath(),Nu:!1,Qu:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ib(n){let e=n._freezeSettings(),r=zd(n._databaseId);return new nb(n._databaseId,!!e.ignoreUndefinedProperties,r)}class sb extends Tp{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sb}}function ab(n,e,r){return new Hv({Mu:3,Ku:e.settings.Ku,methodName:n._methodName,Nu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ob extends null{_toFieldTransform(e){return new Sf(e.path,new Gu)}isEqual(e){return e instanceof ob}}class h extends Tp{constructor(e,r){super(e),this.Uu=r}_toFieldTransform(e){let r=ab(this,e,!0),a=new zo(this.Uu.map(l=>f(l,r)));return new Sf(e.path,a)}isEqual(e){return e instanceof h&&zi(this.Uu,e.Uu)}}class t extends Tp{constructor(e,r){super(e),this.Uu=r}_toFieldTransform(e){let r=ab(this,e,!0),a=new kd(this.Uu.map(l=>f(l,r)));return new Sf(e.path,a)}isEqual(e){return e instanceof t&&zi(this.Uu,e.Uu)}}class s extends Tp{constructor(e,r){super(e),this.Wu=r}_toFieldTransform(e){let r=new bf(e.serializer,vf(e.serializer,this.Wu));return new Sf(e.path,r)}isEqual(e){return e instanceof s&&this.Wu===e.Wu}}function u(n,e,r,a=!1){return f(r,n.$u(a?4:3,e))}function f(n,e){if(E(n=zt(n)))return $("Unsupported field value:",e,n),w(n,e);if(n instanceof Tp)return function(r,a){if(!Q0(a.Mu))throw a.qu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${r._methodName}() is not currently supported inside arrays`);let l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,a){let l=[],c=0;for(let p of r){let g=f(p,a.ku(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(n,e)}return function(r,a){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vf(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let l=bo.fromDate(r);return{timestampValue:If(a.serializer,l)}}if(r instanceof bo){let l=new bo(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:If(a.serializer,l)}}if(r instanceof Dg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Og)return{bytesValue:by(a.serializer,r._byteString)};if(r instanceof Gc){let l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Sy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Gv)return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return ig(a.serializer,l)})}}}}};throw a.qu(`Unsupported field value: ${Bv(r)}`)}(n,e)}function w(n,e){let r={};return au(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_h(n,(a,l)=>{let c=f(l,e.Ou(a));c!=null&&(r[a]=c)}),{mapValue:{fields:r}}}function E(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bo||n instanceof Dg||n instanceof Og||n instanceof Gc||n instanceof Tp||n instanceof Gv)}function $(n,e,r){if(!E(r)||!(typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null))){let a=Bv(r);throw a==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+a)}}function J(n,e,r){if((e=zt(e))instanceof km)return e._internalPath;if(typeof e=="string")return rt(n,e);throw Bt("Field path arguments must be of type string or ",n,!1,void 0,r)}let ge=RegExp("[~\\*/\\[\\]]");function rt(n,e,r){if(e.search(ge)>=0)throw Bt(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,r);try{return new km(...e.split("."))._internalPath}catch{throw Bt(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,r)}}function Bt(n,e,r,a,l){let c=a&&!a.isEmpty(),p=l!==void 0,g=`Function ${e}() called with invalid data`;r&&(g+=" (via `toFirestore()`)"),g+=". ";let b="";return(c||p)&&(b+=" (found",c&&(b+=` in field ${a}`),p&&(b+=` in document ${l}`),b+=")"),new Cn(Nr.INVALID_ARGUMENT,g+n+b)}function ir(n,e){return n.some(r=>r.isEqual(e))}class Rr{constructor(e,r,a,l,c){this._firestore=e,this._userDataWriter=r,this._key=a,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Gc(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Vn(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let r=this._document.data.field(oi("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Vn extends Rr{data(){return super.data()}}function oi(n,e){return typeof e=="string"?rt(n,e):e instanceof km?e._internalPath:e._delegate._internalPath}class vi{}class Gs extends vi{}class ls extends Gs{constructor(e,r,a){super(),this._field=e,this._op=r,this._value=a,this.type="where"}static _create(e,r,a){return new ls(e,r,a)}_apply(e){let r=this._parse(e);return $y(e._query,r),new ad(e.firestore,e.converter,Jp(e._query,r))}_parse(e){let r=ib(e.firestore);return function(a,l,c,p,g,b,D){let H;if(g.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Cn(Nr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){eu(D,b);let te=[];for(let ie of D)te.push(Kt(p,a,ie));H={arrayValue:{values:te}}}else H=Kt(p,a,D)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||eu(D,b),H=u(c,l,D,b==="in"||b==="not-in");return da.create(g,b,H)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}class dr extends vi{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new dr(e,r)}_parse(e){let r=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:to.create(r,this._getOperator())}_apply(e){let r=this._parse(e);return r.getFilters().length===0?e:(function(a,l){let c=a;for(let p of l.getFlattenedFilters())$y(c,p),c=Jp(c,p)}(e._query,r),new ad(e.firestore,e.converter,Jp(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lt extends Gs{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Lt(e,r)}_apply(e){let r=function(a,l,c){if(a.startAt!==null)throw new Cn(Nr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Cn(Nr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zp(l,c)}(e._query,this._field,this._direction);return new ad(e.firestore,e.converter,function(a,l){let c=a.explicitOrderBy.concat([l]);return new xh(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class Vt extends Gs{constructor(e,r,a){super(),this.type=e,this._limit=r,this._limitType=a}static _create(e,r,a){return new Vt(e,r,a)}_apply(e){return new ad(e.firestore,e.converter,Ch(e._query,this._limit,this._limitType))}}class er extends Gs{constructor(e,r,a){super(),this.type=e,this._docOrFields=r,this._inclusive=a}static _create(e,r,a){return new er(e,r,a)}_apply(e){var r;let a=Ar(e,this.type,this._docOrFields,this._inclusive);return new ad(e.firestore,e.converter,new xh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt))}}class fr extends Gs{constructor(e,r,a){super(),this.type=e,this._docOrFields=r,this._inclusive=a}static _create(e,r,a){return new fr(e,r,a)}_apply(e){var r;let a=Ar(e,this.type,this._docOrFields,this._inclusive);return new ad(e.firestore,e.converter,new xh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a))}}function Ar(n,e,r,a){if(r[0]=zt(r[0]),r[0]instanceof Rr)return function(l,c,p,g,b){if(!g)throw new Cn(Nr.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);let D=[];for(let H of Wp(l))if(H.field.isKeyField())D.push(Ra(c,g.key));else{let te=g.data.field(H.field);if(No(te))throw new Cn(Nr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+H.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(te===null){let ie=H.field.canonicalString();throw new Cn(Nr.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ie}' (used as the orderBy) does not exist.`)}D.push(te)}return new Uc(D,b)}(n._query,n.firestore._databaseId,e,r[0]._document,a);{let l=ib(n.firestore);return function(c,p,g,b,D,H){let te=c.explicitOrderBy;if(D.length>te.length)throw new Cn(Nr.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let ie=[];for(let ye=0;ye<D.length;ye++){let je=D[ye];if(te[ye].field.isKeyField()){if(typeof je!="string")throw new Cn(Nr.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof je}`);if(!Al(c)&&je.indexOf("/")!==-1)throw new Cn(Nr.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${b}() must be a plain document ID, but '${je}' contains a slash.`);let Re=c.path.child(La.fromString(je));if(!Xn.isDocumentKey(Re))throw new Cn(Nr.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${b}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);let Ye=new Xn(Re);ie.push(Ra(p,Ye))}else{let Re=u(g,b,je);ie.push(Re)}}return new Uc(ie,H)}(n._query,n.firestore._databaseId,l,e,r,a)}}function Kt(n,e,r){if(typeof(r=zt(r))=="string"){if(r==="")throw new Cn(Nr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Al(e)&&r.indexOf("/")!==-1)throw new Cn(Nr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let a=e.path.child(La.fromString(r));if(!Xn.isDocumentKey(a))throw new Cn(Nr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Ra(n,new Xn(a))}if(r instanceof Gc)return Ra(n,r._key);throw new Cn(Nr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bv(r)}.`)}function eu(n,e){if(!Array.isArray(n)||n.length===0)throw new Cn(Nr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $y(n,e){let r=function(a,l){for(let c of a)for(let p of c.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Cn(Nr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Cn(Nr.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class By{convertValue(e,r="none"){switch(Vc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw _r()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){let a={};return _h(e,(l,c)=>{a[l]=this.convertValue(c,r)}),a}convertVectorValue(e){var r,a,l;return new Gv((l=(a=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||a===void 0?void 0:a.values)===null||l===void 0?void 0:l.map(c=>Wa(c.doubleValue)))}convertGeoPoint(e){return new Dg(Wa(e.latitude),Wa(e.longitude))}convertArray(e,r){return(e.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(e,r){switch(r){case"previous":let a=zh(e);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){let r=qu(e);return new bo(r.seconds,r.nanos)}convertDocumentKey(e,r){let a=La.fromString(e);X(a)||_r();let l=new dl(a.get(1),a.get(3)),c=new Xn(a.popFirst(5));return l.isEqual(r)||_s(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),c}}class Mf{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lf extends Rr{constructor(e,r,a,l,c,p){super(e,r,a,l,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let r=new qy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){let a=this._document.data.field(oi("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class qy extends Lf{data(e={}){return super.data(e)}}class PS{constructor(e,r,a,l){this._firestore=e,this._userDataWriter=r,this._snapshot=l,this.metadata=new Mf(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){let e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(a=>{e.call(r,new qy(this._firestore,this._userDataWriter,a.key,a,new Mf(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Cn(Nr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(p=>{let g=new qy(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Mf(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(p=>l||p.type!==3).map(p=>{let g=new qy(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Mf(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter),b=-1,D=-1;return p.type!==0&&(b=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),p.type!==1&&(D=(c=c.add(p.doc)).indexOf(p.doc.key)),{type:function(H){switch(H){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _r()}}(p.type),doc:g,oldIndex:b,newIndex:D}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}class jf extends By{constructor(e){super(),this.firestore=e}convertBytes(e){return new Og(e)}convertReference(e){let r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gc(this.firestore,null,r)}}(function(n=!0){Qs=$a,zn(new Yt("firestore",(e,{instanceIdentifier:r,options:a})=>{let l=e.getProvider("app").getImmediate(),c=new J0(new bl(e.getProvider("auth-internal")),new vu(e.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Cn(Nr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(p.options.projectId,g)}(l,r),l);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Nn(Fi,"4.7.5",void 0),Nn(Fi,"4.7.5","esm2017")})(),Nn("firebase","11.0.2","app");let Yu=Array.from(Ut.values()).length===0?Lr({apiKey:"AIzaSyAYph_1BvaIZjFDWT0PejKvNR-dFsIbDsw",authDomain:"maglit.firebaseapp.com",projectId:"maglit",storageBucket:"maglit.appspot.com",messagingSenderId:"876988542714",appId:"1:876988542714:web:24e1ddf716e4b378926343",measurementId:"G-Y4JMVH9R3W"}):Br(),Kv=function(n=Br()){let e=Qr(n,"auth");if(e.isInitialized())return e.getImmediate();let r=function(g,b){let D=Qr(g,"auth");if(D.isInitialized()){let H=D.getImmediate();if(zi(D.getOptions(),b??{}))return H;io(H,"already-initialized")}return D.initialize({options:b})}(n,{popupRedirectResolver:kt,persistence:[B,kl,Jl]}),a=tn("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){let g=new URL(a,location.origin);if(location.origin===g.origin){var l,c;let b=hs(g.toString());l=()=>b(r.currentUser),zt(r).beforeAuthStateChanged(b,l),c=D=>b(D),zt(r).onIdTokenChanged(c,void 0,void 0)}}let p=Or("auth");return p&&function(g,b,D){let H=zt(g);ii(H._canInitEmulator,H,"emulator-config-failed"),ii(/^https?:\/\//.test(b),H,"invalid-emulator-scheme");let te=us(b),{host:ie,port:ye}=function(Re){let Ye=us(Re),ht=/(\/\/)?([^?#/]+)/.exec(Re.substr(Ye.length));if(!ht)return{host:"",port:null};let Ze=ht[2].split("@").pop()||"",ke=/^(\[[^\]]+\])(:|$)/.exec(Ze);if(ke){let Ie=ke[1];return{host:Ie,port:Cs(Ze.substr(Ie.length+1))}}{let[Ie,Ae]=Ze.split(":");return{host:Ie,port:Cs(Ae)}}}(b),je=ye===null?"":`:${ye}`;H.config.emulator={url:`${te}//${ie}${je}/`},H.settings.appVerificationDisabledForTesting=!0,H.emulatorConfig=Object.freeze({host:ie,port:ye,protocol:te.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function Re(){let Ye=document.createElement("p"),ht=Ye.style;Ye.innerText="Running in emulator mode. Do not use with production credentials.",ht.position="fixed",ht.width="100%",ht.backgroundColor="#ffffff",ht.border=".1em solid #000000",ht.color="#b50000",ht.bottom="0px",ht.left="0px",ht.margin="0px",ht.zIndex="10000",ht.textAlign="center",Ye.classList.add("firebase-emulator-warning"),document.body.appendChild(Ye)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",Re):Re())}()}(r,`http://${p}`),r}(Yu),zy=function(n,e){let r=Qr(typeof n=="object"?n:Br(),"firestore").getImmediate({identifier:typeof n=="string"?n:"(default)"});if(!r._initialized){let a=wn("firestore");a&&function(l,c,p,g={}){var b;let D=(l=qv(l,K0))._getSettings(),H=`${c}:${p}`;if(D.host!=="firestore.googleapis.com"&&D.host!==H&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),l._setSettings(Object.assign(Object.assign({},D),{host:H,ssl:!1})),g.mockUserToken){let te,ie;if(typeof g.mockUserToken=="string")te=g.mockUserToken,ie=Ai.MOCK_USER;else{te=function(je,Re){if(je.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let Ye=Re||"demo-project",ht=je.iat||0,Ze=je.sub||je.user_id;if(!Ze)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let ke=Object.assign({iss:`https://securetoken.google.com/${Ye}`,aud:Ye,iat:ht,exp:ht+3600,auth_time:ht,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},je);return[Rt(JSON.stringify({alg:"none",type:"JWT"})),Rt(JSON.stringify(ke)),""].join(".")}(g.mockUserToken,(b=l._app)===null||b===void 0?void 0:b.options.projectId);let ye=g.mockUserToken.sub||g.mockUserToken.user_id;if(!ye)throw new Cn(Nr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");ie=new Ai(ye)}l._authCredentials=new za(new cl(te,ie))}}(r,...a)}return r}(Yu);var Y0=M(2001),Mg=M(8206),sl=M(18);let AS=(0,Mg.j)("inline-flex items-center text-text justify-center whitespace-nowrap rounded-base text-sm font-base ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-main border-2 border-border dark:border-darkBorder shadow-light dark:shadow-dark hover:translate-x-boxShadowX hover:translate-y-boxShadowY hover:shadow-none dark:hover:shadow-none",noShadow:"bg-main border-2 border-border dark:border-darkBorder",neutral:"bg-white dark:bg-secondaryBlack dark:text-darkText border-2 border-border dark:border-darkBorder shadow-light dark:shadow-dark hover:translate-x-boxShadowX hover:translate-y-boxShadowY hover:shadow-none dark:hover:shadow-none",reverse:"bg-main border-2 border-border dark:border-darkBorder hover:translate-x-reverseBoxShadowX hover:translate-y-reverseBoxShadowY hover:shadow-light dark:hover:shadow-dark"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ec=F.forwardRef(({className:n,variant:e,size:r,asChild:a=!1,...l},c)=>{let p=a?Y0.g7:"button";return(0,re.jsx)(p,{className:(0,sl.cn)(AS({variant:e,size:r,className:n})),ref:c,...l})});Ec.displayName="Button";var Wv=M(5303);function Gy(n){let{createServerReference:e}=M(2505);return e(n,Wv.g)}var X0=Gy("bc739e46f07436238c103a2aa25f334d61cc43ec");let Hy=()=>{let[n,e]=(0,F.useState)(void 0),[r,a]=(0,F.useState)(null),[l,c]=(0,F.useState)(null),[p,g]=(0,F.useState)(!1),[b,D]=(0,F.useState)(!0),H=async()=>{D(!0);try{let te=new jn,ie=await dn(Kv,te),ye=await X0({user:ie.user});if(ye.status==="error")throw Error(ye.message)}catch(te){console.error("Error signing in:",te)}finally{D(!1)}};return(0,F.useEffect)(()=>{var te;let ie=(te=async ye=>{ye&&(g(!0),e(ye)),D(!1)},zt(Kv).onAuthStateChanged(te,c,void 0));return()=>{ie()}},[Kv]),(0,F.useEffect)(()=>{if(!n)return;let te=function(ie,...ye){var je,Re,Ye;let ht,Ze,ke;ie=zt(ie);let Ie={includeMetadataChanges:!1,source:"default"},Ae=0;typeof ye[0]!="object"||zv(ye[Ae])||(Ie=ye[Ae],Ae++);let it={includeMetadataChanges:Ie.includeMetadataChanges,source:Ie.source};if(zv(ye[Ae])){let ut=ye[Ae];ye[Ae]=(je=ut.next)===null||je===void 0?void 0:je.bind(ut),ye[Ae+1]=(Re=ut.error)===null||Re===void 0?void 0:Re.bind(ut),ye[Ae+2]=(Ye=ut.complete)===null||Ye===void 0?void 0:Ye.bind(ut)}if(ie instanceof Gc)Ze=qv(ie.firestore,J0),ke=dy(ie._key.path),ht={next:ut=>{ye[Ae]&&ye[Ae](function(ft,nt,un){let is=un.docs.get(nt._key),Oi=new jf(ft);return new Lf(ft,Oi,nt._key,is,new Mf(un.hasPendingWrites,un.fromCache),nt.converter)}(Ze,ie,ut))},error:ye[Ae+1],complete:ye[Ae+2]};else{let ut=qv(ie,ad);Ze=qv(ut.firestore,J0),ke=ut._query;let ft=new jf(Ze);ht={next:nt=>{ye[Ae]&&ye[Ae](new PS(Ze,ft,ut,nt))},error:ye[Ae+1],complete:ye[Ae+2]},function(nt){if(nt.limitType==="L"&&nt.explicitOrderBy.length===0)throw new Cn(Nr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(ie._query)}return function(ut,ft,nt,un){let is=new CS(un),Oi=new Mi(ft,is,nt);return ut.asyncQueue.enqueueAndForget(async()=>_t(await $v(ut),Oi)),()=>{is.eu(),ut.asyncQueue.enqueueAndForget(async()=>Dr(await $v(ut),Oi))}}(function(ut){if(ut._terminated)throw new Cn(Nr.FAILED_PRECONDITION,"The client has already been terminated.");return ut._firestoreClient||function(ft){var nt,un,is,Oi;let Ii=ft._freezeSettings(),ps=(Oi=ft._databaseId,new cf(Oi,((nt=ft._app)===null||nt===void 0?void 0:nt.options.appId)||"",ft._persistenceKey,Ii.host,Ii.ssl,Ii.experimentalForceLongPolling,Ii.experimentalAutoDetectLongPolling,Zw(Ii.experimentalLongPollingOptions),Ii.useFetchStreams));ft._componentsProvider||((un=Ii.localCache)===null||un===void 0?void 0:un._offlineComponentProvider)&&((is=Ii.localCache)===null||is===void 0?void 0:is._onlineComponentProvider)&&(ft._componentsProvider={_offline:Ii.localCache._offlineComponentProvider,_online:Ii.localCache._onlineComponentProvider}),ft._firestoreClient=new kS(ft._authCredentials,ft._appCheckCredentials,ft._queue,ps,ft._componentsProvider&&function(vs){let ai=vs?._online.build();return{_offline:vs?._offline.build(ai),_online:ai}}(ft._componentsProvider))}(ut),ut._firestoreClient}(Ze),ke,it,ht)}(function(ie,ye,...je){if(ie=zt(ie),arguments.length==1&&(ye=jo.newId()),function(Re,Ye,ht){if(!ht)throw new Cn(Nr.INVALID_ARGUMENT,`Function doc() cannot be called with an empty ${Ye}.`)}(0,"path",ye),ie instanceof K0){let Re=La.fromString(ye,...je);return tb(Re),new Gc(ie,null,new Xn(Re))}{if(!(ie instanceof Gc||ie instanceof Uy))throw new Cn(Nr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let Re=ie._path.child(La.fromString(ye,...je));return tb(Re),new Gc(ie.firestore,ie instanceof Uy?ie.converter:null,new Xn(Re))}}(zy,`users/${n?.uid}`),ie=>{if(ie.exists()){let ye=ie.data();if(!ye){console.error("User document data is missing");return}a(ye)}});return()=>{te()}},[n]),{user:n,userDocument:r,error:l,isLoggedIn:p,userLoading:b,setUserLoading:D,handleLogin:H}},Z0=()=>{let{isLoggedIn:n,user:e,handleLogin:r,userLoading:a}=Hy(),l=async()=>{try{await zt(Kv).signOut(),window.location.reload()}catch(c){console.error("Error signing out:",c)}};return(0,re.jsx)("nav",{className:"dark:border-darkNavBorder m500:h-16 fixed left-0 top-0 z-20 mx-auto flex h-[88px] w-full items-center border-b-4 border-border bg-white/80 px-5 backdrop-blur-3xl dark:bg-secondaryBlack",children:(0,re.jsxs)("div",{className:"mx-auto flex w-[1500px] max-w-full items-center justify-between text-text dark:text-darkText",children:[(0,re.jsx)("div",{className:"flex items-center gap-10",children:(0,re.jsx)(et,{href:"/",className:"flex items-center",children:(0,re.jsx)("span",{className:"m900:w-[unset] m500:text-xl text-[33px] font-heading",children:"thiss.link"})})}),(0,re.jsx)("div",{className:"flex items-center gap-4",children:n?(0,re.jsx)("div",{className:"flex items-center gap-4",children:(0,re.jsxs)(Ec,{onClick:l,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 animate gap-2 rounded-lg px-2 py-2 transition-colors !duration-200",children:["Sign Out",e?.photoURL&&(0,re.jsx)("img",{referrerPolicy:"no-referrer",src:e.photoURL,alt:"Profile",className:"h-6 w-6 rounded-full"})]})}):(0,re.jsx)(Ec,{onClick:r,disabled:a,className:"bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors disabled:opacity-50",children:a?"Signing in...":"Sign In"})})]})})},od={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:20,staggerChildren:.15}}};var Jv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ew=F.createContext&&F.createContext(Jv),NS=["attr","size","title"];function Ky(){return(Ky=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n}).apply(this,arguments)}function Qv(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),r.push.apply(r,a)}return r}function Lg(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qv(Object(r),!0).forEach(function(a){var l,c;l=a,c=r[a],(l=function(p){var g=function(b,D){if(typeof b!="object"||!b)return b;var H=b[Symbol.toPrimitive];if(H!==void 0){var te=H.call(b,D||"default");if(typeof te!="object")return te;throw TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(b)}(p,"string");return typeof g=="symbol"?g:g+""}(l))in n?Object.defineProperty(n,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[l]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Qv(Object(r)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(r,a))})}return n}function Yo(n){return e=>F.createElement(_c,Ky({attr:Lg({},n.attr)},e),function r(a){return a&&a.map((l,c)=>F.createElement(l.tag,Lg({key:c},l.attr),r(l.child)))}(n.child))}function _c(n){var e=r=>{var a,{attr:l,size:c,title:p}=n,g=function(D,H){if(D==null)return{};var te,ie,ye=function(Re,Ye){if(Re==null)return{};var ht={};for(var Ze in Re)if(Object.prototype.hasOwnProperty.call(Re,Ze)){if(Ye.indexOf(Ze)>=0)continue;ht[Ze]=Re[Ze]}return ht}(D,H);if(Object.getOwnPropertySymbols){var je=Object.getOwnPropertySymbols(D);for(ie=0;ie<je.length;ie++)te=je[ie],!(H.indexOf(te)>=0)&&Object.prototype.propertyIsEnumerable.call(D,te)&&(ye[te]=D[te])}return ye}(n,NS),b=c||r.size||"1em";return r.className&&(a=r.className),n.className&&(a=(a?a+" ":"")+n.className),F.createElement("svg",Ky({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,l,g,{className:a,style:Lg(Lg({color:n.color||r.color},r.style),n.style),height:b,width:b,xmlns:"http://www.w3.org/2000/svg"}),p&&F.createElement("title",null,p),n.children)};return ew!==void 0?F.createElement(ew.Consumer,null,r=>e(r)):e(Jv)}function Yv(n){return Yo({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z"},child:[]}]})(n)}function lb(n){return Yo({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(n)}function OS(n){return Yo({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(n)}function Wy(n){return Yo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(n)}function ub(n){return Yo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(n)}function cb(n){return Yo({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(n)}function tw(n){return Yo({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(n)}function hb(n){return Yo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(n)}function db(n){return Yo({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 256H152V152.9c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v16c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-16C376 68 307.5-.3 223.5 0 139.5.3 72 69.5 72 153.5V256H48c-26.5 0-48 21.5-48 48v160c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function rw(n){return Yo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(n)}let jg=F.forwardRef(({className:n,type:e,...r},a)=>{let[l,c]=F.useState(!1),p=e==="password";return(0,re.jsxs)("div",{className:"relative w-full",children:[(0,re.jsx)("input",{type:p?l?"text":"password":e,className:(0,sl.cn)("flex h-10 w-full rounded-base border-2 border-border bg-white px-3 py-2 text-sm font-base text-text ring-offset-white selection:bg-main selection:text-black file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-darkBorder dark:bg-secondaryBlack dark:text-darkText",p&&"pr-10",n),ref:a,...r}),p&&(0,re.jsx)(Ec,{type:"button",size:"sm",onClick:()=>c(!l),className:"absolute right-2 top-1 text-border dark:text-darkText lg:top-2",children:l?(0,re.jsx)(lb,{className:"h-5 w-5 dark:text-text"}):(0,re.jsx)(OS,{className:"h-5 w-5 dark:text-text"})})]})});function Jy(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}jg.displayName="Input";let Rm=n=>Array.isArray(n);function Xv(n,e){if(!Array.isArray(e))return!1;let r=e.length;if(r!==n.length)return!1;for(let a=0;a<r;a++)if(e[a]!==n[a])return!1;return!0}function Pm(n){return typeof n=="string"||Array.isArray(n)}function xp(n){let e=[{},{}];return n?.values.forEach((r,a)=>{e[0][a]=r.get(),e[1][a]=r.getVelocity()}),e}function Zv(n,e,r,a){if(typeof e=="function"){let[l,c]=xp(a);e=e(r!==void 0?r:n.custom,l,c)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){let[l,c]=xp(a);e=e(r!==void 0?r:n.custom,l,c)}return e}function Am(n,e,r){let a=n.getProps();return Zv(a,e,r!==void 0?r:a.custom,n)}let e0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nm=["initial",...e0],Fg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jl=new Set(Fg),ld=n=>1e3*n,dh=n=>n/1e3,Qy={type:"spring",stiffness:500,damping:25,restSpeed:10},Vg=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),t0={type:"keyframes",duration:.8},fb={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r0=(n,{keyframes:e})=>e.length>2?t0:jl.has(n)?n.startsWith("scale")?Vg(e[1]):Qy:fb;function Jd(n,e){return n?n[e]||n.default||n:void 0}let n0={skipAnimations:!1,useManualTiming:!1},nw={current:!1},iw=n=>n!==null;function Ug(n,{repeat:e,repeatType:r="loop"},a){let l=n.filter(iw),c=e&&r!=="loop"&&e%2==1?0:l.length-1;return c&&a!==void 0?a:l[c]}let Ho=n=>n,Yy=["read","resolveKeyframes","update","preRender","render","postRender"];function Xy(n,e){let r=!1,a=!0,l={delta:0,timestamp:0,isProcessing:!1},c=()=>r=!0,p=Yy.reduce((Re,Ye)=>(Re[Ye]=function(ht){let Ze=new Set,ke=new Set,Ie=!1,Ae=!1,it=new WeakSet,ut={delta:0,timestamp:0,isProcessing:!1};function ft(un){it.has(un)&&(nt.schedule(un),ht()),un(ut)}let nt={schedule:(un,is=!1,Oi=!1)=>{let Ii=Oi&&Ie?Ze:ke;return is&&it.add(un),Ii.has(un)||Ii.add(un),un},cancel:un=>{ke.delete(un),it.delete(un)},process:un=>{if(ut=un,Ie){Ae=!0;return}Ie=!0,[Ze,ke]=[ke,Ze],ke.clear(),Ze.forEach(ft),Ie=!1,Ae&&(Ae=!1,nt.process(un))}};return nt}(c),Re),{}),{read:g,resolveKeyframes:b,update:D,preRender:H,render:te,postRender:ie}=p,ye=()=>{let Re=n0.useManualTiming?l.timestamp:performance.now();r=!1,l.delta=a?1e3/60:Math.max(Math.min(Re-l.timestamp,40),1),l.timestamp=Re,l.isProcessing=!0,g.process(l),b.process(l),D.process(l),H.process(l),te.process(l),ie.process(l),l.isProcessing=!1,r&&e&&(a=!1,n(ye))},je=()=>{r=!0,a=!0,l.isProcessing||n(ye)};return{schedule:Yy.reduce((Re,Ye)=>{let ht=p[Ye];return Re[Ye]=(Ze,ke=!1,Ie=!1)=>(r||je(),ht.schedule(Ze,ke,Ie)),Re},{}),cancel:Re=>{for(let Ye=0;Ye<Yy.length;Ye++)p[Yy[Ye]].cancel(Re)},state:l,steps:p}}let{schedule:Io,cancel:Qd,state:Fl,steps:Ff}=Xy(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ho,!0),i0=(n,e,r)=>(((1-3*r+3*e)*n+(3*r-6*e))*n+3*e)*n;function Zy(n,e,r,a){if(n===e&&r===a)return Ho;let l=c=>function(p,g,b,D,H){let te,ie,ye=0;do(te=i0(ie=g+(b-g)/2,D,H)-p)>0?b=ie:g=ie;while(Math.abs(te)>1e-7&&++ye<12);return ie}(c,0,1,n,r);return c=>c===0||c===1?c:i0(l(c),e,a)}let sw=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,aw=n=>e=>1-n(1-e),ow=Zy(.33,1.53,.69,.99),ev=aw(ow),s0=sw(ev),lw=n=>(n*=2)<1?.5*ev(n):.5*(2-Math.pow(2,-10*(n-1))),a0=n=>1-Math.sin(Math.acos(n)),uw=aw(a0),cw=sw(a0),Cp=n=>/^0[^.\s]+$/u.test(n),Yd=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),tv=n=>e=>typeof e=="string"&&e.startsWith(n),rv=tv("--"),pb=tv("var(--"),Uo=n=>!!pb(n)&&o0.test(n.split("/*")[0].trim()),o0=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nv=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,fh=(n,e,r)=>r>e?e:r<n?n:r,$g={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Bg={...$g,transform:n=>fh(0,1,n)},l0={...$g,default:1},iv=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),kp=iv("deg"),Xd=iv("%"),fs=iv("px"),Rp=iv("vh"),mb=iv("vw"),hw={...Xd,parse:n=>Xd.parse(n)/100,transform:n=>Xd.transform(100*n)},gb=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Om=n=>n===$g||n===fs,Vf=(n,e)=>parseFloat(n.split(", ")[e]),yb=(n,e)=>(r,{transform:a})=>{if(a==="none"||!a)return 0;let l=a.match(/^matrix3d\((.+)\)$/u);if(l)return Vf(l[1],e);{let c=a.match(/^matrix\((.+)\)$/u);return c?Vf(c[1],n):0}},sv=new Set(["x","y","z"]),u0=Fg.filter(n=>!sv.has(n)),Dm={width:({x:n},{paddingLeft:e="0",paddingRight:r="0"})=>n.max-n.min-parseFloat(e)-parseFloat(r),height:({y:n},{paddingTop:e="0",paddingBottom:r="0"})=>n.max-n.min-parseFloat(e)-parseFloat(r),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:yb(4,13),y:yb(5,14)};Dm.translateX=Dm.x,Dm.translateY=Dm.y;let qg=n=>e=>e.test(n),zg=[$g,fs,Xd,kp,mb,Rp,{test:n=>n==="auto",parse:n=>n}],dw=n=>zg.find(qg(n)),Uf=new Set,ml=!1,fw=!1;function vb(){if(fw){let n=Array.from(Uf).filter(a=>a.needsMeasurement),e=new Set(n.map(a=>a.element)),r=new Map;e.forEach(a=>{let l=function(c){let p=[];return u0.forEach(g=>{let b=c.getValue(g);b!==void 0&&(p.push([g,b.get()]),b.set(g.startsWith("scale")?1:0))}),p}(a);l.length&&(r.set(a,l),a.render())}),n.forEach(a=>a.measureInitialState()),e.forEach(a=>{a.render();let l=r.get(a);l&&l.forEach(([c,p])=>{var g;(g=a.getValue(c))===null||g===void 0||g.set(p)})}),n.forEach(a=>a.measureEndState()),n.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}fw=!1,ml=!1,Uf.forEach(n=>n.complete()),Uf.clear()}function pw(){Uf.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(fw=!0)})}class c0{constructor(e,r,a,l,c,p=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=a,this.motionValue=l,this.element=c,this.isAsync=p}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Uf.add(this),ml||(ml=!0,Io.read(pw),Io.resolveKeyframes(vb))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:r,element:a,motionValue:l}=this;for(let c=0;c<e.length;c++)if(e[c]===null)if(c===0){let p=l?.get(),g=e[e.length-1];if(p!==void 0)e[0]=p;else if(a&&r){let b=a.readValue(r,g);b!=null&&(e[0]=b)}e[0]===void 0&&(e[0]=g),l&&p===void 0&&l.set(e[0])}else e[c]=e[c-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Uf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Uf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let Gg=n=>Math.round(1e5*n)/1e5,Hg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,wb=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ud=(n,e)=>r=>!!(typeof r=="string"&&wb.test(r)&&r.startsWith(n)||e&&r!=null&&Object.prototype.hasOwnProperty.call(r,e)),mw=(n,e,r)=>a=>{if(typeof a!="string")return a;let[l,c,p,g]=a.match(Hg);return{[n]:parseFloat(l),[e]:parseFloat(c),[r]:parseFloat(p),alpha:g!==void 0?parseFloat(g):1}},av=n=>fh(0,255,n),h0={...$g,transform:n=>Math.round(av(n))},$f={test:ud("rgb","red"),parse:mw("red","green","blue"),transform:({red:n,green:e,blue:r,alpha:a=1})=>"rgba("+h0.transform(n)+", "+h0.transform(e)+", "+h0.transform(r)+", "+Gg(Bg.transform(a))+")"},Kg={test:ud("#"),parse:function(n){let e="",r="",a="",l="";return n.length>5?(e=n.substring(1,3),r=n.substring(3,5),a=n.substring(5,7),l=n.substring(7,9)):(e=n.substring(1,2),r=n.substring(2,3),a=n.substring(3,4),l=n.substring(4,5),e+=e,r+=r,a+=a,l+=l),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:l?parseInt(l,16)/255:1}},transform:$f.transform},Mm={test:ud("hsl","hue"),parse:mw("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:r,alpha:a=1})=>"hsla("+Math.round(n)+", "+Xd.transform(Gg(e))+", "+Xd.transform(Gg(r))+", "+Gg(Bg.transform(a))+")"},hu={test:n=>$f.test(n)||Kg.test(n)||Mm.test(n),parse:n=>$f.test(n)?$f.parse(n):Mm.test(n)?Mm.parse(n):Kg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?$f.transform(n):Mm.transform(n)},bb=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,Wg="number",gw="color",Sb=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lm(n){let e=n.toString(),r=[],a={color:[],number:[],var:[]},l=[],c=0,p=e.replace(Sb,g=>(hu.test(g)?(a.color.push(c),l.push(gw),r.push(hu.parse(g))):g.startsWith("var(")?(a.var.push(c),l.push("var"),r.push(g)):(a.number.push(c),l.push(Wg),r.push(parseFloat(g))),++c,"${}")).split("${}");return{values:r,split:p,indexes:a,types:l}}function d0(n){return Lm(n).values}function yw(n){let{split:e,types:r}=Lm(n),a=e.length;return l=>{let c="";for(let p=0;p<a;p++)if(c+=e[p],l[p]!==void 0){let g=r[p];g===Wg?c+=Gg(l[p]):g===gw?c+=hu.transform(l[p]):c+=l[p]}return c}}let f0=n=>typeof n=="number"?0:n,Bf={test:function(n){var e,r;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Hg))===null||e===void 0?void 0:e.length)||0)+(((r=n.match(bb))===null||r===void 0?void 0:r.length)||0)>0},parse:d0,createTransformer:yw,getAnimatableNone:function(n){let e=d0(n);return yw(n)(e.map(f0))}},Eb=new Set(["brightness","contrast","saturate","opacity"]);function jm(n){let[e,r]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;let[a]=r.match(Hg)||[];if(!a)return n;let l=r.replace(a,""),c=Eb.has(e)?1:0;return a!==r&&(c*=100),e+"("+c+l+")"}let _b=/\b([a-z-]*)\(.*?\)/gu,p0={...Bf,getAnimatableNone:n=>{let e=n.match(_b);return e?e.map(jm).join(" "):n}},vw={...$g,transform:Math.round},m0={borderWidth:fs,borderTopWidth:fs,borderRightWidth:fs,borderBottomWidth:fs,borderLeftWidth:fs,borderRadius:fs,radius:fs,borderTopLeftRadius:fs,borderTopRightRadius:fs,borderBottomRightRadius:fs,borderBottomLeftRadius:fs,width:fs,maxWidth:fs,height:fs,maxHeight:fs,top:fs,right:fs,bottom:fs,left:fs,padding:fs,paddingTop:fs,paddingRight:fs,paddingBottom:fs,paddingLeft:fs,margin:fs,marginTop:fs,marginRight:fs,marginBottom:fs,marginLeft:fs,backgroundPositionX:fs,backgroundPositionY:fs,rotate:kp,rotateX:kp,rotateY:kp,rotateZ:kp,scale:l0,scaleX:l0,scaleY:l0,scaleZ:l0,skew:kp,skewX:kp,skewY:kp,distance:fs,translateX:fs,translateY:fs,translateZ:fs,x:fs,y:fs,z:fs,perspective:fs,transformPerspective:fs,opacity:Bg,originX:hw,originY:hw,originZ:fs,zIndex:vw,size:fs,fillOpacity:Bg,strokeOpacity:Bg,numOctaves:vw},g0={...m0,color:hu,backgroundColor:hu,outlineColor:hu,fill:hu,stroke:hu,borderColor:hu,borderTopColor:hu,borderRightColor:hu,borderBottomColor:hu,borderLeftColor:hu,filter:p0,WebkitFilter:p0},Ic=n=>g0[n];function ww(n,e){let r=Ic(n);return r!==p0&&(r=Bf),r.getAnimatableNone?r.getAnimatableNone(e):void 0}let Ib=new Set(["auto","none","0"]);class Fm extends c0{constructor(e,r,a,l,c){super(e,r,a,l,c,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let b=0;b<e.length;b++){let D=e[b];if(typeof D=="string"&&Uo(D=D.trim())){let H=function te(ie,ye,je=1){Ho(je<=4,`Max CSS variable fallback depth detected in property "${ie}". This may indicate a circular fallback dependency.`);let[Re,Ye]=function(Ze){let ke=nv.exec(Ze);if(!ke)return[,];let[,Ie,Ae,it]=ke;return[`--${Ie??Ae}`,it]}(ie);if(!Re)return;let ht=window.getComputedStyle(ye).getPropertyValue(Re);if(ht){let Ze=ht.trim();return Yd(Ze)?parseFloat(Ze):Ze}return Uo(Ye)?te(Ye,ye,je+1):Ye}(D,r.current);H!==void 0&&(e[b]=H),b===e.length-1&&(this.finalKeyframe=D)}}if(this.resolveNoneKeyframes(),!gb.has(a)||e.length!==2)return;let[l,c]=e,p=dw(l),g=dw(c);if(p!==g)if(Om(p)&&Om(g))for(let b=0;b<e.length;b++){let D=e[b];typeof D=="string"&&(e[b]=parseFloat(D))}else this.needsMeasurement=!0}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:r}=this,a=[];for(let c=0;c<e.length;c++){var l;(typeof(l=e[c])=="number"?l===0:l===null||l==="none"||l==="0"||Cp(l))&&a.push(c)}a.length&&function(c,p,g){let b,D=0;for(;D<c.length&&!b;){let H=c[D];typeof H=="string"&&!Ib.has(H)&&Lm(H).values.length&&(b=c[D]),D++}if(b&&g)for(let H of p)c[H]=ww(g,b)}(e,a,r)}measureInitialState(){let{element:e,unresolvedKeyframes:r,name:a}=this;if(!e||!e.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Dm[a](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;let l=r[r.length-1];l!==void 0&&e.getValue(a,l).jump(l,!1)}measureEndState(){var e;let{element:r,name:a,unresolvedKeyframes:l}=this;if(!r||!r.current)return;let c=r.getValue(a);c&&c.jump(this.measuredOrigin,!1);let p=l.length-1,g=l[p];l[p]=Dm[a](r.measureViewportBox(),window.getComputedStyle(r.current)),g!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=g),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([b,D])=>{r.getValue(b).set(D)}),this.resolveNoneKeyframes()}}function P(n){return typeof n=="function"}function he(){W=void 0}let De={now:()=>(W===void 0&&De.set(Fl.isProcessing||n0.useManualTiming?Fl.timestamp:performance.now()),W),set:n=>{W=n,queueMicrotask(he)}},It=(n,e)=>e!=="zIndex"&&!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Bf.test(n)||n==="0")&&!n.startsWith("url("));class jr{constructor({autoplay:e=!0,delay:r=0,type:a="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:p="loop",...g}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=De.now(),this.options={autoplay:e,delay:r,type:a,repeat:l,repeatDelay:c,repeatType:p,...g},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(pw(),vb()),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=De.now(),this.hasAttemptedResolve=!0;let{name:a,type:l,velocity:c,delay:p,onComplete:g,onUpdate:b,isGenerator:D}=this.options;if(!D&&!function(te,ie,ye,je){let Re=te[0];if(Re===null)return!1;if(ie==="display"||ie==="visibility")return!0;let Ye=te[te.length-1],ht=It(Re,ie),Ze=It(Ye,ie);return Ho(ht===Ze,`You are trying to animate ${ie} from "${Re}" to "${Ye}". ${Re} is not an animatable value - to enable this animation set ${Re} to a value animatable to ${Ye} via the \`style\` property.`),!!ht&&!!Ze&&(function(ke){let Ie=ke[0];if(ke.length===1)return!0;for(let Ae=0;Ae<ke.length;Ae++)if(ke[Ae]!==Ie)return!0}(te)||(ye==="spring"||P(ye))&&je)}(e,a,l,c)){if(nw.current||!p){b?.(Ug(e,this.options,r)),g?.(),this.resolveFinishedPromise();return}this.options.duration=0}let H=this.initPlayback(e,r);H!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...H},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}let Fr=(n,e,r)=>{let a=e-n;return a===0?1:(r-n)/a},Xr=(n,e,r=10)=>{let a="",l=Math.max(Math.round(e/r),2);for(let c=0;c<l;c++)a+=n(Fr(0,l-1,c))+", ";return`linear(${a.substring(0,a.length-2)})`};function Yn(n,e,r){var a,l;let c=Math.max(e-5,0);return a=r-n(c),(l=e-c)?1e3/l*a:0}let Zn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};function la(n,e){return n*Math.sqrt(1-e*e)}function ya(n){let e=0,r=n.next(e);for(;!r.done&&e<2e4;)e+=50,r=n.next(e);return e>=2e4?1/0:e}let vo=["duration","bounce"],ku=["stiffness","damping","mass"];function ro(n,e){return e.some(r=>n[r]!==void 0)}function Xu(n=Zn.visualDuration,e=Zn.bounce){let r,a=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n,{restSpeed:l,restDelta:c}=a,p=a.keyframes[0],g=a.keyframes[a.keyframes.length-1],b={done:!1,value:p},{stiffness:D,damping:H,mass:te,duration:ie,velocity:ye,isResolvedFromDuration:je}=function(Ae){let it={velocity:Zn.velocity,stiffness:Zn.stiffness,damping:Zn.damping,mass:Zn.mass,isResolvedFromDuration:!1,...Ae};if(!ro(Ae,ku)&&ro(Ae,vo))if(Ae.visualDuration){let ut=2*Math.PI/(1.2*Ae.visualDuration),ft=ut*ut,nt=2*fh(.05,1,1-Ae.bounce)*Math.sqrt(ft);it={...it,mass:Zn.mass,stiffness:ft,damping:nt}}else{let ut=function({duration:ft=Zn.duration,bounce:nt=Zn.bounce,velocity:un=Zn.velocity,mass:is=Zn.mass}){let Oi,Ii;Ho(ft<=ld(Zn.maxDuration),"Spring duration must be 10 seconds or less");let ps=1-nt;ps=fh(Zn.minDamping,Zn.maxDamping,ps),ft=fh(Zn.minDuration,Zn.maxDuration,dh(ft)),ps<1?(Oi=ai=>{let Ni=ai*ps,ei=Ni*ft;return .001-(Ni-un)/la(ai,ps)*Math.exp(-ei)},Ii=ai=>{let Ni=ai*ps*ft,ei=Math.pow(ps,2)*Math.pow(ai,2)*ft,Vs=la(Math.pow(ai,2),ps);return(Ni*un+un-ei)*Math.exp(-Ni)*(-Oi(ai)+.001>0?-1:1)/Vs}):(Oi=ai=>-.001+Math.exp(-ai*ft)*((ai-un)*ft+1),Ii=ai=>ft*ft*(un-ai)*Math.exp(-ai*ft));let vs=function(ai,Ni,ei){let Vs=ei;for(let fa=1;fa<12;fa++)Vs-=ai(Vs)/Ni(Vs);return Vs}(Oi,Ii,5/ft);if(ft=ld(ft),isNaN(vs))return{stiffness:Zn.stiffness,damping:Zn.damping,duration:ft};{let ai=Math.pow(vs,2)*is;return{stiffness:ai,damping:2*ps*Math.sqrt(is*ai),duration:ft}}}(Ae);(it={...it,...ut,mass:Zn.mass}).isResolvedFromDuration=!0}return it}({...a,velocity:-dh(a.velocity||0)}),Re=ye||0,Ye=H/(2*Math.sqrt(D*te)),ht=g-p,Ze=dh(Math.sqrt(D/te)),ke=5>Math.abs(ht);if(l||(l=ke?Zn.restSpeed.granular:Zn.restSpeed.default),c||(c=ke?Zn.restDelta.granular:Zn.restDelta.default),Ye<1){let Ae=la(Ze,Ye);r=it=>g-Math.exp(-Ye*Ze*it)*((Re+Ye*Ze*ht)/Ae*Math.sin(Ae*it)+ht*Math.cos(Ae*it))}else if(Ye===1)r=Ae=>g-Math.exp(-Ze*Ae)*(ht+(Re+Ze*ht)*Ae);else{let Ae=Ze*Math.sqrt(Ye*Ye-1);r=it=>{let ut=Math.exp(-Ye*Ze*it),ft=Math.min(Ae*it,300);return g-ut*((Re+Ye*Ze*ht)*Math.sinh(ft)+Ae*ht*Math.cosh(ft))/Ae}}let Ie={calculatedDuration:je&&ie||null,next:Ae=>{let it=r(Ae);if(je)b.done=Ae>=ie;else{let ut=0;Ye<1&&(ut=Ae===0?ld(Re):Yn(r,Ae,it));let ft=Math.abs(ut)<=l,nt=Math.abs(g-it)<=c;b.done=ft&&nt}return b.value=b.done?g:it,b},toString:()=>{let Ae=Math.min(ya(Ie),2e4),it=Xr(ut=>Ie.next(Ae*ut).value,Ae,30);return Ae+"ms "+it}};return Ie}function no({keyframes:n,velocity:e=0,power:r=.8,timeConstant:a=325,bounceDamping:l=10,bounceStiffness:c=500,modifyTarget:p,min:g,max:b,restDelta:D=.5,restSpeed:H}){let te,ie,ye=n[0],je={done:!1,value:ye},Re=ft=>g!==void 0&&ft<g||b!==void 0&&ft>b,Ye=ft=>g===void 0?b:b===void 0||Math.abs(g-ft)<Math.abs(b-ft)?g:b,ht=r*e,Ze=ye+ht,ke=p===void 0?Ze:p(Ze);ke!==Ze&&(ht=ke-ye);let Ie=ft=>-ht*Math.exp(-ft/a),Ae=ft=>ke+Ie(ft),it=ft=>{let nt=Ie(ft),un=Ae(ft);je.done=Math.abs(nt)<=D,je.value=je.done?ke:un},ut=ft=>{Re(je.value)&&(te=ft,ie=Xu({keyframes:[je.value,Ye(je.value)],velocity:Yn(Ae,ft,je.value),damping:l,stiffness:c,restDelta:D,restSpeed:H}))};return ut(0),{calculatedDuration:null,next:ft=>{let nt=!1;return ie||te!==void 0||(nt=!0,it(ft),ut(ft)),te!==void 0&&ft>=te?ie.next(ft-te):(nt||it(ft),je)}}}let Ja=Zy(.42,0,1,1),Ko=Zy(0,0,.58,1),Zu=Zy(.42,0,.58,1),Fh=n=>Array.isArray(n)&&typeof n[0]!="number",Pp=n=>Array.isArray(n)&&typeof n[0]=="number",y0={linear:Ho,easeIn:Ja,easeInOut:Zu,easeOut:Ko,circIn:a0,circInOut:cw,circOut:uw,backIn:ev,backInOut:s0,backOut:ow,anticipate:lw},M_=n=>{if(Pp(n)){Ho(n.length===4,"Cubic bezier arrays must contain four numerical values.");let[e,r,a,l]=n;return Zy(e,r,a,l)}return typeof n=="string"?(Ho(y0[n]!==void 0,`Invalid easing type '${n}'`),y0[n]):n},Y1=(n,e)=>r=>e(n(r)),Jg=(...n)=>n.reduce(Y1),Vl=(n,e,r)=>n+(e-n)*r;function DS(n,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(e-n)*6*r:r<.5?e:r<2/3?n+(e-n)*(2/3-r)*6:n}function Tb(n,e){return r=>r>0?e:n}let MS=(n,e,r)=>{let a=n*n,l=r*(e*e-a)+a;return l<0?0:Math.sqrt(l)},X1=[Kg,$f,Mm],Z1=n=>X1.find(e=>e.test(n));function L_(n){let e=Z1(n);if(Ho(!!e,`'${n}' is not an animatable color. Use the equivalent color code instead.`),!e)return!1;let r=e.parse(n);return e===Mm&&(r=function({hue:a,saturation:l,lightness:c,alpha:p}){a/=360,c/=100;let g=0,b=0,D=0;if(l/=100){let H=c<.5?c*(1+l):c+l-c*l,te=2*c-H;g=DS(te,H,a+1/3),b=DS(te,H,a),D=DS(te,H,a-1/3)}else g=b=D=c;return{red:Math.round(255*g),green:Math.round(255*b),blue:Math.round(255*D),alpha:p}}(r)),r}let j_=(n,e)=>{let r=L_(n),a=L_(e);if(!r||!a)return Tb(n,e);let l={...r};return c=>(l.red=MS(r.red,a.red,c),l.green=MS(r.green,a.green,c),l.blue=MS(r.blue,a.blue,c),l.alpha=Vl(r.alpha,a.alpha,c),$f.transform(l))},LS=new Set(["none","hidden"]);function eC(n,e){return r=>Vl(n,e,r)}function jS(n){return typeof n=="number"?eC:typeof n=="string"?Uo(n)?Tb:hu.test(n)?j_:rC:Array.isArray(n)?F_:typeof n=="object"?hu.test(n)?j_:tC:Tb}function F_(n,e){let r=[...n],a=r.length,l=n.map((c,p)=>jS(c)(c,e[p]));return c=>{for(let p=0;p<a;p++)r[p]=l[p](c);return r}}function tC(n,e){let r={...n,...e},a={};for(let l in r)n[l]!==void 0&&e[l]!==void 0&&(a[l]=jS(n[l])(n[l],e[l]));return l=>{for(let c in a)r[c]=a[c](l);return r}}let rC=(n,e)=>{let r=Bf.createTransformer(e),a=Lm(n),l=Lm(e);return a.indexes.var.length===l.indexes.var.length&&a.indexes.color.length===l.indexes.color.length&&a.indexes.number.length>=l.indexes.number.length?LS.has(n)&&!l.values.length||LS.has(e)&&!a.values.length?function(c,p){return LS.has(c)?g=>g<=0?c:p:g=>g>=1?p:c}(n,e):Jg(F_(function(c,p){var g;let b=[],D={color:0,var:0,number:0};for(let H=0;H<p.values.length;H++){let te=p.types[H],ie=c.indexes[te][D[te]],ye=(g=c.values[ie])!==null&&g!==void 0?g:0;b[H]=ye,D[te]++}return b}(a,l),l.values),r):(Ho(!0,`Complex values '${n}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),Tb(n,e))};function V_(n,e,r){return typeof n=="number"&&typeof e=="number"&&typeof r=="number"?Vl(n,e,r):jS(n)(n,e)}function xb({duration:n=300,keyframes:e,times:r,ease:a="easeInOut"}){let l=Fh(a)?a.map(M_):M_(a),c={done:!1,value:e[0]},p=function(g,b,{clamp:D=!0,ease:H,mixer:te}={}){let ie=g.length;if(Ho(ie===b.length,"Both input and output ranges must be the same length"),ie===1)return()=>b[0];if(ie===2&&g[0]===g[1])return()=>b[1];g[0]>g[ie-1]&&(g=[...g].reverse(),b=[...b].reverse());let ye=function(Ye,ht,Ze){let ke=[],Ie=Ze||V_,Ae=Ye.length-1;for(let it=0;it<Ae;it++){let ut=Ie(Ye[it],Ye[it+1]);ht&&(ut=Jg(Array.isArray(ht)?ht[it]||Ho:ht,ut)),ke.push(ut)}return ke}(b,H,te),je=ye.length,Re=Ye=>{let ht=0;if(je>1)for(;ht<g.length-2&&!(Ye<g[ht+1]);ht++);let Ze=Fr(g[ht],g[ht+1],Ye);return ye[ht](Ze)};return D?Ye=>Re(fh(g[0],g[ie-1],Ye)):Re}((r&&r.length===e.length?r:function(g){let b=[0];return function(D,H){let te=D[D.length-1];for(let ie=1;ie<=H;ie++){let ye=Fr(0,H,ie);D.push(Vl(te,1,ye))}}(b,g.length-1),b}(e)).map(g=>g*n),e,{ease:Array.isArray(l)?l:e.map(()=>l||Zu).splice(0,e.length-1)});return{calculatedDuration:n,next:g=>(c.value=p(g),c.done=g>=n,c)}}let nC=n=>{let e=({timestamp:r})=>n(r);return{start:()=>Io.update(e,!0),stop:()=>Qd(e),now:()=>Fl.isProcessing?Fl.timestamp:De.now()}},iC={decay:no,inertia:no,tween:xb,keyframes:xb,spring:Xu},sC=n=>n/100;class FS extends jr{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();let{onStop:g}=this.options;g&&g()};let{name:r,motionValue:a,element:l,keyframes:c}=this.options,p=l?.KeyframeResolver||c0;this.resolver=new p(c,(g,b)=>this.onKeyframesResolved(g,b),r,a,l),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){let r,a,{type:l="keyframes",repeat:c=0,repeatDelay:p=0,repeatType:g,velocity:b=0}=this.options,D=P(l)?l:iC[l]||xb;D!==xb&&typeof e[0]!="number"&&(r=Jg(sC,V_(e[0],e[1])),e=[0,100]);let H=D({...this.options,keyframes:e});g==="mirror"&&(a=D({...this.options,keyframes:[...e].reverse(),velocity:-b})),H.calculatedDuration===null&&(H.calculatedDuration=ya(H));let{calculatedDuration:te}=H,ie=te+p;return{generator:H,mirroredGenerator:a,mapPercentToKeyframes:r,calculatedDuration:te,resolvedDuration:ie,totalDuration:ie*(c+1)-p}}onPostResolved(){let{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState!=="paused"&&e?this.state=this.pendingPlayState:this.pause()}tick(e,r=!1){let{resolved:a}=this;if(!a){let{keyframes:ft}=this.options;return{done:!0,value:ft[ft.length-1]}}let{finalKeyframe:l,generator:c,mirroredGenerator:p,mapPercentToKeyframes:g,keyframes:b,calculatedDuration:D,totalDuration:H,resolvedDuration:te}=a;if(this.startTime===null)return c.next(0);let{delay:ie,repeat:ye,repeatType:je,repeatDelay:Re,onUpdate:Ye}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-H/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;let ht=this.currentTime-ie*(this.speed>=0?1:-1),Ze=this.speed>=0?ht<0:ht>H;this.currentTime=Math.max(ht,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=H);let ke=this.currentTime,Ie=c;if(ye){let ft=Math.min(this.currentTime,H)/te,nt=Math.floor(ft),un=ft%1;!un&&ft>=1&&(un=1),un===1&&nt--,(nt=Math.min(nt,ye+1))%2&&(je==="reverse"?(un=1-un,Re&&(un-=Re/te)):je==="mirror"&&(Ie=p)),ke=fh(0,1,un)*te}let Ae=Ze?{done:!1,value:b[0]}:Ie.next(ke);g&&(Ae.value=g(Ae.value));let{done:it}=Ae;Ze||D===null||(it=this.speed>=0?this.currentTime>=H:this.currentTime<=0);let ut=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&it);return ut&&l!==void 0&&(Ae.value=Ug(b,this.options,l)),Ye&&Ye(Ae.value),ut&&this.finish(),Ae}get duration(){let{resolved:e}=this;return e?dh(e.calculatedDuration):0}get time(){return dh(this.currentTime)}set time(e){e=ld(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){let r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=dh(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;let{driver:e=nC,onPlay:r,startTime:a}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),r&&r();let l=this.driver.now();this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=l):this.startTime=a??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}let aC=new Set(["opacity","clipPath","filter","transform"]);function VS(n){let e;return()=>(e===void 0&&(e=n()),e)}let oC={linearEasing:void 0},Cb=function(n,e){let r=VS(n);return()=>{var a;return(a=oC[e])!==null&&a!==void 0?a:r()}}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bw=([n,e,r,a])=>`cubic-bezier(${n}, ${e}, ${r}, ${a})`,US={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bw([0,.65,.55,1]),circOut:bw([.55,0,1,.45]),backIn:bw([.31,.01,.66,-.59]),backOut:bw([.33,1.53,.69,.99])};function U_(n,e){n.timeline=e,n.onfinish=null}let lC=VS(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$_={anticipate:lw,backInOut:s0,circInOut:cw};class B_ extends jr{constructor(e){super(e);let{name:r,motionValue:a,element:l,keyframes:c}=this.options;this.resolver=new Fm(c,(p,g)=>this.onKeyframesResolved(p,g),r,a,l),this.resolver.scheduleResolve()}initPlayback(e,r){var a,l;let{duration:c=300,times:p,ease:g,type:b,motionValue:D,name:H,startTime:te}=this.options;if(!(!((a=D.owner)===null||a===void 0)&&a.current))return!1;if(typeof g=="string"&&Cb()&&g in $_&&(g=$_[g]),P((l=this.options).type)||l.type==="spring"||!function ye(je){return!!(typeof je=="function"&&Cb()||!je||typeof je=="string"&&(je in US||Cb())||Pp(je)||Array.isArray(je)&&je.every(ye))}(l.ease)){let{onComplete:ye,onUpdate:je,motionValue:Re,element:Ye,...ht}=this.options,Ze=function(ke,Ie){let Ae=new FS({...Ie,keyframes:ke,repeat:0,delay:0,isGenerator:!0}),it={done:!1,value:ke[0]},ut=[],ft=0;for(;!it.done&&ft<2e4;)ut.push((it=Ae.sample(ft)).value),ft+=10;return{times:void 0,keyframes:ut,duration:ft-10,ease:"linear"}}(e,ht);(e=Ze.keyframes).length===1&&(e[1]=e[0]),c=Ze.duration,p=Ze.times,g=Ze.ease,b="keyframes"}let ie=function(ye,je,Re,{delay:Ye=0,duration:ht=300,repeat:Ze=0,repeatType:ke="loop",ease:Ie="easeInOut",times:Ae}={}){let it={[je]:Re};Ae&&(it.offset=Ae);let ut=function ft(nt,un){if(nt)return typeof nt=="function"&&Cb()?Xr(nt,un):Pp(nt)?bw(nt):Array.isArray(nt)?nt.map(is=>ft(is,un)||US.easeOut):US[nt]}(Ie,ht);return Array.isArray(ut)&&(it.easing=ut),ye.animate(it,{delay:Ye,duration:ht,easing:Array.isArray(ut)?"linear":ut,fill:"both",iterations:Ze+1,direction:ke==="reverse"?"alternate":"normal"})}(D.owner.current,H,e,{...this.options,duration:c,times:p,ease:g});return ie.startTime=te??this.calcStartTime(),this.pendingTimeline?(U_(ie,this.pendingTimeline),this.pendingTimeline=void 0):ie.onfinish=()=>{let{onComplete:ye}=this.options;D.set(Ug(e,this.options,r)),ye&&ye(),this.cancel(),this.resolveFinishedPromise()},{animation:ie,duration:c,times:p,type:b,ease:g,keyframes:e}}get duration(){let{resolved:e}=this;if(!e)return 0;let{duration:r}=e;return dh(r)}get time(){let{resolved:e}=this;if(!e)return 0;let{animation:r}=e;return dh(r.currentTime||0)}set time(e){let{resolved:r}=this;if(!r)return;let{animation:a}=r;a.currentTime=ld(e)}get speed(){let{resolved:e}=this;if(!e)return 1;let{animation:r}=e;return r.playbackRate}set speed(e){let{resolved:r}=this;if(!r)return;let{animation:a}=r;a.playbackRate=e}get state(){let{resolved:e}=this;if(!e)return"idle";let{animation:r}=e;return r.playState}get startTime(){let{resolved:e}=this;if(!e)return null;let{animation:r}=e;return r.startTime}attachTimeline(e){if(this._resolved){let{resolved:r}=this;if(!r)return Ho;let{animation:a}=r;U_(a,e)}else this.pendingTimeline=e;return Ho}play(){if(this.isStopped)return;let{resolved:e}=this;if(!e)return;let{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){let{resolved:e}=this;if(!e)return;let{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();let{resolved:e}=this;if(!e)return;let{animation:r,keyframes:a,duration:l,type:c,ease:p,times:g}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){let{motionValue:D,onUpdate:H,onComplete:te,element:ie,...ye}=this.options,je=new FS({...ye,keyframes:a,duration:l,type:c,ease:p,times:g,isGenerator:!0}),Re=ld(this.time);D.setWithVelocity(je.sample(Re-10).value,je.sample(Re).value,10)}let{onStop:b}=this.options;b&&b(),this.cancel()}complete(){let{resolved:e}=this;e&&e.animation.finish()}cancel(){let{resolved:e}=this;e&&e.animation.cancel()}static supports(e){let{motionValue:r,name:a,repeatDelay:l,repeatType:c,damping:p,type:g}=e;return lC()&&a&&aC.has(a)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!l&&c!=="mirror"&&p!==0&&g!=="inertia"}}let uC=VS(()=>window.ScrollTimeline!==void 0);class cC{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,r){return Promise.all(this.animations).then(e).catch(r)}getAll(e){return this.animations[0][e]}setAll(e,r){for(let a=0;a<this.animations.length;a++)this.animations[a][e]=r}attachTimeline(e,r){let a=this.animations.map(l=>uC()&&l.attachTimeline?l.attachTimeline(e):r(l));return()=>{a.forEach((l,c)=>{l&&l(),this.animations[c].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}let $S=(n,e,r,a={},l,c)=>p=>{let g=Jd(a,n)||{},b=g.delay||a.delay||0,{elapsed:D=0}=a;D-=ld(b);let H={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...g,delay:-D,onUpdate:ie=>{e.set(ie),g.onUpdate&&g.onUpdate(ie)},onComplete:()=>{p(),g.onComplete&&g.onComplete()},name:n,motionValue:e,element:c?void 0:l};!function({when:ie,delay:ye,delayChildren:je,staggerChildren:Re,staggerDirection:Ye,repeat:ht,repeatType:Ze,repeatDelay:ke,from:Ie,elapsed:Ae,...it}){return!!Object.keys(it).length}(g)&&(H={...H,...r0(n,H)}),H.duration&&(H.duration=ld(H.duration)),H.repeatDelay&&(H.repeatDelay=ld(H.repeatDelay)),H.from!==void 0&&(H.keyframes[0]=H.from);let te=!1;if(H.type!==!1&&(H.duration!==0||H.repeatDelay)||(H.duration=0,H.delay!==0||(te=!0)),(nw.current||n0.skipAnimations)&&(te=!0,H.duration=0,H.delay=0),te&&!c&&e.get()!==void 0){let ie=Ug(H.keyframes,g);if(ie!==void 0)return Io.update(()=>{H.onUpdate(ie),H.onComplete()}),new cC([])}return!c&&B_.supports(H)?new B_(H):new FS(H)},hC=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),dC=n=>Rm(n)?n[n.length-1]||0:n;function BS(n,e){n.indexOf(e)===-1&&n.push(e)}function qS(n,e){let r=n.indexOf(e);r>-1&&n.splice(r,1)}class zS{constructor(){this.subscriptions=[]}add(e){return BS(this.subscriptions,e),()=>qS(this.subscriptions,e)}notify(e,r,a){let l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](e,r,a);else for(let c=0;c<l;c++){let p=this.subscriptions[c];p&&p(e,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let fC=n=>!isNaN(parseFloat(n)),q_={current:void 0};class pC{constructor(e,r={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,l=!0)=>{let c=De.now();this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),l&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=De.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fC(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new zS);let a=this.events[e].add(r);return e==="change"?()=>{a(),Io.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){r&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,r)}setWithVelocity(e,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-a}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return q_.current&&q_.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let r=De.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>30)return 0;let a=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),a?1e3/a*e:0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sw(n,e){return new pC(n,e)}let GS=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HS="data-"+GS("framerAppearId"),Hc=n=>!!(n&&n.getVelocity);function KS(n,e){let r=n.getValue("willChange");if(Hc(r)&&r.add)return r.add(e)}function z_(n,e,{delay:r=0,transitionOverride:a,type:l}={}){var c;let{transition:p=n.getDefaultTransition(),transitionEnd:g,...b}=e;a&&(p=a);let D=[],H=l&&n.animationState&&n.animationState.getState()[l];for(let te in b){let ie=n.getValue(te,(c=n.latestValues[te])!==null&&c!==void 0?c:null),ye=b[te];if(ye===void 0||H&&function({protectedKeys:ht,needsAnimating:Ze},ke){let Ie=ht.hasOwnProperty(ke)&&Ze[ke]!==!0;return Ze[ke]=!1,Ie}(H,te))continue;let je={delay:r,...Jd(p||{},te)},Re=!1;if(window.MotionHandoffAnimation){let ht=n.props[HS];if(ht){let Ze=window.MotionHandoffAnimation(ht,te,Io);Ze!==null&&(je.startTime=Ze,Re=!0)}}KS(n,te),ie.start($S(te,ie,ye,n.shouldReduceMotion&&jl.has(te)?{type:!1}:je,n,Re));let Ye=ie.animation;Ye&&D.push(Ye)}return g&&Promise.all(D).then(()=>{Io.update(()=>{g&&function(te,ie){let{transitionEnd:ye={},transition:je={},...Re}=Am(te,ie)||{};for(let Ye in Re={...Re,...ye}){let ht=dC(Re[Ye]);te.hasValue(Ye)?te.getValue(Ye).set(ht):te.addValue(Ye,Sw(ht))}}(n,g)})}),D}function WS(n,e,r={}){var a;let l=Am(n,e,r.type==="exit"?(a=n.presenceContext)===null||a===void 0?void 0:a.custom:void 0),{transition:c=n.getDefaultTransition()||{}}=l||{};r.transitionOverride&&(c=r.transitionOverride);let p=l?()=>Promise.all(z_(n,l,r)):()=>Promise.resolve(),g=n.variantChildren&&n.variantChildren.size?(D=0)=>{let{delayChildren:H=0,staggerChildren:te,staggerDirection:ie}=c;return function(ye,je,Re=0,Ye=0,ht=1,Ze){let ke=[],Ie=(ye.variantChildren.size-1)*Ye,Ae=ht===1?(it=0)=>it*Ye:(it=0)=>Ie-it*Ye;return Array.from(ye.variantChildren).sort(mC).forEach((it,ut)=>{it.notify("AnimationStart",je),ke.push(WS(it,je,{...Ze,delay:Re+Ae(ut)}).then(()=>it.notify("AnimationComplete",je)))}),Promise.all(ke)}(n,e,H+D,te,ie,r)}:()=>Promise.resolve(),{when:b}=c;if(!b)return Promise.all([p(),g(r.delay)]);{let[D,H]=b==="beforeChildren"?[p,g]:[g,p];return D().then(()=>H())}}function mC(n,e){return n.sortNodePosition(e)}let gC=Nm.length,yC=[...e0].reverse(),vC=e0.length;function ov(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function G_(){return{animate:ov(!0),whileInView:ov(),whileHover:ov(),whileTap:ov(),whileDrag:ov(),whileFocus:ov(),exit:ov()}}class Qg{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wC extends Qg{constructor(e){super(e),e.animationState||(e.animationState=function(r){let a=b=>Promise.all(b.map(({animation:D,options:H})=>function(te,ie,ye={}){let je;if(te.notify("AnimationStart",ie),Array.isArray(ie))je=Promise.all(ie.map(Re=>WS(te,Re,ye)));else if(typeof ie=="string")je=WS(te,ie,ye);else{let Re=typeof ie=="function"?Am(te,ie,ye.custom):ie;je=Promise.all(z_(te,Re,ye))}return je.then(()=>{te.notify("AnimationComplete",ie)})}(r,D,H))),l=G_(),c=!0,p=b=>(D,H)=>{var te;let ie=Am(r,H,b==="exit"?(te=r.presenceContext)===null||te===void 0?void 0:te.custom:void 0);if(ie){let{transition:ye,transitionEnd:je,...Re}=ie;D={...D,...Re,...je}}return D};function g(b){let{props:D}=r,H=function ht(Ze){if(!Ze)return;if(!Ze.isControllingVariants){let Ie=Ze.parent&&ht(Ze.parent)||{};return Ze.props.initial!==void 0&&(Ie.initial=Ze.props.initial),Ie}let ke={};for(let Ie=0;Ie<gC;Ie++){let Ae=Nm[Ie],it=Ze.props[Ae];(Pm(it)||it===!1)&&(ke[Ae]=it)}return ke}(r.parent)||{},te=[],ie=new Set,ye={},je=1/0;for(let ht=0;ht<vC;ht++){var Re;let Ze=yC[ht],ke=l[Ze],Ie=D[Ze]!==void 0?D[Ze]:H[Ze],Ae=Pm(Ie),it=Ze===b?ke.isActive:null;it===!1&&(je=ht);let ut=Ie===H[Ze]&&Ie!==D[Ze]&&Ae;if(ut&&c&&r.manuallyAnimateOnMount&&(ut=!1),ke.protectedKeys={...ye},!ke.isActive&&it===null||!Ie&&!ke.prevProp||Jy(Ie)||typeof Ie=="boolean")continue;let ft=(Re=ke.prevProp,typeof Ie=="string"?Ie!==Re:!!Array.isArray(Ie)&&!Xv(Ie,Re)),nt=ft||Ze===b&&ke.isActive&&!ut&&Ae||ht>je&&Ae,un=!1,is=Array.isArray(Ie)?Ie:[Ie],Oi=is.reduce(p(Ze),{});it===!1&&(Oi={});let{prevResolvedValues:Ii={}}=ke,ps={...Ii,...Oi},vs=Ni=>{nt=!0,ie.has(Ni)&&(un=!0,ie.delete(Ni)),ke.needsAnimating[Ni]=!0;let ei=r.getValue(Ni);ei&&(ei.liveStyle=!1)};for(let Ni in ps){let ei=Oi[Ni],Vs=Ii[Ni];ye.hasOwnProperty(Ni)||((Rm(ei)&&Rm(Vs)?Xv(ei,Vs):ei===Vs)?ei!==void 0&&ie.has(Ni)?vs(Ni):ke.protectedKeys[Ni]=!0:ei!=null?vs(Ni):ie.add(Ni))}ke.prevProp=Ie,ke.prevResolvedValues=Oi,ke.isActive&&(ye={...ye,...Oi}),c&&r.blockInitialAnimation&&(nt=!1),nt&&(!(ut&&ft)||un)&&te.push(...is.map(Ni=>({animation:Ni,options:{type:Ze}})))}if(ie.size){let ht={};ie.forEach(Ze=>{let ke=r.getBaseTarget(Ze),Ie=r.getValue(Ze);Ie&&(Ie.liveStyle=!0),ht[Ze]=ke??null}),te.push({animation:ht})}let Ye=!!te.length;return c&&(D.initial===!1||D.initial===D.animate)&&!r.manuallyAnimateOnMount&&(Ye=!1),c=!1,Ye?a(te):Promise.resolve()}return{animateChanges:g,setActive:function(b,D){var H;if(l[b].isActive===D)return Promise.resolve();(H=r.variantChildren)===null||H===void 0||H.forEach(ie=>{var ye;return(ye=ie.animationState)===null||ye===void 0?void 0:ye.setActive(b,D)}),l[b].isActive=D;let te=g(b);for(let ie in l)l[ie].protectedKeys={};return te},setAnimateFunction:function(b){a=b(r)},getState:()=>l,reset:()=>{l=G_(),c=!0}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();Jy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let bC=0;class SC extends Qg{constructor(){super(...arguments),this.id=bC++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;let l=this.node.animationState.setActive("exit",!e);r&&!e&&l.then(()=>r(this.id))}mount(){let{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}let cd={x:!1,y:!1},H_=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Ew(n){return{point:{x:n.pageX,y:n.pageY}}}let EC=n=>e=>H_(e)&&n(e,Ew(e));function Vm(n,e,r,a={passive:!0}){return n.addEventListener(e,r,a),()=>n.removeEventListener(e,r)}function Yg(n,e,r,a){return Vm(n,e,EC(r),a)}let K_=(n,e)=>Math.abs(n-e);class W_{constructor(e,r,{transformPagePoint:a,contextWindow:l,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let H=QS(this.lastMoveEventInfo,this.history),te=this.startEvent!==null,ie=function(ht,Ze){return Math.sqrt(K_(ht.x,Ze.x)**2+K_(ht.y,Ze.y)**2)}(H.offset,{x:0,y:0})>=3;if(!te&&!ie)return;let{point:ye}=H,{timestamp:je}=Fl;this.history.push({...ye,timestamp:je});let{onStart:Re,onMove:Ye}=this.handlers;te||(Re&&Re(this.lastMoveEvent,H),this.startEvent=this.lastMoveEvent),Ye&&Ye(this.lastMoveEvent,H)},this.handlePointerMove=(H,te)=>{this.lastMoveEvent=H,this.lastMoveEventInfo=JS(te,this.transformPagePoint),Io.update(this.updatePoint,!0)},this.handlePointerUp=(H,te)=>{this.end();let{onEnd:ie,onSessionEnd:ye,resumeAnimation:je}=this.handlers;if(this.dragSnapToOrigin&&je&&je(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let Re=QS(H.type==="pointercancel"?this.lastMoveEventInfo:JS(te,this.transformPagePoint),this.history);this.startEvent&&ie&&ie(H,Re),ye&&ye(H,Re)},!H_(e))return;this.dragSnapToOrigin=c,this.handlers=r,this.transformPagePoint=a,this.contextWindow=l||window;let p=JS(Ew(e),this.transformPagePoint),{point:g}=p,{timestamp:b}=Fl;this.history=[{...g,timestamp:b}];let{onSessionStart:D}=r;D&&D(e,QS(p,this.history)),this.removeListeners=Jg(Yg(this.contextWindow,"pointermove",this.handlePointerMove),Yg(this.contextWindow,"pointerup",this.handlePointerUp),Yg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qd(this.updatePoint)}}function JS(n,e){return e?{point:e(n.point)}:n}function J_(n,e){return{x:n.x-e.x,y:n.y-e.y}}function QS({point:n},e){return{point:n,delta:J_(n,Q_(e)),offset:J_(n,e[0]),velocity:function(r,a){if(r.length<2)return{x:0,y:0};let l=r.length-1,c=null,p=Q_(r);for(;l>=0&&(c=r[l],!(p.timestamp-c.timestamp>ld(.1)));)l--;if(!c)return{x:0,y:0};let g=dh(p.timestamp-c.timestamp);if(g===0)return{x:0,y:0};let b={x:(p.x-c.x)/g,y:(p.y-c.y)/g};return b.x===1/0&&(b.x=0),b.y===1/0&&(b.y=0),b}(e,0)}}function Q_(n){return n[n.length-1]}function v0(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function hd(n){return n.max-n.min}function Y_(n,e,r,a=.5){n.origin=a,n.originPoint=Vl(e.min,e.max,n.origin),n.scale=hd(r)/hd(e),n.translate=Vl(r.min,r.max,n.origin)-n.originPoint,(n.scale>=.9999&&n.scale<=1.0001||isNaN(n.scale))&&(n.scale=1),(n.translate>=-.01&&n.translate<=.01||isNaN(n.translate))&&(n.translate=0)}function _w(n,e,r,a){Y_(n.x,e.x,r.x,a?a.originX:void 0),Y_(n.y,e.y,r.y,a?a.originY:void 0)}function X_(n,e,r){n.min=r.min+e.min,n.max=n.min+hd(e)}function Z_(n,e,r){n.min=e.min-r.min,n.max=n.min+hd(e)}function Iw(n,e,r){Z_(n.x,e.x,r.x),Z_(n.y,e.y,r.y)}function eI(n,e,r){return{min:e!==void 0?n.min+e:void 0,max:r!==void 0?n.max+r-(n.max-n.min):void 0}}function tI(n,e){let r=e.min-n.min,a=e.max-n.max;return e.max-e.min<n.max-n.min&&([r,a]=[a,r]),{min:r,max:a}}function rI(n,e,r){return{min:nI(n,e),max:nI(n,r)}}function nI(n,e){return typeof n=="number"?n:n[e]||0}let iI=()=>({translate:0,scale:1,origin:0,originPoint:0}),w0=()=>({x:iI(),y:iI()}),sI=()=>({min:0,max:0}),du=()=>({x:sI(),y:sI()});function Zd(n){return[n("x"),n("y")]}function aI({top:n,left:e,right:r,bottom:a}){return{x:{min:e,max:r},y:{min:n,max:a}}}function YS(n){return n===void 0||n===1}function XS({scale:n,scaleX:e,scaleY:r}){return!YS(n)||!YS(e)||!YS(r)}function lv(n){return XS(n)||oI(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function oI(n){var e,r;return(e=n.x)&&e!=="0%"||(r=n.y)&&r!=="0%"}function lI(n,e,r,a,l){return l!==void 0&&(n=a+l*(n-a)),a+r*(n-a)+e}function ZS(n,e=0,r=1,a,l){n.min=lI(n.min,e,r,a,l),n.max=lI(n.max,e,r,a,l)}function uI(n,{x:e,y:r}){ZS(n.x,e.translate,e.scale,e.originPoint),ZS(n.y,r.translate,r.scale,r.originPoint)}function b0(n,e){n.min=n.min+e,n.max=n.max+e}function cI(n,e,r,a,l=.5){let c=Vl(n.min,n.max,l);ZS(n,e,r,c,a)}function S0(n,e){cI(n.x,e.x,e.scaleX,e.scale,e.originX),cI(n.y,e.y,e.scaleY,e.scale,e.originY)}function hI(n,e){return aI(function(r,a){if(!a)return r;let l=a({x:r.left,y:r.top}),c=a({x:r.right,y:r.bottom});return{top:l.y,left:l.x,bottom:c.y,right:c.x}}(n.getBoundingClientRect(),e))}let dI=({current:n})=>n?n.ownerDocument.defaultView:null,_C=new WeakMap;class IC{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=du(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){let{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;let{dragSnapToOrigin:l}=this.getProps();this.panSession=new W_(e,{onSessionStart:c=>{let{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Ew(c).point)},onStart:(c,p)=>{let{drag:g,dragPropagation:b,onDragStart:D}=this.getProps();if(g&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=g==="x"||g==="y"?cd[g]?null:(cd[g]=!0,()=>{cd[g]=!1}):cd.x||cd.y?null:(cd.x=cd.y=!0,()=>{cd.x=cd.y=!1}),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zd(te=>{let ie=this.getAxisMotionValue(te).get()||0;if(Xd.test(ie)){let{projection:ye}=this.visualElement;if(ye&&ye.layout){let je=ye.layout.layoutBox[te];if(je){let Re=hd(je);ie=parseFloat(ie)/100*Re}}}this.originPoint[te]=ie}),D&&Io.postRender(()=>D(c,p)),KS(this.visualElement,"transform");let{animationState:H}=this.visualElement;H&&H.setActive("whileDrag",!0)},onMove:(c,p)=>{let{dragPropagation:g,dragDirectionLock:b,onDirectionLock:D,onDrag:H}=this.getProps();if(!g&&!this.openDragLock)return;let{offset:te}=p;if(b&&this.currentDirection===null){this.currentDirection=function(ie,ye=10){let je=null;return Math.abs(ie.y)>ye?je="y":Math.abs(ie.x)>ye&&(je="x"),je}(te),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",p.point,te),this.updateAxis("y",p.point,te),this.visualElement.render(),H&&H(c,p)},onSessionEnd:(c,p)=>this.stop(c,p),resumeAnimation:()=>Zd(c=>{var p;return this.getAnimationState(c)==="paused"&&((p=this.getAxisMotionValue(c).animation)===null||p===void 0?void 0:p.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:dI(this.visualElement)})}stop(e,r){let a=this.isDragging;if(this.cancel(),!a)return;let{velocity:l}=r;this.startAnimation(l);let{onDragEnd:c}=this.getProps();c&&Io.postRender(()=>c(e,r))}cancel(){this.isDragging=!1;let{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,a){let{drag:l}=this.getProps();if(!a||!kb(e,l,this.currentDirection))return;let c=this.getAxisMotionValue(e),p=this.originPoint[e]+a[e];this.constraints&&this.constraints[e]&&(p=function(g,{min:b,max:D},H){return b!==void 0&&g<b?g=H?Vl(b,g,H.min):Math.max(g,b):D!==void 0&&g>D&&(g=H?Vl(D,g,H.max):Math.min(g,D)),g}(p,this.constraints[e],this.elastic[e])),c.set(p)}resolveConstraints(){var e;let{dragConstraints:r,dragElastic:a}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,c=this.constraints;r&&v0(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&l?this.constraints=function(p,{top:g,left:b,bottom:D,right:H}){return{x:eI(p.x,b,H),y:eI(p.y,g,D)}}(l.layoutBox,r):this.constraints=!1,this.elastic=function(p=.35){return p===!1?p=0:p===!0&&(p=.35),{x:rI(p,"left","right"),y:rI(p,"top","bottom")}}(a),c!==this.constraints&&l&&this.constraints&&!this.hasMutatedConstraints&&Zd(p=>{this.constraints!==!1&&this.getAxisMotionValue(p)&&(this.constraints[p]=function(g,b){let D={};return b.min!==void 0&&(D.min=b.min-g.min),b.max!==void 0&&(D.max=b.max-g.min),D}(l.layoutBox[p],this.constraints[p]))})}resolveRefConstraints(){var e;let{dragConstraints:r,onMeasureDragConstraints:a}=this.getProps();if(!r||!v0(r))return!1;let l=r.current;Ho(l!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:c}=this.visualElement;if(!c||!c.layout)return!1;let p=function(b,D,H){let te=hI(b,H),{scroll:ie}=D;return ie&&(b0(te.x,ie.offset.x),b0(te.y,ie.offset.y)),te}(l,c.root,this.visualElement.getTransformPagePoint()),g={x:tI((e=c.layout.layoutBox).x,p.x),y:tI(e.y,p.y)};if(a){let b=a(function({x:D,y:H}){return{top:H.min,right:D.max,bottom:H.max,left:D.min}}(g));this.hasMutatedConstraints=!!b,b&&(g=aI(b))}return g}startAnimation(e){let{drag:r,dragMomentum:a,dragElastic:l,dragTransition:c,dragSnapToOrigin:p,onDragTransitionEnd:g}=this.getProps(),b=this.constraints||{};return Promise.all(Zd(D=>{if(!kb(D,r,this.currentDirection))return;let H=b&&b[D]||{};p&&(H={min:0,max:0});let te={type:"inertia",velocity:a?e[D]:0,bounceStiffness:l?200:1e6,bounceDamping:l?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...c,...H};return this.startAxisValueAnimation(D,te)})).then(g)}startAxisValueAnimation(e,r){let a=this.getAxisMotionValue(e);return KS(this.visualElement,e),a.start($S(e,a,0,r,this.visualElement,!1))}stopAnimation(){Zd(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zd(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){let r=`_drag${e.toUpperCase()}`,a=this.visualElement.getProps();return a[r]||this.visualElement.getValue(e,(a.initial?a.initial[e]:void 0)||0)}snapToCursor(e){Zd(r=>{let{drag:a}=this.getProps();if(!kb(r,a,this.currentDirection))return;let{projection:l}=this.visualElement,c=this.getAxisMotionValue(r);if(l&&l.layout){let{min:p,max:g}=l.layout.layoutBox[r];c.set(e[r]-Vl(p,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!v0(r)||!a||!this.constraints)return;this.stopAnimation();let l={x:0,y:0};Zd(p=>{let g=this.getAxisMotionValue(p);if(g&&this.constraints!==!1){let b=g.get();l[p]=function(D,H){let te=.5,ie=hd(D),ye=hd(H);return ye>ie?te=Fr(H.min,H.max-ie,D.min):ie>ye&&(te=Fr(D.min,D.max-ye,H.min)),fh(0,1,te)}({min:b,max:b},this.constraints[p])}});let{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Zd(p=>{if(!kb(p,e,null))return;let g=this.getAxisMotionValue(p),{min:b,max:D}=this.constraints[p];g.set(Vl(b,D,l[p]))})}addListeners(){if(!this.visualElement.current)return;_C.set(this.visualElement,this);let e=Yg(this.visualElement.current,"pointerdown",g=>{let{drag:b,dragListener:D=!0}=this.getProps();b&&D&&this.start(g)}),r=()=>{let{dragConstraints:g}=this.getProps();v0(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Io.read(r);let c=Vm(window,"resize",()=>this.scalePositionWithinConstraints()),p=a.addEventListener("didUpdate",({delta:g,hasLayoutChanged:b})=>{this.isDragging&&b&&(Zd(D=>{let H=this.getAxisMotionValue(D);H&&(this.originPoint[D]+=g[D].translate,H.set(H.get()+g[D].translate))}),this.visualElement.render())});return()=>{c(),e(),l(),p&&p()}}getProps(){let e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:l=!1,dragConstraints:c=!1,dragElastic:p=.35,dragMomentum:g=!0}=e;return{...e,drag:r,dragDirectionLock:a,dragPropagation:l,dragConstraints:c,dragElastic:p,dragMomentum:g}}}function kb(n,e,r){return(e===!0||e===n)&&(r===null||r===n)}class TC extends Qg{constructor(e){super(e),this.removeGroupControls=Ho,this.removeListeners=Ho,this.controls=new IC(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ho}unmount(){this.removeGroupControls(),this.removeListeners()}}let fI=n=>(e,r)=>{n&&Io.postRender(()=>n(e,r))};class xC extends Qg{constructor(){super(...arguments),this.removePointerDownListener=Ho}onPointerDown(e){this.session=new W_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dI(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:r,onPan:a,onPanEnd:l}=this.node.getProps();return{onSessionStart:fI(e),onStart:fI(r),onMove:a,onEnd:(c,p)=>{delete this.session,l&&Io.postRender(()=>l(c,p))}}}mount(){this.removePointerDownListener=Yg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Rb=(0,F.createContext)(null),eE=(0,F.createContext)({}),pI=(0,F.createContext)({}),Pb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mI(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}let Tw={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string"){if(!fs.test(n))return n;n=parseFloat(n)}let r=mI(n,e.target.x),a=mI(n,e.target.y);return`${r}% ${a}%`}},Ab={},{schedule:tE,cancel:gP}=Xy(queueMicrotask,!1);class CC extends F.Component{componentDidMount(){let{visualElement:e,layoutGroup:r,switchLayoutGroup:a,layoutId:l}=this.props,{projection:c}=e;Object.assign(Ab,kC),c&&(r.group&&r.group.add(c),a&&a.register&&l&&a.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),Pb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:r,visualElement:a,drag:l,isPresent:c}=this.props,p=a.projection;return p&&(p.isPresent=c,l||e.layoutDependency!==r||r===void 0?p.willUpdate():this.safeToRemove(),e.isPresent===c||(c?p.promote():p.relegate()||Io.postRender(()=>{let g=p.getStack();g&&g.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:l}=e;l&&(l.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(l),a&&a.deregister&&a.deregister(l))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gI(n){let[e,r]=function(){let l=(0,F.useContext)(Rb);if(l===null)return[!0,null];let{isPresent:c,onExitComplete:p,register:g}=l,b=(0,F.useId)();(0,F.useEffect)(()=>g(b),[]);let D=(0,F.useCallback)(()=>p&&p(b),[b,p]);return!c&&p?[!1,D]:[!0]}(),a=(0,F.useContext)(eE);return(0,re.jsx)(CC,{...n,layoutGroup:a,switchLayoutGroup:(0,F.useContext)(pI),isPresent:e,safeToRemove:r})}let kC={borderRadius:{...Tw,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tw,borderTopRightRadius:Tw,borderBottomLeftRadius:Tw,borderBottomRightRadius:Tw,boxShadow:{correct:(n,{treeScale:e,projectionDelta:r})=>{let a=Bf.parse(n);if(a.length>5)return n;let l=Bf.createTransformer(n),c=typeof a[0]!="number"?1:0,p=r.x.scale*e.x,g=r.y.scale*e.y;a[0+c]/=p,a[1+c]/=g;let b=Vl(p,g,.5);return typeof a[2+c]=="number"&&(a[2+c]/=b),typeof a[3+c]=="number"&&(a[3+c]/=b),l(a)}}},yI=["TopLeft","TopRight","BottomLeft","BottomRight"],RC=yI.length,vI=n=>typeof n=="string"?parseFloat(n):n,wI=n=>typeof n=="number"||fs.test(n);function bI(n,e){return n[e]!==void 0?n[e]:n.borderRadius}let PC=SI(0,.5,uw),AC=SI(.5,.95,Ho);function SI(n,e,r){return a=>a<n?0:a>e?1:r(Fr(n,e,a))}function EI(n,e){n.min=e.min,n.max=e.max}function ef(n,e){EI(n.x,e.x),EI(n.y,e.y)}function _I(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function II(n,e,r,a,l){return n-=e,n=a+1/r*(n-a),l!==void 0&&(n=a+1/l*(n-a)),n}function TI(n,e,[r,a,l],c,p){(function(g,b=0,D=1,H=.5,te,ie=g,ye=g){if(Xd.test(b)&&(b=parseFloat(b),b=Vl(ye.min,ye.max,b/100)-ye.min),typeof b!="number")return;let je=Vl(ie.min,ie.max,H);g===ie&&(je-=b),g.min=II(g.min,b,D,je,te),g.max=II(g.max,b,D,je,te)})(n,e[r],e[a],e[l],e.scale,c,p)}let NC=["x","scaleX","originX"],OC=["y","scaleY","originY"];function xI(n,e,r,a){TI(n.x,e,NC,r?r.x:void 0,a?a.x:void 0),TI(n.y,e,OC,r?r.y:void 0,a?a.y:void 0)}function CI(n){return n.translate===0&&n.scale===1}function kI(n){return CI(n.x)&&CI(n.y)}function RI(n,e){return n.min===e.min&&n.max===e.max}function PI(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function AI(n,e){return PI(n.x,e.x)&&PI(n.y,e.y)}function NI(n){return hd(n.x)/hd(n.y)}function OI(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class DC{constructor(){this.members=[]}add(e){BS(this.members,e),e.scheduleRender()}remove(e){if(qS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){let r,a=this.members.findIndex(l=>e===l);if(a===0)return!1;for(let l=a;l>=0;l--){let c=this.members[l];if(c.isPresent!==!1){r=c;break}}return!!r&&(this.promote(r),!0)}promote(e,r){let a=this.lead;if(e!==a&&(this.prevLead=a,this.lead=e,e.show(),a)){a.instance&&a.scheduleRender(),e.scheduleRender(),e.resumeFrom=a,r&&(e.resumeFrom.preserveOpacity=!0),a.snapshot&&(e.snapshot=a.snapshot,e.snapshot.latestValues=a.animationValues||a.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:l}=e.options;l===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:r,resumingFrom:a}=e;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let MC=(n,e)=>n.depth-e.depth;class LC{constructor(){this.children=[],this.isDirty=!1}add(e){BS(this.children,e),this.isDirty=!0}remove(e){qS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(MC),this.isDirty=!1,this.children.forEach(e)}}function Nb(n){let e=Hc(n)?n.get():n;return hC(e)?e.toValue():e}let uv={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},xw=typeof window<"u"&&window.MotionDebug!==void 0,rE=["","X","Y","Z"],jC={visibility:"hidden"},FC=0;function nE(n,e,r,a){let{latestValues:l}=e;l[n]&&(r[n]=l[n],e.setStaticValue(n,0),a&&(a[n]=0))}function DI({attachResizeListener:n,defaultParent:e,measureScroll:r,checkIsScrollRoot:a,resetTransform:l}){return class{constructor(c={},p=e?.()){this.id=FC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,xw&&(uv.totalNodes=uv.resolvedTargetDeltas=uv.recalculatedProjection=0),this.nodes.forEach($C),this.nodes.forEach(HC),this.nodes.forEach(KC),this.nodes.forEach(BC),xw&&window.MotionDebug.record(uv)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new LC)}addEventListener(c,p){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new zS),this.eventHandlers.get(c).add(p)}notifyListeners(c,...p){let g=this.eventHandlers.get(c);g&&g.notify(...p)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,p=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=c instanceof SVGElement&&c.tagName!=="svg",this.instance=c;let{layoutId:g,layout:b,visualElement:D}=this.options;if(D&&!D.current&&D.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),p&&(b||g)&&(this.isLayoutDirty=!0),n){let H,te=()=>this.root.updateBlockedByResize=!1;n(c,()=>{this.root.updateBlockedByResize=!0,H&&H(),H=function(ie,ye){let je=De.now(),Re=({timestamp:Ye})=>{let ht=Ye-je;ht>=250&&(Qd(Re),ie(ht-250))};return Io.read(Re,!0),()=>Qd(Re)}(te,250),Pb.hasAnimatedSinceResize&&(Pb.hasAnimatedSinceResize=!1,this.nodes.forEach(LI))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&D&&(g||b)&&this.addEventListener("didUpdate",({delta:H,hasLayoutChanged:te,hasRelativeTargetChanged:ie,layout:ye})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let je=this.options.transition||D.getDefaultTransition()||YC,{onLayoutAnimationStart:Re,onLayoutAnimationComplete:Ye}=D.getProps(),ht=!this.targetLayout||!AI(this.targetLayout,ye)||ie,Ze=!te&&ie;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||Ze||te&&(ht||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(H,Ze);let ke={...Jd(je,"layout"),onPlay:Re,onComplete:Ye};(D.shouldReduceMotion||this.options.layoutRoot)&&(ke.delay=0,ke.type=!1),this.startAnimation(ke)}else te||LI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=ye})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WC),this.animationId++)}getTransformTemplate(){let{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function D(H){if(H.hasCheckedOptimisedAppear=!0,H.root===H)return;let{visualElement:te}=H.options;if(!te)return;let ie=te.props[HS];if(window.MotionHasOptimisedAnimation(ie,"transform")){let{layout:je,layoutId:Re}=H.options;window.MotionCancelOptimisedAnimation(ie,"transform",Io,!(je||Re))}let{parent:ye}=H;ye&&!ye.hasCheckedOptimisedAppear&&D(ye)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let D=0;D<this.path.length;D++){let H=this.path[D];H.shouldResetTransform=!0,H.updateScroll("snapshot"),H.options.layoutRoot&&H.willUpdate(!1)}let{layoutId:p,layout:g}=this.options;if(p===void 0&&!g)return;let b=this.getTransformTemplate();this.prevTransformTemplateValue=b?b(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(MI);return}this.isUpdating||this.nodes.forEach(zC),this.isUpdating=!1,this.nodes.forEach(GC),this.nodes.forEach(VC),this.nodes.forEach(UC),this.clearAllSnapshots();let c=De.now();Fl.delta=fh(0,1e3/60,c-Fl.timestamp),Fl.timestamp=c,Fl.isProcessing=!0,Ff.update.process(Fl),Ff.preRender.process(Fl),Ff.render.process(Fl),Fl.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qC),this.sharedNodes.forEach(JC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Io.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Io.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();let c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=du(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(p=!1),p){let g=a(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:g,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!l)return;let c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!kI(this.projectionDelta),g=this.getTransformTemplate(),b=g?g(this.latestValues,""):void 0,D=b!==this.prevTransformTemplateValue;c&&(p||lv(this.latestValues)||D)&&(l(this.instance,b),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){var p;let g=this.measurePageBox(),b=this.removeElementScroll(g);return c&&(b=this.removeTransform(b)),$I((p=b).x),$I(p.y),{animationId:this.root.animationId,measuredBox:g,layoutBox:b,latestValues:{},source:this.id}}measurePageBox(){var c;let{visualElement:p}=this.options;if(!p)return du();let g=p.measureViewportBox();if(!(((c=this.scroll)===null||c===void 0?void 0:c.wasRoot)||this.path.some(XC))){let{scroll:b}=this.root;b&&(b0(g.x,b.offset.x),b0(g.y,b.offset.y))}return g}removeElementScroll(c){var p;let g=du();if(ef(g,c),(p=this.scroll)===null||p===void 0?void 0:p.wasRoot)return g;for(let b=0;b<this.path.length;b++){let D=this.path[b],{scroll:H,options:te}=D;D!==this.root&&H&&te.layoutScroll&&(H.wasRoot&&ef(g,c),b0(g.x,H.offset.x),b0(g.y,H.offset.y))}return g}applyTransform(c,p=!1){let g=du();ef(g,c);for(let b=0;b<this.path.length;b++){let D=this.path[b];!p&&D.options.layoutScroll&&D.scroll&&D!==D.root&&S0(g,{x:-D.scroll.offset.x,y:-D.scroll.offset.y}),lv(D.latestValues)&&S0(g,D.latestValues)}return lv(this.latestValues)&&S0(g,this.latestValues),g}removeTransform(c){let p=du();ef(p,c);for(let g=0;g<this.path.length;g++){let b=this.path[g];if(!b.instance||!lv(b.latestValues))continue;XS(b.latestValues)&&b.updateSnapshot();let D=du();ef(D,b.measurePageBox()),xI(p,b.latestValues,b.snapshot?b.snapshot.layoutBox:void 0,D)}return lv(this.latestValues)&&xI(p,this.latestValues),p}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade===void 0||c.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fl.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var p,g,b,D;let H=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=H.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=H.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=H.isSharedProjectionDirty);let te=!!this.resumingFrom||this!==H;if(!(c||te&&this.isSharedProjectionDirty||this.isProjectionDirty||((p=this.parent)===null||p===void 0?void 0:p.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:ie,layoutId:ye}=this.options;if(this.layout&&(ie||ye)){if(this.resolvedRelativeTargetAt=Fl.timestamp,!this.targetDelta&&!this.relativeTarget){let je=this.getClosestProjectingParent();je&&je.layout&&this.animationProgress!==1?(this.relativeParent=je,this.forceRelativeParentToResolveTarget(),this.relativeTarget=du(),this.relativeTargetOrigin=du(),Iw(this.relativeTargetOrigin,this.layout.layoutBox,je.layout.layoutBox),ef(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target=du(),this.targetWithTransforms=du()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),g=this.target,b=this.relativeTarget,D=this.relativeParent.target,X_(g.x,b.x,D.x),X_(g.y,b.y,D.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ef(this.target,this.layout.layoutBox),uI(this.target,this.targetDelta)):ef(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let je=this.getClosestProjectingParent();je&&!!je.resumingFrom==!!this.resumingFrom&&!je.options.layoutScroll&&je.target&&this.animationProgress!==1?(this.relativeParent=je,this.forceRelativeParentToResolveTarget(),this.relativeTarget=du(),this.relativeTargetOrigin=du(),Iw(this.relativeTargetOrigin,this.target,je.target),ef(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}xw&&uv.resolvedTargetDeltas++}}}getClosestProjectingParent(){return!this.parent||XS(this.parent.latestValues)||oI(this.parent.latestValues)?void 0:this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;let p=this.getLead(),g=!!this.resumingFrom||this!==p,b=!0;if((this.isProjectionDirty||((c=this.parent)===null||c===void 0?void 0:c.isProjectionDirty))&&(b=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===Fl.timestamp&&(b=!1),b)return;let{layout:D,layoutId:H}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(D||H))return;ef(this.layoutCorrected,this.layout.layoutBox);let te=this.treeScale.x,ie=this.treeScale.y;(function(je,Re,Ye,ht=!1){let Ze,ke,Ie=Ye.length;if(Ie){Re.x=Re.y=1;for(let Ae=0;Ae<Ie;Ae++){ke=(Ze=Ye[Ae]).projectionDelta;let{visualElement:it}=Ze.options;(!it||!it.props.style||it.props.style.display!=="contents")&&(ht&&Ze.options.layoutScroll&&Ze.scroll&&Ze!==Ze.root&&S0(je,{x:-Ze.scroll.offset.x,y:-Ze.scroll.offset.y}),ke&&(Re.x*=ke.x.scale,Re.y*=ke.y.scale,uI(je,ke)),ht&&lv(Ze.latestValues)&&S0(je,Ze.latestValues))}Re.x<1.0000000000001&&Re.x>.999999999999&&(Re.x=1),Re.y<1.0000000000001&&Re.y>.999999999999&&(Re.y=1)}})(this.layoutCorrected,this.treeScale,this.path,g),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=du());let{target:ye}=p;if(!ye){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(_I(this.prevProjectionDelta.x,this.projectionDelta.x),_I(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),_w(this.projectionDelta,this.layoutCorrected,ye,this.latestValues),this.treeScale.x===te&&this.treeScale.y===ie&&OI(this.projectionDelta.x,this.prevProjectionDelta.x)&&OI(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",ye)),xw&&uv.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var p;if((p=this.options.visualElement)===null||p===void 0||p.scheduleRender(),c){let g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=w0(),this.projectionDelta=w0(),this.projectionDeltaWithTransform=w0()}setAnimationOrigin(c,p=!1){let g,b=this.snapshot,D=b?b.latestValues:{},H={...this.latestValues},te=w0();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;let ie=du(),ye=(b?b.source:void 0)!==(this.layout?this.layout.source:void 0),je=this.getStack(),Re=!je||je.members.length<=1,Ye=!!(ye&&!Re&&this.options.crossfade===!0&&!this.path.some(QC));this.animationProgress=0,this.mixTargetDelta=ht=>{let Ze=ht/1e3;if(jI(te.x,c.x,Ze),jI(te.y,c.y,Ze),this.setTargetDelta(te),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var ke,Ie,Ae,it;Iw(ie,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ae=this.relativeTarget,it=this.relativeTargetOrigin,FI(Ae.x,it.x,ie.x,Ze),FI(Ae.y,it.y,ie.y,Ze),g&&(ke=this.relativeTarget,Ie=g,RI(ke.x,Ie.x)&&RI(ke.y,Ie.y))&&(this.isProjectionDirty=!1),g||(g=du()),ef(g,this.relativeTarget)}ye&&(this.animationValues=H,function(ut,ft,nt,un,is,Oi){is?(ut.opacity=Vl(0,nt.opacity!==void 0?nt.opacity:1,PC(un)),ut.opacityExit=Vl(ft.opacity!==void 0?ft.opacity:1,0,AC(un))):Oi&&(ut.opacity=Vl(ft.opacity!==void 0?ft.opacity:1,nt.opacity!==void 0?nt.opacity:1,un));for(let Ii=0;Ii<RC;Ii++){let ps=`border${yI[Ii]}Radius`,vs=bI(ft,ps),ai=bI(nt,ps);(vs!==void 0||ai!==void 0)&&(vs||(vs=0),ai||(ai=0),vs===0||ai===0||wI(vs)===wI(ai)?(ut[ps]=Math.max(Vl(vI(vs),vI(ai),un),0),(Xd.test(ai)||Xd.test(vs))&&(ut[ps]+="%")):ut[ps]=ai)}(ft.rotate||nt.rotate)&&(ut.rotate=Vl(ft.rotate||0,nt.rotate||0,un))}(H,D,this.latestValues,Ze,Ye,Re)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Ze},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Io.update(()=>{Pb.hasAnimatedSinceResize=!0,this.currentAnimation=function(p,g,b){let D=Hc(0)?0:Sw(0);return D.start($S("",D,1e3,b)),D.animation}(0,0,{...c,onUpdate:p=>{this.mixTargetDelta(p),c.onUpdate&&c.onUpdate(p)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let c=this.getLead(),{targetWithTransforms:p,target:g,layout:b,latestValues:D}=c;if(p&&g&&b){if(this!==c&&this.layout&&b&&BI(this.options.animationType,this.layout.layoutBox,b.layoutBox)){g=this.target||du();let H=hd(this.layout.layoutBox.x);g.x.min=c.target.x.min,g.x.max=g.x.min+H;let te=hd(this.layout.layoutBox.y);g.y.min=c.target.y.min,g.y.max=g.y.min+te}ef(p,g),S0(p,D),_w(this.projectionDeltaWithTransform,this.layoutCorrected,p,D)}}registerSharedNode(c,p){this.sharedNodes.has(c)||this.sharedNodes.set(c,new DC),this.sharedNodes.get(c).add(p);let g=p.options.initialPromotionConfig;p.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(p):void 0})}isLead(){let c=this.getStack();return!c||c.lead===this}getLead(){var c;let{layoutId:p}=this.options;return p&&((c=this.getStack())===null||c===void 0?void 0:c.lead)||this}getPrevLead(){var c;let{layoutId:p}=this.options;return p?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){let{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:p,preserveFollowOpacity:g}={}){let b=this.getStack();b&&b.promote(this,g),c&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){let c=this.getStack();return!!c&&c.relegate(this)}resetSkewAndRotation(){let{visualElement:c}=this.options;if(!c)return;let p=!1,{latestValues:g}=c;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(p=!0),!p)return;let b={};g.z&&nE("z",c,b,this.animationValues);for(let D=0;D<rE.length;D++)nE(`rotate${rE[D]}`,c,b,this.animationValues),nE(`skew${rE[D]}`,c,b,this.animationValues);for(let D in c.render(),b)c.setStaticValue(D,b[D]),this.animationValues&&(this.animationValues[D]=b[D]);c.scheduleRender()}getProjectionStyles(c){var p,g;if(!this.instance||this.isSVG)return;if(!this.isVisible)return jC;let b={visibility:""},D=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,b.opacity="",b.pointerEvents=Nb(c?.pointerEvents)||"",b.transform=D?D(this.latestValues,""):"none",b;let H=this.getLead();if(!this.projectionDelta||!this.layout||!H.target){let je={};return this.options.layoutId&&(je.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,je.pointerEvents=Nb(c?.pointerEvents)||""),this.hasProjected&&!lv(this.latestValues)&&(je.transform=D?D({},""):"none",this.hasProjected=!1),je}let te=H.animationValues||H.latestValues;this.applyTransformsToTarget(),b.transform=function(je,Re,Ye){let ht="",Ze=je.x.translate/Re.x,ke=je.y.translate/Re.y,Ie=Ye?.z||0;if((Ze||ke||Ie)&&(ht=`translate3d(${Ze}px, ${ke}px, ${Ie}px) `),(Re.x!==1||Re.y!==1)&&(ht+=`scale(${1/Re.x}, ${1/Re.y}) `),Ye){let{transformPerspective:ut,rotate:ft,rotateX:nt,rotateY:un,skewX:is,skewY:Oi}=Ye;ut&&(ht=`perspective(${ut}px) ${ht}`),ft&&(ht+=`rotate(${ft}deg) `),nt&&(ht+=`rotateX(${nt}deg) `),un&&(ht+=`rotateY(${un}deg) `),is&&(ht+=`skewX(${is}deg) `),Oi&&(ht+=`skewY(${Oi}deg) `)}let Ae=je.x.scale*Re.x,it=je.y.scale*Re.y;return(Ae!==1||it!==1)&&(ht+=`scale(${Ae}, ${it})`),ht||"none"}(this.projectionDeltaWithTransform,this.treeScale,te),D&&(b.transform=D(te,b.transform));let{x:ie,y:ye}=this.projectionDelta;for(let je in b.transformOrigin=`${100*ie.origin}% ${100*ye.origin}% 0`,H.animationValues?b.opacity=H===this?(g=(p=te.opacity)!==null&&p!==void 0?p:this.latestValues.opacity)!==null&&g!==void 0?g:1:this.preserveOpacity?this.latestValues.opacity:te.opacityExit:b.opacity=H===this?te.opacity!==void 0?te.opacity:"":te.opacityExit!==void 0?te.opacityExit:0,Ab){if(te[je]===void 0)continue;let{correct:Re,applyTo:Ye}=Ab[je],ht=b.transform==="none"?te[je]:Re(te[je],H);if(Ye){let Ze=Ye.length;for(let ke=0;ke<Ze;ke++)b[Ye[ke]]=ht}else b[je]=ht}return this.options.layoutId&&(b.pointerEvents=H===this?Nb(c?.pointerEvents)||"":"none"),b}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var p;return(p=c.currentAnimation)===null||p===void 0?void 0:p.stop()}),this.root.nodes.forEach(MI),this.root.sharedNodes.clear()}}}function VC(n){n.updateLayout()}function UC(n){var e;let r=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&r&&n.hasListeners("didUpdate")){let{layoutBox:a,measuredBox:l}=n.layout,{animationType:c}=n.options,p=r.source!==n.layout.source;c==="size"?Zd(te=>{let ie=p?r.measuredBox[te]:r.layoutBox[te],ye=hd(ie);ie.min=a[te].min,ie.max=ie.min+ye}):BI(c,r.layoutBox,a)&&Zd(te=>{let ie=p?r.measuredBox[te]:r.layoutBox[te],ye=hd(a[te]);ie.max=ie.min+ye,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[te].max=n.relativeTarget[te].min+ye)});let g=w0();_w(g,a,r.layoutBox);let b=w0();p?_w(b,n.applyTransform(l,!0),r.measuredBox):_w(b,a,r.layoutBox);let D=!kI(g),H=!1;if(!n.resumeFrom){let te=n.getClosestProjectingParent();if(te&&!te.resumeFrom){let{snapshot:ie,layout:ye}=te;if(ie&&ye){let je=du();Iw(je,r.layoutBox,ie.layoutBox);let Re=du();Iw(Re,a,ye.layoutBox),AI(je,Re)||(H=!0),te.options.layoutRoot&&(n.relativeTarget=Re,n.relativeTargetOrigin=je,n.relativeParent=te)}}}n.notifyListeners("didUpdate",{layout:a,snapshot:r,delta:b,layoutDelta:g,hasLayoutChanged:D,hasRelativeTargetChanged:H})}else if(n.isLead()){let{onExitComplete:a}=n.options;a&&a()}n.options.transition=void 0}function $C(n){xw&&uv.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function BC(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function qC(n){n.clearSnapshot()}function MI(n){n.clearMeasurements()}function zC(n){n.isLayoutDirty=!1}function GC(n){let{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function LI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function HC(n){n.resolveTargetDelta()}function KC(n){n.calcProjection()}function WC(n){n.resetSkewAndRotation()}function JC(n){n.removeLeadSnapshot()}function jI(n,e,r){n.translate=Vl(e.translate,0,r),n.scale=Vl(e.scale,1,r),n.origin=e.origin,n.originPoint=e.originPoint}function FI(n,e,r,a){n.min=Vl(e.min,r.min,a),n.max=Vl(e.max,r.max,a)}function QC(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}let YC={duration:.45,ease:[.4,0,.1,1]},VI=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),UI=VI("applewebkit/")&&!VI("chrome/")?Math.round:Ho;function $I(n){n.min=UI(n.min),n.max=UI(n.max)}function BI(n,e,r){return n==="position"||n==="preserve-aspect"&&!(.2>=Math.abs(NI(e)-NI(r)))}function XC(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}let ZC=DI({attachResizeListener:(n,e)=>Vm(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iE={current:void 0},qI=DI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!iE.current){let n=new ZC({});n.mount(window),n.setOptions({layoutScroll:!0}),iE.current=n}return iE.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"});function zI(n){return e=>{e.pointerType==="touch"||cd.x||cd.y||n(e)}}function GI(n,e,r){let{props:a}=n;n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",r);let l=a[r?"onHoverStart":"onHoverEnd"];l&&Io.postRender(()=>l(e,Ew(e)))}class ek extends Qg{mount(){let{current:e,props:r}=this.node;e&&(this.unmount=function(a,l,c={}){let p=new AbortController,g={passive:!0,...c,signal:p.signal},b=zI(D=>{let{target:H}=D,te=l(D);if(!te||!H)return;let ie=zI(ye=>{te(ye),H.removeEventListener("pointerleave",ie)});H.addEventListener("pointerleave",ie,g)});return function(D,H,te){if(D instanceof Element)return[D];if(typeof D=="string"){let ie=document.querySelectorAll(D);return ie?Array.from(ie):[]}return Array.from(D)}(a).forEach(D=>{D.addEventListener("pointerenter",b,g)}),()=>p.abort()}(e,a=>(GI(this.node,a,!0),l=>GI(this.node,l,!1)),{passive:!r.onHoverStart&&!r.onHoverEnd}))}unmount(){}}class tk extends Qg{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jg(Vm(this.node.current,"focus",()=>this.onFocus()),Vm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}let HI=(n,e)=>!!e&&(n===e||HI(n,e.parentElement));function sE(n,e){if(!e)return;let r=new PointerEvent("pointer"+n);e(r,Ew(r))}class rk extends Qg{constructor(){super(...arguments),this.removeStartListeners=Ho,this.removeEndListeners=Ho,this.removeAccessibleListeners=Ho,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();let a=this.node.getProps(),l=Yg(window,"pointerup",(p,g)=>{if(!this.checkPressEnd())return;let{onTap:b,onTapCancel:D,globalTapTarget:H}=this.node.getProps(),te=H||HI(this.node.current,p.target)?b:D;te&&Io.update(()=>te(p,g))},{passive:!(a.onTap||a.onPointerUp)}),c=Yg(window,"pointercancel",(p,g)=>this.cancelPress(p,g),{passive:!(a.onTapCancel||a.onPointerCancel)});this.removeEndListeners=Jg(l,c),this.startPress(e,r)},this.startAccessiblePress=()=>{let e=Vm(this.node.current,"keydown",a=>{a.key!=="Enter"||this.isPressing||(this.removeEndListeners(),this.removeEndListeners=Vm(this.node.current,"keyup",l=>{l.key==="Enter"&&this.checkPressEnd()&&sE("up",(c,p)=>{let{onTap:g}=this.node.getProps();g&&Io.postRender(()=>g(c,p))})}),sE("down",(l,c)=>{this.startPress(l,c)}))}),r=Vm(this.node.current,"blur",()=>{this.isPressing&&sE("cancel",(a,l)=>this.cancelPress(a,l))});this.removeAccessibleListeners=Jg(e,r)}}startPress(e,r){this.isPressing=!0;let{onTapStart:a,whileTap:l}=this.node.getProps();l&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),a&&Io.postRender(()=>a(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!(cd.x||cd.y)}cancelPress(e,r){if(!this.checkPressEnd())return;let{onTapCancel:a}=this.node.getProps();a&&Io.postRender(()=>a(e,r))}mount(){let e=this.node.getProps(),r=Yg(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),a=Vm(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Jg(r,a)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}let aE=new WeakMap,oE=new WeakMap,nk=n=>{let e=aE.get(n.target);e&&e(n)},ik=n=>{n.forEach(nk)},sk={some:0,all:1};class ak extends Qg{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:r,margin:a,amount:l="some",once:c}=e,p={root:r?r.current:void 0,rootMargin:a,threshold:typeof l=="number"?l:sk[l]};return function(g,b,D){let H=function({root:te,...ie}){let ye=te||document;oE.has(ye)||oE.set(ye,{});let je=oE.get(ye),Re=JSON.stringify(ie);return je[Re]||(je[Re]=new IntersectionObserver(ik,{root:te,...ie})),je[Re]}(b);return aE.set(g,D),H.observe(g),()=>{aE.delete(g),H.unobserve(g)}}(this.node.current,p,g=>{let{isIntersecting:b}=g;if(this.isInView===b||(this.isInView=b,c&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);let{onViewportEnter:D,onViewportLeave:H}=this.node.getProps(),te=b?D:H;te&&te(g)})}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;let{props:e,prevProps:r}=this.node;["amount","margin","root"].some(function({viewport:a={}},{viewport:l={}}={}){return c=>a[c]!==l[c]}(e,r))&&this.startObserver()}unmount(){}}let lE=(0,F.createContext)({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Ob=(0,F.createContext)({}),uE=typeof window<"u",KI=uE?F.useLayoutEffect:F.useEffect,WI=(0,F.createContext)({strict:!1});function Db(n){return Jy(n.animate)||Nm.some(e=>Pm(n[e]))}function JI(n){return!!(Db(n)||n.variants)}function QI(n){return Array.isArray(n)?n.join(" "):n}let YI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},E0={};for(let n in YI)E0[n]={isEnabled:e=>YI[n].some(r=>!!e[r])};let ok=Symbol.for("motionComponentSymbol"),lk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cE(n){if(!(typeof n!="string"||n.includes("-"))){if(lk.indexOf(n)>-1||/[A-Z]/u.test(n))return!0}return!1}function XI(n,{style:e,vars:r},a,l){for(let c in Object.assign(n.style,e,l&&l.getProjectionStyles(a)),r)n.style.setProperty(c,r[c])}let ZI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eT(n,e,r,a){for(let l in XI(n,e,void 0,a),e.attrs)n.setAttribute(ZI.has(l)?l:GS(l),e.attrs[l])}function tT(n,{layout:e,layoutId:r}){return jl.has(n)||n.startsWith("origin")||(e||r!==void 0)&&(!!Ab[n]||n==="opacity")}function hE(n,e,r){var a;let{style:l}=n,c={};for(let p in l)(Hc(l[p])||e.style&&Hc(e.style[p])||tT(p,n)||((a=r?.getValue(p))===null||a===void 0?void 0:a.liveStyle)!==void 0)&&(c[p]=l[p]);return c}function rT(n,e,r){let a=hE(n,e,r);for(let l in n)(Hc(n[l])||Hc(e[l]))&&(a[Fg.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l]=n[l]);return a}function dE(n){let e=(0,F.useRef)(null);return e.current===null&&(e.current=n()),e.current}let nT=n=>(e,r)=>{let a=(0,F.useContext)(Ob),l=(0,F.useContext)(Rb),c=()=>function({scrapeMotionValuesFromProps:p,createRenderState:g,onMount:b},D,H,te){let ie={latestValues:function(ye,je,Re,Ye){let ht={},Ze=Ye(ye,{});for(let nt in Ze)ht[nt]=Nb(Ze[nt]);let{initial:ke,animate:Ie}=ye,Ae=Db(ye),it=JI(ye);je&&it&&!Ae&&ye.inherit!==!1&&(ke===void 0&&(ke=je.initial),Ie===void 0&&(Ie=je.animate));let ut=!!Re&&Re.initial===!1,ft=(ut=ut||ke===!1)?Ie:ke;if(ft&&typeof ft!="boolean"&&!Jy(ft)){let nt=Array.isArray(ft)?ft:[ft];for(let un=0;un<nt.length;un++){let is=Zv(ye,nt[un]);if(is){let{transitionEnd:Oi,transition:Ii,...ps}=is;for(let vs in ps){let ai=ps[vs];if(Array.isArray(ai)){let Ni=ut?ai.length-1:0;ai=ai[Ni]}ai!==null&&(ht[vs]=ai)}for(let vs in Oi)ht[vs]=Oi[vs]}}}return ht}(D,H,te,p),renderState:g()};return b&&(ie.mount=ye=>b(D,ye,ie)),ie}(n,e,a,l);return r?c():dE(c)},fE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),iT=()=>({...fE(),attrs:{}}),sT=(n,e)=>e&&typeof n=="number"?e.transform(n):n,uk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ck=Fg.length;function pE(n,e,r){let{style:a,vars:l,transformOrigin:c}=n,p=!1,g=!1;for(let b in e){let D=e[b];if(jl.has(b)){p=!0;continue}if(rv(b)){l[b]=D;continue}{let H=sT(D,m0[b]);b.startsWith("origin")?(g=!0,c[b]=H):a[b]=H}}if(!e.transform&&(p||r?a.transform=function(b,D,H){let te="",ie=!0;for(let ye=0;ye<ck;ye++){let je=Fg[ye],Re=b[je];if(Re===void 0)continue;let Ye=!0;if(!(Ye=typeof Re=="number"?Re===(je.startsWith("scale")?1:0):parseFloat(Re)===0)||H){let ht=sT(Re,m0[je]);if(!Ye){ie=!1;let Ze=uk[je]||je;te+=`${Ze}(${ht}) `}H&&(D[je]=ht)}}return te=te.trim(),H?te=H(D,ie?"":te):ie&&(te="none"),te}(e,n.transform,r):a.transform&&(a.transform="none")),g){let{originX:b="50%",originY:D="50%",originZ:H=0}=c;a.transformOrigin=`${b} ${D} ${H}`}}function aT(n,e,r){return typeof n=="string"?n:fs.transform(e+r*n)}let hk={offset:"stroke-dashoffset",array:"stroke-dasharray"},dk={offset:"strokeDashoffset",array:"strokeDasharray"};function mE(n,{attrX:e,attrY:r,attrScale:a,originX:l,originY:c,pathLength:p,pathSpacing:g=1,pathOffset:b=0,...D},H,te){if(pE(n,D,te),H){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};let{attrs:ie,style:ye,dimensions:je}=n;ie.transform&&(je&&(ye.transform=ie.transform),delete ie.transform),je&&(l!==void 0||c!==void 0||ye.transform)&&(ye.transformOrigin=function(Re,Ye,ht){let Ze=aT(Ye,Re.x,Re.width),ke=aT(ht,Re.y,Re.height);return`${Ze} ${ke}`}(je,l!==void 0?l:.5,c!==void 0?c:.5)),e!==void 0&&(ie.x=e),r!==void 0&&(ie.y=r),a!==void 0&&(ie.scale=a),p!==void 0&&function(Re,Ye,ht=1,Ze=0,ke=!0){Re.pathLength=1;let Ie=ke?hk:dk;Re[Ie.offset]=fs.transform(-Ze);let Ae=fs.transform(Ye),it=fs.transform(ht);Re[Ie.array]=`${Ae} ${it}`}(ie,p,g,b,!1)}let gE=n=>typeof n=="string"&&n.toLowerCase()==="svg",fk={useVisualState:nT({scrapeMotionValuesFromProps:rT,createRenderState:iT,onMount:(n,e,{renderState:r,latestValues:a})=>{Io.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Io.render(()=>{mE(r,a,gE(e.tagName),n.transformTemplate),eT(e,r)})}})},pk={useVisualState:nT({scrapeMotionValuesFromProps:hE,createRenderState:fE})};function oT(n,e,r){for(let a in e)Hc(e[a])||tT(a,r)||(n[a]=e[a])}let mk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mb(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||mk.has(n)}let lT=n=>!Mb(n);try{(function(n){n&&(lT=e=>e.startsWith("on")?!Mb(e):n(e))})(mP("@emotion/is-prop-valid").default)}catch{}let yE={current:null},uT={current:!1},cT=new WeakMap,gk=[...zg,hu,Bf],yk=n=>gk.find(qg(n)),hT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vk{scrapeMotionValuesFromProps(e,r,a){return{}}constructor({parent:e,props:r,presenceContext:a,reducedMotionConfig:l,blockInitialAnimation:c,visualState:p},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=c0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let ie=De.now();this.renderScheduledAt<ie&&(this.renderScheduledAt=ie,Io.render(this.render,!1,!0))};let{latestValues:b,renderState:D}=p;this.latestValues=b,this.baseTarget={...b},this.initialValues=r.initial?{...b}:{},this.renderState=D,this.parent=e,this.props=r,this.presenceContext=a,this.depth=e?e.depth+1:0,this.reducedMotionConfig=l,this.options=g,this.blockInitialAnimation=!!c,this.isControllingVariants=Db(r),this.isVariantNode=JI(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:H,...te}=this.scrapeMotionValuesFromProps(r,{},this);for(let ie in te){let ye=te[ie];b[ie]!==void 0&&Hc(ye)&&ye.set(b[ie],!1)}}mount(e){this.current=e,cT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),uT.current||function(){if(uT.current=!0,uE)if(window.matchMedia){let r=window.matchMedia("(prefers-reduced-motion)"),a=()=>yE.current=r.matches;r.addListener(a),a()}else yE.current=!1}(),this.shouldReduceMotion=this.reducedMotionConfig!=="never"&&(this.reducedMotionConfig==="always"||yE.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in cT.delete(this.current),this.projection&&this.projection.unmount(),Qd(this.notifyUpdate),Qd(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let e in this.features){let r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){let a;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let l=jl.has(e),c=r.on("change",g=>{this.latestValues[e]=g,this.props.onUpdate&&Io.preRender(this.notifyUpdate),l&&this.projection&&(this.projection.isTransformDirty=!0)}),p=r.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{c(),p(),a&&a(),r.owner&&r.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in E0){let r=E0[e];if(!r)continue;let{isEnabled:a,Feature:l}=r;if(!this.features[e]&&l&&a(this.props)&&(this.features[e]=new l(this)),this.features[e]){let c=this.features[e];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):du()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<hT.length;a++){let l=hT[a];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);let c=e["on"+l];c&&(this.propEventSubscriptions[l]=this.on(l,c))}this.prevMotionValues=function(a,l,c){for(let p in l){let g=l[p],b=c[p];if(Hc(g))a.addValue(p,g);else if(Hc(b))a.addValue(p,Sw(g,{owner:a}));else if(b!==g)if(a.hasValue(p)){let D=a.getValue(p);D.liveStyle===!0?D.jump(g):D.hasAnimated||D.set(g)}else{let D=a.getStaticValue(p);a.addValue(p,Sw(D!==void 0?D:g,{owner:a}))}}for(let p in c)l[p]===void 0&&a.removeValue(p);return l}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){let a=this.values.get(e);r!==a&&(a&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);let r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let a=this.values.get(e);return a===void 0&&r!==void 0&&(a=Sw(r===null?void 0:r,{owner:this}),this.addValue(e,a)),a}readValue(e,r){var a;let l=this.latestValues[e]===void 0&&this.current?(a=this.getBaseTargetFromProps(this.props,e))!==null&&a!==void 0?a:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return l!=null&&(typeof l=="string"&&(Yd(l)||Cp(l))?l=parseFloat(l):!yk(l)&&Bf.test(r)&&(l=ww(e,r)),this.setBaseTarget(e,Hc(l)?l.get():l)),Hc(l)?l.get():l}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;let a,{initial:l}=this.props;if(typeof l=="string"||typeof l=="object"){let p=Zv(this.props,l,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);p&&(a=p[e])}if(l&&a!==void 0)return a;let c=this.getBaseTargetFromProps(this.props,e);return c===void 0||Hc(c)?this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]:c}on(e,r){return this.events[e]||(this.events[e]=new zS),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class dT extends vk{constructor(){super(...arguments),this.KeyframeResolver=Fm}sortInstanceNodePosition(e,r){return 2&e.compareDocumentPosition(r)?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:a}){delete r[e],delete a[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;Hc(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class wk extends dT{constructor(){super(...arguments),this.type="html",this.renderInstance=XI}readValueFromInstance(e,r){if(jl.has(r)){let a=Ic(r);return a&&a.default||0}{let a=window.getComputedStyle(e),l=(rv(r)?a.getPropertyValue(r):a[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:r}){return hI(e,r)}build(e,r,a){pE(e,r,a.transformTemplate)}scrapeMotionValuesFromProps(e,r,a){return hE(e,r,a)}}class bk extends dT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=du}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(jl.has(r)){let a=Ic(r);return a&&a.default||0}return r=ZI.has(r)?r:GS(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,a){return rT(e,r,a)}build(e,r,a){mE(e,r,this.isSVGTag,a.transformTemplate)}renderInstance(e,r,a,l){eT(e,r,a,l)}mount(e){this.isSVGTag=gE(e.tagName),super.mount(e)}}let ph=function(n){if(typeof Proxy>"u")return n;let e=new Map;return new Proxy((...r)=>n(...r),{get:(r,a)=>a==="create"?n:(e.has(a)||e.set(a,n(a)),e.get(a))})}((z={animation:{Feature:wC},exit:{Feature:SC},inView:{Feature:ak},tap:{Feature:rk},focus:{Feature:tk},hover:{Feature:ek},pan:{Feature:xC},drag:{Feature:TC,ProjectionNode:qI,MeasureLayout:gI},layout:{ProjectionNode:qI,MeasureLayout:gI}},y=(n,e)=>cE(n)?new bk(e):new wk(e,{allowProjection:n!==F.Fragment}),function(n,{forwardMotionProps:e}={forwardMotionProps:!1}){return function({preloadedFeatures:r,createVisualElement:a,useRender:l,useVisualState:c,Component:p}){r&&function(b){for(let D in b)E0[D]={...E0[D],...b[D]}}(r);let g=(0,F.forwardRef)(function(b,D){var H;let te,ie={...(0,F.useContext)(lE),...b,layoutId:function({layoutId:Ye}){let ht=(0,F.useContext)(eE).id;return ht&&Ye!==void 0?ht+"-"+Ye:Ye}(b)},{isStatic:ye}=ie,je=function(Ye){let{initial:ht,animate:Ze}=function(ke,Ie){if(Db(ke)){let{initial:Ae,animate:it}=ke;return{initial:Ae===!1||Pm(Ae)?Ae:void 0,animate:Pm(it)?it:void 0}}return ke.inherit!==!1?Ie:{}}(Ye,(0,F.useContext)(Ob));return(0,F.useMemo)(()=>({initial:ht,animate:Ze}),[QI(ht),QI(Ze)])}(b),Re=c(b,ye);if(!ye&&uE){(0,F.useContext)(WI).strict;let Ye=function(ht){let{drag:Ze,layout:ke}=E0;if(!Ze&&!ke)return{};let Ie={...Ze,...ke};return{MeasureLayout:Ze?.isEnabled(ht)||ke?.isEnabled(ht)?Ie.MeasureLayout:void 0,ProjectionNode:Ie.ProjectionNode}}(ie);te=Ye.MeasureLayout,je.visualElement=function(ht,Ze,ke,Ie,Ae){var it,ut;let{visualElement:ft}=(0,F.useContext)(Ob),nt=(0,F.useContext)(WI),un=(0,F.useContext)(Rb),is=(0,F.useContext)(lE).reducedMotion,Oi=(0,F.useRef)();Ie=Ie||nt.renderer,!Oi.current&&Ie&&(Oi.current=Ie(ht,{visualState:Ze,parent:ft,props:ke,presenceContext:un,blockInitialAnimation:!!un&&un.initial===!1,reducedMotionConfig:is}));let Ii=Oi.current,ps=(0,F.useContext)(pI);Ii&&!Ii.projection&&Ae&&(Ii.type==="html"||Ii.type==="svg")&&function(ei,Vs,fa,uo){let{layoutId:Xo,layout:Wo,drag:xc,dragConstraints:gl,layoutScroll:To,layoutRoot:qi}=Vs;ei.projection=new fa(ei.latestValues,Vs["data-framer-portal-id"]?void 0:function va(Ps){if(Ps)return Ps.options.allowProjection!==!1?Ps.projection:va(Ps.parent)}(ei.parent)),ei.projection.setOptions({layoutId:Xo,layout:Wo,alwaysMeasureLayout:!!xc||gl&&v0(gl),visualElement:ei,animationType:typeof Wo=="string"?Wo:"both",initialPromotionConfig:uo,layoutScroll:To,layoutRoot:qi})}(Oi.current,ke,Ae,ps);let vs=(0,F.useRef)(!1);(0,F.useInsertionEffect)(()=>{Ii&&vs.current&&Ii.update(ke,un)});let ai=ke[HS],Ni=(0,F.useRef)(!!ai&&!(!((it=window.MotionHandoffIsComplete)===null||it===void 0)&&it.call(window,ai))&&((ut=window.MotionHasOptimisedAnimation)===null||ut===void 0?void 0:ut.call(window,ai)));return KI(()=>{Ii&&(vs.current=!0,window.MotionIsMounted=!0,Ii.updateFeatures(),tE.render(Ii.render),Ni.current&&Ii.animationState&&Ii.animationState.animateChanges())}),(0,F.useEffect)(()=>{Ii&&(!Ni.current&&Ii.animationState&&Ii.animationState.animateChanges(),Ni.current&&(queueMicrotask(()=>{var ei;(ei=window.MotionHandoffMarkAsComplete)===null||ei===void 0||ei.call(window,ai)}),Ni.current=!1))}),Ii}(p,Re,ie,a,Ye.ProjectionNode)}return(0,re.jsxs)(Ob.Provider,{value:je,children:[te&&je.visualElement?(0,re.jsx)(te,{visualElement:je.visualElement,...ie}):null,l(p,b,(H=je.visualElement,(0,F.useCallback)(Ye=>{Ye&&Re.mount&&Re.mount(Ye),H&&(Ye?H.mount(Ye):H.unmount()),D&&(typeof D=="function"?D(Ye):v0(D)&&(D.current=Ye))},[H])),Re,ye,je.visualElement)]})});return g[ok]=p,g}({...cE(n)?fk:pk,preloadedFeatures:z,useRender:function(r=!1){return(a,l,c,{latestValues:p},g)=>{let b=(cE(a)?function(ye,je,Re,Ye){let ht=(0,F.useMemo)(()=>{let Ze=iT();return mE(Ze,je,gE(Ye),ye.transformTemplate),{...Ze.attrs,style:{...Ze.style}}},[je]);if(ye.style){let Ze={};oT(Ze,ye.style,ye),ht.style={...Ze,...ht.style}}return ht}:function(ye,je){let Re={},Ye=function(ht,Ze){let ke=ht.style||{},Ie={};return oT(Ie,ke,ht),Object.assign(Ie,function({transformTemplate:Ae},it){return(0,F.useMemo)(()=>{let ut=fE();return pE(ut,it,Ae),Object.assign({},ut.vars,ut.style)},[it])}(ht,Ze)),Ie}(ye,je);return ye.drag&&ye.dragListener!==!1&&(Re.draggable=!1,Ye.userSelect=Ye.WebkitUserSelect=Ye.WebkitTouchCallout="none",Ye.touchAction=ye.drag===!0?"none":`pan-${ye.drag==="x"?"y":"x"}`),ye.tabIndex===void 0&&(ye.onTap||ye.onTapStart||ye.whileTap)&&(Re.tabIndex=0),Re.style=Ye,Re})(l,p,g,a),D=function(ye,je,Re){let Ye={};for(let ht in ye)(ht!=="values"||typeof ye.values!="object")&&(lT(ht)||Re===!0&&Mb(ht)||!je&&!Mb(ht)||ye.draggable&&ht.startsWith("onDrag"))&&(Ye[ht]=ye[ht]);return Ye}(l,typeof a=="string",r),H=a!==F.Fragment?{...D,...b,ref:c}:{},{children:te}=l,ie=(0,F.useMemo)(()=>Hc(te)?te.get():te,[te]);return(0,F.createElement)(a,{...H,children:ie})}}(e),createVisualElement:y,Component:n})}));class Sk extends F.Component{getSnapshotBeforeUpdate(e){let r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){let a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ek({children:n,isPresent:e}){let r=(0,F.useId)(),a=(0,F.useRef)(null),l=(0,F.useRef)({width:0,height:0,top:0,left:0}),{nonce:c}=(0,F.useContext)(lE);return(0,F.useInsertionEffect)(()=>{let{width:p,height:g,top:b,left:D}=l.current;if(e||!a.current||!p||!g)return;a.current.dataset.motionPopId=r;let H=document.createElement("style");return c&&(H.nonce=c),document.head.appendChild(H),H.sheet&&H.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${g}px !important;
            top: ${b}px !important;
            left: ${D}px !important;
          }
        `),()=>{document.head.removeChild(H)}},[e]),(0,re.jsx)(Sk,{isPresent:e,childRef:a,sizeRef:l,children:F.cloneElement(n,{ref:a})})}let _k=({children:n,initial:e,isPresent:r,onExitComplete:a,custom:l,presenceAffectsLayout:c,mode:p})=>{let g=dE(Ik),b=(0,F.useId)(),D=(0,F.useCallback)(te=>{for(let ie of(g.set(te,!0),g.values()))if(!ie)return;a&&a()},[g,a]),H=(0,F.useMemo)(()=>({id:b,initial:e,isPresent:r,custom:l,onExitComplete:D,register:te=>(g.set(te,!1),()=>g.delete(te))}),c?[Math.random(),D]:[r,D]);return(0,F.useMemo)(()=>{g.forEach((te,ie)=>g.set(ie,!1))},[r]),F.useEffect(()=>{r||g.size||!a||a()},[r]),p==="popLayout"&&(n=(0,re.jsx)(Ek,{isPresent:r,children:n})),(0,re.jsx)(Rb.Provider,{value:H,children:n})};function Ik(){return new Map}let Lb=n=>n.key||"";function fT(n){let e=[];return F.Children.forEach(n,r=>{(0,F.isValidElement)(r)&&e.push(r)}),e}let pT=({children:n,exitBeforeEnter:e,custom:r,initial:a=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:p="sync"})=>{Ho(!e,"Replace exitBeforeEnter with mode='wait'");let g=(0,F.useMemo)(()=>fT(n),[n]),b=g.map(Lb),D=(0,F.useRef)(!0),H=(0,F.useRef)(g),te=dE(()=>new Map),[ie,ye]=(0,F.useState)(g),[je,Re]=(0,F.useState)(g);KI(()=>{D.current=!1,H.current=g;for(let Ze=0;Ze<je.length;Ze++){let ke=Lb(je[Ze]);b.includes(ke)?te.delete(ke):te.get(ke)!==!0&&te.set(ke,!1)}},[je,b.length,b.join("-")]);let Ye=[];if(g!==ie){let Ze=[...g];for(let ke=0;ke<je.length;ke++){let Ie=je[ke],Ae=Lb(Ie);b.includes(Ae)||(Ze.splice(ke,0,Ie),Ye.push(Ie))}p==="wait"&&Ye.length&&(Ze=Ye),Re(fT(Ze)),ye(g);return}let{forceRender:ht}=(0,F.useContext)(eE);return(0,re.jsx)(re.Fragment,{children:je.map(Ze=>{let ke=Lb(Ze),Ie=g===je||b.includes(ke);return(0,re.jsx)(_k,{isPresent:Ie,initial:(!D.current||!!a)&&void 0,custom:Ie?void 0:r,presenceAffectsLayout:c,mode:p,onExitComplete:Ie?void 0:()=>{if(!te.has(ke))return;te.set(ke,!0);let Ae=!0;te.forEach(it=>{it||(Ae=!1)}),Ae&&(ht?.(),Re(H.current),l&&l())},children:Ze},ke)})})};var Ul=M(8408),Tc=M(9677),jb=M(6769),tf=M(7730),Tk=Q["useId".toString()]||(()=>{}),xk=0;function _0(n){let[e,r]=F.useState(Tk());return(0,tf.b)(()=>{n||r(a=>a??String(xk++))},[n]),n||(e?`radix-${e}`:"")}var Fb=M(8878),mT=M(1335),Tl=M(2316),Vb=M(8466),vE="focusScope.autoFocusOnMount",wE="focusScope.autoFocusOnUnmount",gT={bubbles:!1,cancelable:!0},bE=F.forwardRef((n,e)=>{let{loop:r=!1,trapped:a=!1,onMountAutoFocus:l,onUnmountAutoFocus:c,...p}=n,[g,b]=F.useState(null),D=(0,Vb.W)(l),H=(0,Vb.W)(c),te=F.useRef(null),ie=(0,Tc.e)(e,Re=>b(Re)),ye=F.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;F.useEffect(()=>{if(a){let Re=function(Ze){if(ye.paused||!g)return;let ke=Ze.target;g.contains(ke)?te.current=ke:Xg(te.current,{select:!0})},Ye=function(Ze){if(ye.paused||!g)return;let ke=Ze.relatedTarget;ke===null||g.contains(ke)||Xg(te.current,{select:!0})};document.addEventListener("focusin",Re),document.addEventListener("focusout",Ye);let ht=new MutationObserver(function(Ze){if(document.activeElement===document.body)for(let ke of Ze)ke.removedNodes.length>0&&Xg(g)});return g&&ht.observe(g,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",Re),document.removeEventListener("focusout",Ye),ht.disconnect()}}},[a,g,ye.paused]),F.useEffect(()=>{if(g){wT.add(ye);let Re=document.activeElement;if(!g.contains(Re)){let Ye=new CustomEvent(vE,gT);g.addEventListener(vE,D),g.dispatchEvent(Ye),Ye.defaultPrevented||(function(ht,{select:Ze=!1}={}){let ke=document.activeElement;for(let Ie of ht)if(Xg(Ie,{select:Ze}),document.activeElement!==ke)return}(yT(g).filter(ht=>ht.tagName!=="A"),{select:!0}),document.activeElement===Re&&Xg(g))}return()=>{g.removeEventListener(vE,D),setTimeout(()=>{let Ye=new CustomEvent(wE,gT);g.addEventListener(wE,H),g.dispatchEvent(Ye),Ye.defaultPrevented||Xg(Re??document.body,{select:!0}),g.removeEventListener(wE,H),wT.remove(ye)},0)}}},[g,D,H,ye]);let je=F.useCallback(Re=>{if(!r&&!a||ye.paused)return;let Ye=Re.key==="Tab"&&!Re.altKey&&!Re.ctrlKey&&!Re.metaKey,ht=document.activeElement;if(Ye&&ht){let Ze=Re.currentTarget,[ke,Ie]=function(Ae){let it=yT(Ae);return[vT(it,Ae),vT(it.reverse(),Ae)]}(Ze);ke&&Ie?Re.shiftKey||ht!==Ie?Re.shiftKey&&ht===ke&&(Re.preventDefault(),r&&Xg(Ie,{select:!0})):(Re.preventDefault(),r&&Xg(ke,{select:!0})):ht===Ze&&Re.preventDefault()}},[r,a,ye.paused]);return(0,re.jsx)(Tl.WV.div,{tabIndex:-1,...p,ref:ie,onKeyDown:je})});function yT(n){let e=[],r=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let l=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||l?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function vT(n,e){for(let r of n)if(!function(a,{upTo:l}){if(getComputedStyle(a).visibility==="hidden")return!0;for(;a&&(l===void 0||a!==l);){if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}(r,{upTo:e}))return r}function Xg(n,{select:e=!1}={}){if(n&&n.focus){var r;let a=document.activeElement;n.focus({preventScroll:!0}),n!==a&&(r=n)instanceof HTMLInputElement&&"select"in r&&e&&n.select()}}bE.displayName="FocusScope";var wT=function(){let n=[];return{add(e){let r=n[0];e!==r&&r?.pause(),(n=bT(n,e)).unshift(e)},remove(e){n=bT(n,e),n[0]?.resume()}}}();function bT(n,e){let r=[...n],a=r.indexOf(e);return a!==-1&&r.splice(a,1),r}var ST=M(1338),SE=M(27),EE=0;function ET(){F.useEffect(()=>{let n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??_T()),document.body.insertAdjacentElement("beforeend",n[1]??_T()),EE++,()=>{EE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),EE--}},[])}function _T(){let n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Ub="right-scroll-bar-position",$b="width-before-scroll-bar";function _E(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}var Ck=typeof window<"u"?F.useLayoutEffect:F.useEffect,IT=new WeakMap;function kk(n){return n}var TT=function(n){n===void 0&&(n={});var e,r,a,l=(e===void 0&&(e=kk),r=[],a=!1,{read:function(){if(a)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:null},useMedium:function(c){var p=e(c,a);return r.push(p),function(){r=r.filter(function(g){return g!==p})}},assignSyncMedium:function(c){for(a=!0;r.length;){var p=r;r=[],p.forEach(c)}r={push:function(g){return c(g)},filter:function(){return r}}},assignMedium:function(c){a=!0;var p=[];if(r.length){var g=r;r=[],g.forEach(c),p=r}var b=function(){var H=p;p=[],H.forEach(c)},D=function(){return Promise.resolve().then(b)};D(),r={push:function(H){p.push(H),D()},filter:function(H){return p=p.filter(H),r}}}});return l.options=ci({async:!0,ssr:!1},n),l}(),IE=function(){},Bb=F.forwardRef(function(n,e){var r,a,l,c,p=F.useRef(null),g=F.useState({onScrollCapture:IE,onWheelCapture:IE,onTouchMoveCapture:IE}),b=g[0],D=g[1],H=n.forwardProps,te=n.children,ie=n.className,ye=n.removeScrollBar,je=n.enabled,Re=n.shards,Ye=n.sideCar,ht=n.noIsolation,Ze=n.inert,ke=n.allowPinchZoom,Ie=n.as,Ae=n.gapMode,it=Zo(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),ut=(r=[p,e],a=function(nt){return r.forEach(function(un){return _E(un,nt)})},(l=(0,F.useState)(function(){return{value:null,callback:a,facade:{get current(){return l.value},set current(nt){var un=l.value;un!==nt&&(l.value=nt,l.callback(nt,un))}}}})[0]).callback=a,c=l.facade,Ck(function(){var nt=IT.get(c);if(nt){var un=new Set(nt),is=new Set(r),Oi=c.current;un.forEach(function(Ii){is.has(Ii)||_E(Ii,null)}),is.forEach(function(Ii){un.has(Ii)||_E(Ii,Oi)})}IT.set(c,r)},[r]),c),ft=ci(ci({},it),b);return F.createElement(F.Fragment,null,je&&F.createElement(Ye,{sideCar:TT,removeScrollBar:ye,shards:Re,noIsolation:ht,inert:Ze,setCallbacks:D,allowPinchZoom:!!ke,lockRef:p,gapMode:Ae}),H?F.cloneElement(F.Children.only(te),ci(ci({},ft),{ref:ut})):F.createElement(Ie===void 0?"div":Ie,ci({},ft,{className:ie,ref:ut}),te))});Bb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Bb.classNames={fullWidth:$b,zeroRight:Ub};var xT=function(n){var e=n.sideCar,r=Zo(n,["sideCar"]);if(!e)throw Error("Sidecar: please provide `sideCar` property to import the right car");var a=e.read();if(!a)throw Error("Sidecar medium not found");return F.createElement(a,ci({},r))};xT.isSideCarExport=!0;var Rk=function(){var n=0,e=null;return{add:function(r){if(n==0&&(e=function(){if(!document)return null;var c=document.createElement("style");c.type="text/css";var p=jt||M.nc;return p&&c.setAttribute("nonce",p),c}())){var a,l;(a=e).styleSheet?a.styleSheet.cssText=r:a.appendChild(document.createTextNode(r)),l=e,(document.head||document.getElementsByTagName("head")[0]).appendChild(l)}n++},remove:function(){--n||!e||(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Pk=function(){var n=Rk();return function(e,r){F.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&r])}},CT=function(){var n=Pk();return function(e){return n(e.styles,e.dynamic),null}},Ak={left:0,top:0,right:0,gap:0},TE=function(n){return parseInt(n||"",10)||0},Nk=function(n){var e=window.getComputedStyle(document.body),r=e[n==="padding"?"paddingLeft":"marginLeft"],a=e[n==="padding"?"paddingTop":"marginTop"],l=e[n==="padding"?"paddingRight":"marginRight"];return[TE(r),TE(a),TE(l)]},Ok=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Ak;var e=Nk(n),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,a-r+e[2]-e[0])}},Dk=CT(),I0="data-scroll-locked",Mk=function(n,e,r,a){var l=n.left,c=n.top,p=n.right,g=n.gap;return r===void 0&&(r="margin"),`
  .`.concat("with-scroll-bars-hidden",` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(g,"px ").concat(a,`;
  }
  body[`).concat(I0,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(g,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(g,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ub,` {
    right: `).concat(g,"px ").concat(a,`;
  }
  
  .`).concat($b,` {
    margin-right: `).concat(g,"px ").concat(a,`;
  }
  
  .`).concat(Ub," .").concat(Ub,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat($b," .").concat($b,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(I0,`] {
    `).concat("--removed-body-scroll-bar-size",": ").concat(g,`px;
  }
`)},kT=function(){var n=parseInt(document.body.getAttribute(I0)||"0",10);return isFinite(n)?n:0},Lk=function(){F.useEffect(function(){return document.body.setAttribute(I0,(kT()+1).toString()),function(){var n=kT()-1;n<=0?document.body.removeAttribute(I0):document.body.setAttribute(I0,n.toString())}},[])},jk=function(n){var e=n.noRelative,r=n.noImportant,a=n.gapMode,l=a===void 0?"margin":a;Lk();var c=F.useMemo(function(){return Ok(l)},[l]);return F.createElement(Dk,{styles:Mk(c,!e,l,r?"":"!important")})},xE=!1;if(typeof window<"u")try{var qb=Object.defineProperty({},"passive",{get:function(){return xE=!0,!0}});window.addEventListener("test",qb,qb),window.removeEventListener("test",qb,qb)}catch{xE=!1}var T0=!!xE&&{passive:!1},RT=function(n,e){if(!(n instanceof Element))return!1;var r=window.getComputedStyle(n);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&n.tagName!=="TEXTAREA"&&r[e]==="visible")},PT=function(n,e){var r=e.ownerDocument,a=e;do{if(typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host),AT(n,a)){var l=NT(n,a);if(l[1]>l[2])return!0}a=a.parentNode}while(a&&a!==r.body);return!1},AT=function(n,e){return n==="v"?RT(e,"overflowY"):RT(e,"overflowX")},NT=function(n,e){return n==="v"?[e.scrollTop,e.scrollHeight,e.clientHeight]:[e.scrollLeft,e.scrollWidth,e.clientWidth]},Fk=function(n,e,r,a,l){var c,p=(c=window.getComputedStyle(e).direction,n==="h"&&c==="rtl"?-1:1),g=p*a,b=r.target,D=e.contains(b),H=!1,te=g>0,ie=0,ye=0;do{var je=NT(n,b),Re=je[0],Ye=je[1]-je[2]-p*Re;(Re||Ye)&&AT(n,b)&&(ie+=Ye,ye+=Re),b instanceof ShadowRoot?b=b.host:b=b.parentNode}while(!D&&b!==document.body||D&&(e.contains(b)||e===b));return(te&&(l&&1>Math.abs(ie)||!l&&g>ie)||!te&&(l&&1>Math.abs(ye)||!l&&-g>ye))&&(H=!0),H},zb=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},OT=function(n){return[n.deltaX,n.deltaY]},DT=function(n){return n&&"current"in n?n.current:n},Vk=0,x0=[];let Uk=(S=function(n){var e=F.useRef([]),r=F.useRef([0,0]),a=F.useRef(),l=F.useState(Vk++)[0],c=F.useState(CT)[0],p=F.useRef(n);F.useEffect(function(){p.current=n},[n]),F.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(l));var Re=function(Ye,ht,Ze){if(Ze||arguments.length==2)for(var ke,Ie=0,Ae=ht.length;Ie<Ae;Ie++)!ke&&Ie in ht||(ke||(ke=Array.prototype.slice.call(ht,0,Ie)),ke[Ie]=ht[Ie]);return Ye.concat(ke||Array.prototype.slice.call(ht))}([n.lockRef.current],(n.shards||[]).map(DT),!0).filter(Boolean);return Re.forEach(function(Ye){return Ye.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),Re.forEach(function(Ye){return Ye.classList.remove("allow-interactivity-".concat(l))})}}},[n.inert,n.lockRef.current,n.shards]);var g=F.useCallback(function(Re,Ye){if("touches"in Re&&Re.touches.length===2||Re.type==="wheel"&&Re.ctrlKey)return!p.current.allowPinchZoom;var ht,Ze=zb(Re),ke=r.current,Ie="deltaX"in Re?Re.deltaX:ke[0]-Ze[0],Ae="deltaY"in Re?Re.deltaY:ke[1]-Ze[1],it=Re.target,ut=Math.abs(Ie)>Math.abs(Ae)?"h":"v";if("touches"in Re&&ut==="h"&&it.type==="range")return!1;var ft=PT(ut,it);if(!ft)return!0;if(ft?ht=ut:(ht=ut==="v"?"h":"v",ft=PT(ut,it)),!ft)return!1;if(!a.current&&"changedTouches"in Re&&(Ie||Ae)&&(a.current=ht),!ht)return!0;var nt=a.current||ht;return Fk(nt,Ye,Re,nt==="h"?Ie:Ae,!0)},[]),b=F.useCallback(function(Re){if(x0.length&&x0[x0.length-1]===c){var Ye="deltaY"in Re?OT(Re):zb(Re),ht=e.current.filter(function(ke){var Ie;return ke.name===Re.type&&(ke.target===Re.target||Re.target===ke.shadowParent)&&(Ie=ke.delta)[0]===Ye[0]&&Ie[1]===Ye[1]})[0];if(ht&&ht.should){Re.cancelable&&Re.preventDefault();return}if(!ht){var Ze=(p.current.shards||[]).map(DT).filter(Boolean).filter(function(ke){return ke.contains(Re.target)});(Ze.length>0?g(Re,Ze[0]):!p.current.noIsolation)&&Re.cancelable&&Re.preventDefault()}}},[]),D=F.useCallback(function(Re,Ye,ht,Ze){var ke={name:Re,delta:Ye,target:ht,should:Ze,shadowParent:function(Ie){for(var Ae=null;Ie!==null;)Ie instanceof ShadowRoot&&(Ae=Ie.host,Ie=Ie.host),Ie=Ie.parentNode;return Ae}(ht)};e.current.push(ke),setTimeout(function(){e.current=e.current.filter(function(Ie){return Ie!==ke})},1)},[]),H=F.useCallback(function(Re){r.current=zb(Re),a.current=void 0},[]),te=F.useCallback(function(Re){D(Re.type,OT(Re),Re.target,g(Re,n.lockRef.current))},[]),ie=F.useCallback(function(Re){D(Re.type,zb(Re),Re.target,g(Re,n.lockRef.current))},[]);F.useEffect(function(){return x0.push(c),n.setCallbacks({onScrollCapture:te,onWheelCapture:te,onTouchMoveCapture:ie}),document.addEventListener("wheel",b,T0),document.addEventListener("touchmove",b,T0),document.addEventListener("touchstart",H,T0),function(){x0=x0.filter(function(Re){return Re!==c}),document.removeEventListener("wheel",b,T0),document.removeEventListener("touchmove",b,T0),document.removeEventListener("touchstart",H,T0)}},[]);var ye=n.removeScrollBar,je=n.inert;return F.createElement(F.Fragment,null,je?F.createElement(c,{styles:`
  .block-interactivity-`.concat(l,` {pointer-events: none;}
  .allow-interactivity-`).concat(l,` {pointer-events: all;}
`)}):null,ye?F.createElement(jk,{gapMode:n.gapMode}):null)},TT.useMedium(S),xT);var CE=F.forwardRef(function(n,e){return F.createElement(Bb,ci({},n,{ref:e,sideCar:Uk}))});CE.classNames=Bb.classNames;var C0=new WeakMap,Gb=new WeakMap,Hb={},MT=0,LT=function(n){return n&&(n.host||LT(n.parentNode))},$k=function(n,e,r,a){var l=(Array.isArray(n)?n:[n]).map(function(te){if(e.contains(te))return te;var ie=LT(te);return ie&&e.contains(ie)?ie:(console.error("aria-hidden",te,"in not contained inside",e,". Doing nothing"),null)}).filter(function(te){return!!te});Hb[r]||(Hb[r]=new WeakMap);var c=Hb[r],p=[],g=new Set,b=new Set(l),D=function(te){!te||g.has(te)||(g.add(te),D(te.parentNode))};l.forEach(D);var H=function(te){!te||b.has(te)||Array.prototype.forEach.call(te.children,function(ie){if(g.has(ie))H(ie);else try{var ye=ie.getAttribute(a),je=ye!==null&&ye!=="false",Re=(C0.get(ie)||0)+1,Ye=(c.get(ie)||0)+1;C0.set(ie,Re),c.set(ie,Ye),p.push(ie),Re===1&&je&&Gb.set(ie,!0),Ye===1&&ie.setAttribute(r,"true"),je||ie.setAttribute(a,"true")}catch(ht){console.error("aria-hidden: cannot operate on ",ie,ht)}})};return H(e),g.clear(),MT++,function(){p.forEach(function(te){var ie=C0.get(te)-1,ye=c.get(te)-1;C0.set(te,ie),c.set(te,ye),ie||(Gb.has(te)||te.removeAttribute(a),Gb.delete(te)),ye||te.removeAttribute(r)}),--MT||(C0=new WeakMap,C0=new WeakMap,Gb=new WeakMap,Hb={})}},jT=function(n,e,r){r===void 0&&(r="data-aria-hidden");var a,l=Array.from(Array.isArray(n)?n:[n]),c=e||(a=n,typeof document>"u"?null:(Array.isArray(a)?a[0]:a).ownerDocument.body);return c?(l.push.apply(l,Array.from(c.querySelectorAll("[aria-live]"))),$k(l,c,r,"aria-hidden")):function(){return null}},kE="Dialog",[FT,yP]=(0,jb.b)(kE),[Bk,qf]=FT(kE),VT=n=>{let{__scopeDialog:e,children:r,open:a,defaultOpen:l,onOpenChange:c,modal:p=!0}=n,g=F.useRef(null),b=F.useRef(null),[D=!1,H]=(0,Fb.T)({prop:a,defaultProp:l,onChange:c});return(0,re.jsx)(Bk,{scope:e,triggerRef:g,contentRef:b,contentId:_0(),titleId:_0(),descriptionId:_0(),open:D,onOpenChange:H,onOpenToggle:F.useCallback(()=>H(te=>!te),[H]),modal:p,children:r})};VT.displayName=kE;var UT="DialogTrigger",$T=F.forwardRef((n,e)=>{let{__scopeDialog:r,...a}=n,l=qf(UT,r),c=(0,Tc.e)(e,l.triggerRef);return(0,re.jsx)(Tl.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":LE(l.open),...a,ref:c,onClick:(0,Ul.M)(n.onClick,l.onOpenToggle)})});$T.displayName=UT;var RE="DialogPortal",[qk,BT]=FT(RE,{forceMount:void 0}),qT=n=>{let{__scopeDialog:e,forceMount:r,children:a,container:l}=n,c=qf(RE,e);return(0,re.jsx)(qk,{scope:e,forceMount:r,children:F.Children.map(a,p=>(0,re.jsx)(SE.z,{present:r||c.open,children:(0,re.jsx)(ST.h,{asChild:!0,container:l,children:p})}))})};qT.displayName=RE;var Kb="DialogOverlay",PE=F.forwardRef((n,e)=>{let r=BT(Kb,n.__scopeDialog),{forceMount:a=r.forceMount,...l}=n,c=qf(Kb,n.__scopeDialog);return c.modal?(0,re.jsx)(SE.z,{present:a||c.open,children:(0,re.jsx)(zk,{...l,ref:e})}):null});PE.displayName=Kb;var zk=F.forwardRef((n,e)=>{let{__scopeDialog:r,...a}=n,l=qf(Kb,r);return(0,re.jsx)(CE,{as:Y0.g7,allowPinchZoom:!0,shards:[l.contentRef],children:(0,re.jsx)(Tl.WV.div,{"data-state":LE(l.open),...a,ref:e,style:{pointerEvents:"auto",...a.style}})})}),cv="DialogContent",AE=F.forwardRef((n,e)=>{let r=BT(cv,n.__scopeDialog),{forceMount:a=r.forceMount,...l}=n,c=qf(cv,n.__scopeDialog);return(0,re.jsx)(SE.z,{present:a||c.open,children:c.modal?(0,re.jsx)(Gk,{...l,ref:e}):(0,re.jsx)(Hk,{...l,ref:e})})});AE.displayName=cv;var Gk=F.forwardRef((n,e)=>{let r=qf(cv,n.__scopeDialog),a=F.useRef(null),l=(0,Tc.e)(e,r.contentRef,a);return F.useEffect(()=>{let c=a.current;if(c)return jT(c)},[]),(0,re.jsx)(zT,{...n,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,Ul.M)(n.onCloseAutoFocus,c=>{c.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:(0,Ul.M)(n.onPointerDownOutside,c=>{let p=c.detail.originalEvent,g=p.button===0&&p.ctrlKey===!0;(p.button===2||g)&&c.preventDefault()}),onFocusOutside:(0,Ul.M)(n.onFocusOutside,c=>c.preventDefault())})}),Hk=F.forwardRef((n,e)=>{let r=qf(cv,n.__scopeDialog),a=F.useRef(!1),l=F.useRef(!1);return(0,re.jsx)(zT,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{n.onCloseAutoFocus?.(c),c.defaultPrevented||(a.current||r.triggerRef.current?.focus(),c.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:c=>{n.onInteractOutside?.(c),c.defaultPrevented||(a.current=!0,c.detail.originalEvent.type!=="pointerdown"||(l.current=!0));let p=c.target;r.triggerRef.current?.contains(p)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.current&&c.preventDefault()}})}),zT=F.forwardRef((n,e)=>{let{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:c,...p}=n,g=qf(cv,r),b=F.useRef(null),D=(0,Tc.e)(e,b);return ET(),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(bE,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:c,children:(0,re.jsx)(mT.XB,{role:"dialog",id:g.contentId,"aria-describedby":g.descriptionId,"aria-labelledby":g.titleId,"data-state":LE(g.open),...p,ref:D,onDismiss:()=>g.onOpenChange(!1)})}),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Kk,{titleId:g.titleId}),(0,re.jsx)(Wk,{contentRef:b,descriptionId:g.descriptionId})]})]})}),NE="DialogTitle",OE=F.forwardRef((n,e)=>{let{__scopeDialog:r,...a}=n,l=qf(NE,r);return(0,re.jsx)(Tl.WV.h2,{id:l.titleId,...a,ref:e})});OE.displayName=NE;var GT="DialogDescription",DE=F.forwardRef((n,e)=>{let{__scopeDialog:r,...a}=n,l=qf(GT,r);return(0,re.jsx)(Tl.WV.p,{id:l.descriptionId,...a,ref:e})});DE.displayName=GT;var HT="DialogClose",ME=F.forwardRef((n,e)=>{let{__scopeDialog:r,...a}=n,l=qf(HT,r);return(0,re.jsx)(Tl.WV.button,{type:"button",...a,ref:e,onClick:(0,Ul.M)(n.onClick,()=>l.onOpenChange(!1))})});function LE(n){return n?"open":"closed"}ME.displayName=HT;var KT="DialogTitleWarning",[vP,WT]=(0,jb.k)(KT,{contentName:cv,titleName:NE,docsSlug:"dialog"}),Kk=({titleId:n})=>{let e=WT(KT),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return F.useEffect(()=>{n&&!document.getElementById(n)&&console.error(r)},[r,n]),null},Wk=({contentRef:n,descriptionId:e})=>{let r=WT("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return F.useEffect(()=>{let l=n.current?.getAttribute("aria-describedby");e&&l&&!document.getElementById(e)&&console.warn(a)},[a,n,e]),null},Jk=M(5506);let JT=F.forwardRef(({className:n,...e},r)=>(0,re.jsx)(PE,{ref:r,className:(0,sl.cn)("fixed inset-0 z-50 bg-overlay data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));JT.displayName=PE.displayName;let QT=F.forwardRef(({className:n,children:e,...r},a)=>(0,re.jsxs)(qT,{children:[(0,re.jsx)(JT,{}),(0,re.jsxs)(AE,{ref:a,className:(0,sl.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 rounded-base border-2 border-border bg-white p-6 shadow-light duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] dark:border-darkBorder dark:bg-darkBg dark:shadow-dark",n),...r,children:[e,(0,re.jsxs)(ME,{className:"absolute right-4 top-4 rounded-sm opacity-100 ring-offset-white focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-white data-[state=open]:text-white",children:[(0,re.jsx)(Jk.Z,{className:"h-4 w-4"}),(0,re.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));QT.displayName=AE.displayName;let YT=({className:n,...e})=>(0,re.jsx)("div",{className:(0,sl.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});YT.displayName="DialogHeader";let XT=({className:n,...e})=>(0,re.jsx)("div",{className:(0,sl.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});XT.displayName="DialogFooter";let ZT=F.forwardRef(({className:n,...e},r)=>(0,re.jsx)(OE,{ref:r,className:(0,sl.cn)("text-lg font-heading leading-none tracking-tight",n),...e}));ZT.displayName=OE.displayName;let ex=F.forwardRef(({className:n,...e},r)=>(0,re.jsx)(DE,{ref:r,className:(0,sl.cn)("text-sm font-base text-text dark:text-darkText",n),...e}));ex.displayName=DE.displayName;var jE=F.forwardRef((n,e)=>(0,re.jsx)(Tl.WV.label,{...n,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(n.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));jE.displayName="Label";let Qk=(0,Mg.j)("text-sm font-heading leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Wb=F.forwardRef(({className:n,...e},r)=>(0,re.jsx)(jE,{ref:r,className:(0,sl.cn)(Qk(),n),...e}));function tx(n){let e=F.useRef({value:n,previous:n});return F.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function rx(n){let[e,r]=F.useState(void 0);return(0,tf.b)(()=>{if(n){r({width:n.offsetWidth,height:n.offsetHeight});let a=new ResizeObserver(l=>{let c,p;if(!Array.isArray(l)||!l.length)return;let g=l[0];if("borderBoxSize"in g){let b=g.borderBoxSize,D=Array.isArray(b)?b[0]:b;c=D.inlineSize,p=D.blockSize}else c=n.offsetWidth,p=n.offsetHeight;r({width:c,height:p})});return a.observe(n,{box:"border-box"}),()=>a.unobserve(n)}r(void 0)},[n]),e}Wb.displayName=jE.displayName;var FE="Switch",[Yk,wP]=(0,jb.b)(FE),[Xk,Zk]=Yk(FE),VE=F.forwardRef((n,e)=>{let{__scopeSwitch:r,name:a,checked:l,defaultChecked:c,required:p,disabled:g,value:b="on",onCheckedChange:D,form:H,...te}=n,[ie,ye]=F.useState(null),je=(0,Tc.e)(e,ke=>ye(ke)),Re=F.useRef(!1),Ye=!ie||H||!!ie.closest("form"),[ht=!1,Ze]=(0,Fb.T)({prop:l,defaultProp:c,onChange:D});return(0,re.jsxs)(Xk,{scope:r,checked:ht,disabled:g,children:[(0,re.jsx)(Tl.WV.button,{type:"button",role:"switch","aria-checked":ht,"aria-required":p,"data-state":sx(ht),"data-disabled":g?"":void 0,disabled:g,value:b,...te,ref:je,onClick:(0,Ul.M)(n.onClick,ke=>{Ze(Ie=>!Ie),Ye&&(Re.current=ke.isPropagationStopped(),Re.current||ke.stopPropagation())})}),Ye&&(0,re.jsx)(eR,{control:ie,bubbles:!Re.current,name:a,value:b,checked:ht,required:p,disabled:g,form:H,style:{transform:"translateX(-100%)"}})]})});VE.displayName=FE;var nx="SwitchThumb",ix=F.forwardRef((n,e)=>{let{__scopeSwitch:r,...a}=n,l=Zk(nx,r);return(0,re.jsx)(Tl.WV.span,{"data-state":sx(l.checked),"data-disabled":l.disabled?"":void 0,...a,ref:e})});ix.displayName=nx;var eR=n=>{let{control:e,checked:r,bubbles:a=!0,...l}=n,c=F.useRef(null),p=tx(r),g=rx(e);return F.useEffect(()=>{let b=c.current,D=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==r&&D){let H=new Event("click",{bubbles:a});D.call(b,r),b.dispatchEvent(H)}},[p,r,a]),(0,re.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:c,style:{...n.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function sx(n){return n?"checked":"unchecked"}let UE=F.forwardRef(({className:n,...e},r)=>(0,re.jsx)(VE,{className:(0,sl.cn)("peer inline-flex h-6 w-12 shrink-0 cursor-pointer items-center rounded-full border-2 border-border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-main data-[state=unchecked]:bg-white dark:border-darkBorder dark:data-[state=unchecked]:bg-secondaryBlack",n),...e,ref:r,children:(0,re.jsx)(ix,{className:(0,sl.cn)("pointer-events-none block h-4 w-4 rounded-full border-2 border-border bg-white ring-0 transition-transform data-[state=checked]:translate-x-6 data-[state=unchecked]:translate-x-1 dark:border-darkBorder")})}));UE.displayName=VE.displayName;var $E=M(8066);function ax(n,[e,r]){return Math.min(r,Math.max(e,n))}var tR=M(3179),rR=F.createContext(void 0);let nR=["top","right","bottom","left"],Ap=Math.min,mh=Math.max,Jb=Math.round,Qb=Math.floor,Np=n=>({x:n,y:n}),iR={left:"right",right:"left",bottom:"top",top:"bottom"},sR={start:"end",end:"start"};function Um(n,e){return typeof n=="function"?n(e):n}function $m(n){return n.split("-")[0]}function k0(n){return n.split("-")[1]}function Cw(n){return n==="x"?"y":"x"}function BE(n){return n==="y"?"height":"width"}function Op(n){return["top","bottom"].includes($m(n))?"y":"x"}function qE(n){return n.replace(/start|end/g,e=>sR[e])}function Yb(n){return n.replace(/left|right|bottom|top/g,e=>iR[e])}function ox(n){return typeof n!="number"?{top:0,right:0,bottom:0,left:0,...n}:{top:n,right:n,bottom:n,left:n}}function Xb(n){let{x:e,y:r,width:a,height:l}=n;return{width:a,height:l,top:r,left:e,right:e+a,bottom:r+l,x:e,y:r}}function lx(n,e,r){let a,{reference:l,floating:c}=n,p=Op(e),g=Cw(Op(e)),b=BE(g),D=$m(e),H=p==="y",te=l.x+l.width/2-c.width/2,ie=l.y+l.height/2-c.height/2,ye=l[b]/2-c[b]/2;switch(D){case"top":a={x:te,y:l.y-c.height};break;case"bottom":a={x:te,y:l.y+l.height};break;case"right":a={x:l.x+l.width,y:ie};break;case"left":a={x:l.x-c.width,y:ie};break;default:a={x:l.x,y:l.y}}switch(k0(e)){case"start":a[g]-=ye*(r&&H?-1:1);break;case"end":a[g]+=ye*(r&&H?-1:1)}return a}let aR=async(n,e,r)=>{let{placement:a="bottom",strategy:l="absolute",middleware:c=[],platform:p}=r,g=c.filter(Boolean),b=await(p.isRTL==null?void 0:p.isRTL(e)),D=await p.getElementRects({reference:n,floating:e,strategy:l}),{x:H,y:te}=lx(D,a,b),ie=a,ye={},je=0;for(let Re=0;Re<g.length;Re++){let{name:Ye,fn:ht}=g[Re],{x:Ze,y:ke,data:Ie,reset:Ae}=await ht({x:H,y:te,initialPlacement:a,placement:ie,strategy:l,middlewareData:ye,rects:D,platform:p,elements:{reference:n,floating:e}});H=Ze??H,te=ke??te,ye={...ye,[Ye]:{...ye[Ye],...Ie}},Ae&&je<=50&&(je++,typeof Ae=="object"&&(Ae.placement&&(ie=Ae.placement),Ae.rects&&(D=Ae.rects===!0?await p.getElementRects({reference:n,floating:e,strategy:l}):Ae.rects),{x:H,y:te}=lx(D,ie,b)),Re=-1)}return{x:H,y:te,placement:ie,strategy:l,middlewareData:ye}};async function kw(n,e){var r;e===void 0&&(e={});let{x:a,y:l,platform:c,rects:p,elements:g,strategy:b}=n,{boundary:D="clippingAncestors",rootBoundary:H="viewport",elementContext:te="floating",altBoundary:ie=!1,padding:ye=0}=Um(e,n),je=ox(ye),Re=g[ie?te==="floating"?"reference":"floating":te],Ye=Xb(await c.getClippingRect({element:(r=await(c.isElement==null?void 0:c.isElement(Re)))==null||r?Re:Re.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(g.floating)),boundary:D,rootBoundary:H,strategy:b})),ht=te==="floating"?{x:a,y:l,width:p.floating.width,height:p.floating.height}:p.reference,Ze=await(c.getOffsetParent==null?void 0:c.getOffsetParent(g.floating)),ke=await(c.isElement==null?void 0:c.isElement(Ze))&&await(c.getScale==null?void 0:c.getScale(Ze))||{x:1,y:1},Ie=Xb(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:g,rect:ht,offsetParent:Ze,strategy:b}):ht);return{top:(Ye.top-Ie.top+je.top)/ke.y,bottom:(Ie.bottom-Ye.bottom+je.bottom)/ke.y,left:(Ye.left-Ie.left+je.left)/ke.x,right:(Ie.right-Ye.right+je.right)/ke.x}}function ux(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function cx(n){return nR.some(e=>n[e]>=0)}async function oR(n,e){let{placement:r,platform:a,elements:l}=n,c=await(a.isRTL==null?void 0:a.isRTL(l.floating)),p=$m(r),g=k0(r),b=Op(r)==="y",D=["left","top"].includes(p)?-1:1,H=c&&b?-1:1,te=Um(e,n),{mainAxis:ie,crossAxis:ye,alignmentAxis:je}=typeof te=="number"?{mainAxis:te,crossAxis:0,alignmentAxis:null}:{mainAxis:te.mainAxis||0,crossAxis:te.crossAxis||0,alignmentAxis:te.alignmentAxis};return g&&typeof je=="number"&&(ye=g==="end"?-1*je:je),b?{x:ye*H,y:ie*D}:{x:ie*D,y:ye*H}}function Zb(){return typeof window<"u"}function R0(n){return hx(n)?(n.nodeName||"").toLowerCase():"#document"}function dd(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Dp(n){var e;return(e=(hx(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function hx(n){return!!Zb()&&(n instanceof Node||n instanceof dd(n).Node)}function zf(n){return!!Zb()&&(n instanceof Element||n instanceof dd(n).Element)}function Mp(n){return!!Zb()&&(n instanceof HTMLElement||n instanceof dd(n).HTMLElement)}function dx(n){return!!Zb()&&typeof ShadowRoot<"u"&&(n instanceof ShadowRoot||n instanceof dd(n).ShadowRoot)}function Rw(n){let{overflow:e,overflowX:r,overflowY:a,display:l}=Gf(n);return/auto|scroll|overlay|hidden|clip/.test(e+a+r)&&!["inline","contents"].includes(l)}function eS(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function zE(n){let e=GE(),r=zf(n)?Gf(n):n;return r.transform!=="none"||r.perspective!=="none"||!!r.containerType&&r.containerType!=="normal"||!e&&!!r.backdropFilter&&r.backdropFilter!=="none"||!e&&!!r.filter&&r.filter!=="none"||["transform","perspective","filter"].some(a=>(r.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(r.contain||"").includes(a))}function GE(){return typeof CSS<"u"&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function P0(n){return["html","body","#document"].includes(R0(n))}function Gf(n){return dd(n).getComputedStyle(n)}function tS(n){return zf(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Zg(n){if(R0(n)==="html")return n;let e=n.assignedSlot||n.parentNode||dx(n)&&n.host||Dp(n);return dx(e)?e.host:e}function Pw(n,e,r){var a;e===void 0&&(e=[]),r===void 0&&(r=!0);let l=function g(b){let D=Zg(b);return P0(D)?b.ownerDocument?b.ownerDocument.body:b.body:Mp(D)&&Rw(D)?D:g(D)}(n),c=l===((a=n.ownerDocument)==null?void 0:a.body),p=dd(l);if(c){let g=HE(p);return e.concat(p,p.visualViewport||[],Rw(l)?l:[],g&&r?Pw(g):[])}return e.concat(l,Pw(l,[],r))}function HE(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function fx(n){let e=Gf(n),r=parseFloat(e.width)||0,a=parseFloat(e.height)||0,l=Mp(n),c=l?n.offsetWidth:r,p=l?n.offsetHeight:a,g=Jb(r)!==c||Jb(a)!==p;return g&&(r=c,a=p),{width:r,height:a,$:g}}function KE(n){return zf(n)?n:n.contextElement}function A0(n){let e=KE(n);if(!Mp(e))return Np(1);let r=e.getBoundingClientRect(),{width:a,height:l,$:c}=fx(e),p=(c?Jb(r.width):r.width)/a,g=(c?Jb(r.height):r.height)/l;return p&&Number.isFinite(p)||(p=1),g&&Number.isFinite(g)||(g=1),{x:p,y:g}}let lR=Np(0);function px(n){let e=dd(n);return GE()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:lR}function hv(n,e,r,a){var l;e===void 0&&(e=!1),r===void 0&&(r=!1);let c=n.getBoundingClientRect(),p=KE(n),g=Np(1);e&&(a?zf(a)&&(g=A0(a)):g=A0(n));let b=((l=r)===void 0&&(l=!1),a&&(!l||a===dd(p))&&l?px(p):Np(0)),D=(c.left+b.x)/g.x,H=(c.top+b.y)/g.y,te=c.width/g.x,ie=c.height/g.y;if(p){let ye=dd(p),je=a&&zf(a)?dd(a):a,Re=ye,Ye=HE(Re);for(;Ye&&a&&je!==Re;){let ht=A0(Ye),Ze=Ye.getBoundingClientRect(),ke=Gf(Ye),Ie=Ze.left+(Ye.clientLeft+parseFloat(ke.paddingLeft))*ht.x,Ae=Ze.top+(Ye.clientTop+parseFloat(ke.paddingTop))*ht.y;D*=ht.x,H*=ht.y,te*=ht.x,ie*=ht.y,D+=Ie,H+=Ae,Ye=HE(Re=dd(Ye))}}return Xb({width:te,height:ie,x:D,y:H})}function WE(n,e){let r=tS(n).scrollLeft;return e?e.left+r:hv(Dp(n)).left+r}function mx(n,e,r){r===void 0&&(r=!1);let a=n.getBoundingClientRect();return{x:a.left+e.scrollLeft-(r?0:WE(n,a)),y:a.top+e.scrollTop}}function gx(n,e,r){let a;if(e==="viewport")a=function(l,c){let p=dd(l),g=Dp(l),b=p.visualViewport,D=g.clientWidth,H=g.clientHeight,te=0,ie=0;if(b){D=b.width,H=b.height;let ye=GE();(!ye||ye&&c==="fixed")&&(te=b.offsetLeft,ie=b.offsetTop)}return{width:D,height:H,x:te,y:ie}}(n,r);else if(e==="document")a=function(l){let c=Dp(l),p=tS(l),g=l.ownerDocument.body,b=mh(c.scrollWidth,c.clientWidth,g.scrollWidth,g.clientWidth),D=mh(c.scrollHeight,c.clientHeight,g.scrollHeight,g.clientHeight),H=-p.scrollLeft+WE(l),te=-p.scrollTop;return Gf(g).direction==="rtl"&&(H+=mh(c.clientWidth,g.clientWidth)-b),{width:b,height:D,x:H,y:te}}(Dp(n));else if(zf(e))a=function(l,c){let p=hv(l,!0,c==="fixed"),g=p.top+l.clientTop,b=p.left+l.clientLeft,D=Mp(l)?A0(l):Np(1);return{width:l.clientWidth*D.x,height:l.clientHeight*D.y,x:b*D.x,y:g*D.y}}(e,r);else{let l=px(n);a={x:e.x-l.x,y:e.y-l.y,width:e.width,height:e.height}}return Xb(a)}function JE(n){return Gf(n).position==="static"}function yx(n,e){if(!Mp(n)||Gf(n).position==="fixed")return null;if(e)return e(n);let r=n.offsetParent;return Dp(n)===r&&(r=r.ownerDocument.body),r}function vx(n,e){let r=dd(n);if(eS(n))return r;if(!Mp(n)){let l=Zg(n);for(;l&&!P0(l);){if(zf(l)&&!JE(l))return l;l=Zg(l)}return r}let a=yx(n,e);for(;a&&["table","td","th"].includes(R0(a))&&JE(a);)a=yx(a,e);return a&&P0(a)&&JE(a)&&!zE(a)?r:a||function(l){let c=Zg(l);for(;Mp(c)&&!P0(c);){if(zE(c))return c;if(eS(c))break;c=Zg(c)}return null}(n)||r}let uR=async function(n){let e=this.getOffsetParent||vx,r=this.getDimensions,a=await r(n.floating);return{reference:function(l,c,p){let g=Mp(c),b=Dp(c),D=p==="fixed",H=hv(l,!0,D,c),te={scrollLeft:0,scrollTop:0},ie=Np(0);if(g||!g&&!D)if((R0(c)!=="body"||Rw(b))&&(te=tS(c)),g){let je=hv(c,!0,D,c);ie.x=je.x+c.clientLeft,ie.y=je.y+c.clientTop}else b&&(ie.x=WE(b));let ye=!b||g||D?Np(0):mx(b,te);return{x:H.left+te.scrollLeft-ie.x-ye.x,y:H.top+te.scrollTop-ie.y-ye.y,width:H.width,height:H.height}}(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},cR={convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{elements:e,rect:r,offsetParent:a,strategy:l}=n,c=l==="fixed",p=Dp(a),g=!!e&&eS(e.floating);if(a===p||g&&c)return r;let b={scrollLeft:0,scrollTop:0},D=Np(1),H=Np(0),te=Mp(a);if((te||!te&&!c)&&((R0(a)!=="body"||Rw(p))&&(b=tS(a)),Mp(a))){let ye=hv(a);D=A0(a),H.x=ye.x+a.clientLeft,H.y=ye.y+a.clientTop}let ie=!p||te||c?Np(0):mx(p,b,!0);return{width:r.width*D.x,height:r.height*D.y,x:r.x*D.x-b.scrollLeft*D.x+H.x+ie.x,y:r.y*D.y-b.scrollTop*D.y+H.y+ie.y}},getDocumentElement:Dp,getClippingRect:function(n){let{element:e,boundary:r,rootBoundary:a,strategy:l}=n,c=[...r==="clippingAncestors"?eS(e)?[]:function(b,D){let H=D.get(b);if(H)return H;let te=Pw(b,[],!1).filter(Re=>zf(Re)&&R0(Re)!=="body"),ie=null,ye=Gf(b).position==="fixed",je=ye?Zg(b):b;for(;zf(je)&&!P0(je);){let Re=Gf(je),Ye=zE(je);Ye||Re.position!=="fixed"||(ie=null),(ye?!Ye&&!ie:!Ye&&Re.position==="static"&&!!ie&&["absolute","fixed"].includes(ie.position)||Rw(je)&&!Ye&&function ht(Ze,ke){let Ie=Zg(Ze);return!(Ie===ke||!zf(Ie)||P0(Ie))&&(Gf(Ie).position==="fixed"||ht(Ie,ke))}(b,je))?te=te.filter(ht=>ht!==je):ie=Re,je=Zg(je)}return D.set(b,te),te}(e,this._c):[].concat(r),a],p=c[0],g=c.reduce((b,D)=>{let H=gx(e,D,l);return b.top=mh(H.top,b.top),b.right=Ap(H.right,b.right),b.bottom=Ap(H.bottom,b.bottom),b.left=mh(H.left,b.left),b},gx(e,p,l));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}},getOffsetParent:vx,getElementRects:uR,getClientRects:function(n){return Array.from(n.getClientRects())},getDimensions:function(n){let{width:e,height:r}=fx(n);return{width:e,height:r}},getScale:A0,isElement:zf,isRTL:function(n){return Gf(n).direction==="rtl"}},wx=n=>({name:"arrow",options:n,async fn(e){let{x:r,y:a,placement:l,rects:c,platform:p,elements:g,middlewareData:b}=e,{element:D,padding:H=0}=Um(n,e)||{};if(D==null)return{};let te=ox(H),ie={x:r,y:a},ye=Cw(Op(l)),je=BE(ye),Re=await p.getDimensions(D),Ye=ye==="y",ht=Ye?"clientHeight":"clientWidth",Ze=c.reference[je]+c.reference[ye]-ie[ye]-c.floating[je],ke=ie[ye]-c.reference[ye],Ie=await(p.getOffsetParent==null?void 0:p.getOffsetParent(D)),Ae=Ie?Ie[ht]:0;Ae&&await(p.isElement==null?void 0:p.isElement(Ie))||(Ae=g.floating[ht]||c.floating[je]);let it=Ae/2-Re[je]/2-1,ut=Ap(te[Ye?"top":"left"],it),ft=Ap(te[Ye?"bottom":"right"],it),nt=Ae-Re[je]-ft,un=Ae/2-Re[je]/2+(Ze/2-ke/2),is=mh(ut,Ap(un,nt)),Oi=!b.arrow&&k0(l)!=null&&un!==is&&c.reference[je]/2-(un<ut?ut:ft)-Re[je]/2<0,Ii=Oi?un<ut?un-ut:un-nt:0;return{[ye]:ie[ye]+Ii,data:{[ye]:is,centerOffset:un-is-Ii,...Oi&&{alignmentOffset:Ii}},reset:Oi}}}),hR=(n,e,r)=>{let a=new Map,l={platform:cR,...r},c={...l.platform,_c:a};return aR(n,e,{...l,platform:c})};var rS=typeof document<"u"?F.useLayoutEffect:F.useEffect;function nS(n,e){let r,a,l;if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if((r=n.length)!==e.length)return!1;for(a=r;a--!=0;)if(!nS(n[a],e[a]))return!1;return!0}if((r=(l=Object.keys(n)).length)!==Object.keys(e).length)return!1;for(a=r;a--!=0;)if(!{}.hasOwnProperty.call(e,l[a]))return!1;for(a=r;a--!=0;){let c=l[a];if((c!=="_owner"||!n.$$typeof)&&!nS(n[c],e[c]))return!1}return!0}return n!=n&&e!=e}function bx(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Sx(n,e){let r=bx(n);return Math.round(e*r)/r}function QE(n){let e=F.useRef(n);return rS(()=>{e.current=n}),e}let dR=n=>({name:"arrow",options:n,fn(e){let{element:r,padding:a}=typeof n=="function"?n(e):n;return r&&{}.hasOwnProperty.call(r,"current")?r.current!=null?wx({element:r.current,padding:a}).fn(e):{}:r?wx({element:r,padding:a}).fn(e):{}}}),fR=(n,e)=>({...function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(a){var l,c;let{x:p,y:g,placement:b,middlewareData:D}=a,H=await oR(a,r);return b===((l=D.offset)==null?void 0:l.placement)&&(c=D.arrow)!=null&&c.alignmentOffset?{}:{x:p+H.x,y:g+H.y,data:{...H,placement:b}}}}}(n),options:[n,e]}),pR=(n,e)=>({...function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(a){let{x:l,y:c,placement:p}=a,{mainAxis:g=!0,crossAxis:b=!1,limiter:D={fn:Ze=>{let{x:ke,y:Ie}=Ze;return{x:ke,y:Ie}}},...H}=Um(r,a),te={x:l,y:c},ie=await kw(a,H),ye=Op($m(p)),je=Cw(ye),Re=te[je],Ye=te[ye];if(g){let Ze=je==="y"?"top":"left",ke=je==="y"?"bottom":"right",Ie=Re+ie[Ze],Ae=Re-ie[ke];Re=mh(Ie,Ap(Re,Ae))}if(b){let Ze=ye==="y"?"top":"left",ke=ye==="y"?"bottom":"right",Ie=Ye+ie[Ze],Ae=Ye-ie[ke];Ye=mh(Ie,Ap(Ye,Ae))}let ht=D.fn({...a,[je]:Re,[ye]:Ye});return{...ht,data:{x:ht.x-l,y:ht.y-c,enabled:{[je]:g,[ye]:b}}}}}}(n),options:[n,e]}),mR=(n,e)=>({...function(r){return r===void 0&&(r={}),{options:r,fn(a){let{x:l,y:c,placement:p,rects:g,middlewareData:b}=a,{offset:D=0,mainAxis:H=!0,crossAxis:te=!0}=Um(r,a),ie={x:l,y:c},ye=Op(p),je=Cw(ye),Re=ie[je],Ye=ie[ye],ht=Um(D,a),Ze=typeof ht=="number"?{mainAxis:ht,crossAxis:0}:{mainAxis:0,crossAxis:0,...ht};if(H){let Ae=je==="y"?"height":"width",it=g.reference[je]-g.floating[Ae]+Ze.mainAxis,ut=g.reference[je]+g.reference[Ae]-Ze.mainAxis;Re<it?Re=it:Re>ut&&(Re=ut)}if(te){var ke,Ie;let Ae=je==="y"?"width":"height",it=["top","left"].includes($m(p)),ut=g.reference[ye]-g.floating[Ae]+(it&&((ke=b.offset)==null?void 0:ke[ye])||0)+(it?0:Ze.crossAxis),ft=g.reference[ye]+g.reference[Ae]+(it?0:((Ie=b.offset)==null?void 0:Ie[ye])||0)-(it?Ze.crossAxis:0);Ye<ut?Ye=ut:Ye>ft&&(Ye=ft)}return{[je]:Re,[ye]:Ye}}}}(n),options:[n,e]}),gR=(n,e)=>({...function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(a){var l,c,p,g,b;let{placement:D,middlewareData:H,rects:te,initialPlacement:ie,platform:ye,elements:je}=a,{mainAxis:Re=!0,crossAxis:Ye=!0,fallbackPlacements:ht,fallbackStrategy:Ze="bestFit",fallbackAxisSideDirection:ke="none",flipAlignment:Ie=!0,...Ae}=Um(r,a);if((l=H.arrow)!=null&&l.alignmentOffset)return{};let it=$m(D),ut=Op(ie),ft=$m(ie)===ie,nt=await(ye.isRTL==null?void 0:ye.isRTL(je.floating)),un=ht||(ft||!Ie?[Yb(ie)]:function(ai){let Ni=Yb(ai);return[qE(ai),Ni,qE(Ni)]}(ie)),is=ke!=="none";!ht&&is&&un.push(...function(ai,Ni,ei,Vs){let fa=k0(ai),uo=function(Xo,Wo,xc){let gl=["left","right"],To=["right","left"];switch(Xo){case"top":case"bottom":return xc?Wo?To:gl:Wo?gl:To;case"left":case"right":return Wo?["top","bottom"]:["bottom","top"];default:return[]}}($m(ai),ei==="start",Vs);return fa&&(uo=uo.map(Xo=>Xo+"-"+fa),Ni&&(uo=uo.concat(uo.map(qE)))),uo}(ie,Ie,ke,nt));let Oi=[ie,...un],Ii=await kw(a,Ae),ps=[],vs=((c=H.flip)==null?void 0:c.overflows)||[];if(Re&&ps.push(Ii[it]),Ye){let ai=function(Ni,ei,Vs){Vs===void 0&&(Vs=!1);let fa=k0(Ni),uo=Cw(Op(Ni)),Xo=BE(uo),Wo=uo==="x"?fa===(Vs?"end":"start")?"right":"left":fa==="start"?"bottom":"top";return ei.reference[Xo]>ei.floating[Xo]&&(Wo=Yb(Wo)),[Wo,Yb(Wo)]}(D,te,nt);ps.push(Ii[ai[0]],Ii[ai[1]])}if(vs=[...vs,{placement:D,overflows:ps}],!ps.every(ai=>ai<=0)){let ai=(((p=H.flip)==null?void 0:p.index)||0)+1,Ni=Oi[ai];if(Ni)return{data:{index:ai,overflows:vs},reset:{placement:Ni}};let ei=(g=vs.filter(Vs=>Vs.overflows[0]<=0).sort((Vs,fa)=>Vs.overflows[1]-fa.overflows[1])[0])==null?void 0:g.placement;if(!ei)switch(Ze){case"bestFit":{let Vs=(b=vs.filter(fa=>{if(is){let uo=Op(fa.placement);return uo===ut||uo==="y"}return!0}).map(fa=>[fa.placement,fa.overflows.filter(uo=>uo>0).reduce((uo,Xo)=>uo+Xo,0)]).sort((fa,uo)=>fa[1]-uo[1])[0])==null?void 0:b[0];Vs&&(ei=Vs);break}case"initialPlacement":ei=ie}if(D!==ei)return{reset:{placement:ei}}}return{}}}}(n),options:[n,e]}),yR=(n,e)=>({...function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(a){var l,c;let p,g,{placement:b,rects:D,platform:H,elements:te}=a,{apply:ie=()=>{},...ye}=Um(r,a),je=await kw(a,ye),Re=$m(b),Ye=k0(b),ht=Op(b)==="y",{width:Ze,height:ke}=D.floating;Re==="top"||Re==="bottom"?(p=Re,g=Ye===(await(H.isRTL==null?void 0:H.isRTL(te.floating))?"start":"end")?"left":"right"):(g=Re,p=Ye==="end"?"top":"bottom");let Ie=ke-je.top-je.bottom,Ae=Ze-je.left-je.right,it=Ap(ke-je[p],Ie),ut=Ap(Ze-je[g],Ae),ft=!a.middlewareData.shift,nt=it,un=ut;if((l=a.middlewareData.shift)!=null&&l.enabled.x&&(un=Ae),(c=a.middlewareData.shift)!=null&&c.enabled.y&&(nt=Ie),ft&&!Ye){let Oi=mh(je.left,0),Ii=mh(je.right,0),ps=mh(je.top,0),vs=mh(je.bottom,0);ht?un=Ze-2*(Oi!==0||Ii!==0?Oi+Ii:mh(je.left,je.right)):nt=ke-2*(ps!==0||vs!==0?ps+vs:mh(je.top,je.bottom))}await ie({...a,availableWidth:un,availableHeight:nt});let is=await H.getDimensions(te.floating);return Ze!==is.width||ke!==is.height?{reset:{rects:!0}}:{}}}}(n),options:[n,e]}),vR=(n,e)=>({...function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(a){let{rects:l}=a,{strategy:c="referenceHidden",...p}=Um(r,a);switch(c){case"referenceHidden":{let g=ux(await kw(a,{...p,elementContext:"reference"}),l.reference);return{data:{referenceHiddenOffsets:g,referenceHidden:cx(g)}}}case"escaped":{let g=ux(await kw(a,{...p,altBoundary:!0}),l.floating);return{data:{escapedOffsets:g,escaped:cx(g)}}}default:return{}}}}}(n),options:[n,e]}),wR=(n,e)=>({...dR(n),options:[n,e]});var Ex=F.forwardRef((n,e)=>{let{children:r,width:a=10,height:l=5,...c}=n;return(0,re.jsx)(Tl.WV.svg,{...c,ref:e,width:a,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?r:(0,re.jsx)("polygon",{points:"0,0 30,0 15,10"})})});Ex.displayName="Arrow";var YE="Popper",[_x,Ix]=function(n,e=[]){let r=[],a=()=>{let l=r.map(c=>F.createContext(c));return function(c){let p=c?.[n]||l;return F.useMemo(()=>({[`__scope${n}`]:{...c,[n]:p}}),[c,p])}};return a.scopeName=n,[function(l,c){let p=F.createContext(c),g=r.length;function b(D){let{scope:H,children:te,...ie}=D,ye=H?.[n][g]||p,je=F.useMemo(()=>ie,Object.values(ie));return(0,re.jsx)(ye.Provider,{value:je,children:te})}return r=[...r,c],b.displayName=l+"Provider",[b,function(D,H){let te=H?.[n][g]||p,ie=F.useContext(te);if(ie)return ie;if(c!==void 0)return c;throw Error(`\`${D}\` must be used within \`${l}\``)}]},function(...l){let c=l[0];if(l.length===1)return c;let p=()=>{let g=l.map(b=>({useScope:b(),scopeName:b.scopeName}));return function(b){let D=g.reduce((H,{useScope:te,scopeName:ie})=>{let ye=te(b)[`__scope${ie}`];return{...H,...ye}},{});return F.useMemo(()=>({[`__scope${c.scopeName}`]:D}),[D])}};return p.scopeName=c.scopeName,p}(a,...e)]}(YE),[bR,Tx]=_x(YE),xx=n=>{let{__scopePopper:e,children:r}=n,[a,l]=F.useState(null);return(0,re.jsx)(bR,{scope:e,anchor:a,onAnchorChange:l,children:r})};xx.displayName=YE;var Cx="PopperAnchor",kx=F.forwardRef((n,e)=>{let{__scopePopper:r,virtualRef:a,...l}=n,c=Tx(Cx,r),p=F.useRef(null),g=(0,Tc.e)(e,p);return F.useEffect(()=>{c.onAnchorChange(a?.current||p.current)}),a?null:(0,re.jsx)(Tl.WV.div,{...l,ref:g})});kx.displayName=Cx;var XE="PopperContent",[SR,ER]=_x(XE),Rx=F.forwardRef((n,e)=>{let{__scopePopper:r,side:a="bottom",sideOffset:l=0,align:c="center",alignOffset:p=0,arrowPadding:g=0,avoidCollisions:b=!0,collisionBoundary:D=[],collisionPadding:H=0,sticky:te="partial",hideWhenDetached:ie=!1,updatePositionStrategy:ye="optimized",onPlaced:je,...Re}=n,Ye=Tx(XE,r),[ht,Ze]=F.useState(null),ke=(0,Tc.e)(e,To=>Ze(To)),[Ie,Ae]=F.useState(null),it=rx(Ie),ut=it?.width??0,ft=it?.height??0,nt=typeof H=="number"?H:{top:0,right:0,bottom:0,left:0,...H},un=Array.isArray(D)?D:[D],is=un.length>0,Oi={padding:nt,boundary:un.filter(IR),altBoundary:is},{refs:Ii,floatingStyles:ps,placement:vs,isPositioned:ai,middlewareData:Ni}=function(To){To===void 0&&(To={});let{placement:qi="bottom",strategy:va="absolute",middleware:Ps=[],platform:js,elements:{reference:yl,floating:tu}={},transform:Bm=!0,whileElementsMounted:O0,open:qm}=To,[Kc,Vh]=F.useState({x:0,y:0,strategy:va,placement:qi,middlewareData:{},isPositioned:!1}),[$l,Ru]=F.useState(Ps);nS($l,Ps)||Ru(Ps);let[zm,fd]=F.useState(null),[Lp,fu]=F.useState(null),ec=F.useCallback(pu=>{pu!==Kf.current&&(Kf.current=pu,fd(pu))},[]),Hf=F.useCallback(pu=>{pu!==kc.current&&(kc.current=pu,fu(pu))},[]),Cc=yl||zm,pd=tu||Lp,Kf=F.useRef(null),kc=F.useRef(null),Wf=F.useRef(Kc),Gm=O0!=null,rf=QE(O0),jp=QE(js),Hm=QE(qm),Wc=F.useCallback(()=>{if(!Kf.current||!kc.current)return;let pu={placement:qi,strategy:va,middleware:$l};jp.current&&(pu.platform=jp.current),hR(Kf.current,kc.current,pu).then(Bl=>{let gd={...Bl,isPositioned:Hm.current!==!1};ry.current&&!nS(Wf.current,gd)&&(Wf.current=gd,$E.flushSync(()=>{Vh(gd)}))})},[$l,qi,va,jp,Hm]);rS(()=>{qm===!1&&Wf.current.isPositioned&&(Wf.current.isPositioned=!1,Vh(pu=>({...pu,isPositioned:!1})))},[qm]);let ry=F.useRef(!1);rS(()=>(ry.current=!0,()=>{ry.current=!1}),[]),rS(()=>{if(Cc&&(Kf.current=Cc),pd&&(kc.current=pd),Cc&&pd){if(rf.current)return rf.current(Cc,pd,Wc);Wc()}},[Cc,pd,Wc,rf,Gm]);let Km=F.useMemo(()=>({reference:Kf,floating:kc,setReference:ec,setFloating:Hf}),[ec,Hf]),md=F.useMemo(()=>({reference:Cc,floating:pd}),[Cc,pd]),Jf=F.useMemo(()=>{let pu={position:va,left:0,top:0};if(!md.floating)return pu;let Bl=Sx(md.floating,Kc.x),gd=Sx(md.floating,Kc.y);return Bm?{...pu,transform:"translate("+Bl+"px, "+gd+"px)",...bx(md.floating)>=1.5&&{willChange:"transform"}}:{position:va,left:Bl,top:gd}},[va,Bm,md.floating,Kc.x,Kc.y]);return F.useMemo(()=>({...Kc,update:Wc,refs:Km,elements:md,floatingStyles:Jf}),[Kc,Wc,Km,md,Jf])}({strategy:"fixed",placement:a+(c!=="center"?"-"+c:""),whileElementsMounted:(...To)=>function(qi,va,Ps,js){let yl;js===void 0&&(js={});let{ancestorScroll:tu=!0,ancestorResize:Bm=!0,elementResize:O0=typeof ResizeObserver=="function",layoutShift:qm=typeof IntersectionObserver=="function",animationFrame:Kc=!1}=js,Vh=KE(qi),$l=tu||Bm?[...Vh?Pw(Vh):[],...Pw(va)]:[];$l.forEach(fu=>{tu&&fu.addEventListener("scroll",Ps,{passive:!0}),Bm&&fu.addEventListener("resize",Ps)});let Ru=Vh&&qm?function(fu,ec){let Hf,Cc=null,pd=Dp(fu);function Kf(){var kc;clearTimeout(Hf),(kc=Cc)==null||kc.disconnect(),Cc=null}return function kc(Wf,Gm){Wf===void 0&&(Wf=!1),Gm===void 0&&(Gm=1),Kf();let{left:rf,top:jp,width:Hm,height:Wc}=fu.getBoundingClientRect();if(Wf||ec(),!Hm||!Wc)return;let ry=Qb(jp),Km=Qb(pd.clientWidth-(rf+Hm)),md={rootMargin:-ry+"px "+-Km+"px "+-Qb(pd.clientHeight-(jp+Wc))+"px "+-Qb(rf)+"px",threshold:mh(0,Ap(1,Gm))||1},Jf=!0;function pu(Bl){let gd=Bl[0].intersectionRatio;if(gd!==Gm){if(!Jf)return kc();gd?kc(!1,gd):Hf=setTimeout(()=>{kc(!1,1e-7)},1e3)}Jf=!1}try{Cc=new IntersectionObserver(pu,{...md,root:pd.ownerDocument})}catch{Cc=new IntersectionObserver(pu,md)}Cc.observe(fu)}(!0),Kf}(Vh,Ps):null,zm=-1,fd=null;O0&&(fd=new ResizeObserver(fu=>{let[ec]=fu;ec&&ec.target===Vh&&fd&&(fd.unobserve(va),cancelAnimationFrame(zm),zm=requestAnimationFrame(()=>{var Hf;(Hf=fd)==null||Hf.observe(va)})),Ps()}),Vh&&!Kc&&fd.observe(Vh),fd.observe(va));let Lp=Kc?hv(qi):null;return Kc&&function fu(){let ec=hv(qi);Lp&&(ec.x!==Lp.x||ec.y!==Lp.y||ec.width!==Lp.width||ec.height!==Lp.height)&&Ps(),Lp=ec,yl=requestAnimationFrame(fu)}(),Ps(),()=>{var fu;$l.forEach(ec=>{tu&&ec.removeEventListener("scroll",Ps),Bm&&ec.removeEventListener("resize",Ps)}),Ru?.(),(fu=fd)==null||fu.disconnect(),fd=null,Kc&&cancelAnimationFrame(yl)}}(...To,{animationFrame:ye==="always"}),elements:{reference:Ye.anchor},middleware:[fR({mainAxis:l+ft,alignmentAxis:p}),b&&pR({mainAxis:!0,crossAxis:!1,limiter:te==="partial"?mR():void 0,...Oi}),b&&gR({...Oi}),yR({...Oi,apply:({elements:To,rects:qi,availableWidth:va,availableHeight:Ps})=>{let{width:js,height:yl}=qi.reference,tu=To.floating.style;tu.setProperty("--radix-popper-available-width",`${va}px`),tu.setProperty("--radix-popper-available-height",`${Ps}px`),tu.setProperty("--radix-popper-anchor-width",`${js}px`),tu.setProperty("--radix-popper-anchor-height",`${yl}px`)}}),Ie&&wR({element:Ie,padding:g}),TR({arrowWidth:ut,arrowHeight:ft}),ie&&vR({strategy:"referenceHidden",...Oi})]}),[ei,Vs]=Nx(vs),fa=(0,Vb.W)(je);(0,tf.b)(()=>{ai&&fa?.()},[ai,fa]);let uo=Ni.arrow?.x,Xo=Ni.arrow?.y,Wo=Ni.arrow?.centerOffset!==0,[xc,gl]=F.useState();return(0,tf.b)(()=>{ht&&gl(window.getComputedStyle(ht).zIndex)},[ht]),(0,re.jsx)("div",{ref:Ii.setFloating,"data-radix-popper-content-wrapper":"",style:{...ps,transform:ai?ps.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xc,"--radix-popper-transform-origin":[Ni.transformOrigin?.x,Ni.transformOrigin?.y].join(" "),...Ni.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:(0,re.jsx)(SR,{scope:r,placedSide:ei,onArrowChange:Ae,arrowX:uo,arrowY:Xo,shouldHideArrow:Wo,children:(0,re.jsx)(Tl.WV.div,{"data-side":ei,"data-align":Vs,...Re,ref:ke,style:{...Re.style,animation:ai?void 0:"none"}})})})});Rx.displayName=XE;var Px="PopperArrow",_R={top:"bottom",right:"left",bottom:"top",left:"right"},Ax=F.forwardRef(function(n,e){let{__scopePopper:r,...a}=n,l=ER(Px,r),c=_R[l.placedSide];return(0,re.jsx)("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:(0,re.jsx)(Ex,{...a,ref:e,style:{...a.style,display:"block"}})})});function IR(n){return n!==null}Ax.displayName=Px;var TR=n=>({name:"transformOrigin",options:n,fn(e){let{placement:r,rects:a,middlewareData:l}=e,c=l.arrow?.centerOffset!==0,p=c?0:n.arrowWidth,g=c?0:n.arrowHeight,[b,D]=Nx(r),H={start:"0%",center:"50%",end:"100%"}[D],te=(l.arrow?.x??0)+p/2,ie=(l.arrow?.y??0)+g/2,ye="",je="";return b==="bottom"?(ye=c?H:`${te}px`,je=`${-g}px`):b==="top"?(ye=c?H:`${te}px`,je=`${a.floating.height+g}px`):b==="right"?(ye=`${-g}px`,je=c?H:`${ie}px`):b==="left"&&(ye=`${a.floating.width+g}px`,je=c?H:`${ie}px`),{data:{x:ye,y:je}}}});function Nx(n){let[e,r="center"]=n.split("-");return[e,r]}var xR=M(8110),CR=[" ","Enter","ArrowUp","ArrowDown"],kR=[" ","Enter"],Aw="Select",[iS,sS,RR]=(0,tR.B)(Aw),[N0,bP]=(0,jb.b)(Aw,[RR,Ix]),aS=Ix(),[PR,ey]=N0(Aw),[AR,NR]=N0(Aw),Ox=n=>{let{__scopeSelect:e,children:r,open:a,defaultOpen:l,onOpenChange:c,value:p,defaultValue:g,onValueChange:b,dir:D,name:H,autoComplete:te,disabled:ie,required:ye,form:je}=n,Re=aS(e),[Ye,ht]=F.useState(null),[Ze,ke]=F.useState(null),[Ie,Ae]=F.useState(!1),it=function(ai){let Ni=F.useContext(rR);return ai||Ni||"ltr"}(D),[ut=!1,ft]=(0,Fb.T)({prop:a,defaultProp:l,onChange:c}),[nt,un]=(0,Fb.T)({prop:p,defaultProp:g,onChange:b}),is=F.useRef(null),Oi=!Ye||je||!!Ye.closest("form"),[Ii,ps]=F.useState(new Set),vs=Array.from(Ii).map(ai=>ai.props.value).join(";");return(0,re.jsx)(xx,{...Re,children:(0,re.jsxs)(PR,{required:ye,scope:e,trigger:Ye,onTriggerChange:ht,valueNode:Ze,onValueNodeChange:ke,valueNodeHasChildren:Ie,onValueNodeHasChildrenChange:Ae,contentId:_0(),value:nt,onValueChange:un,open:ut,onOpenChange:ft,dir:it,triggerPointerDownPosRef:is,disabled:ie,children:[(0,re.jsx)(iS.Provider,{scope:e,children:(0,re.jsx)(AR,{scope:n.__scopeSelect,onNativeOptionAdd:F.useCallback(ai=>{ps(Ni=>new Set(Ni).add(ai))},[]),onNativeOptionRemove:F.useCallback(ai=>{ps(Ni=>{let ei=new Set(Ni);return ei.delete(ai),ei})},[]),children:r})}),Oi?(0,re.jsxs)(Yx,{"aria-hidden":!0,required:ye,tabIndex:-1,name:H,autoComplete:te,value:nt,onChange:ai=>un(ai.target.value),disabled:ie,form:je,children:[nt===void 0?(0,re.jsx)("option",{value:""}):null,Array.from(Ii)]},vs):null]})})};Ox.displayName=Aw;var Dx="SelectTrigger",ZE=F.forwardRef((n,e)=>{let{__scopeSelect:r,disabled:a=!1,...l}=n,c=aS(r),p=ey(Dx,r),g=p.disabled||a,b=(0,Tc.e)(e,p.onTriggerChange),D=sS(r),H=F.useRef("touch"),[te,ie,ye]=Xx(Re=>{let Ye=D().filter(ke=>!ke.disabled),ht=Ye.find(ke=>ke.value===p.value),Ze=Zx(Ye,Re,ht);Ze!==void 0&&p.onValueChange(Ze.value)}),je=Re=>{g||(p.onOpenChange(!0),ye()),Re&&(p.triggerPointerDownPosRef.current={x:Math.round(Re.pageX),y:Math.round(Re.pageY)})};return(0,re.jsx)(kx,{asChild:!0,...c,children:(0,re.jsx)(Tl.WV.button,{type:"button",role:"combobox","aria-controls":p.contentId,"aria-expanded":p.open,"aria-required":p.required,"aria-autocomplete":"none",dir:p.dir,"data-state":p.open?"open":"closed",disabled:g,"data-disabled":g?"":void 0,"data-placeholder":Qx(p.value)?"":void 0,...l,ref:b,onClick:(0,Ul.M)(l.onClick,Re=>{Re.currentTarget.focus(),H.current!=="mouse"&&je(Re)}),onPointerDown:(0,Ul.M)(l.onPointerDown,Re=>{H.current=Re.pointerType;let Ye=Re.target;Ye.hasPointerCapture(Re.pointerId)&&Ye.releasePointerCapture(Re.pointerId),Re.button===0&&Re.ctrlKey===!1&&Re.pointerType==="mouse"&&(je(Re),Re.preventDefault())}),onKeyDown:(0,Ul.M)(l.onKeyDown,Re=>{let Ye=te.current!=="";Re.ctrlKey||Re.altKey||Re.metaKey||Re.key.length!==1||ie(Re.key),(!Ye||Re.key!==" ")&&CR.includes(Re.key)&&(je(),Re.preventDefault())})})})});ZE.displayName=Dx;var Mx="SelectValue",Lx=F.forwardRef((n,e)=>{let{__scopeSelect:r,className:a,style:l,children:c,placeholder:p="",...g}=n,b=ey(Mx,r),{onValueNodeHasChildrenChange:D}=b,H=c!==void 0,te=(0,Tc.e)(e,b.onValueNodeChange);return(0,tf.b)(()=>{D(H)},[D,H]),(0,re.jsx)(Tl.WV.span,{...g,ref:te,style:{pointerEvents:"none"},children:Qx(b.value)?(0,re.jsx)(re.Fragment,{children:p}):c})});Lx.displayName=Mx;var jx=F.forwardRef((n,e)=>{let{__scopeSelect:r,children:a,...l}=n;return(0,re.jsx)(Tl.WV.span,{"aria-hidden":!0,...l,ref:e,children:a||"\u25BC"})});jx.displayName="SelectIcon";var Fx=n=>(0,re.jsx)(ST.h,{asChild:!0,...n});Fx.displayName="SelectPortal";var dv="SelectContent",e_=F.forwardRef((n,e)=>{let r=ey(dv,n.__scopeSelect),[a,l]=F.useState();return(0,tf.b)(()=>{l(new DocumentFragment)},[]),r.open?(0,re.jsx)(Ux,{...n,ref:e}):a?$E.createPortal((0,re.jsx)(Vx,{scope:n.__scopeSelect,children:(0,re.jsx)(iS.Slot,{scope:n.__scopeSelect,children:(0,re.jsx)("div",{children:n.children})})}),a):null});e_.displayName=dv;var[Vx,ty]=N0(dv),Ux=F.forwardRef((n,e)=>{let{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:c,onPointerDownOutside:p,side:g,sideOffset:b,align:D,alignOffset:H,arrowPadding:te,collisionBoundary:ie,collisionPadding:ye,sticky:je,hideWhenDetached:Re,avoidCollisions:Ye,...ht}=n,Ze=ey(dv,r),[ke,Ie]=F.useState(null),[Ae,it]=F.useState(null),ut=(0,Tc.e)(e,qi=>Ie(qi)),[ft,nt]=F.useState(null),[un,is]=F.useState(null),Oi=sS(r),[Ii,ps]=F.useState(!1),vs=F.useRef(!1);F.useEffect(()=>{if(ke)return jT(ke)},[ke]),ET();let ai=F.useCallback(qi=>{let[va,...Ps]=Oi().map(tu=>tu.ref.current),[js]=Ps.slice(-1),yl=document.activeElement;for(let tu of qi)if(tu===yl||(tu?.scrollIntoView({block:"nearest"}),tu===va&&Ae&&(Ae.scrollTop=0),tu===js&&Ae&&(Ae.scrollTop=Ae.scrollHeight),tu?.focus(),document.activeElement!==yl))return},[Oi,Ae]),Ni=F.useCallback(()=>ai([ft,ke]),[ai,ft,ke]);F.useEffect(()=>{Ii&&Ni()},[Ii,Ni]);let{onOpenChange:ei,triggerPointerDownPosRef:Vs}=Ze;F.useEffect(()=>{if(ke){let qi={x:0,y:0},va=js=>{qi={x:Math.abs(Math.round(js.pageX)-(Vs.current?.x??0)),y:Math.abs(Math.round(js.pageY)-(Vs.current?.y??0))}},Ps=js=>{qi.x<=10&&qi.y<=10?js.preventDefault():ke.contains(js.target)||ei(!1),document.removeEventListener("pointermove",va),Vs.current=null};return Vs.current!==null&&(document.addEventListener("pointermove",va),document.addEventListener("pointerup",Ps,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",va),document.removeEventListener("pointerup",Ps,{capture:!0})}}},[ke,ei,Vs]),F.useEffect(()=>{let qi=()=>ei(!1);return window.addEventListener("blur",qi),window.addEventListener("resize",qi),()=>{window.removeEventListener("blur",qi),window.removeEventListener("resize",qi)}},[ei]);let[fa,uo]=Xx(qi=>{let va=Oi().filter(yl=>!yl.disabled),Ps=va.find(yl=>yl.ref.current===document.activeElement),js=Zx(va,qi,Ps);js&&setTimeout(()=>js.ref.current.focus())}),Xo=F.useCallback((qi,va,Ps)=>{let js=!vs.current&&!Ps;(Ze.value!==void 0&&Ze.value===va||js)&&(nt(qi),js&&(vs.current=!0))},[Ze.value]),Wo=F.useCallback(()=>ke?.focus(),[ke]),xc=F.useCallback((qi,va,Ps)=>{let js=!vs.current&&!Ps;(Ze.value!==void 0&&Ze.value===va||js)&&is(qi)},[Ze.value]),gl=a==="popper"?t_:$x,To=gl===t_?{side:g,sideOffset:b,align:D,alignOffset:H,arrowPadding:te,collisionBoundary:ie,collisionPadding:ye,sticky:je,hideWhenDetached:Re,avoidCollisions:Ye}:{};return(0,re.jsx)(Vx,{scope:r,content:ke,viewport:Ae,onViewportChange:it,itemRefCallback:Xo,selectedItem:ft,onItemLeave:Wo,itemTextRefCallback:xc,focusSelectedItem:Ni,selectedItemText:un,position:a,isPositioned:Ii,searchRef:fa,children:(0,re.jsx)(CE,{as:Y0.g7,allowPinchZoom:!0,children:(0,re.jsx)(bE,{asChild:!0,trapped:Ze.open,onMountAutoFocus:qi=>{qi.preventDefault()},onUnmountAutoFocus:(0,Ul.M)(l,qi=>{Ze.trigger?.focus({preventScroll:!0}),qi.preventDefault()}),children:(0,re.jsx)(mT.XB,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:qi=>qi.preventDefault(),onDismiss:()=>Ze.onOpenChange(!1),children:(0,re.jsx)(gl,{role:"listbox",id:Ze.contentId,"data-state":Ze.open?"open":"closed",dir:Ze.dir,onContextMenu:qi=>qi.preventDefault(),...ht,...To,onPlaced:()=>ps(!0),ref:ut,style:{display:"flex",flexDirection:"column",outline:"none",...ht.style},onKeyDown:(0,Ul.M)(ht.onKeyDown,qi=>{let va=qi.ctrlKey||qi.altKey||qi.metaKey;if(qi.key==="Tab"&&qi.preventDefault(),va||qi.key.length!==1||uo(qi.key),["ArrowUp","ArrowDown","Home","End"].includes(qi.key)){let Ps=Oi().filter(js=>!js.disabled).map(js=>js.ref.current);if(["ArrowUp","End"].includes(qi.key)&&(Ps=Ps.slice().reverse()),["ArrowUp","ArrowDown"].includes(qi.key)){let js=qi.target,yl=Ps.indexOf(js);Ps=Ps.slice(yl+1)}setTimeout(()=>ai(Ps)),qi.preventDefault()}})})})})})})});Ux.displayName="SelectContentImpl";var $x=F.forwardRef((n,e)=>{let{__scopeSelect:r,onPlaced:a,...l}=n,c=ey(dv,r),p=ty(dv,r),[g,b]=F.useState(null),[D,H]=F.useState(null),te=(0,Tc.e)(e,ut=>H(ut)),ie=sS(r),ye=F.useRef(!1),je=F.useRef(!0),{viewport:Re,selectedItem:Ye,selectedItemText:ht,focusSelectedItem:Ze}=p,ke=F.useCallback(()=>{if(c.trigger&&c.valueNode&&g&&D&&Re&&Ye&&ht){let ut=c.trigger.getBoundingClientRect(),ft=D.getBoundingClientRect(),nt=c.valueNode.getBoundingClientRect(),un=ht.getBoundingClientRect();if(c.dir!=="rtl"){let To=un.left-ft.left,qi=nt.left-To,va=ut.left-qi,Ps=ut.width+va,js=Math.max(Ps,ft.width),yl=ax(qi,[10,Math.max(10,window.innerWidth-10-js)]);g.style.minWidth=Ps+"px",g.style.left=yl+"px"}else{let To=ft.right-un.right,qi=window.innerWidth-nt.right-To,va=window.innerWidth-ut.right-qi,Ps=ut.width+va,js=Math.max(Ps,ft.width),yl=ax(qi,[10,Math.max(10,window.innerWidth-10-js)]);g.style.minWidth=Ps+"px",g.style.right=yl+"px"}let is=ie(),Oi=window.innerHeight-20,Ii=Re.scrollHeight,ps=window.getComputedStyle(D),vs=parseInt(ps.borderTopWidth,10),ai=parseInt(ps.paddingTop,10),Ni=parseInt(ps.borderBottomWidth,10),ei=vs+ai+Ii+parseInt(ps.paddingBottom,10)+Ni,Vs=Math.min(5*Ye.offsetHeight,ei),fa=window.getComputedStyle(Re),uo=parseInt(fa.paddingTop,10),Xo=parseInt(fa.paddingBottom,10),Wo=ut.top+ut.height/2-10,xc=Ye.offsetHeight/2,gl=vs+ai+(Ye.offsetTop+xc);if(gl<=Wo){let To=is.length>0&&Ye===is[is.length-1].ref.current;g.style.bottom="0px";let qi=D.clientHeight-Re.offsetTop-Re.offsetHeight;g.style.height=gl+Math.max(Oi-Wo,xc+(To?Xo:0)+qi+Ni)+"px"}else{let To=is.length>0&&Ye===is[0].ref.current;g.style.top="0px";let qi=Math.max(Wo,vs+Re.offsetTop+(To?uo:0)+xc);g.style.height=qi+(ei-gl)+"px",Re.scrollTop=gl-Wo+Re.offsetTop}g.style.margin="10px 0",g.style.minHeight=Vs+"px",g.style.maxHeight=Oi+"px",a?.(),requestAnimationFrame(()=>ye.current=!0)}},[ie,c.trigger,c.valueNode,g,D,Re,Ye,ht,c.dir,a]);(0,tf.b)(()=>ke(),[ke]);let[Ie,Ae]=F.useState();(0,tf.b)(()=>{D&&Ae(window.getComputedStyle(D).zIndex)},[D]);let it=F.useCallback(ut=>{ut&&je.current===!0&&(ke(),Ze?.(),je.current=!1)},[ke,Ze]);return(0,re.jsx)(OR,{scope:r,contentWrapper:g,shouldExpandOnScrollRef:ye,onScrollButtonChange:it,children:(0,re.jsx)("div",{ref:b,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Ie},children:(0,re.jsx)(Tl.WV.div,{...l,ref:te,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});$x.displayName="SelectItemAlignedPosition";var t_=F.forwardRef((n,e)=>{let{__scopeSelect:r,align:a="start",collisionPadding:l=10,...c}=n,p=aS(r);return(0,re.jsx)(Rx,{...p,...c,ref:e,align:a,collisionPadding:l,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});t_.displayName="SelectPopperPosition";var[OR,r_]=N0(dv,{}),n_="SelectViewport",Bx=F.forwardRef((n,e)=>{let{__scopeSelect:r,nonce:a,...l}=n,c=ty(n_,r),p=r_(n_,r),g=(0,Tc.e)(e,c.onViewportChange),b=F.useRef(0);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,re.jsx)(iS.Slot,{scope:r,children:(0,re.jsx)(Tl.WV.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:g,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:(0,Ul.M)(l.onScroll,D=>{let H=D.currentTarget,{contentWrapper:te,shouldExpandOnScrollRef:ie}=p;if(ie?.current&&te){let ye=Math.abs(b.current-H.scrollTop);if(ye>0){let je=window.innerHeight-20,Re=Math.max(parseFloat(te.style.minHeight),parseFloat(te.style.height));if(Re<je){let Ye=Re+ye,ht=Math.min(je,Ye),Ze=Ye-ht;te.style.height=ht+"px",te.style.bottom==="0px"&&(H.scrollTop=Ze>0?Ze:0,te.style.justifyContent="flex-end")}}}b.current=H.scrollTop})})})]})});Bx.displayName=n_;var qx="SelectGroup",[DR,MR]=N0(qx);F.forwardRef((n,e)=>{let{__scopeSelect:r,...a}=n,l=_0();return(0,re.jsx)(DR,{scope:r,id:l,children:(0,re.jsx)(Tl.WV.div,{role:"group","aria-labelledby":l,...a,ref:e})})}).displayName=qx;var zx="SelectLabel",i_=F.forwardRef((n,e)=>{let{__scopeSelect:r,...a}=n,l=MR(zx,r);return(0,re.jsx)(Tl.WV.div,{id:l.id,...a,ref:e})});i_.displayName=zx;var oS="SelectItem",[LR,Gx]=N0(oS),s_=F.forwardRef((n,e)=>{let{__scopeSelect:r,value:a,disabled:l=!1,textValue:c,...p}=n,g=ey(oS,r),b=ty(oS,r),D=g.value===a,[H,te]=F.useState(c??""),[ie,ye]=F.useState(!1),je=(0,Tc.e)(e,Ze=>b.itemRefCallback?.(Ze,a,l)),Re=_0(),Ye=F.useRef("touch"),ht=()=>{l||(g.onValueChange(a),g.onOpenChange(!1))};if(a==="")throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,re.jsx)(LR,{scope:r,value:a,disabled:l,textId:Re,isSelected:D,onItemTextChange:F.useCallback(Ze=>{te(ke=>ke||(Ze?.textContent??"").trim())},[]),children:(0,re.jsx)(iS.ItemSlot,{scope:r,value:a,disabled:l,textValue:H,children:(0,re.jsx)(Tl.WV.div,{role:"option","aria-labelledby":Re,"data-highlighted":ie?"":void 0,"aria-selected":D&&ie,"data-state":D?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...p,ref:je,onFocus:(0,Ul.M)(p.onFocus,()=>ye(!0)),onBlur:(0,Ul.M)(p.onBlur,()=>ye(!1)),onClick:(0,Ul.M)(p.onClick,()=>{Ye.current!=="mouse"&&ht()}),onPointerUp:(0,Ul.M)(p.onPointerUp,()=>{Ye.current==="mouse"&&ht()}),onPointerDown:(0,Ul.M)(p.onPointerDown,Ze=>{Ye.current=Ze.pointerType}),onPointerMove:(0,Ul.M)(p.onPointerMove,Ze=>{Ye.current=Ze.pointerType,l?b.onItemLeave?.():Ye.current==="mouse"&&Ze.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,Ul.M)(p.onPointerLeave,Ze=>{Ze.currentTarget===document.activeElement&&b.onItemLeave?.()}),onKeyDown:(0,Ul.M)(p.onKeyDown,Ze=>{b.searchRef?.current!==""&&Ze.key===" "||(kR.includes(Ze.key)&&ht(),Ze.key===" "&&Ze.preventDefault())})})})})});s_.displayName=oS;var Nw="SelectItemText",Hx=F.forwardRef((n,e)=>{let{__scopeSelect:r,className:a,style:l,...c}=n,p=ey(Nw,r),g=ty(Nw,r),b=Gx(Nw,r),D=NR(Nw,r),[H,te]=F.useState(null),ie=(0,Tc.e)(e,ht=>te(ht),b.onItemTextChange,ht=>g.itemTextRefCallback?.(ht,b.value,b.disabled)),ye=H?.textContent,je=F.useMemo(()=>(0,re.jsx)("option",{value:b.value,disabled:b.disabled,children:ye},b.value),[b.disabled,b.value,ye]),{onNativeOptionAdd:Re,onNativeOptionRemove:Ye}=D;return(0,tf.b)(()=>(Re(je),()=>Ye(je)),[Re,Ye,je]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Tl.WV.span,{id:b.textId,...c,ref:ie}),b.isSelected&&p.valueNode&&!p.valueNodeHasChildren?$E.createPortal(c.children,p.valueNode):null]})});Hx.displayName=Nw;var Kx="SelectItemIndicator",Wx=F.forwardRef((n,e)=>{let{__scopeSelect:r,...a}=n;return Gx(Kx,r).isSelected?(0,re.jsx)(Tl.WV.span,{"aria-hidden":!0,...a,ref:e}):null});Wx.displayName=Kx;var a_="SelectScrollUpButton",o_=F.forwardRef((n,e)=>{let r=ty(a_,n.__scopeSelect),a=r_(a_,n.__scopeSelect),[l,c]=F.useState(!1),p=(0,Tc.e)(e,a.onScrollButtonChange);return(0,tf.b)(()=>{if(r.viewport&&r.isPositioned){let g=function(){c(b.scrollTop>0)},b=r.viewport;return g(),b.addEventListener("scroll",g),()=>b.removeEventListener("scroll",g)}},[r.viewport,r.isPositioned]),l?(0,re.jsx)(Jx,{...n,ref:p,onAutoScroll:()=>{let{viewport:g,selectedItem:b}=r;g&&b&&(g.scrollTop=g.scrollTop-b.offsetHeight)}}):null});o_.displayName=a_;var l_="SelectScrollDownButton",u_=F.forwardRef((n,e)=>{let r=ty(l_,n.__scopeSelect),a=r_(l_,n.__scopeSelect),[l,c]=F.useState(!1),p=(0,Tc.e)(e,a.onScrollButtonChange);return(0,tf.b)(()=>{if(r.viewport&&r.isPositioned){let g=function(){let D=b.scrollHeight-b.clientHeight;c(Math.ceil(b.scrollTop)<D)},b=r.viewport;return g(),b.addEventListener("scroll",g),()=>b.removeEventListener("scroll",g)}},[r.viewport,r.isPositioned]),l?(0,re.jsx)(Jx,{...n,ref:p,onAutoScroll:()=>{let{viewport:g,selectedItem:b}=r;g&&b&&(g.scrollTop=g.scrollTop+b.offsetHeight)}}):null});u_.displayName=l_;var Jx=F.forwardRef((n,e)=>{let{__scopeSelect:r,onAutoScroll:a,...l}=n,c=ty("SelectScrollButton",r),p=F.useRef(null),g=sS(r),b=F.useCallback(()=>{p.current!==null&&(window.clearInterval(p.current),p.current=null)},[]);return F.useEffect(()=>()=>b(),[b]),(0,tf.b)(()=>{g().find(H=>H.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[g]),(0,re.jsx)(Tl.WV.div,{"aria-hidden":!0,...l,ref:e,style:{flexShrink:0,...l.style},onPointerDown:(0,Ul.M)(l.onPointerDown,()=>{p.current===null&&(p.current=window.setInterval(a,50))}),onPointerMove:(0,Ul.M)(l.onPointerMove,()=>{c.onItemLeave?.(),p.current===null&&(p.current=window.setInterval(a,50))}),onPointerLeave:(0,Ul.M)(l.onPointerLeave,()=>{b()})})}),c_=F.forwardRef((n,e)=>{let{__scopeSelect:r,...a}=n;return(0,re.jsx)(Tl.WV.div,{"aria-hidden":!0,...a,ref:e})});c_.displayName="SelectSeparator";var h_="SelectArrow";function Qx(n){return n===""||n===void 0}F.forwardRef((n,e)=>{let{__scopeSelect:r,...a}=n,l=aS(r),c=ey(h_,r),p=ty(h_,r);return c.open&&p.position==="popper"?(0,re.jsx)(Ax,{...l,...a,ref:e}):null}).displayName=h_;var Yx=F.forwardRef((n,e)=>{let{value:r,...a}=n,l=F.useRef(null),c=(0,Tc.e)(e,l),p=tx(r);return F.useEffect(()=>{let g=l.current,b=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(p!==r&&b){let D=new Event("change",{bubbles:!0});b.call(g,r),g.dispatchEvent(D)}},[p,r]),(0,re.jsx)(xR.T,{asChild:!0,children:(0,re.jsx)("select",{...a,ref:c,defaultValue:r})})});function Xx(n){let e=(0,Vb.W)(n),r=F.useRef(""),a=F.useRef(0),l=F.useCallback(p=>{let g=r.current+p;e(g),function b(D){r.current=D,window.clearTimeout(a.current),D!==""&&(a.current=window.setTimeout(()=>b(""),1e3))}(g)},[e]),c=F.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return F.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,l,c]}function Zx(n,e,r){var a;let l=e.length>1&&Array.from(e).every(g=>g===e[0])?e[0]:e,c=(a=Math.max(r?n.indexOf(r):-1,0),n.map((g,b)=>n[(a+b)%n.length]));l.length===1&&(c=c.filter(g=>g!==r));let p=c.find(g=>g.textValue.toLowerCase().startsWith(l.toLowerCase()));return p!==r?p:void 0}Yx.displayName="BubbleSelect";var Ow=M(9055);let e1=(0,Ow.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),jR=(0,Ow.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),FR=(0,Ow.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),t1=F.forwardRef(({className:n,children:e,...r},a)=>(0,re.jsxs)(ZE,{ref:a,className:(0,sl.cn)("flex h-10 w-full items-center justify-between rounded-base border-2 border-border bg-white px-3 py-2 text-sm font-base text-text ring-offset-white placeholder:text-text/50 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-darkBorder dark:bg-secondaryBlack dark:text-darkText [&>span]:line-clamp-1",n),...r,children:[e,(0,re.jsx)(jx,{asChild:!0,children:(0,re.jsx)(e1,{className:"h-4 w-4"})})]}));t1.displayName=ZE.displayName;let r1=F.forwardRef(({className:n,...e},r)=>(0,re.jsx)(o_,{ref:r,className:(0,sl.cn)("flex cursor-default items-center justify-center py-1 text-text",n),...e,children:(0,re.jsx)(jR,{className:"h-4 w-4"})}));r1.displayName=o_.displayName;let n1=F.forwardRef(({className:n,...e},r)=>(0,re.jsx)(u_,{ref:r,className:(0,sl.cn)("flex cursor-default items-center justify-center py-1 font-base text-text",n),...e,children:(0,re.jsx)(e1,{className:"h-4 w-4"})}));n1.displayName=u_.displayName;let i1=F.forwardRef(({className:n,children:e,position:r="popper",...a},l)=>(0,re.jsx)(Fx,{children:(0,re.jsxs)(e_,{ref:l,className:(0,sl.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-base border-2 border-border bg-main font-base text-text data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-darkBorder",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:r,...a,children:[(0,re.jsx)(r1,{}),(0,re.jsx)(Bx,{className:(0,sl.cn)("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),(0,re.jsx)(n1,{})]})}));i1.displayName=e_.displayName,F.forwardRef(({className:n,...e},r)=>(0,re.jsx)(i_,{ref:r,className:(0,sl.cn)("border-2 border-transparent py-1.5 pl-8 pr-2 text-sm font-base text-black/80",n),...e})).displayName=i_.displayName;let Dw=F.forwardRef(({className:n,children:e,...r},a)=>(0,re.jsxs)(s_,{ref:a,className:(0,sl.cn)("relative flex w-full cursor-default select-none items-center rounded-base border-2 border-transparent py-1.5 pl-8 pr-2 text-sm font-base text-text outline-none focus:border-border data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:border-darkBorder",n),...r,children:[(0,re.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,re.jsx)(Wx,{children:(0,re.jsx)(FR,{className:"h-4 w-4"})})}),(0,re.jsx)(Hx,{children:e})]}));Dw.displayName=s_.displayName,F.forwardRef(({className:n,...e},r)=>(0,re.jsx)(c_,{ref:r,className:(0,sl.cn)("-mx-1 my-1 h-px bg-border dark:border-darkBorder",n),...e})).displayName=c_.displayName;var lS=M(7490),s1=M(9798);let VR=Symbol("RESET"),UR=n=>typeof n?.then=="function",$R=function(n=()=>{try{return window.localStorage}catch(r){typeof window<"u"&&console.warn(r);return}},e){var r;let a,l,c,p={getItem:(g,b)=>{var D,H;let te=ye=>{if(a!==(ye=ye||"")){try{l=JSON.parse(ye,void 0)}catch{return b}a=ye}return l},ie=(H=(D=n())==null?void 0:D.getItem(g))!=null?H:null;return UR(ie)?ie.then(te):te(ie)},setItem:(g,b)=>{var D;return(D=n())==null?void 0:D.setItem(g,JSON.stringify(b,void 0))},removeItem:g=>{var b;return(b=n())==null?void 0:b.removeItem(g)}};try{c=(r=n())==null?void 0:r.subscribe}catch{}if(!c&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(c=(g,b)=>{if(!(n()instanceof window.Storage))return()=>{};let D=H=>{H.storageArea===n()&&H.key===g&&b(H.newValue)};return window.addEventListener("storage",D),()=>{window.removeEventListener("storage",D)}}),c){let g;p.subscribe=(g=c,(b,D,H)=>g(b,te=>{let ie;try{ie=JSON.parse(te||"")}catch{ie=H}D(ie)}))}return p}();function d_(n,e,r=$R,a){let l=a?.getOnInit,c=(0,s1.cn)(l?r.getItem(n,e):e);return c.debugPrivate=!0,c.onMount=p=>{let g;return p(r.getItem(n,e)),r.subscribe&&(g=r.subscribe(n,p,e)),g},(0,s1.cn)(p=>p(c),(p,g,b)=>{let D=typeof b=="function"?b(p(c)):b;return D===VR?(g(c,e),r.removeItem(n)):D instanceof Promise?D.then(H=>(g(c,H),r.setItem(n,H))):(g(c,D),r.setItem(n,D))})}let a1=d_("link_expiry",void 0),BR=d_("download_qr_code",!1),qR=d_("generated_links",[]),zR=({slug:n,setSlug:e})=>{let[r,a]=(0,lS.KO)(a1),[l,c]=(0,lS.KO)(BR),[p,g]=(0,F.useState)(null),{isLoggedIn:b}=Hy();return(0,F.useEffect)(()=>{if(!n){g(null);return}(n.length<3||n.length>50)&&g("Slug must be between 3 and 50 characters"),/^[a-zA-Z0-9_-]+$/.test(n)||g("Slug can only contain letters, numbers, dash and underscore")},[n]),(0,re.jsxs)(VT,{children:[(0,re.jsx)($T,{asChild:!0,children:(0,re.jsx)(Ec,{size:"lg",type:"button",variant:"neutral",className:"h-12 text-base font-heading md:text-lg lg:h-14 lg:text-xl",children:(0,re.jsx)(rw,{})})}),(0,re.jsxs)(QT,{children:[(0,re.jsxs)(YT,{children:[(0,re.jsx)(ZT,{children:"Link Options"}),(0,re.jsx)(ex,{children:b?"Make changes to your link here.":(0,re.jsx)("span",{className:"font-semibold text-red-500",children:"Sign in to make changes to your link."})})]}),(0,re.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,re.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,re.jsx)(Wb,{htmlFor:"name",className:"text-right",children:"Custom Link"}),(0,re.jsxs)("div",{className:"relative flex w-full items-center",children:[(0,re.jsx)("span",{className:"pointer-events-none absolute left-3 top-1/2 z-10 -translate-y-1/2 text-sm text-text text-opacity-50 dark:text-darkText",children:"https://thiss.link/"}),(0,re.jsx)(jg,{value:n,onChange:D=>e(D.target.value),className:"w-full pl-[118px] font-semibold",disabled:!b})]})]}),(0,re.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,re.jsx)(Wb,{htmlFor:"download-qr-code",children:"Download QR Code"}),(0,re.jsx)(UE,{id:"download-qr-code",checked:l,disabled:!b,onCheckedChange:D=>c(D)})]}),(0,re.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,re.jsx)(Wb,{htmlFor:"download-qr-code",children:"Link Expiration"}),(0,re.jsxs)("div",{className:"flex items-center gap-2",children:[(0,re.jsx)(UE,{id:"disable-link-expiry",checked:!!r,onCheckedChange:D=>{a(D?"24-hours":void 0)},disabled:!b}),(0,re.jsxs)(Ox,{onValueChange:D=>a(D),value:r,disabled:!r||!b,children:[(0,re.jsx)(t1,{className:"w-[180px]",children:(0,re.jsx)(Lx,{placeholder:"Never"})}),(0,re.jsxs)(i1,{children:[(0,re.jsx)(Dw,{value:"24-hours",children:"24 hours"}),(0,re.jsx)(Dw,{value:"2-days",children:"2 days"}),(0,re.jsx)(Dw,{value:"1-week",children:"1 week"}),(0,re.jsx)(Dw,{value:"1-month",children:"1 month"})]})]})]})]})]}),(0,re.jsx)(XT,{children:(0,re.jsx)(ME,{asChild:!0,children:(0,re.jsxs)(Ec,{type:p?"button":"submit",onClick:D=>{p&&((0,se.Am)({title:"Error",description:p,action:(0,re.jsx)(me.gD,{altText:"Got it",children:"Got it"})}),D.preventDefault())},children:[(0,re.jsx)(tw,{className:"mr-2 h-4 w-4"}),"Save changes"]})})})]})]})},GR=({generatedLink:n})=>n?(0,re.jsxs)(ph.div,{className:"flex items-center justify-between gap-2 rounded-base border-2 border-border bg-main p-4 text-black shadow-light dark:border-darkBorder dark:shadow-dark",variants:od,initial:"hidden",animate:"visible",children:[(0,re.jsx)("a",{href:n.link,target:"_blank",className:"w-full",children:(0,re.jsxs)(Ec,{className:"w-full font-bold",variant:"neutral",type:"button",children:[(0,re.jsx)(Wy,{className:"mr-2 h-4 w-4"}),(0,re.jsxs)("span",{className:"max-w-48 truncate",children:[n.link,"qweqwke12ok321o3ko1kj3"]})]})}),(0,re.jsx)(et,{href:"/links",children:(0,re.jsxs)(Ec,{size:"sm",type:"button",variant:"neutral",onClick:()=>{navigator.clipboard.writeText(n.link),(0,se.Am)({title:"Copied",description:"Link copied to clipboard",action:(0,re.jsx)(me.gD,{altText:"Got it",children:"Got it"})})},children:[(0,re.jsx)(ub,{className:"mr-2"}),"My Links"]})}),(0,re.jsxs)(Ec,{size:"sm",type:"button",variant:"neutral",onClick:()=>{navigator.clipboard.writeText(n.link),(0,se.Am)({title:"Copied",description:"Link copied to clipboard",action:(0,re.jsx)(me.gD,{altText:"Got it",children:"Got it"})})},children:[(0,re.jsx)(Yv,{className:"mr-2"}),"Copy"]})]}):null;var HR=Gy("d190c6abc77b9ad5e6b1b18930229ac61a410b1f");let KR=({creatingLink:n,setCreatingLink:e})=>{let{user:r}=Hy(),[a,l]=(0,F.useState)(""),[c,p]=(0,F.useState)(""),{toast:g}=(0,se.pm)(),[b,D]=(0,F.useState)(""),[H,te]=(0,F.useState)(!1),ie=(0,lS.Dv)(a1),[ye,je]=(0,lS.KO)(qR),[Re,Ye]=(0,F.useState)(null),ht=async Ze=>{if(Ze.preventDefault(),e(!0),!/^(https?:\/\/|ftp:\/\/|magnet:\?).+/i.test(a)){g({title:"Invalid URL",description:"URL must start with http://, https://, ftp://, or magnet:?",action:(0,re.jsx)(me.gD,{altText:"Got it",children:"Got it"})});return}try{let ke=await HR({url:a,password:b,userId:r?.uid,slug:c,expiry:ie});if(ke.status==="error")throw Error(ke.message);ke.linkData&&(g({title:"Success",description:"thiss link has been copied to clipboard",action:(0,re.jsx)(me.gD,{altText:"Got it",children:"Got it"})}),je(Ie=>[...Ie,ke.linkData]),Ye(ke.linkData))}catch{g({title:"Error",description:"Error creating link",action:(0,re.jsx)(me.gD,{altText:"Got it",children:"Got it"})})}finally{e(!1)}};return(0,re.jsx)("form",{onSubmit:ht,className:"w-full max-w-[900px]",children:(0,re.jsxs)(ph.div,{className:"flex w-full flex-col gap-3",variants:od,initial:"hidden",animate:"visible",children:[(0,re.jsx)(ph.div,{className:"z-10 flex w-full gap-2",variants:od,children:(0,re.jsx)(jg,{className:"h-12 w-full text-base font-heading md:text-lg lg:h-14 lg:text-xl",type:"url",value:a,onChange:Ze=>l(Ze.target.value),placeholder:"Enter link here...",required:!0})}),(0,re.jsx)(pT,{mode:"popLayout",children:H&&(0,re.jsx)(ph.div,{variants:od,initial:"hidden",animate:"visible",exit:{opacity:0,y:-20,scale:.95,transition:{type:"spring",stiffness:300,damping:20,duration:.2}},children:(0,re.jsx)(jg,{type:"password",className:"h-12 text-base font-heading md:text-lg lg:h-14 lg:text-xl",value:b,onChange:Ze=>D(Ze.target.value),placeholder:"Enter password here...",required:!0})})}),(0,re.jsxs)(ph.div,{variants:od,className:"z-10 flex gap-2",children:[(0,re.jsxs)(Ec,{type:"submit",className:(0,sl.cn)("h-12 w-full text-base font-heading md:text-lg lg:h-14 lg:text-xl",n&&"pointer-events-none translate-x-boxShadowX translate-y-boxShadowY shadow-none dark:shadow-none"),size:"lg",disabled:n,children:[n?(0,re.jsx)(hb,{className:"mr-2 animate-spin"}):null," ",n?"squishing":"(\u30C4) squish thiss link"]}),(0,re.jsx)(zR,{slug:c,setSlug:p}),(0,re.jsx)(Ec,{size:"lg",type:"button",className:"h-12 text-base font-heading dark:text-text md:text-lg lg:h-14 lg:text-xl",variant:H?"default":"neutral",onClick:()=>te(!H),children:H?(0,re.jsx)(cb,{}):(0,re.jsx)(db,{})})]}),(0,re.jsx)(GR,{generatedLink:Re})]})})},WR=async(n,e)=>{let r=new TextEncoder,a=new Uint8Array(Array.from(atob(n),H=>H.charCodeAt(0))),l=a.slice(0,32),c=a.slice(32,48),p=a.slice(48),g=await crypto.subtle.importKey("raw",r.encode(e),"PBKDF2",!1,["deriveKey"]),b=await crypto.subtle.deriveKey({name:"PBKDF2",salt:l,iterations:1e5,hash:"SHA-256"},g,{name:"AES-GCM",length:256},!1,["decrypt"]),D=await crypto.subtle.decrypt({name:"AES-GCM",iv:c},b,p);return new TextDecoder().decode(D)};var o1=M(7588);let JR=({checkingLink:n,setCheckingLink:e,linkData:r})=>{let a=(0,o1.tv)(),[l,c]=(0,F.useState)(""),p=async g=>{if(g.preventDefault(),e(!0),r){try{let b=await WR(r?.link,l);b?a.push(b):(0,se.Am)({title:"Invalid password",description:"The password you entered is incorrect.",action:(0,re.jsx)(me.gD,{altText:"Got it",children:"Got it"})})}catch{(0,se.Am)({title:"Invalid password",description:"The password you entered is incorrect.",action:(0,re.jsx)(me.gD,{altText:"Got it",children:"Got it"})})}e(!1)}};return(0,re.jsx)("form",{onSubmit:p,className:"w-full max-w-[900px]",children:(0,re.jsxs)(ph.div,{className:"flex w-full flex-col gap-3",variants:od,initial:"hidden",animate:"visible",children:[(0,re.jsx)(pT,{mode:"popLayout",children:(0,re.jsx)(ph.div,{variants:od,initial:"hidden",animate:"visible",exit:{opacity:0,y:-20,scale:.95,transition:{type:"spring",stiffness:300,damping:20,duration:.2}},children:(0,re.jsx)(jg,{type:"password",className:"h-12 text-base font-heading md:text-lg lg:h-14 lg:text-xl",value:l,onChange:g=>c(g.target.value),placeholder:"Enter password here...",required:!0})})}),(0,re.jsx)(ph.div,{variants:od,className:"z-10 flex gap-2",children:(0,re.jsxs)(Ec,{type:"submit",className:(0,sl.cn)("h-12 w-full text-base font-heading md:text-lg lg:h-14 lg:text-xl",n&&"pointer-events-none translate-x-boxShadowX translate-y-boxShadowY shadow-none dark:shadow-none"),size:"lg",disabled:n,children:[n?(0,re.jsx)(hb,{className:"mr-2 animate-spin"}):(0,re.jsx)(db,{className:"mr-2"}),"unlock thiss link"]})})]})})};function QR({linkData:n}){let[e,r]=(0,F.useState)(!1);return(0,re.jsx)(ph.header,{variants:od,initial:"hidden",animate:"visible",className:(0,sl.cn)("flex h-screen w-full snap-start snap-always flex-col items-center justify-center gap-4 bg-white bg-[linear-gradient(to_right,#80808033_1px,transparent_1px),linear-gradient(to_bottom,#80808033_1px,transparent_1px)] bg-[size:70px_70px] dark:bg-secondaryBlack"),children:(0,re.jsxs)(ph.div,{className:"relative z-10 flex max-w-[500px] flex-col items-center justify-center gap-6 text-center",children:[(0,re.jsxs)(ph.div,{className:"flex flex-col items-center justify-center gap-2",variants:od,initial:"hidden",animate:"visible",children:[(0,re.jsx)(ph.div,{className:"relative h-full w-full",children:(0,re.jsx)(ph.img,{src:"/logo.svg",alt:"logo",className:(0,sl.cn)("w-full transition-transform duration-500 ease-in-out dark:opacity-95 dark:invert",e&&"scale-95")})}),(0,re.jsx)(ph.span,{className:"inline-block -rotate-1 bg-mainAccent px-2",children:(0,re.jsx)(ph.p,{className:(0,sl.cn)("rotate-1 text-lg font-bold leading-relaxed transition-opacity duration-500 dark:text-mainAccent md:text-xl lg:text-2xl lg:leading-relaxed"),children:"Free and Open Source Link Shortener"})})]}),n?(0,re.jsx)(JR,{linkData:n,checkingLink:e,setCheckingLink:r}):(0,re.jsx)(KR,{creatingLink:e,setCreatingLink:r})]})})}let YR=(0,Ow.Z)("Mouse",[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]]),XR=(0,Ow.Z)("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);function ZR(){return(0,re.jsxs)("footer",{className:"m500:text-sm z-30 flex flex-row items-center justify-between border-t-2 border-t-border bg-white px-5 py-5 text-center font-base",children:[(0,re.jsxs)("div",{className:"flex items-end gap-4",children:[(0,re.jsx)("h4",{className:"text-xl font-bold",children:"thiss.link"}),(0,re.jsxs)("div",{className:"flex items-center gap-2",children:[(0,re.jsx)("a",{target:"_blank",href:"https://github.com/NayamAmarshe/thiss.link",className:"font-heading underline",children:"Github"}),(0,re.jsx)("a",{target:"_blank",href:"https://www.buymeacoffee.com/fossisthefuture",className:"font-heading underline",children:"Buy Me A Coffee"})]})]}),(0,re.jsxs)("p",{className:"text-sm",children:["Copyright \xA9 ",new Date().getFullYear()," -"," ",(0,re.jsx)("span",{className:"font-bold",children:"thiss.link"}),"."]}),(0,re.jsxs)("p",{className:"flex items-center text-sm",children:["Made with ",(0,re.jsx)(YR,{className:"mx-1 h-4 w-4"})," and"," ",(0,re.jsx)(XR,{className:"mx-1 h-4 w-4"})]})]})}var eP=Gy("990083f62ad32e4709fdee275f80991c7e071a72");let tP="edge",rP=({params:n})=>{let e=(0,o1.tv)(),[r,a]=(0,F.useState)(null),l=async()=>{if(n.slug)try{let c=await eP({slug:n.slug});if(c.status==="error")throw Error(c.message);c.status==="success"&&c.linkData&&(console.log("\u{1F680} => responseData:",c),c.linkData.isProtected?a(c.linkData):e.push(c.linkData.link))}catch{e.push("/"),(0,se.Am)({title:"Error",description:"Error fetching link",action:(0,re.jsx)(me.gD,{altText:"Got it",children:"Got it"})})}};return(0,F.useEffect)(()=>{n.slug&&l()},[n.slug]),n.slug&&r?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(ce,{children:[(0,re.jsx)("title",{children:"thiss.link - Link Shortener"}),(0,re.jsx)("meta",{name:"description",content:"Simple and fast URL shortener"})]}),(0,re.jsx)(Z0,{}),(0,re.jsxs)("main",{className:"max-w-screen relative z-0 flex h-screen w-full snap-both snap-proximity flex-col overflow-y-scroll pt-16",children:[(0,re.jsx)(QR,{linkData:r}),(0,re.jsx)(ZR,{})]})]}):null}},599:(Jt,ae,M)=>{"use strict";M.d(ae,{Providers:()=>We});var q,Z,W,j=M(926),z=M(7490),y=M(9220),S=(ve,Ve,gt,mt,lt,et,bt,Ct)=>{let Ee=document.documentElement,Qe=["light","dark"];function yt(Rt){(Array.isArray(ve)?ve:[ve]).forEach(Et=>{let rr=Et==="class",an=rr&&et?lt.map(Hr=>et[Hr]||Hr):lt;rr?(Ee.classList.remove(...an),Ee.classList.add(Rt)):Ee.setAttribute(Et,Rt)}),Ct&&Qe.includes(Rt)&&(Ee.style.colorScheme=Rt)}if(mt)yt(mt);else try{let Rt=localStorage.getItem(Ve)||gt,Et=bt&&Rt==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":Rt;yt(Et)}catch{}},k=["light","dark"],I="(prefers-color-scheme: dark)",x=y.createContext(void 0),C=ve=>y.useContext(x)?y.createElement(y.Fragment,null,ve.children):y.createElement(U,{...ve}),N=["light","dark"],U=({forcedTheme:ve,disableTransitionOnChange:Ve=!1,enableSystem:gt=!0,enableColorScheme:mt=!0,storageKey:lt="theme",themes:et=N,defaultTheme:bt=gt?"system":"light",attribute:Ct="data-theme",value:Ee,children:Qe,nonce:yt,scriptProps:Rt})=>{let[Et,rr]=y.useState(()=>Y(lt,bt)),[an,Hr]=y.useState(()=>Y(lt)),gn=Ee?Object.values(Ee):et,Or=y.useCallback(rn=>{let on=rn;if(!on)return;rn==="system"&&gt&&(on=fe());let cn=Ee?Ee[on]:on,On=Ve?ee(yt):null,Pt=document.documentElement,_n=si=>{si==="class"?(Pt.classList.remove(...gn),cn&&Pt.classList.add(cn)):si.startsWith("data-")&&(cn?Pt.setAttribute(si,cn):Pt.removeAttribute(si))};if(Array.isArray(Ct)?Ct.forEach(_n):_n(Ct),mt){let si=k.includes(bt)?bt:null,zi=k.includes(on)?on:si;Pt.style.colorScheme=zi}On?.()},[yt]),wn=y.useCallback(rn=>{let on=typeof rn=="function"?rn(Et):rn;rr(on);try{localStorage.setItem(lt,on)}catch{}},[Et]),Tn=y.useCallback(rn=>{Hr(fe(rn)),Et==="system"&&gt&&!ve&&Or("system")},[Et,ve]);y.useEffect(()=>{let rn=window.matchMedia(I);return rn.addListener(Tn),Tn(rn),()=>rn.removeListener(Tn)},[Tn]),y.useEffect(()=>{let rn=on=>{on.key===lt&&(on.newValue?rr(on.newValue):wn(bt))};return window.addEventListener("storage",rn),()=>window.removeEventListener("storage",rn)},[wn]),y.useEffect(()=>{Or(ve??Et)},[ve,Et]);let tn=y.useMemo(()=>({theme:Et,setTheme:wn,forcedTheme:ve,resolvedTheme:Et==="system"?an:Et,themes:gt?[...et,"system"]:et,systemTheme:gt?an:void 0}),[Et,wn,ve,an,gt,et]);return y.createElement(x.Provider,{value:tn},y.createElement(K,{forcedTheme:ve,storageKey:lt,attribute:Ct,enableSystem:gt,enableColorScheme:mt,defaultTheme:bt,value:Ee,themes:et,nonce:yt,scriptProps:Rt}),Qe)},K=y.memo(({forcedTheme:ve,storageKey:Ve,attribute:gt,enableSystem:mt,enableColorScheme:lt,defaultTheme:et,value:bt,themes:Ct,nonce:Ee,scriptProps:Qe})=>{let yt=JSON.stringify([gt,Ve,et,ve,Ct,bt,mt,lt]).slice(1,-1);return y.createElement("script",{...Qe,suppressHydrationWarning:!0,nonce:Ee,dangerouslySetInnerHTML:{__html:`(${S.toString()})(${yt})`}})}),Y=(ve,Ve)=>{},ee=ve=>{let Ve=document.createElement("style");return ve&&Ve.setAttribute("nonce",ve),Ve.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(Ve),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(Ve)},1)}},fe=ve=>(ve||(ve=window.matchMedia(I)),ve.matches?"dark":"light"),Se=M(1845),ze=M(8783);function Ue(){let{toasts:ve}=(0,Se.pm)();return(0,j.jsxs)(ze.VW,{children:[ve.map(function({id:Ve,title:gt,description:mt,action:lt,...et}){return(0,j.jsxs)(ze.FN,{...et,children:[(0,j.jsxs)("div",{className:"grid gap-1",children:[gt&&(0,j.jsx)(ze.Mi,{children:gt}),mt&&(0,j.jsx)(ze.lj,{children:mt})]}),lt,(0,j.jsx)(ze.sA,{})]},Ve)}),(0,j.jsx)(ze._i,{})]})}(function(ve){ve.INITIAL="initial",ve.PENDING="pending",ve.REJECTED="rejected",ve.RESOLVED="resolved"})(q||(q={})),function(ve){ve.LOADING_STATUS="setLoadingStatus",ve.RESET_OPTIONS="resetOptions",ve.SET_BRAINTREE_INSTANCE="braintreeInstance"}(Z||(Z={})),function(ve){ve.NUMBER="number",ve.CVV="cvv",ve.EXPIRATION_DATE="expirationDate",ve.EXPIRATION_MONTH="expirationMonth",ve.EXPIRATION_YEAR="expirationYear",ve.POSTAL_CODE="postalCode"}(W||(W={}));var at=function(){return(at=Object.assign||function(ve){for(var Ve,gt=1,mt=arguments.length;gt<mt;gt++)for(var lt in Ve=arguments[gt])Object.prototype.hasOwnProperty.call(Ve,lt)&&(ve[lt]=Ve[lt]);return ve}).apply(this,arguments)};function vt(ve,Ve){var gt={};for(var mt in ve)Object.prototype.hasOwnProperty.call(ve,mt)&&0>Ve.indexOf(mt)&&(gt[mt]=ve[mt]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,mt=Object.getOwnPropertySymbols(ve);lt<mt.length;lt++)0>Ve.indexOf(mt[lt])&&Object.prototype.propertyIsEnumerable.call(ve,mt[lt])&&(gt[mt[lt]]=ve[mt[lt]]);return gt}function jt(ve,Ve,gt){if(gt||arguments.length==2)for(var mt,lt=0,et=Ve.length;lt<et;lt++)!mt&&lt in Ve||(mt||(mt=Array.prototype.slice.call(Ve,0,lt)),mt[lt]=Ve[lt]);return ve.concat(mt||Array.prototype.slice.call(Ve))}typeof SuppressedError=="function"&&SuppressedError;var re="data-react-paypal-script-id",F={DATA_CLIENT_TOKEN:"dataClientToken",DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource",DATA_USER_ID_TOKEN:"dataUserIdToken"},Q="paypal";function se(ve){return ve===void 0&&(ve=Q),window[ve]}function me(ve){var Ve=ve.reactComponentName,gt=ve.sdkComponentKey,mt=ve.sdkRequestedComponents,lt=mt===void 0?"":mt,et=ve.sdkDataNamespace,bt=gt.charAt(0).toUpperCase().concat(gt.substring(1)),Ct="Unable to render <".concat(Ve," /> because window.").concat(et===void 0?Q:et,".").concat(bt," is undefined."),Ee=typeof lt=="string"?lt:lt.join(",");if(!Ee.includes(gt)){var Qe=[Ee,gt].filter(Boolean).join();Ct+=`
To fix the issue, add '`.concat(gt,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(Qe,"'}}>`.")}return Ct}function ce(ve){ve[re];var Ve=vt(ve,[re+""]);return"react-paypal-js-".concat(function(gt){for(var mt="",lt=0;lt<gt.length;lt++){var et=gt[lt].charCodeAt(0)*lt;gt[lt+1]&&(et+=gt[lt+1].charCodeAt(0)*(lt-1)),mt+=String.fromCharCode(97+Math.abs(et)%26)}return mt}(JSON.stringify(Ve)))}function Ke(ve,Ve){var gt,mt,lt,et;switch(Ve.type){case Z.LOADING_STATUS:return typeof Ve.value=="object"?at(at({},ve),{loadingStatus:Ve.value.state,loadingStatusErrorMessage:Ve.value.message}):at(at({},ve),{loadingStatus:Ve.value});case Z.RESET_OPTIONS:return lt=ve.options[re],(et=zr.document.querySelector("script[".concat(re,'="').concat(lt,'"]')))!=null&&et.parentNode&&et.parentNode.removeChild(et),at(at({},ve),{loadingStatus:q.PENDING,options:at(at(((gt={})[F.DATA_SDK_INTEGRATION_SOURCE]=F.DATA_LIBRARY_VALUE,gt),Ve.value),((mt={})[re]="".concat(ce(Ve.value)),mt))});case Z.SET_BRAINTREE_INSTANCE:return at(at({},ve),{braintreePayPalCheckoutInstance:Ve.value});default:return ve}}var Je=(0,y.createContext)(null);function He(){var ve=function(Ve){if(typeof Ve?.dispatch=="function"&&Ve.dispatch.length!==0)return Ve;throw Error("usePayPalScriptReducer must be used within a PayPalScriptProvider")}((0,y.useContext)(Je));return[at(at({},ve),{isInitial:ve.loadingStatus===q.INITIAL,isPending:ve.loadingStatus===q.PENDING,isResolved:ve.loadingStatus===q.RESOLVED,isRejected:ve.loadingStatus===q.REJECTED}),ve.dispatch]}(0,y.createContext)({});var _e=function(ve){var Ve,gt=ve.className,mt=ve.disabled,lt=mt!==void 0&&mt,et=ve.children,bt=ve.forceReRender,Ct=vt(ve,["className","disabled","children","forceReRender"]),Ee="".concat(gt===void 0?"":gt," ").concat(lt?"paypal-buttons-disabled":"").trim(),Qe=(0,y.useRef)(null),yt=(0,y.useRef)(null),Rt=He()[0],Et=Rt.isResolved,rr=Rt.options,an=(0,y.useState)(null),Hr=an[0],gn=an[1],Or=(0,y.useState)(!0),wn=Or[0],Tn=Or[1],tn=(0,y.useState)(null)[1];function rn(){yt.current!==null&&yt.current.close().catch(function(){})}return!((Ve=yt.current)===null||Ve===void 0)&&Ve.updateProps&&yt.current.updateProps({message:Ct.message}),(0,y.useEffect)(function(){if(Et===!1)return rn;var on=se(rr.dataNamespace);if(on===void 0||on.Buttons===void 0)return tn(function(){throw Error(me({reactComponentName:_e.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:rr.components,sdkDataNamespace:rr[F.DATA_NAMESPACE]}))}),rn;try{yt.current=on.Buttons(at(at({},Ct),{onInit:function(cn,On){gn(On),typeof Ct.onInit=="function"&&Ct.onInit(cn,On)}}))}catch(cn){return tn(function(){throw Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(cn))})}return yt.current.isEligible()===!1?Tn(!1):Qe.current&&yt.current.render(Qe.current).catch(function(cn){Qe.current!==null&&Qe.current.children.length!==0&&tn(function(){throw Error("Failed to render <PayPalButtons /> component. ".concat(cn))})}),rn},jt(jt([Et],bt===void 0?[]:bt,!0),[Ct.fundingSource],!1)),(0,y.useEffect)(function(){Hr!==null&&(lt===!0?Hr.disable().catch(function(){}):Hr.enable().catch(function(){}))},[lt,Hr]),y.createElement(y.Fragment,null,wn?y.createElement("div",{ref:Qe,style:lt?{opacity:.38}:{},className:Ee}):et)};function Fe(ve,Ve){Ve===void 0&&(Ve={});var gt=document.createElement("script");return gt.src=ve,Object.keys(Ve).forEach(function(mt){gt.setAttribute(mt,Ve[mt]),mt==="data-csp-nonce"&&gt.setAttribute("nonce",Ve["data-csp-nonce"])}),gt}function pt(ve,Ve){if(typeof ve!="object"||ve===null)throw Error("Expected an options object.");var gt=ve.environment;if(gt&&gt!=="production"&&gt!=="sandbox")throw Error('The `environment` option must be either "production" or "sandbox".');if(Ve!==void 0&&typeof Ve!="function")throw Error("Expected PromisePonyfill to be a function.")}_e.displayName="PayPalButtons";var lr=function(ve){var Ve=ve.className,gt=ve.children,mt=vt(ve,["className","children"]),lt=He()[0],et=lt.isResolved,bt=lt.options,Ct=(0,y.useRef)(null),Ee=(0,y.useState)(!0),Qe=Ee[0],yt=Ee[1],Rt=(0,y.useState)(null)[1],Et=function(rr){var an=Ct.current;if(!an||!rr.isEligible())return yt(!1);an.firstChild&&an.removeChild(an.firstChild),rr.render(an).catch(function(Hr){an!==null&&an.children.length!==0&&Rt(function(){throw Error("Failed to render <PayPalMarks /> component. ".concat(Hr))})})};return(0,y.useEffect)(function(){if(et!==!1){var rr=se(bt[F.DATA_NAMESPACE]);if(rr===void 0||rr.Marks===void 0)return Rt(function(){throw Error(me({reactComponentName:lr.displayName,sdkComponentKey:"marks",sdkRequestedComponents:bt.components,sdkDataNamespace:bt[F.DATA_NAMESPACE]}))});Et(rr.Marks(at({},mt)))}},[et,mt.fundingSource]),y.createElement(y.Fragment,null,Qe?y.createElement("div",{ref:Ct,className:Ve===void 0?"":Ve}):gt)};lr.displayName="PayPalMarks";var Ne=function(ve){var Ve=ve.className,gt=ve.forceReRender,mt=vt(ve,["className","forceReRender"]),lt=He()[0],et=lt.isResolved,bt=lt.options,Ct=(0,y.useRef)(null),Ee=(0,y.useRef)(null),Qe=(0,y.useState)(null)[1];return(0,y.useEffect)(function(){if(et!==!1){var yt=se(bt[F.DATA_NAMESPACE]);if(yt===void 0||yt.Messages===void 0)return Qe(function(){throw Error(me({reactComponentName:Ne.displayName,sdkComponentKey:"messages",sdkRequestedComponents:bt.components,sdkDataNamespace:bt[F.DATA_NAMESPACE]}))});Ee.current=yt.Messages(at({},mt)),Ee.current.render(Ct.current).catch(function(Rt){Ct.current!==null&&Ct.current.children.length!==0&&Qe(function(){throw Error("Failed to render <PayPalMessages /> component. ".concat(Rt))})})}},jt([et],gt===void 0?[]:gt,!0)),y.createElement("div",{ref:Ct,className:Ve===void 0?"":Ve})};Ne.displayName="PayPalMessages";var tt=function(ve){var Ve,gt=ve.options,mt=gt===void 0?{clientId:"test"}:gt,lt=ve.children,et=ve.deferLoading,bt=et!==void 0&&et,Ct=(0,y.useReducer)(Ke,{options:at(at({},mt),((Ve={})[F.DATA_JS_SDK_LIBRARY]=F.DATA_LIBRARY_VALUE,Ve[F.DATA_SDK_INTEGRATION_SOURCE]=F.DATA_LIBRARY_VALUE,Ve[re]="".concat(ce(mt)),Ve)),loadingStatus:bt?q.INITIAL:q.PENDING}),Ee=Ct[0],Qe=Ct[1];return(0,y.useEffect)(function(){if(bt===!1&&Ee.loadingStatus===q.INITIAL)return Qe({type:Z.LOADING_STATUS,value:q.PENDING});if(Ee.loadingStatus===q.PENDING){var yt=!0;return function(Rt,Et){if(Et===void 0&&(Et=Promise),pt(Rt,Et),typeof document>"u")return Et.resolve(null);var rr,an,Hr,gn,Or,wn=(an=Rt.environment==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js",delete Rt.environment,Rt.sdkBaseUrl&&(an=Rt.sdkBaseUrl,delete Rt.sdkBaseUrl),gn=(Hr=Object.keys(Rt).filter(function(cn){return Rt[cn]!==void 0&&Rt[cn]!==null&&Rt[cn]!==""}).reduce(function(cn,On){var Pt=Rt[On].toString();return(On=On.replace(/[A-Z]+(?![a-z])|[A-Z]/g,function(_n,si){return(si?"-":"")+_n.toLowerCase()})).substring(0,4)==="data"||On==="crossorigin"?cn.attributes[On]=Pt:cn.queryParams[On]=Pt,cn},{queryParams:{},attributes:{}})).queryParams,Or=Hr.attributes,gn["merchant-id"]&&gn["merchant-id"].indexOf(",")!==-1&&(Or["data-merchant-id"]=gn["merchant-id"],gn["merchant-id"]="*"),{url:"".concat(an,"?").concat((rr="",Object.keys(gn).forEach(function(cn){rr.length!==0&&(rr+="&"),rr+=cn+"="+gn[cn]}),rr)),attributes:Or}),Tn=wn.url,tn=wn.attributes,rn=tn["data-namespace"]||"paypal",on=window[rn];return tn["data-js-sdk-library"]||(tn["data-js-sdk-library"]="paypal-js"),function(cn,On){var Pt=document.querySelector('script[src="'.concat(cn,'"]'));if(Pt===null)return null;var _n=Fe(cn,On),si=Pt.cloneNode();if(delete si.dataset.uidAuto,Object.keys(si.dataset).length!==Object.keys(_n.dataset).length)return null;var zi=!0;return Object.keys(si.dataset).forEach(function(Hs){si.dataset[Hs]!==_n.dataset[Hs]&&(zi=!1)}),zi?Pt:null}(Tn,tn)&&on?Et.resolve(on):function(cn,On){On===void 0&&(On=Promise),pt(cn,On);var Pt=cn.url,_n=cn.attributes;if(typeof Pt!="string"||Pt.length===0)throw Error("Invalid url.");if(_n!==void 0&&typeof _n!="object")throw Error("Expected attributes to be an object.");return new On(function(si,zi){var Hs,es,Ri,kn,st,Ht;if(typeof document>"u")return si();es=(Hs={url:Pt,attributes:_n,onSuccess:function(){return si()},onError:function(){return zi(Error('The script "'.concat(Pt,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.')))}}).url,Ri=Hs.attributes,kn=Hs.onSuccess,st=Hs.onError,(Ht=Fe(es,Ri)).onerror=st,Ht.onload=kn,document.head.insertBefore(Ht,document.head.firstElementChild)})}({url:Tn,attributes:tn},Et).then(function(){var cn=window[rn];if(cn)return cn;throw Error("The window.".concat(rn," global variable is not available."))})}(Ee.options).then(function(){yt&&Qe({type:Z.LOADING_STATUS,value:q.RESOLVED})}).catch(function(Rt){console.error("".concat("Failed to load the PayPal JS SDK script."," ").concat(Rt)),yt&&Qe({type:Z.LOADING_STATUS,value:{state:q.REJECTED,message:String(Rt)}})}),function(){yt=!1}}},[Ee.options,bt,Ee.loadingStatus]),y.createElement(Je.Provider,{value:at(at({},Ee),{dispatch:Qe})},lt)};function we(){}(0,y.createContext)({cardFieldsForm:null,fields:{},registerField:we,unregisterField:we});var Ce={IDEAL:"ideal",BANCONTACT:"bancontact",GIROPAY:"giropay",SOFORT:"sofort",EPS:"eps",MYBANK:"mybank",P24:"p24",PAYU:"payu",BLIK:"blik",TRUSTLY:"trustly",OXXO:"oxxo",BOLETO:"boleto",BOLETOBANCARIO:"boletobancario",WECHATPAY:"wechatpay",MERCADOPAGO:"mercadopago",MULTIBANCO:"multibanco",SATISPAY:"satispay",PAIDY:"paidy",ZIMPLER:"zimpler",MAXIMA:"maxima"};Ce.IDEAL,Ce.BANCONTACT,Ce.GIROPAY,Ce.SOFORT,Ce.EPS,Ce.MYBANK,Ce.P24,Ce.PAYU,Ce.BLIK,Ce.TRUSTLY,Ce.OXXO,Ce.BOLETO,Ce.BOLETOBANCARIO,Ce.WECHATPAY,Ce.MERCADOPAGO,Ce.MULTIBANCO,Ce.SATISPAY,Ce.PAIDY,Ce.MAXIMA,Ce.ZIMPLER,M(5996),M(2307);let We=({children:ve})=>(0,j.jsxs)(z.zt,{children:[(0,j.jsx)(C,{attribute:"class",defaultTheme:"light",children:(0,j.jsx)(tt,{options:{clientId:"Ac2sIyIVDiJ65QyUxmd1So7bRMGkWlfyvQ5HpjTtFHNXjm3VA3G_0YbojhqXCscZCUlULqYpUE9JdEkE",vault:!0},children:ve})}),(0,j.jsx)(Ue,{})]})},8783:(Jt,ae,M)=>{"use strict";M.d(ae,{FN:()=>Et,gD:()=>rr,sA:()=>an,lj:()=>gn,VW:()=>Qe,Mi:()=>Hr,_i:()=>yt});var q=M(926),Z=M(9220),W=M(8066),j=M(8408),z=M(9677),y=M(3179),S=M(6769),k=M(1335),I=M(1338),x=M(27),C=M(2316),N=M(8466),U=M(8878),K=M(7730),Y=M(8110),ee="ToastProvider",[fe,Se,ze]=(0,y.B)("Toast"),[Ue,at]=(0,S.b)("Toast",[ze]),[vt,jt]=Ue(ee),re=Or=>{let{__scopeToast:wn,label:Tn="Notification",duration:tn=5e3,swipeDirection:rn="right",swipeThreshold:on=50,children:cn}=Or,[On,Pt]=Z.useState(null),[_n,si]=Z.useState(0),zi=Z.useRef(!1),Hs=Z.useRef(!1);return Tn.trim()||console.error(`Invalid prop \`label\` supplied to \`${ee}\`. Expected non-empty \`string\`.`),(0,q.jsx)(fe.Provider,{scope:wn,children:(0,q.jsx)(vt,{scope:wn,label:Tn,duration:tn,swipeDirection:rn,swipeThreshold:on,toastCount:_n,viewport:On,onViewportChange:Pt,onToastAdd:Z.useCallback(()=>si(es=>es+1),[]),onToastRemove:Z.useCallback(()=>si(es=>es-1),[]),isFocusedToastEscapeKeyDownRef:zi,isClosePausedRef:Hs,children:cn})})};re.displayName=ee;var F="ToastViewport",Q=["F8"],se="toast.viewportPause",me="toast.viewportResume",ce=Z.forwardRef((Or,wn)=>{let{__scopeToast:Tn,hotkey:tn=Q,label:rn="Notifications ({hotkey})",...on}=Or,cn=jt(F,Tn),On=Se(Tn),Pt=Z.useRef(null),_n=Z.useRef(null),si=Z.useRef(null),zi=Z.useRef(null),Hs=(0,z.e)(wn,zi,cn.onViewportChange),es=tn.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ri=cn.toastCount>0;Z.useEffect(()=>{let st=Ht=>{tn.length!==0&&tn.every(zt=>Ht[zt]||Ht.code===zt)&&zi.current?.focus()};return document.addEventListener("keydown",st),()=>document.removeEventListener("keydown",st)},[tn]),Z.useEffect(()=>{let st=Pt.current,Ht=zi.current;if(Ri&&st&&Ht){let zt=()=>{if(!cn.isClosePausedRef.current){let Kr=new CustomEvent(se);Ht.dispatchEvent(Kr),cn.isClosePausedRef.current=!0}},Yt=()=>{if(cn.isClosePausedRef.current){let Kr=new CustomEvent(me);Ht.dispatchEvent(Kr),cn.isClosePausedRef.current=!1}},tr=Kr=>{st.contains(Kr.relatedTarget)||Yt()},En=()=>{st.contains(document.activeElement)||Yt()};return st.addEventListener("focusin",zt),st.addEventListener("focusout",tr),st.addEventListener("pointermove",zt),st.addEventListener("pointerleave",En),window.addEventListener("blur",zt),window.addEventListener("focus",Yt),()=>{st.removeEventListener("focusin",zt),st.removeEventListener("focusout",tr),st.removeEventListener("pointermove",zt),st.removeEventListener("pointerleave",En),window.removeEventListener("blur",zt),window.removeEventListener("focus",Yt)}}},[Ri,cn.isClosePausedRef]);let kn=Z.useCallback(({tabbingDirection:st})=>{let Ht=On().map(zt=>{let Yt=zt.ref.current,tr=[Yt,...function(En){let Kr=[],li=document.createTreeWalker(En,NodeFilter.SHOW_ELEMENT,{acceptNode:pn=>{let In=pn.tagName==="INPUT"&&pn.type==="hidden";return pn.disabled||pn.hidden||In?NodeFilter.FILTER_SKIP:pn.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;li.nextNode();)Kr.push(li.currentNode);return Kr}(Yt)];return st==="forwards"?tr:tr.reverse()});return(st==="forwards"?Ht.reverse():Ht).flat()},[On]);return Z.useEffect(()=>{let st=zi.current;if(st){let Ht=zt=>{let Yt=zt.altKey||zt.ctrlKey||zt.metaKey;if(zt.key==="Tab"&&!Yt){let tr=document.activeElement,En=zt.shiftKey;if(zt.target===st&&En){_n.current?.focus();return}let Kr=kn({tabbingDirection:En?"backwards":"forwards"}),li=Kr.findIndex(pn=>pn===tr);et(Kr.slice(li+1))?zt.preventDefault():En?_n.current?.focus():si.current?.focus()}};return st.addEventListener("keydown",Ht),()=>st.removeEventListener("keydown",Ht)}},[On,kn]),(0,q.jsxs)(k.I0,{ref:Pt,role:"region","aria-label":rn.replace("{hotkey}",es),tabIndex:-1,style:{pointerEvents:Ri?void 0:"none"},children:[Ri&&(0,q.jsx)(Je,{ref:_n,onFocusFromOutsideViewport:()=>{et(kn({tabbingDirection:"forwards"}))}}),(0,q.jsx)(fe.Slot,{scope:Tn,children:(0,q.jsx)(C.WV.ol,{tabIndex:-1,...on,ref:Hs})}),Ri&&(0,q.jsx)(Je,{ref:si,onFocusFromOutsideViewport:()=>{et(kn({tabbingDirection:"backwards"}))}})]})});ce.displayName=F;var Ke="ToastFocusProxy",Je=Z.forwardRef((Or,wn)=>{let{__scopeToast:Tn,onFocusFromOutsideViewport:tn,...rn}=Or,on=jt(Ke,Tn);return(0,q.jsx)(Y.T,{"aria-hidden":!0,tabIndex:0,...rn,ref:wn,style:{position:"fixed"},onFocus:cn=>{let On=cn.relatedTarget;on.viewport?.contains(On)||tn()}})});Je.displayName=Ke;var He="Toast",_e=Z.forwardRef((Or,wn)=>{let{forceMount:Tn,open:tn,defaultOpen:rn,onOpenChange:on,...cn}=Or,[On=!0,Pt]=(0,U.T)({prop:tn,defaultProp:rn,onChange:on});return(0,q.jsx)(x.z,{present:Tn||On,children:(0,q.jsx)(lr,{open:On,...cn,ref:wn,onClose:()=>Pt(!1),onPause:(0,N.W)(Or.onPause),onResume:(0,N.W)(Or.onResume),onSwipeStart:(0,j.M)(Or.onSwipeStart,_n=>{_n.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:(0,j.M)(Or.onSwipeMove,_n=>{let{x:si,y:zi}=_n.detail.delta;_n.currentTarget.setAttribute("data-swipe","move"),_n.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${si}px`),_n.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${zi}px`)}),onSwipeCancel:(0,j.M)(Or.onSwipeCancel,_n=>{_n.currentTarget.setAttribute("data-swipe","cancel"),_n.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),_n.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),_n.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),_n.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:(0,j.M)(Or.onSwipeEnd,_n=>{let{x:si,y:zi}=_n.detail.delta;_n.currentTarget.setAttribute("data-swipe","end"),_n.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),_n.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),_n.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${si}px`),_n.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${zi}px`),Pt(!1)})})})});_e.displayName=He;var[Fe,pt]=Ue(He,{onClose(){}}),lr=Z.forwardRef((Or,wn)=>{let{__scopeToast:Tn,type:tn="foreground",duration:rn,open:on,onClose:cn,onEscapeKeyDown:On,onPause:Pt,onResume:_n,onSwipeStart:si,onSwipeMove:zi,onSwipeCancel:Hs,onSwipeEnd:es,...Ri}=Or,kn=jt(He,Tn),[st,Ht]=Z.useState(null),zt=(0,z.e)(wn,fi=>Ht(fi)),Yt=Z.useRef(null),tr=Z.useRef(null),En=rn||kn.duration,Kr=Z.useRef(0),li=Z.useRef(En),pn=Z.useRef(0),{onToastAdd:In,onToastRemove:qn}=kn,Ln=(0,N.W)(()=>{st?.contains(document.activeElement)&&kn.viewport?.focus(),cn()}),Ei=Z.useCallback(fi=>{fi&&fi!==1/0&&(window.clearTimeout(pn.current),Kr.current=new Date().getTime(),pn.current=window.setTimeout(Ln,fi))},[Ln]);Z.useEffect(()=>{let fi=kn.viewport;if(fi){let Us=()=>{Ei(li.current),_n?.()},ds=()=>{let ui=new Date().getTime()-Kr.current;li.current=li.current-ui,window.clearTimeout(pn.current),Pt?.()};return fi.addEventListener(se,ds),fi.addEventListener(me,Us),()=>{fi.removeEventListener(se,ds),fi.removeEventListener(me,Us)}}},[kn.viewport,En,Pt,_n,Ei]),Z.useEffect(()=>{on&&!kn.isClosePausedRef.current&&Ei(En)},[on,En,kn.isClosePausedRef,Ei]),Z.useEffect(()=>(In(),()=>qn()),[In,qn]);let Ha=Z.useMemo(()=>st?function fi(Us){let ds=[];return Array.from(Us.childNodes).forEach(ui=>{if(ui.nodeType===ui.TEXT_NODE&&ui.textContent&&ds.push(ui.textContent),ui.nodeType===ui.ELEMENT_NODE){let Ki=ui.ariaHidden||ui.hidden||ui.style.display==="none",$s=ui.dataset.radixToastAnnounceExclude==="";if(!Ki)if($s){let Is=ui.dataset.radixToastAnnounceAlt;Is&&ds.push(Is)}else ds.push(...fi(ui))}}),ds}(st):null,[st]);return kn.viewport?(0,q.jsxs)(q.Fragment,{children:[Ha&&(0,q.jsx)(Ne,{__scopeToast:Tn,role:"status","aria-live":tn==="foreground"?"assertive":"polite","aria-atomic":!0,children:Ha}),(0,q.jsx)(Fe,{scope:Tn,onClose:Ln,children:W.createPortal((0,q.jsx)(fe.ItemSlot,{scope:Tn,children:(0,q.jsx)(k.fC,{asChild:!0,onEscapeKeyDown:(0,j.M)(On,()=>{kn.isFocusedToastEscapeKeyDownRef.current||Ln(),kn.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,q.jsx)(C.WV.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":on?"open":"closed","data-swipe-direction":kn.swipeDirection,...Ri,ref:zt,style:{userSelect:"none",touchAction:"none",...Or.style},onKeyDown:(0,j.M)(Or.onKeyDown,fi=>{fi.key!=="Escape"||(On?.(fi.nativeEvent),fi.nativeEvent.defaultPrevented||(kn.isFocusedToastEscapeKeyDownRef.current=!0,Ln()))}),onPointerDown:(0,j.M)(Or.onPointerDown,fi=>{fi.button===0&&(Yt.current={x:fi.clientX,y:fi.clientY})}),onPointerMove:(0,j.M)(Or.onPointerMove,fi=>{if(!Yt.current)return;let Us=fi.clientX-Yt.current.x,ds=fi.clientY-Yt.current.y,ui=!!tr.current,Ki=["left","right"].includes(kn.swipeDirection),$s=["left","up"].includes(kn.swipeDirection)?Math.min:Math.max,Is=Ki?$s(0,Us):0,wa=Ki?0:$s(0,ds),ua=fi.pointerType==="touch"?10:2,ea={x:Is,y:wa},Gi={originalEvent:fi,delta:ea};ui?(tr.current=ea,mt("toast.swipeMove",zi,Gi,{discrete:!1})):lt(ea,kn.swipeDirection,ua)?(tr.current=ea,mt("toast.swipeStart",si,Gi,{discrete:!1}),fi.target.setPointerCapture(fi.pointerId)):(Math.abs(Us)>ua||Math.abs(ds)>ua)&&(Yt.current=null)}),onPointerUp:(0,j.M)(Or.onPointerUp,fi=>{let Us=tr.current,ds=fi.target;if(ds.hasPointerCapture(fi.pointerId)&&ds.releasePointerCapture(fi.pointerId),tr.current=null,Yt.current=null,Us){let ui=fi.currentTarget,Ki={originalEvent:fi,delta:Us};lt(Us,kn.swipeDirection,kn.swipeThreshold)?mt("toast.swipeEnd",es,Ki,{discrete:!0}):mt("toast.swipeCancel",Hs,Ki,{discrete:!0}),ui.addEventListener("click",$s=>$s.preventDefault(),{once:!0})}})})})}),kn.viewport)})]}):null}),Ne=Or=>{let{__scopeToast:wn,children:Tn,...tn}=Or,rn=jt(He,wn),[on,cn]=Z.useState(!1),[On,Pt]=Z.useState(!1);return function(_n=()=>{}){let si=(0,N.W)(_n);(0,K.b)(()=>{let zi=0,Hs=0;return zi=window.requestAnimationFrame(()=>Hs=window.requestAnimationFrame(si)),()=>{window.cancelAnimationFrame(zi),window.cancelAnimationFrame(Hs)}},[si])}(()=>cn(!0)),Z.useEffect(()=>{let _n=window.setTimeout(()=>Pt(!0),1e3);return()=>window.clearTimeout(_n)},[]),On?null:(0,q.jsx)(I.h,{asChild:!0,children:(0,q.jsx)(Y.T,{...tn,children:on&&(0,q.jsxs)(q.Fragment,{children:[rn.label," ",Tn]})})})},tt=Z.forwardRef((Or,wn)=>{let{__scopeToast:Tn,...tn}=Or;return(0,q.jsx)(C.WV.div,{...tn,ref:wn})});tt.displayName="ToastTitle";var we=Z.forwardRef((Or,wn)=>{let{__scopeToast:Tn,...tn}=Or;return(0,q.jsx)(C.WV.div,{...tn,ref:wn})});we.displayName="ToastDescription";var Ce="ToastAction",We=Z.forwardRef((Or,wn)=>{let{altText:Tn,...tn}=Or;return Tn.trim()?(0,q.jsx)(gt,{altText:Tn,asChild:!0,children:(0,q.jsx)(Ve,{...tn,ref:wn})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ce}\`. Expected non-empty \`string\`.`),null)});We.displayName=Ce;var ve="ToastClose",Ve=Z.forwardRef((Or,wn)=>{let{__scopeToast:Tn,...tn}=Or,rn=pt(ve,Tn);return(0,q.jsx)(gt,{asChild:!0,children:(0,q.jsx)(C.WV.button,{type:"button",...tn,ref:wn,onClick:(0,j.M)(Or.onClick,rn.onClose)})})});Ve.displayName=ve;var gt=Z.forwardRef((Or,wn)=>{let{__scopeToast:Tn,altText:tn,...rn}=Or;return(0,q.jsx)(C.WV.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":tn||void 0,...rn,ref:wn})});function mt(Or,wn,Tn,{discrete:tn}){let rn=Tn.originalEvent.currentTarget,on=new CustomEvent(Or,{bubbles:!0,cancelable:!0,detail:Tn});wn&&rn.addEventListener(Or,wn,{once:!0}),tn?(0,C.jH)(rn,on):rn.dispatchEvent(on)}var lt=(Or,wn,Tn=0)=>{let tn=Math.abs(Or.x),rn=Math.abs(Or.y),on=tn>rn;return wn==="left"||wn==="right"?on&&tn>Tn:!on&&rn>Tn};function et(Or){let wn=document.activeElement;return Or.some(Tn=>Tn===wn||(Tn.focus(),document.activeElement!==wn))}var bt=M(8206),Ct=M(5506),Ee=M(18);let Qe=re,yt=Z.forwardRef(({className:Or,...wn},Tn)=>(0,q.jsx)(ce,{ref:Tn,className:(0,Ee.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 font-base sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",Or),...wn}));yt.displayName=ce.displayName;let Rt=(0,bt.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-base border-2 border-border dark:border-darkBorder shadow-light dark:shadow-dark p-6 pr-8 transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"bg-main text-black",destructive:"bg-black text-white"}},defaultVariants:{variant:"default"}}),Et=Z.forwardRef(({className:Or,variant:wn,...Tn},tn)=>(0,q.jsx)(_e,{ref:tn,className:(0,Ee.cn)(Rt({variant:wn}),Or),...Tn}));Et.displayName=_e.displayName;let rr=Z.forwardRef(({className:Or,...wn},Tn)=>(0,q.jsx)(We,{ref:Tn,className:(0,Ee.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-base border-2 border-border bg-white px-3 text-sm font-base text-black ring-offset-white transition-colors disabled:pointer-events-none disabled:opacity-50 dark:border-darkBorder",Or),...wn}));rr.displayName=We.displayName;let an=Z.forwardRef(({className:Or,...wn},Tn)=>(0,q.jsx)(Ve,{ref:Tn,className:(0,Ee.cn)("absolute right-2 top-2 rounded-md p-1 text-black text-inherit opacity-0 transition-opacity group-hover:opacity-100",Or),"toast-close":"",...wn,children:(0,q.jsx)(Ct.Z,{className:"h-4 w-4"})}));an.displayName=Ve.displayName;let Hr=Z.forwardRef(({className:Or,...wn},Tn)=>(0,q.jsx)(tt,{ref:Tn,className:(0,Ee.cn)("text-sm font-heading",Or),...wn}));Hr.displayName=tt.displayName;let gn=Z.forwardRef(({className:Or,...wn},Tn)=>(0,q.jsx)(we,{ref:Tn,className:(0,Ee.cn)("text-sm font-base",Or),...wn}));gn.displayName=we.displayName},1845:(Jt,ae,M)=>{"use strict";M.d(ae,{Am:()=>I,pm:()=>x});var q=M(9220);let Z=0,W=new Map,j=C=>{if(W.has(C))return;let N=setTimeout(()=>{W.delete(C),k({type:"REMOVE_TOAST",toastId:C})},1e6);W.set(C,N)},z=(C,N)=>{switch(N.type){case"ADD_TOAST":return{...C,toasts:[N.toast,...C.toasts].slice(0,1)};case"UPDATE_TOAST":return{...C,toasts:C.toasts.map(U=>U.id===N.toast.id?{...U,...N.toast}:U)};case"DISMISS_TOAST":{let{toastId:U}=N;return U?j(U):C.toasts.forEach(K=>{j(K.id)}),{...C,toasts:C.toasts.map(K=>K.id===U||U===void 0?{...K,open:!1}:K)}}case"REMOVE_TOAST":return N.toastId===void 0?{...C,toasts:[]}:{...C,toasts:C.toasts.filter(U=>U.id!==N.toastId)}}},y=[],S={toasts:[]};function k(C){S=z(S,C),y.forEach(N=>{N(S)})}function I({...C}){let N=(Z=(Z+1)%Number.MAX_SAFE_INTEGER).toString(),U=()=>k({type:"DISMISS_TOAST",toastId:N});return k({type:"ADD_TOAST",toast:{...C,id:N,open:!0,onOpenChange:K=>{K||U()}}}),{id:N,dismiss:U,update:K=>k({type:"UPDATE_TOAST",toast:{...K,id:N}})}}function x(){let[C,N]=q.useState(S);return q.useEffect(()=>(y.push(N),()=>{let U=y.indexOf(N);U>-1&&y.splice(U,1)}),[C]),{...C,toast:I,dismiss:U=>k({type:"DISMISS_TOAST",toastId:U})}}},18:(Jt,ae,M)=>{"use strict";M.d(ae,{cn:()=>Ct});var q=M(5116);let Z=Ee=>{let Qe=y(Ee),{conflictingClassGroups:yt,conflictingClassGroupModifiers:Rt}=Ee;return{getClassGroupId:Et=>{let rr=Et.split("-");return rr[0]===""&&rr.length!==1&&rr.shift(),W(rr,Qe)||z(Et)},getConflictingClassGroupIds:(Et,rr)=>{let an=yt[Et]||[];return rr&&Rt[Et]?[...an,...Rt[Et]]:an}}},W=(Ee,Qe)=>{if(Ee.length===0)return Qe.classGroupId;let yt=Ee[0],Rt=Qe.nextPart.get(yt),Et=Rt?W(Ee.slice(1),Rt):void 0;if(Et)return Et;if(Qe.validators.length===0)return;let rr=Ee.join("-");return Qe.validators.find(({validator:an})=>an(rr))?.classGroupId},j=/^\[(.+)\]$/,z=Ee=>{if(j.test(Ee)){let Qe=j.exec(Ee)[1],yt=Qe?.substring(0,Qe.indexOf(":"));if(yt)return"arbitrary.."+yt}},y=Ee=>{let{theme:Qe,prefix:yt}=Ee,Rt={nextPart:new Map,validators:[]};return x(Object.entries(Ee.classGroups),yt).forEach(([Et,rr])=>{S(rr,Rt,Et,Qe)}),Rt},S=(Ee,Qe,yt,Rt)=>{Ee.forEach(Et=>{if(typeof Et=="string"){(Et===""?Qe:k(Qe,Et)).classGroupId=yt;return}if(typeof Et=="function"){if(I(Et)){S(Et(Rt),Qe,yt,Rt);return}Qe.validators.push({validator:Et,classGroupId:yt});return}Object.entries(Et).forEach(([rr,an])=>{S(an,k(Qe,rr),yt,Rt)})})},k=(Ee,Qe)=>{let yt=Ee;return Qe.split("-").forEach(Rt=>{yt.nextPart.has(Rt)||yt.nextPart.set(Rt,{nextPart:new Map,validators:[]}),yt=yt.nextPart.get(Rt)}),yt},I=Ee=>Ee.isThemeGetter,x=(Ee,Qe)=>Qe?Ee.map(([yt,Rt])=>[yt,Rt.map(Et=>typeof Et=="string"?Qe+Et:typeof Et=="object"?Object.fromEntries(Object.entries(Et).map(([rr,an])=>[Qe+rr,an])):Et)]):Ee,C=Ee=>{if(Ee<1)return{get:()=>{},set:()=>{}};let Qe=0,yt=new Map,Rt=new Map,Et=(rr,an)=>{yt.set(rr,an),++Qe>Ee&&(Qe=0,Rt=yt,yt=new Map)};return{get(rr){let an=yt.get(rr);return an!==void 0?an:(an=Rt.get(rr))!==void 0?(Et(rr,an),an):void 0},set(rr,an){yt.has(rr)?yt.set(rr,an):Et(rr,an)}}},N=Ee=>{let{separator:Qe,experimentalParseClassName:yt}=Ee,Rt=Qe.length===1,Et=Qe[0],rr=Qe.length,an=Hr=>{let gn,Or=[],wn=0,Tn=0;for(let cn=0;cn<Hr.length;cn++){let On=Hr[cn];if(wn===0){if(On===Et&&(Rt||Hr.slice(cn,cn+rr)===Qe)){Or.push(Hr.slice(Tn,cn)),Tn=cn+rr;continue}if(On==="/"){gn=cn;continue}}On==="["?wn++:On==="]"&&wn--}let tn=Or.length===0?Hr:Hr.substring(Tn),rn=tn.startsWith("!"),on=rn?tn.substring(1):tn;return{modifiers:Or,hasImportantModifier:rn,baseClassName:on,maybePostfixModifierPosition:gn&&gn>Tn?gn-Tn:void 0}};return yt?Hr=>yt({className:Hr,parseClassName:an}):an},U=Ee=>{if(Ee.length<=1)return Ee;let Qe=[],yt=[];return Ee.forEach(Rt=>{Rt[0]==="["?(Qe.push(...yt.sort(),Rt),yt=[]):yt.push(Rt)}),Qe.push(...yt.sort()),Qe},K=Ee=>({cache:C(Ee.cacheSize),parseClassName:N(Ee),...Z(Ee)}),Y=/\s+/,ee=(Ee,Qe)=>{let{parseClassName:yt,getClassGroupId:Rt,getConflictingClassGroupIds:Et}=Qe,rr=[],an=Ee.trim().split(Y),Hr="";for(let gn=an.length-1;gn>=0;gn-=1){let Or=an[gn],{modifiers:wn,hasImportantModifier:Tn,baseClassName:tn,maybePostfixModifierPosition:rn}=yt(Or),on=!!rn,cn=Rt(on?tn.substring(0,rn):tn);if(!cn){if(!on||!(cn=Rt(tn))){Hr=Or+(Hr.length>0?" "+Hr:Hr);continue}on=!1}let On=U(wn).join(":"),Pt=Tn?On+"!":On,_n=Pt+cn;if(rr.includes(_n))continue;rr.push(_n);let si=Et(cn,on);for(let zi=0;zi<si.length;++zi){let Hs=si[zi];rr.push(Pt+Hs)}Hr=Or+(Hr.length>0?" "+Hr:Hr)}return Hr};function fe(){let Ee,Qe,yt=0,Rt="";for(;yt<arguments.length;)(Ee=arguments[yt++])&&(Qe=Se(Ee))&&(Rt&&(Rt+=" "),Rt+=Qe);return Rt}let Se=Ee=>{let Qe;if(typeof Ee=="string")return Ee;let yt="";for(let Rt=0;Rt<Ee.length;Rt++)Ee[Rt]&&(Qe=Se(Ee[Rt]))&&(yt&&(yt+=" "),yt+=Qe);return yt},ze=Ee=>{let Qe=yt=>yt[Ee]||[];return Qe.isThemeGetter=!0,Qe},Ue=/^\[(?:([a-z-]+):)?(.+)\]$/i,at=/^\d+\/\d+$/,vt=new Set(["px","full","screen"]),jt=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,re=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,F=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Q=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,se=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,me=Ee=>Ke(Ee)||vt.has(Ee)||at.test(Ee),ce=Ee=>Ve(Ee,"length",gt),Ke=Ee=>!!Ee&&!Number.isNaN(Number(Ee)),Je=Ee=>Ve(Ee,"number",Ke),He=Ee=>!!Ee&&Number.isInteger(Number(Ee)),_e=Ee=>Ee.endsWith("%")&&Ke(Ee.slice(0,-1)),Fe=Ee=>Ue.test(Ee),pt=Ee=>jt.test(Ee),lr=new Set(["length","size","percentage"]),Ne=Ee=>Ve(Ee,lr,mt),tt=Ee=>Ve(Ee,"position",mt),we=new Set(["image","url"]),Ce=Ee=>Ve(Ee,we,et),We=Ee=>Ve(Ee,"",lt),ve=()=>!0,Ve=(Ee,Qe,yt)=>{let Rt=Ue.exec(Ee);return!!Rt&&(Rt[1]?typeof Qe=="string"?Rt[1]===Qe:Qe.has(Rt[1]):yt(Rt[2]))},gt=Ee=>re.test(Ee)&&!F.test(Ee),mt=()=>!1,lt=Ee=>Q.test(Ee),et=Ee=>se.test(Ee),bt=function(Ee,...Qe){let yt,Rt,Et,rr=function(Hr){return Rt=(yt=K(Qe.reduce((gn,Or)=>Or(gn),Ee()))).cache.get,Et=yt.cache.set,rr=an,an(Hr)};function an(Hr){let gn=Rt(Hr);if(gn)return gn;let Or=ee(Hr,yt);return Et(Hr,Or),Or}return function(){return rr(fe.apply(null,arguments))}}(()=>{let Ee=ze("colors"),Qe=ze("spacing"),yt=ze("blur"),Rt=ze("brightness"),Et=ze("borderColor"),rr=ze("borderRadius"),an=ze("borderSpacing"),Hr=ze("borderWidth"),gn=ze("contrast"),Or=ze("grayscale"),wn=ze("hueRotate"),Tn=ze("invert"),tn=ze("gap"),rn=ze("gradientColorStops"),on=ze("gradientColorStopPositions"),cn=ze("inset"),On=ze("margin"),Pt=ze("opacity"),_n=ze("padding"),si=ze("saturate"),zi=ze("scale"),Hs=ze("sepia"),es=ze("skew"),Ri=ze("space"),kn=ze("translate"),st=()=>["auto","contain","none"],Ht=()=>["auto","hidden","clip","visible","scroll"],zt=()=>["auto",Fe,Qe],Yt=()=>[Fe,Qe],tr=()=>["",me,ce],En=()=>["auto",Ke,Fe],Kr=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],li=()=>["solid","dashed","dotted","double","none"],pn=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],In=()=>["start","end","center","between","around","evenly","stretch"],qn=()=>["","0",Fe],Ln=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ei=()=>[Ke,Fe];return{cacheSize:500,separator:":",theme:{colors:[ve],spacing:[me,ce],blur:["none","",pt,Fe],brightness:Ei(),borderColor:[Ee],borderRadius:["none","","full",pt,Fe],borderSpacing:Yt(),borderWidth:tr(),contrast:Ei(),grayscale:qn(),hueRotate:Ei(),invert:qn(),gap:Yt(),gradientColorStops:[Ee],gradientColorStopPositions:[_e,ce],inset:zt(),margin:zt(),opacity:Ei(),padding:Yt(),saturate:Ei(),scale:Ei(),sepia:qn(),skew:Ei(),space:Yt(),translate:Yt()},classGroups:{aspect:[{aspect:["auto","square","video",Fe]}],container:["container"],columns:[{columns:[pt]}],"break-after":[{"break-after":Ln()}],"break-before":[{"break-before":Ln()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Kr(),Fe]}],overflow:[{overflow:Ht()}],"overflow-x":[{"overflow-x":Ht()}],"overflow-y":[{"overflow-y":Ht()}],overscroll:[{overscroll:st()}],"overscroll-x":[{"overscroll-x":st()}],"overscroll-y":[{"overscroll-y":st()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[cn]}],"inset-x":[{"inset-x":[cn]}],"inset-y":[{"inset-y":[cn]}],start:[{start:[cn]}],end:[{end:[cn]}],top:[{top:[cn]}],right:[{right:[cn]}],bottom:[{bottom:[cn]}],left:[{left:[cn]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",He,Fe]}],basis:[{basis:zt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Fe]}],grow:[{grow:qn()}],shrink:[{shrink:qn()}],order:[{order:["first","last","none",He,Fe]}],"grid-cols":[{"grid-cols":[ve]}],"col-start-end":[{col:["auto",{span:["full",He,Fe]},Fe]}],"col-start":[{"col-start":En()}],"col-end":[{"col-end":En()}],"grid-rows":[{"grid-rows":[ve]}],"row-start-end":[{row:["auto",{span:[He,Fe]},Fe]}],"row-start":[{"row-start":En()}],"row-end":[{"row-end":En()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Fe]}],gap:[{gap:[tn]}],"gap-x":[{"gap-x":[tn]}],"gap-y":[{"gap-y":[tn]}],"justify-content":[{justify:["normal",...In()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...In(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...In(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_n]}],px:[{px:[_n]}],py:[{py:[_n]}],ps:[{ps:[_n]}],pe:[{pe:[_n]}],pt:[{pt:[_n]}],pr:[{pr:[_n]}],pb:[{pb:[_n]}],pl:[{pl:[_n]}],m:[{m:[On]}],mx:[{mx:[On]}],my:[{my:[On]}],ms:[{ms:[On]}],me:[{me:[On]}],mt:[{mt:[On]}],mr:[{mr:[On]}],mb:[{mb:[On]}],ml:[{ml:[On]}],"space-x":[{"space-x":[Ri]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Ri]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Fe,Qe]}],"min-w":[{"min-w":[Fe,Qe,"min","max","fit"]}],"max-w":[{"max-w":[Fe,Qe,"none","full","min","max","fit","prose",{screen:[pt]},pt]}],h:[{h:[Fe,Qe,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Fe,Qe,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Fe,Qe,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Fe,Qe,"auto","min","max","fit"]}],"font-size":[{text:["base",pt,ce]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Je]}],"font-family":[{font:[ve]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Fe]}],"line-clamp":[{"line-clamp":["none",Ke,Je]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",me,Fe]}],"list-image":[{"list-image":["none",Fe]}],"list-style-type":[{list:["none","disc","decimal",Fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[Ee]}],"placeholder-opacity":[{"placeholder-opacity":[Pt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[Ee]}],"text-opacity":[{"text-opacity":[Pt]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...li(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",me,ce]}],"underline-offset":[{"underline-offset":["auto",me,Fe]}],"text-decoration-color":[{decoration:[Ee]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Yt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Pt]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Kr(),tt]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ne]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ce]}],"bg-color":[{bg:[Ee]}],"gradient-from-pos":[{from:[on]}],"gradient-via-pos":[{via:[on]}],"gradient-to-pos":[{to:[on]}],"gradient-from":[{from:[rn]}],"gradient-via":[{via:[rn]}],"gradient-to":[{to:[rn]}],rounded:[{rounded:[rr]}],"rounded-s":[{"rounded-s":[rr]}],"rounded-e":[{"rounded-e":[rr]}],"rounded-t":[{"rounded-t":[rr]}],"rounded-r":[{"rounded-r":[rr]}],"rounded-b":[{"rounded-b":[rr]}],"rounded-l":[{"rounded-l":[rr]}],"rounded-ss":[{"rounded-ss":[rr]}],"rounded-se":[{"rounded-se":[rr]}],"rounded-ee":[{"rounded-ee":[rr]}],"rounded-es":[{"rounded-es":[rr]}],"rounded-tl":[{"rounded-tl":[rr]}],"rounded-tr":[{"rounded-tr":[rr]}],"rounded-br":[{"rounded-br":[rr]}],"rounded-bl":[{"rounded-bl":[rr]}],"border-w":[{border:[Hr]}],"border-w-x":[{"border-x":[Hr]}],"border-w-y":[{"border-y":[Hr]}],"border-w-s":[{"border-s":[Hr]}],"border-w-e":[{"border-e":[Hr]}],"border-w-t":[{"border-t":[Hr]}],"border-w-r":[{"border-r":[Hr]}],"border-w-b":[{"border-b":[Hr]}],"border-w-l":[{"border-l":[Hr]}],"border-opacity":[{"border-opacity":[Pt]}],"border-style":[{border:[...li(),"hidden"]}],"divide-x":[{"divide-x":[Hr]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[Hr]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Pt]}],"divide-style":[{divide:li()}],"border-color":[{border:[Et]}],"border-color-x":[{"border-x":[Et]}],"border-color-y":[{"border-y":[Et]}],"border-color-s":[{"border-s":[Et]}],"border-color-e":[{"border-e":[Et]}],"border-color-t":[{"border-t":[Et]}],"border-color-r":[{"border-r":[Et]}],"border-color-b":[{"border-b":[Et]}],"border-color-l":[{"border-l":[Et]}],"divide-color":[{divide:[Et]}],"outline-style":[{outline:["",...li()]}],"outline-offset":[{"outline-offset":[me,Fe]}],"outline-w":[{outline:[me,ce]}],"outline-color":[{outline:[Ee]}],"ring-w":[{ring:tr()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[Ee]}],"ring-opacity":[{"ring-opacity":[Pt]}],"ring-offset-w":[{"ring-offset":[me,ce]}],"ring-offset-color":[{"ring-offset":[Ee]}],shadow:[{shadow:["","inner","none",pt,We]}],"shadow-color":[{shadow:[ve]}],opacity:[{opacity:[Pt]}],"mix-blend":[{"mix-blend":[...pn(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":pn()}],filter:[{filter:["","none"]}],blur:[{blur:[yt]}],brightness:[{brightness:[Rt]}],contrast:[{contrast:[gn]}],"drop-shadow":[{"drop-shadow":["","none",pt,Fe]}],grayscale:[{grayscale:[Or]}],"hue-rotate":[{"hue-rotate":[wn]}],invert:[{invert:[Tn]}],saturate:[{saturate:[si]}],sepia:[{sepia:[Hs]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[yt]}],"backdrop-brightness":[{"backdrop-brightness":[Rt]}],"backdrop-contrast":[{"backdrop-contrast":[gn]}],"backdrop-grayscale":[{"backdrop-grayscale":[Or]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wn]}],"backdrop-invert":[{"backdrop-invert":[Tn]}],"backdrop-opacity":[{"backdrop-opacity":[Pt]}],"backdrop-saturate":[{"backdrop-saturate":[si]}],"backdrop-sepia":[{"backdrop-sepia":[Hs]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[an]}],"border-spacing-x":[{"border-spacing-x":[an]}],"border-spacing-y":[{"border-spacing-y":[an]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Fe]}],duration:[{duration:Ei()}],ease:[{ease:["linear","in","out","in-out",Fe]}],delay:[{delay:Ei()}],animate:[{animate:["none","spin","ping","pulse","bounce",Fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[zi]}],"scale-x":[{"scale-x":[zi]}],"scale-y":[{"scale-y":[zi]}],rotate:[{rotate:[He,Fe]}],"translate-x":[{"translate-x":[kn]}],"translate-y":[{"translate-y":[kn]}],"skew-x":[{"skew-x":[es]}],"skew-y":[{"skew-y":[es]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Fe]}],accent:[{accent:["auto",Ee]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe]}],"caret-color":[{caret:[Ee]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Yt()}],"scroll-mx":[{"scroll-mx":Yt()}],"scroll-my":[{"scroll-my":Yt()}],"scroll-ms":[{"scroll-ms":Yt()}],"scroll-me":[{"scroll-me":Yt()}],"scroll-mt":[{"scroll-mt":Yt()}],"scroll-mr":[{"scroll-mr":Yt()}],"scroll-mb":[{"scroll-mb":Yt()}],"scroll-ml":[{"scroll-ml":Yt()}],"scroll-p":[{"scroll-p":Yt()}],"scroll-px":[{"scroll-px":Yt()}],"scroll-py":[{"scroll-py":Yt()}],"scroll-ps":[{"scroll-ps":Yt()}],"scroll-pe":[{"scroll-pe":Yt()}],"scroll-pt":[{"scroll-pt":Yt()}],"scroll-pr":[{"scroll-pr":Yt()}],"scroll-pb":[{"scroll-pb":Yt()}],"scroll-pl":[{"scroll-pl":Yt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe]}],fill:[{fill:[Ee,"none"]}],"stroke-w":[{stroke:[me,ce,Je]}],stroke:[{stroke:[Ee,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Ct(...Ee){return bt((0,q.W)(Ee))}},9055:(Jt,ae,M)=>{"use strict";M.d(ae,{Z:()=>y});var q=M(9220);let Z=S=>S.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W=(...S)=>S.filter((k,I,x)=>!!k&&k.trim()!==""&&x.indexOf(k)===I).join(" ").trim();var j={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let z=(0,q.forwardRef)(({color:S="currentColor",size:k=24,strokeWidth:I=2,absoluteStrokeWidth:x,className:C="",children:N,iconNode:U,...K},Y)=>(0,q.createElement)("svg",{ref:Y,...j,width:k,height:k,stroke:S,strokeWidth:x?24*Number(I)/Number(k):I,className:W("lucide",C),...K},[...U.map(([ee,fe])=>(0,q.createElement)(ee,fe)),...Array.isArray(N)?N:[N]])),y=(S,k)=>{let I=(0,q.forwardRef)(({className:x,...C},N)=>(0,q.createElement)(z,{ref:N,iconNode:k,className:W(`lucide-${Z(S)}`,x),...C}));return I.displayName=`${S}`,I}},5506:(Jt,ae,M)=>{"use strict";M.d(ae,{Z:()=>q});let q=(0,M(9055).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5181:Jt=>{"use strict";var ae=Object.defineProperty,M=Object.getOwnPropertyDescriptor,q=Object.getOwnPropertyNames,Z=Object.prototype.hasOwnProperty,W={};function j(C){var N;let U=["path"in C&&C.path&&`Path=${C.path}`,"expires"in C&&(C.expires||C.expires===0)&&`Expires=${(typeof C.expires=="number"?new Date(C.expires):C.expires).toUTCString()}`,"maxAge"in C&&typeof C.maxAge=="number"&&`Max-Age=${C.maxAge}`,"domain"in C&&C.domain&&`Domain=${C.domain}`,"secure"in C&&C.secure&&"Secure","httpOnly"in C&&C.httpOnly&&"HttpOnly","sameSite"in C&&C.sameSite&&`SameSite=${C.sameSite}`,"partitioned"in C&&C.partitioned&&"Partitioned","priority"in C&&C.priority&&`Priority=${C.priority}`].filter(Boolean),K=`${C.name}=${encodeURIComponent((N=C.value)!=null?N:"")}`;return U.length===0?K:`${K}; ${U.join("; ")}`}function z(C){let N=new Map;for(let U of C.split(/; */)){if(!U)continue;let K=U.indexOf("=");if(K===-1){N.set(U,"true");continue}let[Y,ee]=[U.slice(0,K),U.slice(K+1)];try{N.set(Y,decodeURIComponent(ee??"true"))}catch{}}return N}function y(C){var N,U;if(!C)return;let[[K,Y],...ee]=z(C),{domain:fe,expires:Se,httponly:ze,maxage:Ue,path:at,samesite:vt,secure:jt,partitioned:re,priority:F}=Object.fromEntries(ee.map(([Q,se])=>[Q.toLowerCase(),se]));return function(Q){let se={};for(let me in Q)Q[me]&&(se[me]=Q[me]);return se}({name:K,value:decodeURIComponent(Y),domain:fe,...Se&&{expires:new Date(Se)},...ze&&{httpOnly:!0},...typeof Ue=="string"&&{maxAge:Number(Ue)},path:at,...vt&&{sameSite:S.includes(N=(N=vt).toLowerCase())?N:void 0},...jt&&{secure:!0},...F&&{priority:k.includes(U=(U=F).toLowerCase())?U:void 0},...re&&{partitioned:!0}})}((C,N)=>{for(var U in N)ae(C,U,{get:N[U],enumerable:!0})})(W,{RequestCookies:()=>I,ResponseCookies:()=>x,parseCookie:()=>z,parseSetCookie:()=>y,stringifyCookie:()=>j}),Jt.exports=((C,N,U,K)=>{if(N&&typeof N=="object"||typeof N=="function")for(let Y of q(N))Z.call(C,Y)||Y===U||ae(C,Y,{get:()=>N[Y],enumerable:!(K=M(N,Y))||K.enumerable});return C})(ae({},"__esModule",{value:!0}),W);var S=["strict","lax","none"],k=["low","medium","high"],I=class{constructor(C){this._parsed=new Map,this._headers=C;let N=C.get("cookie");if(N)for(let[U,K]of z(N))this._parsed.set(U,{name:U,value:K})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...C){let N=typeof C[0]=="string"?C[0]:C[0].name;return this._parsed.get(N)}getAll(...C){var N;let U=Array.from(this._parsed);if(!C.length)return U.map(([Y,ee])=>ee);let K=typeof C[0]=="string"?C[0]:(N=C[0])==null?void 0:N.name;return U.filter(([Y])=>Y===K).map(([Y,ee])=>ee)}has(C){return this._parsed.has(C)}set(...C){let[N,U]=C.length===1?[C[0].name,C[0].value]:C,K=this._parsed;return K.set(N,{name:N,value:U}),this._headers.set("cookie",Array.from(K).map(([Y,ee])=>j(ee)).join("; ")),this}delete(C){let N=this._parsed,U=Array.isArray(C)?C.map(K=>N.delete(K)):N.delete(C);return this._headers.set("cookie",Array.from(N).map(([K,Y])=>j(Y)).join("; ")),U}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(C=>`${C.name}=${encodeURIComponent(C.value)}`).join("; ")}},x=class{constructor(C){var N,U,K;this._parsed=new Map,this._headers=C;let Y=(K=(U=(N=C.getSetCookie)==null?void 0:N.call(C))!=null?U:C.get("set-cookie"))!=null?K:[];for(let ee of Array.isArray(Y)?Y:function(fe){if(!fe)return[];var Se,ze,Ue,at,vt,jt=[],re=0;function F(){for(;re<fe.length&&/\s/.test(fe.charAt(re));)re+=1;return re<fe.length}for(;re<fe.length;){for(Se=re,vt=!1;F();)if((ze=fe.charAt(re))===","){for(Ue=re,re+=1,F(),at=re;re<fe.length&&(ze=fe.charAt(re))!=="="&&ze!==";"&&ze!==",";)re+=1;re<fe.length&&fe.charAt(re)==="="?(vt=!0,re=at,jt.push(fe.substring(Se,Ue)),Se=re):re=Ue+1}else re+=1;(!vt||re>=fe.length)&&jt.push(fe.substring(Se,fe.length))}return jt}(Y)){let fe=y(ee);fe&&this._parsed.set(fe.name,fe)}}get(...C){let N=typeof C[0]=="string"?C[0]:C[0].name;return this._parsed.get(N)}getAll(...C){var N;let U=Array.from(this._parsed.values());if(!C.length)return U;let K=typeof C[0]=="string"?C[0]:(N=C[0])==null?void 0:N.name;return U.filter(Y=>Y.name===K)}has(C){return this._parsed.has(C)}set(...C){let[N,U,K]=C.length===1?[C[0].name,C[0].value,C[0]]:C,Y=this._parsed;return Y.set(N,function(ee={name:"",value:""}){return typeof ee.expires=="number"&&(ee.expires=new Date(ee.expires)),ee.maxAge&&(ee.expires=new Date(Date.now()+1e3*ee.maxAge)),(ee.path===null||ee.path===void 0)&&(ee.path="/"),ee}({name:N,value:U,...K})),function(ee,fe){for(let[,Se]of(fe.delete("set-cookie"),ee)){let ze=j(Se);fe.append("set-cookie",ze)}}(Y,this._headers),this}delete(...C){let[N,U,K]=typeof C[0]=="string"?[C[0]]:[C[0].name,C[0].path,C[0].domain];return this.set({name:N,path:U,domain:K,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(j).join("; ")}}},9646:(Jt,ae,M)=>{(()=>{"use strict";var q={491:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ContextAPI=void 0;let k=S(223),I=S(172),x=S(930),C="context",N=new k.NoopContextManager;class U{constructor(){}static getInstance(){return this._instance||(this._instance=new U),this._instance}setGlobalContextManager(Y){return(0,I.registerGlobal)(C,Y,x.DiagAPI.instance())}active(){return this._getContextManager().active()}with(Y,ee,fe,...Se){return this._getContextManager().with(Y,ee,fe,...Se)}bind(Y,ee){return this._getContextManager().bind(Y,ee)}_getContextManager(){return(0,I.getGlobal)(C)||N}disable(){this._getContextManager().disable(),(0,I.unregisterGlobal)(C,x.DiagAPI.instance())}}y.ContextAPI=U},930:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagAPI=void 0;let k=S(56),I=S(912),x=S(957),C=S(172);class N{constructor(){function K(ee){return function(...fe){let Se=(0,C.getGlobal)("diag");if(Se)return Se[ee](...fe)}}let Y=this;Y.setLogger=(ee,fe={logLevel:x.DiagLogLevel.INFO})=>{var Se,ze,Ue;if(ee===Y){let jt=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return Y.error((Se=jt.stack)!==null&&Se!==void 0?Se:jt.message),!1}typeof fe=="number"&&(fe={logLevel:fe});let at=(0,C.getGlobal)("diag"),vt=(0,I.createLogLevelDiagLogger)((ze=fe.logLevel)!==null&&ze!==void 0?ze:x.DiagLogLevel.INFO,ee);if(at&&!fe.suppressOverrideMessage){let jt=(Ue=Error().stack)!==null&&Ue!==void 0?Ue:"<failed to generate stacktrace>";at.warn(`Current logger will be overwritten from ${jt}`),vt.warn(`Current logger will overwrite one already registered from ${jt}`)}return(0,C.registerGlobal)("diag",vt,Y,!0)},Y.disable=()=>{(0,C.unregisterGlobal)("diag",Y)},Y.createComponentLogger=ee=>new k.DiagComponentLogger(ee),Y.verbose=K("verbose"),Y.debug=K("debug"),Y.info=K("info"),Y.warn=K("warn"),Y.error=K("error")}static instance(){return this._instance||(this._instance=new N),this._instance}}y.DiagAPI=N},653:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.MetricsAPI=void 0;let k=S(660),I=S(172),x=S(930),C="metrics";class N{constructor(){}static getInstance(){return this._instance||(this._instance=new N),this._instance}setGlobalMeterProvider(K){return(0,I.registerGlobal)(C,K,x.DiagAPI.instance())}getMeterProvider(){return(0,I.getGlobal)(C)||k.NOOP_METER_PROVIDER}getMeter(K,Y,ee){return this.getMeterProvider().getMeter(K,Y,ee)}disable(){(0,I.unregisterGlobal)(C,x.DiagAPI.instance())}}y.MetricsAPI=N},181:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PropagationAPI=void 0;let k=S(172),I=S(874),x=S(194),C=S(277),N=S(369),U=S(930),K="propagation",Y=new I.NoopTextMapPropagator;class ee{constructor(){this.createBaggage=N.createBaggage,this.getBaggage=C.getBaggage,this.getActiveBaggage=C.getActiveBaggage,this.setBaggage=C.setBaggage,this.deleteBaggage=C.deleteBaggage}static getInstance(){return this._instance||(this._instance=new ee),this._instance}setGlobalPropagator(Se){return(0,k.registerGlobal)(K,Se,U.DiagAPI.instance())}inject(Se,ze,Ue=x.defaultTextMapSetter){return this._getGlobalPropagator().inject(Se,ze,Ue)}extract(Se,ze,Ue=x.defaultTextMapGetter){return this._getGlobalPropagator().extract(Se,ze,Ue)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,k.unregisterGlobal)(K,U.DiagAPI.instance())}_getGlobalPropagator(){return(0,k.getGlobal)(K)||Y}}y.PropagationAPI=ee},997:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TraceAPI=void 0;let k=S(172),I=S(846),x=S(139),C=S(607),N=S(930),U="trace";class K{constructor(){this._proxyTracerProvider=new I.ProxyTracerProvider,this.wrapSpanContext=x.wrapSpanContext,this.isSpanContextValid=x.isSpanContextValid,this.deleteSpan=C.deleteSpan,this.getSpan=C.getSpan,this.getActiveSpan=C.getActiveSpan,this.getSpanContext=C.getSpanContext,this.setSpan=C.setSpan,this.setSpanContext=C.setSpanContext}static getInstance(){return this._instance||(this._instance=new K),this._instance}setGlobalTracerProvider(ee){let fe=(0,k.registerGlobal)(U,this._proxyTracerProvider,N.DiagAPI.instance());return fe&&this._proxyTracerProvider.setDelegate(ee),fe}getTracerProvider(){return(0,k.getGlobal)(U)||this._proxyTracerProvider}getTracer(ee,fe){return this.getTracerProvider().getTracer(ee,fe)}disable(){(0,k.unregisterGlobal)(U,N.DiagAPI.instance()),this._proxyTracerProvider=new I.ProxyTracerProvider}}y.TraceAPI=K},277:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.deleteBaggage=y.setBaggage=y.getActiveBaggage=y.getBaggage=void 0;let k=S(491),I=(0,S(780).createContextKey)("OpenTelemetry Baggage Key");function x(C){return C.getValue(I)||void 0}y.getBaggage=x,y.getActiveBaggage=function(){return x(k.ContextAPI.getInstance().active())},y.setBaggage=function(C,N){return C.setValue(I,N)},y.deleteBaggage=function(C){return C.deleteValue(I)}},993:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.BaggageImpl=void 0;class S{constructor(I){this._entries=I?new Map(I):new Map}getEntry(I){let x=this._entries.get(I);if(x)return Object.assign({},x)}getAllEntries(){return Array.from(this._entries.entries()).map(([I,x])=>[I,x])}setEntry(I,x){let C=new S(this._entries);return C._entries.set(I,x),C}removeEntry(I){let x=new S(this._entries);return x._entries.delete(I),x}removeEntries(...I){let x=new S(this._entries);for(let C of I)x._entries.delete(C);return x}clear(){return new S}}y.BaggageImpl=S},830:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.baggageEntryMetadataSymbol=void 0,y.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.baggageEntryMetadataFromString=y.createBaggage=void 0;let k=S(930),I=S(993),x=S(830),C=k.DiagAPI.instance();y.createBaggage=function(N={}){return new I.BaggageImpl(new Map(Object.entries(N)))},y.baggageEntryMetadataFromString=function(N){return typeof N!="string"&&(C.error(`Cannot create baggage metadata from unknown type: ${typeof N}`),N=""),{__TYPE__:x.baggageEntryMetadataSymbol,toString:()=>N}}},67:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.context=void 0;let k=S(491);y.context=k.ContextAPI.getInstance()},223:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopContextManager=void 0;let k=S(780);class I{active(){return k.ROOT_CONTEXT}with(C,N,U,...K){return N.call(U,...K)}bind(C,N){return N}enable(){return this}disable(){return this}}y.NoopContextManager=I},780:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ROOT_CONTEXT=y.createContextKey=void 0,y.createContextKey=function(k){return Symbol.for(k)};class S{constructor(I){let x=this;x._currentContext=I?new Map(I):new Map,x.getValue=C=>x._currentContext.get(C),x.setValue=(C,N)=>{let U=new S(x._currentContext);return U._currentContext.set(C,N),U},x.deleteValue=C=>{let N=new S(x._currentContext);return N._currentContext.delete(C),N}}}y.ROOT_CONTEXT=new S},506:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.diag=void 0;let k=S(930);y.diag=k.DiagAPI.instance()},56:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagComponentLogger=void 0;let k=S(172);class I{constructor(N){this._namespace=N.namespace||"DiagComponentLogger"}debug(...N){return x("debug",this._namespace,N)}error(...N){return x("error",this._namespace,N)}info(...N){return x("info",this._namespace,N)}warn(...N){return x("warn",this._namespace,N)}verbose(...N){return x("verbose",this._namespace,N)}}function x(C,N,U){let K=(0,k.getGlobal)("diag");if(K)return U.unshift(N),K[C](...U)}y.DiagComponentLogger=I},972:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagConsoleLogger=void 0;let S=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class k{constructor(){for(let x=0;x<S.length;x++)this[S[x].n]=function(C){return function(...N){if(console){let U=console[C];if(typeof U!="function"&&(U=console.log),typeof U=="function")return U.apply(console,N)}}}(S[x].c)}}y.DiagConsoleLogger=k},912:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.createLogLevelDiagLogger=void 0;let k=S(957);y.createLogLevelDiagLogger=function(I,x){function C(N,U){let K=x[N];return typeof K=="function"&&I>=U?K.bind(x):function(){}}return I<k.DiagLogLevel.NONE?I=k.DiagLogLevel.NONE:I>k.DiagLogLevel.ALL&&(I=k.DiagLogLevel.ALL),x=x||{},{error:C("error",k.DiagLogLevel.ERROR),warn:C("warn",k.DiagLogLevel.WARN),info:C("info",k.DiagLogLevel.INFO),debug:C("debug",k.DiagLogLevel.DEBUG),verbose:C("verbose",k.DiagLogLevel.VERBOSE)}}},957:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagLogLevel=void 0,function(S){S[S.NONE=0]="NONE",S[S.ERROR=30]="ERROR",S[S.WARN=50]="WARN",S[S.INFO=60]="INFO",S[S.DEBUG=70]="DEBUG",S[S.VERBOSE=80]="VERBOSE",S[S.ALL=9999]="ALL"}(y.DiagLogLevel||(y.DiagLogLevel={}))},172:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.unregisterGlobal=y.getGlobal=y.registerGlobal=void 0;let k=S(200),I=S(521),x=S(130),C=I.VERSION.split(".")[0],N=Symbol.for(`opentelemetry.js.api.${C}`),U=k._globalThis;y.registerGlobal=function(K,Y,ee,fe=!1){var Se;let ze=U[N]=(Se=U[N])!==null&&Se!==void 0?Se:{version:I.VERSION};if(!fe&&ze[K]){let Ue=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${K}`);return ee.error(Ue.stack||Ue.message),!1}if(ze.version!==I.VERSION){let Ue=Error(`@opentelemetry/api: Registration of version v${ze.version} for ${K} does not match previously registered API v${I.VERSION}`);return ee.error(Ue.stack||Ue.message),!1}return ze[K]=Y,ee.debug(`@opentelemetry/api: Registered a global for ${K} v${I.VERSION}.`),!0},y.getGlobal=function(K){var Y,ee;let fe=(Y=U[N])===null||Y===void 0?void 0:Y.version;if(fe&&(0,x.isCompatible)(fe))return(ee=U[N])===null||ee===void 0?void 0:ee[K]},y.unregisterGlobal=function(K,Y){Y.debug(`@opentelemetry/api: Unregistering a global for ${K} v${I.VERSION}.`);let ee=U[N];ee&&delete ee[K]}},130:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.isCompatible=y._makeCompatibilityCheck=void 0;let k=S(521),I=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function x(C){let N=new Set([C]),U=new Set,K=C.match(I);if(!K)return()=>!1;let Y={major:+K[1],minor:+K[2],patch:+K[3],prerelease:K[4]};if(Y.prerelease!=null)return function(fe){return fe===C};function ee(fe){return U.add(fe),!1}return function(fe){if(N.has(fe))return!0;if(U.has(fe))return!1;let Se=fe.match(I);if(!Se)return ee(fe);let ze={major:+Se[1],minor:+Se[2],patch:+Se[3],prerelease:Se[4]};return ze.prerelease!=null||Y.major!==ze.major?ee(fe):Y.major===0?Y.minor===ze.minor&&Y.patch<=ze.patch?(N.add(fe),!0):ee(fe):Y.minor<=ze.minor?(N.add(fe),!0):ee(fe)}}y._makeCompatibilityCheck=x,y.isCompatible=x(k.VERSION)},886:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.metrics=void 0;let k=S(653);y.metrics=k.MetricsAPI.getInstance()},901:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ValueType=void 0,function(S){S[S.INT=0]="INT",S[S.DOUBLE=1]="DOUBLE"}(y.ValueType||(y.ValueType={}))},102:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.createNoopMeter=y.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=y.NOOP_OBSERVABLE_GAUGE_METRIC=y.NOOP_OBSERVABLE_COUNTER_METRIC=y.NOOP_UP_DOWN_COUNTER_METRIC=y.NOOP_HISTOGRAM_METRIC=y.NOOP_COUNTER_METRIC=y.NOOP_METER=y.NoopObservableUpDownCounterMetric=y.NoopObservableGaugeMetric=y.NoopObservableCounterMetric=y.NoopObservableMetric=y.NoopHistogramMetric=y.NoopUpDownCounterMetric=y.NoopCounterMetric=y.NoopMetric=y.NoopMeter=void 0;class S{constructor(){}createHistogram(fe,Se){return y.NOOP_HISTOGRAM_METRIC}createCounter(fe,Se){return y.NOOP_COUNTER_METRIC}createUpDownCounter(fe,Se){return y.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(fe,Se){return y.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(fe,Se){return y.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(fe,Se){return y.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(fe,Se){}removeBatchObservableCallback(fe){}}y.NoopMeter=S;class k{}y.NoopMetric=k;class I extends k{add(fe,Se){}}y.NoopCounterMetric=I;class x extends k{add(fe,Se){}}y.NoopUpDownCounterMetric=x;class C extends k{record(fe,Se){}}y.NoopHistogramMetric=C;class N{addCallback(fe){}removeCallback(fe){}}y.NoopObservableMetric=N;class U extends N{}y.NoopObservableCounterMetric=U;class K extends N{}y.NoopObservableGaugeMetric=K;class Y extends N{}y.NoopObservableUpDownCounterMetric=Y,y.NOOP_METER=new S,y.NOOP_COUNTER_METRIC=new I,y.NOOP_HISTOGRAM_METRIC=new C,y.NOOP_UP_DOWN_COUNTER_METRIC=new x,y.NOOP_OBSERVABLE_COUNTER_METRIC=new U,y.NOOP_OBSERVABLE_GAUGE_METRIC=new K,y.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new Y,y.createNoopMeter=function(){return y.NOOP_METER}},660:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NOOP_METER_PROVIDER=y.NoopMeterProvider=void 0;let k=S(102);class I{getMeter(C,N,U){return k.NOOP_METER}}y.NoopMeterProvider=I,y.NOOP_METER_PROVIDER=new I},200:function(z,y,S){var k=this&&this.__createBinding||(Object.create?function(x,C,N,U){U===void 0&&(U=N),Object.defineProperty(x,U,{enumerable:!0,get:function(){return C[N]}})}:function(x,C,N,U){U===void 0&&(U=N),x[U]=C[N]}),I=this&&this.__exportStar||function(x,C){for(var N in x)N==="default"||Object.prototype.hasOwnProperty.call(C,N)||k(C,x,N)};Object.defineProperty(y,"__esModule",{value:!0}),I(S(46),y)},651:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y._globalThis=void 0,y._globalThis=typeof hn=="object"?hn:M.g},46:function(z,y,S){var k=this&&this.__createBinding||(Object.create?function(x,C,N,U){U===void 0&&(U=N),Object.defineProperty(x,U,{enumerable:!0,get:function(){return C[N]}})}:function(x,C,N,U){U===void 0&&(U=N),x[U]=C[N]}),I=this&&this.__exportStar||function(x,C){for(var N in x)N==="default"||Object.prototype.hasOwnProperty.call(C,N)||k(C,x,N)};Object.defineProperty(y,"__esModule",{value:!0}),I(S(651),y)},939:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.propagation=void 0;let k=S(181);y.propagation=k.PropagationAPI.getInstance()},874:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopTextMapPropagator=void 0;class S{inject(I,x){}extract(I,x){return I}fields(){return[]}}y.NoopTextMapPropagator=S},194:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.defaultTextMapSetter=y.defaultTextMapGetter=void 0,y.defaultTextMapGetter={get(S,k){if(S!=null)return S[k]},keys:S=>S==null?[]:Object.keys(S)},y.defaultTextMapSetter={set(S,k,I){S!=null&&(S[k]=I)}}},845:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.trace=void 0;let k=S(997);y.trace=k.TraceAPI.getInstance()},403:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NonRecordingSpan=void 0;let k=S(476);class I{constructor(C=k.INVALID_SPAN_CONTEXT){this._spanContext=C}spanContext(){return this._spanContext}setAttribute(C,N){return this}setAttributes(C){return this}addEvent(C,N){return this}setStatus(C){return this}updateName(C){return this}end(C){}isRecording(){return!1}recordException(C,N){}}y.NonRecordingSpan=I},614:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopTracer=void 0;let k=S(491),I=S(607),x=S(403),C=S(139),N=k.ContextAPI.getInstance();class U{startSpan(Y,ee,fe=N.active()){if(ee?.root)return new x.NonRecordingSpan;let Se=fe&&(0,I.getSpanContext)(fe);return typeof Se=="object"&&typeof Se.spanId=="string"&&typeof Se.traceId=="string"&&typeof Se.traceFlags=="number"&&(0,C.isSpanContextValid)(Se)?new x.NonRecordingSpan(Se):new x.NonRecordingSpan}startActiveSpan(Y,ee,fe,Se){let ze,Ue,at;if(arguments.length<2)return;arguments.length==2?at=ee:arguments.length==3?(ze=ee,at=fe):(ze=ee,Ue=fe,at=Se);let vt=Ue??N.active(),jt=this.startSpan(Y,ze,vt),re=(0,I.setSpan)(vt,jt);return N.with(re,at,void 0,jt)}}y.NoopTracer=U},124:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopTracerProvider=void 0;let k=S(614);class I{getTracer(C,N,U){return new k.NoopTracer}}y.NoopTracerProvider=I},125:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ProxyTracer=void 0;let k=new(S(614)).NoopTracer;class I{constructor(C,N,U,K){this._provider=C,this.name=N,this.version=U,this.options=K}startSpan(C,N,U){return this._getTracer().startSpan(C,N,U)}startActiveSpan(C,N,U,K){let Y=this._getTracer();return Reflect.apply(Y.startActiveSpan,Y,arguments)}_getTracer(){if(this._delegate)return this._delegate;let C=this._provider.getDelegateTracer(this.name,this.version,this.options);return C?(this._delegate=C,this._delegate):k}}y.ProxyTracer=I},846:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ProxyTracerProvider=void 0;let k=S(125),I=new(S(124)).NoopTracerProvider;class x{getTracer(N,U,K){var Y;return(Y=this.getDelegateTracer(N,U,K))!==null&&Y!==void 0?Y:new k.ProxyTracer(this,N,U,K)}getDelegate(){var N;return(N=this._delegate)!==null&&N!==void 0?N:I}setDelegate(N){this._delegate=N}getDelegateTracer(N,U,K){var Y;return(Y=this._delegate)===null||Y===void 0?void 0:Y.getTracer(N,U,K)}}y.ProxyTracerProvider=x},996:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SamplingDecision=void 0,function(S){S[S.NOT_RECORD=0]="NOT_RECORD",S[S.RECORD=1]="RECORD",S[S.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(y.SamplingDecision||(y.SamplingDecision={}))},607:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.getSpanContext=y.setSpanContext=y.deleteSpan=y.setSpan=y.getActiveSpan=y.getSpan=void 0;let k=S(780),I=S(403),x=S(491),C=(0,k.createContextKey)("OpenTelemetry Context Key SPAN");function N(K){return K.getValue(C)||void 0}function U(K,Y){return K.setValue(C,Y)}y.getSpan=N,y.getActiveSpan=function(){return N(x.ContextAPI.getInstance().active())},y.setSpan=U,y.deleteSpan=function(K){return K.deleteValue(C)},y.setSpanContext=function(K,Y){return U(K,new I.NonRecordingSpan(Y))},y.getSpanContext=function(K){var Y;return(Y=N(K))===null||Y===void 0?void 0:Y.spanContext()}},325:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TraceStateImpl=void 0;let k=S(564);class I{constructor(C){this._internalState=new Map,C&&this._parse(C)}set(C,N){let U=this._clone();return U._internalState.has(C)&&U._internalState.delete(C),U._internalState.set(C,N),U}unset(C){let N=this._clone();return N._internalState.delete(C),N}get(C){return this._internalState.get(C)}serialize(){return this._keys().reduce((C,N)=>(C.push(N+"="+this.get(N)),C),[]).join(",")}_parse(C){!(C.length>512)&&(this._internalState=C.split(",").reverse().reduce((N,U)=>{let K=U.trim(),Y=K.indexOf("=");if(Y!==-1){let ee=K.slice(0,Y),fe=K.slice(Y+1,U.length);(0,k.validateKey)(ee)&&(0,k.validateValue)(fe)&&N.set(ee,fe)}return N},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let C=new I;return C._internalState=new Map(this._internalState),C}}y.TraceStateImpl=I},564:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.validateValue=y.validateKey=void 0;let S="[_0-9a-z-*/]",k=`[a-z]${S}{0,255}`,I=`[a-z0-9]${S}{0,240}@[a-z]${S}{0,13}`,x=RegExp(`^(?:${k}|${I})$`),C=/^[ -~]{0,255}[!-~]$/,N=/,|=/;y.validateKey=function(U){return x.test(U)},y.validateValue=function(U){return C.test(U)&&!N.test(U)}},98:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.createTraceState=void 0;let k=S(325);y.createTraceState=function(I){return new k.TraceStateImpl(I)}},476:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.INVALID_SPAN_CONTEXT=y.INVALID_TRACEID=y.INVALID_SPANID=void 0;let k=S(475);y.INVALID_SPANID="0000000000000000",y.INVALID_TRACEID="00000000000000000000000000000000",y.INVALID_SPAN_CONTEXT={traceId:y.INVALID_TRACEID,spanId:y.INVALID_SPANID,traceFlags:k.TraceFlags.NONE}},357:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SpanKind=void 0,function(S){S[S.INTERNAL=0]="INTERNAL",S[S.SERVER=1]="SERVER",S[S.CLIENT=2]="CLIENT",S[S.PRODUCER=3]="PRODUCER",S[S.CONSUMER=4]="CONSUMER"}(y.SpanKind||(y.SpanKind={}))},139:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.wrapSpanContext=y.isSpanContextValid=y.isValidSpanId=y.isValidTraceId=void 0;let k=S(476),I=S(403),x=/^([0-9a-f]{32})$/i,C=/^[0-9a-f]{16}$/i;function N(K){return x.test(K)&&K!==k.INVALID_TRACEID}function U(K){return C.test(K)&&K!==k.INVALID_SPANID}y.isValidTraceId=N,y.isValidSpanId=U,y.isSpanContextValid=function(K){return N(K.traceId)&&U(K.spanId)},y.wrapSpanContext=function(K){return new I.NonRecordingSpan(K)}},847:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SpanStatusCode=void 0,function(S){S[S.UNSET=0]="UNSET",S[S.OK=1]="OK",S[S.ERROR=2]="ERROR"}(y.SpanStatusCode||(y.SpanStatusCode={}))},475:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TraceFlags=void 0,function(S){S[S.NONE=0]="NONE",S[S.SAMPLED=1]="SAMPLED"}(y.TraceFlags||(y.TraceFlags={}))},521:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.VERSION=void 0,y.VERSION="1.6.0"}},Z={};function W(z){var y=Z[z];if(y!==void 0)return y.exports;var S=Z[z]={exports:{}},k=!0;try{q[z].call(S.exports,S,S.exports,W),k=!1}finally{k&&delete Z[z]}return S.exports}W.ab="//";var j={};(()=>{Object.defineProperty(j,"__esModule",{value:!0}),j.trace=j.propagation=j.metrics=j.diag=j.context=j.INVALID_SPAN_CONTEXT=j.INVALID_TRACEID=j.INVALID_SPANID=j.isValidSpanId=j.isValidTraceId=j.isSpanContextValid=j.createTraceState=j.TraceFlags=j.SpanStatusCode=j.SpanKind=j.SamplingDecision=j.ProxyTracerProvider=j.ProxyTracer=j.defaultTextMapSetter=j.defaultTextMapGetter=j.ValueType=j.createNoopMeter=j.DiagLogLevel=j.DiagConsoleLogger=j.ROOT_CONTEXT=j.createContextKey=j.baggageEntryMetadataFromString=void 0;var z=W(369);Object.defineProperty(j,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return z.baggageEntryMetadataFromString}});var y=W(780);Object.defineProperty(j,"createContextKey",{enumerable:!0,get:function(){return y.createContextKey}}),Object.defineProperty(j,"ROOT_CONTEXT",{enumerable:!0,get:function(){return y.ROOT_CONTEXT}});var S=W(972);Object.defineProperty(j,"DiagConsoleLogger",{enumerable:!0,get:function(){return S.DiagConsoleLogger}});var k=W(957);Object.defineProperty(j,"DiagLogLevel",{enumerable:!0,get:function(){return k.DiagLogLevel}});var I=W(102);Object.defineProperty(j,"createNoopMeter",{enumerable:!0,get:function(){return I.createNoopMeter}});var x=W(901);Object.defineProperty(j,"ValueType",{enumerable:!0,get:function(){return x.ValueType}});var C=W(194);Object.defineProperty(j,"defaultTextMapGetter",{enumerable:!0,get:function(){return C.defaultTextMapGetter}}),Object.defineProperty(j,"defaultTextMapSetter",{enumerable:!0,get:function(){return C.defaultTextMapSetter}});var N=W(125);Object.defineProperty(j,"ProxyTracer",{enumerable:!0,get:function(){return N.ProxyTracer}});var U=W(846);Object.defineProperty(j,"ProxyTracerProvider",{enumerable:!0,get:function(){return U.ProxyTracerProvider}});var K=W(996);Object.defineProperty(j,"SamplingDecision",{enumerable:!0,get:function(){return K.SamplingDecision}});var Y=W(357);Object.defineProperty(j,"SpanKind",{enumerable:!0,get:function(){return Y.SpanKind}});var ee=W(847);Object.defineProperty(j,"SpanStatusCode",{enumerable:!0,get:function(){return ee.SpanStatusCode}});var fe=W(475);Object.defineProperty(j,"TraceFlags",{enumerable:!0,get:function(){return fe.TraceFlags}});var Se=W(98);Object.defineProperty(j,"createTraceState",{enumerable:!0,get:function(){return Se.createTraceState}});var ze=W(139);Object.defineProperty(j,"isSpanContextValid",{enumerable:!0,get:function(){return ze.isSpanContextValid}}),Object.defineProperty(j,"isValidTraceId",{enumerable:!0,get:function(){return ze.isValidTraceId}}),Object.defineProperty(j,"isValidSpanId",{enumerable:!0,get:function(){return ze.isValidSpanId}});var Ue=W(476);Object.defineProperty(j,"INVALID_SPANID",{enumerable:!0,get:function(){return Ue.INVALID_SPANID}}),Object.defineProperty(j,"INVALID_TRACEID",{enumerable:!0,get:function(){return Ue.INVALID_TRACEID}}),Object.defineProperty(j,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return Ue.INVALID_SPAN_CONTEXT}});let at=W(67);Object.defineProperty(j,"context",{enumerable:!0,get:function(){return at.context}});let vt=W(506);Object.defineProperty(j,"diag",{enumerable:!0,get:function(){return vt.diag}});let jt=W(886);Object.defineProperty(j,"metrics",{enumerable:!0,get:function(){return jt.metrics}});let re=W(939);Object.defineProperty(j,"propagation",{enumerable:!0,get:function(){return re.propagation}});let F=W(845);Object.defineProperty(j,"trace",{enumerable:!0,get:function(){return F.trace}}),j.default={context:at.context,diag:vt.diag,metrics:jt.metrics,propagation:re.propagation,trace:F.trace}})(),Jt.exports=j})()},3143:Jt=>{(()=>{"use strict";typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab="//");var ae={};(()=>{ae.parse=function(j,z){if(typeof j!="string")throw TypeError("argument str must be a string");for(var y={},S=j.split(Z),k=(z||{}).decode||M,I=0;I<S.length;I++){var x=S[I],C=x.indexOf("=");if(!(C<0)){var N=x.substr(0,C).trim(),U=x.substr(++C,x.length).trim();U[0]=='"'&&(U=U.slice(1,-1)),y[N]==null&&(y[N]=function(K,Y){try{return Y(K)}catch{return K}}(U,k))}}return y},ae.serialize=function(j,z,y){var S=y||{},k=S.encode||q;if(typeof k!="function")throw TypeError("option encode is invalid");if(!W.test(j))throw TypeError("argument name is invalid");var I=k(z);if(I&&!W.test(I))throw TypeError("argument val is invalid");var x=j+"="+I;if(S.maxAge!=null){var C=S.maxAge-0;if(isNaN(C)||!isFinite(C))throw TypeError("option maxAge is invalid");x+="; Max-Age="+Math.floor(C)}if(S.domain){if(!W.test(S.domain))throw TypeError("option domain is invalid");x+="; Domain="+S.domain}if(S.path){if(!W.test(S.path))throw TypeError("option path is invalid");x+="; Path="+S.path}if(S.expires){if(typeof S.expires.toUTCString!="function")throw TypeError("option expires is invalid");x+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(x+="; HttpOnly"),S.secure&&(x+="; Secure"),S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return x};var M=decodeURIComponent,q=encodeURIComponent,Z=/; */,W=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),Jt.exports=ae})()},5080:Jt=>{(()=>{"use strict";var ae={806:(W,j,z)=>{let y=z(190),S=Symbol("max"),k=Symbol("length"),I=Symbol("lengthCalculator"),x=Symbol("allowStale"),C=Symbol("maxAge"),N=Symbol("dispose"),U=Symbol("noDisposeOnSet"),K=Symbol("lruList"),Y=Symbol("cache"),ee=Symbol("updateAgeOnGet"),fe=()=>1;class Se{constructor(Q){if(typeof Q=="number"&&(Q={max:Q}),Q||(Q={}),Q.max&&(typeof Q.max!="number"||Q.max<0))throw TypeError("max must be a non-negative number");this[S]=Q.max||1/0;let se=Q.length||fe;if(this[I]=typeof se!="function"?fe:se,this[x]=Q.stale||!1,Q.maxAge&&typeof Q.maxAge!="number")throw TypeError("maxAge must be a number");this[C]=Q.maxAge||0,this[N]=Q.dispose,this[U]=Q.noDisposeOnSet||!1,this[ee]=Q.updateAgeOnGet||!1,this.reset()}set max(Q){if(typeof Q!="number"||Q<0)throw TypeError("max must be a non-negative number");this[S]=Q||1/0,at(this)}get max(){return this[S]}set allowStale(Q){this[x]=!!Q}get allowStale(){return this[x]}set maxAge(Q){if(typeof Q!="number")throw TypeError("maxAge must be a non-negative number");this[C]=Q,at(this)}get maxAge(){return this[C]}set lengthCalculator(Q){typeof Q!="function"&&(Q=fe),Q!==this[I]&&(this[I]=Q,this[k]=0,this[K].forEach(se=>{se.length=this[I](se.value,se.key),this[k]+=se.length})),at(this)}get lengthCalculator(){return this[I]}get length(){return this[k]}get itemCount(){return this[K].length}rforEach(Q,se){se=se||this;for(let me=this[K].tail;me!==null;){let ce=me.prev;re(this,Q,me,se),me=ce}}forEach(Q,se){se=se||this;for(let me=this[K].head;me!==null;){let ce=me.next;re(this,Q,me,se),me=ce}}keys(){return this[K].toArray().map(Q=>Q.key)}values(){return this[K].toArray().map(Q=>Q.value)}reset(){this[N]&&this[K]&&this[K].length&&this[K].forEach(Q=>this[N](Q.key,Q.value)),this[Y]=new Map,this[K]=new y,this[k]=0}dump(){return this[K].map(Q=>!Ue(this,Q)&&{k:Q.key,v:Q.value,e:Q.now+(Q.maxAge||0)}).toArray().filter(Q=>Q)}dumpLru(){return this[K]}set(Q,se,me){if((me=me||this[C])&&typeof me!="number")throw TypeError("maxAge must be a number");let ce=me?Date.now():0,Ke=this[I](se,Q);if(this[Y].has(Q)){if(Ke>this[S])return vt(this,this[Y].get(Q)),!1;let He=this[Y].get(Q).value;return this[N]&&!this[U]&&this[N](Q,He.value),He.now=ce,He.maxAge=me,He.value=se,this[k]+=Ke-He.length,He.length=Ke,this.get(Q),at(this),!0}let Je=new jt(Q,se,Ke,ce,me);return Je.length>this[S]?(this[N]&&this[N](Q,se),!1):(this[k]+=Je.length,this[K].unshift(Je),this[Y].set(Q,this[K].head),at(this),!0)}has(Q){return!!this[Y].has(Q)&&!Ue(this,this[Y].get(Q).value)}get(Q){return ze(this,Q,!0)}peek(Q){return ze(this,Q,!1)}pop(){let Q=this[K].tail;return Q?(vt(this,Q),Q.value):null}del(Q){vt(this,this[Y].get(Q))}load(Q){this.reset();let se=Date.now();for(let me=Q.length-1;me>=0;me--){let ce=Q[me],Ke=ce.e||0;if(Ke===0)this.set(ce.k,ce.v);else{let Je=Ke-se;Je>0&&this.set(ce.k,ce.v,Je)}}}prune(){this[Y].forEach((Q,se)=>ze(this,se,!1))}}let ze=(F,Q,se)=>{let me=F[Y].get(Q);if(me){let ce=me.value;if(Ue(F,ce)){if(vt(F,me),!F[x])return}else se&&(F[ee]&&(me.value.now=Date.now()),F[K].unshiftNode(me));return ce.value}},Ue=(F,Q)=>{if(!Q||!Q.maxAge&&!F[C])return!1;let se=Date.now()-Q.now;return Q.maxAge?se>Q.maxAge:F[C]&&se>F[C]},at=F=>{if(F[k]>F[S])for(let Q=F[K].tail;F[k]>F[S]&&Q!==null;){let se=Q.prev;vt(F,Q),Q=se}},vt=(F,Q)=>{if(Q){let se=Q.value;F[N]&&F[N](se.key,se.value),F[k]-=se.length,F[Y].delete(se.key),F[K].removeNode(Q)}};class jt{constructor(Q,se,me,ce,Ke){this.key=Q,this.value=se,this.length=me,this.now=ce,this.maxAge=Ke||0}}let re=(F,Q,se,me)=>{let ce=se.value;Ue(F,ce)&&(vt(F,se),F[x]||(ce=void 0)),ce&&Q.call(me,ce.value,ce.key,F)};W.exports=Se},76:W=>{W.exports=function(j){j.prototype[Symbol.iterator]=function*(){for(let z=this.head;z;z=z.next)yield z.value}}},190:(W,j,z)=>{function y(k){var I=this;if(I instanceof y||(I=new y),I.tail=null,I.head=null,I.length=0,k&&typeof k.forEach=="function")k.forEach(function(N){I.push(N)});else if(arguments.length>0)for(var x=0,C=arguments.length;x<C;x++)I.push(arguments[x]);return I}function S(k,I,x,C){if(!(this instanceof S))return new S(k,I,x,C);this.list=C,this.value=k,I?(I.next=this,this.prev=I):this.prev=null,x?(x.prev=this,this.next=x):this.next=null}W.exports=y,y.Node=S,y.create=y,y.prototype.removeNode=function(k){if(k.list!==this)throw Error("removing node which does not belong to this list");var I=k.next,x=k.prev;return I&&(I.prev=x),x&&(x.next=I),k===this.head&&(this.head=I),k===this.tail&&(this.tail=x),k.list.length--,k.next=null,k.prev=null,k.list=null,I},y.prototype.unshiftNode=function(k){if(k!==this.head){k.list&&k.list.removeNode(k);var I=this.head;k.list=this,k.next=I,I&&(I.prev=k),this.head=k,this.tail||(this.tail=k),this.length++}},y.prototype.pushNode=function(k){if(k!==this.tail){k.list&&k.list.removeNode(k);var I=this.tail;k.list=this,k.prev=I,I&&(I.next=k),this.tail=k,this.head||(this.head=k),this.length++}},y.prototype.push=function(){for(var k,I=0,x=arguments.length;I<x;I++)k=arguments[I],this.tail=new S(k,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},y.prototype.unshift=function(){for(var k,I=0,x=arguments.length;I<x;I++)k=arguments[I],this.head=new S(k,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},y.prototype.pop=function(){if(this.tail){var k=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,k}},y.prototype.shift=function(){if(this.head){var k=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,k}},y.prototype.forEach=function(k,I){I=I||this;for(var x=this.head,C=0;x!==null;C++)k.call(I,x.value,C,this),x=x.next},y.prototype.forEachReverse=function(k,I){I=I||this;for(var x=this.tail,C=this.length-1;x!==null;C--)k.call(I,x.value,C,this),x=x.prev},y.prototype.get=function(k){for(var I=0,x=this.head;x!==null&&I<k;I++)x=x.next;if(I===k&&x!==null)return x.value},y.prototype.getReverse=function(k){for(var I=0,x=this.tail;x!==null&&I<k;I++)x=x.prev;if(I===k&&x!==null)return x.value},y.prototype.map=function(k,I){I=I||this;for(var x=new y,C=this.head;C!==null;)x.push(k.call(I,C.value,this)),C=C.next;return x},y.prototype.mapReverse=function(k,I){I=I||this;for(var x=new y,C=this.tail;C!==null;)x.push(k.call(I,C.value,this)),C=C.prev;return x},y.prototype.reduce=function(k,I){var x,C=this.head;if(arguments.length>1)x=I;else if(this.head)C=this.head.next,x=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var N=0;C!==null;N++)x=k(x,C.value,N),C=C.next;return x},y.prototype.reduceReverse=function(k,I){var x,C=this.tail;if(arguments.length>1)x=I;else if(this.tail)C=this.tail.prev,x=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var N=this.length-1;C!==null;N--)x=k(x,C.value,N),C=C.prev;return x},y.prototype.toArray=function(){for(var k=Array(this.length),I=0,x=this.head;x!==null;I++)k[I]=x.value,x=x.next;return k},y.prototype.toArrayReverse=function(){for(var k=Array(this.length),I=0,x=this.tail;x!==null;I++)k[I]=x.value,x=x.prev;return k},y.prototype.slice=function(k,I){(I=I||this.length)<0&&(I+=this.length),(k=k||0)<0&&(k+=this.length);var x=new y;if(I<k||I<0)return x;k<0&&(k=0),I>this.length&&(I=this.length);for(var C=0,N=this.head;N!==null&&C<k;C++)N=N.next;for(;N!==null&&C<I;C++,N=N.next)x.push(N.value);return x},y.prototype.sliceReverse=function(k,I){(I=I||this.length)<0&&(I+=this.length),(k=k||0)<0&&(k+=this.length);var x=new y;if(I<k||I<0)return x;k<0&&(k=0),I>this.length&&(I=this.length);for(var C=this.length,N=this.tail;N!==null&&C>I;C--)N=N.prev;for(;N!==null&&C>k;C--,N=N.prev)x.push(N.value);return x},y.prototype.splice=function(k,I){k>this.length&&(k=this.length-1),k<0&&(k=this.length+k);for(var x=0,C=this.head;C!==null&&x<k;x++)C=C.next;for(var N=[],x=0;C&&x<I;x++)N.push(C.value),C=this.removeNode(C);C===null&&(C=this.tail),C!==this.head&&C!==this.tail&&(C=C.prev);for(var x=2;x<arguments.length;x++)C=function(K,Y,ee){var fe=Y===K.head?new S(ee,null,Y,K):new S(ee,Y,Y.next,K);return fe.next===null&&(K.tail=fe),fe.prev===null&&(K.head=fe),K.length++,fe}(this,C,arguments[x]);return N},y.prototype.reverse=function(){for(var k=this.head,I=this.tail,x=k;x!==null;x=x.prev){var C=x.prev;x.prev=x.next,x.next=C}return this.head=I,this.tail=k,this};try{z(76)(y)}catch{}}},M={};function q(W){var j=M[W];if(j!==void 0)return j.exports;var z=M[W]={exports:{}},y=!0;try{ae[W](z,z.exports,q),y=!1}finally{y&&delete M[W]}return z.exports}q.ab="//";var Z=q(806);Jt.exports=Z})()},4737:(Jt,ae,M)=>{(function(){var q={452:function(z){"use strict";z.exports=M(8004)}},Z={};function W(z){var y=Z[z];if(y!==void 0)return y.exports;var S=Z[z]={exports:{}},k=!0;try{q[z](S,S.exports,W),k=!1}finally{k&&delete Z[z]}return S.exports}W.ab="//";var j={};(function(){var z,y=(z=W(452))&&typeof z=="object"&&"default"in z?z.default:z,S=/https?|ftp|gopher|file/;function k(at){typeof at=="string"&&(at=Ue(at));var vt,jt,re,F,Q,se,me,ce,Ke,Je=(jt=(vt=at).auth,re=vt.hostname,F=vt.protocol||"",Q=vt.pathname||"",se=vt.hash||"",me=vt.query||"",ce=!1,jt=jt?encodeURIComponent(jt).replace(/%3A/i,":")+"@":"",vt.host?ce=jt+vt.host:re&&(ce=jt+(~re.indexOf(":")?"["+re+"]":re),vt.port&&(ce+=":"+vt.port)),me&&typeof me=="object"&&(me=y.encode(me)),Ke=vt.search||me&&"?"+me||"",F&&F.substr(-1)!==":"&&(F+=":"),vt.slashes||(!F||S.test(F))&&ce!==!1?(ce="//"+(ce||""),Q&&Q[0]!=="/"&&(Q="/"+Q)):ce||(ce=""),se&&se[0]!=="#"&&(se="#"+se),Ke&&Ke[0]!=="?"&&(Ke="?"+Ke),{protocol:F,host:ce,pathname:Q=Q.replace(/[?#]/g,encodeURIComponent),search:Ke=Ke.replace("#","%23"),hash:se});return""+Je.protocol+Je.host+Je.pathname+Je.search+Je.hash}var I="http://",x=I+"w.w",C=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,N=/https?|ftp|gopher|file/;function U(at,vt){var jt=typeof at=="string"?Ue(at):at;at=typeof at=="object"?k(at):at;var re=Ue(vt),F="";jt.protocol&&!jt.slashes&&(F=jt.protocol,at=at.replace(jt.protocol,""),F+=vt[0]==="/"||at[0]==="/"?"/":""),F&&re.protocol&&(F="",re.slashes||(F=re.protocol,vt=vt.replace(re.protocol,"")));var Q=at.match(C);Q&&!re.protocol&&(at=at.substr((F=Q[1]+(Q[2]||"")).length),/^\/\/[^/]/.test(vt)&&(F=F.slice(0,-1)));var se=new URL(at,x+"/"),me=new URL(vt,se).toString().replace(x,""),ce=re.protocol||jt.protocol;return ce+=jt.slashes||re.slashes?"//":"",!F&&ce?me=me.replace(I,ce):F&&(me=me.replace(I,"")),N.test(me)||~vt.indexOf(".")||at.slice(-1)==="/"||vt.slice(-1)==="/"||me.slice(-1)!=="/"||(me=me.slice(0,-1)),F&&(me=F+(me[0]==="/"?me.substr(1):me)),me}function K(){}K.prototype.parse=Ue,K.prototype.format=k,K.prototype.resolve=U,K.prototype.resolveObject=U;var Y=/^https?|ftp|gopher|file/,ee=/^(.*?)([#?].*)/,fe=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,Se=/^([a-z0-9.+-]*:)?\/\/\/*/i,ze=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function Ue(at,vt,jt){if(vt===void 0&&(vt=!1),jt===void 0&&(jt=!1),at&&typeof at=="object"&&at instanceof K)return at;var re=(at=at.trim()).match(ee);at=re?re[1].replace(/\\/g,"/")+re[2]:at.replace(/\\/g,"/"),ze.test(at)&&at.slice(-1)!=="/"&&(at+="/");var F=!/(^javascript)/.test(at)&&at.match(fe),Q=Se.test(at),se="";F&&(Y.test(F[1])||(se=F[1].toLowerCase(),at=""+F[2]+F[3]),F[2]||(Q=!1,Y.test(F[1])?(se=F[1],at=""+F[3]):at="//"+F[3]),F[2].length!==3&&F[2].length!==1||(se=F[1],at="/"+F[3]));var me,ce=(re?re[1]:at).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),Ke=ce&&ce[1],Je=new K,He="",_e="";try{me=new URL(at)}catch(lr){He=lr,se||jt||!/^\/\//.test(at)||/^\/\/.+[@.]/.test(at)||(_e="/",at=at.substr(1));try{me=new URL(at,x)}catch{return Je.protocol=se,Je.href=se,Je}}Je.slashes=Q&&!_e,Je.host=me.host==="w.w"?"":me.host,Je.hostname=me.hostname==="w.w"?"":me.hostname.replace(/(\[|\])/g,""),Je.protocol=He?se||null:me.protocol,Je.search=me.search.replace(/\\/g,"%5C"),Je.hash=me.hash.replace(/\\/g,"%5C");var Fe=at.split("#");!Je.search&&~Fe[0].indexOf("?")&&(Je.search="?"),Je.hash||Fe[1]!==""||(Je.hash="#"),Je.query=vt?y.decode(me.search.substr(1)):Je.search.substr(1),Je.pathname=_e+(F?me.pathname.replace(/['^|`]/g,function(lr){return"%"+lr.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(lr,Ne){try{return decodeURIComponent(Ne).split("").map(function(tt){var we=tt.charCodeAt();return we>256||/^[a-z0-9]$/i.test(tt)?tt:"%"+we.toString(16).toUpperCase()}).join("")}catch{return Ne}}):me.pathname),Je.protocol==="about:"&&Je.pathname==="blank"&&(Je.protocol="",Je.pathname=""),He&&at[0]!=="/"&&(Je.pathname=Je.pathname.substr(1)),se&&!Y.test(se)&&at.slice(-1)!=="/"&&Je.pathname==="/"&&(Je.pathname=""),Je.path=Je.pathname+Je.search,Je.auth=[me.username,me.password].map(decodeURIComponent).filter(Boolean).join(":"),Je.port=me.port,Ke&&!Je.host.endsWith(Ke)&&(Je.host+=Ke,Je.port=Ke.slice(1)),Je.href=_e?""+Je.pathname+Je.search+Je.hash:k(Je);var pt=/^(file)/.test(Je.href)?["host","hostname"]:[];return Object.keys(Je).forEach(function(lr){~pt.indexOf(lr)||(Je[lr]=Je[lr]||null)}),Je}j.parse=Ue,j.format=k,j.resolve=U,j.resolveObject=function(at,vt){return Ue(U(at,vt))},j.Url=K})(),Jt.exports=j})()},1982:Jt=>{(function(){"use strict";var ae={114:function(W){function j(S){if(typeof S!="string")throw TypeError("Path must be a string. Received "+JSON.stringify(S))}function z(S,k){for(var I,x="",C=0,N=-1,U=0,K=0;K<=S.length;++K){if(K<S.length)I=S.charCodeAt(K);else{if(I===47)break;I=47}if(I===47){if(!(N===K-1||U===1))if(N!==K-1&&U===2){if(x.length<2||C!==2||x.charCodeAt(x.length-1)!==46||x.charCodeAt(x.length-2)!==46){if(x.length>2){var Y=x.lastIndexOf("/");if(Y!==x.length-1){Y===-1?(x="",C=0):C=(x=x.slice(0,Y)).length-1-x.lastIndexOf("/"),N=K,U=0;continue}}else if(x.length===2||x.length===1){x="",C=0,N=K,U=0;continue}}k&&(x.length>0?x+="/..":x="..",C=2)}else x.length>0?x+="/"+S.slice(N+1,K):x=S.slice(N+1,K),C=K-N-1;N=K,U=0}else I===46&&U!==-1?++U:U=-1}return x}var y={resolve:function(){for(var S,k,I="",x=!1,C=arguments.length-1;C>=-1&&!x;C--)C>=0?k=arguments[C]:(S===void 0&&(S=""),k=S),j(k),k.length!==0&&(I=k+"/"+I,x=k.charCodeAt(0)===47);return I=z(I,!x),x?I.length>0?"/"+I:"/":I.length>0?I:"."},normalize:function(S){if(j(S),S.length===0)return".";var k=S.charCodeAt(0)===47,I=S.charCodeAt(S.length-1)===47;return(S=z(S,!k)).length!==0||k||(S="."),S.length>0&&I&&(S+="/"),k?"/"+S:S},isAbsolute:function(S){return j(S),S.length>0&&S.charCodeAt(0)===47},join:function(){if(arguments.length==0)return".";for(var S,k=0;k<arguments.length;++k){var I=arguments[k];j(I),I.length>0&&(S===void 0?S=I:S+="/"+I)}return S===void 0?".":y.normalize(S)},relative:function(S,k){if(j(S),j(k),S===k||(S=y.resolve(S))===(k=y.resolve(k)))return"";for(var I=1;I<S.length&&S.charCodeAt(I)===47;++I);for(var x=S.length,C=x-I,N=1;N<k.length&&k.charCodeAt(N)===47;++N);for(var U=k.length-N,K=C<U?C:U,Y=-1,ee=0;ee<=K;++ee){if(ee===K){if(U>K){if(k.charCodeAt(N+ee)===47)return k.slice(N+ee+1);if(ee===0)return k.slice(N+ee)}else C>K&&(S.charCodeAt(I+ee)===47?Y=ee:ee===0&&(Y=0));break}var fe=S.charCodeAt(I+ee);if(fe!==k.charCodeAt(N+ee))break;fe===47&&(Y=ee)}var Se="";for(ee=I+Y+1;ee<=x;++ee)(ee===x||S.charCodeAt(ee)===47)&&(Se.length===0?Se+="..":Se+="/..");return Se.length>0?Se+k.slice(N+Y):(N+=Y,k.charCodeAt(N)===47&&++N,k.slice(N))},_makeLong:function(S){return S},dirname:function(S){if(j(S),S.length===0)return".";for(var k=S.charCodeAt(0),I=k===47,x=-1,C=!0,N=S.length-1;N>=1;--N)if((k=S.charCodeAt(N))===47){if(!C){x=N;break}}else C=!1;return x===-1?I?"/":".":I&&x===1?"//":S.slice(0,x)},basename:function(S,k){if(k!==void 0&&typeof k!="string")throw TypeError('"ext" argument must be a string');j(S);var I,x=0,C=-1,N=!0;if(k!==void 0&&k.length>0&&k.length<=S.length){if(k.length===S.length&&k===S)return"";var U=k.length-1,K=-1;for(I=S.length-1;I>=0;--I){var Y=S.charCodeAt(I);if(Y===47){if(!N){x=I+1;break}}else K===-1&&(N=!1,K=I+1),U>=0&&(Y===k.charCodeAt(U)?--U==-1&&(C=I):(U=-1,C=K))}return x===C?C=K:C===-1&&(C=S.length),S.slice(x,C)}for(I=S.length-1;I>=0;--I)if(S.charCodeAt(I)===47){if(!N){x=I+1;break}}else C===-1&&(N=!1,C=I+1);return C===-1?"":S.slice(x,C)},extname:function(S){j(S);for(var k=-1,I=0,x=-1,C=!0,N=0,U=S.length-1;U>=0;--U){var K=S.charCodeAt(U);if(K===47){if(!C){I=U+1;break}continue}x===-1&&(C=!1,x=U+1),K===46?k===-1?k=U:N!==1&&(N=1):k!==-1&&(N=-1)}return k===-1||x===-1||N===0||N===1&&k===x-1&&k===I+1?"":S.slice(k,x)},format:function(S){var k,I;if(S===null||typeof S!="object")throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof S);return k=S.dir||S.root,I=S.base||(S.name||"")+(S.ext||""),k?k===S.root?k+I:k+"/"+I:I},parse:function(S){j(S);var k,I={root:"",dir:"",base:"",ext:"",name:""};if(S.length===0)return I;var x=S.charCodeAt(0),C=x===47;C?(I.root="/",k=1):k=0;for(var N=-1,U=0,K=-1,Y=!0,ee=S.length-1,fe=0;ee>=k;--ee){if((x=S.charCodeAt(ee))===47){if(!Y){U=ee+1;break}continue}K===-1&&(Y=!1,K=ee+1),x===46?N===-1?N=ee:fe!==1&&(fe=1):N!==-1&&(fe=-1)}return N===-1||K===-1||fe===0||fe===1&&N===K-1&&N===U+1?K!==-1&&(U===0&&C?I.base=I.name=S.slice(1,K):I.base=I.name=S.slice(U,K)):(U===0&&C?(I.name=S.slice(1,N),I.base=S.slice(1,K)):(I.name=S.slice(U,N),I.base=S.slice(U,K)),I.ext=S.slice(N,K)),U>0?I.dir=S.slice(0,U-1):C&&(I.dir="/"),I},sep:"/",delimiter:":",win32:null,posix:null};y.posix=y,W.exports=y}},M={};function q(W){var j=M[W];if(j!==void 0)return j.exports;var z=M[W]={exports:{}},y=!0;try{ae[W](z,z.exports,q),y=!1}finally{y&&delete M[W]}return z.exports}q.ab="//";var Z=q(114);Jt.exports=Z})()},7278:(Jt,ae)=>{"use strict";function M(W,j){j===void 0&&(j={});for(var z=function(re){for(var F=[],Q=0;Q<re.length;){var se=re[Q];if(se==="*"||se==="+"||se==="?"){F.push({type:"MODIFIER",index:Q,value:re[Q++]});continue}if(se==="\\"){F.push({type:"ESCAPED_CHAR",index:Q++,value:re[Q++]});continue}if(se==="{"){F.push({type:"OPEN",index:Q,value:re[Q++]});continue}if(se==="}"){F.push({type:"CLOSE",index:Q,value:re[Q++]});continue}if(se===":"){for(var me="",ce=Q+1;ce<re.length;){var Ke=re.charCodeAt(ce);if(Ke>=48&&Ke<=57||Ke>=65&&Ke<=90||Ke>=97&&Ke<=122||Ke===95){me+=re[ce++];continue}break}if(!me)throw TypeError("Missing parameter name at "+Q);F.push({type:"NAME",index:Q,value:me}),Q=ce;continue}if(se==="("){var Je=1,He="",ce=Q+1;if(re[ce]==="?")throw TypeError('Pattern cannot start with "?" at '+ce);for(;ce<re.length;){if(re[ce]==="\\"){He+=re[ce++]+re[ce++];continue}if(re[ce]===")"){if(--Je==0){ce++;break}}else if(re[ce]==="("&&(Je++,re[ce+1]!=="?"))throw TypeError("Capturing groups are not allowed at "+ce);He+=re[ce++]}if(Je)throw TypeError("Unbalanced pattern at "+Q);if(!He)throw TypeError("Missing pattern at "+Q);F.push({type:"PATTERN",index:Q,value:He}),Q=ce;continue}F.push({type:"CHAR",index:Q,value:re[Q++]})}return F.push({type:"END",index:Q,value:""}),F}(W),y=j.prefixes,S=y===void 0?"./":y,k="[^"+q(j.delimiter||"/#?")+"]+?",I=[],x=0,C=0,N="",U=function(re){if(C<z.length&&z[C].type===re)return z[C++].value},K=function(re){var F=U(re);if(F!==void 0)return F;var Q=z[C];throw TypeError("Unexpected "+Q.type+" at "+Q.index+", expected "+re)},Y=function(){for(var re,F="";re=U("CHAR")||U("ESCAPED_CHAR");)F+=re;return F};C<z.length;){var ee=U("CHAR"),fe=U("NAME"),Se=U("PATTERN");if(fe||Se){var ze=ee||"";S.indexOf(ze)===-1&&(N+=ze,ze=""),N&&(I.push(N),N=""),I.push({name:fe||x++,prefix:ze,suffix:"",pattern:Se||k,modifier:U("MODIFIER")||""});continue}var Ue=ee||U("ESCAPED_CHAR");if(Ue){N+=Ue;continue}if(N&&(I.push(N),N=""),U("OPEN")){var ze=Y(),at=U("NAME")||"",vt=U("PATTERN")||"",jt=Y();K("CLOSE"),I.push({name:at||(vt?x++:""),pattern:at&&!vt?k:vt,prefix:ze,suffix:jt,modifier:U("MODIFIER")||""});continue}K("END")}return I}function q(W){return W.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Z(W){return W&&W.sensitive?"":"i"}ae.MY=function(W,j){var z,y,S,k,I,x,C,N;return z=M(W,j),(y=j)===void 0&&(y={}),S=Z(y),I=(k=y.encode)===void 0?function(U){return U}:k,C=(x=y.validate)===void 0||x,N=z.map(function(U){if(typeof U=="object")return RegExp("^(?:"+U.pattern+")$",S)}),function(U){for(var K="",Y=0;Y<z.length;Y++){var ee=z[Y];if(typeof ee=="string"){K+=ee;continue}var fe=U?U[ee.name]:void 0,Se=ee.modifier==="?"||ee.modifier==="*",ze=ee.modifier==="*"||ee.modifier==="+";if(Array.isArray(fe)){if(!ze)throw TypeError('Expected "'+ee.name+'" to not repeat, but got an array');if(fe.length===0){if(Se)continue;throw TypeError('Expected "'+ee.name+'" to not be empty')}for(var Ue=0;Ue<fe.length;Ue++){var at=I(fe[Ue],ee);if(C&&!N[Y].test(at))throw TypeError('Expected all "'+ee.name+'" to match "'+ee.pattern+'", but got "'+at+'"');K+=ee.prefix+at+ee.suffix}continue}if(typeof fe=="string"||typeof fe=="number"){var at=I(String(fe),ee);if(C&&!N[Y].test(at))throw TypeError('Expected "'+ee.name+'" to match "'+ee.pattern+'", but got "'+at+'"');K+=ee.prefix+at+ee.suffix;continue}if(!Se){var vt=ze?"an array":"a string";throw TypeError('Expected "'+ee.name+'" to be '+vt)}}return K}},ae.WS=function(W,j,z){z===void 0&&(z={});var y=z.decode,S=y===void 0?function(k){return k}:y;return function(k){var I=W.exec(k);if(!I)return!1;for(var x=I[0],C=I.index,N=Object.create(null),U=1;U<I.length;U++)(function(K){if(I[K]!==void 0){var Y=j[K-1];Y.modifier==="*"||Y.modifier==="+"?N[Y.name]=I[K].split(Y.prefix+Y.suffix).map(function(ee){return S(ee,Y)}):N[Y.name]=S(I[K],Y)}})(U);return{path:x,index:C,params:N}}},ae.Bo=function W(j,z,y){return j instanceof RegExp?function(S,k){if(!k)return S;var I=S.source.match(/\((?!\?)/g);if(I)for(var x=0;x<I.length;x++)k.push({name:x,prefix:"",suffix:"",modifier:"",pattern:""});return S}(j,z):Array.isArray(j)?RegExp("(?:"+j.map(function(S){return W(S,z,y).source}).join("|")+")",Z(y)):function(S,k,I){I===void 0&&(I={});for(var x=I.strict,C=x!==void 0&&x,N=I.start,U=I.end,K=I.encode,Y=K===void 0?function(Q){return Q}:K,ee="["+q(I.endsWith||"")+"]|$",fe="["+q(I.delimiter||"/#?")+"]",Se=N===void 0||N?"^":"",ze=0;ze<S.length;ze++){var Ue=S[ze];if(typeof Ue=="string")Se+=q(Y(Ue));else{var at=q(Y(Ue.prefix)),vt=q(Y(Ue.suffix));if(Ue.pattern)if(k&&k.push(Ue),at||vt)if(Ue.modifier==="+"||Ue.modifier==="*"){var jt=Ue.modifier==="*"?"?":"";Se+="(?:"+at+"((?:"+Ue.pattern+")(?:"+vt+at+"(?:"+Ue.pattern+"))*)"+vt+")"+jt}else Se+="(?:"+at+"("+Ue.pattern+")"+vt+")"+Ue.modifier;else Se+="("+Ue.pattern+")"+Ue.modifier;else Se+="(?:"+at+vt+")"+Ue.modifier}}if(U===void 0||U)C||(Se+=fe+"?"),Se+=I.endsWith?"(?="+ee+")":"$";else{var re=S[S.length-1],F=typeof re=="string"?fe.indexOf(re[re.length-1])>-1:re===void 0;C||(Se+="(?:"+fe+"(?="+ee+"))?"),F||(Se+="(?="+fe+"|"+ee+")")}return new RegExp(Se,Z(I))}(M(j,y),z,y)}},8004:Jt=>{(function(){"use strict";var ae={815:function(W){W.exports=function(z,y,S,k){y=y||"&",S=S||"=";var I={};if(typeof z!="string"||z.length===0)return I;var x=/\+/g;z=z.split(y);var C=1e3;k&&typeof k.maxKeys=="number"&&(C=k.maxKeys);var N=z.length;C>0&&N>C&&(N=C);for(var U=0;U<N;++U){var K,Y,ee,fe,Se=z[U].replace(x,"%20"),ze=Se.indexOf(S);ze>=0?(K=Se.substr(0,ze),Y=Se.substr(ze+1)):(K=Se,Y=""),ee=decodeURIComponent(K),fe=decodeURIComponent(Y),Object.prototype.hasOwnProperty.call(I,ee)?j(I[ee])?I[ee].push(fe):I[ee]=[I[ee],fe]:I[ee]=fe}return I};var j=Array.isArray||function(z){return Object.prototype.toString.call(z)==="[object Array]"}},577:function(W){var j=function(k){switch(typeof k){case"string":return k;case"boolean":return k?"true":"false";case"number":return isFinite(k)?k:"";default:return""}};W.exports=function(k,I,x,C){return I=I||"&",x=x||"=",k===null&&(k=void 0),typeof k=="object"?y(S(k),function(N){var U=encodeURIComponent(j(N))+x;return z(k[N])?y(k[N],function(K){return U+encodeURIComponent(j(K))}).join(I):U+encodeURIComponent(j(k[N]))}).join(I):C?encodeURIComponent(j(C))+x+encodeURIComponent(j(k)):""};var z=Array.isArray||function(k){return Object.prototype.toString.call(k)==="[object Array]"};function y(k,I){if(k.map)return k.map(I);for(var x=[],C=0;C<k.length;C++)x.push(I(k[C],C));return x}var S=Object.keys||function(k){var I=[];for(var x in k)Object.prototype.hasOwnProperty.call(k,x)&&I.push(x);return I}}},M={};function q(W){var j=M[W];if(j!==void 0)return j.exports;var z=M[W]={exports:{}},y=!0;try{ae[W](z,z.exports,q),y=!1}finally{y&&delete M[W]}return z.exports}q.ab="//";var Z={};Z.decode=Z.parse=q(815),Z.encode=Z.stringify=q(577),Jt.exports=Z})()},6989:(Jt,ae,M)=>{"use strict";var q=M(9220),Z={usingClientEntryPoint:!1,Events:null,Dispatcher:{current:null}};function W(I){var x="https://react.dev/errors/"+I;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)x+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+I+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function j(I,x){return I==="font"?"":typeof x=="string"?x==="use-credentials"?x:"":void 0}var z=Z.Dispatcher,y=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function S(){return y.current.useHostTransitionStatus()}function k(I,x,C){return y.current.useFormState(I,x,C)}ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,ae.createPortal=function(){throw Error(W(448))},ae.experimental_useFormState=function(I,x,C){return k(I,x,C)},ae.experimental_useFormStatus=function(){return S()},ae.flushSync=function(){throw Error(W(449))},ae.preconnect=function(I,x){var C=z.current;C&&typeof I=="string"&&(x=x?typeof(x=x.crossOrigin)=="string"?x==="use-credentials"?x:"":void 0:null,C.preconnect(I,x))},ae.prefetchDNS=function(I){var x=z.current;x&&typeof I=="string"&&x.prefetchDNS(I)},ae.preinit=function(I,x){var C=z.current;if(C&&typeof I=="string"&&x&&typeof x.as=="string"){var N=x.as,U=j(N,x.crossOrigin),K=typeof x.integrity=="string"?x.integrity:void 0,Y=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;N==="style"?C.preinitStyle(I,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:U,integrity:K,fetchPriority:Y}):N==="script"&&C.preinitScript(I,{crossOrigin:U,integrity:K,fetchPriority:Y,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},ae.preinitModule=function(I,x){var C=z.current;if(C&&typeof I=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var N=j(x.as,x.crossOrigin);C.preinitModuleScript(I,{crossOrigin:N,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&C.preinitModuleScript(I)},ae.preload=function(I,x){var C=z.current;if(C&&typeof I=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var N=x.as,U=j(N,x.crossOrigin);C.preload(I,N,{crossOrigin:U,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0})}},ae.preloadModule=function(I,x){var C=z.current;if(C&&typeof I=="string")if(x){var N=j(x.as,x.crossOrigin);C.preloadModule(I,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:N,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else C.preloadModule(I)},ae.unstable_batchedUpdates=function(I,x){return I(x)},ae.useFormState=k,ae.useFormStatus=S,ae.version="18.3.0-canary-178c267a4e-20241218"},1880:(Jt,ae,M)=>{"use strict";var q=M(9220),Z=M(8066),W=Symbol.for("react.element"),j=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),ee=Symbol.for("react.scope"),fe=Symbol.for("react.debug_trace_mode"),Se=Symbol.for("react.offscreen"),ze=Symbol.for("react.legacy_hidden"),Ue=Symbol.for("react.cache"),at=Symbol.iterator,vt=Array.isArray;function jt(V,L){var ne=3&V.length,Pe=V.length-ne,Oe=L;for(L=0;L<Pe;){var kt=255&V.charCodeAt(L)|(255&V.charCodeAt(++L))<<8|(255&V.charCodeAt(++L))<<16|(255&V.charCodeAt(++L))<<24;++L,Oe^=kt=461845907*(65535&(kt=(kt=3432918353*(65535&kt)+((3432918353*(kt>>>16)&65535)<<16)&4294967295)<<15|kt>>>17))+((461845907*(kt>>>16)&65535)<<16)&4294967295,Oe=(65535&(Oe=5*(65535&(Oe=Oe<<13|Oe>>>19))+((5*(Oe>>>16)&65535)<<16)&4294967295))+27492+(((Oe>>>16)+58964&65535)<<16)}switch(kt=0,ne){case 3:kt^=(255&V.charCodeAt(L+2))<<16;case 2:kt^=(255&V.charCodeAt(L+1))<<8;case 1:kt^=255&V.charCodeAt(L),Oe^=461845907*(65535&(kt=(kt=3432918353*(65535&kt)+((3432918353*(kt>>>16)&65535)<<16)&4294967295)<<15|kt>>>17))+((461845907*(kt>>>16)&65535)<<16)&4294967295}return Oe^=V.length,Oe^=Oe>>>16,Oe=2246822507*(65535&Oe)+((2246822507*(Oe>>>16)&65535)<<16)&4294967295,Oe^=Oe>>>13,((Oe=3266489909*(65535&Oe)+((3266489909*(Oe>>>16)&65535)<<16)&4294967295)^Oe>>>16)>>>0}var re=null,F=0;function Q(V,L){if(L.byteLength!==0)if(2048<L.byteLength)0<F&&(V.enqueue(new Uint8Array(re.buffer,0,F)),re=new Uint8Array(2048),F=0),V.enqueue(L);else{var ne=re.length-F;ne<L.byteLength&&(ne===0?V.enqueue(re):(re.set(L.subarray(0,ne),F),V.enqueue(re),L=L.subarray(ne)),re=new Uint8Array(2048),F=0),re.set(L,F),F+=L.byteLength}}function se(V,L){return Q(V,L),!0}function me(V){re&&0<F&&(V.enqueue(new Uint8Array(re.buffer,0,F)),re=null,F=0)}var ce=new TextEncoder;function Ke(V){return ce.encode(V)}function Je(V){return ce.encode(V)}function He(V,L){typeof V.error=="function"?V.error(L):V.close()}var _e=Object.assign,Fe=Object.prototype.hasOwnProperty,pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lr={},Ne={};function tt(V){return!!Fe.call(Ne,V)||!Fe.call(lr,V)&&(pt.test(V)?Ne[V]=!0:(lr[V]=!0,!1))}var we=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),Ce=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),We=/["'&<>]/;function ve(V){if(typeof V=="boolean"||typeof V=="number")return""+V;V=""+V;var L=We.exec(V);if(L){var ne,Pe="",Oe=0;for(ne=L.index;ne<V.length;ne++){switch(V.charCodeAt(ne)){case 34:L="&quot;";break;case 38:L="&amp;";break;case 39:L="&#x27;";break;case 60:L="&lt;";break;case 62:L="&gt;";break;default:continue}Oe!==ne&&(Pe+=V.slice(Oe,ne)),Oe=ne+1,Pe+=L}V=Oe!==ne?Pe+V.slice(Oe,ne):Pe}return V}var Ve=/([A-Z])/g,gt=/^ms-/,mt=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lt={pending:!1,data:null,method:null,action:null},et=Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher,bt={prefetchDNS:function(V){var L=Be();if(L){var ne,Pe,Oe=L.resumableState,kt=L.renderState;typeof V=="string"&&V&&(Oe.dnsResources.hasOwnProperty(V)||(Oe.dnsResources[V]=null,(Pe=(Oe=kt.headers)&&0<Oe.remainingCapacity)&&(ne="<"+(""+V).replace(xe,T)+">; rel=dns-prefetch",Pe=2<=(Oe.remainingCapacity-=ne.length)),Pe?(kt.resets.dns[V]=null,Oe.preconnects&&(Oe.preconnects+=", "),Oe.preconnects+=ne):(ui(ne=[],{href:V,rel:"dns-prefetch"}),kt.preconnects.add(ne))),rl(L))}},preconnect:function(V,L){var ne=Be();if(ne){var Pe=ne.resumableState,Oe=ne.renderState;if(typeof V=="string"&&V){var kt,Nt,Mt=L==="use-credentials"?"credentials":typeof L=="string"?"anonymous":"default";Pe.connectResources[Mt].hasOwnProperty(V)||(Pe.connectResources[Mt][V]=null,(Nt=(Pe=Oe.headers)&&0<Pe.remainingCapacity)&&(Nt="<"+(""+V).replace(xe,T)+">; rel=preconnect",typeof L=="string"&&(Nt+='; crossorigin="'+(""+L).replace(G,pe)+'"'),kt=Nt,Nt=2<=(Pe.remainingCapacity-=kt.length)),Nt?(Oe.resets.connect[Mt][V]=null,Pe.preconnects&&(Pe.preconnects+=", "),Pe.preconnects+=kt):(ui(Mt=[],{rel:"preconnect",href:V,crossOrigin:L}),Oe.preconnects.add(Mt))),rl(ne)}}},preload:function(V,L,ne){var Pe=Be();if(Pe){var Oe=Pe.resumableState,kt=Pe.renderState;if(L&&V){switch(L){case"image":if(ne)var Nt,Mt=ne.imageSrcSet,sr=ne.imageSizes,vr=ne.fetchPriority;var kr=Mt?Mt+`
`+(sr||""):V;if(Oe.imageResources.hasOwnProperty(kr))return;Oe.imageResources[kr]=Ct,(Oe=kt.headers)&&0<Oe.remainingCapacity&&vr==="high"&&(Nt=hi(V,L,ne),2<=(Oe.remainingCapacity-=Nt.length))?(kt.resets.image[kr]=Ct,Oe.highImagePreloads&&(Oe.highImagePreloads+=", "),Oe.highImagePreloads+=Nt):(ui(Oe=[],_e({rel:"preload",href:Mt?void 0:V,as:L},ne)),vr==="high"?kt.highImagePreloads.add(Oe):(kt.bulkPreloads.add(Oe),kt.preloads.images.set(kr,Oe)));break;case"style":if(Oe.styleResources.hasOwnProperty(V))return;ui(Mt=[],_e({rel:"preload",href:V,as:L},ne)),Oe.styleResources[V]=ne&&(typeof ne.crossOrigin=="string"||typeof ne.integrity=="string")?[ne.crossOrigin,ne.integrity]:Ct,kt.preloads.stylesheets.set(V,Mt),kt.bulkPreloads.add(Mt);break;case"script":if(Oe.scriptResources.hasOwnProperty(V))return;Mt=[],kt.preloads.scripts.set(V,Mt),kt.bulkPreloads.add(Mt),ui(Mt,_e({rel:"preload",href:V,as:L},ne)),Oe.scriptResources[V]=ne&&(typeof ne.crossOrigin=="string"||typeof ne.integrity=="string")?[ne.crossOrigin,ne.integrity]:Ct;break;default:if(Oe.unknownResources.hasOwnProperty(L)){if((Mt=Oe.unknownResources[L]).hasOwnProperty(V))return}else Mt={},Oe.unknownResources[L]=Mt;Mt[V]=Ct,(Oe=kt.headers)&&0<Oe.remainingCapacity&&L==="font"&&(kr=hi(V,L,ne),2<=(Oe.remainingCapacity-=kr.length))?(kt.resets.font[V]=Ct,Oe.fontPreloads&&(Oe.fontPreloads+=", "),Oe.fontPreloads+=kr):(ui(Oe=[],V=_e({rel:"preload",href:V,as:L},ne)),L==="font"?kt.fontPreloads.add(Oe):kt.bulkPreloads.add(Oe))}rl(Pe)}}},preloadModule:function(V,L){var ne=Be();if(ne){var Pe=ne.resumableState,Oe=ne.renderState;if(V){var kt=L&&typeof L.as=="string"?L.as:"script";if(kt==="script"){if(Pe.moduleScriptResources.hasOwnProperty(V))return;kt=[],Pe.moduleScriptResources[V]=L&&(typeof L.crossOrigin=="string"||typeof L.integrity=="string")?[L.crossOrigin,L.integrity]:Ct,Oe.preloads.moduleScripts.set(V,kt)}else{if(Pe.moduleUnknownResources.hasOwnProperty(kt)){var Nt=Pe.unknownResources[kt];if(Nt.hasOwnProperty(V))return}else Nt={},Pe.moduleUnknownResources[kt]=Nt;kt=[],Nt[V]=Ct}ui(kt,_e({rel:"modulepreload",href:V},L)),Oe.bulkPreloads.add(kt),rl(ne)}}},preinitStyle:function(V,L,ne){var Pe=Be();if(Pe){var Oe=Pe.resumableState,kt=Pe.renderState;if(V){L=L||"default";var Nt=kt.styles.get(L),Mt=Oe.styleResources.hasOwnProperty(V)?Oe.styleResources[V]:void 0;Mt!==null&&(Oe.styleResources[V]=null,Nt||(Nt={precedence:Ke(ve(L)),rules:[],hrefs:[],sheets:new Map},kt.styles.set(L,Nt)),L={state:0,props:_e({rel:"stylesheet",href:V,"data-precedence":L},ne)},Mt&&(Mt.length===2&&os(L.props,Mt),(kt=kt.preloads.stylesheets.get(V))&&0<kt.length?kt.length=0:L.state=1),Nt.sheets.set(V,L),rl(Pe))}}},preinitScript:function(V,L){var ne=Be();if(ne){var Pe=ne.resumableState,Oe=ne.renderState;if(V){var kt=Pe.scriptResources.hasOwnProperty(V)?Pe.scriptResources[V]:void 0;kt!==null&&(Pe.scriptResources[V]=null,L=_e({src:V,async:!0},L),kt&&(kt.length===2&&os(L,kt),V=Oe.preloads.scripts.get(V))&&(V.length=0),V=[],Oe.scripts.add(V),Is(V,L),rl(ne))}}},preinitModuleScript:function(V,L){var ne=Be();if(ne){var Pe=ne.resumableState,Oe=ne.renderState;if(V){var kt=Pe.moduleScriptResources.hasOwnProperty(V)?Pe.moduleScriptResources[V]:void 0;kt!==null&&(Pe.moduleScriptResources[V]=null,L=_e({src:V,type:"module",async:!0},L),kt&&(kt.length===2&&os(L,kt),V=Oe.preloads.moduleScripts.get(V))&&(V.length=0),V=[],Oe.scripts.add(V),Is(V,L),rl(ne))}}}},Ct=[],Ee=Je('"></template>'),Qe=Je("<script>"),yt=Je("<\/script>"),Rt=Je('<script src="'),Et=Je('<script type="module" src="'),rr=Je('" nonce="'),an=Je('" integrity="'),Hr=Je('" crossorigin="'),gn=Je('" async=""><\/script>'),Or=/(<\/|<)(s)(cript)/gi;function wn(V,L,ne,Pe){return""+L+(ne==="s"?"\\u0073":"\\u0053")+Pe}var Tn=Je('<script type="importmap">'),tn=Je("<\/script>");function rn(V,L,ne){return{insertionMode:V,selectedValue:L,tagScope:ne}}function on(V,L,ne){switch(L){case"noscript":return rn(2,null,1|V.tagScope);case"select":return rn(2,ne.value!=null?ne.value:ne.defaultValue,V.tagScope);case"svg":return rn(3,null,V.tagScope);case"picture":return rn(2,null,2|V.tagScope);case"math":return rn(4,null,V.tagScope);case"foreignObject":return rn(2,null,V.tagScope);case"table":return rn(5,null,V.tagScope);case"thead":case"tbody":case"tfoot":return rn(6,null,V.tagScope);case"colgroup":return rn(8,null,V.tagScope);case"tr":return rn(7,null,V.tagScope)}return 5<=V.insertionMode?rn(2,null,V.tagScope):V.insertionMode===0?rn(L==="html"?1:2,null,V.tagScope):V.insertionMode===1?rn(2,null,V.tagScope):V}var cn=Je("<!-- -->");function On(V,L,ne,Pe){return L===""?Pe:(Pe&&V.push(cn),V.push(Ke(ve(L))),!0)}var Pt=new Map,_n=Je(' style="'),si=Je(":"),zi=Je(";");function Hs(V,L){if(typeof L!="object")throw Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");var ne,Pe=!0;for(ne in L)if(Fe.call(L,ne)){var Oe=L[ne];if(Oe!=null&&typeof Oe!="boolean"&&Oe!==""){if(ne.indexOf("--")===0){var kt=Ke(ve(ne));Oe=Ke(ve((""+Oe).trim()))}else(kt=Pt.get(ne))===void 0&&(kt=Je(ve(ne.replace(Ve,"-$1").toLowerCase().replace(gt,"-ms-"))),Pt.set(ne,kt)),Oe=typeof Oe=="number"?Oe===0||we.has(ne)?Ke(""+Oe):Ke(Oe+"px"):Ke(ve((""+Oe).trim()));Pe?(Pe=!1,V.push(_n,kt,si,Oe)):V.push(zi,kt,si,Oe)}}Pe||V.push(kn)}var es=Je(" "),Ri=Je('="'),kn=Je('"'),st=Je('=""');function Ht(V,L,ne){ne&&typeof ne!="function"&&typeof ne!="symbol"&&V.push(es,Ke(L),st)}function zt(V,L,ne){typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&V.push(es,Ke(L),Ri,Ke(ve(ne)),kn)}function Yt(V){var L=V.nextFormID++;return V.idPrefix+L}var tr=Je(ve("javascript:throw new Error('React form unexpectedly submitted.')")),En=Je('<input type="hidden"');function Kr(V,L){if(this.push(En),typeof V!="string")throw Error("File/Blob fields are not yet supported in progressive forms. It probably means you are closing over binary data or FormData in a Server Action.");zt(this,"name",L),zt(this,"value",V),this.push(qn)}function li(V,L,ne,Pe,Oe,kt,Nt,Mt){var sr=null;return typeof Pe=="function"&&(typeof Pe.$$FORM_ACTION=="function"?(Oe=Yt(L),Mt=(L=Pe.$$FORM_ACTION(Oe)).name,Pe=L.action||"",Oe=L.encType,kt=L.method,Nt=L.target,sr=L.data):(V.push(es,Ke("formAction"),Ri,tr,kn),Nt=kt=Oe=Pe=Mt=null,fi(L,ne))),Mt!=null&&pn(V,"name",Mt),Pe!=null&&pn(V,"formAction",Pe),Oe!=null&&pn(V,"formEncType",Oe),kt!=null&&pn(V,"formMethod",kt),Nt!=null&&pn(V,"formTarget",Nt),sr}function pn(V,L,ne){switch(L){case"className":zt(V,"class",ne);break;case"tabIndex":zt(V,"tabindex",ne);break;case"dir":case"role":case"viewBox":case"width":case"height":zt(V,L,ne);break;case"style":Hs(V,ne);break;case"src":case"href":case"action":case"formAction":if(ne==null||typeof ne=="function"||typeof ne=="symbol"||typeof ne=="boolean")break;ne=""+ne,V.push(es,Ke(L),Ri,Ke(ve(ne)),kn);break;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"autoFocus":case"multiple":case"muted":Ht(V,L.toLowerCase(),ne);break;case"xlinkHref":if(typeof ne=="function"||typeof ne=="symbol"||typeof ne=="boolean")break;ne=""+ne,V.push(es,Ke("xlink:href"),Ri,Ke(ve(ne)),kn);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":typeof ne!="function"&&typeof ne!="symbol"&&V.push(es,Ke(L),Ri,Ke(ve(ne)),kn);break;case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":ne&&typeof ne!="function"&&typeof ne!="symbol"&&V.push(es,Ke(L),st);break;case"capture":case"download":ne===!0?V.push(es,Ke(L),st):ne!==!1&&typeof ne!="function"&&typeof ne!="symbol"&&V.push(es,Ke(L),Ri,Ke(ve(ne)),kn);break;case"cols":case"rows":case"size":case"span":typeof ne!="function"&&typeof ne!="symbol"&&!isNaN(ne)&&1<=ne&&V.push(es,Ke(L),Ri,Ke(ve(ne)),kn);break;case"rowSpan":case"start":typeof ne=="function"||typeof ne=="symbol"||isNaN(ne)||V.push(es,Ke(L),Ri,Ke(ve(ne)),kn);break;case"xlinkActuate":zt(V,"xlink:actuate",ne);break;case"xlinkArcrole":zt(V,"xlink:arcrole",ne);break;case"xlinkRole":zt(V,"xlink:role",ne);break;case"xlinkShow":zt(V,"xlink:show",ne);break;case"xlinkTitle":zt(V,"xlink:title",ne);break;case"xlinkType":zt(V,"xlink:type",ne);break;case"xmlBase":zt(V,"xml:base",ne);break;case"xmlLang":zt(V,"xml:lang",ne);break;case"xmlSpace":zt(V,"xml:space",ne);break;default:if((!(2<L.length)||L[0]!=="o"&&L[0]!=="O"||L[1]!=="n"&&L[1]!=="N")&&tt(L=Ce.get(L)||L)){switch(typeof ne){case"function":case"symbol":return;case"boolean":var Pe=L.toLowerCase().slice(0,5);if(Pe!=="data-"&&Pe!=="aria-")return}V.push(es,Ke(L),Ri,Ke(ve(ne)),kn)}}}var In=Je(">"),qn=Je("/>");function Ln(V,L,ne){if(L!=null){if(ne!=null)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof L!="object"||!("__html"in L))throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.");(L=L.__html)!=null&&V.push(Ke(""+L))}}var Ei=Je(' selected=""'),Ha=Je(`addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`);function fi(V,L){(16&V.instructions)!=0||L.externalRuntimeScript||(V.instructions|=16,L.bootstrapChunks.unshift(L.startInlineScript,Ha,yt))}var Us=Je("<!--F!-->"),ds=Je("<!--F-->");function ui(V,L){for(var ne in V.push(na("link")),L)if(Fe.call(L,ne)){var Pe=L[ne];if(Pe!=null)switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error("link is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:pn(V,ne,Pe)}}return V.push(qn),null}function Ki(V,L,ne){for(var Pe in V.push(na(ne)),L)if(Fe.call(L,Pe)){var Oe=L[Pe];if(Oe!=null)switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(ne+" is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:pn(V,Pe,Oe)}}return V.push(qn),null}function $s(V,L){V.push(na("title"));var ne,Pe=null,Oe=null;for(ne in L)if(Fe.call(L,ne)){var kt=L[ne];if(kt!=null)switch(ne){case"children":Pe=kt;break;case"dangerouslySetInnerHTML":Oe=kt;break;default:pn(V,ne,kt)}}return V.push(In),typeof(L=Array.isArray(Pe)?2>Pe.length?Pe[0]:null:Pe)!="function"&&typeof L!="symbol"&&L!=null&&V.push(Ke(ve(""+L))),Ln(V,Oe,Pe),V.push(Te("title")),null}function Is(V,L){V.push(na("script"));var ne,Pe=null,Oe=null;for(ne in L)if(Fe.call(L,ne)){var kt=L[ne];if(kt!=null)switch(ne){case"children":Pe=kt;break;case"dangerouslySetInnerHTML":Oe=kt;break;default:pn(V,ne,kt)}}return V.push(In),Ln(V,Oe,Pe),typeof Pe=="string"&&V.push(Ke(ve(Pe))),V.push(Te("script")),null}function wa(V,L,ne){V.push(na(ne));var Pe,Oe=ne=null;for(Pe in L)if(Fe.call(L,Pe)){var kt=L[Pe];if(kt!=null)switch(Pe){case"children":ne=kt;break;case"dangerouslySetInnerHTML":Oe=kt;break;default:pn(V,Pe,kt)}}return V.push(In),Ln(V,Oe,ne),typeof ne=="string"?(V.push(Ke(ve(ne))),null):ne}var ua=Je(`
`),ea=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Gi=new Map;function na(V){var L=Gi.get(V);if(L===void 0){if(!ea.test(V))throw Error("Invalid tag: "+V);L=Je("<"+V),Gi.set(V,L)}return L}var Bs=Je("<!DOCTYPE html>"),wo=new Map;function Te(V){var L=wo.get(V);return L===void 0&&(L=Je("</"+V+">"),wo.set(V,L)),L}function dt(V,L){L=L.bootstrapChunks;for(var ne=0;ne<L.length-1;ne++)Q(V,L[ne]);return!(ne<L.length)||(ne=L[ne],L.length=0,se(V,ne))}var At=Je('<template id="'),$t=Je('"></template>'),Ut=Je("<!--$-->"),Jr=Je('<!--$?--><template id="'),Sr=Je('"></template>'),Qn=Je("<!--$!-->"),zn=Je("<!--/$-->"),Qr=Je("<template"),yr=Je('"'),pi=Je(' data-dgst="');Je(' data-msg="'),Je(' data-stck="');var wi=Je("></template>");function $a(V,L,ne){if(Q(V,Jr),ne===null)throw Error("An ID must have been assigned before we can complete the boundary.");return Q(V,L.boundaryPrefix),Q(V,Ke(ne.toString(16))),se(V,Sr)}var Lr=Je('<div hidden id="'),Br=Je('">'),Nn=Je("</div>"),As=Je('<svg aria-hidden="true" style="display:none" id="'),ql=Je('">'),Jo=Je("</svg>"),qs=Je('<math aria-hidden="true" style="display:none" id="'),xl=Je('">'),Au=Je("</math>"),tc=Je('<table hidden id="'),$o=Je('">'),Rc=Je("</table>"),ru=Je('<table hidden><tbody id="'),ci=Je('">'),Zo=Je("</tbody></table>"),ta=Je('<table hidden><tr id="'),bi=Je('">'),Mo=Je("</tr></table>"),Ts=Je('<table hidden><colgroup id="'),io=Je('">'),Ns=Je("</colgroup></table>"),An=Je('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Qa=Je('$RS("'),zl=Je('","'),ii=Je('")<\/script>'),ba=Je('<template data-rsi="" data-sid="'),Gl=Je('" data-pid="'),Hl=Je('$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data="$!",a.setAttribute("data-dgst",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if("/$"===d)if(0===f)break;else f--;else"$"!==d&&"$?"!==d&&"$!"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data="$"}b._reactRetry&&b._reactRetry()}};$RC("'),nu=Je('$RC("'),so=Je(`$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data="$!",a.setAttribute("data-dgst",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if("/$"===d)if(0===f)break;else f--;else"$"!==d&&"$?"!==d&&"$!"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data="$"}b._reactRetry&&b._reactRetry()}};$RM=new Map;
$RR=function(r,t,w){for(var u=$RC,n=$RM,p=new Map,q=document,g,b,h=q.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=h[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&n.set(b.getAttribute("href"),b),p.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var f=w[b++];if(!f){k=!1;b=0;continue}var c=!1,m=0;var d=f[m++];if(a=n.get(d)){var e=a._p;c=!0}else{a=q.createElement("link");a.href=d;a.rel="stylesheet";for(a.dataset.precedence=
l=f[m++];e=f[m++];)a.setAttribute(e,f[m++]);e=a._p=new Promise(function(x,y){a.onload=x;a.onerror=y});n.set(d,a)}d=a.getAttribute("media");!e||"l"===e.s||d&&!matchMedia(d).matches||h.push(e);if(c)continue}else{a=v[b++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=p.get(l)||g;c===g&&(g=a);p.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=q.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(u.bind(null,r,t,""),u.bind(null,r,t,"Resource failed to load"))};$RR("`),Cl=Je(`$RM=new Map;
$RR=function(r,t,w){for(var u=$RC,n=$RM,p=new Map,q=document,g,b,h=q.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=h[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&n.set(b.getAttribute("href"),b),p.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var f=w[b++];if(!f){k=!1;b=0;continue}var c=!1,m=0;var d=f[m++];if(a=n.get(d)){var e=a._p;c=!0}else{a=q.createElement("link");a.href=d;a.rel="stylesheet";for(a.dataset.precedence=
l=f[m++];e=f[m++];)a.setAttribute(e,f[m++]);e=a._p=new Promise(function(x,y){a.onload=x;a.onerror=y});n.set(d,a)}d=a.getAttribute("media");!e||"l"===e.s||d&&!matchMedia(d).matches||h.push(e);if(c)continue}else{a=v[b++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=p.get(l)||g;c===g&&(g=a);p.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=q.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(u.bind(null,r,t,""),u.bind(null,r,t,"Resource failed to load"))};$RR("`),fc=Je('$RR("'),Pc=Je('","'),pa=Je('",'),Qt=Je('"'),Sa=Je(")<\/script>"),ma=Je('<template data-rci="" data-bid="'),wl=Je('<template data-rri="" data-bid="'),pc=Je('" data-sid="'),Bo=Je('" data-sty="'),Kl=Je('$RX=function(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};;$RX("'),xs=Je('$RX("'),Rs=Je('"'),Wl=Je(","),Nu=Je(")<\/script>"),ol=Je('<template data-rxi="" data-bid="'),rc=Je('" data-dgst="'),ho=Je('" data-msg="'),Yc=Je('" data-stck="'),Me=/[<\u2028\u2029]/g;function ct(V){return JSON.stringify(V).replace(Me,function(L){switch(L){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var St=/[&><\u2028\u2029]/g;function Wt(V){return JSON.stringify(V).replace(St,function(L){switch(L){case"&":return"\\u0026";case">":return"\\u003e";case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var or=Je('<style media="not all" data-precedence="'),Ir=Je('" data-href="'),Tr=Je('">'),Cr=Je("</style>"),Yr=!1,qr=!0;function ln(V){var L=V.rules,ne=V.hrefs,Pe=0;if(ne.length){for(Q(this,or),Q(this,V.precedence),Q(this,Ir);Pe<ne.length-1;Pe++)Q(this,ne[Pe]),Q(this,gi);for(Q(this,ne[Pe]),Q(this,Tr),Pe=0;Pe<L.length;Pe++)Q(this,L[Pe]);qr=se(this,Cr),Yr=!0,L.length=0,ne.length=0}}function Pn(V){return V.state!==2&&(Yr=!0)}function Rn(V,L,ne){return Yr=!1,qr=!0,L.styles.forEach(ln,V),L.stylesheets.forEach(Pn),Yr&&(ne.stylesToHoist=!0),qr}function mi(V){for(var L=0;L<V.length;L++)Q(this,V[L]);V.length=0}var Vi=[];function Dn(V){ui(Vi,V.props);for(var L=0;L<Vi.length;L++)Q(this,Vi[L]);Vi.length=0,V.state=2}var ts=Je('<style data-precedence="'),Fs=Je('" data-href="'),gi=Je(" "),as=Je('">'),Zt=Je("</style>");function _i(V){var L=0<V.sheets.size;V.sheets.forEach(Dn,this),V.sheets.clear();var ne=V.rules,Pe=V.hrefs;if(!L||Pe.length){if(Q(this,ts),Q(this,V.precedence),V=0,Pe.length){for(Q(this,Fs);V<Pe.length-1;V++)Q(this,Pe[V]),Q(this,gi);Q(this,Pe[V])}for(Q(this,as),V=0;V<ne.length;V++)Q(this,ne[V]);Q(this,Zt),ne.length=0,Pe.length=0}}function yi(V){if(V.state===0){V.state=1;var L=V.props;for(ui(Vi,{rel:"preload",as:"style",href:V.props.href,crossOrigin:L.crossOrigin,fetchPriority:L.fetchPriority,integrity:L.integrity,media:L.media,hrefLang:L.hrefLang,referrerPolicy:L.referrerPolicy}),V=0;V<Vi.length;V++)Q(this,Vi[V]);Vi.length=0}}function Wi(V){V.sheets.forEach(yi,this),V.sheets.clear()}var Ui=Je("["),Pi=Je(",["),$n=Je(","),ws=Je("]");function bs(){return{styles:new Set,stylesheets:new Set}}function os(V,L){V.crossOrigin==null&&(V.crossOrigin=L[0]),V.integrity==null&&(V.integrity=L[1])}function hi(V,L,ne){for(var Pe in L="<"+(V=(""+V).replace(xe,T))+'>; rel=preload; as="'+(L=(""+L).replace(G,pe))+'"',ne)Fe.call(ne,Pe)&&typeof(V=ne[Pe])=="string"&&(L+="; "+Pe.toLowerCase()+'="'+(""+V).replace(G,pe)+'"');return L}var xe=/[<>\r\n]/g;function T(V){switch(V){case"<":return"%3C";case">":return"%3E";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}var G=/["';,\r\n]/g;function pe(V){switch(V){case'"':return"%22";case"'":return"%27";case";":return"%3B";case",":return"%2C";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}function qe(V){this.styles.add(V)}function wt(V){this.stylesheets.add(V)}var Dt=typeof AsyncLocalStorage=="function",pr=Dt?new AsyncLocalStorage:null,mr=Symbol.for("react.client.reference");function sn(V){if(V==null)return null;if(typeof V=="function")return V.$$typeof===mr?null:V.displayName||V.name||null;if(typeof V=="string")return V;switch(V){case z:return"Fragment";case j:return"Portal";case S:return"Profiler";case y:return"StrictMode";case N:return"Suspense";case U:return"SuspenseList";case Ue:return"Cache"}if(typeof V=="object")switch(V.$$typeof){case k:return(V._context.displayName||"Context")+".Provider";case x:return(V.displayName||"Context")+".Consumer";case C:var L=V.render;return(V=V.displayName)||(V=(V=L.displayName||L.name||"")!==""?"ForwardRef("+V+")":"ForwardRef"),V;case K:return(L=V.displayName||null)!==null?L:sn(V.type)||"Memo";case Y:L=V._payload,V=V._init;try{return sn(V(L))}catch{}}return null}var Sn={};function us(V,L){if(!(V=V.contextTypes))return Sn;var ne,Pe={};for(ne in V)Pe[ne]=L[ne];return Pe}var Cs=null;function xa(V,L){if(V!==L){V.context._currentValue=V.parentValue,V=V.parent;var ne=L.parent;if(V===null){if(ne!==null)throw Error("The stacks must reach the root at the same time. This is a bug in React.")}else{if(ne===null)throw Error("The stacks must reach the root at the same time. This is a bug in React.");xa(V,ne)}L.context._currentValue=L.value}}function Ea(V){var L=Cs;L!==V&&(L===null?function ne(Pe){var Oe=Pe.parent;Oe!==null&&ne(Oe),Pe.context._currentValue=Pe.value}(V):V===null?function ne(Pe){Pe.context._currentValue=Pe.parentValue,(Pe=Pe.parent)!==null&&ne(Pe)}(L):L.depth===V.depth?xa(L,V):L.depth>V.depth?function ne(Pe,Oe){if(Pe.context._currentValue=Pe.parentValue,(Pe=Pe.parent)===null)throw Error("The depth must equal at least at zero before reaching the root. This is a bug in React.");Pe.depth===Oe.depth?xa(Pe,Oe):ne(Pe,Oe)}(L,V):function ne(Pe,Oe){var kt=Oe.parent;if(kt===null)throw Error("The depth must equal at least at zero before reaching the root. This is a bug in React.");Pe.depth===kt.depth?xa(Pe,kt):ne(Pe,kt),Oe.context._currentValue=Oe.value}(L,V),Cs=V)}var el={isMounted:function(){return!1},enqueueSetState:function(V,L){(V=V._reactInternals).queue!==null&&V.queue.push(L)},enqueueReplaceState:function(V,L){(V=V._reactInternals).replace=!0,V.queue=[L]},enqueueForceUpdate:function(){}};function ia(V,L,ne,Pe){var Oe=V.state!==void 0?V.state:null;V.updater=el,V.props=ne,V.state=Oe;var kt={queue:[],replace:!1};V._reactInternals=kt;var Nt=L.contextType;if(V.context=typeof Nt=="object"&&Nt!==null?Nt._currentValue:Pe,typeof(Nt=L.getDerivedStateFromProps)=="function"&&(Oe=(Nt=Nt(ne,Oe))==null?Oe:_e({},Oe,Nt),V.state=Oe),typeof L.getDerivedStateFromProps!="function"&&typeof V.getSnapshotBeforeUpdate!="function"&&(typeof V.UNSAFE_componentWillMount=="function"||typeof V.componentWillMount=="function"))if(L=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),L!==V.state&&el.enqueueReplaceState(V,V.state,null),kt.queue!==null&&0<kt.queue.length)if(L=kt.queue,Nt=kt.replace,kt.queue=null,kt.replace=!1,Nt&&L.length===1)V.state=L[0];else{for(kt=Nt?L[0]:V.state,Oe=!0,Nt=Nt?1:0;Nt<L.length;Nt++){var Mt=L[Nt];(Mt=typeof Mt=="function"?Mt.call(V,kt,ne,Pe):Mt)!=null&&(Oe?(Oe=!1,kt=_e({},kt,Mt)):_e(kt,Mt))}V.state=kt}else kt.queue=null}var Ss={id:1,overflow:""};function _a(V,L,ne){var Pe=V.id;V=V.overflow;var Oe=32-sa(Pe)-1;Pe&=~(1<<Oe),ne+=1;var kt=32-sa(L)+Oe;if(30<kt){var Nt=Oe-Oe%5;return kt=(Pe&(1<<Nt)-1).toString(32),Pe>>=Nt,Oe-=Nt,{id:1<<32-sa(L)+Oe|ne<<Oe|Pe,overflow:kt+V}}return{id:1<<kt|ne<<Oe|Pe,overflow:V}}var sa=Math.clz32?Math.clz32:function(V){return(V>>>=0)==0?32:31-(Ks(V)/Oa|0)|0},Ks=Math.log,Oa=Math.LN2,ys=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`");function Ia(){}var fo=null;function Da(){if(fo===null)throw Error("Expected a suspended thenable. This is a bug in React. Please file an issue.");var V=fo;return fo=null,V}var po=typeof Object.is=="function"?Object.is:function(V,L){return V===L&&(V!==0||1/V==1/L)||V!=V&&L!=L},ms=null,mo=null,Lo=null,Ya=null,Ji=null,jn=null,$i=!1,cs=!1,Ta=0,Ws=0,Ma=-1,Gn=0,ss=null,Ds=null,Ba=0;function Ca(){if(ms===null)throw Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`);return ms}function Xa(){if(0<Ba)throw Error("Rendered more hooks than during the previous render");return{memoizedState:null,queue:null,next:null}}function rs(){return jn===null?Ji===null?($i=!1,Ji=jn=Xa()):($i=!0,jn=Ji):jn.next===null?($i=!1,jn=jn.next=Xa()):($i=!0,jn=jn.next),jn}function Li(){var V=ss;return ss=null,V}function Qi(){Ya=Lo=mo=ms=null,cs=!1,Ji=null,Ba=0,jn=Ds=null}function ko(V,L){return typeof L=="function"?L(V):L}function Za(V,L,ne){if(ms=Ca(),jn=rs(),$i){var Pe=jn.queue;if(L=Pe.dispatch,Ds!==null&&(ne=Ds.get(Pe))!==void 0){Ds.delete(Pe),Pe=jn.memoizedState;do Pe=V(Pe,ne.action),ne=ne.next;while(ne!==null);return jn.memoizedState=Pe,[Pe,L]}return[jn.memoizedState,L]}return V=V===ko?typeof L=="function"?L():L:ne!==void 0?ne(L):L,jn.memoizedState=V,V=(V=jn.queue={last:null,dispatch:null}).dispatch=tl.bind(null,ms,V),[jn.memoizedState,V]}function ll(V,L){if(ms=Ca(),jn=rs(),L=L===void 0?null:L,jn!==null){var ne=jn.memoizedState;if(ne!==null&&L!==null){var Pe=ne[1];e:if(Pe===null)Pe=!1;else{for(var Oe=0;Oe<Pe.length&&Oe<L.length;Oe++)if(!po(L[Oe],Pe[Oe])){Pe=!1;break e}Pe=!0}if(Pe)return ne[0]}}return V=V(),jn.memoizedState=[V,L],V}function tl(V,L,ne){if(25<=Ba)throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");if(V===ms)if(cs=!0,V={action:ne,next:null},Ds===null&&(Ds=new Map),(ne=Ds.get(L))===void 0)Ds.set(L,V);else{for(L=ne;L.next!==null;)L=L.next;L.next=V}}function Ou(){throw Error("startTransition cannot be called during server rendering.")}function kl(){throw Error("Cannot update optimistic state while rendering.")}function Jl(V){var L=Gn;return Gn+=1,ss===null&&(ss=[]),function(ne,Pe,Oe){switch((Oe=ne[Oe])===void 0?ne.push(Pe):Oe!==Pe&&(Pe.then(Ia,Ia),Pe=Oe),Pe.status){case"fulfilled":return Pe.value;case"rejected":throw Pe.reason;default:if(typeof Pe.status!="string")switch((ne=Pe).status="pending",ne.then(function(kt){if(Pe.status==="pending"){var Nt=Pe;Nt.status="fulfilled",Nt.value=kt}},function(kt){if(Pe.status==="pending"){var Nt=Pe;Nt.status="rejected",Nt.reason=kt}}),Pe.status){case"fulfilled":return Pe.value;case"rejected":throw Pe.reason}throw fo=Pe,ys}}(ss,V,L)}function nc(){throw Error("Cache cannot be refreshed during server rendering.")}function Ac(){}var sf,gu={readContext:function(V){return V._currentValue},use:function(V){if(V!==null&&typeof V=="object"){if(typeof V.then=="function")return Jl(V);if(V.$$typeof===x)return V._currentValue}throw Error("An unsupported type was passed to use(): "+String(V))},useContext:function(V){return Ca(),V._currentValue},useMemo:ll,useReducer:Za,useRef:function(V){ms=Ca();var L=(jn=rs()).memoizedState;return L===null?(V={current:V},jn.memoizedState=V):L},useState:function(V){return Za(ko,V)},useInsertionEffect:Ac,useLayoutEffect:Ac,useCallback:function(V,L){return ll(function(){return V},L)},useImperativeHandle:Ac,useEffect:Ac,useDebugValue:Ac,useDeferredValue:function(V){return Ca(),V},useTransition:function(){return Ca(),[!1,Ou]},useId:function(){var V=mo.treeContext,L=V.overflow;V=((V=V.id)&~(1<<32-sa(V)-1)).toString(32)+L;var ne=Nc;if(ne===null)throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component.");return L=Ta++,V=":"+ne.idPrefix+"R"+V,0<L&&(V+="H"+L.toString(32)),V+":"},useSyncExternalStore:function(V,L,ne){if(ne===void 0)throw Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");return ne()},useCacheRefresh:function(){return nc},useHostTransitionStatus:function(){return Ca(),lt},useOptimistic:function(V){return Ca(),[V,kl]},useFormState:function(V,L,ne){Ca();var Pe=Ws++,Oe=Lo;if(typeof V.$$FORM_ACTION=="function"){var kt=null,Nt=Ya;Oe=Oe.formState;var Mt=V.$$IS_SIGNATURE_EQUAL;if(Oe!==null&&typeof Mt=="function"){var sr=Oe[1];Mt.call(V,Oe[2],Oe[3])&&sr===(kt=ne!==void 0?"p"+ne:"k"+jt(JSON.stringify([Nt,null,Pe]),0))&&(Ma=Pe,L=Oe[0])}var vr=V.bind(null,L);return V=function(Mr){vr(Mr)},typeof vr.$$FORM_ACTION=="function"&&(V.$$FORM_ACTION=function(Mr){Mr=vr.$$FORM_ACTION(Mr),ne!==void 0&&(ne+="",Mr.action=ne);var fn=Mr.data;return fn&&(kt===null&&(kt=ne!==void 0?"p"+ne:"k"+jt(JSON.stringify([Nt,null,Pe]),0)),fn.append("$ACTION_KEY",kt)),Mr}),[L,V]}var kr=V.bind(null,L);return[L,function(Mr){kr(Mr)}]}},Nc=null,af={getCacheSignal:function(){throw Error("Not implemented.")},getCacheForType:function(){throw Error("Not implemented.")}};function Oc(V){if(sf===void 0)try{throw Error()}catch(ne){var L=ne.stack.trim().match(/\n( *(at )?)/);sf=L&&L[1]||""}return`
`+sf+V}var Du=!1;function eo(V,L){if(!V||Du)return"";Du=!0;var ne=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Pe={DetermineComponentFrameRoot:function(){try{if(L){var Mr=function(){throw Error()};if(Object.defineProperty(Mr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mr,[])}catch(ti){var fn=ti}Reflect.construct(V,[],Mr)}else{try{Mr.call()}catch(ti){fn=ti}V.call(Mr.prototype)}}else{try{throw Error()}catch(ti){fn=ti}(Mr=V())&&typeof Mr.catch=="function"&&Mr.catch(function(){})}}catch(ti){if(ti&&fn&&typeof ti.stack=="string")return[ti.stack,fn.stack]}return[null,null]}};Pe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Oe=Object.getOwnPropertyDescriptor(Pe.DetermineComponentFrameRoot,"name");Oe&&Oe.configurable&&Object.defineProperty(Pe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});try{var kt=Pe.DetermineComponentFrameRoot(),Nt=kt[0],Mt=kt[1];if(Nt&&Mt){var sr=Nt.split(`
`),vr=Mt.split(`
`);for(Oe=Pe=0;Pe<sr.length&&!sr[Pe].includes("DetermineComponentFrameRoot");)Pe++;for(;Oe<vr.length&&!vr[Oe].includes("DetermineComponentFrameRoot");)Oe++;if(Pe===sr.length||Oe===vr.length)for(Pe=sr.length-1,Oe=vr.length-1;1<=Pe&&0<=Oe&&sr[Pe]!==vr[Oe];)Oe--;for(;1<=Pe&&0<=Oe;Pe--,Oe--)if(sr[Pe]!==vr[Oe]){if(Pe!==1||Oe!==1)do if(Pe--,Oe--,0>Oe||sr[Pe]!==vr[Oe]){var kr=`
`+sr[Pe].replace(" at new "," at ");return V.displayName&&kr.includes("<anonymous>")&&(kr=kr.replace("<anonymous>",V.displayName)),kr}while(1<=Pe&&0<=Oe);break}}}finally{Du=!1,Error.prepareStackTrace=ne}return(ne=V?V.displayName||V.name:"")?Oc(ne):""}var iu=mt.ReactCurrentDispatcher,Mu=mt.ReactCurrentCache;function Xc(V){return console.error(V),null}function Lu(){}var yu=null;function Be(){if(yu)return yu;if(Dt){var V=pr.getStore();if(V)return V}return null}function B(V,L){V.pingedTasks.push(L),V.pingedTasks.length===1&&(V.flushScheduled=V.destination!==null,setTimeout(function(){return Ms(V)},0))}function le(V,L){return{status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,completedSegments:[],byteSize:0,fallbackAbortableTasks:L,errorDigest:null,contentState:bs(),fallbackState:bs(),trackedContentKeyPath:null,trackedFallbackNode:null}}function be(V,L,ne,Pe,Oe,kt,Nt,Mt,sr,vr,kr,Mr,fn,ti,Fn){V.allPendingTasks++,Oe===null?V.pendingRootTasks++:Oe.pendingTasks++;var yn={replay:null,node:ne,childIndex:Pe,ping:function(){return B(V,yn)},blockedBoundary:Oe,blockedSegment:kt,hoistableState:Nt,abortSet:Mt,keyPath:sr,formatContext:vr,legacyContext:kr,context:Mr,treeContext:fn,componentStack:ti,thenableState:L,isFallback:Fn};return Mt.add(yn),yn}function Xe(V,L,ne,Pe,Oe,kt,Nt,Mt,sr,vr,kr,Mr,fn,ti,Fn){V.allPendingTasks++,kt===null?V.pendingRootTasks++:kt.pendingTasks++,ne.pendingTasks++;var yn={replay:ne,node:Pe,childIndex:Oe,ping:function(){return B(V,yn)},blockedBoundary:kt,blockedSegment:null,hoistableState:Nt,abortSet:Mt,keyPath:sr,formatContext:vr,legacyContext:kr,context:Mr,treeContext:fn,componentStack:ti,thenableState:L,isFallback:Fn};return Mt.add(yn),yn}function ot(V,L,ne,Pe,Oe,kt){return{status:0,id:-1,index:L,parentFlushed:!1,chunks:[],children:[],parentFormatContext:Pe,boundary:ne,lastPushedText:Oe,textEmbedded:kt}}function Gt(V,L){return{tag:0,parent:V.componentStack,type:L}}function cr(V,L){if(L&&V.trackedPostpones!==null){try{V="";do{switch(L.tag){case 0:V+=Oc(L.type,null);break;case 1:V+=eo(L.type,!1);break;case 2:V+=eo(L.type,!0)}L=L.parent}while(L);var ne=V}catch(Pe){ne=`
Error generating stack: `+Pe.message+`
`+Pe.stack}ne={componentStack:ne}}else ne={};return ne}function Er(V,L,ne){if((V=V.onError(L,ne))==null||typeof V=="string")return V}function br(V,L){var ne=V.onShellError;ne(L),(ne=V.onFatalError)(L),V.destination!==null?(V.status=2,He(V.destination,L)):(V.status=1,V.fatalError=L)}function nn(V,L,ne,Pe,Oe,kt){var Nt=L.thenableState;for(L.thenableState=null,ms={},mo=L,Lo=V,Ya=ne,Ws=Ta=0,Ma=-1,Gn=0,ss=Nt,V=Pe(Oe,kt);cs;)cs=!1,Ws=Ta=0,Ma=-1,Gn=0,Ba+=1,jn=null,V=Pe(Oe,kt);return Qi(),V}function Mn(V,L,ne,Pe,Oe){var kt=Pe.render(),Nt=Oe.childContextTypes;if(Nt!=null){if(ne=L.legacyContext,typeof Pe.getChildContext!="function")Oe=ne;else{for(var Mt in Pe=Pe.getChildContext())if(!(Mt in Nt))throw Error((sn(Oe)||"Unknown")+'.getChildContext(): key "'+Mt+'" is not defined in childContextTypes.');Oe=_e({},ne,Pe)}L.legacyContext=Oe,Un(V,L,kt,-1),L.legacyContext=ne}else Oe=L.keyPath,L.keyPath=ne,Un(V,L,kt,-1),L.keyPath=Oe}function Bn(V,L,ne,Pe,Oe,kt,Nt){var Mt=!1;if(kt!==0&&V.formState!==null){var sr=L.blockedSegment;if(sr!==null){Mt=!0,sr=sr.chunks;for(var vr=0;vr<kt;vr++)vr===Nt?sr.push(Us):sr.push(ds)}}kt=L.keyPath,L.keyPath=ne,Oe?(ne=L.treeContext,L.treeContext=_a(ne,1,0),Di(V,L,Pe,-1),L.treeContext=ne):Mt?Di(V,L,Pe,-1):Un(V,L,Pe,-1),L.keyPath=kt}function Ci(V,L){if(V&&V.defaultProps)for(var ne in L=_e({},L),V=V.defaultProps)L[ne]===void 0&&(L[ne]=V[ne]);return L}function dn(V,L,ne,Pe,Oe,kt){if(typeof Pe=="function")if(Pe.prototype&&Pe.prototype.isReactComponent){kt=L.componentStack,L.componentStack={tag:2,parent:L.componentStack,type:Pe};var Nt=us(Pe,L.legacyContext),Mt=Pe.contextType;ia(Mt=new Pe(Oe,typeof Mt=="object"&&Mt!==null?Mt._currentValue:Nt),Pe,Oe,Nt),Mn(V,L,ne,Mt,Pe),L.componentStack=kt}else{kt=us(Pe,L.legacyContext),Nt=L.componentStack,L.componentStack={tag:1,parent:L.componentStack,type:Pe},Mt=nn(V,L,ne,Pe,Oe,kt);var sr=Ta!==0,vr=Ws,kr=Ma;typeof Mt=="object"&&Mt!==null&&typeof Mt.render=="function"&&Mt.$$typeof===void 0?(ia(Mt,Pe,Oe,kt),Mn(V,L,ne,Mt,Pe)):Bn(V,L,ne,Mt,sr,vr,kr),L.componentStack=Nt}else if(typeof Pe=="string"){if(kt=L.componentStack,L.componentStack=Gt(L,Pe),(Nt=L.blockedSegment)===null)Nt=Oe.children,Mt=L.formatContext,sr=L.keyPath,L.formatContext=on(Mt,Pe,Oe),L.keyPath=ne,Di(V,L,Nt,-1),L.formatContext=Mt,L.keyPath=sr;else{sr=function(Ur,hs,Pr,Si,mn,ki,Es,Fi,Ai){switch(hs){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":break;case"select":Ur.push(na("select"));var Qs,Ls=null,ca=null;for(Qs in Pr)if(Fe.call(Pr,Qs)){var Zr=Pr[Qs];if(Zr!=null)switch(Qs){case"children":Ls=Zr;break;case"dangerouslySetInnerHTML":ca=Zr;break;case"defaultValue":case"value":break;default:pn(Ur,Qs,Zr)}}return Ur.push(In),Ln(Ur,ca,Ls),Ls;case"option":var _s=Es.selectedValue;Ur.push(na("option"));var zs,go=null,_r=null,Nr=null,Cn=null;for(zs in Pr)if(Fe.call(Pr,zs)){var ks=Pr[zs];if(ks!=null)switch(zs){case"children":go=ks;break;case"selected":Nr=ks;break;case"dangerouslySetInnerHTML":Cn=ks;break;case"value":_r=ks;default:pn(Ur,zs,ks)}}if(_s!=null){var cl,ju,za=_r!==null?""+_r:(cl=go,ju="",q.Children.forEach(cl,function(ih){ih!=null&&(ju+=ih)}),ju);if(vt(_s)){for(var bl=0;bl<_s.length;bl++)if(""+_s[bl]===za){Ur.push(Ei);break}}else""+_s===za&&Ur.push(Ei)}else Nr&&Ur.push(Ei);return Ur.push(In),Ln(Ur,Cn,go),go;case"textarea":Ur.push(na("textarea"));var ka,yo=null,Rl=null,vu=null;for(ka in Pr)if(Fe.call(Pr,ka)){var jo=Pr[ka];if(jo!=null)switch(ka){case"children":vu=jo;break;case"value":yo=jo;break;case"defaultValue":Rl=jo;break;case"dangerouslySetInnerHTML":throw Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");default:pn(Ur,ka,jo)}}if(yo===null&&Rl!==null&&(yo=Rl),Ur.push(In),vu!=null){if(yo!=null)throw Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(vt(vu)){if(1<vu.length)throw Error("<textarea> can only have at most one child.");yo=""+vu[0]}yo=""+vu}return typeof yo=="string"&&yo[0]===`
`&&Ur.push(ua),yo!==null&&Ur.push(Ke(ve(""+yo))),null;case"input":Ur.push(na("input"));var Bi,Zc=null,bo=null,Xi=null,gh=null,La=null,Fp=null,ao=null,Xn=null,Po=null;for(Bi in Pr)if(Fe.call(Pr,Bi)){var wu=Pr[Bi];if(wu!=null)switch(Bi){case"children":case"dangerouslySetInnerHTML":throw Error("input is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");case"name":Zc=wu;break;case"formAction":bo=wu;break;case"formEncType":Xi=wu;break;case"formMethod":gh=wu;break;case"formTarget":La=wu;break;case"defaultChecked":Po=wu;break;case"defaultValue":ao=wu;break;case"checked":Xn=wu;break;case"value":Fp=wu;break;default:pn(Ur,Bi,wu)}}var eh=li(Ur,Si,mn,bo,Xi,gh,La,Zc);return Xn!==null?Ht(Ur,"checked",Xn):Po!==null&&Ht(Ur,"checked",Po),Fp!==null?pn(Ur,"value",Fp):ao!==null&&pn(Ur,"value",ao),Ur.push(qn),eh!==null&&eh.forEach(Kr,Ur),null;case"button":Ur.push(na("button"));var Fu,bu=null,vd=null,mc=null,Sl=null,yh=null,wd=null,Dc=null;for(Fu in Pr)if(Fe.call(Pr,Fu)){var Ao=Pr[Fu];if(Ao!=null)switch(Fu){case"children":bu=Ao;break;case"dangerouslySetInnerHTML":vd=Ao;break;case"name":mc=Ao;break;case"formAction":Sl=Ao;break;case"formEncType":yh=Ao;break;case"formMethod":wd=Ao;break;case"formTarget":Dc=Ao;break;default:pn(Ur,Fu,Ao)}}var gr=li(Ur,Si,mn,Sl,yh,wd,Dc,mc);if(Ur.push(In),gr!==null&&gr.forEach(Kr,Ur),Ln(Ur,vd,bu),typeof bu=="string"){Ur.push(Ke(ve(bu)));var Vu=null}else Vu=bu;return Vu;case"form":Ur.push(na("form"));var Ql,Uh=null,bd=null,Uu=null,Su=null,Sd=null,$u=null;for(Ql in Pr)if(Fe.call(Pr,Ql)){var gc=Pr[Ql];if(gc!=null)switch(Ql){case"children":Uh=gc;break;case"dangerouslySetInnerHTML":bd=gc;break;case"action":Uu=gc;break;case"encType":Su=gc;break;case"method":Sd=gc;break;case"target":$u=gc;break;default:pn(Ur,Ql,gc)}}var vh=null,Mc=null;if(typeof Uu=="function")if(typeof Uu.$$FORM_ACTION=="function"){var Ed=Yt(Si),oo=Uu.$$FORM_ACTION(Ed);Uu=oo.action||"",Su=oo.encType,Sd=oo.method,$u=oo.target,vh=oo.data,Mc=oo.name}else Ur.push(es,Ke("action"),Ri,tr,kn),$u=Sd=Su=Uu=null,fi(Si,mn);if(Uu!=null&&pn(Ur,"action",Uu),Su!=null&&pn(Ur,"encType",Su),Sd!=null&&pn(Ur,"method",Sd),$u!=null&&pn(Ur,"target",$u),Ur.push(In),Mc!==null&&(Ur.push(En),zt(Ur,"name",Mc),Ur.push(qn),vh!==null&&vh.forEach(Kr,Ur)),Ln(Ur,bd,Uh),typeof Uh=="string"){Ur.push(Ke(ve(Uh)));var Vp=null}else Vp=Uh;return Vp;case"menuitem":for(var th in Ur.push(na("menuitem")),Pr)if(Fe.call(Pr,th)){var Qf=Pr[th];if(Qf!=null)switch(th){case"children":case"dangerouslySetInnerHTML":throw Error("menuitems cannot have `children` nor `dangerouslySetInnerHTML`.");default:pn(Ur,th,Qf)}}return Ur.push(In),null;case"title":if(Es.insertionMode===3||1&Es.tagScope||Pr.itemProp!=null)var Fo=$s(Ur,Pr);else Ai?Fo=null:($s(mn.hoistableChunks,Pr),Fo=void 0);return Fo;case"link":var su=Pr.rel,Pl=Pr.href,Eu=Pr.precedence;if(Es.insertionMode===3||1&Es.tagScope||Pr.itemProp!=null||typeof su!="string"||typeof Pl!="string"||Pl===""){ui(Ur,Pr);var Lc=null}else if(Pr.rel==="stylesheet")if(typeof Eu!="string"||Pr.disabled!=null||Pr.onLoad||Pr.onError)Lc=ui(Ur,Pr);else{var jc=mn.styles.get(Eu),wh=Si.styleResources.hasOwnProperty(Pl)?Si.styleResources[Pl]:void 0;if(wh!==null){Si.styleResources[Pl]=null,jc||(jc={precedence:Ke(ve(Eu)),rules:[],hrefs:[],sheets:new Map},mn.styles.set(Eu,jc));var bh={state:0,props:_e({},Pr,{"data-precedence":Pr.precedence,precedence:null})};if(wh){wh.length===2&&os(bh.props,wh);var Up=mn.preloads.stylesheets.get(Pl);Up&&0<Up.length?Up.length=0:bh.state=1}jc.sheets.set(Pl,bh),ki&&ki.stylesheets.add(bh)}else if(jc){var of=jc.sheets.get(Pl);of&&ki&&ki.stylesheets.add(of)}Fi&&Ur.push(cn),Lc=null}else Pr.onLoad||Pr.onError?Lc=ui(Ur,Pr):(Fi&&Ur.push(cn),Lc=Ai?null:ui(mn.hoistableChunks,Pr));return Lc;case"script":var Yf=Pr.async;if(typeof Pr.src!="string"||!Pr.src||!Yf||typeof Yf=="function"||typeof Yf=="symbol"||Pr.onLoad||Pr.onError||Es.insertionMode===3||1&Es.tagScope||Pr.itemProp!=null)var _d=Is(Ur,Pr);else{var $h=Pr.src;if(Pr.type==="module")var Sh=Si.moduleScriptResources,lf=mn.preloads.moduleScripts;else Sh=Si.scriptResources,lf=mn.preloads.scripts;var Xf=Sh.hasOwnProperty($h)?Sh[$h]:void 0;if(Xf!==null){Sh[$h]=null;var El=Pr;if(Xf){Xf.length===2&&os(El=_e({},Pr),Xf);var Bh=lf.get($h);Bh&&(Bh.length=0)}var qh=[];mn.scripts.add(qh),Is(qh,El)}Fi&&Ur.push(cn),_d=null}return _d;case"style":var sc=Pr.precedence,Bu=Pr.href;if(Es.insertionMode===3||1&Es.tagScope||Pr.itemProp!=null||typeof sc!="string"||typeof Bu!="string"||Bu===""){Ur.push(na("style"));var rh,qo=null,uf=null;for(rh in Pr)if(Fe.call(Pr,rh)){var So=Pr[rh];if(So!=null)switch(rh){case"children":qo=So;break;case"dangerouslySetInnerHTML":uf=So;break;default:pn(Ur,rh,So)}}Ur.push(In);var Eh=Array.isArray(qo)?2>qo.length?qo[0]:null:qo;typeof Eh!="function"&&typeof Eh!="symbol"&&Eh!=null&&Ur.push(Ke(ve(""+Eh))),Ln(Ur,uf,qo),Ur.push(Te("style"));var _h=null}else{var au=mn.styles.get(sc);if((Si.styleResources.hasOwnProperty(Bu)?Si.styleResources[Bu]:void 0)!==null){Si.styleResources[Bu]=null,au?au.hrefs.push(Ke(ve(Bu))):(au={precedence:Ke(ve(sc)),rules:[],hrefs:[Ke(ve(Bu))],sheets:new Map},mn.styles.set(sc,au));var oa,Fc=au.rules,ja=null,ha=null;for(oa in Pr)if(Fe.call(Pr,oa)){var yc=Pr[oa];if(yc!=null)switch(oa){case"children":ja=yc;break;case"dangerouslySetInnerHTML":ha=yc}}var vc=Array.isArray(ja)?2>ja.length?ja[0]:null:ja;typeof vc!="function"&&typeof vc!="symbol"&&vc!=null&&Fc.push(Ke(ve(""+vc))),Ln(Fc,ha,ja)}au&&ki&&ki.styles.add(au),Fi&&Ur.push(cn),_h=void 0}return _h;case"meta":if(Es.insertionMode===3||1&Es.tagScope||Pr.itemProp!=null)var hl=Ki(Ur,Pr,"meta");else Fi&&Ur.push(cn),hl=Ai?null:typeof Pr.charSet=="string"?Ki(mn.charsetChunks,Pr,"meta"):Pr.name==="viewport"?Ki(mn.viewportChunks,Pr,"meta"):Ki(mn.hoistableChunks,Pr,"meta");return hl;case"listing":case"pre":Ur.push(na(hs));var nh,Fa=null,Id=null;for(nh in Pr)if(Fe.call(Pr,nh)){var qu=Pr[nh];if(qu!=null)switch(nh){case"children":Fa=qu;break;case"dangerouslySetInnerHTML":Id=qu;break;default:pn(Ur,nh,qu)}}if(Ur.push(In),Id!=null){if(Fa!=null)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof Id!="object"||!("__html"in Id))throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.");var Wa=Id.__html;Wa!=null&&(typeof Wa=="string"&&0<Wa.length&&Wa[0]===`
`?Ur.push(ua,Ke(Wa)):Ur.push(Ke(""+Wa)))}return typeof Fa=="string"&&Fa[0]===`
`&&Ur.push(ua),Fa;case"img":var lo=Pr.src,No=Pr.srcSet;if(!(Pr.loading==="lazy"||!lo&&!No||typeof lo!="string"&&lo!=null||typeof No!="string"&&No!=null)&&Pr.fetchPriority!=="low"&&!(2&Es.tagScope)&&(typeof lo!="string"||lo[4]!==":"||lo[0]!=="d"&&lo[0]!=="D"||lo[1]!=="a"&&lo[1]!=="A"||lo[2]!=="t"&&lo[2]!=="T"||lo[3]!=="a"&&lo[3]!=="A")&&(typeof No!="string"||No[4]!==":"||No[0]!=="d"&&No[0]!=="D"||No[1]!=="a"&&No[1]!=="A"||No[2]!=="t"&&No[2]!=="T"||No[3]!=="a"&&No[3]!=="A")){var zh=typeof Pr.sizes=="string"?Pr.sizes:void 0,ou=No?No+`
`+(zh||""):lo,cf=mn.preloads.images,dl=cf.get(ou);if(dl)(Pr.fetchPriority==="high"||10>mn.highImagePreloads.size)&&(cf.delete(ou),mn.highImagePreloads.add(dl));else if(!Si.imageResources.hasOwnProperty(ou)){Si.imageResources[ou]=Ct;var _u,Gh=Pr.crossOrigin,Vc=typeof Gh=="string"?Gh==="use-credentials"?Gh:"":void 0,Yl=mn.headers;Yl&&0<Yl.remainingCapacity&&(Pr.fetchPriority==="high"||500>Yl.highImagePreloads.length)&&(_u=hi(lo,"image",{imageSrcSet:Pr.srcSet,imageSizes:Pr.sizes,crossOrigin:Vc,integrity:Pr.integrity,nonce:Pr.nonce,type:Pr.type,fetchPriority:Pr.fetchPriority,referrerPolicy:Pr.refererPolicy}),2<=(Yl.remainingCapacity-=_u.length))?(mn.resets.image[ou]=Ct,Yl.highImagePreloads&&(Yl.highImagePreloads+=", "),Yl.highImagePreloads+=_u):(ui(dl=[],{rel:"preload",as:"image",href:No?void 0:lo,imageSrcSet:No,imageSizes:zh,crossOrigin:Vc,integrity:Pr.integrity,type:Pr.type,fetchPriority:Pr.fetchPriority,referrerPolicy:Pr.referrerPolicy}),Pr.fetchPriority==="high"||10>mn.highImagePreloads.size?mn.highImagePreloads.add(dl):(mn.bulkPreloads.add(dl),cf.set(ou,dl)))}}return Ki(Ur,Pr,"img");case"base":case"area":case"br":case"col":case"embed":case"hr":case"keygen":case"param":case"source":case"track":case"wbr":return Ki(Ur,Pr,hs);case"head":if(2>Es.insertionMode&&mn.headChunks===null){mn.headChunks=[];var Ih=wa(mn.headChunks,Pr,"head")}else Ih=wa(Ur,Pr,"head");return Ih;case"html":if(Es.insertionMode===0&&mn.htmlChunks===null){mn.htmlChunks=[Bs];var wc=wa(mn.htmlChunks,Pr,"html")}else wc=wa(Ur,Pr,"html");return wc;default:if(hs.indexOf("-")!==-1){Ur.push(na(hs));var ac,bc=null,zu=null;for(ac in Pr)if(Fe.call(Pr,ac)){var Ra=Pr[ac];if(Ra!=null)switch(ac){case"children":bc=Ra;break;case"dangerouslySetInnerHTML":zu=Ra;break;case"style":Hs(Ur,Ra);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;default:tt(ac)&&typeof Ra!="function"&&typeof Ra!="symbol"&&Ur.push(es,Ke(ac),Ri,Ke(ve(Ra)),kn)}}return Ur.push(In),Ln(Ur,zu,bc),bc}}return wa(Ur,Pr,hs)}(Nt.chunks,Pe,Oe,V.resumableState,V.renderState,L.hoistableState,L.formatContext,Nt.lastPushedText,L.isFallback),Nt.lastPushedText=!1,Mt=L.formatContext,vr=L.keyPath,L.formatContext=on(Mt,Pe,Oe),L.keyPath=ne,Di(V,L,sr,-1),L.formatContext=Mt,L.keyPath=vr;e:{switch(ne=Nt.chunks,V=V.resumableState,Pe){case"title":case"style":case"script":case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break e;case"body":if(1>=Mt.insertionMode){V.hasBody=!0;break e}break;case"html":if(Mt.insertionMode===0){V.hasHtml=!0;break e}}ne.push(Te(Pe))}Nt.lastPushedText=!1}L.componentStack=kt}else{switch(Pe){case ze:case fe:case y:case S:case z:Pe=L.keyPath,L.keyPath=ne,Un(V,L,Oe.children,-1),L.keyPath=Pe;return;case Se:Oe.mode!=="hidden"&&(Pe=L.keyPath,L.keyPath=ne,Un(V,L,Oe.children,-1),L.keyPath=Pe);return;case U:Pe=L.componentStack,L.componentStack=Gt(L,"SuspenseList"),kt=L.keyPath,L.keyPath=ne,Un(V,L,Oe.children,-1),L.keyPath=kt,L.componentStack=Pe;return;case ee:throw Error("ReactDOMServer does not yet support scope components.");case N:e:if(L.replay!==null){Pe=L.keyPath,L.keyPath=ne,ne=Oe.children;try{Di(V,L,ne,-1)}finally{L.keyPath=Pe}}else{var Mr=L.componentStack;Pe=L.componentStack=Gt(L,"Suspense");var fn=L.keyPath;kt=L.blockedBoundary;var ti=L.hoistableState,Fn=L.blockedSegment;Nt=Oe.fallback;var yn=Oe.children;Mt=le(V,Oe=new Set),V.trackedPostpones!==null&&(Mt.trackedContentKeyPath=ne),sr=ot(V,Fn.chunks.length,Mt,L.formatContext,!1,!1),Fn.children.push(sr),Fn.lastPushedText=!1;var bn=ot(V,0,null,L.formatContext,!1,!1);bn.parentFlushed=!0,L.blockedBoundary=Mt,L.hoistableState=Mt.contentState,L.blockedSegment=bn,L.keyPath=ne;try{if(Di(V,L,yn,-1),bn.lastPushedText&&bn.textEmbedded&&bn.chunks.push(cn),bn.status=1,xi(Mt,bn),Mt.pendingTasks===0&&Mt.status===0){Mt.status=1,L.componentStack=Mr;break e}}catch(Ur){bn.status=4,Mt.status=4,vr=cr(V,L.componentStack),kr=Er(V,Ur,vr),Mt.errorDigest=kr,di(V,Mt)}finally{L.blockedBoundary=kt,L.hoistableState=ti,L.blockedSegment=Fn,L.keyPath=fn,L.componentStack=Mr}vr=[ne[0],"Suspense Fallback",ne[2]],(kr=V.trackedPostpones)!==null&&(Mr=[vr[1],vr[2],[],null],kr.workingMap.set(vr,Mr),Mt.status===5?kr.workingMap.get(ne)[4]=Mr:Mt.trackedFallbackNode=Mr),L=be(V,null,Nt,-1,kt,sr,Mt.fallbackState,Oe,vr,L.formatContext,L.legacyContext,L.context,L.treeContext,Pe,!0),V.pingedTasks.push(L)}return}if(typeof Pe=="object"&&Pe!==null)switch(Pe.$$typeof){case C:Nt=L.componentStack,L.componentStack={tag:1,parent:L.componentStack,type:Pe.render},Oe=nn(V,L,ne,Pe.render,Oe,kt),Bn(V,L,ne,Oe,Ta!==0,Ws,Ma),L.componentStack=Nt;return;case K:Oe=Ci(Pe=Pe.type,Oe),dn(V,L,ne,Pe,Oe,kt);return;case k:if(Nt=Oe.children,kt=L.keyPath,Pe=Pe._context,Oe=Oe.value,Mt=Pe._currentValue,Pe._currentValue=Oe,Cs=Oe={parent:sr=Cs,depth:sr===null?0:sr.depth+1,context:Pe,parentValue:Mt,value:Oe},L.context=Oe,L.keyPath=ne,Un(V,L,Nt,-1),(V=Cs)===null)throw Error("Tried to pop a Context at the root of the app. This is a bug in React.");V.context._currentValue=V.parentValue,V=Cs=V.parent,L.context=V,L.keyPath=kt;return;case x:Oe=(Oe=Oe.children)(Pe._currentValue),Pe=L.keyPath,L.keyPath=ne,Un(V,L,Oe,-1),L.keyPath=Pe;return;case I:case Y:kt=L.componentStack,L.componentStack=Gt(L,"Lazy"),Oe=Ci(Pe=(Nt=Pe._init)(Pe._payload),Oe),dn(V,L,ne,Pe,Oe,void 0),L.componentStack=kt;return}throw Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+(Pe==null?Pe:typeof Pe)+".")}}function Wn(V,L,ne,Pe,Oe){var kt=L.replay,Nt=L.blockedBoundary,Mt=ot(V,0,null,L.formatContext,!1,!1);Mt.id=ne,Mt.parentFlushed=!0;try{L.replay=null,L.blockedSegment=Mt,Di(V,L,Pe,Oe),Mt.status=1,Nt===null?V.completedRootSegment=Mt:(xi(Nt,Mt),Nt.parentFlushed&&V.partialBoundaries.push(Nt))}finally{L.replay=kt,L.blockedSegment=null}}function Un(V,L,ne,Pe){if(L.replay!==null&&typeof L.replay.slots=="number")Wn(V,L,L.replay.slots,ne,Pe);else if(L.node=ne,L.childIndex=Pe,ne!==null){if(typeof ne=="object"){switch(ne.$$typeof){case W:var Oe=ne.type,kt=ne.key,Nt=ne.props,Mt=ne.ref,sr=sn(Oe),vr=kt??(Pe===-1?0:Pe);if(kt=[L.keyPath,sr,vr],L.replay!==null)e:{var kr=L.replay;for(ne=0,Pe=kr.nodes;ne<Pe.length;ne++){var Mr=Pe[ne];if(vr===Mr[1]){if(Mr.length===4){if(sr!==null&&sr!==Mr[0])throw Error("Expected the resume to render <"+Mr[0]+"> in this slot but instead it rendered <"+sr+">. The tree doesn't match so React will fallback to client rendering.");var fn=Mr[2];sr=Mr[3],vr=L.node,L.replay={nodes:fn,slots:sr,pendingTasks:1};try{if(dn(V,L,kt,Oe,Nt,Mt),L.replay.pendingTasks===1&&0<L.replay.nodes.length)throw Error("Couldn't find all resumable slots by key/index during replaying. The tree doesn't match so React will fallback to client rendering.");L.replay.pendingTasks--}catch(ki){if(typeof ki=="object"&&ki!==null&&(ki===ys||typeof ki.then=="function"))throw L.node===vr&&(L.replay=kr),ki;L.replay.pendingTasks--,Nt=cr(V,L.componentStack),kt=V,V=L.blockedBoundary,Nt=Er(kt,Oe=ki,Nt),xn(kt,V,fn,sr,Oe,Nt)}L.replay=kr}else{if(Oe!==N)throw Error("Expected the resume to render <Suspense> in this slot but instead it rendered <"+(sn(Oe)||"Unknown")+">. The tree doesn't match so React will fallback to client rendering.");t:{kr=void 0,Oe=Mr[5],Mt=Mr[2],sr=Mr[3],vr=Mr[4]===null?[]:Mr[4][2],Mr=Mr[4]===null?null:Mr[4][3];var ti=L.componentStack,Fn=L.componentStack=Gt(L,"Suspense"),yn=L.keyPath,bn=L.replay,Ur=L.blockedBoundary,hs=L.hoistableState,Pr=Nt.children;Nt=Nt.fallback;var Si=new Set,mn=le(V,Si);mn.parentFlushed=!0,mn.rootSegmentID=Oe,L.blockedBoundary=mn,L.hoistableState=mn.contentState,L.replay={nodes:Mt,slots:sr,pendingTasks:1};try{if(Di(V,L,Pr,-1),L.replay.pendingTasks===1&&0<L.replay.nodes.length)throw Error("Couldn't find all resumable slots by key/index during replaying. The tree doesn't match so React will fallback to client rendering.");if(L.replay.pendingTasks--,mn.pendingTasks===0&&mn.status===0){mn.status=1,V.completedBoundaries.push(mn);break t}}catch(ki){mn.status=4,fn=cr(V,L.componentStack),kr=Er(V,ki,fn),mn.errorDigest=kr,L.replay.pendingTasks--,V.clientRenderedBoundaries.push(mn)}finally{L.blockedBoundary=Ur,L.hoistableState=hs,L.replay=bn,L.keyPath=yn,L.componentStack=ti}L=Xe(V,null,{nodes:vr,slots:Mr,pendingTasks:0},Nt,-1,Ur,mn.fallbackState,Si,[kt[0],"Suspense Fallback",kt[2]],L.formatContext,L.legacyContext,L.context,L.treeContext,Fn,!0),V.pingedTasks.push(L)}}Pe.splice(ne,1);break e}}}else dn(V,L,kt,Oe,Nt,Mt);return;case j:throw Error("Portals are not currently supported by the server renderer. Render them conditionally so that they only appear on the client render.");case Y:Nt=L.componentStack,L.componentStack=Gt(L,"Lazy"),ne=(kt=ne._init)(ne._payload),L.componentStack=Nt,Un(V,L,ne,Pe);return}if(vt(ne)){ns(V,L,ne,Pe);return}if((Nt=ne===null||typeof ne!="object"?null:typeof(Nt=at&&ne[at]||ne["@@iterator"])=="function"?Nt:null)&&(Nt=Nt.call(ne))){if(!(ne=Nt.next()).done){kt=[];do kt.push(ne.value),ne=Nt.next();while(!ne.done);ns(V,L,kt,Pe)}return}if(typeof ne.then=="function")return L.thenableState=null,Un(V,L,Jl(ne),Pe);if(ne.$$typeof===x)return Un(V,L,ne._currentValue,Pe);throw Error("Objects are not valid as a React child (found: "+((Pe=Object.prototype.toString.call(ne))==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":Pe)+"). If you meant to render a collection of children, use an array instead.")}typeof ne=="string"?(Pe=L.blockedSegment)!==null&&(Pe.lastPushedText=On(Pe.chunks,ne,V.renderState,Pe.lastPushedText)):typeof ne=="number"&&(Pe=L.blockedSegment)!==null&&(Pe.lastPushedText=On(Pe.chunks,""+ne,V.renderState,Pe.lastPushedText))}}function ns(V,L,ne,Pe){var Oe=L.keyPath;if(Pe!==-1&&(L.keyPath=[L.keyPath,"Fragment",Pe],L.replay!==null)){for(var kt=L.replay,Nt=kt.nodes,Mt=0;Mt<Nt.length;Mt++){var sr=Nt[Mt];if(sr[1]===Pe){Pe=sr[2],sr=sr[3],L.replay={nodes:Pe,slots:sr,pendingTasks:1};try{if(ns(V,L,ne,-1),L.replay.pendingTasks===1&&0<L.replay.nodes.length)throw Error("Couldn't find all resumable slots by key/index during replaying. The tree doesn't match so React will fallback to client rendering.");L.replay.pendingTasks--}catch(kr){if(typeof kr=="object"&&kr!==null&&(kr===ys||typeof kr.then=="function"))throw kr;L.replay.pendingTasks--,ne=cr(V,L.componentStack);var vr=L.blockedBoundary;ne=Er(V,kr,ne),xn(V,vr,Pe,sr,kr,ne)}L.replay=kt,Nt.splice(Mt,1);break}}L.keyPath=Oe;return}if(kt=L.treeContext,Nt=ne.length,L.replay!==null&&(Mt=L.replay.slots)!==null&&typeof Mt=="object"){for(Pe=0;Pe<Nt;Pe++)sr=ne[Pe],L.treeContext=_a(kt,Nt,Pe),typeof(vr=Mt[Pe])=="number"?(Wn(V,L,vr,sr,Pe),delete Mt[Pe]):Di(V,L,sr,Pe);L.treeContext=kt,L.keyPath=Oe;return}for(Mt=0;Mt<Nt;Mt++)Pe=ne[Mt],L.treeContext=_a(kt,Nt,Mt),Di(V,L,Pe,Mt);L.treeContext=kt,L.keyPath=Oe}function di(V,L){(V=V.trackedPostpones)!==null&&(L=L.trackedContentKeyPath)!==null&&(L=V.workingMap.get(L))!==void 0&&(L.length=4,L[2]=[],L[3]=null)}function Di(V,L,ne,Pe){var Oe=L.formatContext,kt=L.legacyContext,Nt=L.context,Mt=L.keyPath,sr=L.treeContext,vr=L.componentStack,kr=L.blockedSegment;if(kr===null)try{return Un(V,L,ne,Pe)}catch(ti){if(Qi(),typeof(ne=ti===ys?Da():ti)=="object"&&ne!==null&&typeof ne.then=="function"){V=Xe(V,Pe=Li(),L.replay,L.node,L.childIndex,L.blockedBoundary,L.hoistableState,L.abortSet,L.keyPath,L.formatContext,L.legacyContext,L.context,L.treeContext,L.componentStack!==null?L.componentStack.parent:null,L.isFallback).ping,ne.then(V,V),L.formatContext=Oe,L.legacyContext=kt,L.context=Nt,L.keyPath=Mt,L.treeContext=sr,L.componentStack=vr,Ea(Nt);return}}else{var Mr=kr.children.length,fn=kr.chunks.length;try{return Un(V,L,ne,Pe)}catch(ti){if(Qi(),kr.children.length=Mr,kr.chunks.length=fn,typeof(ne=ti===ys?Da():ti)=="object"&&ne!==null&&typeof ne.then=="function"){Pe=Li(),Mr=ot(V,(kr=L.blockedSegment).chunks.length,null,L.formatContext,kr.lastPushedText,!0),kr.children.push(Mr),kr.lastPushedText=!1,V=be(V,Pe,L.node,L.childIndex,L.blockedBoundary,Mr,L.hoistableState,L.abortSet,L.keyPath,L.formatContext,L.legacyContext,L.context,L.treeContext,L.componentStack!==null?L.componentStack.parent:null,L.isFallback).ping,ne.then(V,V),L.formatContext=Oe,L.legacyContext=kt,L.context=Nt,L.keyPath=Mt,L.treeContext=sr,L.componentStack=vr,Ea(Nt);return}}}throw L.formatContext=Oe,L.legacyContext=kt,L.context=Nt,L.keyPath=Mt,L.treeContext=sr,Ea(Nt),ne}function ri(V){var L=V.blockedBoundary;(V=V.blockedSegment)!==null&&(V.status=3,Yi(this,L,V))}function xn(V,L,ne,Pe,Oe,kt){for(var Nt=0;Nt<ne.length;Nt++){var Mt=ne[Nt];if(Mt.length===4)xn(V,L,Mt[2],Mt[3],Oe,kt);else{Mt=Mt[5];var sr=le(V,new Set);sr.parentFlushed=!0,sr.rootSegmentID=Mt,sr.status=4,sr.errorDigest=kt,sr.parentFlushed&&V.clientRenderedBoundaries.push(sr)}}if(ne.length=0,Pe!==null){if(L===null)throw Error("We should not have any resumable nodes in the shell. This is a bug in React.");if(L.status!==4&&(L.status=4,L.errorDigest=kt,L.parentFlushed&&V.clientRenderedBoundaries.push(L)),typeof Pe=="object")for(var vr in Pe)delete Pe[vr]}}function Ti(V,L){try{var ne=V.renderState,Pe=ne.onHeaders;if(Pe){var Oe=ne.headers;if(Oe){ne.headers=null;var kt=Oe.preconnects;if(Oe.fontPreloads&&(kt&&(kt+=", "),kt+=Oe.fontPreloads),Oe.highImagePreloads&&(kt&&(kt+=", "),kt+=Oe.highImagePreloads),!L){var Nt=ne.styles.values(),Mt=Nt.next();e:for(;0<Oe.remainingCapacity&&!Mt.done;Mt=Nt.next())for(var sr=Mt.value.sheets.values(),vr=sr.next();0<Oe.remainingCapacity&&!vr.done;vr=sr.next()){var kr=vr.value,Mr=kr.props,fn=Mr.href,ti=kr.props,Fn=hi(ti.href,"style",{crossOrigin:ti.crossOrigin,integrity:ti.integrity,nonce:ti.nonce,type:ti.type,fetchPriority:ti.fetchPriority,referrerPolicy:ti.referrerPolicy,media:ti.media});if(2<=(Oe.remainingCapacity-=Fn.length))ne.resets.style[fn]=Ct,kt&&(kt+=", "),kt+=Fn,ne.resets.style[fn]=typeof Mr.crossOrigin=="string"||typeof Mr.integrity=="string"?[Mr.crossOrigin,Mr.integrity]:Ct;else break e}}Pe(kt?{Link:kt}:{})}}}catch(yn){Er(V,yn,{})}}function Js(V){V.trackedPostpones===null&&Ti(V,!0),V.onShellError=Lu,(V=V.onShellReady)()}function ga(V){Ti(V,V.trackedPostpones===null||V.completedRootSegment===null||V.completedRootSegment.status!==5),(V=V.onAllReady)()}function xi(V,L){if(L.chunks.length===0&&L.children.length===1&&L.children[0].boundary===null&&L.children[0].id===-1){var ne=L.children[0];ne.id=L.id,ne.parentFlushed=!0,ne.status===1&&xi(V,ne)}else V.completedSegments.push(L)}function Yi(V,L,ne){if(L===null){if(ne!==null&&ne.parentFlushed){if(V.completedRootSegment!==null)throw Error("There can only be one root segment. This is a bug in React.");V.completedRootSegment=ne}V.pendingRootTasks--,V.pendingRootTasks===0&&Js(V)}else L.pendingTasks--,L.status!==4&&(L.pendingTasks===0?(L.status===0&&(L.status=1),ne!==null&&ne.parentFlushed&&ne.status===1&&xi(L,ne),L.parentFlushed&&V.completedBoundaries.push(L),L.status===1&&(L.fallbackAbortableTasks.forEach(ri,V),L.fallbackAbortableTasks.clear())):ne!==null&&ne.parentFlushed&&ne.status===1&&(xi(L,ne),L.completedSegments.length===1&&L.parentFlushed&&V.partialBoundaries.push(L)));V.allPendingTasks--,V.allPendingTasks===0&&ga(V)}function Ms(V){if(V.status!==2){var L=Cs,ne=iu.current;iu.current=gu;var Pe=Mu.current;Mu.current=af;var Oe=yu;yu=V;var kt=Nc;Nc=V.resumableState;try{var Nt,Mt=V.pingedTasks;for(Nt=0;Nt<Mt.length;Nt++){var sr=Mt[Nt],vr=V,kr=sr.blockedSegment;if(kr===null){var Mr=vr;if(sr.replay.pendingTasks!==0){Ea(sr.context);try{if(Un(Mr,sr,sr.node,sr.childIndex),sr.replay.pendingTasks===1&&0<sr.replay.nodes.length)throw Error("Couldn't find all resumable slots by key/index during replaying. The tree doesn't match so React will fallback to client rendering.");sr.replay.pendingTasks--,sr.abortSet.delete(sr),Yi(Mr,sr.blockedBoundary,null)}catch(Ai){Qi();var fn=Ai===ys?Da():Ai;if(typeof fn=="object"&&fn!==null&&typeof fn.then=="function"){var ti=sr.ping;fn.then(ti,ti),sr.thenableState=Li()}else{sr.replay.pendingTasks--,sr.abortSet.delete(sr);var Fn=cr(Mr,sr.componentStack);vr=void 0;var yn=Mr,bn=sr.blockedBoundary,Ur=sr.replay.nodes,hs=sr.replay.slots;vr=Er(yn,fn,Fn),xn(yn,bn,Ur,hs,fn,vr),Mr.pendingRootTasks--,Mr.pendingRootTasks===0&&Js(Mr),Mr.allPendingTasks--,Mr.allPendingTasks===0&&ga(Mr)}}finally{}}}else if(Mr=void 0,yn=kr,yn.status===0){Ea(sr.context);var Pr=yn.children.length,Si=yn.chunks.length;try{Un(vr,sr,sr.node,sr.childIndex),yn.lastPushedText&&yn.textEmbedded&&yn.chunks.push(cn),sr.abortSet.delete(sr),yn.status=1,Yi(vr,sr.blockedBoundary,yn)}catch(Ai){Qi(),yn.children.length=Pr,yn.chunks.length=Si;var mn=Ai===ys?Da():Ai;if(typeof mn=="object"&&mn!==null&&typeof mn.then=="function"){var ki=sr.ping;mn.then(ki,ki),sr.thenableState=Li()}else{var Es=cr(vr,sr.componentStack);sr.abortSet.delete(sr),yn.status=4;var Fi=sr.blockedBoundary;Mr=Er(vr,mn,Es),Fi===null?br(vr,mn):(Fi.pendingTasks--,Fi.status!==4&&(Fi.status=4,Fi.errorDigest=Mr,di(vr,Fi),Fi.parentFlushed&&vr.clientRenderedBoundaries.push(Fi))),vr.allPendingTasks--,vr.allPendingTasks===0&&ga(vr)}}finally{}}}Mt.splice(0,Nt),V.destination!==null&&Ro(V,V.destination)}catch(Ai){Er(V,Ai,{}),br(V,Ai)}finally{Nc=kt,iu.current=ne,Mu.current=Pe,ne===gu&&Ea(L),yu=Oe}}}function qa(V,L,ne,Pe){switch(ne.parentFlushed=!0,ne.status){case 0:ne.id=V.nextSegmentId++;case 5:return Pe=ne.id,ne.lastPushedText=!1,ne.textEmbedded=!1,V=V.renderState,Q(L,At),Q(L,V.placeholderPrefix),Q(L,V=Ke(Pe.toString(16))),se(L,$t);case 1:ne.status=2;var Oe=!0,kt=ne.chunks,Nt=0;ne=ne.children;for(var Mt=0;Mt<ne.length;Mt++){for(Oe=ne[Mt];Nt<Oe.index;Nt++)Q(L,kt[Nt]);Oe=Ka(V,L,Oe,Pe)}for(;Nt<kt.length-1;Nt++)Q(L,kt[Nt]);return Nt<kt.length&&(Oe=se(L,kt[Nt])),Oe;default:throw Error("Aborted, errored or already flushed boundaries should not be flushed again. This is a bug in React.")}}function Ka(V,L,ne,Pe){var Oe=ne.boundary;if(Oe===null)return qa(V,L,ne,Pe);if(Oe.parentFlushed=!0,Oe.status===4)Oe=Oe.errorDigest,se(L,Qn),Q(L,Qr),Oe&&(Q(L,pi),Q(L,Ke(ve(Oe))),Q(L,yr)),se(L,wi),qa(V,L,ne,Pe);else if(Oe.status!==1)Oe.status===0&&(Oe.rootSegmentID=V.nextSegmentId++),0<Oe.completedSegments.length&&V.partialBoundaries.push(Oe),$a(L,V.renderState,Oe.rootSegmentID),Pe&&((Oe=Oe.fallbackState).styles.forEach(qe,Pe),Oe.stylesheets.forEach(wt,Pe)),qa(V,L,ne,Pe);else if(Oe.byteSize>V.progressiveChunkSize)Oe.rootSegmentID=V.nextSegmentId++,V.completedBoundaries.push(Oe),$a(L,V.renderState,Oe.rootSegmentID),qa(V,L,ne,Pe);else{if(Pe&&((ne=Oe.contentState).styles.forEach(qe,Pe),ne.stylesheets.forEach(wt,Pe)),se(L,Ut),(ne=Oe.completedSegments).length!==1)throw Error("A previously unvisited boundary must have exactly one root segment. This is a bug in React.");Ka(V,L,ne[0],Pe)}return se(L,zn)}function aa(V,L,ne,Pe){return function(Oe,kt,Nt,Mt){switch(Nt.insertionMode){case 0:case 1:case 2:return Q(Oe,Lr),Q(Oe,kt.segmentPrefix),Q(Oe,Ke(Mt.toString(16))),se(Oe,Br);case 3:return Q(Oe,As),Q(Oe,kt.segmentPrefix),Q(Oe,Ke(Mt.toString(16))),se(Oe,ql);case 4:return Q(Oe,qs),Q(Oe,kt.segmentPrefix),Q(Oe,Ke(Mt.toString(16))),se(Oe,xl);case 5:return Q(Oe,tc),Q(Oe,kt.segmentPrefix),Q(Oe,Ke(Mt.toString(16))),se(Oe,$o);case 6:return Q(Oe,ru),Q(Oe,kt.segmentPrefix),Q(Oe,Ke(Mt.toString(16))),se(Oe,ci);case 7:return Q(Oe,ta),Q(Oe,kt.segmentPrefix),Q(Oe,Ke(Mt.toString(16))),se(Oe,bi);case 8:return Q(Oe,Ts),Q(Oe,kt.segmentPrefix),Q(Oe,Ke(Mt.toString(16))),se(Oe,io);default:throw Error("Unknown insertion mode. This is a bug in React.")}}(L,V.renderState,ne.parentFormatContext,ne.id),Ka(V,L,ne,Pe),function(Oe,kt){switch(kt.insertionMode){case 0:case 1:case 2:return se(Oe,Nn);case 3:return se(Oe,Jo);case 4:return se(Oe,Au);case 5:return se(Oe,Rc);case 6:return se(Oe,Zo);case 7:return se(Oe,Mo);case 8:return se(Oe,Ns);default:throw Error("Unknown insertion mode. This is a bug in React.")}}(L,ne.parentFormatContext)}function gs(V,L,ne){for(var Pe,Oe,kt,Nt,Mt=ne.completedSegments,sr=0;sr<Mt.length;sr++)Qo(V,L,ne,Mt[sr]);Mt.length=0,Rn(L,ne.contentState,V.renderState),Mt=V.resumableState,V=V.renderState,sr=ne.rootSegmentID,ne=ne.contentState;var vr=V.stylesToHoist;V.stylesToHoist=!1;var kr=Mt.streamingFormat===0;return kr?(Q(L,V.startInlineScript),vr?(2&Mt.instructions)==0?(Mt.instructions|=10,Q(L,so)):(8&Mt.instructions)==0?(Mt.instructions|=8,Q(L,Cl)):Q(L,fc):(2&Mt.instructions)==0?(Mt.instructions|=2,Q(L,Hl)):Q(L,nu)):vr?Q(L,wl):Q(L,ma),Mt=Ke(sr.toString(16)),Q(L,V.boundaryPrefix),Q(L,Mt),kr?Q(L,Pc):Q(L,pc),Q(L,V.segmentPrefix),Q(L,Mt),vr?(kr?(Q(L,pa),Pe=ne,Q(L,Ui),Oe=Ui,Pe.stylesheets.forEach(function(Mr){if(Mr.state!==2)if(Mr.state===3)Q(L,Oe),Q(L,Ke(Wt(""+Mr.props.href))),Q(L,ws),Oe=Pi;else{Q(L,Oe);var fn=Mr.props["data-precedence"],ti=Mr.props;for(var Fn in Q(L,Ke(Wt(""+Mr.props.href))),fn=""+fn,Q(L,$n),Q(L,Ke(Wt(fn))),ti)if(Fe.call(ti,Fn)){var yn=ti[Fn];if(yn!=null)switch(Fn){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error("link is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:e:{fn=L;var bn=Fn.toLowerCase();switch(typeof yn){case"function":case"symbol":break e}switch(Fn){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":break e;case"className":bn="class",yn=""+yn;break;case"hidden":if(yn===!1)break e;yn="";break;case"src":case"href":yn=""+yn;break;default:if(2<Fn.length&&(Fn[0]==="o"||Fn[0]==="O")&&(Fn[1]==="n"||Fn[1]==="N")||!tt(Fn))break e;yn=""+yn}Q(fn,$n),Q(fn,Ke(Wt(bn))),Q(fn,$n),Q(fn,Ke(Wt(yn)))}}}Q(L,ws),Oe=Pi,Mr.state=3}})):(Q(L,Bo),kt=ne,Q(L,Ui),Nt=Ui,kt.stylesheets.forEach(function(Mr){if(Mr.state!==2)if(Mr.state===3)Q(L,Nt),Q(L,Ke(ve(JSON.stringify(""+Mr.props.href)))),Q(L,ws),Nt=Pi;else{Q(L,Nt);var fn=Mr.props["data-precedence"],ti=Mr.props;for(var Fn in Q(L,Ke(ve(JSON.stringify(""+Mr.props.href)))),fn=""+fn,Q(L,$n),Q(L,Ke(ve(JSON.stringify(fn)))),ti)if(Fe.call(ti,Fn)){var yn=ti[Fn];if(yn!=null)switch(Fn){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error("link is a self-closing tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");default:e:{fn=L;var bn=Fn.toLowerCase();switch(typeof yn){case"function":case"symbol":break e}switch(Fn){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":break e;case"className":bn="class",yn=""+yn;break;case"hidden":if(yn===!1)break e;yn="";break;case"src":case"href":yn=""+yn;break;default:if(2<Fn.length&&(Fn[0]==="o"||Fn[0]==="O")&&(Fn[1]==="n"||Fn[1]==="N")||!tt(Fn))break e;yn=""+yn}Q(fn,$n),Q(fn,Ke(ve(JSON.stringify(bn)))),Q(fn,$n),Q(fn,Ke(ve(JSON.stringify(yn))))}}}Q(L,ws),Nt=Pi,Mr.state=3}})),Q(L,ws)):kr&&Q(L,Qt),Mt=kr?se(L,Sa):se(L,Ee),dt(L,V)&&Mt}function Qo(V,L,ne,Pe){if(Pe.status===2)return!0;var Oe=ne.contentState,kt=Pe.id;if(kt===-1){if((Pe.id=ne.rootSegmentID)===-1)throw Error("A root segment ID must have been assigned by now. This is a bug in React.");return aa(V,L,Pe,Oe)}return kt===ne.rootSegmentID?aa(V,L,Pe,Oe):(aa(V,L,Pe,Oe),ne=V.resumableState,V=V.renderState,(Pe=ne.streamingFormat===0)?(Q(L,V.startInlineScript),(1&ne.instructions)==0?(ne.instructions|=1,Q(L,An)):Q(L,Qa)):Q(L,ba),Q(L,V.segmentPrefix),Q(L,kt=Ke(kt.toString(16))),Pe?Q(L,zl):Q(L,Gl),Q(L,V.placeholderPrefix),Q(L,kt),L=Pe?se(L,ii):se(L,Ee))}function Ro(V,L){re=new Uint8Array(2048),F=0;try{var ne,Pe=V.completedRootSegment;if(Pe!==null){if(Pe.status===5||V.pendingRootTasks!==0)return;var Oe=V.renderState;if((V.allPendingTasks!==0||V.trackedPostpones!==null)&&Oe.externalRuntimeScript){var kt=Oe.externalRuntimeScript,Nt=V.resumableState,Mt=kt.src,sr=kt.chunks;Nt.scriptResources.hasOwnProperty(Mt)||(Nt.scriptResources[Mt]=null,Oe.scripts.add(sr))}var vr,kr=Oe.htmlChunks,Mr=Oe.headChunks;if(kr){for(vr=0;vr<kr.length;vr++)Q(L,kr[vr]);if(Mr)for(vr=0;vr<Mr.length;vr++)Q(L,Mr[vr]);else Q(L,na("head")),Q(L,In)}else if(Mr)for(vr=0;vr<Mr.length;vr++)Q(L,Mr[vr]);var fn=Oe.charsetChunks;for(vr=0;vr<fn.length;vr++)Q(L,fn[vr]);fn.length=0,Oe.preconnects.forEach(mi,L),Oe.preconnects.clear();var ti=Oe.viewportChunks;for(vr=0;vr<ti.length;vr++)Q(L,ti[vr]);ti.length=0,Oe.fontPreloads.forEach(mi,L),Oe.fontPreloads.clear(),Oe.highImagePreloads.forEach(mi,L),Oe.highImagePreloads.clear(),Oe.styles.forEach(_i,L);var Fn=Oe.importMapChunks;for(vr=0;vr<Fn.length;vr++)Q(L,Fn[vr]);Fn.length=0,Oe.bootstrapScripts.forEach(mi,L),Oe.scripts.forEach(mi,L),Oe.scripts.clear(),Oe.bulkPreloads.forEach(mi,L),Oe.bulkPreloads.clear();var yn=Oe.hoistableChunks;for(vr=0;vr<yn.length;vr++)Q(L,yn[vr]);yn.length=0,kr&&Mr===null&&Q(L,Te("head")),Ka(V,L,Pe,null),V.completedRootSegment=null,dt(L,V.renderState)}var bn=V.renderState;Pe=0;var Ur=bn.viewportChunks;for(Pe=0;Pe<Ur.length;Pe++)Q(L,Ur[Pe]);Ur.length=0,bn.preconnects.forEach(mi,L),bn.preconnects.clear(),bn.fontPreloads.forEach(mi,L),bn.fontPreloads.clear(),bn.highImagePreloads.forEach(mi,L),bn.highImagePreloads.clear(),bn.styles.forEach(Wi,L),bn.scripts.forEach(mi,L),bn.scripts.clear(),bn.bulkPreloads.forEach(mi,L),bn.bulkPreloads.clear();var hs=bn.hoistableChunks;for(Pe=0;Pe<hs.length;Pe++)Q(L,hs[Pe]);hs.length=0;var Pr=V.clientRenderedBoundaries;for(ne=0;ne<Pr.length;ne++){var Si=Pr[ne];bn=L;var mn=V.resumableState,ki=V.renderState,Es=Si.rootSegmentID,Fi=Si.errorDigest,Ai=Si.errorMessage,Qs=Si.errorComponentStack,Ls=mn.streamingFormat===0;if(Ls?(Q(bn,ki.startInlineScript),(4&mn.instructions)==0?(mn.instructions|=4,Q(bn,Kl)):Q(bn,xs)):Q(bn,ol),Q(bn,ki.boundaryPrefix),Q(bn,Ke(Es.toString(16))),Ls&&Q(bn,Rs),(Fi||Ai||Qs)&&(Ls?(Q(bn,Wl),Q(bn,Ke(ct(Fi||"")))):(Q(bn,rc),Q(bn,Ke(ve(Fi||""))))),(Ai||Qs)&&(Ls?(Q(bn,Wl),Q(bn,Ke(ct(Ai||"")))):(Q(bn,ho),Q(bn,Ke(ve(Ai||""))))),Qs&&(Ls?(Q(bn,Wl),Q(bn,Ke(ct(Qs)))):(Q(bn,Yc),Q(bn,Ke(ve(Qs))))),Ls?!se(bn,Nu):!se(bn,Ee)){V.destination=null,ne++,Pr.splice(0,ne);return}}Pr.splice(0,ne);var ca=V.completedBoundaries;for(ne=0;ne<ca.length;ne++)if(!gs(V,L,ca[ne])){V.destination=null,ne++,ca.splice(0,ne);return}ca.splice(0,ne),me(L),re=new Uint8Array(2048),F=0;var Zr=V.partialBoundaries;for(ne=0;ne<Zr.length;ne++){var _s=Zr[ne];e:{Pr=V,Si=L;var zs=_s.completedSegments;for(mn=0;mn<zs.length;mn++)if(!Qo(Pr,Si,_s,zs[mn])){mn++,zs.splice(0,mn);var go=!1;break e}zs.splice(0,mn),go=Rn(Si,_s.contentState,Pr.renderState)}if(!go){V.destination=null,ne++,Zr.splice(0,ne);return}}Zr.splice(0,ne);var _r=V.completedBoundaries;for(ne=0;ne<_r.length;ne++)if(!gs(V,L,_r[ne])){V.destination=null,ne++,_r.splice(0,ne);return}_r.splice(0,ne)}finally{V.allPendingTasks===0&&V.pingedTasks.length===0&&V.clientRenderedBoundaries.length===0&&V.completedBoundaries.length===0?(V.flushScheduled=!1,(ne=V.resumableState).hasBody&&Q(L,Te("body")),ne.hasHtml&&Q(L,Te("html")),me(L),L.close(),V.destination=null):me(L)}}function ul(V){Ti(V,V.pendingRootTasks===0)}function rl(V){V.flushScheduled===!1&&V.pingedTasks.length===0&&V.destination!==null&&(V.flushScheduled=!0,setTimeout(function(){var L=V.destination;L?Ro(V,L):V.flushScheduled=!1},0))}function ic(V,L){try{var ne=V.abortableTasks;if(0<ne.size){var Pe=L===void 0?Error("The render was aborted by the server without a reason."):L;ne.forEach(function(Oe){return function kt(Nt,Mt,sr){var vr=Nt.blockedBoundary,kr=Nt.blockedSegment;if(kr!==null&&(kr.status=3),vr===null){if(vr={},Mt.status!==1&&Mt.status!==2){if((Nt=Nt.replay)===null){Er(Mt,sr,vr),br(Mt,sr);return}Nt.pendingTasks--,Nt.pendingTasks===0&&0<Nt.nodes.length&&(vr=Er(Mt,sr,vr),xn(Mt,null,Nt.nodes,Nt.slots,sr,vr)),Mt.pendingRootTasks--,Mt.pendingRootTasks===0&&Js(Mt)}}else vr.pendingTasks--,vr.status!==4&&(vr.status=4,Nt=cr(Mt,Nt.componentStack),Nt=Er(Mt,sr,Nt),vr.errorDigest=Nt,di(Mt,vr),vr.parentFlushed&&Mt.clientRenderedBoundaries.push(vr)),vr.fallbackAbortableTasks.forEach(function(Mr){return kt(Mr,Mt,sr)}),vr.fallbackAbortableTasks.clear();Mt.allPendingTasks--,Mt.allPendingTasks===0&&ga(Mt)}(Oe,V,Pe)}),ne.clear()}V.destination!==null&&Ro(V,V.destination)}catch(Oe){Er(V,Oe,{}),br(V,Oe)}}ae.renderToReadableStream=function(V,L){return new Promise(function(ne,Pe){var Oe,kt,Nt,Mt,sr,vr,kr,Mr,fn,ti,Fn,yn,bn,Ur,hs,Pr,Si,mn,ki,Es,Fi,Ai,Qs,Ls,ca=new Promise(function(Nr,Cn){Qs=Nr,Ai=Cn}),Zr=L?L.onHeaders:void 0;Zr&&(Ls=function(Nr){Zr(new Headers(Nr))});var _s=(Oe=L?L.identifierPrefix:void 0,kt=L?L.unstable_externalRuntimeSrc:void 0,Nt=L?L.bootstrapScriptContent:void 0,Mt=L?L.bootstrapScripts:void 0,sr=L?L.bootstrapModules:void 0,vr=0,kt!==void 0&&(vr=1),{idPrefix:Oe===void 0?"":Oe,nextFormID:0,streamingFormat:vr,bootstrapScriptContent:Nt,bootstrapScripts:Mt,bootstrapModules:sr,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}),zs=(Mr=V,fn=_s,ti=function(Nr,Cn,ks,cl,ju,za){var bl=Cn===void 0?Qe:Je('<script nonce="'+ve(Cn)+'">'),ka=Nr.idPrefix,yo=[],Rl=null,vu=Nr.bootstrapScriptContent,jo=Nr.bootstrapScripts,Bi=Nr.bootstrapModules;if(vu!==void 0&&yo.push(bl,Ke((""+vu).replace(Or,wn)),yt),ks!==void 0&&(typeof ks=="string"?Is((Rl={src:ks,chunks:[]}).chunks,{src:ks,async:!0,integrity:void 0,nonce:Cn}):Is((Rl={src:ks.src,chunks:[]}).chunks,{src:ks.src,async:!0,integrity:ks.integrity,nonce:Cn})),ks=[],cl!==void 0&&(ks.push(Tn),ks.push(Ke((""+JSON.stringify(cl)).replace(Or,wn))),ks.push(tn)),cl=ju?{preconnects:"",fontPreloads:"",highImagePreloads:"",remainingCapacity:typeof za=="number"?za:2e3}:null,ju={placeholderPrefix:Je(ka+"P:"),segmentPrefix:Je(ka+"S:"),boundaryPrefix:Je(ka+"B:"),startInlineScript:bl,htmlChunks:null,headChunks:null,externalRuntimeScript:Rl,bootstrapChunks:yo,importMapChunks:ks,onHeaders:ju,headers:cl,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:new Set,fontPreloads:new Set,highImagePreloads:new Set,styles:new Map,bootstrapScripts:new Set,scripts:new Set,bulkPreloads:new Set,preloads:{images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map},nonce:Cn,hoistableState:null,stylesToHoist:!1},jo!==void 0)for(bl=0;bl<jo.length;bl++)ks=jo[bl],cl=Rl=void 0,za={rel:"preload",as:"script",fetchPriority:"low",nonce:Cn},typeof ks=="string"?za.href=ka=ks:(za.href=ka=ks.src,za.integrity=cl=typeof ks.integrity=="string"?ks.integrity:void 0,za.crossOrigin=Rl=typeof ks=="string"||ks.crossOrigin==null?void 0:ks.crossOrigin==="use-credentials"?"use-credentials":""),ks=Nr,vu=ka,ks.scriptResources[vu]=null,ks.moduleScriptResources[vu]=null,ui(ks=[],za),ju.bootstrapScripts.add(ks),yo.push(Rt,Ke(ve(ka))),Cn&&yo.push(rr,Ke(ve(Cn))),typeof cl=="string"&&yo.push(an,Ke(ve(cl))),typeof Rl=="string"&&yo.push(Hr,Ke(ve(Rl))),yo.push(gn);if(Bi!==void 0)for(jo=0;jo<Bi.length;jo++)za=Bi[jo],Rl=ka=void 0,cl={rel:"modulepreload",fetchPriority:"low",nonce:Cn},typeof za=="string"?cl.href=bl=za:(cl.href=bl=za.src,cl.integrity=Rl=typeof za.integrity=="string"?za.integrity:void 0,cl.crossOrigin=ka=typeof za=="string"||za.crossOrigin==null?void 0:za.crossOrigin==="use-credentials"?"use-credentials":""),za=Nr,ks=bl,za.scriptResources[ks]=null,za.moduleScriptResources[ks]=null,ui(za=[],cl),ju.bootstrapScripts.add(za),yo.push(Et,Ke(ve(bl))),Cn&&yo.push(rr,Ke(ve(Cn))),typeof Rl=="string"&&yo.push(an,Ke(ve(Rl))),typeof ka=="string"&&yo.push(Hr,Ke(ve(ka))),yo.push(gn);return ju}(_s,L?L.nonce:void 0,L?L.unstable_externalRuntimeSrc:void 0,L?L.importMap:void 0,Ls,L?L.maxHeadersLength:void 0),Fn=rn((kr=L?L.namespaceURI:void 0)==="http://www.w3.org/2000/svg"?3:kr==="http://www.w3.org/1998/Math/MathML"?4:0,null,0),yn=L?L.progressiveChunkSize:void 0,bn=L?L.onError:void 0,Ur=Qs,hs=function(){var Nr=new ReadableStream({type:"bytes",pull:function(Cn){if(zs.status===1)zs.status=2,He(Cn,zs.fatalError);else if(zs.status!==2&&zs.destination===null){zs.destination=Cn;try{Ro(zs,Cn)}catch(ks){Er(zs,ks,{}),br(zs,ks)}}},cancel:function(Cn){zs.destination=null,ic(zs,Cn)}},{highWaterMark:0});Nr.allReady=ca,ne(Nr)},Pr=function(Nr){ca.catch(function(){}),Pe(Nr)},Si=Ai,mn=L?L.onPostpone:void 0,ki=L?L.formState:void 0,et.current=bt,Es=[],(ti=ot(fn={destination:null,flushScheduled:!1,resumableState:fn,renderState:ti,rootFormatContext:Fn,progressiveChunkSize:yn===void 0?12800:yn,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Fi=new Set,pingedTasks:Es,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],trackedPostpones:null,onError:bn===void 0?Xc:bn,onPostpone:mn===void 0?Lu:mn,onAllReady:Ur===void 0?Lu:Ur,onShellReady:hs===void 0?Lu:hs,onShellError:Pr===void 0?Lu:Pr,onFatalError:Si===void 0?Lu:Si,formState:ki===void 0?null:ki},0,null,Fn,!1,!1)).parentFlushed=!0,Mr=be(fn,null,Mr,-1,null,ti,null,Fi,null,Fn,Sn,null,Ss,null,!1),Es.push(Mr),fn);if(L&&L.signal){var go=L.signal;if(go.aborted)ic(zs,go.reason);else{var _r=function(){ic(zs,go.reason),go.removeEventListener("abort",_r)};go.addEventListener("abort",_r)}}zs.flushScheduled=zs.destination!==null,setTimeout(Dt?function(){return pr.run(zs,Ms,zs)}:function(){return Ms(zs)},0),zs.trackedPostpones===null&&setTimeout(Dt?function(){return pr.run(zs,ul,zs)}:function(){return ul(zs)},0)})},ae.version="18.3.0-canary-178c267a4e-20241218"},8066:(Jt,ae,M)=>{"use strict";Jt.exports=M(6989)},4174:(Jt,ae,M)=>{"use strict";var q=M(8066),Z={stream:!0},W=new Map;function j(we){var Ce=hn.__next_require__(we);return typeof Ce.then!="function"||Ce.status==="fulfilled"?null:(Ce.then(function(We){Ce.status="fulfilled",Ce.value=We},function(We){Ce.status="rejected",Ce.reason=We}),Ce)}function z(){}var y=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher,S=Symbol.for("react.element"),k=Symbol.for("react.lazy"),I=Symbol.iterator,x=Array.isArray,C=Object.getPrototypeOf,N=Object.prototype,U=new WeakMap;function K(we,Ce,We,ve){var Ve=1,gt=0,mt=null;we=JSON.stringify(we,function lt(et,bt){if(bt===null)return null;if(typeof bt=="object"){if(typeof bt.then=="function"){mt===null&&(mt=new FormData),gt++;var Ct,Ee,Qe=Ve++;return bt.then(function(Et){Et=JSON.stringify(Et,lt);var rr=mt;rr.append(Ce+Qe,Et),--gt==0&&We(rr)},function(Et){ve(Et)}),"$@"+Qe.toString(16)}if(x(bt))return bt;if(bt instanceof FormData){mt===null&&(mt=new FormData);var yt=mt,Rt=Ce+(et=Ve++)+"_";return bt.forEach(function(Et,rr){yt.append(Rt+rr,Et)}),"$K"+et.toString(16)}if(bt instanceof Map)return bt=JSON.stringify(Array.from(bt),lt),mt===null&&(mt=new FormData),et=Ve++,mt.append(Ce+et,bt),"$Q"+et.toString(16);if(bt instanceof Set)return bt=JSON.stringify(Array.from(bt),lt),mt===null&&(mt=new FormData),et=Ve++,mt.append(Ce+et,bt),"$W"+et.toString(16);if(!((Ee=bt)===null||typeof Ee!="object")&&(typeof(Ee=I&&Ee[I]||Ee["@@iterator"])=="function"?Ee:null))return Array.from(bt);if((et=C(bt))!==N&&(et===null||C(et)!==null))throw Error("Only plain objects, and a few built-ins, can be passed to Server Actions. Classes or null prototypes are not supported.");return bt}if(typeof bt=="string")return bt[bt.length-1]==="Z"&&this[et]instanceof Date?"$D"+bt:bt=bt[0]==="$"?"$"+bt:bt;if(typeof bt=="boolean")return bt;if(typeof bt=="number")return Number.isFinite(Ct=bt)?Ct===0&&-1/0==1/Ct?"$-0":Ct:1/0===Ct?"$Infinity":-1/0===Ct?"$-Infinity":"$NaN";if(bt===void 0)return"$undefined";if(typeof bt=="function"){if((bt=U.get(bt))!==void 0)return bt=JSON.stringify(bt,lt),mt===null&&(mt=new FormData),et=Ve++,mt.set(Ce+et,bt),"$F"+et.toString(16);throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if(typeof bt=="symbol"){if(Symbol.for(et=bt.description)!==bt)throw Error("Only global symbols received from Symbol.for(...) can be passed to Server Functions. The symbol Symbol.for("+bt.description+") cannot be found among global symbols.");return"$S"+et}if(typeof bt=="bigint")return"$n"+bt.toString(10);throw Error("Type "+typeof bt+" is not supported as an argument to a Server Function.")}),mt===null?We(we):(mt.set(Ce+"0",we),gt===0&&We(mt))}var Y=new WeakMap;function ee(we){var Ce=U.get(this);if(!Ce)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var We=null;if(Ce.bound!==null){if((We=Y.get(Ce))||(ve=Ce,mt=new Promise(function(et,bt){Ve=et,gt=bt}),K(ve,"",function(et){if(typeof et=="string"){var bt=new FormData;bt.append("0",et),et=bt}mt.status="fulfilled",mt.value=et,Ve(et)},function(et){mt.status="rejected",mt.reason=et,gt(et)}),We=mt,Y.set(Ce,We)),We.status==="rejected")throw We.reason;if(We.status!=="fulfilled")throw We;Ce=We.value;var ve,Ve,gt,mt,lt=new FormData;Ce.forEach(function(et,bt){lt.append("$ACTION_"+we+":"+bt,et)}),We=lt,Ce="$ACTION_REF_"+we}else Ce="$ACTION_ID_"+Ce.id;return{name:Ce,method:"POST",encType:"multipart/form-data",data:We}}function fe(we,Ce){var We=U.get(this);if(!We)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(We.id!==we)return!1;var ve=We.bound;if(ve===null)return Ce===0;switch(ve.status){case"fulfilled":return ve.value.length===Ce;case"pending":throw ve;case"rejected":throw ve.reason;default:throw typeof ve.status!="string"&&(ve.status="pending",ve.then(function(Ve){ve.status="fulfilled",ve.value=Ve},function(Ve){ve.status="rejected",ve.reason=Ve})),ve}}function Se(we,Ce,We){Object.defineProperties(we,{$$FORM_ACTION:{value:We===void 0?ee:function(){var ve=U.get(this);if(!ve)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var Ve=ve.bound;return Ve===null&&(Ve=Promise.resolve([])),We(ve.id,Ve)}},$$IS_SIGNATURE_EQUAL:{value:fe},bind:{value:at}}),U.set(we,Ce)}var ze=Function.prototype.bind,Ue=Array.prototype.slice;function at(){var we=ze.apply(this,arguments),Ce=U.get(this);if(Ce){var We=Ue.call(arguments,1),ve=null;ve=Ce.bound!==null?Promise.resolve(Ce.bound).then(function(Ve){return Ve.concat(We)}):Promise.resolve(We),Object.defineProperties(we,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:fe},bind:{value:at}}),U.set(we,{id:Ce.id,bound:ve})}return we}function vt(we,Ce,We,ve){this.status=we,this.value=Ce,this.reason=We,this._response=ve}function jt(we){switch(we.status){case"resolved_model":Ke(we);break;case"resolved_module":Je(we)}switch(we.status){case"fulfilled":return we.value;case"pending":case"blocked":case"cyclic":throw we;default:throw we.reason}}function re(we,Ce){for(var We=0;We<we.length;We++)(0,we[We])(Ce)}function F(we,Ce,We){switch(we.status){case"fulfilled":re(Ce,we.value);break;case"pending":case"blocked":case"cyclic":we.value=Ce,we.reason=We;break;case"rejected":We&&re(We,we.reason)}}function Q(we,Ce){if(we.status==="pending"||we.status==="blocked"){var We=we.reason;we.status="rejected",we.reason=Ce,We!==null&&re(We,Ce)}}function se(we,Ce){if(we.status==="pending"||we.status==="blocked"){var We=we.value,ve=we.reason;we.status="resolved_module",we.value=Ce,We!==null&&(Je(we),F(we,We,ve))}}vt.prototype=Object.create(Promise.prototype),vt.prototype.then=function(we,Ce){switch(this.status){case"resolved_model":Ke(this);break;case"resolved_module":Je(this)}switch(this.status){case"fulfilled":we(this.value);break;case"pending":case"blocked":case"cyclic":we&&(this.value===null&&(this.value=[]),this.value.push(we)),Ce&&(this.reason===null&&(this.reason=[]),this.reason.push(Ce));break;default:Ce(this.reason)}};var me=null,ce=null;function Ke(we){var Ce=me,We=ce;me=we,ce=null;var ve=we.value;we.status="cyclic",we.value=null,we.reason=null;try{var Ve=JSON.parse(ve,we._response._fromJSON);if(ce!==null&&0<ce.deps)ce.value=Ve,we.status="blocked",we.value=null,we.reason=null;else{var gt=we.value;we.status="fulfilled",we.value=Ve,gt!==null&&re(gt,Ve)}}catch(mt){we.status="rejected",we.reason=mt}finally{me=Ce,ce=We}}function Je(we){try{var Ce=we.value,We=hn.__next_require__(Ce[0]);if(Ce.length===4&&typeof We.then=="function")if(We.status==="fulfilled")We=We.value;else throw We.reason;var ve=Ce[2]==="*"?We:Ce[2]===""?We.__esModule?We.default:We:We[Ce[2]];we.status="fulfilled",we.value=ve}catch(Ve){we.status="rejected",we.reason=Ve}}function He(we,Ce){we._chunks.forEach(function(We){We.status==="pending"&&Q(We,Ce)})}function _e(we,Ce){var We=we._chunks,ve=We.get(Ce);return ve||(ve=new vt("pending",null,null,we),We.set(Ce,ve)),ve}function Fe(we,Ce){if((we=_e(we,Ce)).status==="resolved_model"&&Ke(we),we.status==="fulfilled")return we.value;throw we.reason}function pt(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function lr(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function Ne(we){var Ce,We=we.ssrManifest.moduleMap;return(We={_bundlerConfig:We,_moduleLoading:we.ssrManifest.moduleLoading,_callServer:lr!==void 0?lr:pt,_encodeFormAction:we.encodeFormAction,_nonce:we=typeof we.nonce=="string"?we.nonce:void 0,_chunks:new Map,_stringDecoder:new TextDecoder,_fromJSON:null,_rowState:0,_rowID:0,_rowTag:0,_rowLength:0,_buffer:[]})._fromJSON=(Ce=We,function(ve,Ve){return typeof Ve=="string"?function(gt,mt,lt,et){if(et[0]==="$"){if(et==="$")return S;switch(et[1]){case"$":return et.slice(1);case"L":return{$$typeof:k,_payload:gt=_e(gt,mt=parseInt(et.slice(2),16)),_init:jt};case"@":return et.length===2?new Promise(function(){}):_e(gt,mt=parseInt(et.slice(2),16));case"S":return Symbol.for(et.slice(2));case"F":return mt=Fe(gt,mt=parseInt(et.slice(2),16)),function(Ct,Ee){function Qe(){var Rt=Array.prototype.slice.call(arguments),Et=Ee.bound;return Et?Et.status==="fulfilled"?yt(Ee.id,Et.value.concat(Rt)):Promise.resolve(Et).then(function(rr){return yt(Ee.id,rr.concat(Rt))}):yt(Ee.id,Rt)}var yt=Ct._callServer;return Se(Qe,Ee,Ct._encodeFormAction),Qe}(gt,mt);case"Q":return new Map(gt=Fe(gt,mt=parseInt(et.slice(2),16)));case"W":return new Set(gt=Fe(gt,mt=parseInt(et.slice(2),16)));case"I":return 1/0;case"-":return et==="$-0"?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(et.slice(2)));case"n":return BigInt(et.slice(2));default:switch((gt=_e(gt,et=parseInt(et.slice(1),16))).status){case"resolved_model":Ke(gt);break;case"resolved_module":Je(gt)}switch(gt.status){case"fulfilled":return gt.value;case"pending":case"blocked":case"cyclic":var bt;return et=me,gt.then(function(Ct,Ee,Qe,yt){if(ce){var Rt=ce;yt||Rt.deps++}else Rt=ce={deps:yt?0:1,value:null};return function(Et){Ee[Qe]=Et,Rt.deps--,Rt.deps===0&&Ct.status==="blocked"&&(Et=Ct.value,Ct.status="fulfilled",Ct.value=Rt.value,Et!==null&&re(Et,Rt.value))}}(et,mt,lt,gt.status==="cyclic"),(bt=et,function(Ct){return Q(bt,Ct)})),null;default:throw gt.reason}}}return et}(Ce,this,ve,Ve):typeof Ve=="object"&&Ve!==null?ve=Ve[0]===S?{$$typeof:S,type:Ve[1],key:Ve[2],ref:null,props:Ve[3],_owner:null}:Ve:Ve}),We}function tt(we,Ce){function We(Ve){He(we,Ve)}var ve=Ce.getReader();ve.read().then(function Ve(gt){var mt=gt.value;if(gt.done)He(we,Error("Connection closed."));else{var lt=0,et=we._rowState,bt=we._rowID,Ct=we._rowTag,Ee=we._rowLength;gt=we._buffer;for(var Qe=mt.length;lt<Qe;){var yt=-1;switch(et){case 0:(yt=mt[lt++])===58?et=1:bt=bt<<4|(96<yt?yt-87:yt-48);continue;case 1:(et=mt[lt])===84?(Ct=et,et=2,lt++):64<et&&91>et?(Ct=et,et=3,lt++):(Ct=0,et=3);continue;case 2:(yt=mt[lt++])===44?et=4:Ee=Ee<<4|(96<yt?yt-87:yt-48);continue;case 3:yt=mt.indexOf(10,lt);break;case 4:(yt=lt+Ee)>mt.length&&(yt=-1)}var Rt=mt.byteOffset+lt;if(-1<yt){lt=new Uint8Array(mt.buffer,Rt,yt-lt),Ee=we,Rt=Ct;var Et=Ee._stringDecoder;Ct="";for(var rr=0;rr<gt.length;rr++)Ct+=Et.decode(gt[rr],Z);switch(Ct+=Et.decode(lt),Rt){case 73:(function(an,Hr,gn){var Or=an._chunks,wn=Or.get(Hr);gn=JSON.parse(gn,an._fromJSON);var Tn=function(rn,on){if(rn){var cn=rn[on[0]];if(rn=cn[on[2]])cn=rn.name;else{if(!(rn=cn["*"]))throw Error('Could not find the module "'+on[0]+'" in the React SSR Manifest. This is probably a bug in the React Server Components bundler.');cn=on[2]}return on.length===4?[rn.id,rn.chunks,cn,1]:[rn.id,rn.chunks,cn]}return on}(an._bundlerConfig,gn);if(function(rn,on,cn){if(rn!==null)for(var On=1;On<on.length;On+=2){var Pt=y.current;if(Pt){var _n=Pt.preinitScript,si=rn.prefix+on[On],zi=rn.crossOrigin;zi=typeof zi=="string"?zi==="use-credentials"?zi:"":void 0,_n.call(Pt,si,{crossOrigin:zi,nonce:cn})}}}(an._moduleLoading,gn[1],an._nonce),gn=function(rn){for(var on=rn[1],cn=[],On=0;On<on.length;){var Pt=on[On++];on[On++];var _n=W.get(Pt);if(_n===void 0){_n=M.e(Pt),cn.push(_n);var si=W.set.bind(W,Pt,null);_n.then(si,z),W.set(Pt,_n)}else _n!==null&&cn.push(_n)}return rn.length===4?cn.length===0?j(rn[0]):Promise.all(cn).then(function(){return j(rn[0])}):0<cn.length?Promise.all(cn):null}(Tn)){if(wn){var tn=wn;tn.status="blocked"}else tn=new vt("blocked",null,null,an),Or.set(Hr,tn);gn.then(function(){return se(tn,Tn)},function(rn){return Q(tn,rn)})}else wn?se(wn,Tn):Or.set(Hr,new vt("resolved_module",Tn,null,an))})(Ee,bt,Ct);break;case 72:if(bt=Ct[0],Ee=JSON.parse(Ct=Ct.slice(1),Ee._fromJSON),Ct=y.current)switch(bt){case"D":Ct.prefetchDNS(Ee);break;case"C":typeof Ee=="string"?Ct.preconnect(Ee):Ct.preconnect(Ee[0],Ee[1]);break;case"L":bt=Ee[0],lt=Ee[1],Ee.length===3?Ct.preload(bt,lt,Ee[2]):Ct.preload(bt,lt);break;case"m":typeof Ee=="string"?Ct.preloadModule(Ee):Ct.preloadModule(Ee[0],Ee[1]);break;case"S":typeof Ee=="string"?Ct.preinitStyle(Ee):Ct.preinitStyle(Ee[0],Ee[1]===0?void 0:Ee[1],Ee.length===3?Ee[2]:void 0);break;case"X":typeof Ee=="string"?Ct.preinitScript(Ee):Ct.preinitScript(Ee[0],Ee[1]);break;case"M":typeof Ee=="string"?Ct.preinitModuleScript(Ee):Ct.preinitModuleScript(Ee[0],Ee[1])}break;case 69:lt=(Ct=JSON.parse(Ct)).digest,(Ct=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.")).stack="Error: "+Ct.message,Ct.digest=lt,(Rt=(lt=Ee._chunks).get(bt))?Q(Rt,Ct):lt.set(bt,new vt("rejected",null,Ct,Ee));break;case 84:Ee._chunks.set(bt,new vt("fulfilled",Ct,null,Ee));break;case 68:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");default:(Rt=(lt=Ee._chunks).get(bt))?(Ee=Rt,bt=Ct,Ee.status==="pending"&&(Ct=Ee.value,lt=Ee.reason,Ee.status="resolved_model",Ee.value=bt,Ct!==null&&(Ke(Ee),F(Ee,Ct,lt)))):lt.set(bt,new vt("resolved_model",Ct,null,Ee))}lt=yt,et===3&&lt++,Ee=bt=Ct=et=0,gt.length=0}else{mt=new Uint8Array(mt.buffer,Rt,mt.byteLength-lt),gt.push(mt),Ee-=mt.byteLength;break}}return we._rowState=et,we._rowID=bt,we._rowTag=Ct,we._rowLength=Ee,ve.read().then(Ve).catch(We)}}).catch(We)}ae.createFromFetch=function(we,Ce){var We=Ne(Ce);return we.then(function(ve){tt(We,ve.body)},function(ve){He(We,ve)}),_e(We,0)},ae.createFromReadableStream=function(we,Ce){return tt(Ce=Ne(Ce),we),_e(Ce,0)},ae.createServerReference=function(we){return function(Ce,We,ve){function Ve(){var gt=Array.prototype.slice.call(arguments);return We(Ce,gt)}return Se(Ve,{id:Ce,bound:null},ve),Ve}(we,lr)},ae.encodeReply=function(we){return new Promise(function(Ce,We){K(we,"",Ce,We)})}},2505:(Jt,ae,M)=>{"use strict";Jt.exports=M(4174)},1112:(Jt,ae,M)=>{"use strict";var q=M(9220),Z=Symbol.for("react.element"),W=Symbol.for("react.fragment"),j=Object.prototype.hasOwnProperty,z=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner;function y(S,k,I){var x,C={},N=null,U=null;for(x in I!==void 0&&(N=""+I),k.key!==void 0&&(N=""+k.key),k.ref!==void 0&&(U=k.ref),k)j.call(k,x)&&x!=="key"&&x!=="ref"&&(C[x]=k[x]);if(S&&S.defaultProps)for(x in k=S.defaultProps)C[x]===void 0&&(C[x]=k[x]);return{$$typeof:Z,type:S,key:N,ref:U,props:C,_owner:z.current}}ae.Fragment=W,ae.jsx=y,ae.jsxs=y},2795:(Jt,ae)=>{"use strict";var M=Symbol.for("react.element"),q=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),y=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.iterator,N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,K={};function Y(Ne,tt,we){this.props=Ne,this.context=tt,this.refs=K,this.updater=we||N}function ee(){}function fe(Ne,tt,we){this.props=Ne,this.context=tt,this.refs=K,this.updater=we||N}Y.prototype.isReactComponent={},Y.prototype.setState=function(Ne,tt){if(typeof Ne!="object"&&typeof Ne!="function"&&Ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ne,tt,"setState")},Y.prototype.forceUpdate=function(Ne){this.updater.enqueueForceUpdate(this,Ne,"forceUpdate")},ee.prototype=Y.prototype;var Se=fe.prototype=new ee;Se.constructor=fe,U(Se,Y.prototype),Se.isPureReactComponent=!0;var ze=Array.isArray,Ue={current:null},at={current:null},vt={transition:null},jt={ReactCurrentDispatcher:Ue,ReactCurrentCache:at,ReactCurrentBatchConfig:vt,ReactCurrentOwner:{current:null}},re=Object.prototype.hasOwnProperty,F=jt.ReactCurrentOwner;function Q(Ne,tt,we){var Ce,We={},ve=null,Ve=null;if(tt!=null)for(Ce in tt.ref!==void 0&&(Ve=tt.ref),tt.key!==void 0&&(ve=""+tt.key),tt)re.call(tt,Ce)&&Ce!=="key"&&Ce!=="ref"&&Ce!=="__self"&&Ce!=="__source"&&(We[Ce]=tt[Ce]);var gt=arguments.length-2;if(gt===1)We.children=we;else if(1<gt){for(var mt=Array(gt),lt=0;lt<gt;lt++)mt[lt]=arguments[lt+2];We.children=mt}if(Ne&&Ne.defaultProps)for(Ce in gt=Ne.defaultProps)We[Ce]===void 0&&(We[Ce]=gt[Ce]);return{$$typeof:M,type:Ne,key:ve,ref:Ve,props:We,_owner:F.current}}function se(Ne){return typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===M}var me=/\/+/g;function ce(Ne,tt){var we,Ce;return typeof Ne=="object"&&Ne!==null&&Ne.key!=null?(we=""+Ne.key,Ce={"=":"=0",":":"=2"},"$"+we.replace(/[=:]/g,function(We){return Ce[We]})):tt.toString(36)}function Ke(){}function Je(Ne,tt,we){if(Ne==null)return Ne;var Ce=[],We=0;return function ve(Ve,gt,mt,lt,et){var bt,Ct,Ee,Qe=typeof Ve;(Qe==="undefined"||Qe==="boolean")&&(Ve=null);var yt=!1;if(Ve===null)yt=!0;else switch(Qe){case"string":case"number":yt=!0;break;case"object":switch(Ve.$$typeof){case M:case q:yt=!0;break;case x:return ve((yt=Ve._init)(Ve._payload),gt,mt,lt,et)}}if(yt)return et=et(Ve),yt=lt===""?"."+ce(Ve,0):lt,ze(et)?(mt="",yt!=null&&(mt=yt.replace(me,"$&/")+"/"),ve(et,gt,mt,"",function(rr){return rr})):et!=null&&(se(et)&&(bt=et,Ct=mt+(!et.key||Ve&&Ve.key===et.key?"":(""+et.key).replace(me,"$&/")+"/")+yt,et={$$typeof:M,type:bt.type,key:Ct,ref:bt.ref,props:bt.props,_owner:bt._owner}),gt.push(et)),1;yt=0;var Rt=lt===""?".":lt+":";if(ze(Ve))for(var Et=0;Et<Ve.length;Et++)Qe=Rt+ce(lt=Ve[Et],Et),yt+=ve(lt,gt,mt,Qe,et);else if(typeof(Et=(Ee=Ve)===null||typeof Ee!="object"?null:typeof(Ee=C&&Ee[C]||Ee["@@iterator"])=="function"?Ee:null)=="function")for(Ve=Et.call(Ve),Et=0;!(lt=Ve.next()).done;)Qe=Rt+ce(lt=lt.value,Et++),yt+=ve(lt,gt,mt,Qe,et);else if(Qe==="object"){if(typeof Ve.then=="function")return ve(function(rr){switch(rr.status){case"fulfilled":return rr.value;case"rejected":throw rr.reason;default:switch(typeof rr.status=="string"?rr.then(Ke,Ke):(rr.status="pending",rr.then(function(an){rr.status==="pending"&&(rr.status="fulfilled",rr.value=an)},function(an){rr.status==="pending"&&(rr.status="rejected",rr.reason=an)})),rr.status){case"fulfilled":return rr.value;case"rejected":throw rr.reason}}throw rr}(Ve),gt,mt,lt,et);throw Error("Objects are not valid as a React child (found: "+((gt=String(Ve))==="[object Object]"?"object with keys {"+Object.keys(Ve).join(", ")+"}":gt)+"). If you meant to render a collection of children, use an array instead.")}return yt}(Ne,Ce,"","",function(ve){return tt.call(we,ve,We++)}),Ce}function He(Ne){if(Ne._status===-1){var tt=Ne._result;(tt=tt()).then(function(we){(Ne._status===0||Ne._status===-1)&&(Ne._status=1,Ne._result=we)},function(we){(Ne._status===0||Ne._status===-1)&&(Ne._status=2,Ne._result=we)}),Ne._status===-1&&(Ne._status=0,Ne._result=tt)}if(Ne._status===1)return Ne._result.default;throw Ne._result}function _e(){return new WeakMap}function Fe(){return{s:0,v:void 0,o:null,p:null}}function pt(){}var lr=typeof reportError=="function"?reportError:function(Ne){console.error(Ne)};ae.Children={map:Je,forEach:function(Ne,tt,we){Je(Ne,function(){tt.apply(this,arguments)},we)},count:function(Ne){var tt=0;return Je(Ne,function(){tt++}),tt},toArray:function(Ne){return Je(Ne,function(tt){return tt})||[]},only:function(Ne){if(!se(Ne))throw Error("React.Children.only expected to receive a single React element child.");return Ne}},ae.Component=Y,ae.Fragment=Z,ae.Profiler=j,ae.PureComponent=fe,ae.StrictMode=W,ae.Suspense=k,ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jt,ae.act=function(){throw Error("act(...) is not supported in production builds of React.")},ae.cache=function(Ne){return function(){var tt=at.current;if(!tt)return Ne.apply(null,arguments);var we=tt.getCacheForType(_e);(tt=we.get(Ne))===void 0&&(tt=Fe(),we.set(Ne,tt)),we=0;for(var Ce=arguments.length;we<Ce;we++){var We=arguments[we];if(typeof We=="function"||typeof We=="object"&&We!==null){var ve=tt.o;ve===null&&(tt.o=ve=new WeakMap),(tt=ve.get(We))===void 0&&(tt=Fe(),ve.set(We,tt))}else(ve=tt.p)===null&&(tt.p=ve=new Map),(tt=ve.get(We))===void 0&&(tt=Fe(),ve.set(We,tt))}if(tt.s===1)return tt.v;if(tt.s===2)throw tt.v;try{var Ve=Ne.apply(null,arguments);return(we=tt).s=1,we.v=Ve}catch(gt){throw(Ve=tt).s=2,Ve.v=gt,gt}}},ae.cloneElement=function(Ne,tt,we){if(Ne==null)throw Error("The argument must be a React element, but you passed "+Ne+".");var Ce=U({},Ne.props),We=Ne.key,ve=Ne.ref,Ve=Ne._owner;if(tt!=null){if(tt.ref!==void 0&&(ve=tt.ref,Ve=F.current),tt.key!==void 0&&(We=""+tt.key),Ne.type&&Ne.type.defaultProps)var gt=Ne.type.defaultProps;for(mt in tt)re.call(tt,mt)&&mt!=="key"&&mt!=="ref"&&mt!=="__self"&&mt!=="__source"&&(Ce[mt]=tt[mt]===void 0&&gt!==void 0?gt[mt]:tt[mt])}var mt=arguments.length-2;if(mt===1)Ce.children=we;else if(1<mt){gt=Array(mt);for(var lt=0;lt<mt;lt++)gt[lt]=arguments[lt+2];Ce.children=gt}return{$$typeof:M,type:Ne.type,key:We,ref:ve,props:Ce,_owner:Ve}},ae.createContext=function(Ne){return(Ne={$$typeof:y,_currentValue:Ne,_currentValue2:Ne,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:z,_context:Ne},Ne.Consumer=Ne},ae.createElement=Q,ae.createFactory=function(Ne){var tt=Q.bind(null,Ne);return tt.type=Ne,tt},ae.createRef=function(){return{current:null}},ae.forwardRef=function(Ne){return{$$typeof:S,render:Ne}},ae.isValidElement=se,ae.lazy=function(Ne){return{$$typeof:x,_payload:{_status:-1,_result:Ne},_init:He}},ae.memo=function(Ne,tt){return{$$typeof:I,type:Ne,compare:tt===void 0?null:tt}},ae.startTransition=function(Ne){var tt=vt.transition,we=new Set;vt.transition={_callbacks:we};var Ce=vt.transition;try{var We=Ne();typeof We=="object"&&We!==null&&typeof We.then=="function"&&(we.forEach(function(ve){return ve(Ce,We)}),We.then(pt,lr))}catch(ve){lr(ve)}finally{vt.transition=tt}},ae.unstable_useCacheRefresh=function(){return Ue.current.useCacheRefresh()},ae.use=function(Ne){return Ue.current.use(Ne)},ae.useCallback=function(Ne,tt){return Ue.current.useCallback(Ne,tt)},ae.useContext=function(Ne){return Ue.current.useContext(Ne)},ae.useDebugValue=function(){},ae.useDeferredValue=function(Ne,tt){return Ue.current.useDeferredValue(Ne,tt)},ae.useEffect=function(Ne,tt){return Ue.current.useEffect(Ne,tt)},ae.useId=function(){return Ue.current.useId()},ae.useImperativeHandle=function(Ne,tt,we){return Ue.current.useImperativeHandle(Ne,tt,we)},ae.useInsertionEffect=function(Ne,tt){return Ue.current.useInsertionEffect(Ne,tt)},ae.useLayoutEffect=function(Ne,tt){return Ue.current.useLayoutEffect(Ne,tt)},ae.useMemo=function(Ne,tt){return Ue.current.useMemo(Ne,tt)},ae.useOptimistic=function(Ne,tt){return Ue.current.useOptimistic(Ne,tt)},ae.useReducer=function(Ne,tt,we){return Ue.current.useReducer(Ne,tt,we)},ae.useRef=function(Ne){return Ue.current.useRef(Ne)},ae.useState=function(Ne){return Ue.current.useState(Ne)},ae.useSyncExternalStore=function(Ne,tt,we){return Ue.current.useSyncExternalStore(Ne,tt,we)},ae.useTransition=function(){return Ue.current.useTransition()},ae.version="18.3.0-canary-178c267a4e-20241218"},9220:(Jt,ae,M)=>{"use strict";Jt.exports=M(2795)},926:(Jt,ae,M)=>{"use strict";Jt.exports=M(1112)},5650:Jt=>{(()=>{"use strict";var ae={328:W=>{W.exports=function(j){for(var z=5381,y=j.length;y;)z=33*z^j.charCodeAt(--y);return z>>>0}}},M={};function q(W){var j=M[W];if(j!==void 0)return j.exports;var z=M[W]={exports:{}},y=!0;try{ae[W](z,z.exports,q),y=!1}finally{y&&delete M[W]}return z.exports}q.ab="//";var Z=q(328);Jt.exports=Z})()},7106:(Jt,ae,M)=>{"use strict";M.d(ae,{O4:()=>k,ZK:()=>y,vU:()=>z});var q=M(3e3);let Z={wait:(0,q.ix)((0,q.Se)("\u25CB")),error:(0,q.Q6)((0,q.Se)("\u2A2F")),warn:(0,q.er)((0,q.Se)("\u26A0")),ready:"\u25B2",info:(0,q.ix)((0,q.Se)(" ")),event:(0,q.ek)((0,q.Se)("\u2713")),trace:(0,q.Ce)((0,q.Se)("\xBB"))},W={log:"log",warn:"warn",error:"error"};function j(I,...x){(x[0]===""||x[0]===void 0)&&x.length===1&&x.shift();let C=I in W?W[I]:"log",N=Z[I];x.length===0?console[C](""):console[C](" "+N,...x)}function z(...I){j("error",...I)}function y(...I){j("warn",...I)}let S=new Set;function k(...I){S.has(I[0])||(S.add(I.join(" ")),y(...I))}},2553:(Jt,ae,M)=>{var q;function Z(){throw Error("Internal Error: do not use legacy react-dom/server APIs. If you encountered this error, please open an issue on the Next.js repo.")}q=M(1880),ae.version=q.version,ae.renderToReadableStream=q.renderToReadableStream,ae.renderToNodeStream=q.renderToNodeStream,ae.renderToStaticNodeStream=q.renderToStaticNodeStream,ae.renderToString=Z,ae.renderToStaticMarkup=Z,q.resume&&(ae.resume=q.resume)},1514:(Jt,ae,M)=>{"use strict";M.d(ae,{n:()=>W});var q=M(9912),Z=M(3933);function W(j,z){return(0,Z.R)((0,q.V)(j,""))}},5303:(Jt,ae,M)=>{"use strict";M.d(ae,{g:()=>Z});var q=M(7034);async function Z(W,j){let z=(0,q.getServerActionDispatcher)();if(!z)throw Error("Invariant: missing action dispatcher.");return new Promise((y,S)=>{z({actionId:W,actionArgs:j,resolve:y,reject:S})})}},9338:(Jt,ae,M)=>{"use strict";M.d(ae,{A:()=>q,H4:()=>k,TP:()=>z,VT:()=>I,eY:()=>y,om:()=>Z,ph:()=>W,qw:()=>j,vu:()=>S});let q="RSC",Z="Next-Action",W="Next-Router-State-Tree",j="Next-Router-Prefetch",z="Next-Url",y="text/x-component",S=[[q],[W],[j]],k="_rsc",I="x-nextjs-postponed"},7034:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{createEmptyCacheNode:()=>Ve,default:()=>lt,getServerActionDispatcher:()=>tt,urlToUrlWithoutFlightMarker:()=>Ce});var q=M(926),Z=M(9220),W=M(5291),j=M(5912);function z(et,bt){return bt===void 0&&(bt=!0),et.pathname+et.search+(bt?et.hash:"")}var y=M(4504);M(9130);var S=M(3433),k=M(6083),I=M(9338);function x(et,bt){if(!Object.prototype.hasOwnProperty.call(et,bt))throw TypeError("attempted to use private field on non-instance");return et}var C=0;function N(et){return"__private_"+C+++"_"+et}var U=N("_maxConcurrency"),K=N("_runningCount"),Y=N("_queue"),ee=N("_processNext");class fe{enqueue(bt){let Ct,Ee,Qe=new Promise((Rt,Et)=>{Ct=Rt,Ee=Et}),yt=async()=>{try{x(this,K)[K]++;let Rt=await bt();Ct(Rt)}catch(Rt){Ee(Rt)}finally{x(this,K)[K]--,x(this,ee)[ee]()}};return x(this,Y)[Y].push({promiseFn:Qe,task:yt}),x(this,ee)[ee](),Qe}bump(bt){let Ct=x(this,Y)[Y].findIndex(Ee=>Ee.promiseFn===bt);if(Ct>-1){let Ee=x(this,Y)[Y].splice(Ct,1)[0];x(this,Y)[Y].unshift(Ee),x(this,ee)[ee](!0)}}constructor(bt=5){Object.defineProperty(this,ee,{value:Se}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),x(this,U)[U]=bt,x(this,K)[K]=0,x(this,Y)[Y]=[]}}function Se(et){if(et===void 0&&(et=!1),(x(this,K)[K]<x(this,U)[U]||et)&&x(this,Y)[Y].length>0){var bt;(bt=x(this,Y)[Y].shift())==null||bt.task()}}function ze(et,bt){let Ct=z(et,!1);return bt?bt+"%"+Ct:Ct}new fe(5);let Ue=Symbol();M(5303);let{createFromFetch:at,encodeReply:vt}=M(2505);function jt(et,bt){et.pending!==null&&(et.pending=et.pending.next,et.pending!==null?re({actionQueue:et,action:et.pending,setState:bt}):et.needsRefresh&&(et.needsRefresh=!1,et.dispatch({type:ACTION_REFRESH,origin:window.location.origin},bt)))}async function re(et){let{actionQueue:bt,action:Ct,setState:Ee}=et,Qe=bt.state;if(!Qe)throw Error("Invariant: Router state not initialized");bt.pending=Ct;let yt=Ct.payload,Rt=bt.action(Qe,yt);function Et(rr){Ct.discarded||(bt.state=rr,bt.devToolsInstance&&bt.devToolsInstance.send(yt,rr),jt(bt,Ee),Ct.resolve(rr))}isThenable(Rt)?Rt.then(Et,rr=>{jt(bt,Ee),Ct.reject(rr)}):Et(Rt)}function F(et){return(0,j.J8)(et)?(0,Z.use)(et):et}var Q=M(9027),se=M(9567);let me=et=>et[0]==="/"?et.slice(1):et,ce=et=>typeof et=="string"?et==="children"?"":et:et[1];var Ke=M(9022),Je=M(1514),He=M(8066);function _e(et){let{tree:bt}=et,[Ct,Ee]=(0,Z.useState)(null),[Qe,yt]=(0,Z.useState)("");return(0,Z.useRef)(),Ct?(0,He.createPortal)(Qe,Ct):null}var Fe=M(7745),pt=M(8906),lr=M(5694);let Ne=null;function tt(){return Ne}let we={};function Ce(et){let bt=new URL(et,location.origin);return bt.searchParams.delete(I.H4),bt}function We(et){return et.origin!==window.location.origin}function ve(et){let{appRouterState:bt,sync:Ct}=et;return(0,Z.useInsertionEffect)(()=>{let{tree:Ee,pushRef:Qe,canonicalUrl:yt}=bt,Rt={...Qe.preserveCustomHistoryState?window.history.state:{},__NA:!0,__PRIVATE_NEXTJS_INTERNALS_TREE:Ee};Qe.pendingPush&&z(new URL(window.location.href))!==yt?(Qe.pendingPush=!1,window.history.pushState(Rt,"",yt)):window.history.replaceState(Rt,"",yt),Ct(bt)},[bt,Ct]),null}function Ve(){return{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null}}function gt(et){let{headCacheNode:bt}=et,Ct=bt!==null?bt.head:null,Ee=bt!==null?bt.prefetchHead:null,Qe=Ee!==null?Ee:Ct;return(0,Z.useDeferredValue)(Ct,Qe)}function mt(et){let bt,{buildId:Ct,initialHead:Ee,initialTree:Qe,urlParts:yt,initialSeedData:Rt,couldBeIntercepted:Et,assetPrefix:rr,missingSlots:an}=et,[Hr,gn,Or]=[(0,Z.useMemo)(()=>function(kn){var st;let{buildId:Ht,initialTree:zt,initialSeedData:Yt,urlParts:tr,initialParallelRoutes:En,location:Kr,initialHead:li,couldBeIntercepted:pn}=kn,In=tr.join("/"),qn=!Kr,Ln={lazyData:null,rsc:Yt[2],prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:qn?new Map:En,lazyDataResolved:!1,loading:Yt[3]},Ei=Kr?z(Kr):In;(function Us(ds,ui){let[Ki,$s,,Is]=ds;for(let wa in Ki.includes(k.GC)&&Is!=="refresh"&&(ds[2]=ui,ds[3]="refresh"),$s)Us($s[wa],ui)})(zt,Ei);let Ha=new Map;(En===null||En.size===0)&&function Us(ds,ui,Ki,$s,Is,wa){if(Object.keys(Ki[1]).length===0){ds.head=Is;return}for(let ua in Ki[1]){let ea,Gi=Ki[1][ua],na=Gi[0],Bs=(0,S.d)(na),wo=$s!==null&&$s[1][ua]!==void 0?$s[1][ua]:null;if(ui){let dt=ui.parallelRoutes.get(ua);if(dt){let At,$t=wa?.kind==="auto"&&wa.status===j.T7.reusable,Ut=new Map(dt),Jr=Ut.get(Bs);At=wo!==null?{lazyData:null,rsc:wo[2],prefetchRsc:null,head:null,prefetchHead:null,loading:wo[3],parallelRoutes:new Map(Jr?.parallelRoutes),lazyDataResolved:!1}:$t&&Jr?{lazyData:Jr.lazyData,rsc:Jr.rsc,prefetchRsc:Jr.prefetchRsc,head:Jr.head,prefetchHead:Jr.prefetchHead,parallelRoutes:new Map(Jr.parallelRoutes),lazyDataResolved:Jr.lazyDataResolved,loading:Jr.loading}:{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map(Jr?.parallelRoutes),lazyDataResolved:!1,loading:null},Ut.set(Bs,At),Us(At,Jr,Gi,wo||null,Is,wa),ds.parallelRoutes.set(ua,Ut);continue}}if(wo!==null){let dt=wo[2],At=wo[3];ea={lazyData:null,rsc:dt,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:At}}else ea={lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null};let Te=ds.parallelRoutes.get(ua);Te?Te.set(Bs,ea):ds.parallelRoutes.set(ua,new Map([[Bs,ea]])),Us(ea,void 0,Gi,wo,Is,wa)}}(Ln,void 0,zt,Yt,li);let fi={buildId:Ht,tree:zt,cache:Ln,prefetchCache:Ha,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:{apply:!1,onlyHashChange:!1,hashFragment:null,segmentPaths:[]},canonicalUrl:Ei,nextUrl:(st=function Us(ds){var ui;let Ki=Array.isArray(ds[0])?ds[0][1]:ds[0];if(Ki===k.av||se.Wz.some(ua=>Ki.startsWith(ua)))return;if(Ki.startsWith(k.GC))return"";let $s=[ce(Ki)],Is=(ui=ds[1])!=null?ui:{},wa=Is.children?Us(Is.children):void 0;if(wa!==void 0)$s.push(wa);else for(let[ua,ea]of Object.entries(Is)){if(ua==="children")continue;let Gi=Us(ea);Gi!==void 0&&$s.push(Gi)}return $s.reduce((ua,ea)=>(ea=me(ea))===""||(0,k.lv)(ea)?ua:ua+"/"+ea,"")||"/"}(zt)||Kr?.pathname)!=null?st:null};if(Kr){let Us=new URL(""+Kr.pathname+Kr.search,Kr.origin),ds=[["",zt,null,null]];(function(ui){let{nextUrl:Ki,tree:$s,prefetchCache:Is,url:wa,kind:ua,data:ea}=ui,[,,,Gi]=ea,na=Gi?ze(wa,Ki):ze(wa),Bs={treeAtTimeOfPrefetch:$s,data:Promise.resolve(ea),kind:ua,prefetchTime:Date.now(),lastUsedTime:Date.now(),key:na,status:j.T7.fresh};Is.set(na,Bs)})({url:Us,kind:j.Ke.AUTO,data:[ds,void 0,!1,pn],tree:fi.tree,prefetchCache:fi.prefetchCache,nextUrl:fi.nextUrl})}return fi}({buildId:Ct,initialSeedData:Rt,urlParts:yt,initialTree:Qe,initialParallelRoutes:null,location:null,initialHead:Ee,couldBeIntercepted:Et}),[Ct,Rt,yt,Qe,Ee,Et]),()=>{},()=>{}],{canonicalUrl:wn}=F(Hr),{searchParams:Tn,pathname:tn}=(0,Z.useMemo)(()=>{var kn;let st=new URL(wn,"http://n");return{searchParams:st.searchParams,pathname:((0,lr.e)(st.pathname),st.pathname)}},[wn]),rn=(0,Z.useCallback)(kn=>{let{previousTree:st,serverResponse:Ht}=kn;(0,Z.startTransition)(()=>{gn({type:j.n0,previousTree:st,serverResponse:Ht})})},[gn]),on=(0,Z.useCallback)((kn,st,Ht)=>{let zt=new URL((0,Je.n)(kn),location.href);return gn({type:j.bO,url:zt,isExternalUrl:We(zt),locationSearch:location.search,shouldScroll:Ht==null||Ht,navigateType:st})},[gn]);Ne=(0,Z.useCallback)(kn=>{(0,Z.startTransition)(()=>{gn({...kn,type:j.WA})})},[gn]);let cn=(0,Z.useMemo)(()=>({back:()=>window.history.back(),forward:()=>window.history.forward(),prefetch:(kn,st)=>{let Ht;if(!(0,Ke.Q)(window.navigator.userAgent)){try{Ht=new URL((0,Je.n)(kn),window.location.href)}catch{throw Error("Cannot prefetch '"+kn+"' because it cannot be converted to a URL.")}We(Ht)||(0,Z.startTransition)(()=>{var zt;gn({type:j.Pm,url:Ht,kind:(zt=st?.kind)!=null?zt:j.Ke.FULL})})}},replace:(kn,st)=>{st===void 0&&(st={}),(0,Z.startTransition)(()=>{var Ht;on(kn,"replace",(Ht=st.scroll)==null||Ht)})},push:(kn,st)=>{st===void 0&&(st={}),(0,Z.startTransition)(()=>{var Ht;on(kn,"push",(Ht=st.scroll)==null||Ht)})},refresh:()=>{(0,Z.startTransition)(()=>{gn({type:j.HD,origin:window.location.origin})})},fastRefresh:()=>{throw Error("fastRefresh can only be used in development mode. Please use refresh instead.")}}),[gn,on]),{pushRef:On}=F(Hr);if(On.mpaNavigation){if(we.pendingMpaPath!==wn){let kn=window.location;On.pendingPush?kn.assign(wn):kn.replace(wn),we.pendingMpaPath=wn}(0,Z.use)(pt.c)}let{cache:Pt,tree:_n,nextUrl:si,focusAndScrollRef:zi}=F(Hr),Hs=(0,Z.useMemo)(()=>function kn(st,Ht,zt){if(Object.keys(Ht).length===0)return[st,zt];for(let Yt in Ht){let[tr,En]=Ht[Yt],Kr=st.parallelRoutes.get(Yt);if(!Kr)continue;let li=(0,S.d)(tr),pn=Kr.get(li);if(!pn)continue;let In=kn(pn,En,zt+"/"+li);if(In)return In}return null}(Pt,_n[1],""),[Pt,_n]),es=(0,Z.useMemo)(()=>function kn(st,Ht){for(let zt of(Ht===void 0&&(Ht={}),Object.values(st[1]))){let Yt=zt[0],tr=Array.isArray(Yt),En=tr?Yt[1]:Yt;!En||En.startsWith(k.GC)||(tr&&(Yt[2]==="c"||Yt[2]==="oc")?Ht[Yt[0]]=Yt[1].split("/"):tr&&(Ht[Yt[0]]=Yt[1]),Ht=kn(zt,Ht))}return Ht}(_n),[_n]);if(Hs!==null){let[kn,st]=Hs;bt=(0,q.jsx)(gt,{headCacheNode:kn},st)}else bt=null;let Ri=(0,q.jsxs)(Fe.I,{children:[bt,Pt.rsc,(0,q.jsx)(_e,{tree:_n})]});return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(ve,{appRouterState:F(Hr),sync:Or}),(0,q.jsx)(y.PathParamsContext.Provider,{value:es,children:(0,q.jsx)(y.PathnameContext.Provider,{value:tn,children:(0,q.jsx)(y.SearchParamsContext.Provider,{value:Tn,children:(0,q.jsx)(W.GlobalLayoutRouterContext.Provider,{value:{buildId:Ct,changeByServerResponse:rn,tree:_n,focusAndScrollRef:zi,nextUrl:si},children:(0,q.jsx)(W.AppRouterContext.Provider,{value:cn,children:(0,q.jsx)(W.LayoutRouterContext.Provider,{value:{childNodes:Pt.parallelRoutes,tree:_n,url:wn,loading:Pt.loading},children:Ri})})})})})})]})}function lt(et){let{globalErrorComponent:bt,...Ct}=et;return(0,q.jsx)(Q.ErrorBoundary,{errorComponent:bt,children:(0,q.jsx)(mt,{...Ct})})}},849:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{bailoutToClientRendering:()=>W});var q=M(7105),Z=M(9182);function W(j){let z=Z.A.getStore();if((z==null||!z.forceStatic)&&z?.isStaticGeneration)throw new q.Z(j)}},3785:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{ClientPageRoot:()=>z});var q=M(926),Z=M(9182),W=M(4219),j=M(3659);function z(y){let{Component:S,props:k}=y;return k.searchParams=function(I){let x=Z.A.getStore();return x?x.forceStatic?{}:x.isStaticGeneration||x.dynamicShouldError?new Proxy({},{get:(C,N,U)=>(typeof N=="string"&&(0,W.TP)(x,"searchParams."+N),j.g.get(C,N,U)),has:(C,N)=>(typeof N=="string"&&(0,W.TP)(x,"searchParams."+N),Reflect.has(C,N)),ownKeys:C=>((0,W.TP)(x,"searchParams"),Reflect.ownKeys(C))}):I:I}(k.searchParams||{}),(0,q.jsx)(S,{...k})}},9027:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{ErrorBoundary:()=>N,ErrorBoundaryHandler:()=>I,GlobalError:()=>x,default:()=>C});var q=M(926),Z=M(9220),W=M(7588),j=M(7935),z=M(7508),y=M(9182);let S={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}};function k(U){let{error:K}=U,Y=y.A.getStore();if(Y?.isRevalidate||Y?.isStaticGeneration)throw console.error(K),K;return null}class I extends Z.Component{static getDerivedStateFromError(K){if(K&&K.digest&&((0,z.eo)(K)||(0,j.X)(K)))throw K;return{error:K}}static getDerivedStateFromProps(K,Y){return K.pathname!==Y.previousPathname&&Y.error?{error:null,previousPathname:K.pathname}:{error:Y.error,previousPathname:K.pathname}}render(){return this.state.error?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(k,{error:this.state.error}),this.props.errorStyles,this.props.errorScripts,(0,q.jsx)(this.props.errorComponent,{error:this.state.error,reset:this.reset})]}):this.props.children}constructor(K){super(K),this.reset=()=>{this.setState({error:null})},this.state={error:null,previousPathname:this.props.pathname}}}function x(U){let{error:K}=U,Y=K?.digest;return(0,q.jsxs)("html",{id:"__next_error__",children:[(0,q.jsx)("head",{}),(0,q.jsxs)("body",{children:[(0,q.jsx)(k,{error:K}),(0,q.jsx)("div",{style:S.error,children:(0,q.jsxs)("div",{children:[(0,q.jsx)("h2",{style:S.text,children:"Application error: a "+(Y?"server":"client")+"-side exception has occurred (see the "+(Y?"server logs":"browser console")+" for more information)."}),Y?(0,q.jsx)("p",{style:S.text,children:"Digest: "+Y}):null]})})]})]})}let C=x;function N(U){let{errorComponent:K,errorStyles:Y,errorScripts:ee,children:fe}=U,Se=(0,W.jD)();return K?(0,q.jsx)(I,{pathname:Se,errorComponent:K,errorStyles:Y,errorScripts:ee,children:fe}):(0,q.jsx)(q.Fragment,{children:fe})}},3938:(Jt,ae,M)=>{"use strict";M.d(ae,{$:()=>Z,j:()=>W});let q="DYNAMIC_SERVER_USAGE";class Z extends Error{constructor(z){super("Dynamic server usage: "+z),this.description=z,this.digest=q}}function W(j){return typeof j=="object"&&j!==null&&"digest"in j&&typeof j.digest=="string"&&j.digest===q}},7603:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{default:()=>ze});var q=M(926),Z=M(9220);M(8066);var W=M(5291),j=M(9130),z=M(8906),y=M(9027),S=M(1482),k=M(7745),I=M(7245);function x(Ue){return Array.isArray(Ue)?Ue[1]:Ue}var C=M(3433),N=M(9567);let U=["bottom","height","left","right","top","width","x","y"];function K(Ue,at){let vt=Ue.getBoundingClientRect();return vt.top>=0&&vt.top<=at}class Y extends Z.Component{componentDidMount(){this.handlePotentialScroll()}componentDidUpdate(){this.props.focusAndScrollRef.apply&&this.handlePotentialScroll()}render(){return this.props.children}constructor(...at){super(...at),this.handlePotentialScroll=()=>{let{focusAndScrollRef:vt,segmentPath:jt}=this.props;if(vt.apply){if(vt.segmentPaths.length!==0&&!vt.segmentPaths.some(Q=>jt.every((se,me)=>(0,S.j)(se,Q[me]))))return;let re=null,F=vt.hashFragment;if(F&&(re=function(Q){var se;return Q==="top"?document.body:(se=document.getElementById(Q))!=null?se:document.getElementsByName(Q)[0]}(F)),!re&&(re=null),!(re instanceof Element))return;for(;!(re instanceof HTMLElement)||function(Q){if(["sticky","fixed"].includes(getComputedStyle(Q).position))return!0;let se=Q.getBoundingClientRect();return U.every(me=>se[me]===0)}(re);){if(re.nextElementSibling===null)return;re=re.nextElementSibling}vt.apply=!1,vt.hashFragment=null,vt.segmentPaths=[],function(Q,se){if(se===void 0&&(se={}),se.onlyHashChange){Q();return}let me=document.documentElement,ce=me.style.scrollBehavior;me.style.scrollBehavior="auto",se.dontForceLayout||me.getClientRects(),Q(),me.style.scrollBehavior=ce}(()=>{if(F){re.scrollIntoView();return}let Q=document.documentElement,se=Q.clientHeight;!K(re,se)&&(Q.scrollTop=0,K(re,se)||re.scrollIntoView())},{dontForceLayout:!0,onlyHashChange:vt.onlyHashChange}),vt.onlyHashChange=!1,re.focus()}}}}function ee(Ue){let{segmentPath:at,children:vt}=Ue,jt=(0,Z.useContext)(W.GlobalLayoutRouterContext);if(!jt)throw Error("invariant global layout router not mounted");return(0,q.jsx)(Y,{segmentPath:at,focusAndScrollRef:jt.focusAndScrollRef,children:vt})}function fe(Ue){let{parallelRouterKey:at,url:vt,childNodes:jt,segmentPath:re,tree:F,cacheKey:Q}=Ue,se=(0,Z.useContext)(W.GlobalLayoutRouterContext);if(!se)throw Error("invariant global layout router not mounted");let{buildId:me,changeByServerResponse:ce,tree:Ke}=se,Je=jt.get(Q);if(Je===void 0){let pt={lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null};Je=pt,jt.set(Q,pt)}let He=Je.prefetchRsc!==null?Je.prefetchRsc:Je.rsc,_e=(0,Z.useDeferredValue)(Je.rsc,He),Fe=typeof _e=="object"&&_e!==null&&typeof _e.then=="function"?(0,Z.use)(_e):_e;if(!Fe){let pt=Je.lazyData;if(pt===null){let Ne=function we(Ce,We){if(Ce){let[ve,Ve]=Ce,gt=Ce.length===2;if((0,S.j)(We[0],ve)&&We[1].hasOwnProperty(Ve)){if(gt){let mt=we(void 0,We[1][Ve]);return[We[0],{...We[1],[Ve]:[mt[0],mt[1],mt[2],"refetch"]}]}return[We[0],{...We[1],[Ve]:we(Ce.slice(2),We[1][Ve])}]}}return We}(["",...re],Ke),tt=function we(Ce){let[We,ve]=Ce;if(Array.isArray(We)&&(We[2]==="di"||We[2]==="ci")||typeof We=="string"&&(0,N.Ag)(We))return!0;if(ve){for(let Ve in ve)if(we(ve[Ve]))return!0}return!1}(Ke);Je.lazyData=pt=(0,j.Y)(new URL(vt,location.origin),Ne,tt?se.nextUrl:null,me),Je.lazyDataResolved=!1}let lr=(0,Z.use)(pt);Je.lazyDataResolved||(setTimeout(()=>{(0,Z.startTransition)(()=>{ce({previousTree:Ke,serverResponse:lr})})}),Je.lazyDataResolved=!0),(0,Z.use)(z.c)}return(0,q.jsx)(W.LayoutRouterContext.Provider,{value:{tree:F[1][at],childNodes:Je.parallelRoutes,url:vt,loading:Je.loading},children:Fe})}function Se(Ue){let{children:at,hasLoading:vt,loading:jt,loadingStyles:re,loadingScripts:F}=Ue;return vt?(0,q.jsx)(Z.Suspense,{fallback:(0,q.jsxs)(q.Fragment,{children:[re,F,jt]}),children:at}):(0,q.jsx)(q.Fragment,{children:at})}function ze(Ue){let{parallelRouterKey:at,segmentPath:vt,error:jt,errorStyles:re,errorScripts:F,templateStyles:Q,templateScripts:se,template:me,notFound:ce,notFoundStyles:Ke}=Ue,Je=(0,Z.useContext)(W.LayoutRouterContext);if(!Je)throw Error("invariant expected layout router to be mounted");let{childNodes:He,tree:_e,url:Fe,loading:pt}=Je,lr=He.get(at);lr||(lr=new Map,He.set(at,lr));let Ne=_e[1][at][0],tt=x(Ne),we=[Ne];return(0,q.jsx)(q.Fragment,{children:we.map(Ce=>{let We=x(Ce),ve=(0,C.d)(Ce);return(0,q.jsxs)(W.TemplateContext.Provider,{value:(0,q.jsx)(ee,{segmentPath:vt,children:(0,q.jsx)(y.ErrorBoundary,{errorComponent:jt,errorStyles:re,errorScripts:F,children:(0,q.jsx)(Se,{hasLoading:!!pt,loading:pt?.[0],loadingStyles:pt?.[1],loadingScripts:pt?.[2],children:(0,q.jsx)(I.NotFoundBoundary,{notFound:ce,notFoundStyles:Ke,children:(0,q.jsx)(k.I,{children:(0,q.jsx)(fe,{parallelRouterKey:at,url:Fe,tree:_e,childNodes:lr,segmentPath:vt,cacheKey:ve,isActive:tt===We})})})})})}),children:[Q,se,me]},(0,C.d)(Ce,!0))})})}},1482:(Jt,ae,M)=>{"use strict";M.d(ae,{W:()=>W,j:()=>Z});var q=M(6512);let Z=(j,z)=>typeof j=="string"?typeof z=="string"&&j===z:typeof z!="string"&&j[0]===z[0]&&j[1]===z[1],W=(j,z)=>{var y;return!Array.isArray(j)&&!!Array.isArray(z)&&((y=(0,q.R)(j))==null?void 0:y.param)===z[0]}},7588:(Jt,ae,M)=>{"use strict";M.d(ae,{jD:()=>j,tv:()=>z});var q=M(9220),Z=M(5291),W=M(4504);function j(){return(0,q.useContext)(W.PathnameContext)}function z(){let y=(0,q.useContext)(Z.AppRouterContext);if(y===null)throw Error("invariant expected app router to be mounted");return y}M(7508),M(8823)},7245:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{NotFoundBoundary:()=>S});var q=M(926),Z=M(9220),W=M(7588),j=M(7935),z=M(5291);class y extends Z.Component{componentDidCatch(){}static getDerivedStateFromError(I){if((0,j.X)(I))return{notFoundTriggered:!0};throw I}static getDerivedStateFromProps(I,x){return I.pathname!==x.previousPathname&&x.notFoundTriggered?{notFoundTriggered:!1,previousPathname:I.pathname}:{notFoundTriggered:x.notFoundTriggered,previousPathname:I.pathname}}render(){return this.state.notFoundTriggered?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("meta",{name:"robots",content:"noindex"}),!1,this.props.notFoundStyles,this.props.notFound]}):this.props.children}constructor(I){super(I),this.state={notFoundTriggered:!!I.asNotFound,previousPathname:I.pathname}}}function S(k){let{notFound:I,notFoundStyles:x,asNotFound:C,children:N}=k,U=(0,W.jD)(),K=(0,Z.useContext)(z.MissingSlotContext);return I?(0,q.jsx)(y,{pathname:U,notFound:I,notFoundStyles:x,asNotFound:C,missingSlots:K,children:N}):(0,q.jsx)(q.Fragment,{children:N})}},7935:(Jt,ae,M)=>{"use strict";function q(Z){return typeof Z=="object"&&Z!==null&&"digest"in Z&&Z.digest==="NEXT_NOT_FOUND"}M.d(ae,{X:()=>q})},7745:(Jt,ae,M)=>{"use strict";M.d(ae,{I:()=>S});var q=M(926),Z=M(9220),W=M(7588),j=M(7508);function z(k){let{redirect:I,reset:x,redirectType:C}=k;return(0,W.tv)(),null}class y extends Z.Component{static getDerivedStateFromError(I){if((0,j.eo)(I))return{redirect:(0,j.M6)(I),redirectType:(0,j.kM)(I)};throw I}render(){let{redirect:I,redirectType:x}=this.state;return I!==null&&x!==null?(0,q.jsx)(z,{redirect:I,redirectType:x,reset:()=>this.setState({redirect:null})}):this.props.children}constructor(I){super(I),this.state={redirect:null,redirectType:null}}}function S(k){let{children:I}=k,x=(0,W.tv)();return(0,q.jsx)(y,{router:x,children:I})}},8613:(Jt,ae,M)=>{"use strict";var q;M.d(ae,{X:()=>q}),function(Z){Z[Z.SeeOther=303]="SeeOther",Z[Z.TemporaryRedirect=307]="TemporaryRedirect",Z[Z.PermanentRedirect=308]="PermanentRedirect"}(q||(q={}))},7508:(Jt,ae,M)=>{"use strict";M.d(ae,{M6:()=>j,eo:()=>W,j2:()=>y,kM:()=>z}),M(8983),M(2296);var q,Z=M(8613);function W(S){if(typeof S!="object"||S===null||!("digest"in S)||typeof S.digest!="string")return!1;let[k,I,x,C]=S.digest.split(";",4),N=Number(C);return k==="NEXT_REDIRECT"&&(I==="replace"||I==="push")&&typeof x=="string"&&!isNaN(N)&&N in Z.X}function j(S){return W(S)?S.digest.split(";",3)[2]:null}function z(S){if(!W(S))throw Error("Not a redirect error");return S.digest.split(";",2)[1]}function y(S){if(!W(S))throw Error("Not a redirect error");return Number(S.digest.split(";",4)[3])}(function(S){S.push="push",S.replace="replace"})(q||(q={}))},4782:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{default:()=>j});var q=M(926),Z=M(9220),W=M(5291);function j(){let z=(0,Z.useContext)(W.TemplateContext);return(0,q.jsx)(q.Fragment,{children:z})}},3433:(Jt,ae,M)=>{"use strict";M.d(ae,{d:()=>Z});var q=M(6083);function Z(W,j){return j===void 0&&(j=!1),Array.isArray(W)?W[0]+"|"+W[1]+"|"+W[2]:j&&W.startsWith(q.GC)?q.GC:W}},9130:(Jt,ae,M)=>{"use strict";M.d(ae,{Y:()=>k});var q=M(9338),Z=M(7034),W=M(5303),j=M(5912),z=M(1958);let{createFromFetch:y}=M(2505);function S(I){return[(0,Z.urlToUrlWithoutFlightMarker)(I).toString(),void 0,!1,!1]}async function k(I,x,C,N,U){let K={[q.A]:"1",[q.ph]:encodeURIComponent(JSON.stringify(x))};U===j.Ke.AUTO&&(K[q.qw]="1"),C&&(K[q.TP]=C);let Y=(0,z.a)([K[q.qw]||"0",K[q.ph],K[q.TP]].join(","));try{var ee;let fe=new URL(I);fe.searchParams.set(q.H4,Y);let Se=await fetch(fe,{credentials:"same-origin",headers:K}),ze=(0,Z.urlToUrlWithoutFlightMarker)(Se.url),Ue=Se.redirected?ze:void 0,at=Se.headers.get("content-type")||"",vt=!!Se.headers.get(q.VT),jt=!!((ee=Se.headers.get("vary"))!=null&&ee.includes(q.TP));if(at!==q.eY||!Se.ok)return I.hash&&(ze.hash=I.hash),S(ze.toString());let[re,F]=await y(Promise.resolve(Se),{callServer:W.g});return N!==re?S(Se.url):[F,Ue,vt,jt]}catch(fe){return console.error("Failed to fetch RSC payload for "+I+". Falling back to browser navigation.",fe),[I.toString(),void 0,!1,!1]}}},5912:(Jt,ae,M)=>{"use strict";var q,Z;M.d(ae,{HD:()=>W,J8:()=>k,Ke:()=>q,Pm:()=>y,T7:()=>Z,WA:()=>S,bO:()=>j,n0:()=>z});let W="refresh",j="navigate",z="server-patch",y="prefetch",S="server-action";function k(I){return I&&(typeof I=="object"||typeof I=="function")&&typeof I.then=="function"}(function(I){I.AUTO="auto",I.FULL="full",I.TEMPORARY="temporary"})(q||(q={})),function(I){I.fresh="fresh",I.reusable="reusable",I.expired="expired",I.stale="stale"}(Z||(Z={}))},8359:(Jt,ae,M)=>{"use strict";M.d(ae,{G:()=>Z,q:()=>W});let q="NEXT_STATIC_GEN_BAILOUT";class Z extends Error{constructor(...z){super(...z),this.code=q}}function W(j){return typeof j=="object"&&j!==null&&"code"in j&&j.code===q}},8906:(Jt,ae,M)=>{"use strict";M.d(ae,{c:()=>q});let q={then:()=>{}}},5694:(Jt,ae,M)=>{"use strict";M.d(ae,{e:()=>Z});var q=M(7843);function Z(W){return(0,q.Y)(W,"")}},3933:(Jt,ae,M)=>{"use strict";M.d(ae,{R:()=>W});var q=M(9558),Z=M(4679);let W=j=>{if(!j.startsWith("/"))return j;let{pathname:z,query:y,hash:S}=(0,Z.c)(j);return""+(0,q.Q)(z)+y+S}},7580:(Jt,ae,M)=>{"use strict";M.d(ae,{Ar:()=>x,BR:()=>K,EX:()=>k,Et:()=>I,JT:()=>S,Jp:()=>Y,Qq:()=>W,Sx:()=>j,Vz:()=>y,X_:()=>N,dN:()=>q,hd:()=>z,of:()=>C,y3:()=>Z,zt:()=>U});let q="nxtP",Z="x-prerender-revalidate",W="x-prerender-revalidate-if-generated",j=".prefetch.rsc",z=".rsc",y=".action",S=".json",k=".meta",I="x-next-cache-tags",x="x-next-cache-soft-tags",C="x-next-revalidated-tags",N="x-next-revalidate-tag-token",U="_N_T_",K=31536e3,Y={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ee={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"};({...ee,GROUP:(ee.reactServerComponents,ee.actionBrowser,ee.appMetadataRoute,ee.appRouteHandler,ee.instrument,ee.serverSideRendering,ee.appPagesBrowser,ee.middleware,ee.api,ee.reactServerComponents,ee.actionBrowser,ee.appMetadataRoute,ee.appRouteHandler,ee.serverSideRendering,ee.appPagesBrowser,ee.shared,ee.instrument)})},4439:(Jt,ae,M)=>{"use strict";M.d(ae,{Y:()=>q});class q{constructor(){let W,j;this.promise=new Promise((z,y)=>{W=z,j=y}),this.resolve=W,this.reject=j}}},3e3:(Jt,ae,M)=>{"use strict";var q;M.d(ae,{Ce:()=>C,Q6:()=>k,Se:()=>S,ek:()=>I,er:()=>x,ix:()=>N});let{env:Z,stdout:W}=((q=hn)==null?void 0:q.process)??{},j=Z&&!Z.NO_COLOR&&(Z.FORCE_COLOR||W?.isTTY&&!Z.CI&&Z.TERM!=="dumb"),z=(U,K,Y,ee)=>{let fe=U.substring(0,ee)+Y,Se=U.substring(ee+K.length),ze=Se.indexOf(K);return~ze?fe+z(Se,K,Y,ze):fe+Se},y=(U,K,Y=U)=>j?ee=>{let fe=""+ee,Se=fe.indexOf(K,U.length);return~Se?U+z(fe,K,Y,Se)+K:U+fe+K}:String,S=y("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m");y("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),y("\x1B[3m","\x1B[23m"),y("\x1B[4m","\x1B[24m"),y("\x1B[7m","\x1B[27m"),y("\x1B[8m","\x1B[28m"),y("\x1B[9m","\x1B[29m"),y("\x1B[30m","\x1B[39m");let k=y("\x1B[31m","\x1B[39m"),I=y("\x1B[32m","\x1B[39m"),x=y("\x1B[33m","\x1B[39m");y("\x1B[34m","\x1B[39m");let C=y("\x1B[35m","\x1B[39m");y("\x1B[38;2;173;127;168m","\x1B[39m"),y("\x1B[36m","\x1B[39m");let N=y("\x1B[37m","\x1B[39m");y("\x1B[90m","\x1B[39m"),y("\x1B[40m","\x1B[49m"),y("\x1B[41m","\x1B[49m"),y("\x1B[42m","\x1B[49m"),y("\x1B[43m","\x1B[49m"),y("\x1B[44m","\x1B[49m"),y("\x1B[45m","\x1B[49m"),y("\x1B[46m","\x1B[49m"),y("\x1B[47m","\x1B[49m")},6588:(Jt,ae,M)=>{"use strict";function q(W){return new URL(W,"http://n").pathname}function Z(W){return/https?:\/\//.test(W)}M.d(ae,{N0:()=>Z,RO:()=>q})},1057:(Jt,ae,M)=>{"use strict";M.d(ae,{Iq:()=>W,dS:()=>j});var q=M(6150),Z=M(7580);function W(z,y){let S=q.h.from(z.headers);return{isOnDemandRevalidate:S.get(Z.y3)===y.previewModeId,revalidateOnlyGenerated:S.has(Z.Qq)}}M(7081),M(1427);let j="__prerender_bypass";Symbol("__next_preview_data"),Symbol(j)},527:(Jt,ae,M)=>{"use strict";M.d(ae,{k:()=>z,w:()=>j});var q=M(1959),Z=M(7843),W=M(7274);function j({serverActionsManifest:S,pageName:k}){return new Proxy({},{get:(I,x)=>({id:S.edge[x].workers[y(k)],name:x,chunks:[]})})}function z(S,k,I){var x,C;let N=(x=I.edge[S])==null?void 0:x.workers,U=y(k);if(N)return N[U]?void 0:(C=Object.keys(N)[0],(0,q.w)((0,W.n)(C,"app")))}function y(S){return(0,Z.Y)(S,"app")?S:"app"+S}},2042:(Jt,ae,M)=>{"use strict";M.d(ae,{f:()=>Yc});var q=M(926),Z=M(9220),W=M(2650),j=M(9279),z=M(1482),y=M(7538),S=M(9338);function k(Me){return Me!=null}function I({name:Me,property:ct,content:St,media:Wt}){return St!=null&&St!==""?(0,q.jsx)("meta",{...Me?{name:Me}:{property:ct},...Wt?{media:Wt}:void 0,content:typeof St=="string"?St:St.toString()}):null}function x(Me){let ct=[];for(let St of Me)Array.isArray(St)?ct.push(...St.filter(k)):k(St)&&ct.push(St);return ct}let C=new Set(["og:image","twitter:image","og:video","og:audio"]);function N(Me,ct){return C.has(Me)&&ct==="url"?Me:((Me.startsWith("og:")||Me.startsWith("twitter:"))&&(ct=ct.replace(/([A-Z])/g,function(St){return"_"+St.toLowerCase()})),Me+":"+ct)}function U({propertyPrefix:Me,namePrefix:ct,contents:St}){return St==null?null:x(St.map(Wt=>typeof Wt=="string"||typeof Wt=="number"||Wt instanceof URL?I({...Me?{property:Me}:{name:ct},content:Wt}):function({content:or,namePrefix:Ir,propertyPrefix:Tr}){return or?x(Object.entries(or).map(([Cr,Yr])=>Yr===void 0?null:I({...Tr&&{property:N(Tr,Cr)},...Ir&&{name:N(Ir,Cr)},content:typeof Yr=="string"?Yr:Yr?.toString()}))):null}({namePrefix:ct,propertyPrefix:Me,content:Wt})))}let K={width:"width",height:"height",initialScale:"initial-scale",minimumScale:"minimum-scale",maximumScale:"maximum-scale",viewportFit:"viewport-fit",userScalable:"user-scalable",interactiveWidget:"interactive-widget"},Y=["icon","shortcut","apple","other"],ee=["telephone","date","address","email","url"];function fe({descriptor:Me,...ct}){return Me.url?(0,q.jsx)("link",{...ct,...Me.title&&{title:Me.title},href:Me.url.toString()}):null}function Se({app:Me,type:ct}){var St,Wt;return[I({name:`twitter:app:name:${ct}`,content:Me.name}),I({name:`twitter:app:id:${ct}`,content:Me.id[ct]}),I({name:`twitter:app:url:${ct}`,content:(Wt=Me.url)==null||(St=Wt[ct])==null?void 0:St.toString()})]}function ze({icon:Me}){let{url:ct,rel:St="icon",...Wt}=Me;return(0,q.jsx)("link",{rel:St,href:ct.toString(),...Wt})}function Ue({rel:Me,icon:ct}){if(typeof ct=="object"&&!(ct instanceof URL))return!ct.rel&&Me&&(ct.rel=Me),ze({icon:ct});{let St=ct.toString();return(0,q.jsx)("link",{rel:Me,href:St})}}function at(){return{width:"device-width",initialScale:1,themeColor:null,colorScheme:null}}function vt(){return{viewport:null,themeColor:null,colorScheme:null,metadataBase:null,title:null,description:null,applicationName:null,authors:null,generator:null,keywords:null,referrer:null,creator:null,publisher:null,robots:null,manifest:null,alternates:{canonical:null,languages:null,media:null,types:null},icons:null,openGraph:null,twitter:null,verification:{},appleWebApp:null,formatDetection:null,itunes:null,facebook:null,abstract:null,appLinks:null,archives:null,assets:null,bookmarks:null,category:null,classification:null,other:{}}}function jt(Me){if(Me!=null)return Array.isArray(Me)?Me:[Me]}var re=M(3889),F=M.n(re);function Q(Me){return typeof Me=="string"||Me instanceof URL}function se(){return new URL(`http://localhost:${process.env.PORT||3e3}`)}function me(Me,ct){if(Me instanceof URL)return Me;if(!Me)return null;try{return new URL(Me)}catch{}ct||(ct=se());let St=ct.pathname||"";return new URL(F().posix.join(St,Me),ct)}let ce=/^(?:\/((?!\.well-known(?:\/.*)?)(?:[^/]+\/)*[^/]+\.\w+))(\/?|$)/i;function Ke(Me,ct,{trailingSlash:St,pathname:Wt}){var or,Ir;Me=typeof(or=Me)=="string"&&or.startsWith("./")?F().posix.resolve(Wt,or):or;let Tr="",Cr=ct?me(Me,ct):Me;if(Tr=typeof Cr=="string"?Cr:Cr.pathname==="/"?Cr.origin:Cr.href,St&&!Tr.endsWith("/")){let Yr=Tr.startsWith("/"),qr=Tr.includes("?"),ln=!1,Pn=!1;if(!Yr){try{let Rn=new URL(Tr);ln=ct!=null&&Rn.origin!==ct.origin,Ir=Rn.pathname,Pn=ce.test(Ir)}catch{ln=!0}if(!Pn&&!ln&&!qr)return`${Tr}/`}}return Tr}function Je(Me,ct){return Me?Me.replace(/%s/g,ct):ct}function He(Me,ct){let St,Wt=typeof Me!="string"&&Me&&"template"in Me?Me.template:null;return typeof Me=="string"?St=Je(ct,Me):Me&&("default"in Me&&(St=Je(ct,Me.default)),"absolute"in Me&&Me.absolute&&(St=Me.absolute)),Me&&typeof Me!="string"?{template:Wt,absolute:St||""}:{absolute:St||Me||"",template:Wt}}var _e=M(6588),Fe=M(7106);let pt={article:["authors","tags"],song:["albums","musicians"],playlist:["albums","musicians"],radio:["creators"],video:["actors","directors","writers","tags"],basic:["emails","phoneNumbers","faxNumbers","alternateLocale","audio","videos"]};function lr(Me,ct,St){let Wt=jt(Me);if(!Wt)return Wt;let{isMetadataBaseMissing:or,fallbackMetadataBase:Ir}=function(Cr){let Yr=se(),qr=function(){let Pn=process.env.VERCEL_BRANCH_URL||process.env.VERCEL_URL;return Pn?new URL(`https://${Pn}`):void 0}(),ln=function(){let Pn=process.env.VERCEL_PROJECT_PRODUCTION_URL;return Pn?new URL(`https://${Pn}`):void 0}();return{fallbackMetadataBase:qr&&process.env.VERCEL_ENV==="preview"?qr:Cr||ln||Yr,isMetadataBaseMissing:!Cr}}(ct),Tr=[];for(let Cr of Wt){let Yr=function(qr,ln,Pn,Rn){if(!qr)return;let mi=Q(qr),Vi=mi?qr:qr.url;if(!Vi)return;let Dn=!process.env.VERCEL;return(Rn||Dn)&&typeof Vi=="string"&&!(0,_e.N0)(Vi)&&Pn&&(0,Fe.O4)(`metadataBase property in metadata export is not set for resolving social open graph or twitter images, using "${ln.origin}". See https://nextjs.org/docs/app/api-reference/functions/generate-metadata#metadatabase`),mi?{url:me(Vi,ln)}:{...qr,url:me(Vi,ln)}}(Cr,Ir,or,St);Yr&&Tr.push(Yr)}return Tr}let Ne={article:pt.article,book:pt.article,"music.song":pt.song,"music.album":pt.song,"music.playlist":pt.playlist,"music.radio_station":pt.radio,"video.movie":pt.video,"video.episode":pt.video},tt=(Me,ct,St,Wt)=>{if(!Me)return null;let or={...Me,title:He(Me.title,Wt)};return function(Ir,Tr){var Cr;for(let Yr of(Cr=Tr&&"type"in Tr?Tr.type:void 0)&&Cr in Ne?Ne[Cr].concat(pt.basic):pt.basic)if(Yr in Tr&&Yr!=="url"){let qr=Tr[Yr];if(qr){let ln=jt(qr);Ir[Yr]=ln}}Ir.images=lr(Tr.images,ct,St.isStandaloneMode)}(or,Me),or.url=Me.url?Ke(Me.url,ct,St):null,or},we=["site","siteId","creator","creatorId","description"],Ce=(Me,ct,St,Wt)=>{var or;if(!Me)return null;let Ir="card"in Me?Me.card:void 0,Tr={...Me,title:He(Me.title,Wt)};for(let Cr of we)Tr[Cr]=Me[Cr]||null;if(Tr.images=lr(Me.images,ct,St.isStandaloneMode),Ir=Ir||((or=Tr.images)!=null&&or.length?"summary_large_image":"summary"),Tr.card=Ir,"card"in Tr)switch(Tr.card){case"player":Tr.players=jt(Tr.players)||[];break;case"app":Tr.app=Tr.app||{}}return Tr};var We=M(6083);async function ve(Me){let ct,St,{layout:Wt,page:or,defaultPage:Ir}=Me[2],Tr=Ir!==void 0&&Me[0]===We.av;return Wt!==void 0?(ct=await Wt[0](),St="layout"):or!==void 0?(ct=await or[0](),St="page"):Tr&&(ct=await Ir[0](),St="page"),[ct,St]}async function Ve(Me,ct){let{[ct]:St}=Me[2];if(St!==void 0)return await St[0]()}function gt(Me,ct,St){return Me instanceof URL&&(Me=new URL(St.pathname,Me)),Ke(Me,ct,St)}let mt=Me=>{var ct;if(!Me)return null;let St=[];return(ct=jt(Me))==null||ct.forEach(Wt=>{typeof Wt=="string"?St.push({color:Wt}):typeof Wt=="object"&&St.push({color:Wt.color,media:Wt.media})}),St};function lt(Me,ct,St){if(!Me)return null;let Wt={};for(let[or,Ir]of Object.entries(Me))typeof Ir=="string"||Ir instanceof URL?Wt[or]=[{url:gt(Ir,ct,St)}]:(Wt[or]=[],Ir?.forEach((Tr,Cr)=>{let Yr=gt(Tr.url,ct,St);Wt[or][Cr]={url:Yr,title:Tr.title}}));return Wt}let et=(Me,ct,St)=>{if(!Me)return null;let Wt=function(Ir,Tr,Cr){return Ir?{url:gt(typeof Ir=="string"||Ir instanceof URL?Ir:Ir.url,Tr,Cr)}:null}(Me.canonical,ct,St),or=lt(Me.languages,ct,St);return{canonical:Wt,languages:or,media:lt(Me.media,ct,St),types:lt(Me.types,ct,St)}},bt=["noarchive","nosnippet","noimageindex","nocache","notranslate","indexifembedded","nositelinkssearchbox","unavailable_after","max-video-preview","max-image-preview","max-snippet"],Ct=Me=>{if(!Me)return null;if(typeof Me=="string")return Me;let ct=[];for(let St of(Me.index?ct.push("index"):typeof Me.index=="boolean"&&ct.push("noindex"),Me.follow?ct.push("follow"):typeof Me.follow=="boolean"&&ct.push("nofollow"),bt)){let Wt=Me[St];Wt!==void 0&&Wt!==!1&&ct.push(typeof Wt=="boolean"?St:`${St}:${Wt}`)}return ct.join(", ")},Ee=Me=>Me?{basic:Ct(Me),googleBot:typeof Me!="string"?Ct(Me.googleBot):null}:null,Qe=["google","yahoo","yandex","me","other"],yt=Me=>{if(!Me)return null;let ct={};for(let St of Qe){let Wt=Me[St];if(Wt)if(St==="other")for(let or in ct.other={},Me.other){let Ir=jt(Me.other[or]);Ir&&(ct.other[or]=Ir)}else ct[St]=jt(Wt)}return ct},Rt=Me=>{var ct;if(!Me)return null;if(Me===!0)return{capable:!0};let St=Me.startupImage?(ct=jt(Me.startupImage))==null?void 0:ct.map(Wt=>typeof Wt=="string"?{url:Wt}:Wt):null;return{capable:!("capable"in Me)||!!Me.capable,title:Me.title||null,startupImage:St,statusBarStyle:Me.statusBarStyle||"default"}},Et=Me=>{if(!Me)return null;for(let ct in Me)Me[ct]=jt(Me[ct]);return Me},rr=(Me,ct,St)=>Me?{appId:Me.appId,appArgument:Me.appArgument?gt(Me.appArgument,ct,St):void 0}:null,an=Me=>Me?{appId:Me.appId,admins:jt(Me.admins)}:null;function Hr(Me){return Q(Me)?{url:Me}:(Array.isArray(Me),Me)}let gn=Me=>{if(!Me)return null;let ct={icon:[],apple:[]};if(Array.isArray(Me))ct.icon=Me.map(Hr).filter(Boolean);else if(Q(Me))ct.icon=[Hr(Me)];else for(let St of Y){let Wt=jt(Me[St]);Wt&&(ct[St]=Wt.map(Hr))}return ct};var Or=M(7081),wn=M(1427);async function Tn(Me,ct,St){if(typeof Me.generateViewport=="function"){let{route:Wt}=St;return or=>(0,Or.Yz)().trace(wn._s.generateViewport,{spanName:`generateViewport ${Wt}`,attributes:{"next.page":Wt}},()=>Me.generateViewport(ct,or))}return Me.viewport||null}async function tn(Me,ct,St){if(typeof Me.generateMetadata=="function"){let{route:Wt}=St;return or=>(0,Or.Yz)().trace(wn._s.generateMetadata,{spanName:`generateMetadata ${Wt}`,attributes:{"next.page":Wt}},()=>Me.generateMetadata(ct,or))}return Me.metadata||null}async function rn(Me,ct,St){var Wt;if(!Me?.[St])return;let or=Me[St].map(async Ir=>{var Tr;return(Tr=await Ir(ct)).default||Tr});return or?.length>0?(Wt=await Promise.all(or))==null?void 0:Wt.flat():void 0}async function on(Me,ct){let{metadata:St}=Me;if(!St)return null;let[Wt,or,Ir,Tr]=await Promise.all([rn(St,ct,"icon"),rn(St,ct,"apple"),rn(St,ct,"openGraph"),rn(St,ct,"twitter")]);return{icon:Wt,apple:or,openGraph:Ir,twitter:Tr,manifest:St.manifest}}async function cn({tree:Me,metadataItems:ct,errorMetadataItem:St,props:Wt,route:or,errorConvention:Ir}){let Tr,Cr,Yr=!!(Ir&&Me[2][Ir]);Ir?(Tr=await Ve(Me,"layout"),Cr=Ir):[Tr,Cr]=await ve(Me),Cr&&(or+=`/${Cr}`);let qr=await on(Me[2],Wt),ln=Tr?await tn(Tr,Wt,{route:or}):null,Pn=Tr?await Tn(Tr,Wt,{route:or}):null;if(ct.push([ln,qr,Pn]),Yr&&Ir){let Rn=await Ve(Me,Ir),mi=Rn?await Tn(Rn,Wt,{route:or}):null,Vi=Rn?await tn(Rn,Wt,{route:or}):null;St[0]=Vi,St[1]=qr,St[2]=mi}}async function On({tree:Me,parentParams:ct,metadataItems:St,errorMetadataItem:Wt,treePrefix:or=[],getDynamicParamFromSegment:Ir,searchParams:Tr,errorConvention:Cr}){let Yr,[qr,ln,{page:Pn}]=Me,Rn=[...or,qr],mi=Ir(qr),Vi=mi&&mi.value!==null?{...ct,[mi.param]:mi.value}:ct;for(let Dn in Yr=Pn!==void 0?{params:Vi,searchParams:Tr}:{params:Vi},await cn({tree:Me,metadataItems:St,errorMetadataItem:Wt,errorConvention:Cr,props:Yr,route:Rn.filter(ts=>ts!==We.GC).join("/")}),ln){let ts=ln[Dn];await On({tree:ts,metadataItems:St,errorMetadataItem:Wt,parentParams:Vi,treePrefix:Rn,searchParams:Tr,getDynamicParamFromSegment:Ir,errorConvention:Cr})}return Object.keys(ln).length===0&&Cr&&St.push(Wt),St}let Pt=Me=>!!Me?.absolute,_n=Me=>Pt(Me?.title);function si(Me,ct){Me&&(!_n(Me)&&_n(ct)&&(Me.title=ct.title),!Me.description&&ct.description&&(Me.description=ct.description))}async function zi(Me,ct,St,Wt,or,Ir){let Tr=Me(St[Wt]),Cr=ct.resolvers,Yr=null;if(typeof Tr=="function"){if(!Cr.length)for(let Pn=Wt;Pn<St.length;Pn++){let Rn=Me(St[Pn]);typeof Rn=="function"&&function(mi,Vi,Dn){let ts=Vi(new Promise(Fs=>{Dn.push(Fs)}));ts instanceof Promise&&ts.catch(Fs=>({__nextError:Fs})),mi.push(ts)}(Ir,Rn,Cr)}let qr=Cr[ct.resolvingIndex],ln=Ir[ct.resolvingIndex++];if(qr(or),(Yr=ln instanceof Promise?await ln:ln)&&typeof Yr=="object"&&"__nextError"in Yr)throw Yr.__nextError}else Tr!==null&&typeof Tr=="object"&&(Yr=Tr);return Yr}async function Hs(Me,ct){let St,Wt=vt(),or=[],Ir={title:null,twitter:null,openGraph:null},Tr={resolvers:[],resolvingIndex:0},Cr={warnings:new Set},Yr={icon:[],apple:[]};for(let Dn=0;Dn<Me.length;Dn++){var qr,ln,Pn,Rn,mi,Vi;let ts=Me[Dn][1];if(Dn<=1&&(Vi=ts==null||(qr=ts.icon)==null?void 0:qr[0])&&(Vi.url==="/favicon.ico"||Vi.url.toString().startsWith("/favicon.ico?"))&&Vi.type==="image/x-icon"){let gi=ts==null||(ln=ts.icon)==null?void 0:ln.shift();Dn===0&&(St=gi)}let Fs=await zi(gi=>gi[0],Tr,Me,Dn,Wt,or);(function({source:gi,target:as,staticFilesMetadata:Zt,titleTemplates:_i,metadataContext:yi,buildState:Wi,leafSegmentStaticIcons:Ui}){let Pi=gi?.metadataBase!==void 0?gi.metadataBase:as.metadataBase;for(let $n in gi)switch($n){case"title":as.title=He(gi.title,_i.title);break;case"alternates":as.alternates=et(gi.alternates,Pi,yi);break;case"openGraph":as.openGraph=tt(gi.openGraph,Pi,yi,_i.openGraph);break;case"twitter":as.twitter=Ce(gi.twitter,Pi,yi,_i.twitter);break;case"facebook":as.facebook=an(gi.facebook);break;case"verification":as.verification=yt(gi.verification);break;case"icons":as.icons=gn(gi.icons);break;case"appleWebApp":as.appleWebApp=Rt(gi.appleWebApp);break;case"appLinks":as.appLinks=Et(gi.appLinks);break;case"robots":as.robots=Ee(gi.robots);break;case"archives":case"assets":case"bookmarks":case"keywords":as[$n]=jt(gi[$n]);break;case"authors":as[$n]=jt(gi.authors);break;case"itunes":as[$n]=rr(gi.itunes,Pi,yi);break;case"applicationName":case"description":case"generator":case"creator":case"publisher":case"category":case"classification":case"referrer":case"formatDetection":case"manifest":as[$n]=gi[$n]||null;break;case"other":as.other=Object.assign({},as.other,gi.other);break;case"metadataBase":as.metadataBase=Pi;break;default:($n==="viewport"||$n==="themeColor"||$n==="colorScheme")&&gi[$n]!=null&&Wi.warnings.add(`Unsupported metadata ${$n} is configured in metadata export in ${yi.pathname}. Please move it to viewport export instead.
Read more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport`)}(function($n,ws,bs,os,hi,xe){var T,G;if(!bs)return;let{icon:pe,apple:qe,openGraph:wt,twitter:Dt,manifest:pr}=bs;if(pe&&(xe.icon=pe),qe&&(xe.apple=qe),Dt&&!(!($n==null||(T=$n.twitter)==null)&&T.hasOwnProperty("images"))){let mr=Ce({...ws.twitter,images:Dt},ws.metadataBase,os,hi.twitter);ws.twitter=mr}if(wt&&!(!($n==null||(G=$n.openGraph)==null)&&G.hasOwnProperty("images"))){let mr=tt({...ws.openGraph,images:wt},ws.metadataBase,os,hi.openGraph);ws.openGraph=mr}pr&&(ws.manifest=pr)})(gi,as,Zt,yi,_i,Ui)})({target:Wt,source:Fs,metadataContext:ct,staticFilesMetadata:ts,titleTemplates:Ir,buildState:Cr,leafSegmentStaticIcons:Yr}),Dn<Me.length-2&&(Ir={title:((Pn=Wt.title)==null?void 0:Pn.template)||null,openGraph:((Rn=Wt.openGraph)==null?void 0:Rn.title.template)||null,twitter:((mi=Wt.twitter)==null?void 0:mi.title.template)||null})}if((Yr.icon.length>0||Yr.apple.length>0)&&!Wt.icons&&(Wt.icons={icon:[],apple:[]},Yr.icon.length>0&&Wt.icons.icon.unshift(...Yr.icon),Yr.apple.length>0&&Wt.icons.apple.unshift(...Yr.apple)),Cr.warnings.size>0)for(let Dn of Cr.warnings)Fe.ZK(Dn);return function(Dn,ts,Fs,gi){let{openGraph:as,twitter:Zt}=Dn;if(as){let _i={},yi=_n(Zt),Wi=Zt?.description,Ui=!!(Zt?.hasOwnProperty("images")&&Zt.images);if(!yi&&(Pt(as.title)?_i.title=as.title:Dn.title&&Pt(Dn.title)&&(_i.title=Dn.title)),Wi||(_i.description=as.description||Dn.description||void 0),Ui||(_i.images=as.images),Object.keys(_i).length>0){let Pi=Ce(_i,Dn.metadataBase,gi,Fs.twitter);Dn.twitter?Dn.twitter=Object.assign({},Dn.twitter,{...!yi&&{title:Pi?.title},...!Wi&&{description:Pi?.description},...!Ui&&{images:Pi?.images}}):Dn.twitter=Pi}}return si(as,Dn),si(Zt,Dn),ts&&(Dn.icons||(Dn.icons={icon:[],apple:[]}),Dn.icons.icon.unshift(ts)),Dn}(Wt,St,Ir,ct)}async function es(Me){let ct=at(),St=[],Wt={resolvers:[],resolvingIndex:0};for(let or=0;or<Me.length;or++){let Ir=await zi(Tr=>Tr[2],Wt,Me,or,ct,St);(function({target:Tr,source:Cr}){if(Cr)for(let Yr in Cr)switch(Yr){case"themeColor":Tr.themeColor=mt(Cr.themeColor);break;case"colorScheme":Tr.colorScheme=Cr.colorScheme||null;break;default:Cr[Yr]!==void 0&&(Tr[Yr]=Cr[Yr])}})({target:ct,source:Ir})}return ct}async function Ri({tree:Me,parentParams:ct,metadataItems:St,errorMetadataItem:Wt,getDynamicParamFromSegment:or,searchParams:Ir,errorConvention:Tr,metadataContext:Cr}){let Yr,qr=await On({tree:Me,parentParams:ct,metadataItems:St,errorMetadataItem:Wt,getDynamicParamFromSegment:or,searchParams:Ir,errorConvention:Tr}),ln=vt(),Pn=at();try{Pn=await es(qr),ln=await Hs(qr,Cr)}catch(Rn){Yr=Rn}return[Yr,ln,Pn]}var kn=M(7935);function st(Me,ct){return{pathname:Me.split("?")[0],trailingSlash:ct.trailingSlash,isStandaloneMode:ct.nextConfigOutput==="standalone"}}function Ht({tree:Me,query:ct,metadataContext:St,getDynamicParamFromSegment:Wt,appUsingSizeAdjustment:or,errorType:Ir,createDynamicallyTrackedSearchParams:Tr}){let Cr,Yr=new Promise(qr=>{Cr=qr});return[async function(){let qr,ln=vt(),Pn=at(),Rn=ln,mi=Pn,Vi=[null,null,null],Dn=Tr(ct),[ts,Fs,gi]=await Ri({tree:Me,parentParams:{},metadataItems:[],errorMetadataItem:Vi,searchParams:Dn,getDynamicParamFromSegment:Wt,errorConvention:Ir==="redirect"?void 0:Ir,metadataContext:St});if(ts){if(qr=ts,!Ir&&(0,kn.X)(ts)){let[Zt,_i,yi]=await Ri({tree:Me,parentParams:{},metadataItems:[],errorMetadataItem:Vi,searchParams:Dn,getDynamicParamFromSegment:Wt,errorConvention:"not-found",metadataContext:St});mi=yi,Rn=_i,qr=Zt||qr}Cr(qr)}else mi=gi,Rn=Fs,Cr(void 0);let as=x([function({viewport:Zt}){return x([I({name:"viewport",content:function(_i){let yi=null;if(_i&&typeof _i=="object"){for(let Wi in yi="",K)if(Wi in _i){let Ui=_i[Wi];typeof Ui=="boolean"&&(Ui=Ui?"yes":"no"),yi&&(yi+=", "),yi+=`${K[Wi]}=${Ui}`}}return yi}(Zt)}),...Zt.themeColor?Zt.themeColor.map(_i=>I({name:"theme-color",content:_i.color,media:_i.media})):[],I({name:"color-scheme",content:Zt.colorScheme})])}({viewport:mi}),function({metadata:Zt}){var _i,yi,Wi;return x([(0,q.jsx)("meta",{charSet:"utf-8"}),Zt.title!==null&&Zt.title.absolute?(0,q.jsx)("title",{children:Zt.title.absolute}):null,I({name:"description",content:Zt.description}),I({name:"application-name",content:Zt.applicationName}),...Zt.authors?Zt.authors.map(Ui=>[Ui.url?(0,q.jsx)("link",{rel:"author",href:Ui.url.toString()}):null,I({name:"author",content:Ui.name})]):[],Zt.manifest?(0,q.jsx)("link",{rel:"manifest",href:Zt.manifest.toString(),crossOrigin:"use-credentials"}):null,I({name:"generator",content:Zt.generator}),I({name:"keywords",content:(_i=Zt.keywords)==null?void 0:_i.join(",")}),I({name:"referrer",content:Zt.referrer}),I({name:"creator",content:Zt.creator}),I({name:"publisher",content:Zt.publisher}),I({name:"robots",content:(yi=Zt.robots)==null?void 0:yi.basic}),I({name:"googlebot",content:(Wi=Zt.robots)==null?void 0:Wi.googleBot}),I({name:"abstract",content:Zt.abstract}),...Zt.archives?Zt.archives.map(Ui=>(0,q.jsx)("link",{rel:"archives",href:Ui})):[],...Zt.assets?Zt.assets.map(Ui=>(0,q.jsx)("link",{rel:"assets",href:Ui})):[],...Zt.bookmarks?Zt.bookmarks.map(Ui=>(0,q.jsx)("link",{rel:"bookmarks",href:Ui})):[],I({name:"category",content:Zt.category}),I({name:"classification",content:Zt.classification}),...Zt.other?Object.entries(Zt.other).map(([Ui,Pi])=>Array.isArray(Pi)?Pi.map($n=>I({name:Ui,content:$n})):I({name:Ui,content:Pi})):[]])}({metadata:Rn}),function({alternates:Zt}){if(!Zt)return null;let{canonical:_i,languages:yi,media:Wi,types:Ui}=Zt;return x([_i?fe({rel:"canonical",descriptor:_i}):null,yi?Object.entries(yi).flatMap(([Pi,$n])=>$n?.map(ws=>fe({rel:"alternate",hrefLang:Pi,descriptor:ws}))):null,Wi?Object.entries(Wi).flatMap(([Pi,$n])=>$n?.map(ws=>fe({rel:"alternate",media:Pi,descriptor:ws}))):null,Ui?Object.entries(Ui).flatMap(([Pi,$n])=>$n?.map(ws=>fe({rel:"alternate",type:Pi,descriptor:ws}))):null])}({alternates:Rn.alternates}),function({itunes:Zt}){if(!Zt)return null;let{appId:_i,appArgument:yi}=Zt,Wi=`app-id=${_i}`;return yi&&(Wi+=`, app-argument=${yi}`),(0,q.jsx)("meta",{name:"apple-itunes-app",content:Wi})}({itunes:Rn.itunes}),function({facebook:Zt}){if(!Zt)return null;let{appId:_i,admins:yi}=Zt;return x([_i?(0,q.jsx)("meta",{property:"fb:app_id",content:_i}):null,...yi?yi.map(Wi=>(0,q.jsx)("meta",{property:"fb:admins",content:Wi})):[]])}({facebook:Rn.facebook}),function({formatDetection:Zt}){if(!Zt)return null;let _i="";for(let yi of ee)yi in Zt&&(_i&&(_i+=", "),_i+=`${yi}=no`);return(0,q.jsx)("meta",{name:"format-detection",content:_i})}({formatDetection:Rn.formatDetection}),function({verification:Zt}){return Zt?x([U({namePrefix:"google-site-verification",contents:Zt.google}),U({namePrefix:"y_key",contents:Zt.yahoo}),U({namePrefix:"yandex-verification",contents:Zt.yandex}),U({namePrefix:"me",contents:Zt.me}),...Zt.other?Object.entries(Zt.other).map(([_i,yi])=>U({namePrefix:_i,contents:yi})):[]]):null}({verification:Rn.verification}),function({appleWebApp:Zt}){if(!Zt)return null;let{capable:_i,title:yi,startupImage:Wi,statusBarStyle:Ui}=Zt;return x([_i?I({name:"apple-mobile-web-app-capable",content:"yes"}):null,I({name:"apple-mobile-web-app-title",content:yi}),Wi?Wi.map(Pi=>(0,q.jsx)("link",{href:Pi.url,media:Pi.media,rel:"apple-touch-startup-image"})):null,Ui?I({name:"apple-mobile-web-app-status-bar-style",content:Ui}):null])}({appleWebApp:Rn.appleWebApp}),function({openGraph:Zt}){var _i,yi,Wi,Ui,Pi,$n,ws;let bs;if(!Zt)return null;if("type"in Zt){let os=Zt.type;switch(os){case"website":bs=[I({property:"og:type",content:"website"})];break;case"article":bs=[I({property:"og:type",content:"article"}),I({property:"article:published_time",content:(Ui=Zt.publishedTime)==null?void 0:Ui.toString()}),I({property:"article:modified_time",content:(Pi=Zt.modifiedTime)==null?void 0:Pi.toString()}),I({property:"article:expiration_time",content:($n=Zt.expirationTime)==null?void 0:$n.toString()}),U({propertyPrefix:"article:author",contents:Zt.authors}),I({property:"article:section",content:Zt.section}),U({propertyPrefix:"article:tag",contents:Zt.tags})];break;case"book":bs=[I({property:"og:type",content:"book"}),I({property:"book:isbn",content:Zt.isbn}),I({property:"book:release_date",content:Zt.releaseDate}),U({propertyPrefix:"book:author",contents:Zt.authors}),U({propertyPrefix:"book:tag",contents:Zt.tags})];break;case"profile":bs=[I({property:"og:type",content:"profile"}),I({property:"profile:first_name",content:Zt.firstName}),I({property:"profile:last_name",content:Zt.lastName}),I({property:"profile:username",content:Zt.username}),I({property:"profile:gender",content:Zt.gender})];break;case"music.song":bs=[I({property:"og:type",content:"music.song"}),I({property:"music:duration",content:(ws=Zt.duration)==null?void 0:ws.toString()}),U({propertyPrefix:"music:album",contents:Zt.albums}),U({propertyPrefix:"music:musician",contents:Zt.musicians})];break;case"music.album":bs=[I({property:"og:type",content:"music.album"}),U({propertyPrefix:"music:song",contents:Zt.songs}),U({propertyPrefix:"music:musician",contents:Zt.musicians}),I({property:"music:release_date",content:Zt.releaseDate})];break;case"music.playlist":bs=[I({property:"og:type",content:"music.playlist"}),U({propertyPrefix:"music:song",contents:Zt.songs}),U({propertyPrefix:"music:creator",contents:Zt.creators})];break;case"music.radio_station":bs=[I({property:"og:type",content:"music.radio_station"}),U({propertyPrefix:"music:creator",contents:Zt.creators})];break;case"video.movie":bs=[I({property:"og:type",content:"video.movie"}),U({propertyPrefix:"video:actor",contents:Zt.actors}),U({propertyPrefix:"video:director",contents:Zt.directors}),U({propertyPrefix:"video:writer",contents:Zt.writers}),I({property:"video:duration",content:Zt.duration}),I({property:"video:release_date",content:Zt.releaseDate}),U({propertyPrefix:"video:tag",contents:Zt.tags})];break;case"video.episode":bs=[I({property:"og:type",content:"video.episode"}),U({propertyPrefix:"video:actor",contents:Zt.actors}),U({propertyPrefix:"video:director",contents:Zt.directors}),U({propertyPrefix:"video:writer",contents:Zt.writers}),I({property:"video:duration",content:Zt.duration}),I({property:"video:release_date",content:Zt.releaseDate}),U({propertyPrefix:"video:tag",contents:Zt.tags}),I({property:"video:series",content:Zt.series})];break;case"video.tv_show":bs=[I({property:"og:type",content:"video.tv_show"})];break;case"video.other":bs=[I({property:"og:type",content:"video.other"})];break;default:throw Error(`Invalid OpenGraph type: ${os}`)}}return x([I({property:"og:determiner",content:Zt.determiner}),I({property:"og:title",content:(_i=Zt.title)==null?void 0:_i.absolute}),I({property:"og:description",content:Zt.description}),I({property:"og:url",content:(yi=Zt.url)==null?void 0:yi.toString()}),I({property:"og:site_name",content:Zt.siteName}),I({property:"og:locale",content:Zt.locale}),I({property:"og:country_name",content:Zt.countryName}),I({property:"og:ttl",content:(Wi=Zt.ttl)==null?void 0:Wi.toString()}),U({propertyPrefix:"og:image",contents:Zt.images}),U({propertyPrefix:"og:video",contents:Zt.videos}),U({propertyPrefix:"og:audio",contents:Zt.audio}),U({propertyPrefix:"og:email",contents:Zt.emails}),U({propertyPrefix:"og:phone_number",contents:Zt.phoneNumbers}),U({propertyPrefix:"og:fax_number",contents:Zt.faxNumbers}),U({propertyPrefix:"og:locale:alternate",contents:Zt.alternateLocale}),...bs||[]])}({openGraph:Rn.openGraph}),function({twitter:Zt}){var _i;if(!Zt)return null;let{card:yi}=Zt;return x([I({name:"twitter:card",content:yi}),I({name:"twitter:site",content:Zt.site}),I({name:"twitter:site:id",content:Zt.siteId}),I({name:"twitter:creator",content:Zt.creator}),I({name:"twitter:creator:id",content:Zt.creatorId}),I({name:"twitter:title",content:(_i=Zt.title)==null?void 0:_i.absolute}),I({name:"twitter:description",content:Zt.description}),U({namePrefix:"twitter:image",contents:Zt.images}),...yi==="player"?Zt.players.flatMap(Wi=>[I({name:"twitter:player",content:Wi.playerUrl.toString()}),I({name:"twitter:player:stream",content:Wi.streamUrl.toString()}),I({name:"twitter:player:width",content:Wi.width}),I({name:"twitter:player:height",content:Wi.height})]):[],...yi==="app"?[Se({app:Zt.app,type:"iphone"}),Se({app:Zt.app,type:"ipad"}),Se({app:Zt.app,type:"googleplay"})]:[]])}({twitter:Rn.twitter}),function({appLinks:Zt}){return Zt?x([U({propertyPrefix:"al:ios",contents:Zt.ios}),U({propertyPrefix:"al:iphone",contents:Zt.iphone}),U({propertyPrefix:"al:ipad",contents:Zt.ipad}),U({propertyPrefix:"al:android",contents:Zt.android}),U({propertyPrefix:"al:windows_phone",contents:Zt.windows_phone}),U({propertyPrefix:"al:windows",contents:Zt.windows}),U({propertyPrefix:"al:windows_universal",contents:Zt.windows_universal}),U({propertyPrefix:"al:web",contents:Zt.web})]):null}({appLinks:Rn.appLinks}),function({icons:Zt}){if(!Zt)return null;let _i=Zt.shortcut,yi=Zt.icon,Wi=Zt.apple,Ui=Zt.other;return x([_i?_i.map(Pi=>Ue({rel:"shortcut icon",icon:Pi})):null,yi?yi.map(Pi=>Ue({rel:"icon",icon:Pi})):null,Wi?Wi.map(Pi=>Ue({rel:"apple-touch-icon",icon:Pi})):null,Ui?Ui.map(Pi=>ze({icon:Pi})):null])}({icons:Rn.icons})]);return or&&as.push((0,q.jsx)("meta",{name:"next-size-adjust"})),(0,q.jsx)(q.Fragment,{children:as.map((Zt,_i)=>Z.cloneElement(Zt,{key:_i}))})},async function(){let qr=await Yr;if(qr)throw qr;return null}]}var zt=M(5358),Yt=M(4219);let tr={wrap(Me,{urlPathname:ct,renderOpts:St,requestEndedState:Wt},or){let Ir=!St.supportsDynamicResponse&&!St.isDraftMode&&!St.isServerAction,Tr=Ir&&St.experimental.ppr?(0,Yt.FI)(St.isDebugPPRSkeleton):null,Cr={isStaticGeneration:Ir,urlPathname:ct,pagePath:St.originalPathname,incrementalCache:St.incrementalCache||hn.__incrementalCache,isRevalidate:St.isRevalidate,isPrerendering:St.nextExport,fetchCache:St.fetchCache,isOnDemandRevalidate:St.isOnDemandRevalidate,isDraftMode:St.isDraftMode,prerenderState:Tr,requestEndedState:Wt};return St.store=Cr,Me.run(Cr,or,Cr)}};var En=M(7508),Kr=M(7580);M(6195).Buffer;let li=Me=>{let ct=["/layout"];if(Me.startsWith("/")){let St=Me.split("/");for(let Wt=1;Wt<St.length+1;Wt++){let or=St.slice(0,Wt).join("/");or&&(or.endsWith("/page")||or.endsWith("/route")||(or=`${or}${or.endsWith("/")?"":"/"}layout`),ct.push(or))}}return ct};class pn extends W.Z{constructor(ct,St){super(ct,{contentType:S.eY,waitUntil:St?.waitUntil,metadata:St?.metadata??{}})}}var In=M(5650),qn=M.n(In);let Ln=["useDeferredValue","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useReducer","useRef","useState","useSyncExternalStore","useTransition","experimental_useOptimistic","useOptimistic"];function Ei(Me,ct){if(Me.message=ct,Me.stack){let St=Me.stack.split(`
`);St[0]=ct,Me.stack=St.join(`
`)}}var Ha=M(4009),fi=M(3938),Us=M(7105);let ds=Me=>(0,kn.X)(Me)||(0,En.eo)(Me),ui=Me=>(0,fi.j)(Me)||(0,Us.D)(Me)||ds(Me),Ki={serverComponents:"serverComponents",flightData:"flightData",html:"html"};function $s({source:Me,dev:ct,isNextExport:St,errorLogger:Wt,digestErrorsMap:or,allCapturedErrors:Ir,silenceLogger:Tr}){return(Cr,Yr)=>{var qr;Cr.digest||(Cr.digest=qn()(Cr.message+(Yr?.stack||Cr.stack||"")).toString());let ln=Cr.digest;if(Ir&&Ir.push(Cr),ui(Cr))return Cr.digest;if(!(0,Ha.D)(Cr)){if(or.has(ln)?Me===Ki.html&&(Cr=or.get(ln)):or.set(ln,Cr),ct&&function(Pn){if(typeof Pn?.message=="string"){if(Pn.message.includes("Class extends value undefined is not a constructor or null")){let Rn="This might be caused by a React Class Component being rendered in a Server Component, React Class Components only works in Client Components. Read more: https://nextjs.org/docs/messages/class-component-in-server-component";if(Pn.message.includes(Rn))return;Ei(Pn,`${Pn.message}

${Rn}`);return}if(Pn.message.includes("createContext is not a function")){Ei(Pn,'createContext only works in Client Components. Add the "use client" directive at the top of the file to use it. Read more: https://nextjs.org/docs/messages/context-in-server-component');return}for(let Rn of Ln)if(RegExp(`\\b${Rn}\\b.*is not a function`).test(Pn.message)){Ei(Pn,`${Rn} only works in Client Components. Add the "use client" directive at the top of the file to use it. Read more: https://nextjs.org/docs/messages/react-client-hook-in-server-component`);return}}}(Cr),!(St&&(Cr==null||(qr=Cr.message)==null?void 0:qr.includes("The specific message is omitted in production builds to avoid leaking sensitive details.")))){let Pn=(0,Or.Yz)().getActiveScopeSpan();Pn&&(Pn.recordException(Cr),Pn.setStatus({code:Or.Qn.ERROR,message:Cr.message})),Tr||(Wt?Wt(Cr).catch(()=>{}):typeof __next_log_error__=="function"?__next_log_error__(Cr):console.error(Cr))}return Cr.digest}}}let Is={catchall:"c","catchall-intercepted":"ci","optional-catchall":"oc",dynamic:"d","dynamic-intercepted":"di"};var wa=M(6512);let ua={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},ea=/[&><\u2028\u2029]/g;function Gi(Me){return Me.replace(ea,ct=>ua[ct])}var na=M(2324),Bs=M.n(na);let wo=Bs().enums(["c","ci","oc","d","di"]),Te=Bs().union([Bs().string(),Bs().tuple([Bs().string(),Bs().string(),wo])]),dt=Bs().tuple([Te,Bs().record(Bs().string(),Bs().lazy(()=>dt)),Bs().optional(Bs().nullable(Bs().string())),Bs().optional(Bs().nullable(Bs().union([Bs().literal("refetch"),Bs().literal("refresh")]))),Bs().optional(Bs().boolean())]),At="http://n",$t="Invalid request URL";function Ut(Me,ct){if(Me===We.GC){let St=JSON.stringify(ct);return St!=="{}"?Me+"?"+St:Me}return Me}function Jr([Me,ct,{layout:St}],Wt,or,Ir=!1){let Tr=Wt(Me),Cr=[Ut(Tr?Tr.treeSegment:Me,or),{}];return Ir||St===void 0||(Ir=!0,Cr[4]=!0),Cr[1]=Object.keys(ct).reduce((Yr,qr)=>(Yr[qr]=Jr(ct[qr],Wt,or,Ir),Yr),{}),Cr}let Sr=["accept-encoding","keepalive","keep-alive","content-encoding","transfer-encoding","connection","expect","content-length","set-cookie"],Qn=(Me,ct)=>{for(let[St,Wt]of(Me["content-length"]&&Me["content-length"]==="0"&&delete Me["content-length"],Object.entries(Me)))(ct.includes(St)||!(Array.isArray(Wt)||typeof Wt=="string"))&&delete Me[St];return Me};var zn=M(3655),Qr=M(7514);let yr=(Me,ct=[])=>ct.some(St=>St&&(St===Me||function(Wt,or){let Ir=Wt.split("."),Tr=or.split(".");if(Tr.length<1||Ir.length<Tr.length)return!1;let Cr=0;for(;Tr.length&&Cr++<2;){let Yr=Tr.pop(),qr=Ir.pop();switch(Yr){case"":case"*":case"**":return!1;default:if(qr!==Yr)return!1}}for(;Tr.length;){let Yr=Tr.pop(),qr=Ir.pop();switch(Yr){case"":return!1;case"*":if(qr)continue;return!1;case"**":return Tr.length>0?!1:qr!==void 0;default:if(qr!==Yr)return!1}}return Ir.length===0}(Me,St)));var pi=M(1641),wi=M(6150),$a=M(6536),Lr=M(527);function Br(Me){let ct={};for(let[St,Wt]of Object.entries(Me))Wt!==void 0&&(ct[St]=Array.isArray(Wt)?Wt.join(", "):`${Wt}`);return ct}function Nn(Me,ct){let St=Me.headers,Wt=new pi.qC(wi.h.from(St)),or=ct.getHeaders(),Ir=new pi.nV((0,$a.EK)(or)),Tr=Qn({...Br(St),...Br(or)},Sr);return Ir.getAll().forEach(Cr=>{Cr.value===void 0?Wt.delete(Cr.name):Wt.set(Cr)}),Tr.cookie=Wt.toString(),delete Tr["transfer-encoding"],new Headers(Tr)}async function As(Me,{staticGenerationStore:ct,requestStore:St}){var Wt,or;await Promise.all([(Wt=ct.incrementalCache)==null?void 0:Wt.revalidateTag(ct.revalidatedTags||[]),...Object.values(ct.pendingRevalidates||{})]);let Ir=(or=ct.revalidatedTags)!=null&&or.length?1:0,Tr=(0,zn.fB)(St.mutableCookies).length?1:0;Me.setHeader("x-action-revalidated",JSON.stringify([[],Ir,Tr]))}async function ql(Me,ct,St,Wt,or,Ir){var Tr,Cr;if(!St)throw Error("Invariant: Missing `host` header from a forwarded Server Actions request.");let Yr=Nn(Me,ct);Yr.set("x-action-forwarded","1");let qr=((Tr=Ir.incrementalCache)==null?void 0:Tr.requestProtocol)||"https",ln=process.env.__NEXT_PRIVATE_ORIGIN||`${qr}://${St.value}`,Pn=new URL(`${ln}${or}${Wt}`);try{let Rn;if(!Me.body)throw Error("invariant: Missing request body.");Rn=Me.body;let mi=await fetch(Pn,{method:"POST",body:Rn,duplex:"half",headers:Yr,next:{internal:1}});if(mi.headers.get("content-type")===S.eY){for(let[Vi,Dn]of mi.headers)Sr.includes(Vi)||ct.setHeader(Vi,Dn);return new pn(mi.body)}(Cr=mi.body)==null||Cr.cancel()}catch(Rn){console.error("failed to forward action response",Rn)}}async function Jo(Me,ct,St,Wt,or,Ir){ct.setHeader("x-action-redirect",Wt);let Tr=new URL(Wt,"http://n");if(Wt.startsWith("/")||St&&St.value===Tr.host){var Cr,Yr,qr,ln,Pn;if(!St)throw Error("Invariant: Missing `host` header from a forwarded Server Actions request.");let Rn=Nn(Me,ct);Rn.set(S.A,"1");let mi=((Cr=Ir.incrementalCache)==null?void 0:Cr.requestProtocol)||"https",Vi=process.env.__NEXT_PRIVATE_ORIGIN||`${mi}://${St.value}`,Dn=new URL(`${Vi}${or}${Tr.pathname}${Tr.search}`);Ir.revalidatedTags&&(Rn.set(Kr.of,Ir.revalidatedTags.join(",")),Rn.set(Kr.X_,((ln=Ir.incrementalCache)==null||(qr=ln.prerenderManifest)==null||(Yr=qr.preview)==null?void 0:Yr.previewModeId)||"")),Rn.delete("next-router-state-tree");try{let ts=await fetch(Dn,{method:"GET",headers:Rn,next:{internal:1}});if(ts.headers.get("content-type")===S.eY){for(let[Fs,gi]of ts.headers)Sr.includes(Fs)||ct.setHeader(Fs,gi);return new pn(ts.body)}(Pn=ts.body)==null||Pn.cancel()}catch(ts){console.error("failed to get redirect response",ts)}}return W.Z.fromStatic("{}")}function qs(Me){return Me.length>100?Me.slice(0,100)+"...":Me}async function xl({req:Me,res:ct,ComponentMod:St,serverModuleMap:Wt,generateFlight:or,staticGenerationStore:Ir,requestStore:Tr,serverActions:Cr,ctx:Yr}){var qr,ln;let Pn,Rn,mi,Vi;Me.headers["content-type"];let{serverActionsManifest:Dn,page:ts}=Yr.renderOpts,{actionId:Fs,isURLEncodedAction:gi,isMultipartAction:as,isFetchAction:Zt,isServerAction:_i}=(0,Qr.G)(Me);if(!_i)return;if(Ir.isStaticGeneration)throw Error("Invariant: server actions can't be handled during static rendering");Ir.fetchCache="default-no-store";let yi=typeof Me.headers.origin=="string"?new URL(Me.headers.origin).host:void 0,Wi=Me.headers["x-forwarded-host"],Ui=Me.headers.host,Pi=Wi?{type:"x-forwarded-host",value:Wi}:Ui?{type:"host",value:Ui}:void 0;if(yi){if((!Pi||yi!==Pi.value)&&!yr(yi,Cr?.allowedOrigins)){console.error(Pi?`\`${Pi.type}\` header with value \`${qs(Pi.value)}\` does not match \`origin\` header with value \`${qs(yi)}\` from a forwarded Server Actions request. Aborting the action.`:"`x-forwarded-host` or `host` headers are not provided. One of these is needed to compare the `origin` header from a forwarded Server Actions request. Aborting the action.");let os=Error("Invalid Server Actions request.");if(Zt){ct.statusCode=500,await Promise.all([(qr=Ir.incrementalCache)==null?void 0:qr.revalidateTag(Ir.revalidatedTags||[]),...Object.values(Ir.pendingRevalidates||{})]);let hi=Promise.reject(os);try{await hi}catch{}return{type:"done",result:await or(Yr,{actionResult:hi,skipFlight:!Ir.pathWasRevalidated})}}throw os}}else Vi="Missing `origin` header from a forwarded Server Actions request.";ct.setHeader("Cache-Control","no-cache, no-store, max-age=0, must-revalidate");let $n=[],{actionAsyncStorage:ws}=St,bs=!!Me.headers["x-action-forwarded"];if(Fs){let os=(0,Lr.k)(Fs,ts,Dn);if(os)return{type:"done",result:await ql(Me,ct,Pi,os,Yr.renderOpts.basePath,Ir)}}try{return await ws.run({isAction:!0},async()=>{{let{decodeReply:xe,decodeAction:T,decodeFormState:G}=St;if(!Me.body)throw Error("invariant: Missing request body.");if(as){let pe=await Me.request.formData();if(Zt)$n=await xe(pe,Wt);else{let qe=await T(pe,Wt);if(typeof qe=="function"){Vi&&(0,Fe.ZK)(Vi);let wt=await qe();Rn=G(wt,pe)}return}}else{try{mi=Au(Fs,Wt)}catch(wt){return Fs!==null&&console.error(wt),{type:"not-found"}}let pe="",qe=Me.body.getReader();for(;;){let{done:wt,value:Dt}=await qe.read();if(wt)break;pe+=new TextDecoder().decode(Dt)}if(gi){let wt=function(Dt){let pr=new URLSearchParams(Dt),mr=new FormData;for(let[sn,Sn]of pr)mr.append(sn,Sn);return mr}(pe);$n=await xe(wt,Wt)}else $n=await xe(pe,Wt)}}try{mi=mi??Au(Fs,Wt)}catch(xe){return Fs!==null&&console.error(xe),{type:"not-found"}}let os=(await St.__next_app__.require(mi))[Fs],hi=await os.apply(null,$n);Zt&&(await As(ct,{staticGenerationStore:Ir,requestStore:Tr}),Pn=await or(Yr,{actionResult:Promise.resolve(hi),skipFlight:!Ir.pathWasRevalidated||bs}))}),{type:"done",result:Pn,formState:Rn}}catch(os){if((0,En.eo)(os)){let hi=(0,En.M6)(os),xe=(0,En.j2)(os);if(await As(ct,{staticGenerationStore:Ir,requestStore:Tr}),ct.statusCode=xe,Zt)return{type:"done",result:await Jo(Me,ct,Pi,hi,Yr.renderOpts.basePath,Ir)};if(os.mutableCookies){let T=new Headers;(0,zn._5)(T,os.mutableCookies)&&ct.setHeader("set-cookie",Array.from(T.values()))}return ct.setHeader("Location",hi),{type:"done",result:W.Z.fromStatic("")}}if((0,kn.X)(os)){if(ct.statusCode=404,await As(ct,{staticGenerationStore:Ir,requestStore:Tr}),Zt){let hi=Promise.reject(os);try{await hi}catch{}return{type:"done",result:await or(Yr,{skipFlight:!1,actionResult:hi,asNotFound:!0})}}return{type:"not-found"}}if(Zt){ct.statusCode=500,await Promise.all([(ln=Ir.incrementalCache)==null?void 0:ln.revalidateTag(Ir.revalidatedTags||[]),...Object.values(Ir.pendingRevalidates||{})]);let hi=Promise.reject(os);try{await hi}catch{}return{type:"done",result:await or(Yr,{actionResult:hi,skipFlight:!Ir.pathWasRevalidated||bs})}}throw os}}function Au(Me,ct){try{var St;if(!Me)throw Error("Invariant: Missing 'next-action' header.");let Wt=ct==null||(St=ct[Me])==null?void 0:St.id;if(!Wt)throw Error("Invariant: Couldn't find action module ID from module map.");return Wt}catch(Wt){throw Error(`Failed to find Server Action "${Me}". This request might be from an older or newer deployment. ${Wt instanceof Error?`Original error: ${Wt.message}`:""}`)}}var tc=M(8823);function $o(Me){return Me.split("/").map(ct=>encodeURIComponent(ct)).join("/")}var Rc=M(8066);function ru(Me,ct,St,Wt,or,Ir){let Tr,Cr=[],Yr={src:"",crossOrigin:St},qr=Me.rootMainFiles.map($o);if(qr.length===0)throw Error("Invariant: missing bootstrap script. This is a bug in Next.js");if(Wt){Yr.src=`${ct}/_next/`+qr[0]+or,Yr.integrity=Wt[qr[0]];for(let ln=1;ln<qr.length;ln++){let Pn=`${ct}/_next/`+qr[ln]+or,Rn=Wt[qr[ln]];Cr.push(Pn,Rn)}Tr=()=>{for(let ln=0;ln<Cr.length;ln+=2)Rc.preinit(Cr[ln],{as:"script",integrity:Cr[ln+1],crossOrigin:St,nonce:Ir})}}else{Yr.src=`${ct}/_next/`+qr[0]+or;for(let ln=1;ln<qr.length;ln++){let Pn=`${ct}/_next/`+qr[ln]+or;Cr.push(Pn)}Tr=()=>{for(let ln=0;ln<Cr.length;ln++)Rc.preinit(Cr[ln],{as:"script",nonce:Ir,crossOrigin:St})}}return[Tr,Yr]}var ci=M(9912),Zo=M(2553),ta=M(8613);function bi({polyfills:Me,renderServerInsertedHTML:ct,serverCapturedErrors:St,basePath:Wt}){let or=0,Ir=Me.length!==0;return async function(){let Tr=[];for(;or<St.length;){let qr=St[or];if(or++,(0,kn.X)(qr))Tr.push((0,q.jsx)("meta",{name:"robots",content:"noindex"},qr.digest),null);else if((0,En.eo)(qr)){let ln=(0,ci.V)((0,En.M6)(qr),Wt),Pn=(0,En.j2)(qr)===ta.X.PermanentRedirect;ln&&Tr.push((0,q.jsx)("meta",{id:"__next-page-redirect",httpEquiv:"refresh",content:`${Pn?0:1};url=${ln}`},qr.digest))}}let Cr=ct();if(!Ir&&Tr.length===0&&Array.isArray(Cr)&&Cr.length===0)return"";let Yr=await(0,Zo.renderToReadableStream)((0,q.jsxs)(q.Fragment,{children:[Ir&&Me.map(qr=>(0,q.jsx)("script",{...qr},qr.src)),Cr,Tr]}),{progressiveChunkSize:1048576});return Ir=!1,(0,j.PN)(Yr)}}function Mo(Me,ct,St,Wt,or){var Ir;let Tr=ct.replace(/\.[^.]+$/,""),Cr=new Set,Yr=new Set,qr=Me.entryCSSFiles[Tr],ln=((Ir=Me.entryJSFiles)==null?void 0:Ir[Tr])??[];if(qr)for(let Pn of qr)St.has(Pn)||(or&&St.add(Pn),Cr.add(Pn));if(ln)for(let Pn of ln)Wt.has(Pn)||(or&&Wt.add(Pn),Yr.add(Pn));return{styles:[...Cr],scripts:[...Yr]}}function Ts(Me,ct,St){if(!Me||!ct)return null;let Wt=ct.replace(/\.[^.]+$/,""),or=new Set,Ir=!1,Tr=Me.app[Wt];if(Tr)for(let Cr of(Ir=!0,Tr))St.has(Cr)||(or.add(Cr),St.add(Cr));return or.size?[...or].sort():Ir&&St.size===0?[]:null}function io(Me){let[,ct,{loading:St}]=Me;return!!St||Object.values(ct).some(Wt=>io(Wt))}function Ns(Me){return Me.default||Me}function An(Me,ct){let St="";return Me.renderOpts.deploymentId&&(St+=`?dpl=${Me.renderOpts.deploymentId}`),St}async function Qa({filePath:Me,getComponent:ct,injectedCSS:St,injectedJS:Wt,ctx:or}){let{styles:Ir,scripts:Tr}=Mo(or.clientReferenceManifest,Me,St,Wt),Cr=Ir?Ir.map((qr,ln)=>{let Pn=`${or.assetPrefix}/_next/${$o(qr)}${An(or,!0)}`;return(0,q.jsx)("link",{rel:"stylesheet",href:Pn,precedence:"next",crossOrigin:or.renderOpts.crossOrigin},ln)}):null,Yr=Tr?Tr.map(qr=>(0,q.jsx)("script",{src:`${or.assetPrefix}/_next/${$o(qr)}${An(or,!0)}`,async:!0})):null;return[Ns(await ct()),Cr,Yr]}var zl=M(8359);function ii(Me){return(0,Or.Yz)().trace(wn.Xy.createComponentTree,{spanName:"build component tree"},()=>ba(Me))}async function ba({createSegmentPath:Me,loaderTree:ct,parentParams:St,firstItem:Wt,rootLayoutIncluded:or,injectedCSS:Ir,injectedJS:Tr,injectedFontPreloadTags:Cr,asNotFound:Yr,metadataOutlet:qr,ctx:ln,missingSlots:Pn}){let Rn,{renderOpts:{nextConfigOutput:mi,experimental:Vi},staticGenerationStore:Dn,componentMod:{NotFoundBoundary:ts,LayoutRouter:Fs,RenderFromTemplateContext:gi,ClientPageRoot:as,createUntrackedSearchParams:Zt,createDynamicallyTrackedSearchParams:_i,serverHooks:{DynamicServerError:yi},Postpone:Wi},pagePath:Ui,getDynamicParamFromSegment:Pi,isPrefetch:$n,query:ws}=ln,{page:bs,layoutOrPagePath:os,segment:hi,components:xe,parallelRoutes:T}=function(Gn){let[ss,Ds,Ba]=Gn,{layout:Ca}=Ba,{page:Xa}=Ba;Xa=ss===We.av?Ba.defaultPage:Xa;let rs=Ca?.[1]||Xa?.[1];return{page:Xa,segment:ss,components:Ba,layoutOrPagePath:rs,parallelRoutes:Ds}}(ct),{layout:G,template:pe,error:qe,loading:wt,"not-found":Dt}=xe,pr=new Set(Ir),mr=new Set(Tr),sn=new Set(Cr),Sn=function({ctx:Gn,layoutOrPagePath:ss,injectedCSS:Ds,injectedJS:Ba,injectedFontPreloadTags:Ca}){let{styles:Xa,scripts:rs}=ss?Mo(Gn.clientReferenceManifest,ss,Ds,Ba,!0):{styles:[],scripts:[]},Li=ss?Ts(Gn.renderOpts.nextFontManifest,ss,Ca):null;if(Li)if(Li.length)for(let Za=0;Za<Li.length;Za++){let ll=Li[Za],tl=/\.(woff|woff2|eot|ttf|otf)$/.exec(ll)[1],Ou=`font/${tl}`,kl=`${Gn.assetPrefix}/_next/${$o(ll)}`;Gn.componentMod.preloadFont(kl,Ou,Gn.renderOpts.crossOrigin)}else try{let Za=new URL(Gn.assetPrefix);Gn.componentMod.preconnect(Za.origin,"anonymous")}catch{Gn.componentMod.preconnect("/","anonymous")}let Qi=Xa?Xa.map((Za,ll)=>{let tl=`${Gn.assetPrefix}/_next/${$o(Za)}${An(Gn,!0)}`;return Gn.componentMod.preloadStyle(tl,Gn.renderOpts.crossOrigin),(0,q.jsx)("link",{rel:"stylesheet",href:tl,precedence:"next",crossOrigin:Gn.renderOpts.crossOrigin},ll)}):[],ko=rs?rs.map((Za,ll)=>{let tl=`${Gn.assetPrefix}/_next/${$o(Za)}${An(Gn,!0)}`;return(0,q.jsx)("script",{src:tl,async:!0},`script-${ll}`)}):[];return Qi.length||ko.length?[...Qi,...ko]:null}({ctx:ln,layoutOrPagePath:os,injectedCSS:pr,injectedJS:mr,injectedFontPreloadTags:sn}),[us,Cs,xa]=pe?await Qa({ctx:ln,filePath:pe[1],getComponent:pe[0],injectedCSS:pr,injectedJS:mr}):[Z.Fragment],[Ea,el,ia]=qe?await Qa({ctx:ln,filePath:qe[1],getComponent:qe[0],injectedCSS:pr,injectedJS:mr}):[],[Ss,_a,sa]=wt?await Qa({ctx:ln,filePath:wt[1],getComponent:wt[0],injectedCSS:pr,injectedJS:mr}):[],Ks=G!==void 0,Oa=bs!==void 0,[ys]=await(0,Or.Yz)().trace(wn.Xy.getLayoutOrPageModule,{hideSpan:!(Ks||Oa),spanName:"resolve segment modules",attributes:{"next.segment":hi}},()=>ve(ct)),Ia=Ks&&!or,fo=or||Ia,[Da,po]=Dt?await Qa({ctx:ln,filePath:Dt[1],getComponent:Dt[0],injectedCSS:pr,injectedJS:mr}):[],ms=ys?.dynamic;if(mi==="export")if(ms&&ms!=="auto"){if(ms==="force-dynamic")throw new zl.G('Page with `dynamic = "force-dynamic"` couldn\'t be exported. `output: "export"` requires all pages be renderable statically because there is not runtime server to dynamic render routes in this output format. Learn more: https://nextjs.org/docs/app/building-your-application/deploying/static-exports')}else ms="error";if(typeof ms=="string")if(ms==="error")Dn.dynamicShouldError=!0;else if(ms==="force-dynamic"){if(Dn.forceDynamic=!0,Dn.isStaticGeneration&&!Dn.prerenderState){let Gn=new yi('Page with `dynamic = "force-dynamic"` won\'t be rendered statically.');throw Dn.dynamicUsageDescription=Gn.message,Dn.dynamicUsageStack=Gn.stack,Gn}}else Dn.dynamicShouldError=!1,Dn.forceStatic=ms==="force-static";if(typeof ys?.fetchCache=="string"&&(Dn.fetchCache=ys?.fetchCache),ys?.revalidate!==void 0&&function(Gn,ss){try{let Ds;if(Gn!==!1){if(!(typeof Gn=="number"&&!isNaN(Gn)&&Gn>-1)){if(Gn!==void 0)throw Error(`Invalid revalidate value "${Gn}" on "${ss}", must be a non-negative number or "false"`)}}}catch(Ds){if(Ds instanceof Error&&Ds.message.includes("Invalid revalidate"))throw Ds;return}}(ys?.revalidate,Dn.urlPathname),typeof ys?.revalidate=="number"&&(ln.defaultRevalidate=ys.revalidate,(Dn.revalidate===void 0||typeof Dn.revalidate=="number"&&Dn.revalidate>ln.defaultRevalidate)&&(Dn.revalidate=ln.defaultRevalidate),!Dn.forceStatic&&Dn.isStaticGeneration&&ln.defaultRevalidate===0&&!Dn.prerenderState)){let Gn=`revalidate: 0 configured ${hi}`;throw Dn.dynamicUsageDescription=Gn,new yi(Gn)}if(Dn.dynamicUsageErr)throw Dn.dynamicUsageErr;let mo=ys?await Ns(ys):void 0,Lo=mo;Object.keys(T).length>1&&Ia&&mo&&(Lo=Gn=>(0,q.jsx)(ts,{notFound:Da?(0,q.jsxs)(q.Fragment,{children:[Sn,(0,q.jsxs)(mo,{params:Gn.params,children:[po,(0,q.jsx)(Da,{})]})]}):void 0,children:(0,q.jsx)(mo,{...Gn})}));let Ya=Pi(hi),Ji=Ya&&Ya.value!==null?{...St,[Ya.param]:Ya.value}:St,jn=Ya?Ya.treeSegment:hi,$i=await Promise.all(Object.keys(T).map(async Gn=>{let ss=Gn==="children",Ds=Wt?[Gn]:[jn,Gn],Ba=T[Gn],Ca=Da&&ss?(0,q.jsx)(Da,{}):void 0,Xa=null;return $n&&(Ss||!io(Ba))&&!Vi.ppr||(Xa=await ba({createSegmentPath:rs=>Me([...Ds,...rs]),loaderTree:Ba,parentParams:Ji,rootLayoutIncluded:fo,injectedCSS:pr,injectedJS:mr,injectedFontPreloadTags:sn,asNotFound:Yr,metadataOutlet:ss?qr:void 0,ctx:ln,missingSlots:Pn})),[Gn,(0,q.jsx)(Fs,{parallelRouterKey:Gn,segmentPath:Me(Ds),error:Ea,errorStyles:el,errorScripts:ia,template:(0,q.jsx)(us,{children:(0,q.jsx)(gi,{})}),templateStyles:Cs,templateScripts:xa,notFound:Ca,notFoundStyles:po}),Xa]})),cs={},Ta={};for(let Gn of $i){let[ss,Ds,Ba]=Gn;cs[ss]=Ds,Ta[ss]=Ba}let Ws=Ss?[(0,q.jsx)(Ss,{}),_a,sa]:null;if(!Lo)return[jn,Ta,(0,q.jsxs)(q.Fragment,{children:[Sn,cs.children]}),Ws];if(Dn.forceDynamic&&Dn.prerenderState)return[jn,Ta,(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(Wi,{prerenderState:Dn.prerenderState,reason:'dynamic = "force-dynamic" was used',pathname:Dn.urlPathname}),Sn]}),Ws];let Ma=function(Gn){let ss=Gn?.default||Gn;return ss?.$$typeof===Symbol.for("react.client.reference")}(ys);return Da&&Yr&&!$i.length&&(cs.children=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("meta",{name:"robots",content:"noindex"}),!1,po,(0,q.jsx)(Da,{})]})),cs.params=Ji,Oa?Ma?(cs.searchParams=Zt(ws),Rn=(0,q.jsxs)(q.Fragment,{children:[qr,(0,q.jsx)(as,{props:cs,Component:Lo}),Sn]})):(cs.searchParams=_i(ws),Rn=(0,q.jsxs)(q.Fragment,{children:[qr,(0,q.jsx)(Lo,{...cs}),Sn]})):Rn=(0,q.jsxs)(q.Fragment,{children:[Sn,(0,q.jsx)(Lo,{...cs})]}),[jn,Ta,(0,q.jsxs)(q.Fragment,{children:[Rn,null]}),Ws]}async function Gl({createSegmentPath:Me,loaderTreeToFilter:ct,parentParams:St,isFirst:Wt,flightRouterState:or,parentRendered:Ir,rscPayloadHead:Tr,injectedCSS:Cr,injectedJS:Yr,injectedFontPreloadTags:qr,rootLayoutIncluded:ln,asNotFound:Pn,metadataOutlet:Rn,ctx:mi}){let{renderOpts:{nextFontManifest:Vi,experimental:Dn},query:ts,isPrefetch:Fs,getDynamicParamFromSegment:gi,componentMod:{tree:as}}=mi,[Zt,_i,yi]=ct,Wi=Object.keys(_i),{layout:Ui}=yi,Pi=Ui!==void 0&&!ln,$n=ln||Pi,ws=gi(Zt),bs=ws&&ws.value!==null?{...St,[ws.param]:ws.value}:St,os=Ut(ws?ws.treeSegment:Zt,ts),hi=!or||!(0,z.j)(os,or[0])||Wi.length===0||or[3]==="refetch",xe=!Dn.ppr&&Fs&&!yi.loading&&!io(as);if(!Ir&&hi){let wt=or&&(0,z.W)(os,or[0])?or[0]:os,Dt=Jr(ct,gi,ts);return xe?[[wt,Dt,null,null]]:[[wt,Dt,await ii({ctx:mi,createSegmentPath:Me,loaderTree:ct,parentParams:bs,firstItem:Wt,injectedCSS:Cr,injectedJS:Yr,injectedFontPreloadTags:qr,rootLayoutIncluded:ln,asNotFound:Pn,metadataOutlet:Rn}),Tr]]}let T=Ui?.[1],G=new Set(Cr),pe=new Set(Yr),qe=new Set(qr);return T&&(Mo(mi.clientReferenceManifest,T,G,pe,!0),Ts(Vi,T,qe)),(await Promise.all(Wi.map(async wt=>{let Dt=_i[wt],pr=Wt?[wt]:[os,wt];return(await Gl({ctx:mi,createSegmentPath:mr=>Me([...pr,...mr]),loaderTreeToFilter:Dt,parentParams:bs,flightRouterState:or&&or[1][wt],parentRendered:Ir||hi,isFirst:!1,rscPayloadHead:Tr,injectedCSS:G,injectedJS:pe,injectedFontPreloadTags:qe,rootLayoutIncluded:$n,asNotFound:Pn,metadataOutlet:Rn})).map(mr=>mr[0]===We.av&&or&&or[1][wt][0]&&or[1][wt][3]!=="refetch"?null:[os,wt,...mr]).filter(Boolean)}))).flat()}var Hl=M(5787);class nu{constructor(ct){this.options=ct,this.prerender=null}async render(ct){let{prelude:St,postponed:Wt}=await this.prerender(ct,this.options);return{stream:St,postponed:Wt}}}class so{constructor(ct,St){this.postponed=ct,this.options=St,this.resume=M(2553).resume}async render(ct){return{stream:await this.resume(ct,this.postponed,this.options),resumed:!0}}}class Cl{constructor(ct){this.options=ct,this.renderToReadableStream=M(2553).renderToReadableStream}async render(ct){return{stream:await this.renderToReadableStream(ct,this.options)}}}class fc{async render(ct){return{stream:new ReadableStream({start(St){St.close()}}),resumed:!1}}}function Pc({ppr:Me,isStaticGeneration:ct,postponed:St,streamOptions:{signal:Wt,onError:or,onPostpone:Ir,onHeaders:Tr,maxHeadersLength:Cr,nonce:Yr,bootstrapScripts:qr,formState:ln}}){if(Me){if(ct)return new nu({signal:Wt,onError:or,onPostpone:Ir,onHeaders:Tr,maxHeadersLength:Cr,bootstrapScripts:qr});if(St===1)return new fc;if(St)return new so(St[1],{signal:Wt,onError:or,onPostpone:Ir,nonce:Yr})}return new Cl(ct?{signal:Wt,onError:or,nonce:Yr,bootstrapScripts:qr,formState:ln}:{signal:Wt,onError:or,onHeaders:Tr,maxHeadersLength:Cr,nonce:Yr,bootstrapScripts:qr,formState:ln})}let pa=new WeakMap,Qt=new TextEncoder;async function Sa(Me){let ct=Me.getReader();for(;;){let{done:St}=await ct.read();if(St)return}}function ma(Me,ct,St){let Wt=ct?`<script nonce=${JSON.stringify(ct)}>`:"<script>",or=new TextDecoder("utf-8",{fatal:!0}),Ir={stream:!0},Tr=Me.getReader();return new ReadableStream({type:"bytes",start(Cr){try{(function(Yr,qr,ln){Yr.enqueue(Qt.encode(`${qr}(self.__next_f=self.__next_f||[]).push(${Gi(JSON.stringify([0]))});self.__next_f.push(${Gi(JSON.stringify([2,ln]))})<\/script>`))})(Cr,Wt,St)}catch(Yr){Cr.error(Yr)}},async pull(Cr){try{let{done:Yr,value:qr}=await Tr.read();if(Yr){let ln=or.decode(qr,{stream:!1});ln.length&&wl(Cr,Wt,ln),Cr.close()}else{let ln=or.decode(qr,Ir);wl(Cr,Wt,ln)}}catch(Yr){Cr.error(Yr)}}})}function wl(Me,ct,St){Me.enqueue(Qt.encode(`${ct}self.__next_f.push(${Gi(JSON.stringify([1,St]))})<\/script>`))}var pc=M(9567),Bo=M(9665),Kl=M(9963);function xs({ctx:Me}){let ct=Me.pagePath==="/404",St=typeof Me.res.statusCode=="number"&&Me.res.statusCode>400;return ct||St?(0,q.jsx)("meta",{name:"robots",content:"noindex"}):null}async function Rs(Me,ct){let St=null,{componentMod:{tree:Wt,renderToReadableStream:or,createDynamicallyTrackedSearchParams:Ir},getDynamicParamFromSegment:Tr,appUsingSizeAdjustment:Cr,staticGenerationStore:{urlPathname:Yr},query:qr,requestId:ln,flightRouterState:Pn}=Me;if(!ct?.skipFlight){let[ts,Fs]=Ht({tree:Wt,query:qr,metadataContext:st(Yr,Me.renderOpts),getDynamicParamFromSegment:Tr,appUsingSizeAdjustment:Cr,createDynamicallyTrackedSearchParams:Ir});St=(await Gl({ctx:Me,createSegmentPath:gi=>gi,loaderTreeToFilter:Wt,parentParams:{},flightRouterState:Pn,isFirst:!0,rscPayloadHead:[(0,q.jsx)(ts,{},ln),(0,q.jsx)(xs,{ctx:Me},"noindex")],injectedCSS:new Set,injectedJS:new Set,injectedFontPreloadTags:new Set,rootLayoutIncluded:!1,asNotFound:Me.isNotFoundPath||ct?.asNotFound,metadataOutlet:(0,q.jsx)(Fs,{})})).map(gi=>gi.slice(1))}let Rn=[Me.renderOpts.buildId,St],mi=or(ct?[ct.actionResult,Rn]:Rn,Me.clientReferenceManifest.clientModules,{onError:Me.flightDataRendererErrorHandler}),Vi={metadata:{}};if(Me.staticGenerationStore.pendingRevalidates||Me.staticGenerationStore.revalidatedTags){var Dn;Vi.waitUntil=Promise.all([(Dn=Me.staticGenerationStore.incrementalCache)==null?void 0:Dn.revalidateTag(Me.staticGenerationStore.revalidatedTags||[]),...Object.values(Me.staticGenerationStore.pendingRevalidates||{})])}return new pn(mi,Vi)}function Wl(Me){return Me.split("/")}async function Nu({tree:Me,ctx:ct,asNotFound:St}){let Wt=new Set,or=new Set,Ir=new Set,Tr=new Set,{getDynamicParamFromSegment:Cr,query:Yr,appUsingSizeAdjustment:qr,componentMod:{AppRouter:ln,GlobalError:Pn,createDynamicallyTrackedSearchParams:Rn},staticGenerationStore:{urlPathname:mi}}=ct,Vi=Jr(Me,Cr,Yr),[Dn,ts]=Ht({tree:Me,errorType:St?"not-found":void 0,query:Yr,metadataContext:st(mi,ct.renderOpts),getDynamicParamFromSegment:Cr,appUsingSizeAdjustment:qr,createDynamicallyTrackedSearchParams:Rn}),Fs=await ii({ctx:ct,createSegmentPath:Zt=>Zt,loaderTree:Me,parentParams:{},firstItem:!0,injectedCSS:Wt,injectedJS:or,injectedFontPreloadTags:Ir,rootLayoutIncluded:!1,asNotFound:St,metadataOutlet:(0,q.jsx)(ts,{}),missingSlots:Tr}),gi=ct.res.getHeader("vary"),as=typeof gi=="string"&&gi.includes(S.TP);return(0,q.jsx)(ln,{buildId:ct.renderOpts.buildId,assetPrefix:ct.assetPrefix,urlParts:Wl(mi),initialTree:Vi,initialSeedData:Fs,couldBeIntercepted:as,initialHead:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(xs,{ctx:ct}),(0,q.jsx)(Dn,{},ct.requestId)]}),globalErrorComponent:Pn,missingSlots:Tr})}async function ol({tree:Me,ctx:ct,errorType:St}){let{getDynamicParamFromSegment:Wt,query:or,appUsingSizeAdjustment:Ir,componentMod:{AppRouter:Tr,GlobalError:Cr,createDynamicallyTrackedSearchParams:Yr},staticGenerationStore:{urlPathname:qr},requestId:ln}=ct,[Pn]=Ht({tree:Me,metadataContext:st(qr,ct.renderOpts),errorType:St,query:or,getDynamicParamFromSegment:Wt,appUsingSizeAdjustment:Ir,createDynamicallyTrackedSearchParams:Yr}),Rn=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(Pn,{},ln),!1,(0,q.jsx)(xs,{ctx:ct})]}),mi=Jr(Me,Wt,or),Vi=[mi[0],{},(0,q.jsxs)("html",{id:"__next_error__",children:[(0,q.jsx)("head",{}),(0,q.jsx)("body",{})]}),null];return(0,q.jsx)(Tr,{buildId:ct.renderOpts.buildId,assetPrefix:ct.assetPrefix,urlParts:Wl(qr),initialTree:mi,initialHead:Rn,globalErrorComponent:Cr,initialSeedData:Vi,missingSlots:new Set})}function rc({reactServerStream:Me,preinitScripts:ct,clientReferenceManifest:St,nonce:Wt}){ct();let or=function(Ir,Tr,Cr){let Yr=pa.get(Ir);if(Yr)return Yr;let qr=(0,M(2505).createFromReadableStream)(Ir,{ssrManifest:{moduleLoading:Tr.moduleLoading,moduleMap:Tr.edgeSSRModuleMapping},nonce:Cr});return pa.set(Ir,qr),qr}(Me,St,Wt);return Z.use(or)}async function ho(Me,ct,St,Wt,or,Ir,Tr){var Cr,Yr,qr,ln;let Pn,Rn,mi=St==="/404",Vi=Date.now(),{buildManifest:Dn,subresourceIntegrityManifest:ts,serverActionsManifest:Fs,ComponentMod:gi,dev:as,nextFontManifest:Zt,supportsDynamicResponse:_i,serverActions:yi,appDirDevErrorLogger:Wi,assetPrefix:Ui="",enableTainting:Pi}=or;if(gi.__next_app__){let Ji=(0,Bo.B)(gi);hn.__next_require__=Ji.require,hn.__next_chunk_load__=Ji.loadChunk}typeof Me.on=="function"&&Me.on("end",()=>{if(Tr.ended=!0,"performance"in hn){let Ji=(0,Bo.R)({reset:!0});Ji&&(0,Or.Yz)().startSpan(wn.Xy.clientComponentLoading,{startTime:Ji.clientComponentLoadStart,attributes:{"next.clientComponentLoadCount":Ji.clientComponentLoadCount}}).end(Ji.clientComponentLoadStart+Ji.clientComponentLoadTimes)}});let $n={},ws=!!Zt?.appUsingSizeAdjust,bs=or.clientReferenceManifest,os=(0,Lr.w)({serverActionsManifest:Fs,pageName:or.page});(0,Hl.Mo)({clientReferenceManifest:bs,serverActionsManifest:Fs,serverModuleMap:os});let hi=new Map,xe=[],T=!!or.nextExport,{staticGenerationStore:G,requestStore:pe}=Ir,{isStaticGeneration:qe}=G,wt=or.experimental.ppr&&qe,Dt=$s({source:Ki.serverComponents,dev:as,isNextExport:T,errorLogger:Wi,digestErrorsMap:hi,silenceLogger:wt}),pr=$s({source:Ki.flightData,dev:as,isNextExport:T,errorLogger:Wi,digestErrorsMap:hi,silenceLogger:wt}),mr=$s({source:Ki.html,dev:as,isNextExport:T,errorLogger:Wi,digestErrorsMap:hi,allCapturedErrors:xe,silenceLogger:wt});gi.patchFetch();let sn=_i!==!0,{tree:Sn,taintObjectReference:us}=gi;Pi&&us("Do not pass process.env to client components since it will leak sensitive data",process.env),G.fetchMetrics=[],$n.fetchMetrics=G.fetchMetrics,Wt={...Wt},(0,y.Q)(Wt);let Cs=Me.headers[S.A.toLowerCase()]!==void 0,xa=Cs&&Me.headers[S.qw.toLowerCase()]!==void 0,Ea=Cs&&(!xa||!or.experimental.ppr||(0,pc.Ag)(St)),el=function(Ji){if(Ji!==void 0){if(Array.isArray(Ji))throw Error("Multiple router state headers were sent. This is not allowed.");if(Ji.length>4e4)throw Error("The router state header was too large.");try{let jn=JSON.parse(decodeURIComponent(Ji));return(0,na.assert)(jn,dt),jn}catch{throw Error("The router state header was sent but could not be parsed.")}}}(Me.headers[S.ph.toLowerCase()]);Pn=crypto.randomUUID();let ia=(ln=or.params??{},function(Ji){let jn=(0,wa.R)(Ji);if(!jn)return null;let $i=jn.param,cs=ln[$i];if(cs==="__NEXT_EMPTY_PARAM__"&&(cs=void 0),Array.isArray(cs)?cs=cs.map(Ws=>encodeURIComponent(Ws)):typeof cs=="string"&&(cs=encodeURIComponent(cs)),!cs){let Ws=jn.type==="catchall",Ma=jn.type==="optional-catchall";if(Ws||Ma){let Gn=Is[jn.type];return Ma?{param:$i,value:null,type:Gn,treeSegment:[$i,"",Gn]}:{param:$i,value:cs=St.split("/").slice(1).map(ss=>{let Ds=(0,Kl.b8)(ss);return ln[Ds.key]??Ds.key}),type:Gn,treeSegment:[$i,cs.join("/"),Gn]}}return function Gn(ss,Ds){if(!ss)return null;let Ba=ss[0];if((0,z.W)(Ds,Ba))return!Array.isArray(Ba)||Array.isArray(Ds)?null:{param:Ba[0],value:Ba[1],treeSegment:Ba,type:Ba[2]};for(let Ca of Object.values(ss[1])){let Xa=Gn(Ca,Ds);if(Xa)return Xa}return null}(el,Ji)}let Ta=function(Ws){let Ma=Is[Ws];if(!Ma)throw Error("Unknown dynamic param type");return Ma}(jn.type);return{param:$i,value:cs,treeSegment:[$i,Array.isArray(cs)?cs.join("/"):cs,Ta],type:Ta}}),Ss={...Ir,getDynamicParamFromSegment:ia,query:Wt,isPrefetch:xa,requestTimestamp:Vi,appUsingSizeAdjustment:ws,flightRouterState:Ea?el:void 0,requestId:Pn,defaultRevalidate:!1,pagePath:St,clientReferenceManifest:bs,assetPrefix:Ui,flightDataRendererErrorHandler:pr,serverComponentsErrorHandler:Dt,isNotFoundPath:mi,res:ct};if(Cs&&!qe)return Rs(Ss);let _a=qe?function(Ji){let jn=Rs(Ji).then(async $i=>({flightData:await $i.toUnchunkedString(!0)})).catch($i=>({err:$i}));return async()=>{let $i=await jn;if("err"in $i)throw $i.err;return $i.flightData}}(Ss):null,sa=Me.headers["content-security-policy"]||Me.headers["content-security-policy-report-only"];sa&&typeof sa=="string"&&(Rn=function(Ji){var jn;let $i=Ji.split(";").map(Ws=>Ws.trim()),cs=$i.find(Ws=>Ws.startsWith("script-src"))||$i.find(Ws=>Ws.startsWith("default-src"));if(!cs)return;let Ta=(jn=cs.split(" ").slice(1).map(Ws=>Ws.trim()).find(Ws=>Ws.startsWith("'nonce-")&&Ws.length>8&&Ws.endsWith("'")))==null?void 0:jn.slice(7,-1);if(Ta){if(ea.test(Ta))throw Error(`Nonce value from Content-Security-Policy contained HTML escape characters.
Learn more: https://nextjs.org/docs/messages/nonce-contained-invalid-characters`);return Ta}}(sa));let{HeadManagerContext:Ks}=M(3589),{ServerInsertedHTMLProvider:Oa,renderServerInsertedHTML:ys}=function(){let Ji=[],jn=$i=>{Ji.push($i)};return{ServerInsertedHTMLProvider:({children:$i})=>(0,q.jsx)(tc.ServerInsertedHTMLContext.Provider,{value:jn,children:$i}),renderServerInsertedHTML:()=>Ji.map(($i,cs)=>(0,q.jsx)(Z.Fragment,{children:$i()},"__next_server_inserted__"+cs))}}();(Cr=(0,Or.Yz)().getRootSpanAttributes())==null||Cr.set("next.route",St);let Ia=(0,Or.Yz)().wrap(wn.k0.getBodyResult,{spanName:`render route (app) ${St}`,attributes:{"next.route":St}},async({asNotFound:Ji,tree:jn,formState:$i})=>{let cs=Dn.polyfillFiles.filter(rs=>rs.endsWith(".js")&&!rs.endsWith(".module.js")).map(rs=>({src:`${Ui}/_next/${rs}${An(Ss,!1)}`,integrity:ts?.[rs],crossOrigin:or.crossOrigin,noModule:!0,nonce:Rn})),[Ta,Ws]=ru(Dn,Ui,or.crossOrigin,ts,An(Ss,!0),Rn),[Ma,Gn]=gi.renderToReadableStream((0,q.jsx)(Nu,{tree:jn,ctx:Ss,asNotFound:Ji}),bs.clientModules,{onError:Dt}).tee(),ss=(0,q.jsx)(Ks.Provider,{value:{appDir:!0,nonce:Rn},children:(0,q.jsx)(Oa,{children:(0,q.jsx)(rc,{reactServerStream:Ma,preinitScripts:Ta,clientReferenceManifest:bs,nonce:Rn})})}),Ds=!!or.postponed,Ba=G.prerenderState?rs=>{rs.forEach((Li,Qi)=>{$n.headers??={},$n.headers[Qi]=Li})}:qe||Ds?void 0:rs=>{rs.forEach((Li,Qi)=>{ct.appendHeader(Qi,Li)})},Ca=bi({polyfills:cs,renderServerInsertedHTML:ys,serverCapturedErrors:xe,basePath:or.basePath}),Xa=Pc({ppr:or.experimental.ppr,isStaticGeneration:qe,postponed:typeof or.postponed=="string"?JSON.parse(or.postponed):null,streamOptions:{onError:mr,onHeaders:Ba,maxHeadersLength:600,nonce:Rn,bootstrapScripts:[Ws],formState:$i}});try{let{stream:rs,postponed:Li,resumed:Qi}=await Xa.render(ss),ko=G.prerenderState;if(ko){if((0,Yt.tK)(ko))return Li!=null?$n.postponed=JSON.stringify([2,Li]):$n.postponed=JSON.stringify(1),{stream:await(0,j._W)(rs,{getServerInsertedHTML:Ca})};{let[Za,ll]=Gn.tee();if(Gn=Za,await Sa(ll),(0,Yt.tK)(ko))return Li!=null?$n.postponed=JSON.stringify([2,Li]):$n.postponed=JSON.stringify(1),{stream:await(0,j._W)(rs,{getServerInsertedHTML:Ca})};{let tl=rs;if(G.forceDynamic)throw new zl.G('Invariant: a Page with `dynamic = "force-dynamic"` did not trigger the dynamic pathway. This is a bug in Next.js');if(Li!=null){let Ou=Pc({ppr:!0,isStaticGeneration:!1,postponed:[2,Li],streamOptions:{signal:(0,Yt.Su)("static prerender resume"),onError:mr,nonce:Rn}}),kl=new ReadableStream,Jl=(0,q.jsx)(Ks.Provider,{value:{appDir:!0,nonce:Rn},children:(0,q.jsx)(Oa,{children:(0,q.jsx)(rc,{reactServerStream:kl,preinitScripts:()=>{},clientReferenceManifest:bs,nonce:Rn})})}),{stream:nc}=await Ou.render(Jl);tl=(0,j.QW)(rs,nc)}return{stream:await(0,j.Jm)(tl,{inlinedDataStream:ma(Gn,Rn,$i),getServerInsertedHTML:Ca})}}}}if(!or.postponed)return{stream:await(0,j.eN)(rs,{inlinedDataStream:ma(Gn,Rn,$i),isStaticGeneration:qe||sn,getServerInsertedHTML:Ca,serverInsertedHTMLToHead:!0,validateRootLayout:as})};{let Za=ma(Gn,Rn,$i);return Qi?{stream:await(0,j.Bb)(rs,{inlinedDataStream:Za,getServerInsertedHTML:Ca})}:{stream:await(0,j.J$)(rs,{inlinedDataStream:Za})}}}catch(rs){if((0,zl.q)(rs)||typeof rs=="object"&&rs!==null&&"message"in rs&&typeof rs.message=="string"&&rs.message.includes("https://nextjs.org/docs/advanced-features/static-html-export")||qe&&(0,fi.j)(rs))throw rs;let Li=(0,Us.D)(rs);if(Li){let kl=function(Jl){let nc=Jl.stack;return nc?nc.replace(/^[^\n]*\n/,""):""}(rs);if(or.experimental.missingSuspenseWithCSRBailout)throw(0,Fe.vU)(`${rs.reason} should be wrapped in a suspense boundary at page "${St}". Read more: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout
${kl}`),rs;(0,Fe.ZK)(`Entire page "${St}" deopted into client-side rendering due to "${rs.reason}". Read more: https://nextjs.org/docs/messages/deopted-into-client-rendering
${kl}`)}(0,kn.X)(rs)&&(ct.statusCode=404);let Qi=!1;if((0,En.eo)(rs)){if(Qi=!0,ct.statusCode=(0,En.j2)(rs),rs.mutableCookies){let Jl=new Headers;(0,zn._5)(Jl,rs.mutableCookies)&&ct.setHeader("set-cookie",Array.from(Jl.values()))}let kl=(0,ci.V)((0,En.M6)(rs),or.basePath);ct.setHeader("Location",kl)}let ko=Ss.res.statusCode===404;ko||Qi||Li||(ct.statusCode=500);let Za=ko?"not-found":Qi?"redirect":void 0,[ll,tl]=ru(Dn,Ui,or.crossOrigin,ts,An(Ss,!1),Rn),Ou=gi.renderToReadableStream((0,q.jsx)(ol,{tree:jn,ctx:Ss,errorType:Za}),bs.clientModules,{onError:Dt});try{let kl=await(0,j.MY)({ReactDOMServer:M(2553),element:(0,q.jsx)(rc,{reactServerStream:Ou,preinitScripts:ll,clientReferenceManifest:bs,nonce:Rn}),streamOptions:{nonce:Rn,bootstrapScripts:[tl],formState:$i}});return{err:rs,stream:await(0,j.eN)(kl,{inlinedDataStream:ma(Gn,Rn,$i),isStaticGeneration:qe,getServerInsertedHTML:bi({polyfills:cs,renderServerInsertedHTML:ys,serverCapturedErrors:[],basePath:or.basePath}),serverInsertedHTMLToHead:!0,validateRootLayout:as})}}catch(kl){throw kl}}}),fo=await xl({req:Me,res:ct,ComponentMod:gi,serverModuleMap:os,generateFlight:Rs,staticGenerationStore:G,requestStore:pe,serverActions:yi,ctx:Ss}),Da=null;if(fo){if(fo.type==="not-found"){let Ji=["",{},Sn[2]],jn=await Ia({asNotFound:!0,tree:Ji,formState:Da});return new W.Z(jn.stream,{metadata:$n})}if(fo.type==="done"){if(fo.result)return fo.result.assignMetadata($n),fo.result;fo.formState&&(Da=fo.formState)}}let po={metadata:$n},ms=await Ia({asNotFound:mi,tree:Sn,formState:Da});(G.pendingRevalidates||G.revalidatedTags)&&(po.waitUntil=Promise.all([(qr=G.incrementalCache)==null?void 0:qr.revalidateTag(G.revalidatedTags||[]),...Object.values(G.pendingRevalidates||{})])),function(Ji){var jn,$i;let cs=[],{pagePath:Ta,urlPathname:Ws}=Ji;if(Array.isArray(Ji.tags)||(Ji.tags=[]),Ta)for(let Ma of li(Ta))Ma=`${Kr.zt}${Ma}`,(jn=Ji.tags)!=null&&jn.includes(Ma)||Ji.tags.push(Ma),cs.push(Ma);if(Ws){let Ma=new URL(Ws,"http://n").pathname,Gn=`${Kr.zt}${Ma}`;($i=Ji.tags)!=null&&$i.includes(Gn)||Ji.tags.push(Gn),cs.push(Gn)}}(G),G.tags&&($n.fetchTags=G.tags.join(","));let mo=new W.Z(ms.stream,po);if(!qe)return mo;ms.stream=await mo.toUnchunkedString(!0);let Lo=hi.size>0?hi.values().next().value:null;if(G.prerenderState&&(0,Yt.tK)(G.prerenderState)&&((Yr=G.prerenderState)==null?void 0:Yr.isDebugSkeleton))for(let Ji of((0,Fe.ZK)("The following dynamic usage was detected:"),(0,Yt.gS)(G.prerenderState)))(0,Fe.ZK)(Ji);if(!_a)throw Error("Invariant: Flight data resolver is missing when generating static HTML");if(Lo)throw Lo;let Ya=await _a();return Ya&&($n.flightData=Ya),G.forceStatic===!1&&(G.revalidate=0),$n.revalidate=G.revalidate??Ss.defaultRevalidate,$n.revalidate===0&&($n.staticBailoutInfo={description:G.dynamicUsageDescription,stack:G.dynamicUsageStack}),new W.Z(ms.stream,po)}let Yc=(Me,ct,St,Wt,or)=>{let Ir=function(Tr){if(!Tr)throw Error($t);try{if(new URL(Tr,At).origin!==At)throw Error($t);return Tr}catch{throw Error($t)}}(Me.url);return zt.B.wrap(or.ComponentMod.requestAsyncStorage,{req:Me,res:ct,renderOpts:or},Tr=>tr.wrap(or.ComponentMod.staticGenerationAsyncStorage,{urlPathname:Ir,renderOpts:or,requestEndedState:{ended:!1}},Cr=>ho(Me,ct,St,Wt,or,{requestStore:Tr,staticGenerationStore:Cr,componentMod:or.ComponentMod,renderOpts:or},Cr.requestEndedState||{})))}},4219:(Jt,ae,M)=>{"use strict";M.d(ae,{FI:()=>y,Su:()=>C,TP:()=>S,gS:()=>I,tK:()=>k});var q=M(9220),Z=M(3938),W=M(8359),j=M(6588);let z=typeof q.unstable_postpone=="function";function y(N){return{isDebugSkeleton:N,dynamicAccesses:[]}}function S(N,U){let K=(0,j.RO)(N.urlPathname);if(N.isUnstableCacheCallback)throw Error(`Route ${K} used "${U}" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${U}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if(N.dynamicShouldError)throw new W.G(`Route ${K} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${U}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(N.prerenderState)(function(Y,ee,fe){x();let Se=`Route ${fe} needs to bail out of prerendering at this point because it used ${ee}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`;Y.dynamicAccesses.push({stack:Y.isDebugSkeleton?Error().stack:void 0,expression:ee}),q.unstable_postpone(Se)})(N.prerenderState,U,K);else if(N.revalidate=0,N.isStaticGeneration){let Y=new Z.$(`Route ${K} couldn't be rendered statically because it used \`${U}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw N.dynamicUsageDescription=U,N.dynamicUsageStack=Y.stack,Y}}function k(N){return N.dynamicAccesses.length>0}function I(N){return N.dynamicAccesses.filter(U=>typeof U.stack=="string"&&U.stack.length>0).map(({expression:U,stack:K})=>(K=K.split(`
`).slice(4).filter(Y=>!(Y.includes("node_modules/next/")||Y.includes(" (<anonymous>)")||Y.includes(" (node:"))).join(`
`),`Dynamic API Usage Debug - ${U}:
${K}`))}function x(){if(!z)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")}function C(N){x();let U=new AbortController;try{q.unstable_postpone(N)}catch(K){U.abort(K)}return U.signal}},5787:(Jt,ae,M)=>{"use strict";M.d(ae,{Mo:()=>Z});let q=Symbol.for("next.server.action-manifests");function Z({clientReferenceManifest:W,serverActionsManifest:j,serverModuleMap:z}){hn[q]={clientReferenceManifest:W,serverActionsManifest:j,serverModuleMap:z}}},6512:(Jt,ae,M)=>{"use strict";M.d(ae,{R:()=>Z});var q=M(9567);function Z(W){let j=q.Wz.find(z=>W.startsWith(z));return j&&(W=W.slice(j.length)),W.startsWith("[[...")&&W.endsWith("]]")?{type:"optional-catchall",param:W.slice(5,-2)}:W.startsWith("[...")&&W.endsWith("]")?{type:j?"catchall-intercepted":"catchall",param:W.slice(4,-1)}:W.startsWith("[")&&W.endsWith("]")?{type:j?"dynamic-intercepted":"dynamic",param:W.slice(1,-1)}:null}},5358:(Jt,ae,M)=>{"use strict";M.d(ae,{B:()=>I});var q=M(9338),Z=M(6150),W=M(3655),j=M(1641),z=M(1057);class y{constructor(C,N,U,K){var Y;let ee=C&&(0,z.Iq)(N,C).isOnDemandRevalidate,fe=(Y=U.get(z.dS))==null?void 0:Y.value;this.isEnabled=!!(!ee&&fe&&C&&fe===C.previewModeId),this._previewModeId=C?.previewModeId,this._mutableCookies=K}enable(){if(!this._previewModeId)throw Error("Invariant: previewProps missing previewModeId this should never happen");this._mutableCookies.set({name:z.dS,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"})}disable(){this._mutableCookies.set({name:z.dS,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)})}}var S=M(6536);function k(x,C){if("x-middleware-set-cookie"in x.headers&&typeof x.headers["x-middleware-set-cookie"]=="string"){let N=x.headers["x-middleware-set-cookie"],U=new Headers;for(let K of(0,S.l$)(N))U.append("set-cookie",K);for(let K of new j.nV(U).getAll())C.set(K)}}let I={wrap(x,{req:C,res:N,renderOpts:U},K){let Y;function ee(ze){N&&N.setHeader("Set-Cookie",ze)}U&&"previewProps"in U&&(Y=U.previewProps);let fe={},Se={get headers(){return fe.headers||(fe.headers=function(ze){let Ue=Z.h.from(ze);for(let at of q.vu)Ue.delete(at.toString().toLowerCase());return Z.h.seal(Ue)}(C.headers)),fe.headers},get cookies(){if(!fe.cookies){let ze=new j.qC(Z.h.from(C.headers));k(C,ze),fe.cookies=W.Qb.seal(ze)}return fe.cookies},get mutableCookies(){if(!fe.mutableCookies){let ze=function(Ue,at){let vt=new j.qC(Z.h.from(Ue));return W.vr.wrap(vt,at)}(C.headers,U?.onUpdateCookies||(N?ee:void 0));k(C,ze),fe.mutableCookies=ze}return fe.mutableCookies},get draftMode(){return fe.draftMode||(fe.draftMode=new y(Y,C,this.cookies,this.mutableCookies)),fe.draftMode},reactLoadableManifest:U?.reactLoadableManifest||{},assetPrefix:U?.assetPrefix||""};return x.run(Se,K,Se)}}},9665:(Jt,ae,M)=>{"use strict";M.d(ae,{B:()=>j,R:()=>z});let q=0,Z=0,W=0;function j(y){return"performance"in hn?{require:(...S)=>{q===0&&(q=performance.now());let k=performance.now();try{return W+=1,y.__next_app__.require(...S)}finally{Z+=performance.now()-k}},loadChunk:(...S)=>{let k=performance.now();try{return W+=1,y.__next_app__.loadChunk(...S)}finally{Z+=performance.now()-k}}}:y.__next_app__}function z(y={}){let S=q===0?void 0:{clientComponentLoadStart:q,clientComponentLoadTimes:Z,clientComponentLoadCount:W};return y.reset&&(q=0,Z=0,W=0),S}},9567:(Jt,ae,M)=>{"use strict";M.d(ae,{Ag:()=>W,CK:()=>j,Wz:()=>Z});var q=M(1959);let Z=["(..)(..)","(.)","(..)","(...)"];function W(z){return z.split("/").find(y=>Z.find(S=>y.startsWith(S)))!==void 0}function j(z){let y,S,k;for(let I of z.split("/"))if(S=Z.find(x=>I.startsWith(x))){[y,k]=z.split(S,2);break}if(!y||!S||!k)throw Error(`Invalid interception route: ${z}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(y=(0,q.w)(y),S){case"(.)":k=y==="/"?`/${k}`:y+"/"+k;break;case"(..)":if(y==="/")throw Error(`Invalid interception route: ${z}. Cannot use (..) marker at the root level, use (.) instead.`);k=y.split("/").slice(0,-1).concat(k).join("/");break;case"(...)":k="/"+k;break;case"(..)(..)":let I=y.split("/");if(I.length<=2)throw Error(`Invalid interception route: ${z}. Cannot use (..)(..) marker at the root level or one level up.`);k=I.slice(0,-2).concat(k).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:y,interceptedRoute:k}}},5172:(Jt,ae,M)=>{"use strict";M.d(ae,{AppPageRouteModule:()=>Q});var q={};M.r(q),M.d(q,{HtmlContext:()=>K,useHtmlContext:()=>Y});var Z={};M.r(Z),M.d(Z,{AmpStateContext:()=>ee});var W={};M.r(W),M.d(W,{ImageConfigContext:()=>Se});var j={};M.r(j),M.d(j,{default:()=>F});var z={};M.r(z),M.d(z,{AmpContext:()=>Z,AppRouterContext:()=>x,HeadManagerContext:()=>k,HooksClientContext:()=>C,HtmlContext:()=>q,ImageConfigContext:()=>W,Loadable:()=>j,LoadableContext:()=>fe,RouterContext:()=>N,ServerInsertedHtml:()=>I});var y=M(2042);class S{constructor({userland:me,definition:ce}){this.userland=me,this.definition=ce}}var k=M(3589),I=M(8823),x=M(5291),C=M(4504),N=M(402),U=M(9220);let K=(0,U.createContext)(void 0);function Y(){let se=(0,U.useContext)(K);if(!se)throw Error(`<Html> should not be imported outside of pages/_document.
Read more: https://nextjs.org/docs/messages/no-document-import-in-page`);return se}let ee=U.createContext({});var fe=M(5975);let Se=U.createContext({deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",localPatterns:void 0,remotePatterns:[],unoptimized:!1}),ze=[],Ue=[];function at(se){let me=se(),ce={loading:!0,loaded:null,error:null};return ce.promise=me.then(Ke=>(ce.loading=!1,ce.loaded=Ke,Ke)).catch(Ke=>{throw ce.loading=!1,ce.error=Ke,Ke}),ce}class vt{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:me,_opts:ce}=this;me.loading&&(typeof ce.delay=="number"&&(ce.delay===0?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},ce.delay)),typeof ce.timeout=="number"&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},ce.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(Ke=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(me){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...me},this._callbacks.forEach(ce=>ce())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(me){return this._callbacks.add(me),()=>{this._callbacks.delete(me)}}constructor(me,ce){this._loadFn=me,this._opts=ce,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function jt(se){return function(me,ce){let Ke=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},ce),Je=null;function He(){if(!Je){let Fe=new vt(me,Ke);Je={getCurrentValue:Fe.getCurrentValue.bind(Fe),subscribe:Fe.subscribe.bind(Fe),retry:Fe.retry.bind(Fe),promise:Fe.promise.bind(Fe)}}return Je.promise()}function _e(Fe,pt){(function(){He();let Ne=U.useContext(fe.LoadableContext);Ne&&Array.isArray(Ke.modules)&&Ke.modules.forEach(tt=>{Ne(tt)})})();let lr=U.useSyncExternalStore(Je.subscribe,Je.getCurrentValue,Je.getCurrentValue);return U.useImperativeHandle(pt,()=>({retry:Je.retry}),[]),U.useMemo(()=>{var Ne;return lr.loading||lr.error?U.createElement(Ke.loading,{isLoading:lr.loading,pastDelay:lr.pastDelay,timedOut:lr.timedOut,error:lr.error,retry:Je.retry}):lr.loaded?U.createElement((Ne=lr.loaded)&&Ne.default?Ne.default:Ne,Fe):null},[Fe,lr])}return ze.push(He),_e.preload=()=>He(),_e.displayName="LoadableComponent",U.forwardRef(_e)}(at,se)}function re(se,me){let ce=[];for(;se.length;){let Ke=se.pop();ce.push(Ke(me))}return Promise.all(ce).then(()=>{if(se.length)return re(se,me)})}jt.preloadAll=()=>new Promise((se,me)=>{re(ze).then(se,me)}),jt.preloadReady=se=>(se===void 0&&(se=[]),new Promise(me=>{let ce=()=>me();re(Ue,se).then(ce,ce)}));let F=jt;class Q extends S{render(me,ce,Ke){return(0,y.f)(me,ce,Ke.page,Ke.query,Ke.renderOpts)}}},7538:(Jt,ae,M)=>{"use strict";M.d(ae,{Q:()=>W,T:()=>j});let q=["__nextFallback","__nextLocale","__nextInferredLocaleFromDefault","__nextDefaultLocale","__nextIsNotFound",M(9338).H4],Z=["__nextDataReq"];function W(z){for(let y of q)delete z[y]}function j(z,y){let S=typeof z=="string",k=S?new URL(z):z;for(let I of q)k.searchParams.delete(I);if(y)for(let I of Z)k.searchParams.delete(I);return S?k.toString():k}},7514:(Jt,ae,M)=>{"use strict";M.d(ae,{G:()=>Z,x:()=>W});var q=M(9338);function Z(j){let z,y;j.headers instanceof Headers?(z=j.headers.get(q.om.toLowerCase())??null,y=j.headers.get("content-type")):(z=j.headers[q.om.toLowerCase()]??null,y=j.headers["content-type"]??null);let S=j.method==="POST"&&y==="application/x-www-form-urlencoded",k=!!(j.method==="POST"&&y?.startsWith("multipart/form-data")),I=z!==void 0&&typeof z=="string"&&j.method==="POST";return{actionId:z,isURLEncodedAction:S,isMultipartAction:k,isFetchAction:I,isServerAction:!!(I||S||k)}}function W(j){return Z(j).isServerAction}},1427:(Jt,ae,M)=>{"use strict";var q,Z,W,j,z,y,S,k,I,x,C,N;M.d(ae,{Xy:()=>j,_J:()=>q,_s:()=>C,dI:()=>N,hT:()=>K,k0:()=>S,lw:()=>U}),function(Y){Y.handleRequest="BaseServer.handleRequest",Y.run="BaseServer.run",Y.pipe="BaseServer.pipe",Y.getStaticHTML="BaseServer.getStaticHTML",Y.render="BaseServer.render",Y.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",Y.renderToResponse="BaseServer.renderToResponse",Y.renderToHTML="BaseServer.renderToHTML",Y.renderError="BaseServer.renderError",Y.renderErrorToResponse="BaseServer.renderErrorToResponse",Y.renderErrorToHTML="BaseServer.renderErrorToHTML",Y.render404="BaseServer.render404"}(q||(q={})),function(Y){Y.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",Y.loadComponents="LoadComponents.loadComponents"}(Z||(Z={})),function(Y){Y.getRequestHandler="NextServer.getRequestHandler",Y.getServer="NextServer.getServer",Y.getServerRequestHandler="NextServer.getServerRequestHandler",Y.createServer="createServer.createServer"}(W||(W={})),function(Y){Y.compression="NextNodeServer.compression",Y.getBuildId="NextNodeServer.getBuildId",Y.createComponentTree="NextNodeServer.createComponentTree",Y.clientComponentLoading="NextNodeServer.clientComponentLoading",Y.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",Y.generateStaticRoutes="NextNodeServer.generateStaticRoutes",Y.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",Y.generatePublicRoutes="NextNodeServer.generatePublicRoutes",Y.generateImageRoutes="NextNodeServer.generateImageRoutes.route",Y.sendRenderResult="NextNodeServer.sendRenderResult",Y.proxyRequest="NextNodeServer.proxyRequest",Y.runApi="NextNodeServer.runApi",Y.render="NextNodeServer.render",Y.renderHTML="NextNodeServer.renderHTML",Y.imageOptimizer="NextNodeServer.imageOptimizer",Y.getPagePath="NextNodeServer.getPagePath",Y.getRoutesManifest="NextNodeServer.getRoutesManifest",Y.findPageComponents="NextNodeServer.findPageComponents",Y.getFontManifest="NextNodeServer.getFontManifest",Y.getServerComponentManifest="NextNodeServer.getServerComponentManifest",Y.getRequestHandler="NextNodeServer.getRequestHandler",Y.renderToHTML="NextNodeServer.renderToHTML",Y.renderError="NextNodeServer.renderError",Y.renderErrorToHTML="NextNodeServer.renderErrorToHTML",Y.render404="NextNodeServer.render404",Y.startResponse="NextNodeServer.startResponse",Y.route="route",Y.onProxyReq="onProxyReq",Y.apiResolver="apiResolver",Y.internalFetch="internalFetch"}(j||(j={})),(z||(z={})).startServer="startServer.startServer",function(Y){Y.getServerSideProps="Render.getServerSideProps",Y.getStaticProps="Render.getStaticProps",Y.renderToString="Render.renderToString",Y.renderDocument="Render.renderDocument",Y.createBodyResult="Render.createBodyResult"}(y||(y={})),function(Y){Y.renderToString="AppRender.renderToString",Y.renderToReadableStream="AppRender.renderToReadableStream",Y.getBodyResult="AppRender.getBodyResult",Y.fetch="AppRender.fetch"}(S||(S={})),(k||(k={})).executeRoute="Router.executeRoute",(I||(I={})).runHandler="Node.runHandler",(x||(x={})).runHandler="AppRouteRouteHandlers.runHandler",function(Y){Y.generateMetadata="ResolveMetadata.generateMetadata",Y.generateViewport="ResolveMetadata.generateViewport"}(C||(C={})),(N||(N={})).execute="Middleware.execute";let U=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],K=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]},7081:(Jt,ae,M)=>{"use strict";let q;M.d(ae,{MU:()=>S,Qn:()=>y,Yz:()=>ee});var Z=M(1427);let{context:W,propagation:j,trace:z,SpanStatusCode:y,SpanKind:S,ROOT_CONTEXT:k}=q=M(9646),I=fe=>fe!==null&&typeof fe=="object"&&typeof fe.then=="function",x=(fe,Se)=>{Se?.bubble===!0?fe.setAttribute("next.bubble",!0):(Se&&fe.recordException(Se),fe.setStatus({code:y.ERROR,message:Se?.message})),fe.end()},C=new Map,N=q.createContextKey("next.rootSpanId"),U=0,K=()=>U++;class Y{getTracerInstance(){return z.getTracer("next.js","0.0.1")}getContext(){return W}getActiveScopeSpan(){return z.getSpan(W?.active())}withPropagatedContext(Se,ze,Ue){let at=W.active();if(z.getSpanContext(at))return ze();let vt=j.extract(at,Se,Ue);return W.with(vt,ze)}trace(...Se){var ze;let[Ue,at,vt]=Se,{fn:jt,options:re}=typeof at=="function"?{fn:at,options:{}}:{fn:vt,options:{...at}},F=re.spanName??Ue;if(!Z.lw.includes(Ue)&&process.env.NEXT_OTEL_VERBOSE!=="1"||re.hideSpan)return jt();let Q=this.getSpanContext(re?.parentSpan??this.getActiveScopeSpan()),se=!1;Q?(ze=z.getSpanContext(Q))!=null&&ze.isRemote&&(se=!0):(Q=W?.active()??k,se=!0);let me=K();return re.attributes={"next.span_name":F,"next.span_type":Ue,...re.attributes},W.with(Q.setValue(N,me),()=>this.getTracerInstance().startActiveSpan(F,re,ce=>{let Ke="performance"in hn?hn.performance.now():void 0,Je=()=>{C.delete(me),Ke&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&Z.hT.includes(Ue||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(Ue.split(".").pop()||"").replace(/[A-Z]/g,He=>"-"+He.toLowerCase())}`,{start:Ke,end:performance.now()})};se&&C.set(me,new Map(Object.entries(re.attributes??{})));try{if(jt.length>1)return jt(ce,_e=>x(ce,_e));let He=jt(ce);return I(He)?He.then(_e=>(ce.end(),_e)).catch(_e=>{throw x(ce,_e),_e}).finally(Je):(ce.end(),Je(),He)}catch(He){throw x(ce,He),Je(),He}}))}wrap(...Se){let ze=this,[Ue,at,vt]=Se.length===3?Se:[Se[0],{},Se[1]];return Z.lw.includes(Ue)||process.env.NEXT_OTEL_VERBOSE==="1"?function(){let jt=at;typeof jt=="function"&&typeof vt=="function"&&(jt=jt.apply(this,arguments));let re=arguments.length-1,F=arguments[re];if(typeof F!="function")return ze.trace(Ue,jt,()=>vt.apply(this,arguments));{let Q=ze.getContext().bind(W.active(),F);return ze.trace(Ue,jt,(se,me)=>(arguments[re]=function(ce){return me?.(ce),Q.apply(this,arguments)},vt.apply(this,arguments)))}}:vt}startSpan(...Se){let[ze,Ue]=Se,at=this.getSpanContext(Ue?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(ze,Ue,at)}getSpanContext(Se){return Se?z.setSpan(W.active(),Se):void 0}getRootSpanAttributes(){let Se=W.active().getValue(N);return C.get(Se)}}let ee=(()=>{let fe=new Y;return()=>fe})()},4009:(Jt,ae,M)=>{"use strict";M.d(ae,{D:()=>y,P:()=>S});var q=M(3395),Z=M(4439),W=M(7081),j=M(1427),z=M(9665);function y(k){return k?.name==="AbortError"||k?.name===q.WK}async function S(k,I,x){try{let{errored:C,destroyed:N}=I;if(C||N)return;let U=(0,q.yi)(I),K=function(Y,ee){let fe=!1,Se=new Z.Y;function ze(){Se.resolve()}Y.on("drain",ze),Y.once("close",()=>{Y.off("drain",ze),Se.resolve()});let Ue=new Z.Y;return Y.once("finish",()=>{Ue.resolve()}),new WritableStream({write:async at=>{if(!fe){if(fe=!0,"performance"in hn&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX){let vt=(0,z.R)();vt&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-client-component-loading`,{start:vt.clientComponentLoadStart,end:vt.clientComponentLoadStart+vt.clientComponentLoadTimes})}Y.flushHeaders(),(0,W.Yz)().trace(j.Xy.startResponse,{spanName:"start response"},()=>{})}try{let vt=Y.write(at);"flush"in Y&&typeof Y.flush=="function"&&Y.flush(),vt||(await Se.promise,Se=new Z.Y)}catch(vt){throw Y.end(),Error("failed to write chunk to response",{cause:vt})}},abort:at=>{Y.writableFinished||Y.destroy(at)},close:async()=>{if(ee&&await ee,!Y.writableFinished)return Y.end(),Ue.promise}})}(I,x);await k.pipeTo(K,{signal:U.signal})}catch(C){if(y(C))return;throw Error("failed to pipe response",{cause:C})}}},2650:(Jt,ae,M)=>{"use strict";M.d(ae,{Z:()=>W});var q=M(9279),Z=M(4009);class W{static fromStatic(z){return new W(z,{metadata:{}})}constructor(z,{contentType:y,waitUntil:S,metadata:k}){this.response=z,this.contentType=y,this.metadata=k,this.waitUntil=S}assignMetadata(z){Object.assign(this.metadata,z)}get isNull(){return this.response===null}get isDynamic(){return typeof this.response!="string"}toUnchunkedString(z=!1){if(this.response===null)throw Error("Invariant: null responses cannot be unchunked");if(typeof this.response!="string"){if(!z)throw Error("Invariant: dynamic responses cannot be unchunked. This is a bug in Next.js");return(0,q.PN)(this.readable)}return this.response}get readable(){if(this.response===null)throw Error("Invariant: null responses cannot be streamed");if(typeof this.response=="string")throw Error("Invariant: static responses cannot be streamed");return Array.isArray(this.response)?(0,q.QW)(...this.response):this.response}chain(z){let y;if(this.response===null)throw Error("Invariant: response is null. This is a bug in Next.js");(y=typeof this.response=="string"?[(0,q.lU)(this.response)]:Array.isArray(this.response)?this.response:[this.response]).push(z),this.response=y}async pipeTo(z){try{await this.readable.pipeTo(z,{preventClose:!0}),this.waitUntil&&await this.waitUntil,await z.close()}catch(y){if((0,Z.D)(y)){await z.abort(y);return}throw y}}async pipeToNodeResponse(z){await(0,Z.P)(this.readable,z,this.waitUntil)}}},2070:(Jt,ae,M)=>{"use strict";M.d(ae,{OX:()=>Z,d0:()=>z,kL:()=>j,lx:()=>W});let q=Symbol.for("NextInternalRequestMeta");function Z(y,S){let k=y[q]||{};return typeof S=="string"?k[S]:k}function W(y,S){return y[q]=S,S}function j(y,S,k){let I=Z(y);return I[S]=k,W(y,I)}function z(y,S){let k=Z(y);return delete k[S],W(y,k)}},9279:(Jt,ae,M)=>{"use strict";M.d(ae,{QW:()=>C,J$:()=>jt,Bb:()=>vt,_W:()=>Ue,eN:()=>ze,Jm:()=>at,MY:()=>Y,lU:()=>N,PN:()=>U});var q=M(7081),Z=M(1427),W=M(4439);let j=re=>{setTimeout(re,0)},z={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])}};function y(re,F){if(F.length===0)return 0;if(re.length===0||F.length>re.length)return-1;for(let Q=0;Q<=re.length-F.length;Q++){let se=!0;for(let me=0;me<F.length;me++)if(re[Q+me]!==F[me]){se=!1;break}if(se)return Q}return-1}function S(re,F){if(re.length!==F.length)return!1;for(let Q=0;Q<re.length;Q++)if(re[Q]!==F[Q])return!1;return!0}function k(re,F){let Q=y(re,F);if(Q===0)return re.subarray(F.length);if(!(Q>-1))return re;{let se=new Uint8Array(re.length-F.length);return se.set(re.slice(0,Q)),se.set(re.slice(Q+F.length),Q),se}}function I(){}let x=new TextEncoder;function C(...re){if(re.length===0)throw Error("Invariant: chainStreams requires at least one stream");if(re.length===1)return re[0];let{readable:F,writable:Q}=new TransformStream,se=re[0].pipeTo(Q,{preventClose:!0}),me=1;for(;me<re.length-1;me++){let Ke=re[me];se=se.then(()=>Ke.pipeTo(Q,{preventClose:!0}))}let ce=re[me];return(se=se.then(()=>ce.pipeTo(Q))).catch(I),F}function N(re){return new ReadableStream({start(F){F.enqueue(x.encode(re)),F.close()}})}async function U(re){let F=new TextDecoder("utf-8",{fatal:!0}),Q="";for await(let se of re)Q+=F.decode(se,{stream:!0});return Q+F.decode()}function K(){let re,F=[],Q=0,se=me=>{if(re)return;let ce=new W.Y;re=ce,j(()=>{try{let Ke=new Uint8Array(Q),Je=0;for(let He=0;He<F.length;He++){let _e=F[He];Ke.set(_e,Je),Je+=_e.byteLength}F.length=0,Q=0,me.enqueue(Ke)}catch{}finally{re=void 0,ce.resolve()}})};return new TransformStream({transform(me,ce){F.push(me),Q+=me.byteLength,se(ce)},flush(){if(re)return re.promise}})}function Y({ReactDOMServer:re,element:F,streamOptions:Q}){return(0,q.Yz)().trace(Z.k0.renderToReadableStream,async()=>re.renderToReadableStream(F,Q))}function ee(re){let F=!1,Q=!1,se=!1;return new TransformStream({async transform(me,ce){if(se=!0,Q){ce.enqueue(me);return}let Ke=await re();if(F){if(Ke){let Je=x.encode(Ke);ce.enqueue(Je)}ce.enqueue(me),Q=!0}else{let Je=y(me,z.CLOSED.HEAD);if(Je!==-1){if(Ke){let He=x.encode(Ke),_e=new Uint8Array(me.length+He.length);_e.set(me.slice(0,Je)),_e.set(He,Je),_e.set(me.slice(Je),Je+He.length),ce.enqueue(_e)}else ce.enqueue(me);Q=!0,F=!0}}F?j(()=>{Q=!1}):ce.enqueue(me)},async flush(me){if(se){let ce=await re();ce&&me.enqueue(x.encode(ce))}}})}function fe(re){let F=null,Q=!1;async function se(me){if(F)return;let ce=re.getReader();await new Promise(Ke=>j(Ke));try{for(;;){let{done:Ke,value:Je}=await ce.read();if(Ke){Q=!0;return}me.enqueue(Je)}}catch(Ke){me.error(Ke)}}return new TransformStream({transform(me,ce){ce.enqueue(me),F||(F=se(ce))},flush(me){if(!Q)return F||se(me)}})}function Se(re){let F=!1,Q=x.encode(re);return new TransformStream({transform(se,me){if(F)return me.enqueue(se);let ce=y(se,Q);if(ce>-1){if(F=!0,se.length===re.length)return;let Ke=se.slice(0,ce);if(me.enqueue(Ke),se.length>re.length+ce){let Je=se.slice(ce+re.length);me.enqueue(Je)}}else me.enqueue(se)},flush(se){se.enqueue(Q)}})}async function ze(re,{suffix:F,inlinedDataStream:Q,isStaticGeneration:se,getServerInsertedHTML:me,serverInsertedHTMLToHead:ce,validateRootLayout:Ke}){let Je,He,_e="</body></html>",Fe=F?F.split(_e,1)[0]:null;return se&&"allReady"in re&&await re.allReady,function(pt,lr){let Ne=pt;for(let tt of lr)tt&&(Ne=Ne.pipeThrough(tt));return Ne}(re,[K(),me&&!ce?new TransformStream({transform:async(pt,lr)=>{let Ne=await me();Ne&&lr.enqueue(x.encode(Ne)),lr.enqueue(pt)}}):null,Fe!=null&&Fe.length>0?function(pt){let lr,Ne=!1,tt=we=>{let Ce=new W.Y;lr=Ce,j(()=>{try{we.enqueue(x.encode(pt))}catch{}finally{lr=void 0,Ce.resolve()}})};return new TransformStream({transform(we,Ce){Ce.enqueue(we),Ne||(Ne=!0,tt(Ce))},flush(we){if(lr)return lr.promise;Ne||we.enqueue(x.encode(pt))}})}(Fe):null,Q?fe(Q):null,Ke?(Je=!1,He=!1,new TransformStream({async transform(pt,lr){!Je&&y(pt,z.OPENING.HTML)>-1&&(Je=!0),!He&&y(pt,z.OPENING.BODY)>-1&&(He=!0),lr.enqueue(pt)},flush(pt){let lr=[];Je||lr.push("html"),He||lr.push("body"),lr.length&&pt.enqueue(x.encode(`<script>self.__next_root_layout_missing_tags=${JSON.stringify(lr)}<\/script>`))}})):null,Se(_e),me&&ce?ee(me):null])}async function Ue(re,{getServerInsertedHTML:F}){return re.pipeThrough(K()).pipeThrough(new TransformStream({transform(Q,se){S(Q,z.CLOSED.BODY_AND_HTML)||S(Q,z.CLOSED.BODY)||S(Q,z.CLOSED.HTML)||(Q=k(Q,z.CLOSED.BODY),Q=k(Q,z.CLOSED.HTML),se.enqueue(Q))}})).pipeThrough(ee(F))}async function at(re,{inlinedDataStream:F,getServerInsertedHTML:Q}){return re.pipeThrough(K()).pipeThrough(ee(Q)).pipeThrough(fe(F)).pipeThrough(Se("</body></html>"))}async function vt(re,{inlinedDataStream:F,getServerInsertedHTML:Q}){return re.pipeThrough(K()).pipeThrough(ee(Q)).pipeThrough(fe(F)).pipeThrough(Se("</body></html>"))}async function jt(re,{inlinedDataStream:F}){return re.pipeThrough(fe(F)).pipeThrough(Se("</body></html>"))}},8269:(Jt,ae,M)=>{"use strict";M.d(ae,{Y5:()=>W,cR:()=>Z,qJ:()=>q});class q extends Error{constructor({page:z}){super(`The middleware "${z}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class Z extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class W extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}},9141:(Jt,ae,M)=>{"use strict";M.d(ae,{c:()=>C});var q=M(9558),Z=M(9912),W=M(4679);function j(N,U){if(!N.startsWith("/")||!U)return N;let{pathname:K,query:Y,hash:ee}=(0,W.c)(N);return""+K+U+Y+ee}var z=M(7843),y=M(9556),S=M(4372);let k=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function I(N,U){return new URL(String(N).replace(k,"localhost"),U&&String(U).replace(k,"localhost"))}let x=Symbol("NextURLInternal");class C{constructor(U,K,Y){let ee,fe;typeof K=="object"&&"pathname"in K||typeof K=="string"?(ee=K,fe=Y||{}):fe=Y||K||{},this[x]={url:I(U,ee??fe.base),options:fe,basePath:""},this.analyze()}analyze(){var U,K,Y,ee,fe;let Se=(0,S.a)(this[x].url.pathname,{nextConfig:this[x].options.nextConfig,parseData:!0,i18nProvider:this[x].options.i18nProvider}),ze=(0,y.F)(this[x].url,this[x].options.headers);this[x].domainLocale=this[x].options.i18nProvider?this[x].options.i18nProvider.detectDomainLocale(ze):function(at,vt,jt){if(at)for(let Q of(jt&&(jt=jt.toLowerCase()),at)){var re,F;if(vt===((re=Q.domain)==null?void 0:re.split(":",1)[0].toLowerCase())||jt===Q.defaultLocale.toLowerCase()||((F=Q.locales)==null?void 0:F.some(se=>se.toLowerCase()===jt)))return Q}}((K=this[x].options.nextConfig)==null||(U=K.i18n)==null?void 0:U.domains,ze);let Ue=((Y=this[x].domainLocale)==null?void 0:Y.defaultLocale)||((fe=this[x].options.nextConfig)==null||(ee=fe.i18n)==null?void 0:ee.defaultLocale);this[x].url.pathname=Se.pathname,this[x].defaultLocale=Ue,this[x].basePath=Se.basePath??"",this[x].buildId=Se.buildId,this[x].locale=Se.locale??Ue,this[x].trailingSlash=Se.trailingSlash}formatPathname(){var U;let K;return K=function(Y,ee,fe,Se){if(!ee||ee===fe)return Y;let ze=Y.toLowerCase();return!Se&&((0,z.Y)(ze,"/api")||(0,z.Y)(ze,"/"+ee.toLowerCase()))?Y:(0,Z.V)(Y,"/"+ee)}((U={basePath:this[x].basePath,buildId:this[x].buildId,defaultLocale:this[x].options.forceLocale?void 0:this[x].defaultLocale,locale:this[x].locale,pathname:this[x].url.pathname,trailingSlash:this[x].trailingSlash}).pathname,U.locale,U.buildId?void 0:U.defaultLocale,U.ignorePrefix),(U.buildId||!U.trailingSlash)&&(K=(0,q.Q)(K)),U.buildId&&(K=j((0,Z.V)(K,"/_next/data/"+U.buildId),U.pathname==="/"?"index.json":".json")),K=(0,Z.V)(K,U.basePath),!U.buildId&&U.trailingSlash?K.endsWith("/")?K:j(K,"/"):(0,q.Q)(K)}formatSearch(){return this[x].url.search}get buildId(){return this[x].buildId}set buildId(U){this[x].buildId=U}get locale(){return this[x].locale??""}set locale(U){var K,Y;if(!this[x].locale||!(!((Y=this[x].options.nextConfig)==null||(K=Y.i18n)==null)&&K.locales.includes(U)))throw TypeError(`The NextURL configuration includes no locale "${U}"`);this[x].locale=U}get defaultLocale(){return this[x].defaultLocale}get domainLocale(){return this[x].domainLocale}get searchParams(){return this[x].url.searchParams}get host(){return this[x].url.host}set host(U){this[x].url.host=U}get hostname(){return this[x].url.hostname}set hostname(U){this[x].url.hostname=U}get port(){return this[x].url.port}set port(U){this[x].url.port=U}get protocol(){return this[x].url.protocol}set protocol(U){this[x].url.protocol=U}get href(){let U=this.formatPathname(),K=this.formatSearch();return`${this.protocol}//${this.host}${U}${K}${this.hash}`}set href(U){this[x].url=I(U),this.analyze()}get origin(){return this[x].url.origin}get pathname(){return this[x].url.pathname}set pathname(U){this[x].url.pathname=U}get hash(){return this[x].url.hash}set hash(U){this[x].url.hash=U}get search(){return this[x].url.search}set search(U){this[x].url.search=U}get password(){return this[x].url.password}set password(U){this[x].url.password=U}get username(){return this[x].url.username}set username(U){this[x].url.username=U}get basePath(){return this[x].basePath}set basePath(U){this[x].basePath=U.startsWith("/")?U:`/${U}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new C(String(this),this[x].options)}}},6150:(Jt,ae,M)=>{"use strict";M.d(ae,{h:()=>W});var q=M(3659);class Z extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new Z}}class W extends Headers{constructor(z){super(),this.headers=new Proxy(z,{get(y,S,k){if(typeof S=="symbol")return q.g.get(y,S,k);let I=S.toLowerCase(),x=Object.keys(z).find(C=>C.toLowerCase()===I);if(x!==void 0)return q.g.get(y,x,k)},set(y,S,k,I){if(typeof S=="symbol")return q.g.set(y,S,k,I);let x=S.toLowerCase(),C=Object.keys(z).find(N=>N.toLowerCase()===x);return q.g.set(y,C??S,k,I)},has(y,S){if(typeof S=="symbol")return q.g.has(y,S);let k=S.toLowerCase(),I=Object.keys(z).find(x=>x.toLowerCase()===k);return I!==void 0&&q.g.has(y,I)},deleteProperty(y,S){if(typeof S=="symbol")return q.g.deleteProperty(y,S);let k=S.toLowerCase(),I=Object.keys(z).find(x=>x.toLowerCase()===k);return I===void 0||q.g.deleteProperty(y,I)}})}static seal(z){return new Proxy(z,{get(y,S,k){switch(S){case"append":case"delete":case"set":return Z.callable;default:return q.g.get(y,S,k)}}})}merge(z){return Array.isArray(z)?z.join(", "):z}static from(z){return z instanceof Headers?z:new W(z)}append(z,y){let S=this.headers[z];typeof S=="string"?this.headers[z]=[S,y]:Array.isArray(S)?S.push(y):this.headers[z]=y}delete(z){delete this.headers[z]}get(z){let y=this.headers[z];return y!==void 0?this.merge(y):null}has(z){return this.headers[z]!==void 0}set(z,y){this.headers[z]=y}forEach(z,y){for(let[S,k]of this.entries())z.call(y,k,S,this)}*entries(){for(let z of Object.keys(this.headers)){let y=z.toLowerCase(),S=this.get(y);yield[y,S]}}*keys(){for(let z of Object.keys(this.headers))yield z.toLowerCase()}*values(){for(let z of Object.keys(this.headers))yield this.get(z)}[Symbol.iterator](){return this.entries()}}},3395:(Jt,ae,M)=>{"use strict";M.d(ae,{Og:()=>k,Ub:()=>S,WK:()=>j,yi:()=>y});var q=M(2070),Z=M(6536),W=M(7967);let j="ResponseAborted";class z extends Error{constructor(...x){super(...x),this.name=j}}function y(I){let x=new AbortController;return I.once("close",()=>{I.writableFinished||x.abort(new z)}),x}function S(I){let{errored:x,destroyed:C}=I;if(x||C)return AbortSignal.abort(x??new z);let{signal:N}=y(I);return N}class k{static fromBaseNextRequest(x,C){return"request"in x&&x.request?k.fromWebNextRequest(x):k.fromNodeNextRequest(x,C)}static fromNodeNextRequest(x,C){let N,U=null;if(x.method!=="GET"&&x.method!=="HEAD"&&x.body&&(U=x.body),x.url.startsWith("http"))N=new URL(x.url);else{let K=(0,q.OX)(x,"initURL");N=K&&K.startsWith("http")?new URL(x.url,K):new URL(x.url,"http://n")}return new W.I(N,{method:x.method,headers:(0,Z.EK)(x.headers),duplex:"half",signal:C,...C.aborted?{}:{body:U}})}static fromWebNextRequest(x){let C=null;return x.method!=="GET"&&x.method!=="HEAD"&&(C=x.body),new W.I(x.url,{method:x.method,headers:(0,Z.EK)(x.headers),duplex:"half",signal:x.request.signal,...x.request.signal.aborted?{}:{body:C}})}}},3659:(Jt,ae,M)=>{"use strict";M.d(ae,{g:()=>q});class q{static get(W,j,z){let y=Reflect.get(W,j,z);return typeof y=="function"?y.bind(W):y}static set(W,j,z,y){return Reflect.set(W,j,z,y)}static has(W,j){return Reflect.has(W,j)}static deleteProperty(W,j){return Reflect.deleteProperty(W,j)}}},3655:(Jt,ae,M)=>{"use strict";M.d(ae,{Qb:()=>z,_5:()=>k,fB:()=>S,vr:()=>I});var q=M(1641),Z=M(3659),W=M(9182);class j extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new j}}class z{static seal(C){return new Proxy(C,{get(N,U,K){switch(U){case"clear":case"delete":case"set":return j.callable;default:return Z.g.get(N,U,K)}}})}}let y=Symbol.for("next.mutated.cookies");function S(x){let C=x[y];return C&&Array.isArray(C)&&C.length!==0?C:[]}function k(x,C){let N=S(C);if(N.length===0)return!1;let U=new q.nV(x),K=U.getAll();for(let Y of N)U.set(Y);for(let Y of K)U.set(Y);return!0}class I{static wrap(C,N){let U=new q.nV(new Headers);for(let fe of C.getAll())U.set(fe);let K=[],Y=new Set,ee=()=>{let fe=W.A.getStore();if(fe&&(fe.pathWasRevalidated=!0),K=U.getAll().filter(Se=>Y.has(Se.name)),N){let Se=[];for(let ze of K){let Ue=new q.nV(new Headers);Ue.set(ze),Se.push(Ue.toString())}N(Se)}};return new Proxy(U,{get(fe,Se,ze){switch(Se){case y:return K;case"delete":return function(...Ue){Y.add(typeof Ue[0]=="string"?Ue[0]:Ue[0].name);try{fe.delete(...Ue)}finally{ee()}};case"set":return function(...Ue){Y.add(typeof Ue[0]=="string"?Ue[0]:Ue[0].name);try{return fe.set(...Ue)}finally{ee()}};default:return Z.g.get(fe,Se,ze)}}})}}},1641:(Jt,ae,M)=>{"use strict";M.d(ae,{Q7:()=>q.stringifyCookie,nV:()=>q.ResponseCookies,qC:()=>q.RequestCookies});var q=M(5181)},7967:(Jt,ae,M)=>{"use strict";M.d(ae,{I:()=>y});var q=M(9141),Z=M(6536),W=M(8269),j=M(1641);let z=Symbol("internal request");class y extends Request{constructor(k,I={}){let x=typeof k!="string"&&"url"in k?k.url:String(k);(0,Z.r4)(x),k instanceof Request?super(k,I):super(x,I);let C=new q.c(x,{headers:(0,Z.lb)(this.headers),nextConfig:I.nextConfig});this[z]={cookies:new j.qC(this.headers),geo:I.geo||{},ip:I.ip,nextUrl:C,url:C.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[z].cookies}get geo(){return this[z].geo}get ip(){return this[z].ip}get nextUrl(){return this[z].nextUrl}get page(){throw new W.cR}get ua(){throw new W.Y5}get url(){return this[z].url}}},6536:(Jt,ae,M)=>{"use strict";function q(z){let y=new Headers;for(let[S,k]of Object.entries(z))for(let I of Array.isArray(k)?k:[k])I!==void 0&&(typeof I=="number"&&(I=I.toString()),y.append(S,I));return y}function Z(z){var y,S,k,I,x,C=[],N=0;function U(){for(;N<z.length&&/\s/.test(z.charAt(N));)N+=1;return N<z.length}for(;N<z.length;){for(y=N,x=!1;U();)if((S=z.charAt(N))===","){for(k=N,N+=1,U(),I=N;N<z.length&&(S=z.charAt(N))!=="="&&S!==";"&&S!==",";)N+=1;N<z.length&&z.charAt(N)==="="?(x=!0,N=I,C.push(z.substring(y,k)),y=N):N=k+1}else N+=1;(!x||N>=z.length)&&C.push(z.substring(y,z.length))}return C}function W(z){let y={},S=[];if(z)for(let[k,I]of z.entries())k.toLowerCase()==="set-cookie"?(S.push(...Z(I)),y[k]=S.length===1?S[0]:S):y[k]=I;return y}function j(z){try{return String(new URL(String(z)))}catch(y){throw Error(`URL is malformed "${String(z)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:y})}}M.d(ae,{EK:()=>q,l$:()=>Z,lb:()=>W,r4:()=>j})},5291:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{AppRouterContext:()=>Z,GlobalLayoutRouterContext:()=>j,LayoutRouterContext:()=>W,MissingSlotContext:()=>y,TemplateContext:()=>z});var q=M(9220);let Z=q.createContext(null),W=q.createContext(null),j=q.createContext(null),z=q.createContext(null),y=q.createContext(new Set)},5374:(Jt,ae,M)=>{"use strict";M.d(ae,{f:()=>W});let q=/[|\\{}()[\]^$+*?.-]/,Z=/[|\\{}()[\]^$+*?.-]/g;function W(j){return q.test(j)?j.replace(Z,"\\$&"):j}},9556:(Jt,ae,M)=>{"use strict";function q(Z,W){let j;if(W?.host&&!Array.isArray(W.host))j=W.host.toString().split(":",1)[0];else{if(!Z.hostname)return;j=Z.hostname}return j.toLowerCase()}M.d(ae,{F:()=>q})},1958:(Jt,ae,M)=>{"use strict";function q(W){let j=5381;for(let z=0;z<W.length;z++)j=(j<<5)+j+W.charCodeAt(z)&4294967295;return j>>>0}function Z(W){return q(W).toString(36).slice(0,5)}M.d(ae,{a:()=>Z,p:()=>q})},3589:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{HeadManagerContext:()=>q});let q=M(9220).createContext({})},4504:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{PathParamsContext:()=>j,PathnameContext:()=>W,SearchParamsContext:()=>Z});var q=M(9220);let Z=(0,q.createContext)(null),W=(0,q.createContext)(null),j=(0,q.createContext)(null)},3786:(Jt,ae,M)=>{"use strict";function q(Z,W){let j,z=Z.split("/");return(W||[]).some(y=>!!z[1]&&z[1].toLowerCase()===y.toLowerCase()&&(j=y,z.splice(1,1),Z=z.join("/")||"/",!0)),{pathname:Z,detectedLocale:j}}M.d(ae,{h:()=>q})},3889:(Jt,ae,M)=>{"use strict";let q;q=M(1982),Jt.exports=q},7105:(Jt,ae,M)=>{"use strict";M.d(ae,{D:()=>W,Z:()=>Z});let q="BAILOUT_TO_CLIENT_SIDE_RENDERING";class Z extends Error{constructor(z){super("Bail out to client-side rendering: "+z),this.reason=z,this.digest=q}}function W(j){return typeof j=="object"&&j!==null&&"digest"in j&&j.digest===q}},5975:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{LoadableContext:()=>q});let q=M(9220).createContext(null)},8027:Jt=>{"use strict";Jt.exports=["chrome 64","edge 79","firefox 67","opera 51","safari 12"]},9951:(Jt,ae,M)=>{"use strict";function q(Z){return Z.startsWith("/")?Z:"/"+Z}M.d(ae,{e:()=>q})},402:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{RouterContext:()=>q});let q=M(9220).createContext(null)},9912:(Jt,ae,M)=>{"use strict";M.d(ae,{V:()=>Z});var q=M(4679);function Z(W,j){if(!W.startsWith("/")||!j)return W;let{pathname:z,query:y,hash:S}=(0,q.c)(W);return""+j+z+y+S}},1959:(Jt,ae,M)=>{"use strict";M.d(ae,{b:()=>j,w:()=>W});var q=M(9951),Z=M(6083);function W(z){return(0,q.e)(z.split("/").reduce((y,S,k,I)=>!S||(0,Z.lv)(S)||S[0]==="@"||(S==="page"||S==="route")&&k===I.length-1?y:y+"/"+S,""))}function j(z){return z.replace(/\.rsc($|\?)/,"$1")}},4372:(Jt,ae,M)=>{"use strict";M.d(ae,{a:()=>j});var q=M(3786),Z=M(7274),W=M(7843);function j(z,y){var S,k;let{basePath:I,i18n:x,trailingSlash:C}=(S=y.nextConfig)!=null?S:{},N={pathname:z,trailingSlash:z!=="/"?z.endsWith("/"):C};I&&(0,W.Y)(N.pathname,I)&&(N.pathname=(0,Z.n)(N.pathname,I),N.basePath=I);let U=N.pathname;if(N.pathname.startsWith("/_next/data/")&&N.pathname.endsWith(".json")){let K=N.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),Y=K[0];N.buildId=Y,U=K[1]!=="index"?"/"+K.slice(1).join("/"):"/",y.parseData===!0&&(N.pathname=U)}if(x){let K=y.i18nProvider?y.i18nProvider.analyze(N.pathname):(0,q.h)(N.pathname,x.locales);N.locale=K.detectedLocale,N.pathname=(k=K.pathname)!=null?k:N.pathname,!K.detectedLocale&&N.buildId&&(K=y.i18nProvider?y.i18nProvider.analyze(U):(0,q.h)(U,x.locales)).detectedLocale&&(N.locale=K.detectedLocale)}return N}},9022:(Jt,ae,M)=>{"use strict";function q(Z){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(Z)}M.d(ae,{Q:()=>q})},8631:(Jt,ae,M)=>{"use strict";M.d(ae,{$:()=>W});var q=M(9567);let Z=/\/\[[^/]+?\](?=\/|$)/;function W(j){return(0,q.Ag)(j)&&(j=(0,q.CK)(j).interceptedRoute),Z.test(j)}},4679:(Jt,ae,M)=>{"use strict";function q(Z){let W=Z.indexOf("#"),j=Z.indexOf("?"),z=j>-1&&(W<0||j<W);return z||W>-1?{pathname:Z.substring(0,z?j:W),query:z?Z.substring(j,W>-1?W:void 0):"",hash:W>-1?Z.slice(W):""}:{pathname:Z,query:"",hash:""}}M.d(ae,{c:()=>q})},7843:(Jt,ae,M)=>{"use strict";M.d(ae,{Y:()=>Z});var q=M(4679);function Z(W,j){if(typeof W!="string")return!1;let{pathname:z}=(0,q.c)(W);return z===j||z.startsWith(j+"/")}},6037:(Jt,ae,M)=>{"use strict";function q(j){let z={};return j.forEach((y,S)=>{z[S]===void 0?z[S]=y:Array.isArray(z[S])?z[S].push(y):z[S]=[z[S],y]}),z}function Z(j){return typeof j!="string"&&(typeof j!="number"||isNaN(j))&&typeof j!="boolean"?"":String(j)}function W(j){let z=new URLSearchParams;return Object.entries(j).forEach(y=>{let[S,k]=y;Array.isArray(k)?k.forEach(I=>z.append(S,Z(I))):z.set(S,Z(k))}),z}M.d(ae,{Nn:()=>W,u5:()=>q})},7274:(Jt,ae,M)=>{"use strict";M.d(ae,{n:()=>Z});var q=M(7843);function Z(W,j){if(!(0,q.Y)(W,j))return W;let z=W.slice(j.length);return z.startsWith("/")?z:"/"+z}},9558:(Jt,ae,M)=>{"use strict";function q(Z){return Z.replace(/\/$/,"")||"/"}M.d(ae,{Q:()=>q})},8215:(Jt,ae,M)=>{"use strict";M.d(ae,{t:()=>Z});var q=M(7506);function Z(W){let{re:j,groups:z}=W;return y=>{let S=j.exec(y);if(!S)return!1;let k=x=>{try{return decodeURIComponent(x)}catch{throw new q._9("failed to decode param")}},I={};return Object.keys(z).forEach(x=>{let C=z[x],N=S[C.pos];N!==void 0&&(I[x]=~N.indexOf("/")?N.split("/").map(U=>k(U)):C.repeat?[k(N)]:k(N))}),I}}},9963:(Jt,ae,M)=>{"use strict";M.d(ae,{JV:()=>S,b8:()=>j,vG:()=>z});var q=M(9567),Z=M(5374),W=M(9558);function j(k){let I=k.startsWith("[")&&k.endsWith("]");I&&(k=k.slice(1,-1));let x=k.startsWith("...");return x&&(k=k.slice(3)),{key:k,repeat:x,optional:I}}function z(k){let{parameterizedRoute:I,groups:x}=function(C){let N=(0,W.Q)(C).slice(1).split("/"),U={},K=1;return{parameterizedRoute:N.map(Y=>{let ee=q.Wz.find(Se=>Y.startsWith(Se)),fe=Y.match(/\[((?:\[.*\])|.+)\]/);if(ee&&fe){let{key:Se,optional:ze,repeat:Ue}=j(fe[1]);return U[Se]={pos:K++,repeat:Ue,optional:ze},"/"+(0,Z.f)(ee)+"([^/]+?)"}if(!fe)return"/"+(0,Z.f)(Y);{let{key:Se,repeat:ze,optional:Ue}=j(fe[1]);return U[Se]={pos:K++,repeat:ze,optional:Ue},ze?Ue?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:U}}(k);return{re:RegExp("^"+I+"(?:/)?$"),groups:x}}function y(k){let{interceptionMarker:I,getSafeRouteKey:x,segment:C,routeKeys:N,keyPrefix:U}=k,{key:K,optional:Y,repeat:ee}=j(C),fe=K.replace(/\W/g,"");U&&(fe=""+U+fe);let Se=!1;(fe.length===0||fe.length>30)&&(Se=!0),isNaN(parseInt(fe.slice(0,1)))||(Se=!0),Se&&(fe=x()),U?N[fe]=""+U+K:N[fe]=K;let ze=I?(0,Z.f)(I):"";return ee?Y?"(?:/"+ze+"(?<"+fe+">.+?))?":"/"+ze+"(?<"+fe+">.+?)":"/"+ze+"(?<"+fe+">[^/]+?)"}function S(k,I){let x=function(C,N){let U,K=(0,W.Q)(C).slice(1).split("/"),Y=(U=0,()=>{let fe="",Se=++U;for(;Se>0;)fe+=String.fromCharCode(97+(Se-1)%26),Se=Math.floor((Se-1)/26);return fe}),ee={};return{namedParameterizedRoute:K.map(fe=>{let Se=q.Wz.some(Ue=>fe.startsWith(Ue)),ze=fe.match(/\[((?:\[.*\])|.+)\]/);if(Se&&ze){let[Ue]=fe.split(ze[0]);return y({getSafeRouteKey:Y,interceptionMarker:Ue,segment:ze[1],routeKeys:ee,keyPrefix:N?"nxtI":void 0})}return ze?y({getSafeRouteKey:Y,segment:ze[1],routeKeys:ee,keyPrefix:N?"nxtP":void 0}):"/"+(0,Z.f)(fe)}).join(""),routeKeys:ee}}(k,I);return{...z(k),namedRegex:"^"+x.namedParameterizedRoute+"(?:/)?$",routeKeys:x.routeKeys}}},6083:(Jt,ae,M)=>{"use strict";function q(j){return j[0]==="("&&j.endsWith(")")}M.d(ae,{GC:()=>Z,av:()=>W,lv:()=>q});let Z="__PAGE__",W="__DEFAULT__"},8823:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{ServerInsertedHTMLContext:()=>Z,useServerInsertedHTML:()=>W});var q=M(9220);let Z=q.createContext(null);function W(j){let z=(0,q.useContext)(Z);z&&z(j)}},7506:(Jt,ae,M)=>{"use strict";function q(I){let x,C=!1;return function(){for(var N=arguments.length,U=Array(N),K=0;K<N;K++)U[K]=arguments[K];return C||(C=!0,x=I(...U)),x}}M.d(ae,{At:()=>k,Dp:()=>j,KM:()=>S,U3:()=>z,_9:()=>y,gf:()=>q,sD:()=>W});let Z=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,W=I=>Z.test(I);function j(){let{protocol:I,hostname:x,port:C}=window.location;return I+"//"+x+(C?":"+C:"")}function z(I){let x=I.split("?");return x[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(x[1]?"?"+x.slice(1).join("?"):"")}typeof performance<"u"&&["mark","measure","getEntriesByName"].every(I=>typeof performance[I]=="function");class y extends Error{}class S extends Error{}class k extends Error{constructor(x,C){super(),this.message="Failed to load static file for page: "+x+" "+C}}},2012:(Jt,ae,M)=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0}),function(z,y){for(var S in y)Object.defineProperty(z,S,{enumerable:!0,get:y[S]})}(ae,{getTestReqInfo:function(){return j},withRequest:function(){return W}});let q=new(M(2067)).AsyncLocalStorage;function Z(z,y){let S=y.header(z,"next-test-proxy-port");if(S)return{url:y.url(z),proxyPort:Number(S),testData:y.header(z,"next-test-data")||""}}function W(z,y,S){let k=Z(z,y);return k?q.run(k,S):S()}function j(z,y){return q.getStore()||(z&&y?Z(z,y):void 0)}},3774:(Jt,ae,M)=>{"use strict";var q=M(6195).Buffer;Object.defineProperty(ae,"__esModule",{value:!0}),function(S,k){for(var I in k)Object.defineProperty(S,I,{enumerable:!0,get:k[I]})}(ae,{handleFetch:function(){return z},interceptFetch:function(){return y},reader:function(){return W}});let Z=M(2012),W={url:S=>S.url,header:(S,k)=>S.headers.get(k)};async function j(S,k){let{url:I,method:x,headers:C,body:N,cache:U,credentials:K,integrity:Y,mode:ee,redirect:fe,referrer:Se,referrerPolicy:ze}=k;return{testData:S,api:"fetch",request:{url:I,method:x,headers:[...Array.from(C),["next-test-stack",function(){let Ue=(Error().stack??"").split(`
`);for(let at=1;at<Ue.length;at++)if(Ue[at].length>0){Ue=Ue.slice(at);break}return(Ue=(Ue=(Ue=Ue.filter(at=>!at.includes("/next/dist/"))).slice(0,5)).map(at=>at.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:N?q.from(await k.arrayBuffer()).toString("base64"):null,cache:U,credentials:K,integrity:Y,mode:ee,redirect:fe,referrer:Se,referrerPolicy:ze}}}async function z(S,k){let I=(0,Z.getTestReqInfo)(k,W);if(!I)return S(k);let{testData:x,proxyPort:C}=I,N=await j(x,k),U=await S(`http://localhost:${C}`,{method:"POST",body:JSON.stringify(N),next:{internal:!0}});if(!U.ok)throw Error(`Proxy request failed: ${U.status}`);let K=await U.json(),{api:Y}=K;switch(Y){case"continue":return S(k);case"abort":case"unhandled":throw Error(`Proxy request aborted [${k.method} ${k.url}]`)}return function(ee){let{status:fe,headers:Se,body:ze}=ee.response;return new Response(ze?q.from(ze,"base64"):null,{status:fe,headers:new Headers(Se)})}(K)}function y(S){return M.g.fetch=function(k,I){var x;return!(I==null||(x=I.next)==null)&&x.internal?S(k,I):z(S,new Request(k,I))},()=>{M.g.fetch=S}}},5916:(Jt,ae,M)=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0}),function(z,y){for(var S in y)Object.defineProperty(z,S,{enumerable:!0,get:y[S]})}(ae,{interceptTestApis:function(){return W},wrapRequestHandler:function(){return j}});let q=M(2012),Z=M(3774);function W(){return(0,Z.interceptFetch)(M.g.fetch)}function j(z){return(y,S)=>(0,q.withRequest)(y,Z.reader,()=>z(y,S))}},8369:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{default:()=>W,runtime:()=>Z});var q=M(8264);let Z=(0,q.D)(String.raw`/Users/macbook-air/Public/maglit/app/[slug]/page.tsx#runtime`),W=(0,q.D)(String.raw`/Users/macbook-air/Public/maglit/app/[slug]/page.tsx#default`)},6045:(Jt,ae,M)=>{"use strict";let q,Z,W;M.r(ae),M.d(ae,{default:()=>ob,metadata:()=>ab});var j,z,y,S,k,I,x,C,N,U,K,Y,ee,fe,Se,ze=M(2416);M(7001),M(7633);let Ue=(0,M(8264).D)(String.raw`/Users/macbook-air/Public/maglit/components/providers.tsx#Providers`),at=function(h){let t=[],s=0;for(let u=0;u<h.length;u++){let f=h.charCodeAt(u);f<128?t[s++]=f:(f<2048?t[s++]=f>>6|192:((64512&f)==55296&&u+1<h.length&&(64512&h.charCodeAt(u+1))==56320?(f=65536+((1023&f)<<10)+(1023&h.charCodeAt(++u)),t[s++]=f>>18|240,t[s++]=f>>12&63|128):t[s++]=f>>12|224,t[s++]=f>>6&63|128),t[s++]=63&f|128)}return t},vt=function(h){let t=[],s=0,u=0;for(;s<h.length;){let f=h[s++];if(f<128)t[u++]=String.fromCharCode(f);else if(f>191&&f<224){let w=h[s++];t[u++]=String.fromCharCode((31&f)<<6|63&w)}else if(f>239&&f<365){let w=((7&f)<<18|(63&h[s++])<<12|(63&h[s++])<<6|63&h[s++])-65536;t[u++]=String.fromCharCode(55296+(w>>10)),t[u++]=String.fromCharCode(56320+(1023&w))}else{let w=h[s++],E=h[s++];t[u++]=String.fromCharCode((15&f)<<12|(63&w)<<6|63&E)}}return t.join("")},jt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(h,t){if(!Array.isArray(h))throw Error("encodeByteArray takes an array as a parameter");this.init_();let s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,u=[];for(let f=0;f<h.length;f+=3){let w=h[f],E=f+1<h.length,$=E?h[f+1]:0,J=f+2<h.length,ge=J?h[f+2]:0,rt=w>>2,Bt=(3&w)<<4|$>>4,ir=(15&$)<<2|ge>>6,Rr=63&ge;J||(Rr=64,E||(ir=64)),u.push(s[rt],s[Bt],s[ir],s[Rr])}return u.join("")},encodeString(h,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(h):this.encodeByteArray(at(h),t)},decodeString(h,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(h):vt(this.decodeStringToByteArray(h,t))},decodeStringToByteArray(h,t){this.init_();let s=t?this.charToByteMapWebSafe_:this.charToByteMap_,u=[];for(let f=0;f<h.length;){let w=s[h.charAt(f++)],E=f<h.length?s[h.charAt(f)]:0,$=++f<h.length?s[h.charAt(f)]:64,J=++f<h.length?s[h.charAt(f)]:64;if(++f,w==null||E==null||$==null||J==null)throw new re;let ge=w<<2|E>>4;if(u.push(ge),$!==64){let rt=E<<4&240|$>>2;if(u.push(rt),J!==64){let Bt=$<<6&192|J;u.push(Bt)}}}return u},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let h=0;h<this.ENCODED_VALS.length;h++)this.byteToCharMap_[h]=this.ENCODED_VALS.charAt(h),this.charToByteMap_[this.byteToCharMap_[h]]=h,this.byteToCharMapWebSafe_[h]=this.ENCODED_VALS_WEBSAFE.charAt(h),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[h]]=h,h>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(h)]=h,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(h)]=h)}}};class re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let F=function(h){let t=at(h);return jt.encodeByteArray(t,!0)},Q=function(h){return F(h).replace(/\./g,"")},se=function(h){try{return jt.decodeString(h,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},me=()=>function(){if(typeof zr<"u")return zr;if(typeof window<"u")return window;if(M.g!==void 0)return M.g;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ce=()=>{if(typeof process>"u"||process.env===void 0)return;let h=process.env.__FIREBASE_DEFAULTS__;if(h)return JSON.parse(h)},Ke=()=>{let h;if(typeof document>"u")return;try{h=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=h&&se(h[1]);return t&&JSON.parse(t)},Je=()=>{try{return me()||ce()||Ke()}catch(h){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${h}`);return}},He=h=>{var t,s;return(s=(t=Je())===null||t===void 0?void 0:t.emulatorHosts)===null||s===void 0?void 0:s[h]},_e=h=>{let t=He(h);if(!t)return;let s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let u=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),u]:[t.substring(0,s),u]},Fe=()=>{var h;return(h=Je())===null||h===void 0?void 0:h.config},pt=h=>{var t;return(t=Je())===null||t===void 0?void 0:t[`_${h}`]};class lr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,u)=>{s?this.reject(s):this.resolve(u),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,u))}}}function Ne(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tt(){return!function(){var h;let t=(h=Je())===null||h===void 0?void 0:h.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(M.g.process)==="[object process]"}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function we(){try{return typeof indexedDB=="object"}catch{return!1}}class Ce extends Error{constructor(t,s,u){super(s),this.code=t,this.customData=u,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(t,s,u){this.service=t,this.serviceName=s,this.errors=u}create(t,...s){let u=s[0]||{},f=`${this.service}/${t}`,w=this.errors[t],E=w?w.replace(ve,(J,ge)=>{let rt=u[ge];return rt!=null?String(rt):`<${ge}?>`}):"Error",$=`${this.serviceName}: ${E} (${f}).`;return new Ce(f,$,u)}}let ve=/\{\$([^}]+)}/g;function Ve(h,t){if(h===t)return!0;let s=Object.keys(h),u=Object.keys(t);for(let f of s){if(!u.includes(f))return!1;let w=h[f],E=t[f];if(gt(w)&&gt(E)){if(!Ve(w,E))return!1}else if(w!==E)return!1}for(let f of u)if(!s.includes(f))return!1;return!0}function gt(h){return h!==null&&typeof h=="object"}function mt(h){let t=[];for(let[s,u]of Object.entries(h))Array.isArray(u)?u.forEach(f=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(f))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(u));return t.length?"&"+t.join("&"):""}function lt(h){let t={};return h.replace(/^\?/,"").split("&").forEach(s=>{if(s){let[u,f]=s.split("=");t[decodeURIComponent(u)]=decodeURIComponent(f)}}),t}function et(h){let t=h.indexOf("?");if(!t)return"";let s=h.indexOf("#",t);return h.substring(t,s>0?s:void 0)}class bt{constructor(t,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{t(this)}).catch(u=>{this.error(u)})}next(t){this.forEachObserver(s=>{s.next(t)})}error(t){this.forEachObserver(s=>{s.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,s,u){let f;if(t===void 0&&s===void 0&&u===void 0)throw Error("Missing Observer.");(f=function(E,$){if(typeof E!="object"||E===null)return!1;for(let J of $)if(J in E&&typeof E[J]=="function")return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:s,complete:u}).next===void 0&&(f.next=Ct),f.error===void 0&&(f.error=Ct),f.complete===void 0&&(f.complete=Ct);let w=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?f.error(this.finalError):f.complete()}catch{}}),this.observers.push(f),w}unsubscribeOne(t){this.observers!==void 0&&this.observers[t]!==void 0&&(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,t)}sendOne(t,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{s(this.observers[t])}catch(u){typeof console<"u"&&console.error&&console.error(u)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ct(){}function Ee(h){return h&&h._delegate?h._delegate:h}class Qe{constructor(t,s,u){this.name=t,this.instanceFactory=s,this.type=u,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}let yt="[DEFAULT]";class Rt{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){let u=new lr;if(this.instancesDeferred.set(s,u),this.isInitialized(s)||this.shouldAutoInitialize())try{let f=this.getOrInitializeService({instanceIdentifier:s});f&&u.resolve(f)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){var s;let u=this.normalizeInstanceIdentifier(t?.identifier),f=(s=t?.optional)!==null&&s!==void 0&&s;if(this.isInitialized(u)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:u})}catch(w){if(f)return null;throw w}else{if(f)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(t.instantiationMode==="EAGER")try{this.getOrInitializeService({instanceIdentifier:yt})}catch{}for(let[s,u]of this.instancesDeferred.entries()){let f=this.normalizeInstanceIdentifier(s);try{let w=this.getOrInitializeService({instanceIdentifier:f});u.resolve(w)}catch{}}}}clearInstance(t=yt){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){let t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=yt){return this.instances.has(t)}getOptions(t=yt){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:s={}}=t,u=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(u))throw Error(`${this.name}(${u}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let f=this.getOrInitializeService({instanceIdentifier:u,options:s});for(let[w,E]of this.instancesDeferred.entries())u===this.normalizeInstanceIdentifier(w)&&E.resolve(f);return f}onInit(t,s){var u;let f=this.normalizeInstanceIdentifier(s),w=(u=this.onInitCallbacks.get(f))!==null&&u!==void 0?u:new Set;w.add(t),this.onInitCallbacks.set(f,w);let E=this.instances.get(f);return E&&t(E,f),()=>{w.delete(t)}}invokeOnInitCallbacks(t,s){let u=this.onInitCallbacks.get(s);if(u)for(let f of u)try{f(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let u=this.instances.get(t);if(!u&&this.component&&(u=this.component.instanceFactory(this.container,{instanceIdentifier:t===yt?void 0:t,options:s}),this.instances.set(t,u),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(u,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,u)}catch{}return u||null}normalizeInstanceIdentifier(t=yt){return this.component?this.component.multipleInstances?t:yt:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}class Et{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let s=this.getProvider(t.name);if(s.isComponentSet())throw Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let s=new Rt(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}let rr=[];(function(h){h[h.DEBUG=0]="DEBUG",h[h.VERBOSE=1]="VERBOSE",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.SILENT=5]="SILENT"})(j||(j={}));let an={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},Hr=j.INFO,gn={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},Or=(h,t,...s)=>{if(t<h.logLevel)return;let u=new Date().toISOString(),f=gn[t];if(f)console[f](`[${u}]  ${h.name}:`,...s);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class wn{constructor(t){this.name=t,this._logLevel=Hr,this._logHandler=Or,this._userLogHandler=null,rr.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in j))throw TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?an[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...t),this._logHandler(this,j.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...t),this._logHandler(this,j.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,j.INFO,...t),this._logHandler(this,j.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,j.WARN,...t),this._logHandler(this,j.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...t),this._logHandler(this,j.ERROR,...t)}}let Tn=(h,t)=>t.some(s=>h instanceof s),tn=new WeakMap,rn=new WeakMap,on=new WeakMap,cn=new WeakMap,On=new WeakMap,Pt={get(h,t,s){if(h instanceof IDBTransaction){if(t==="done")return rn.get(h);if(t==="objectStoreNames")return h.objectStoreNames||on.get(h);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return _n(h[t])},set:(h,t,s)=>(h[t]=s,!0),has:(h,t)=>h instanceof IDBTransaction&&(t==="done"||t==="store")||t in h};function _n(h){var t;if(h instanceof IDBRequest)return function(u){let f=new Promise((w,E)=>{let $=()=>{u.removeEventListener("success",J),u.removeEventListener("error",ge)},J=()=>{w(_n(u.result)),$()},ge=()=>{E(u.error),$()};u.addEventListener("success",J),u.addEventListener("error",ge)});return f.then(w=>{w instanceof IDBCursor&&tn.set(w,u)}).catch(()=>{}),On.set(f,u),f}(h);if(cn.has(h))return cn.get(h);let s=typeof(t=h)=="function"?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...u){return t.apply(si(this),u),_n(tn.get(this))}:function(...u){return _n(t.apply(si(this),u))}:function(u,...f){let w=t.call(si(this),u,...f);return on.set(w,u.sort?u.sort():[u]),_n(w)}:(t instanceof IDBTransaction&&function(u){if(rn.has(u))return;let f=new Promise((w,E)=>{let $=()=>{u.removeEventListener("complete",J),u.removeEventListener("error",ge),u.removeEventListener("abort",ge)},J=()=>{w(),$()},ge=()=>{E(u.error||new DOMException("AbortError","AbortError")),$()};u.addEventListener("complete",J),u.addEventListener("error",ge),u.addEventListener("abort",ge)});rn.set(u,f)}(t),Tn(t,q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,Pt):t);return s!==h&&(cn.set(h,s),On.set(s,h)),s}let si=h=>On.get(h),zi=["get","getKey","getAll","getAllKeys","count"],Hs=["put","add","delete","clear"],es=new Map;function Ri(h,t){if(!(h instanceof IDBDatabase&&!(t in h)&&typeof t=="string"))return;if(es.get(t))return es.get(t);let s=t.replace(/FromIndex$/,""),u=t!==s,f=Hs.includes(s);if(!(s in(u?IDBIndex:IDBObjectStore).prototype)||!(f||zi.includes(s)))return;let w=async function(E,...$){let J=this.transaction(E,f?"readwrite":"readonly"),ge=J.store;return u&&(ge=ge.index($.shift())),(await Promise.all([ge[s](...$),f&&J.done]))[0]};return es.set(t,w),w}Pt={...W=Pt,get:(h,t,s)=>Ri(h,t)||W.get(h,t,s),has:(h,t)=>!!Ri(h,t)||W.has(h,t)};class kn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(!function(s){let u=s.getComponent();return u?.type==="VERSION"}(t))return null;{let s=t.getImmediate();return`${s.library}/${s.version}`}}).filter(t=>t).join(" ")}}let st="@firebase/app",Ht="0.10.16",zt=new wn("@firebase/app"),Yt="[DEFAULT]",tr={[st]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},En=new Map,Kr=new Map,li=new Map;function pn(h,t){try{h.container.addComponent(t)}catch(s){zt.debug(`Component ${t.name} failed to register with FirebaseApp ${h.name}`,s)}}function In(h){let t=h.name;if(li.has(t))return zt.debug(`There were multiple attempts to register component ${t}.`),!1;for(let s of(li.set(t,h),En.values()))pn(s,h);for(let s of Kr.values())pn(s,h);return!0}function qn(h,t){let s=h.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),h.container.getProvider(t)}function Ln(h){return h.settings!==void 0}let Ei=new We("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ha{constructor(t,s,u){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=u,this.container.addComponent(new Qe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}let fi="11.0.2";function Us(h,t={}){let s=h;typeof t!="object"&&(t={name:t});let u=Object.assign({name:Yt,automaticDataCollectionEnabled:!1},t),f=u.name;if(typeof f!="string"||!f)throw Ei.create("bad-app-name",{appName:String(f)});if(s||(s=Fe()),!s)throw Ei.create("no-options");let w=En.get(f);if(w){if(Ve(s,w.options)&&Ve(u,w.config))return w;throw Ei.create("duplicate-app",{appName:f})}let E=new Et(f);for(let J of li.values())E.addComponent(J);let $=new Ha(s,u,E);return En.set(f,$),$}function ds(h=Yt){let t=En.get(h);if(!t&&h===Yt&&Fe())return Us();if(!t)throw Ei.create("no-app",{appName:h});return t}function ui(h,t,s){var u;let f=(u=tr[h])!==null&&u!==void 0?u:h;s&&(f+=`-${s}`);let w=f.match(/\s|\//),E=t.match(/\s|\//);if(w||E){let $=[`Unable to register library "${f}" with version "${t}":`];w&&$.push(`library name "${f}" contains illegal characters (whitespace or "/")`),w&&E&&$.push("and"),E&&$.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zt.warn($.join(" "));return}In(new Qe(`${f}-version`,()=>({library:f,version:t}),"VERSION"))}let Ki="firebase-heartbeat-store",$s=null;function Is(){return $s||($s=function(h,t,{blocked:s,upgrade:u,blocking:f,terminated:w}={}){let E=indexedDB.open(h,1),$=_n(E);return u&&E.addEventListener("upgradeneeded",J=>{u(_n(E.result),J.oldVersion,J.newVersion,_n(E.transaction),J)}),s&&E.addEventListener("blocked",J=>s(J.oldVersion,J.newVersion,J)),$.then(J=>{w&&J.addEventListener("close",()=>w()),f&&J.addEventListener("versionchange",ge=>f(ge.oldVersion,ge.newVersion,ge))}).catch(()=>{}),$}("firebase-heartbeat-database",0,{upgrade:(h,t)=>{if(t===0)try{h.createObjectStore(Ki)}catch(s){console.warn(s)}}}).catch(h=>{throw Ei.create("idb-open",{originalErrorMessage:h.message})})),$s}async function wa(h){try{let t=(await Is()).transaction(Ki),s=await t.objectStore(Ki).get(ea(h));return await t.done,s}catch(t){if(t instanceof Ce)zt.warn(t.message);else{let s=Ei.create("idb-get",{originalErrorMessage:t?.message});zt.warn(s.message)}}}async function ua(h,t){try{let s=(await Is()).transaction(Ki,"readwrite");await s.objectStore(Ki).put(t,ea(h)),await s.done}catch(s){if(s instanceof Ce)zt.warn(s.message);else{let u=Ei.create("idb-set",{originalErrorMessage:s?.message});zt.warn(u.message)}}}function ea(h){return`${h.name}!${h.options.appId}`}class Gi{constructor(t){this.container=t,this._heartbeatsCache=null;let s=this.container.getProvider("app").getImmediate();this._storage=new Bs(s),this._heartbeatsCachePromise=this._storage.read().then(u=>(this._heartbeatsCache=u,u))}async triggerHeartbeat(){var t,s;try{let u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=na();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(w=>w.date===f)?void 0:(this._heartbeatsCache.heartbeats.push({date:f,agent:u}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(w=>{let E=new Date(w.date).valueOf();return Date.now()-E<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}catch(u){zt.warn(u)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let s=na(),{heartbeatsToSend:u,unsentEntries:f}=function(E,$=1024){let J=[],ge=E.slice();for(let rt of E){let Bt=J.find(ir=>ir.agent===rt.agent);if(Bt){if(Bt.dates.push(rt.date),wo(J)>$){Bt.dates.pop();break}}else if(J.push({agent:rt.agent,dates:[rt.date]}),wo(J)>$){J.pop();break}ge=ge.slice(1)}return{heartbeatsToSend:J,unsentEntries:ge}}(this._heartbeatsCache.heartbeats),w=Q(JSON.stringify({version:2,heartbeats:u}));return this._heartbeatsCache.lastSentHeartbeatDate=s,f.length>0?(this._heartbeatsCache.heartbeats=f,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),w}catch(s){return zt.warn(s),""}}}function na(){return new Date().toISOString().substring(0,10)}class Bs{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!we()&&new Promise((t,s)=>{try{let u=!0,f="validate-browser-context-for-indexeddb-analytics-module",w=zr.indexedDB.open(f);w.onsuccess=()=>{w.result.close(),u||zr.indexedDB.deleteDatabase(f),t(!0)},w.onupgradeneeded=()=>{u=!1},w.onerror=()=>{var E;s(((E=w.error)===null||E===void 0?void 0:E.message)||"")}}catch(u){s(u)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let t=await wa(this.app);return t?.heartbeats?t:{heartbeats:[]}}}async overwrite(t){var s;if(await this._canUseIndexedDBPromise){let u=await this.read();return ua(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:u.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var s;if(await this._canUseIndexedDBPromise){let u=await this.read();return ua(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...t.heartbeats]})}}}function wo(h){return Q(JSON.stringify({version:2,heartbeats:h})).length}In(new Qe("platform-logger",h=>new kn(h),"PRIVATE")),In(new Qe("heartbeat",h=>new Gi(h),"PRIVATE")),ui(st,Ht,""),ui(st,Ht,"esm2017"),ui("fire-js","");var Te=typeof hn<"u"?hn:typeof window<"u"?window:typeof Pu<"u"?Pu:typeof zr<"u"?zr:{},dt={};(function(){function h(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function t(dr,Lt,Vt){Vt||(Vt=0);var er=Array(16);if(typeof Lt=="string")for(var fr=0;16>fr;++fr)er[fr]=Lt.charCodeAt(Vt++)|Lt.charCodeAt(Vt++)<<8|Lt.charCodeAt(Vt++)<<16|Lt.charCodeAt(Vt++)<<24;else for(fr=0;16>fr;++fr)er[fr]=Lt[Vt++]|Lt[Vt++]<<8|Lt[Vt++]<<16|Lt[Vt++]<<24;Lt=dr.g[0],Vt=dr.g[1],fr=dr.g[2];var Ar=dr.g[3],Kt=Lt+(Ar^Vt&(fr^Ar))+er[0]+3614090360&4294967295;Kt=Ar+(fr^(Lt=Vt+(Kt<<7&4294967295|Kt>>>25))&(Vt^fr))+er[1]+3905402710&4294967295,Kt=fr+(Vt^(Ar=Lt+(Kt<<12&4294967295|Kt>>>20))&(Lt^Vt))+er[2]+606105819&4294967295,Kt=Vt+(Lt^(fr=Ar+(Kt<<17&4294967295|Kt>>>15))&(Ar^Lt))+er[3]+3250441966&4294967295,Kt=Lt+(Ar^(Vt=fr+(Kt<<22&4294967295|Kt>>>10))&(fr^Ar))+er[4]+4118548399&4294967295,Kt=Ar+(fr^(Lt=Vt+(Kt<<7&4294967295|Kt>>>25))&(Vt^fr))+er[5]+1200080426&4294967295,Kt=fr+(Vt^(Ar=Lt+(Kt<<12&4294967295|Kt>>>20))&(Lt^Vt))+er[6]+2821735955&4294967295,Kt=Vt+(Lt^(fr=Ar+(Kt<<17&4294967295|Kt>>>15))&(Ar^Lt))+er[7]+4249261313&4294967295,Kt=Lt+(Ar^(Vt=fr+(Kt<<22&4294967295|Kt>>>10))&(fr^Ar))+er[8]+1770035416&4294967295,Kt=Ar+(fr^(Lt=Vt+(Kt<<7&4294967295|Kt>>>25))&(Vt^fr))+er[9]+2336552879&4294967295,Kt=fr+(Vt^(Ar=Lt+(Kt<<12&4294967295|Kt>>>20))&(Lt^Vt))+er[10]+4294925233&4294967295,Kt=Vt+(Lt^(fr=Ar+(Kt<<17&4294967295|Kt>>>15))&(Ar^Lt))+er[11]+2304563134&4294967295,Kt=Lt+(Ar^(Vt=fr+(Kt<<22&4294967295|Kt>>>10))&(fr^Ar))+er[12]+1804603682&4294967295,Kt=Ar+(fr^(Lt=Vt+(Kt<<7&4294967295|Kt>>>25))&(Vt^fr))+er[13]+4254626195&4294967295,Kt=fr+(Vt^(Ar=Lt+(Kt<<12&4294967295|Kt>>>20))&(Lt^Vt))+er[14]+2792965006&4294967295,Kt=Vt+(Lt^(fr=Ar+(Kt<<17&4294967295|Kt>>>15))&(Ar^Lt))+er[15]+1236535329&4294967295,Vt=fr+(Kt<<22&4294967295|Kt>>>10),Kt=Lt+(fr^Ar&(Vt^fr))+er[1]+4129170786&4294967295,Lt=Vt+(Kt<<5&4294967295|Kt>>>27),Kt=Ar+(Vt^fr&(Lt^Vt))+er[6]+3225465664&4294967295,Ar=Lt+(Kt<<9&4294967295|Kt>>>23),Kt=fr+(Lt^Vt&(Ar^Lt))+er[11]+643717713&4294967295,fr=Ar+(Kt<<14&4294967295|Kt>>>18),Kt=Vt+(Ar^Lt&(fr^Ar))+er[0]+3921069994&4294967295,Vt=fr+(Kt<<20&4294967295|Kt>>>12),Kt=Lt+(fr^Ar&(Vt^fr))+er[5]+3593408605&4294967295,Lt=Vt+(Kt<<5&4294967295|Kt>>>27),Kt=Ar+(Vt^fr&(Lt^Vt))+er[10]+38016083&4294967295,Ar=Lt+(Kt<<9&4294967295|Kt>>>23),Kt=fr+(Lt^Vt&(Ar^Lt))+er[15]+3634488961&4294967295,fr=Ar+(Kt<<14&4294967295|Kt>>>18),Kt=Vt+(Ar^Lt&(fr^Ar))+er[4]+3889429448&4294967295,Vt=fr+(Kt<<20&4294967295|Kt>>>12),Kt=Lt+(fr^Ar&(Vt^fr))+er[9]+568446438&4294967295,Lt=Vt+(Kt<<5&4294967295|Kt>>>27),Kt=Ar+(Vt^fr&(Lt^Vt))+er[14]+3275163606&4294967295,Ar=Lt+(Kt<<9&4294967295|Kt>>>23),Kt=fr+(Lt^Vt&(Ar^Lt))+er[3]+4107603335&4294967295,fr=Ar+(Kt<<14&4294967295|Kt>>>18),Kt=Vt+(Ar^Lt&(fr^Ar))+er[8]+1163531501&4294967295,Vt=fr+(Kt<<20&4294967295|Kt>>>12),Kt=Lt+(fr^Ar&(Vt^fr))+er[13]+2850285829&4294967295,Lt=Vt+(Kt<<5&4294967295|Kt>>>27),Kt=Ar+(Vt^fr&(Lt^Vt))+er[2]+4243563512&4294967295,Ar=Lt+(Kt<<9&4294967295|Kt>>>23),Kt=fr+(Lt^Vt&(Ar^Lt))+er[7]+1735328473&4294967295,fr=Ar+(Kt<<14&4294967295|Kt>>>18),Kt=Vt+(Ar^Lt&(fr^Ar))+er[12]+2368359562&4294967295,Kt=Lt+((Vt=fr+(Kt<<20&4294967295|Kt>>>12))^fr^Ar)+er[5]+4294588738&4294967295,Kt=Ar+((Lt=Vt+(Kt<<4&4294967295|Kt>>>28))^Vt^fr)+er[8]+2272392833&4294967295,Kt=fr+((Ar=Lt+(Kt<<11&4294967295|Kt>>>21))^Lt^Vt)+er[11]+1839030562&4294967295,Kt=Vt+((fr=Ar+(Kt<<16&4294967295|Kt>>>16))^Ar^Lt)+er[14]+4259657740&4294967295,Kt=Lt+((Vt=fr+(Kt<<23&4294967295|Kt>>>9))^fr^Ar)+er[1]+2763975236&4294967295,Kt=Ar+((Lt=Vt+(Kt<<4&4294967295|Kt>>>28))^Vt^fr)+er[4]+1272893353&4294967295,Kt=fr+((Ar=Lt+(Kt<<11&4294967295|Kt>>>21))^Lt^Vt)+er[7]+4139469664&4294967295,Kt=Vt+((fr=Ar+(Kt<<16&4294967295|Kt>>>16))^Ar^Lt)+er[10]+3200236656&4294967295,Kt=Lt+((Vt=fr+(Kt<<23&4294967295|Kt>>>9))^fr^Ar)+er[13]+681279174&4294967295,Kt=Ar+((Lt=Vt+(Kt<<4&4294967295|Kt>>>28))^Vt^fr)+er[0]+3936430074&4294967295,Kt=fr+((Ar=Lt+(Kt<<11&4294967295|Kt>>>21))^Lt^Vt)+er[3]+3572445317&4294967295,Kt=Vt+((fr=Ar+(Kt<<16&4294967295|Kt>>>16))^Ar^Lt)+er[6]+76029189&4294967295,Kt=Lt+((Vt=fr+(Kt<<23&4294967295|Kt>>>9))^fr^Ar)+er[9]+3654602809&4294967295,Kt=Ar+((Lt=Vt+(Kt<<4&4294967295|Kt>>>28))^Vt^fr)+er[12]+3873151461&4294967295,Kt=fr+((Ar=Lt+(Kt<<11&4294967295|Kt>>>21))^Lt^Vt)+er[15]+530742520&4294967295,Kt=Vt+((fr=Ar+(Kt<<16&4294967295|Kt>>>16))^Ar^Lt)+er[2]+3299628645&4294967295,Vt=fr+(Kt<<23&4294967295|Kt>>>9),Kt=Lt+(fr^(Vt|~Ar))+er[0]+4096336452&4294967295,Lt=Vt+(Kt<<6&4294967295|Kt>>>26),Kt=Ar+(Vt^(Lt|~fr))+er[7]+1126891415&4294967295,Ar=Lt+(Kt<<10&4294967295|Kt>>>22),Kt=fr+(Lt^(Ar|~Vt))+er[14]+2878612391&4294967295,fr=Ar+(Kt<<15&4294967295|Kt>>>17),Kt=Vt+(Ar^(fr|~Lt))+er[5]+4237533241&4294967295,Vt=fr+(Kt<<21&4294967295|Kt>>>11),Kt=Lt+(fr^(Vt|~Ar))+er[12]+1700485571&4294967295,Lt=Vt+(Kt<<6&4294967295|Kt>>>26),Kt=Ar+(Vt^(Lt|~fr))+er[3]+2399980690&4294967295,Ar=Lt+(Kt<<10&4294967295|Kt>>>22),Kt=fr+(Lt^(Ar|~Vt))+er[10]+4293915773&4294967295,fr=Ar+(Kt<<15&4294967295|Kt>>>17),Kt=Vt+(Ar^(fr|~Lt))+er[1]+2240044497&4294967295,Vt=fr+(Kt<<21&4294967295|Kt>>>11),Kt=Lt+(fr^(Vt|~Ar))+er[8]+1873313359&4294967295,Lt=Vt+(Kt<<6&4294967295|Kt>>>26),Kt=Ar+(Vt^(Lt|~fr))+er[15]+4264355552&4294967295,Ar=Lt+(Kt<<10&4294967295|Kt>>>22),Kt=fr+(Lt^(Ar|~Vt))+er[6]+2734768916&4294967295,fr=Ar+(Kt<<15&4294967295|Kt>>>17),Kt=Vt+(Ar^(fr|~Lt))+er[13]+1309151649&4294967295,Vt=fr+(Kt<<21&4294967295|Kt>>>11),Kt=Lt+(fr^(Vt|~Ar))+er[4]+4149444226&4294967295,Lt=Vt+(Kt<<6&4294967295|Kt>>>26),Kt=Ar+(Vt^(Lt|~fr))+er[11]+3174756917&4294967295,Ar=Lt+(Kt<<10&4294967295|Kt>>>22),Kt=fr+(Lt^(Ar|~Vt))+er[2]+718787259&4294967295,fr=Ar+(Kt<<15&4294967295|Kt>>>17),Kt=Vt+(Ar^(fr|~Lt))+er[9]+3951481745&4294967295,dr.g[0]=dr.g[0]+Lt&4294967295,dr.g[1]=dr.g[1]+(fr+(Kt<<21&4294967295|Kt>>>11))&4294967295,dr.g[2]=dr.g[2]+fr&4294967295,dr.g[3]=dr.g[3]+Ar&4294967295}function s(dr,Lt){this.h=Lt;for(var Vt=[],er=!0,fr=dr.length-1;0<=fr;fr--){var Ar=0|dr[fr];er&&Ar==Lt||(Vt[fr]=Ar,er=!1)}this.g=Vt}(function(dr,Lt){function Vt(){}Vt.prototype=Lt.prototype,dr.D=Lt.prototype,dr.prototype=new Vt,dr.prototype.constructor=dr,dr.C=function(er,fr,Ar){for(var Kt=Array(arguments.length-2),eu=2;eu<arguments.length;eu++)Kt[eu-2]=arguments[eu];return Lt.prototype[fr].apply(er,Kt)}})(h,function(){this.blockSize=-1}),h.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},h.prototype.u=function(dr,Lt){Lt===void 0&&(Lt=dr.length);for(var Vt=Lt-this.blockSize,er=this.B,fr=this.h,Ar=0;Ar<Lt;){if(fr==0)for(;Ar<=Vt;)t(this,dr,Ar),Ar+=this.blockSize;if(typeof dr=="string"){for(;Ar<Lt;)if(er[fr++]=dr.charCodeAt(Ar++),fr==this.blockSize){t(this,er),fr=0;break}}else for(;Ar<Lt;)if(er[fr++]=dr[Ar++],fr==this.blockSize){t(this,er),fr=0;break}}this.h=fr,this.o+=Lt},h.prototype.v=function(){var dr=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);dr[0]=128;for(var Lt=1;Lt<dr.length-8;++Lt)dr[Lt]=0;var Vt=8*this.o;for(Lt=dr.length-8;Lt<dr.length;++Lt)dr[Lt]=255&Vt,Vt/=256;for(this.u(dr),dr=Array(16),Lt=Vt=0;4>Lt;++Lt)for(var er=0;32>er;er+=8)dr[Vt++]=this.g[Lt]>>>er&255;return dr};var u,f={};function w(dr){var Lt;return-128<=dr&&128>dr?(Lt=function(Vt){return new s([0|Vt],0>Vt?-1:0)},Object.prototype.hasOwnProperty.call(f,dr)?f[dr]:f[dr]=Lt(dr)):new s([0|dr],0>dr?-1:0)}function E(dr){if(isNaN(dr)||!isFinite(dr))return $;if(0>dr)return ir(E(-dr));for(var Lt=[],Vt=1,er=0;dr>=Vt;er++)Lt[er]=dr/Vt|0,Vt*=4294967296;return new s(Lt,0)}var $=w(0),J=w(1),ge=w(16777216);function rt(dr){if(dr.h!=0)return!1;for(var Lt=0;Lt<dr.g.length;Lt++)if(dr.g[Lt]!=0)return!1;return!0}function Bt(dr){return dr.h==-1}function ir(dr){for(var Lt=dr.g.length,Vt=[],er=0;er<Lt;er++)Vt[er]=~dr.g[er];return new s(Vt,~dr.h).add(J)}function Rr(dr,Lt){return dr.add(ir(Lt))}function Vn(dr,Lt){for(;(65535&dr[Lt])!=dr[Lt];)dr[Lt+1]+=dr[Lt]>>>16,dr[Lt]&=65535,Lt++}function oi(dr,Lt){this.g=dr,this.h=Lt}function vi(dr,Lt){if(rt(Lt))throw Error("division by zero");if(rt(dr))return new oi($,$);if(Bt(dr))return Lt=vi(ir(dr),Lt),new oi(ir(Lt.g),ir(Lt.h));if(Bt(Lt))return Lt=vi(dr,ir(Lt)),new oi(ir(Lt.g),Lt.h);if(30<dr.g.length){if(Bt(dr)||Bt(Lt))throw Error("slowDivide_ only works with positive integers.");for(var Vt=J,er=Lt;0>=er.l(dr);)Vt=Gs(Vt),er=Gs(er);var fr=ls(Vt,1),Ar=ls(er,1);for(er=ls(er,2),Vt=ls(Vt,2);!rt(er);){var Kt=Ar.add(er);0>=Kt.l(dr)&&(fr=fr.add(Vt),Ar=Kt),er=ls(er,1),Vt=ls(Vt,1)}return Lt=Rr(dr,fr.j(Lt)),new oi(fr,Lt)}for(fr=$;0<=dr.l(Lt);){for(er=48>=(er=Math.ceil(Math.log(Vt=Math.max(1,Math.floor(dr.m()/Lt.m())))/Math.LN2))?1:Math.pow(2,er-48),Kt=(Ar=E(Vt)).j(Lt);Bt(Kt)||0<Kt.l(dr);)Vt-=er,Kt=(Ar=E(Vt)).j(Lt);rt(Ar)&&(Ar=J),fr=fr.add(Ar),dr=Rr(dr,Kt)}return new oi(fr,dr)}function Gs(dr){for(var Lt=dr.g.length+1,Vt=[],er=0;er<Lt;er++)Vt[er]=dr.i(er)<<1|dr.i(er-1)>>>31;return new s(Vt,dr.h)}function ls(dr,Lt){var Vt=Lt>>5;Lt%=32;for(var er=dr.g.length-Vt,fr=[],Ar=0;Ar<er;Ar++)fr[Ar]=0<Lt?dr.i(Ar+Vt)>>>Lt|dr.i(Ar+Vt+1)<<32-Lt:dr.i(Ar+Vt);return new s(fr,dr.h)}(u=s.prototype).m=function(){if(Bt(this))return-ir(this).m();for(var dr=0,Lt=1,Vt=0;Vt<this.g.length;Vt++){var er=this.i(Vt);dr+=(0<=er?er:4294967296+er)*Lt,Lt*=4294967296}return dr},u.toString=function(dr){if(2>(dr=dr||10)||36<dr)throw Error("radix out of range: "+dr);if(rt(this))return"0";if(Bt(this))return"-"+ir(this).toString(dr);for(var Lt=E(Math.pow(dr,6)),Vt=this,er="";;){var fr=vi(Vt,Lt).g,Ar=((0<(Vt=Rr(Vt,fr.j(Lt))).g.length?Vt.g[0]:Vt.h)>>>0).toString(dr);if(rt(Vt=fr))return Ar+er;for(;6>Ar.length;)Ar="0"+Ar;er=Ar+er}},u.i=function(dr){return 0>dr?0:dr<this.g.length?this.g[dr]:this.h},u.l=function(dr){return Bt(dr=Rr(this,dr))?-1:rt(dr)?0:1},u.abs=function(){return Bt(this)?ir(this):this},u.add=function(dr){for(var Lt=Math.max(this.g.length,dr.g.length),Vt=[],er=0,fr=0;fr<=Lt;fr++){var Ar=er+(65535&this.i(fr))+(65535&dr.i(fr)),Kt=(Ar>>>16)+(this.i(fr)>>>16)+(dr.i(fr)>>>16);er=Kt>>>16,Ar&=65535,Kt&=65535,Vt[fr]=Kt<<16|Ar}return new s(Vt,-2147483648&Vt[Vt.length-1]?-1:0)},u.j=function(dr){if(rt(this)||rt(dr))return $;if(Bt(this))return Bt(dr)?ir(this).j(ir(dr)):ir(ir(this).j(dr));if(Bt(dr))return ir(this.j(ir(dr)));if(0>this.l(ge)&&0>dr.l(ge))return E(this.m()*dr.m());for(var Lt=this.g.length+dr.g.length,Vt=[],er=0;er<2*Lt;er++)Vt[er]=0;for(er=0;er<this.g.length;er++)for(var fr=0;fr<dr.g.length;fr++){var Ar=this.i(er)>>>16,Kt=65535&this.i(er),eu=dr.i(fr)>>>16,$y=65535&dr.i(fr);Vt[2*er+2*fr]+=Kt*$y,Vn(Vt,2*er+2*fr),Vt[2*er+2*fr+1]+=Ar*$y,Vn(Vt,2*er+2*fr+1),Vt[2*er+2*fr+1]+=Kt*eu,Vn(Vt,2*er+2*fr+1),Vt[2*er+2*fr+2]+=Ar*eu,Vn(Vt,2*er+2*fr+2)}for(er=0;er<Lt;er++)Vt[er]=Vt[2*er+1]<<16|Vt[2*er];for(er=Lt;er<2*Lt;er++)Vt[er]=0;return new s(Vt,0)},u.A=function(dr){return vi(this,dr).h},u.and=function(dr){for(var Lt=Math.max(this.g.length,dr.g.length),Vt=[],er=0;er<Lt;er++)Vt[er]=this.i(er)&dr.i(er);return new s(Vt,this.h&dr.h)},u.or=function(dr){for(var Lt=Math.max(this.g.length,dr.g.length),Vt=[],er=0;er<Lt;er++)Vt[er]=this.i(er)|dr.i(er);return new s(Vt,this.h|dr.h)},u.xor=function(dr){for(var Lt=Math.max(this.g.length,dr.g.length),Vt=[],er=0;er<Lt;er++)Vt[er]=this.i(er)^dr.i(er);return new s(Vt,this.h^dr.h)},h.prototype.digest=h.prototype.v,h.prototype.reset=h.prototype.s,h.prototype.update=h.prototype.u,y=dt.Md5=h,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=E,s.fromString=function dr(Lt,Vt){if(Lt.length==0)throw Error("number format error: empty string");if(2>(Vt=Vt||10)||36<Vt)throw Error("radix out of range: "+Vt);if(Lt.charAt(0)=="-")return ir(dr(Lt.substring(1),Vt));if(0<=Lt.indexOf("-"))throw Error('number format error: interior "-" character');for(var er=E(Math.pow(Vt,8)),fr=$,Ar=0;Ar<Lt.length;Ar+=8){var Kt=Math.min(8,Lt.length-Ar),eu=parseInt(Lt.substring(Ar,Ar+Kt),Vt);8>Kt?(Kt=E(Math.pow(Vt,Kt)),fr=fr.j(Kt).add(E(eu))):fr=(fr=fr.j(er)).add(E(eu))}return fr},z=dt.Integer=s}).apply(Te!==void 0?Te:typeof zr<"u"?zr:typeof window<"u"?window:{});var At=typeof hn<"u"?hn:typeof window<"u"?window:typeof Pu<"u"?Pu:typeof zr<"u"?zr:{},$t={};(function(){var h,t,s,u=typeof Object.defineProperties=="function"?Object.defineProperty:function(P,he,De){return P==Array.prototype||P==Object.prototype||(P[he]=De.value),P},f=function(P){P=[typeof hn=="object"&&hn,P,typeof window=="object"&&window,typeof zr=="object"&&zr,typeof At=="object"&&At];for(var he=0;he<P.length;++he){var De=P[he];if(De&&De.Math==Math)return De}throw Error("Cannot find global object")}(this);(function(P,he){if(he)e:{var De=f;P=P.split(".");for(var It=0;It<P.length-1;It++){var jr=P[It];if(!(jr in De))break e;De=De[jr]}(he=he(It=De[P=P[P.length-1]]))!=It&&he!=null&&u(De,P,{configurable:!0,writable:!0,value:he})}})("Array.prototype.values",function(P){return P||function(){var he,De,It,jr,Fr;return he=this,De=function(Xr,Yn){return Yn},he instanceof String&&(he+=""),It=0,jr=!1,(Fr={next:function(){if(!jr&&It<he.length){var Xr=It++;return{value:De(Xr,he[Xr]),done:!1}}return jr=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return Fr},Fr}});var w=w||{},E=this||zr;function $(P){var he=typeof P;return(he=he!="object"?he:P?Array.isArray(P)?"array":he:"null")=="array"||he=="object"&&typeof P.length=="number"}function J(P){var he=typeof P;return he=="object"&&P!=null||he=="function"}function ge(P,he,De){return P.call.apply(P.bind,arguments)}function rt(P,he,De){if(!P)throw Error();if(2<arguments.length){var It=Array.prototype.slice.call(arguments,2);return function(){var jr=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(jr,It),P.apply(he,jr)}}return function(){return P.apply(he,arguments)}}function Bt(P,he,De){return(Bt=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ge:rt).apply(null,arguments)}function ir(P,he){var De=Array.prototype.slice.call(arguments,1);return function(){var It=De.slice();return It.push.apply(It,arguments),P.apply(this,It)}}function Rr(P,he){function De(){}De.prototype=he.prototype,P.aa=he.prototype,P.prototype=new De,P.prototype.constructor=P,P.Qb=function(It,jr,Fr){for(var Xr=Array(arguments.length-2),Yn=2;Yn<arguments.length;Yn++)Xr[Yn-2]=arguments[Yn];return he.prototype[jr].apply(It,Xr)}}function Vn(P){let he=P.length;if(0<he){let De=Array(he);for(let It=0;It<he;It++)De[It]=P[It];return De}return[]}function oi(P,he){for(let De=1;De<arguments.length;De++){let It=arguments[De];if($(It)){let jr=P.length||0,Fr=It.length||0;P.length=jr+Fr;for(let Xr=0;Xr<Fr;Xr++)P[jr+Xr]=It[Xr]}else P.push(It)}}class vi{constructor(he,De){this.i=he,this.j=De,this.h=0,this.g=null}get(){let he;return 0<this.h?(this.h--,he=this.g,this.g=he.next,he.next=null):he=this.i(),he}}function Gs(P){return/^[\s\xa0]*$/.test(P)}function ls(){var P=E.navigator;return P&&(P=P.userAgent)?P:""}function dr(P){return dr[" "](P),P}dr[" "]=function(){};var Lt=ls().indexOf("Gecko")!=-1&&!(ls().toLowerCase().indexOf("webkit")!=-1&&ls().indexOf("Edge")==-1)&&!(ls().indexOf("Trident")!=-1||ls().indexOf("MSIE")!=-1)&&ls().indexOf("Edge")==-1;function Vt(P,he,De){for(let It in P)he.call(De,P[It],It,P)}function er(P){let he={};for(let De in P)he[De]=P[De];return he}let fr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ar(P,he){let De,It;for(let jr=1;jr<arguments.length;jr++){for(De in It=arguments[jr])P[De]=It[De];for(let Fr=0;Fr<fr.length;Fr++)De=fr[Fr],Object.prototype.hasOwnProperty.call(It,De)&&(P[De]=It[De])}}class Kt{constructor(){this.h=this.g=null}add(he,De){let It=eu.get();It.set(he,De),this.h?this.h.next=It:this.g=It,this.h=It}}var eu=new vi(()=>new $y,P=>P.reset());class $y{constructor(){this.next=this.g=this.h=null}set(he,De){this.h=he,this.g=De,this.next=null}reset(){this.next=this.g=this.h=null}}let By,Mf=!1,Lf=new Kt,qy=()=>{let P=E.Promise.resolve(void 0);By=()=>{P.then(PS)}};var PS=()=>{let P;for(var he;P=null,Lf.g&&(P=Lf.g,Lf.g=Lf.g.next,Lf.g||(Lf.h=null),P.next=null),he=P;){try{he.h.call(he.g)}catch(De){(function(It){E.setTimeout(()=>{throw It},0)})(De)}eu.j(he),100>eu.h&&(eu.h++,he.next=eu.g,eu.g=he)}Mf=!1};function jf(){this.s=this.s,this.C=this.C}function Yu(P,he){this.type=P,this.g=this.target=he,this.defaultPrevented=!1}jf.prototype.s=!1,jf.prototype.ma=function(){this.s||(this.s=!0,this.N())},jf.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Yu.prototype.h=function(){this.defaultPrevented=!0};var Kv=function(){if(!E.addEventListener||!Object.defineProperty)return!1;var P=!1,he=Object.defineProperty({},"passive",{get:function(){P=!0}});try{let De=()=>{};E.addEventListener("test",De,he),E.removeEventListener("test",De,he)}catch{}return P}();function zy(P,he){if(Yu.call(this,P?P.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,P){var De=this.type=P.type,It=P.changedTouches&&P.changedTouches.length?P.changedTouches[0]:null;if(this.target=P.target||P.srcElement,this.g=he,he=P.relatedTarget){if(Lt){e:{try{dr(he.nodeName);var jr=!0;break e}catch{}jr=!1}jr||(he=null)}}else De=="mouseover"?he=P.fromElement:De=="mouseout"&&(he=P.toElement);this.relatedTarget=he,It?(this.clientX=It.clientX!==void 0?It.clientX:It.pageX,this.clientY=It.clientY!==void 0?It.clientY:It.pageY,this.screenX=It.screenX||0,this.screenY=It.screenY||0):(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0),this.button=P.button,this.key=P.key||"",this.ctrlKey=P.ctrlKey,this.altKey=P.altKey,this.shiftKey=P.shiftKey,this.metaKey=P.metaKey,this.pointerId=P.pointerId||0,this.pointerType=typeof P.pointerType=="string"?P.pointerType:Y0[P.pointerType]||"",this.state=P.state,this.i=P,P.defaultPrevented&&zy.aa.h.call(this)}}Rr(zy,Yu);var Y0={2:"touch",3:"pen",4:"mouse"};zy.prototype.h=function(){zy.aa.h.call(this);var P=this.i;P.preventDefault?P.preventDefault():P.returnValue=!1};var Mg="closure_listenable_"+(1e6*Math.random()|0),sl=0;function AS(P,he,De,It,jr){this.listener=P,this.proxy=null,this.src=he,this.type=De,this.capture=!!It,this.ha=jr,this.key=++sl,this.da=this.fa=!1}function Ec(P){P.da=!0,P.listener=null,P.proxy=null,P.src=null,P.ha=null}function Wv(P){this.src=P,this.g={},this.h=0}function Gy(P,he){var De=he.type;if(De in P.g){var It,jr=P.g[De],Fr=Array.prototype.indexOf.call(jr,he,void 0);(It=0<=Fr)&&Array.prototype.splice.call(jr,Fr,1),It&&(Ec(he),P.g[De].length==0&&(delete P.g[De],P.h--))}}function X0(P,he,De,It){for(var jr=0;jr<P.length;++jr){var Fr=P[jr];if(!Fr.da&&Fr.listener==he&&!!De==Fr.capture&&Fr.ha==It)return jr}return-1}Wv.prototype.add=function(P,he,De,It,jr){var Fr=P.toString();(P=this.g[Fr])||(P=this.g[Fr]=[],this.h++);var Xr=X0(P,he,It,jr);return-1<Xr?(he=P[Xr],De||(he.fa=!1)):((he=new AS(he,this.src,Fr,!!It,jr)).fa=De,P.push(he)),he};var Hy="closure_lm_"+(1e6*Math.random()|0),Z0={};function od(P,he,De,It,jr,Fr){if(!he)throw Error("Invalid event type");var Xr=J(jr)?!!jr.capture:!!jr,Yn=Ky(P);if(Yn||(P[Hy]=Yn=new Wv(P)),(De=Yn.add(he,De,It,Xr,Fr)).proxy)return De;if(It=function Zn(la){return NS.call(Zn.src,Zn.listener,la)},De.proxy=It,It.src=P,It.listener=De,P.addEventListener)Kv||(jr=Xr),jr===void 0&&(jr=!1),P.addEventListener(he.toString(),It,jr);else if(P.attachEvent)P.attachEvent(ew(he.toString()),It);else if(P.addListener&&P.removeListener)P.addListener(It);else throw Error("addEventListener and attachEvent are unavailable.");return De}function Jv(P){if(typeof P!="number"&&P&&!P.da){var he=P.src;if(he&&he[Mg])Gy(he.i,P);else{var De=P.type,It=P.proxy;he.removeEventListener?he.removeEventListener(De,It,P.capture):he.detachEvent?he.detachEvent(ew(De),It):he.addListener&&he.removeListener&&he.removeListener(It),(De=Ky(he))?(Gy(De,P),De.h==0&&(De.src=null,he[Hy]=null)):Ec(P)}}}function ew(P){return P in Z0?Z0[P]:Z0[P]="on"+P}function NS(P,he){if(P.da)P=!0;else{he=new zy(he,this);var De=P.listener,It=P.ha||P.src;P.fa&&Jv(P),P=De.call(It,he)}return P}function Ky(P){return(P=P[Hy])instanceof Wv?P:null}var Qv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lg(P){return typeof P=="function"?P:(P[Qv]||(P[Qv]=function(he){return P.handleEvent(he)}),P[Qv])}function Yo(){jf.call(this),this.i=new Wv(this),this.M=this,this.F=null}function _c(P,he){var De,It=P.F;if(It)for(De=[];It;It=It.F)De.push(It);if(P=P.M,It=he.type||he,typeof he=="string")he=new Yu(he,P);else if(he instanceof Yu)he.target=he.target||P;else{var jr=he;Ar(he=new Yu(It,P),jr)}if(jr=!0,De)for(var Fr=De.length-1;0<=Fr;Fr--){var Xr=he.g=De[Fr];jr=Yv(Xr,It,!0,he)&&jr}if(jr=Yv(Xr=he.g=P,It,!0,he)&&jr,jr=Yv(Xr,It,!1,he)&&jr,De)for(Fr=0;Fr<De.length;Fr++)jr=Yv(Xr=he.g=De[Fr],It,!1,he)&&jr}function Yv(P,he,De,It){if(!(he=P.i.g[String(he)]))return!0;he=he.concat();for(var jr=!0,Fr=0;Fr<he.length;++Fr){var Xr=he[Fr];if(Xr&&!Xr.da&&Xr.capture==De){var Yn=Xr.listener,Zn=Xr.ha||Xr.src;Xr.fa&&Gy(P.i,Xr),jr=Yn.call(Zn,It)!==!1&&jr}}return jr&&!It.defaultPrevented}function lb(P,he,De){if(typeof P=="function")De&&(P=Bt(P,De));else if(P&&typeof P.handleEvent=="function")P=Bt(P.handleEvent,P);else throw Error("Invalid listener argument");return 2147483647<Number(he)?-1:E.setTimeout(P,he||0)}Rr(Yo,jf),Yo.prototype[Mg]=!0,Yo.prototype.removeEventListener=function(P,he,De,It){(function jr(Fr,Xr,Yn,Zn,la){if(Array.isArray(Xr))for(var ya=0;ya<Xr.length;ya++)jr(Fr,Xr[ya],Yn,Zn,la);else Zn=J(Zn)?!!Zn.capture:!!Zn,Yn=Lg(Yn),Fr&&Fr[Mg]?(Fr=Fr.i,(Xr=String(Xr).toString())in Fr.g&&-1<(Yn=X0(ya=Fr.g[Xr],Yn,Zn,la))&&(Ec(ya[Yn]),Array.prototype.splice.call(ya,Yn,1),ya.length==0&&(delete Fr.g[Xr],Fr.h--))):Fr&&(Fr=Ky(Fr))&&(Xr=Fr.g[Xr.toString()],Fr=-1,Xr&&(Fr=X0(Xr,Yn,Zn,la)),(Yn=-1<Fr?Xr[Fr]:null)&&Jv(Yn))})(this,P,he,De,It)},Yo.prototype.N=function(){if(Yo.aa.N.call(this),this.i){var P,he=this.i;for(P in he.g){for(var De=he.g[P],It=0;It<De.length;It++)Ec(De[It]);delete he.g[P],he.h--}}this.F=null},Yo.prototype.K=function(P,he,De,It){return this.i.add(String(P),he,!1,De,It)},Yo.prototype.L=function(P,he,De,It){return this.i.add(String(P),he,!0,De,It)};class OS extends jf{constructor(he,De){super(),this.m=he,this.l=De,this.h=null,this.i=!1,this.g=null}j(he){this.h=arguments,this.g?this.i=!0:function De(It){It.g=lb(()=>{It.g=null,It.i&&(It.i=!1,De(It))},It.l);let jr=It.h;It.h=null,It.m.apply(null,jr)}(this)}N(){super.N(),this.g&&(E.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wy(P){jf.call(this),this.h=P,this.g={}}Rr(Wy,jf);var ub=[];function cb(P){Vt(P.g,function(he,De){this.g.hasOwnProperty(De)&&Jv(he)},P),P.g={}}Wy.prototype.N=function(){Wy.aa.N.call(this),cb(this)},Wy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tw=E.JSON.stringify,hb=E.JSON.parse,db=class{stringify(P){return E.JSON.stringify(P,void 0)}parse(P){return E.JSON.parse(P,void 0)}};function rw(){}function jg(P){return P.h||(P.h=P.i())}function Jy(){}rw.prototype.h=null;var Rm={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xv(){Yu.call(this,"d")}function Pm(){Yu.call(this,"c")}Rr(Xv,Yu),Rr(Pm,Yu);var xp={},Zv=null;function Am(){return Zv=Zv||new Yo}function e0(P){Yu.call(this,xp.La,P)}function Nm(P){let he=Am();_c(he,new e0(he))}function Fg(P,he){Yu.call(this,xp.STAT_EVENT,P),this.stat=he}function jl(P){let he=Am();_c(he,new Fg(he,P))}function ld(P,he){Yu.call(this,xp.Ma,P),this.size=he}function dh(P,he){if(typeof P!="function")throw Error("Fn must not be null and must be a function");return E.setTimeout(function(){P()},he)}function Qy(){this.g=!0}function Vg(P,he,De,It){P.info(function(){return"XMLHTTP TEXT ("+he+"): "+function(jr,Fr){if(!jr.g)return Fr;if(!Fr)return null;try{var Xr=JSON.parse(Fr);if(Xr){for(jr=0;jr<Xr.length;jr++)if(Array.isArray(Xr[jr])){var Yn=Xr[jr];if(!(2>Yn.length)){var Zn=Yn[1];if(Array.isArray(Zn)&&!(1>Zn.length)){var la=Zn[0];if(la!="noop"&&la!="stop"&&la!="close")for(var ya=1;ya<Zn.length;ya++)Zn[ya]=""}}}}return tw(Xr)}catch{return Fr}}(P,De)+(It?" "+It:"")})}xp.La="serverreachability",Rr(e0,Yu),xp.STAT_EVENT="statevent",Rr(Fg,Yu),xp.Ma="timingevent",Rr(ld,Yu),Qy.prototype.xa=function(){this.g=!1},Qy.prototype.info=function(){};var t0={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function r0(){}function Jd(P,he,De,It){this.j=P,this.i=he,this.l=De,this.R=It||1,this.U=new Wy(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new n0}function n0(){this.i=null,this.g="",this.h=!1}Rr(r0,rw),r0.prototype.g=function(){return new XMLHttpRequest},r0.prototype.i=function(){return{}},t=new r0;var nw={},iw={};function Ug(P,he,De){P.L=1,P.v=o0(Yd(he)),P.m=De,P.P=!0,Ho(P,null)}function Ho(P,he){P.F=Date.now(),Xy(P),P.A=Yd(P.v);var De=P.A,It=P.R;Array.isArray(It)||(It=[String(It)]),gb(De.i,"t",It),P.C=0,De=P.j.J,P.h=new n0,P.g=vw(P.j,De?he:null,!P.m),0<P.O&&(P.M=new OS(Bt(P.Y,P,P.g),P.O)),he=P.U,De=P.g,It=P.ca;var jr="readystatechange";Array.isArray(jr)||(jr&&(ub[0]=jr.toString()),jr=ub);for(var Fr=0;Fr<jr.length;Fr++){var Xr=function Yn(Zn,la,ya,vo,ku){if(vo&&vo.once)return function Xu(no,Ja,Ko,Zu,Fh){if(Array.isArray(Ja)){for(var Pp=0;Pp<Ja.length;Pp++)Xu(no,Ja[Pp],Ko,Zu,Fh);return null}return Ko=Lg(Ko),no&&no[Mg]?no.L(Ja,Ko,J(Zu)?!!Zu.capture:!!Zu,Fh):od(no,Ja,Ko,!0,Zu,Fh)}(Zn,la,ya,vo,ku);if(Array.isArray(la)){for(var ro=0;ro<la.length;ro++)Yn(Zn,la[ro],ya,vo,ku);return null}return ya=Lg(ya),Zn&&Zn[Mg]?Zn.K(la,ya,J(vo)?!!vo.capture:!!vo,ku):od(Zn,la,ya,!1,vo,ku)}(De,jr[Fr],It||he.handleEvent,!1,he.h||he);if(!Xr)break;he.g[Xr.key]=Xr}he=P.H?er(P.H):{},P.m?(P.u||(P.u="POST"),he["Content-Type"]="application/x-www-form-urlencoded",P.g.ea(P.A,P.u,P.m,he)):(P.u="GET",P.g.ea(P.A,P.u,null,he)),Nm(),function(Yn,Zn,la,ya,vo,ku){Yn.info(function(){if(Yn.g)if(ku)for(var ro="",Xu=ku.split("&"),no=0;no<Xu.length;no++){var Ja=Xu[no].split("=");if(1<Ja.length){var Ko=Ja[0];Ja=Ja[1];var Zu=Ko.split("_");ro=2<=Zu.length&&Zu[1]=="type"?ro+(Ko+"=")+Ja+"&":ro+(Ko+"=redacted&")}}else ro=null;else ro=ku;return"XMLHTTP REQ ("+ya+") [attempt "+vo+"]: "+Zn+`
`+la+`
`+ro})}(P.i,P.u,P.A,P.l,P.R,P.m)}function Yy(P){return!!P.g&&P.u=="GET"&&P.L!=2&&P.j.Ca}function Xy(P){P.S=Date.now()+P.I,Io(P,P.I)}function Io(P,he){if(P.B!=null)throw Error("WatchDog timer not null");P.B=dh(Bt(P.ba,P),he)}function Qd(P){P.B&&(E.clearTimeout(P.B),P.B=null)}function Fl(P){P.j.G==0||P.J||Bf(P.j,P)}function Ff(P){Qd(P);var he=P.M;he&&typeof he.ma=="function"&&he.ma(),P.M=null,cb(P.U),P.g&&(he=P.g,P.g=null,he.abort(),he.ma())}function i0(P,he){try{var De=P.j;if(De.G!=0&&(De.g==P||ev(De.h,P))){if(!P.K&&ev(De.h,P)&&De.G==3){try{var It=De.Da.g.parse(he)}catch{It=null}if(Array.isArray(It)&&It.length==3){var jr=It;if(jr[0]==0){e:if(!De.u){if(De.g)if(De.g.F+3e3<P.F)f0(De),Kg(De);else break e;Lm(De),jl(18)}}else De.za=jr[1],0<De.za-De.T&&37500>jr[2]&&De.F&&De.v==0&&!De.C&&(De.C=dh(Bt(De.Za,De),6e3));if(1>=ow(De.h)&&De.ca){try{De.ca()}catch{}De.ca=void 0}}else jm(De,11)}else if((P.K||De.g==P)&&f0(De),!Gs(he))for(jr=De.Da.g.parse(he),he=0;he<jr.length;he++){let Yn=jr[he];if(De.T=Yn[0],Yn=Yn[1],De.G==2)if(Yn[0]=="c"){De.K=Yn[1],De.ia=Yn[2];let Zn=Yn[3];Zn!=null&&(De.la=Zn,De.j.info("VER="+De.la));let la=Yn[4];la!=null&&(De.Aa=la,De.j.info("SVER="+De.Aa));let ya=Yn[5];ya!=null&&typeof ya=="number"&&0<ya&&(It=1.5*ya,De.L=It,De.j.info("backChannelRequestTimeoutMs_="+It)),It=De;let vo=P.g;if(vo){let ku=vo.g?vo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ku){var Fr=It.h;Fr.g||ku.indexOf("spdy")==-1&&ku.indexOf("quic")==-1&&ku.indexOf("h2")==-1||(Fr.j=Fr.l,Fr.g=new Set,Fr.h&&(s0(Fr,Fr.h),Fr.h=null))}if(It.D){let ro=vo.g?vo.g.getResponseHeader("X-HTTP-Session-Id"):null;ro&&(It.ya=ro,Uo(It.I,It.D,ro))}}if(De.G=3,De.l&&De.l.ua(),De.ba&&(De.R=Date.now()-P.F,De.j.info("Handshake RTT: "+De.R+"ms")),(It=De).qa=p0(It,It.J?It.ia:null,It.W),P.K){lw(It.h,P);var Xr=It.L;Xr&&(P.I=Xr),P.B&&(Qd(P),Xy(P)),It.g=P}else Sb(It);0<De.i.length&&hu(De)}else Yn[0]!="stop"&&Yn[0]!="close"||jm(De,7);else De.G==3&&(Yn[0]=="stop"||Yn[0]=="close"?Yn[0]=="stop"?jm(De,7):$f(De):Yn[0]!="noop"&&De.l&&De.l.ta(Yn),De.v=0)}}Nm(4)}catch{}}Jd.prototype.ca=function(P){P=P.target;let he=this.M;he&&ud(P)==3?he.j():this.Y(P)},Jd.prototype.Y=function(P){try{if(P==this.g)e:{let vo=ud(this.g);var he=this.g.Ba();let ku=this.g.Z();if(!(3>vo)&&(vo!=3||this.g&&(this.h.h||this.g.oa()||mw(this.g)))){this.J||vo!=4||he==7||(he==8||0>=ku?Nm(3):Nm(2)),Qd(this);var De=this.g.Z();this.X=De;t:if(Yy(this)){var It=mw(this.g);P="";var jr=It.length,Fr=ud(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ff(this),Fl(this);var Xr="";break t}this.h.i=new E.TextDecoder}for(he=0;he<jr;he++)this.h.h=!0,P+=this.h.i.decode(It[he],{stream:!(Fr&&he==jr-1)});It.length=0,this.h.g+=P,this.C=0,Xr=this.h.g}else Xr=this.g.oa();if(this.o=De==200,function(ro,Xu,no,Ja,Ko,Zu,Fh){ro.info(function(){return"XMLHTTP RESP ("+Ja+") [ attempt "+Ko+"]: "+Xu+`
`+no+`
`+Zu+" "+Fh})}(this.i,this.u,this.A,this.l,this.R,vo,De),this.o){if(this.T&&!this.K){t:{if(this.g){var Yn,Zn=this.g;if((Yn=Zn.g?Zn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gs(Yn)){var la=Yn;break t}}la=null}if(De=la)Vg(this.i,this.l,De,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,i0(this,De);else{this.o=!1,this.s=3,jl(12),Ff(this),Fl(this);break e}}if(this.P){let ro;for(De=!0;!this.J&&this.C<Xr.length;)if((ro=function(Xu,no){var Ja=Xu.C,Ko=no.indexOf(`
`,Ja);return Ko==-1?iw:isNaN(Ja=Number(no.substring(Ja,Ko)))?nw:(Ko+=1)+Ja>no.length?iw:(no=no.slice(Ko,Ko+Ja),Xu.C=Ko+Ja,no)}(this,Xr))==iw){vo==4&&(this.s=4,jl(14),De=!1),Vg(this.i,this.l,null,"[Incomplete Response]");break}else if(ro==nw){this.s=4,jl(15),Vg(this.i,this.l,Xr,"[Invalid Chunk]"),De=!1;break}else Vg(this.i,this.l,ro,null),i0(this,ro);if(Yy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vo!=4||Xr.length!=0||this.h.h||(this.s=1,jl(16),De=!1),this.o=this.o&&De,De){if(0<Xr.length&&!this.W){this.W=!0;var ya=this.j;ya.g==this&&ya.ba&&!ya.M&&(ya.j.info("Great, no buffering proxy detected. Bytes received: "+Xr.length),d0(ya),ya.M=!0,jl(11))}}else Vg(this.i,this.l,Xr,"[Invalid Chunked Response]"),Ff(this),Fl(this)}else Vg(this.i,this.l,Xr,null),i0(this,Xr);vo==4&&Ff(this),this.o&&!this.J&&(vo==4?Bf(this.j,this):(this.o=!1,Xy(this)))}else(function(ro){let Xu={};ro=(ro.g&&2<=ud(ro)&&ro.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ja=0;Ja<ro.length;Ja++){if(Gs(ro[Ja]))continue;var no=function(Fh){var Pp=1;Fh=Fh.split(":");let y0=[];for(;0<Pp&&Fh.length;)y0.push(Fh.shift()),Pp--;return Fh.length&&y0.push(Fh.join(":")),y0}(ro[Ja]);let Ko=no[0];if(typeof(no=no[1])!="string")continue;no=no.trim();let Zu=Xu[Ko]||[];Xu[Ko]=Zu,Zu.push(no)}(function(Ja,Ko){for(let Zu in Ja)Ko.call(void 0,Ja[Zu],Zu,Ja)})(Xu,function(Ja){return Ja.join(", ")})})(this.g),De==400&&0<Xr.indexOf("Unknown SID")?(this.s=3,jl(12)):(this.s=0,jl(13)),Ff(this),Fl(this)}}}catch{}finally{}},Jd.prototype.cancel=function(){this.J=!0,Ff(this)},Jd.prototype.ba=function(){this.B=null;let P=Date.now();0<=P-this.S?(function(he,De){he.info(function(){return"TIMEOUT: "+De})}(this.i,this.A),this.L!=2&&(Nm(),jl(17)),Ff(this),this.s=2,Fl(this)):Io(this,this.S-P)};var Zy=class{constructor(P,he){this.g=P,this.map=he}};function sw(P){this.l=P||10,P=E.PerformanceNavigationTiming?0<(P=E.performance.getEntriesByType("navigation")).length&&(P[0].nextHopProtocol=="hq"||P[0].nextHopProtocol=="h2"):!!(E.chrome&&E.chrome.loadTimes&&E.chrome.loadTimes()&&E.chrome.loadTimes().wasFetchedViaSpdy),this.j=P?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aw(P){return!!P.h||!!P.g&&P.g.size>=P.j}function ow(P){return P.h?1:P.g?P.g.size:0}function ev(P,he){return P.h?P.h==he:!!P.g&&P.g.has(he)}function s0(P,he){P.g?P.g.add(he):P.h=he}function lw(P,he){P.h&&P.h==he?P.h=null:P.g&&P.g.has(he)&&P.g.delete(he)}function a0(P){if(P.h!=null)return P.i.concat(P.h.D);if(P.g!=null&&P.g.size!==0){let he=P.i;for(let De of P.g.values())he=he.concat(De.D);return he}return Vn(P.i)}function uw(P,he){if(P.forEach&&typeof P.forEach=="function")P.forEach(he,void 0);else if($(P)||typeof P=="string")Array.prototype.forEach.call(P,he,void 0);else for(var De=function(Xr){if(Xr.na&&typeof Xr.na=="function")return Xr.na();if(!Xr.V||typeof Xr.V!="function"){if(typeof Map<"u"&&Xr instanceof Map)return Array.from(Xr.keys());if(!(typeof Set<"u"&&Xr instanceof Set)){if($(Xr)||typeof Xr=="string"){var Yn=[];Xr=Xr.length;for(var Zn=0;Zn<Xr;Zn++)Yn.push(Zn);return Yn}for(let la in Yn=[],Zn=0,Xr)Yn[Zn++]=la;return Yn}}}(P),It=function(Xr){if(Xr.V&&typeof Xr.V=="function")return Xr.V();if(typeof Map<"u"&&Xr instanceof Map||typeof Set<"u"&&Xr instanceof Set)return Array.from(Xr.values());if(typeof Xr=="string")return Xr.split("");if($(Xr)){for(var Yn=[],Zn=Xr.length,la=0;la<Zn;la++)Yn.push(Xr[la]);return Yn}for(la in Yn=[],Zn=0,Xr)Yn[Zn++]=Xr[la];return Yn}(P),jr=It.length,Fr=0;Fr<jr;Fr++)he.call(void 0,It[Fr],De&&De[Fr],P)}sw.prototype.cancel=function(){if(this.i=a0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let P of this.g.values())P.cancel();this.g.clear()}};var cw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cp(P){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,P instanceof Cp){this.h=P.h,tv(this,P.j),this.o=P.o,this.g=P.g,rv(this,P.s),this.l=P.l;var he=P.i,De=new fs;De.i=he.i,he.g&&(De.g=new Map(he.g),De.h=he.h),pb(this,De),this.m=P.m}else P&&(he=String(P).match(cw))?(this.h=!1,tv(this,he[1]||"",!0),this.o=nv(he[2]||""),this.g=nv(he[3]||"",!0),rv(this,he[4]),this.l=nv(he[5]||"",!0),pb(this,he[6]||"",!0),this.m=nv(he[7]||"")):(this.h=!1,this.i=new fs(null,this.h))}function Yd(P){return new Cp(P)}function tv(P,he,De){P.j=De?nv(he,!0):he,P.j&&(P.j=P.j.replace(/:$/,""))}function rv(P,he){if(he){if(isNaN(he=Number(he))||0>he)throw Error("Bad port number "+he);P.s=he}else P.s=null}function pb(P,he,De){var It,jr;he instanceof fs?(P.i=he,It=P.i,(jr=P.h)&&!It.j&&(Rp(It),It.i=null,It.g.forEach(function(Fr,Xr){var Yn=Xr.toLowerCase();Xr!=Yn&&(mb(this,Xr),gb(this,Yn,Fr))},It)),It.j=jr):(De||(he=fh(he,kp)),P.i=new fs(he,P.h))}function Uo(P,he,De){P.i.set(he,De)}function o0(P){return Uo(P,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),P}function nv(P,he){return P?he?decodeURI(P.replace(/%25/g,"%2525")):decodeURIComponent(P):""}function fh(P,he,De){return typeof P=="string"?(P=encodeURI(P).replace(he,$g),De&&(P=P.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P):null}function $g(P){return"%"+((P=P.charCodeAt(0))>>4&15).toString(16)+(15&P).toString(16)}Cp.prototype.toString=function(){var P=[],he=this.j;he&&P.push(fh(he,Bg,!0),":");var De=this.g;return(De||he=="file")&&(P.push("//"),(he=this.o)&&P.push(fh(he,Bg,!0),"@"),P.push(encodeURIComponent(String(De)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),(De=this.s)!=null&&P.push(":",String(De))),(De=this.l)&&(this.g&&De.charAt(0)!="/"&&P.push("/"),P.push(fh(De,De.charAt(0)=="/"?iv:l0,!0))),(De=this.i.toString())&&P.push("?",De),(De=this.m)&&P.push("#",fh(De,Xd)),P.join("")};var Bg=/[#\/\?@]/g,l0=/[#\?:]/g,iv=/[#\?]/g,kp=/[#\?@]/g,Xd=/#/g;function fs(P,he){this.h=this.g=null,this.i=P||null,this.j=!!he}function Rp(P){P.g||(P.g=new Map,P.h=0,P.i&&function(he,De){if(he){he=he.split("&");for(var It=0;It<he.length;It++){var jr=he[It].indexOf("="),Fr=null;if(0<=jr){var Xr=he[It].substring(0,jr);Fr=he[It].substring(jr+1)}else Xr=he[It];De(Xr,Fr?decodeURIComponent(Fr.replace(/\+/g," ")):"")}}}(P.i,function(he,De){P.add(decodeURIComponent(he.replace(/\+/g," ")),De)}))}function mb(P,he){Rp(P),he=Om(P,he),P.g.has(he)&&(P.i=null,P.h-=P.g.get(he).length,P.g.delete(he))}function hw(P,he){return Rp(P),he=Om(P,he),P.g.has(he)}function gb(P,he,De){mb(P,he),0<De.length&&(P.i=null,P.g.set(Om(P,he),Vn(De)),P.h+=De.length)}function Om(P,he){return he=String(he),P.j&&(he=he.toLowerCase()),he}function Vf(P,he,De,It,jr){try{jr&&(jr.onload=null,jr.onerror=null,jr.onabort=null,jr.ontimeout=null),It(De)}catch{}}function yb(){this.g=new db}function sv(P){this.l=P.Ub||null,this.j=P.eb||!1}function u0(P,he){Yo.call(this),this.D=P,this.o=he,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dm(P){P.j.read().then(P.Pa.bind(P)).catch(P.ga.bind(P))}function qg(P){P.readyState=4,P.l=null,P.j=null,P.v=null,zg(P)}function zg(P){P.onreadystatechange&&P.onreadystatechange.call(P)}function dw(P){let he="";return Vt(P,function(De,It){he+=It+":"+De+`\r
`}),he}function Uf(P,he,De){e:{for(It in De){var It=!1;break e}It=!0}It||(De=dw(De),typeof P=="string"?De!=null&&encodeURIComponent(String(De)):Uo(P,he,De))}function ml(P){Yo.call(this),this.headers=new Map,this.o=P||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(s=fs.prototype).add=function(P,he){Rp(this),this.i=null,P=Om(this,P);var De=this.g.get(P);return De||this.g.set(P,De=[]),De.push(he),this.h+=1,this},s.forEach=function(P,he){Rp(this),this.g.forEach(function(De,It){De.forEach(function(jr){P.call(he,jr,It,this)},this)},this)},s.na=function(){Rp(this);let P=Array.from(this.g.values()),he=Array.from(this.g.keys()),De=[];for(let It=0;It<he.length;It++){let jr=P[It];for(let Fr=0;Fr<jr.length;Fr++)De.push(he[It])}return De},s.V=function(P){Rp(this);let he=[];if(typeof P=="string")hw(this,P)&&(he=he.concat(this.g.get(Om(this,P))));else{P=Array.from(this.g.values());for(let De=0;De<P.length;De++)he=he.concat(P[De])}return he},s.set=function(P,he){return Rp(this),this.i=null,hw(this,P=Om(this,P))&&(this.h-=this.g.get(P).length),this.g.set(P,[he]),this.h+=1,this},s.get=function(P,he){return P&&0<(P=this.V(P)).length?String(P[0]):he},s.toString=function(){if(this.i)return this.i;if(!this.g)return"";let P=[],he=Array.from(this.g.keys());for(var De=0;De<he.length;De++){var It=he[De];let Fr=encodeURIComponent(String(It)),Xr=this.V(It);for(It=0;It<Xr.length;It++){var jr=Fr;Xr[It]!==""&&(jr+="="+encodeURIComponent(String(Xr[It]))),P.push(jr)}}return this.i=P.join("&")},Rr(sv,rw),sv.prototype.g=function(){return new u0(this.l,this.j)},sv.prototype.i=(h={},function(){return h}),Rr(u0,Yo),(s=u0.prototype).open=function(P,he){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=P,this.A=he,this.readyState=1,zg(this)},s.send=function(P){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let he={headers:this.u,method:this.B,credentials:this.m,cache:void 0};P&&(he.body=P),(this.D||E).fetch(new Request(this.A,he)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qg(this)),this.readyState=0},s.Sa=function(P){if(this.g&&(this.l=P,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=P.headers,this.readyState=2,zg(this)),this.g&&(this.readyState=3,zg(this),this.g)))if(this.responseType==="arraybuffer")P.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(E.ReadableStream!==void 0&&"body"in P){if(this.j=P.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dm(this)}else P.text().then(this.Ra.bind(this),this.ga.bind(this))},s.Pa=function(P){if(this.g){if(this.o&&P.value)this.response.push(P.value);else if(!this.o){var he=P.value?P.value:new Uint8Array(0);(he=this.v.decode(he,{stream:!P.done}))&&(this.response=this.responseText+=he)}P.done?qg(this):zg(this),this.readyState==3&&Dm(this)}},s.Ra=function(P){this.g&&(this.response=this.responseText=P,qg(this))},s.Qa=function(P){this.g&&(this.response=P,qg(this))},s.ga=function(){this.g&&qg(this)},s.setRequestHeader=function(P,he){this.u.append(P,he)},s.getResponseHeader=function(P){return this.h&&this.h.get(P.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";let P=[],he=this.h.entries();for(var De=he.next();!De.done;)P.push((De=De.value)[0]+": "+De[1]),De=he.next();return P.join(`\r
`)},Object.defineProperty(u0.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(P){this.m=P?"include":"same-origin"}}),Rr(ml,Yo);var fw=/^https?$/i,vb=["POST","PUT"];function pw(P,he){P.h=!1,P.g&&(P.j=!0,P.g.abort(),P.j=!1),P.l=he,P.m=5,c0(P),Hg(P)}function c0(P){P.A||(P.A=!0,_c(P,"complete"),_c(P,"error"))}function Gg(P){if(P.h&&w!==void 0&&(!P.v[1]||ud(P)!=4||P.Z()!=2)){if(P.u&&ud(P)==4)lb(P.Ea,0,P);else if(_c(P,"readystatechange"),ud(P)==4){P.h=!1;try{let Xr=P.Z();switch(Xr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var he,De,It=!0;break;default:It=!1}if(!(he=It)){if(De=Xr===0){var jr=String(P.D).match(cw)[1]||null;!jr&&E.self&&E.self.location&&(jr=E.self.location.protocol.slice(0,-1)),De=!fw.test(jr?jr.toLowerCase():"")}he=De}if(he)_c(P,"complete"),_c(P,"success");else{P.m=6;try{var Fr=2<ud(P)?P.g.statusText:""}catch{Fr=""}P.l=Fr+" ["+P.Z()+"]",c0(P)}}finally{Hg(P)}}}}function Hg(P,he){if(P.g){wb(P);let De=P.g,It=P.v[0]?()=>{}:null;P.g=null,P.v=null,he||_c(P,"ready");try{De.onreadystatechange=It}catch{}}}function wb(P){P.I&&(E.clearTimeout(P.I),P.I=null)}function ud(P){return P.g?P.g.readyState:0}function mw(P){try{if(!P.g)return null;if("response"in P.g)return P.g.response;switch(P.H){case"":case"text":return P.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in P.g)return P.g.mozResponseArrayBuffer}return null}catch{return null}}function av(P,he,De){return De&&De.internalChannelParams&&De.internalChannelParams[P]||he}function h0(P){this.Aa=0,this.i=[],this.j=new Qy,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=av("failFast",!1,P),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=av("baseRetryDelayMs",5e3,P),this.cb=av("retryDelaySeedMs",1e4,P),this.Wa=av("forwardChannelMaxRetries",2,P),this.wa=av("forwardChannelRequestTimeoutMs",2e4,P),this.pa=P&&P.xmlHttpFactory||void 0,this.Xa=P&&P.Tb||void 0,this.Ca=P&&P.useFetchStreams||!1,this.L=void 0,this.J=P&&P.supportsCrossDomainXhr||!1,this.K="",this.h=new sw(P&&P.concurrentRequestLimit),this.Da=new yb,this.P=P&&P.fastHandshake||!1,this.O=P&&P.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=P&&P.Rb||!1,P&&P.xa&&this.j.xa(),P&&P.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&P&&P.detectBufferingProxy||!1,this.ja=void 0,P&&P.longPollingTimeout&&0<P.longPollingTimeout&&(this.ja=P.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function $f(P){if(Mm(P),P.G==3){var he=P.U++,De=Yd(P.I);if(Uo(De,"SID",P.K),Uo(De,"RID",he),Uo(De,"TYPE","terminate"),Wg(P,De),(he=new Jd(P,P.j,he)).L=2,he.v=o0(Yd(De)),De=!1,E.navigator&&E.navigator.sendBeacon)try{De=E.navigator.sendBeacon(he.v.toString(),"")}catch{}!De&&E.Image&&(new Image().src=he.v,De=!0),De||(he.g=vw(he.j,null),he.g.ea(he.v)),he.F=Date.now(),Xy(he)}_b(P)}function Kg(P){P.g&&(d0(P),P.g.cancel(),P.g=null)}function Mm(P){Kg(P),P.u&&(E.clearTimeout(P.u),P.u=null),f0(P),P.h.cancel(),P.s&&(typeof P.s=="number"&&E.clearTimeout(P.s),P.s=null)}function hu(P){if(!aw(P.h)&&!P.s){P.s=!0;var he=P.Ga;By||qy(),Mf||(By(),Mf=!0),Lf.add(he,P),P.B=0}}function bb(P,he){var De;De=he?he.l:P.U++;let It=Yd(P.I);Uo(It,"SID",P.K),Uo(It,"RID",De),Uo(It,"AID",P.T),Wg(P,It),P.m&&P.o&&Uf(It,P.m,P.o),De=new Jd(P,P.j,De,P.B+1),P.m===null&&(De.H=P.o),he&&(P.i=he.D.concat(P.i)),he=gw(P,De,1e3),De.I=Math.round(.5*P.wa)+Math.round(.5*P.wa*Math.random()),s0(P.h,De),Ug(De,It,he)}function Wg(P,he){P.H&&Vt(P.H,function(De,It){Uo(he,It,De)}),P.l&&uw({},function(De,It){Uo(he,It,De)})}function gw(P,he,De){De=Math.min(P.i.length,De);var It=P.l?Bt(P.l.Na,P.l,P):null;e:{var jr=P.i;let Fr=-1;for(;;){let Xr=["count="+De];Fr==-1?0<De?(Fr=jr[0].g,Xr.push("ofs="+Fr)):Fr=0:Xr.push("ofs="+Fr);let Yn=!0;for(let Zn=0;Zn<De;Zn++){let la=jr[Zn].g,ya=jr[Zn].map;if(0>(la-=Fr))Fr=Math.max(0,jr[Zn].g-100),Yn=!1;else try{(function(vo,ku,ro){let Xu=ro||"";try{uw(vo,function(no,Ja){let Ko=no;J(no)&&(Ko=tw(no)),ku.push(Xu+Ja+"="+encodeURIComponent(Ko))})}catch(no){throw ku.push(Xu+"type="+encodeURIComponent("_badmap")),no}})(ya,Xr,"req"+la+"_")}catch{It&&It(ya)}}if(Yn){It=Xr.join("&");break e}}}return P=P.i.splice(0,De),he.D=P,It}function Sb(P){if(!P.g&&!P.u){P.Y=1;var he=P.Fa;By||qy(),Mf||(By(),Mf=!0),Lf.add(he,P),P.v=0}}function Lm(P){return!P.g&&!P.u&&!(3<=P.v)&&(P.Y++,P.u=dh(Bt(P.Fa,P),Eb(P,P.v)),P.v++,!0)}function d0(P){P.A!=null&&(E.clearTimeout(P.A),P.A=null)}function yw(P){P.g=new Jd(P,P.j,"rpc",P.Y),P.m===null&&(P.g.H=P.o),P.g.O=0;var he=Yd(P.qa);Uo(he,"RID","rpc"),Uo(he,"SID",P.K),Uo(he,"AID",P.T),Uo(he,"CI",P.F?"0":"1"),!P.F&&P.ja&&Uo(he,"TO",P.ja),Uo(he,"TYPE","xmlhttp"),Wg(P,he),P.m&&P.o&&Uf(he,P.m,P.o),P.L&&(P.g.I=P.L);var De=P.g;P=P.ia,De.L=1,De.v=o0(Yd(he)),De.m=null,De.P=!0,Ho(De,P)}function f0(P){P.C!=null&&(E.clearTimeout(P.C),P.C=null)}function Bf(P,he){var De=null;if(P.g==he){f0(P),d0(P),P.g=null;var It=2}else{if(!ev(P.h,he))return;De=he.D,lw(P.h,he),It=1}if(P.G!=0){if(he.o)if(It==1){De=he.m?he.m.length:0,he=Date.now()-he.F;var jr,Fr=P.B;_c(It=Am(),new ld(It,De)),hu(P)}else Sb(P);else if((Fr=he.s)==3||Fr==0&&0<he.X||!(It==1&&(jr=he,!(ow(P.h)>=P.h.j-(P.s?1:0))&&(P.s?(P.i=jr.D.concat(P.i),!0):P.G!=1&&P.G!=2&&!(P.B>=(P.Va?0:P.Wa))&&(P.s=dh(Bt(P.Ga,P,jr),Eb(P,P.B)),P.B++,!0)))||It==2&&Lm(P)))switch(De&&0<De.length&&((he=P.h).i=he.i.concat(De)),Fr){case 1:jm(P,5);break;case 4:jm(P,10);break;case 3:jm(P,6);break;default:jm(P,2)}}}function Eb(P,he){let De=P.Ta+Math.floor(Math.random()*P.cb);return P.isActive()||(De*=2),De*he}function jm(P,he){if(P.j.info("Error code "+he),he==2){var De=Bt(P.fb,P),It=P.Xa;let jr=!It;It=new Cp(It||"//www.google.com/images/cleardot.gif"),E.location&&E.location.protocol=="http"||tv(It,"https"),o0(It),jr?function(Fr,Xr){let Yn=new Qy;if(E.Image){let Zn=new Image;Zn.onload=ir(Vf,Yn,"TestLoadImage: loaded",!0,Xr,Zn),Zn.onerror=ir(Vf,Yn,"TestLoadImage: error",!1,Xr,Zn),Zn.onabort=ir(Vf,Yn,"TestLoadImage: abort",!1,Xr,Zn),Zn.ontimeout=ir(Vf,Yn,"TestLoadImage: timeout",!1,Xr,Zn),E.setTimeout(function(){Zn.ontimeout&&Zn.ontimeout()},1e4),Zn.src=Fr}else Xr(!1)}(It.toString(),De):function(Fr,Xr){let Yn=new Qy,Zn=new AbortController,la=setTimeout(()=>{Zn.abort(),Vf(Yn,"TestPingServer: timeout",!1,Xr)},1e4);fetch(Fr,{signal:Zn.signal}).then(ya=>{clearTimeout(la),ya.ok?Vf(Yn,"TestPingServer: ok",!0,Xr):Vf(Yn,"TestPingServer: server error",!1,Xr)}).catch(()=>{clearTimeout(la),Vf(Yn,"TestPingServer: error",!1,Xr)})}(It.toString(),De)}else jl(2);P.G=0,P.l&&P.l.sa(he),_b(P),Mm(P)}function _b(P){if(P.G=0,P.ka=[],P.l){let he=a0(P.h);(he.length!=0||P.i.length!=0)&&(oi(P.ka,he),oi(P.ka,P.i),P.h.i.length=0,Vn(P.i),P.i.length=0),P.l.ra()}}function p0(P,he,De){var It=De instanceof Cp?Yd(De):new Cp(De);if(It.g!="")he&&(It.g=he+"."+It.g),rv(It,It.s);else{var jr=E.location;It=jr.protocol,he=he?he+"."+jr.hostname:jr.hostname,jr=+jr.port;var Fr=new Cp(null);It&&tv(Fr,It),he&&(Fr.g=he),jr&&rv(Fr,jr),De&&(Fr.l=De),It=Fr}return De=P.D,he=P.ya,De&&he&&Uo(It,De,he),Uo(It,"VER",P.la),Wg(P,It),It}function vw(P,he,De){if(he&&!P.J)throw Error("Can't create secondary domain capable XhrIo object.");return(he=new ml(P.Ca&&!P.pa?new sv({eb:De}):P.pa)).Ha(P.J),he}function m0(){}function g0(){}function Ic(P,he){Yo.call(this),this.g=new h0(he),this.l=P,this.h=he&&he.messageUrlParams||null,P=he&&he.messageHeaders||null,he&&he.clientProtocolHeaderRequired&&(P?P["X-Client-Protocol"]="webchannel":P={"X-Client-Protocol":"webchannel"}),this.g.o=P,P=he&&he.initMessageHeaders||null,he&&he.messageContentType&&(P?P["X-WebChannel-Content-Type"]=he.messageContentType:P={"X-WebChannel-Content-Type":he.messageContentType}),he&&he.va&&(P?P["X-WebChannel-Client-Profile"]=he.va:P={"X-WebChannel-Client-Profile":he.va}),this.g.S=P,(P=he&&he.Sb)&&!Gs(P)&&(this.g.m=P),this.v=he&&he.supportsCrossDomainXhr||!1,this.u=he&&he.sendRawJson||!1,(he=he&&he.httpSessionIdParam)&&!Gs(he)&&(this.g.D=he,(P=this.h)!==null&&he in P&&he in(P=this.h)&&delete P[he]),this.j=new Fm(this)}function ww(P){Xv.call(this),P.__headers__&&(this.headers=P.__headers__,this.statusCode=P.__status__,delete P.__headers__,delete P.__status__);var he=P.__sm__;if(he){e:{for(let De in he){P=De;break e}P=void 0}(this.i=P)&&(P=this.i,he=he!==null&&P in he?he[P]:void 0),this.data=he}else this.data=P}function Ib(){Pm.call(this),this.status=1}function Fm(P){this.g=P}(s=ml.prototype).Ha=function(P){this.J=P},s.ea=function(P,he,De,It){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+P);he=he?he.toUpperCase():"GET",this.D=P,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():t.g(),this.v=this.o?jg(this.o):jg(t),this.g.onreadystatechange=Bt(this.Ea,this);try{this.B=!0,this.g.open(he,String(P),!0),this.B=!1}catch(Fr){pw(this,Fr);return}if(P=De||"",De=new Map(this.headers),It)if(Object.getPrototypeOf(It)===Object.prototype)for(var jr in It)De.set(jr,It[jr]);else if(typeof It.keys=="function"&&typeof It.get=="function")for(let Fr of It.keys())De.set(Fr,It.get(Fr));else throw Error("Unknown input type for opt_headers: "+String(It));for(let[Fr,Xr]of(It=Array.from(De.keys()).find(Yn=>Yn.toLowerCase()=="content-type"),jr=E.FormData&&P instanceof E.FormData,!(0<=Array.prototype.indexOf.call(vb,he,void 0))||It||jr||De.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),De))this.g.setRequestHeader(Fr,Xr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wb(this),this.u=!0,this.g.send(P),this.u=!1}catch(Fr){pw(this,Fr)}},s.abort=function(P){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=P||7,_c(this,"complete"),_c(this,"abort"),Hg(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hg(this,!0)),ml.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Gg(this):this.bb())},s.bb=function(){Gg(this)},s.isActive=function(){return!!this.g},s.Z=function(){try{return 2<ud(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(P){if(this.g){var he=this.g.responseText;return P&&he.indexOf(P)==0&&(he=he.substring(P.length)),hb(he)}},s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)},(s=h0.prototype).la=8,s.G=1,s.connect=function(P,he,De,It){jl(0),this.W=P,this.H=he||{},De&&It!==void 0&&(this.H.OSID=De,this.H.OAID=It),this.F=this.X,this.I=p0(this,null,this.W),hu(this)},s.Ga=function(P){if(this.s)if(this.s=null,this.G==1){if(!P){this.U=Math.floor(1e5*Math.random()),P=this.U++;let jr=new Jd(this,this.j,P),Fr=this.o;if(this.S&&(Fr?Ar(Fr=er(Fr),this.S):Fr=this.S),this.m!==null||this.O||(jr.H=Fr,Fr=null),this.P)e:{for(var he=0,De=0;De<this.i.length;De++){t:{var It=this.i[De];if("__data__"in It.map&&typeof(It=It.map.__data__)=="string"){It=It.length;break t}It=void 0}if(It===void 0)break;if(4096<(he+=It)){he=De;break e}if(he===4096||De===this.i.length-1){he=De+1;break e}}he=1e3}else he=1e3;he=gw(this,jr,he),Uo(De=Yd(this.I),"RID",P),Uo(De,"CVER",22),this.D&&Uo(De,"X-HTTP-Session-Id",this.D),Wg(this,De),Fr&&(this.O?he="headers="+encodeURIComponent(String(dw(Fr)))+"&"+he:this.m&&Uf(De,this.m,Fr)),s0(this.h,jr),this.Ua&&Uo(De,"TYPE","init"),this.P?(Uo(De,"$req",he),Uo(De,"SID","null"),jr.T=!0,Ug(jr,De,null)):Ug(jr,De,he),this.G=2}}else this.G==3&&(P?bb(this,P):this.i.length==0||aw(this.h)||bb(this))},s.Fa=function(){if(this.u=null,yw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var P=2*this.R;this.j.info("BP detection timer enabled: "+P),this.A=dh(Bt(this.ab,this),P)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jl(10),Kg(this),yw(this))},s.Za=function(){this.C!=null&&(this.C=null,Kg(this),Lm(this),jl(19))},s.fb=function(P){P?(this.j.info("Successfully pinged google.com"),jl(2)):(this.j.info("Failed to ping google.com"),jl(1))},s.isActive=function(){return!!this.l&&this.l.isActive(this)},(s=m0.prototype).ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){},g0.prototype.g=function(P,he){return new Ic(P,he)},Rr(Ic,Yo),Ic.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ic.prototype.close=function(){$f(this.g)},Ic.prototype.o=function(P){var he=this.g;if(typeof P=="string"){var De={};De.__data__=P,P=De}else this.u&&((De={}).__data__=tw(P),P=De);he.i.push(new Zy(he.Ya++,P)),he.G==3&&hu(he)},Ic.prototype.N=function(){this.g.l=null,delete this.j,$f(this.g),delete this.g,Ic.aa.N.call(this)},Rr(ww,Xv),Rr(Ib,Pm),Rr(Fm,m0),Fm.prototype.ua=function(){_c(this.g,"a")},Fm.prototype.ta=function(P){_c(this.g,new ww(P))},Fm.prototype.sa=function(P){_c(this.g,new Ib)},Fm.prototype.ra=function(){_c(this.g,"b")},g0.prototype.createWebChannel=g0.prototype.g,Ic.prototype.send=Ic.prototype.o,Ic.prototype.open=Ic.prototype.m,Ic.prototype.close=Ic.prototype.close,K=$t.createWebChannelTransport=function(){return new g0},U=$t.getStatEventTarget=function(){return Am()},N=$t.Event=xp,C=$t.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},t0.NO_ERROR=0,t0.TIMEOUT=8,t0.HTTP_ERROR=6,x=$t.ErrorCode=t0,fb.COMPLETE="complete",I=$t.EventType=fb,Jy.EventType=Rm,Rm.OPEN="a",Rm.CLOSE="b",Rm.ERROR="c",Rm.MESSAGE="d",Yo.prototype.listen=Yo.prototype.K,k=$t.WebChannel=Jy,$t.FetchXmlHttpFactory=sv,ml.prototype.listenOnce=ml.prototype.L,ml.prototype.getLastError=ml.prototype.Ka,ml.prototype.getLastErrorCode=ml.prototype.Ba,ml.prototype.getStatus=ml.prototype.Z,ml.prototype.getResponseJson=ml.prototype.Oa,ml.prototype.getResponseText=ml.prototype.oa,ml.prototype.send=ml.prototype.ea,ml.prototype.setWithCredentials=ml.prototype.Ha,S=$t.XhrIo=ml}).apply(At!==void 0?At:typeof zr<"u"?zr:typeof window<"u"?window:{});var Ut=M(6195).Buffer;let Jr="@firebase/firestore";class Sr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");let Qn="11.0.2",zn=new wn("@firebase/firestore");function Qr(){return zn.logLevel}function yr(h,...t){if(zn.logLevel<=j.DEBUG){let s=t.map($a);zn.debug(`Firestore (${Qn}): ${h}`,...s)}}function pi(h,...t){if(zn.logLevel<=j.ERROR){let s=t.map($a);zn.error(`Firestore (${Qn}): ${h}`,...s)}}function wi(h,...t){if(zn.logLevel<=j.WARN){let s=t.map($a);zn.warn(`Firestore (${Qn}): ${h}`,...s)}}function $a(h){if(typeof h=="string")return h;try{return JSON.stringify(h)}catch{return h}}function Lr(h="Unexpected state"){let t=`FIRESTORE (${Qn}) INTERNAL ASSERTION FAILED: `+h;throw pi(t),Error(t)}let Br={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nn extends Ce{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class As{constructor(){this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}}class ql{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Jo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable(()=>s(Sr.UNAUTHENTICATED))}shutdown(){}}class qs{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class xl{constructor(t){this.t=t,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){this.o===void 0||Lr();let u=this.i,f=J=>this.i!==u?(u=this.i,s(J)):Promise.resolve(),w=new As;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new As,t.enqueueRetryable(()=>f(this.currentUser))};let E=()=>{let J=w;t.enqueueRetryable(async()=>{await J.promise,await f(this.currentUser)})},$=J=>{yr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.o&&(this.auth.addAuthTokenListener(this.o),E())};this.t.onInit(J=>$(J)),setTimeout(()=>{if(!this.auth){let J=this.t.getImmediate({optional:!0});J?$(J):(yr("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new As)}},0),E()}getToken(){let t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(u=>this.i!==t?(yr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?(typeof u.accessToken=="string"||Lr(),new ql(u.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return t===null||typeof t=="string"||Lr(),new Sr(t)}}class Au{constructor(t,s,u){this.l=t,this.h=s,this.P=u,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class tc{constructor(t,s,u){this.l=t,this.h=s,this.P=u}getToken(){return Promise.resolve(new Au(this.l,this.h,this.P))}start(t,s){t.enqueueRetryable(()=>s(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $o{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rc{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,s){this.o===void 0||Lr();let u=w=>{w.error!=null&&yr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${w.error.message}`);let E=w.token!==this.R;return this.R=w.token,yr("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?s(w.token):Promise.resolve()};this.o=w=>{t.enqueueRetryable(()=>u(w))};let f=w=>{yr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=w,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(w=>f(w)),setTimeout(()=>{if(!this.appCheck){let w=this.A.getImmediate({optional:!0});w?f(w):yr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(s=>s?(typeof s.token=="string"||Lr(),this.R=s.token,new $o(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class ru{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/t.length)*t.length,u="";for(;u.length<20;){let f=function(w){let E=typeof zr<"u"&&(zr.crypto||zr.msCrypto),$=new Uint8Array(40);if(E&&typeof E.getRandomValues=="function")E.getRandomValues($);else for(let J=0;J<40;J++)$[J]=Math.floor(256*Math.random());return $}(0);for(let w=0;w<f.length;++w)u.length<20&&f[w]<s&&(u+=t.charAt(f[w]%t.length))}return u}}function ci(h,t){return h<t?-1:h>t?1:0}function Zo(h,t,s){return h.length===t.length&&h.every((u,f)=>s(u,t[f]))}class ta{static now(){return ta.fromMillis(Date.now())}static fromDate(t){return ta.fromMillis(t.getTime())}static fromMillis(t){let s=Math.floor(t/1e3);return new ta(s,Math.floor(1e6*(t-1e3*s)))}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0||s>=1e9)throw new Nn(Br.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<-62135596800||t>=253402300800)throw new Nn(Br.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ci(this.nanoseconds,t.nanoseconds):ci(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bi{static fromTimestamp(t){return new bi(t)}static min(){return new bi(new ta(0,0))}static max(){return new bi(new ta(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mo{constructor(t,s,u){s===void 0?s=0:s>t.length&&Lr(),u===void 0?u=t.length-s:u>t.length-s&&Lr(),this.segments=t,this.offset=s,this.len=u}get length(){return this.len}isEqual(t){return Mo.comparator(this,t)===0}child(t){let s=this.segments.slice(this.offset,this.limit());return t instanceof Mo?t.forEach(u=>{s.push(u)}):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,u=this.limit();s<u;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){let u=Math.min(t.length,s.length);for(let f=0;f<u;f++){let w=t.get(f),E=s.get(f);if(w<E)return-1;if(w>E)return 1}return t.length<s.length?-1:t.length>s.length?1:0}}class Ts extends Mo{construct(t,s,u){return new Ts(t,s,u)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let s=[];for(let u of t){if(u.indexOf("//")>=0)throw new Nn(Br.INVALID_ARGUMENT,`Invalid segment (${u}). Paths must not contain // in them.`);s.push(...u.split("/").filter(f=>f.length>0))}return new Ts(s)}static emptyPath(){return new Ts([])}}let io=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends Mo{construct(t,s,u){return new Ns(t,s,u)}static isValidIdentifier(t){return io.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ns(["__name__"])}static fromServerFormat(t){let s=[],u="",f=0,w=()=>{if(u.length===0)throw new Nn(Br.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(u),u=""},E=!1;for(;f<t.length;){let $=t[f];if($==="\\"){if(f+1===t.length)throw new Nn(Br.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let J=t[f+1];if(J!=="\\"&&J!=="."&&J!=="`")throw new Nn(Br.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);u+=J,f+=2}else $==="`"?E=!E:$!=="."||E?u+=$:w(),f++}if(w(),E)throw new Nn(Br.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ns(s)}static emptyPath(){return new Ns([])}}class An{constructor(t){this.path=t}static fromPath(t){return new An(Ts.fromString(t))}static fromName(t){return new An(Ts.fromString(t).popFirst(5))}static empty(){return new An(Ts.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ts.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return Ts.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new An(new Ts(t.slice()))}}class Qa{constructor(t,s,u,f){this.indexId=t,this.collectionGroup=s,this.fields=u,this.indexState=f}}function zl(h){return h.fields.find(t=>t.kind===2)}function ii(h){return h.fields.filter(t=>t.kind!==2)}Qa.UNKNOWN_ID=-1;class ba{constructor(t,s){this.fieldPath=t,this.kind=s}}class Gl{constructor(t,s){this.sequenceNumber=t,this.offset=s}static empty(){return new Gl(0,so.min())}}function Hl(h,t){let s=h.toTimestamp().seconds,u=h.toTimestamp().nanoseconds+1;return new so(bi.fromTimestamp(u===1e9?new ta(s+1,0):new ta(s,u)),An.empty(),t)}function nu(h){return new so(h.readTime,h.key,-1)}class so{constructor(t,s,u){this.readTime=t,this.documentKey=s,this.largestBatchId=u}static min(){return new so(bi.min(),An.empty(),-1)}static max(){return new so(bi.max(),An.empty(),-1)}}function Cl(h,t){let s=h.readTime.compareTo(t.readTime);return s!==0||(s=An.comparator(h.documentKey,t.documentKey))!==0?s:ci(h.largestBatchId,t.largestBatchId)}let fc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}async function pa(h){if(h.code!==Br.FAILED_PRECONDITION||h.message!==fc)throw h;yr("LocalStore","Unexpectedly lost primary lease")}class Qt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&Lr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new Qt((u,f)=>{this.nextCallback=w=>{this.wrapSuccess(t,w).next(u,f)},this.catchCallback=w=>{this.wrapFailure(s,w).next(u,f)}})}toPromise(){return new Promise((t,s)=>{this.next(t,s)})}wrapUserFunction(t){try{let s=t();return s instanceof Qt?s:Qt.resolve(s)}catch(s){return Qt.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction(()=>t(s)):Qt.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction(()=>t(s)):Qt.reject(s)}static resolve(t){return new Qt((s,u)=>{s(t)})}static reject(t){return new Qt((s,u)=>{u(t)})}static waitFor(t){return new Qt((s,u)=>{let f=0,w=0,E=!1;t.forEach($=>{++f,$.next(()=>{++w,E&&w===f&&s()},J=>u(J))}),E=!0,w===f&&s()})}static or(t){let s=Qt.resolve(!1);for(let u of t)s=s.next(f=>f?Qt.resolve(f):u());return s}static forEach(t,s){let u=[];return t.forEach((f,w)=>{u.push(s.call(this,f,w))}),this.waitFor(u)}static mapArray(t,s){return new Qt((u,f)=>{let w=t.length,E=Array(w),$=0;for(let J=0;J<w;J++){let ge=J;s(t[ge]).next(rt=>{E[ge]=rt,++$===w&&u(E)},rt=>f(rt))}})}static doWhile(t,s){return new Qt((u,f)=>{let w=()=>{t()===!0?s().next(()=>{w()},f):u()};w()})}}class Sa{static open(t,s,u,f){try{return new Sa(s,t.transaction(f,u))}catch(w){throw new Bo(s,w)}}constructor(t,s){this.action=t,this.transaction=s,this.aborted=!1,this.V=new As,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{s.error?this.V.reject(new Bo(t,s.error)):this.V.resolve()},this.transaction.onerror=u=>{let f=Nu(u.target.error);this.V.reject(new Bo(t,f))}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(yr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){return new xs(this.transaction.objectStore(t))}}class ma{static delete(t){return yr("SimpleDb","Removing database:",t),Rs(window.indexedDB.deleteDatabase(t)).toPromise()}static p(){if(!we())return!1;if(ma.S())return!0;let t=Ne(),s=ma.D(t),u=wl(t);return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||0<s&&s<10||0<u&&u<4.5)}static S(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.v)==="YES"}static C(t,s){return t.store(s)}static D(t){let s=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(s?s[1].split("_").slice(0,2).join("."):"-1")}constructor(t,s,u){this.name=t,this.version=s,this.F=u,ma.D(Ne())===12.2&&pi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(t){return this.db||(yr("SimpleDb","Opening database:",this.name),this.db=await new Promise((s,u)=>{let f=indexedDB.open(this.name,this.version);f.onsuccess=w=>{s(w.target.result)},f.onblocked=()=>{u(new Bo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=w=>{let E=w.target.error;E.name==="VersionError"?u(new Nn(Br.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):E.name==="InvalidStateError"?u(new Nn(Br.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+E)):u(new Bo(t,E))},f.onupgradeneeded=w=>{yr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',w.oldVersion);let E=w.target.result;this.F.O(E,f.transaction,w.oldVersion,this.version).next(()=>{yr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=s=>this.N(s)),this.db}L(t){this.N=t,this.db&&(this.db.onversionchange=s=>t(s))}async runTransaction(t,s,u,f){let w=s==="readonly",E=0;for(;;){++E;try{this.db=await this.M(t);let $=Sa.open(this.db,t,w?"readonly":"readwrite",u),J=f($).next(ge=>($.g(),ge)).catch(ge=>($.abort(ge),Qt.reject(ge))).toPromise();return J.catch(()=>{}),await $.m,J}catch($){let J=$.name!=="FirebaseError"&&E<3;if(yr("SimpleDb","Transaction failed with error:",$.message,"Retrying:",J),this.close(),!J)return Promise.reject($)}}}close(){this.db&&this.db.close(),this.db=void 0}}function wl(h){let t=h.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}class pc{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return Rs(this.B.delete())}}class Bo extends Nn{constructor(t,s){super(Br.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${s}`),this.name="IndexedDbTransactionError"}}function Kl(h){return h.name==="IndexedDbTransactionError"}class xs{constructor(t){this.store=t}put(t,s){let u;return s!==void 0?(yr("SimpleDb","PUT",this.store.name,t,s),u=this.store.put(s,t)):(yr("SimpleDb","PUT",this.store.name,"<auto-key>",t),u=this.store.put(t)),Rs(u)}add(t){return yr("SimpleDb","ADD",this.store.name,t,t),Rs(this.store.add(t))}get(t){return Rs(this.store.get(t)).next(s=>(s===void 0&&(s=null),yr("SimpleDb","GET",this.store.name,t,s),s))}delete(t){return yr("SimpleDb","DELETE",this.store.name,t),Rs(this.store.delete(t))}count(){return yr("SimpleDb","COUNT",this.store.name),Rs(this.store.count())}U(t,s){let u=this.options(t,s),f=u.index?this.store.index(u.index):this.store;if(typeof f.getAll=="function"){let w=f.getAll(u.range);return new Qt((E,$)=>{w.onerror=J=>{$(J.target.error)},w.onsuccess=J=>{E(J.target.result)}})}{let w=this.cursor(u),E=[];return this.W(w,($,J)=>{E.push(J)}).next(()=>E)}}G(t,s){let u=this.store.getAll(t,s===null?void 0:s);return new Qt((f,w)=>{u.onerror=E=>{w(E.target.error)},u.onsuccess=E=>{f(E.target.result)}})}j(t,s){yr("SimpleDb","DELETE ALL",this.store.name);let u=this.options(t,s);u.H=!1;let f=this.cursor(u);return this.W(f,(w,E,$)=>$.delete())}J(t,s){let u;s?u=t:(u={},s=t);let f=this.cursor(u);return this.W(f,s)}Y(t){let s=this.cursor({});return new Qt((u,f)=>{s.onerror=w=>{f(Nu(w.target.error))},s.onsuccess=w=>{let E=w.target.result;E?t(E.primaryKey,E.value).next($=>{$?E.continue():u()}):u()}})}W(t,s){let u=[];return new Qt((f,w)=>{t.onerror=E=>{w(E.target.error)},t.onsuccess=E=>{let $=E.target.result;if(!$)return void f();let J=new pc($),ge=s($.primaryKey,$.value,J);if(ge instanceof Qt){let rt=ge.catch(Bt=>(J.done(),Qt.reject(Bt)));u.push(rt)}J.isDone?f():J.K===null?$.continue():$.continue(J.K)}}).next(()=>Qt.waitFor(u))}options(t,s){let u;return t!==void 0&&(typeof t=="string"?u=t:s=t),{index:u,range:s}}cursor(t){let s="next";if(t.reverse&&(s="prev"),t.index){let u=this.store.index(t.index);return t.H?u.openKeyCursor(t.range,s):u.openCursor(t.range,s)}return this.store.openCursor(t.range,s)}}function Rs(h){return new Qt((t,s)=>{h.onsuccess=u=>{t(u.target.result)},h.onerror=u=>{s(Nu(u.target.error))}})}let Wl=!1;function Nu(h){let t=ma.D(Ne());if(t>=12.2&&t<13){let s="An internal error was encountered in the Indexed Database server";if(h.message.indexOf(s)>=0){let u=new Nn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${s}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wl||(Wl=!0,setTimeout(()=>{throw u},0)),u}}return h}class ol{constructor(t,s){this.asyncQueue=t,this.Z=s,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){yr("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{yr("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(s){Kl(s)?yr("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):await pa(s)}await this.X(6e4)})}}class rc{constructor(t,s){this.localStore=t,this.persistence=s}async ee(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>this.te(s,t))}te(t,s){let u=new Set,f=s,w=!0;return Qt.doWhile(()=>w===!0&&f>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(E=>{if(E!==null&&!u.has(E))return yr("IndexBackfiller",`Processing collection: ${E}`),this.ne(t,E,f).next($=>{f-=$,u.add(E)});w=!1})).next(()=>s-f)}ne(t,s,u){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,s).next(f=>this.localStore.localDocuments.getNextDocuments(t,s,f,u).next(w=>{let E=w.changes;return this.localStore.indexManager.updateIndexEntries(t,E).next(()=>this.re(f,w)).next($=>(yr("IndexBackfiller",`Updating offset: ${$}`),this.localStore.indexManager.updateCollectionGroup(t,s,$))).next(()=>E.size)}))}re(t,s){let u=t;return s.changes.forEach((f,w)=>{let E=nu(w);Cl(E,u)>0&&(u=E)}),new so(u.readTime,u.documentKey,Math.max(s.batchId,t.largestBatchId))}}class ho{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=u=>this.ie(u),this.se=u=>s.writeSequenceNumber(u))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}function Yc(h){return h==null}function Me(h){return h===0&&1/h==-1/0}function ct(h){return typeof h=="number"&&Number.isInteger(h)&&!Me(h)&&h<=Number.MAX_SAFE_INTEGER&&h>=Number.MIN_SAFE_INTEGER}function St(h){let t="";for(let s=0;s<h.length;s++)t.length>0&&(t+=""),t=function(u,f){let w=f,E=u.length;for(let $=0;$<E;$++){let J=u.charAt($);switch(J){case"\0":w+="";break;case"":w+="";break;default:w+=J}}return w}(h.get(s),t);return t+""}function Wt(h){let t=h.length;if(t>=2||Lr(),t===2)return h.charAt(0)===""&&h.charAt(1)===""||Lr(),Ts.emptyPath();let s=t-2,u=[],f="";for(let w=0;w<t;){let E=h.indexOf("",w);switch((E<0||E>s)&&Lr(),h.charAt(E+1)){case"":let $,J=h.substring(w,E);f.length===0?$=J:(f+=J,$=f,f=""),u.push($);break;case"":f+=h.substring(w,E)+"\0";break;case"":f+=h.substring(w,E+1);break;default:Lr()}w=E+2}return new Ts(u)}ho.oe=-1;let or=["userId","batchId"],Ir={},Tr=["prefixPath","collectionGroup","readTime","documentId"],Cr=["prefixPath","collectionGroup","documentId"],Yr=["collectionGroup","readTime","prefixPath","documentId"],qr=["canonicalId","targetId"],ln=["targetId","path"],Pn=["path","targetId"],Rn=["collectionId","parent"],mi=["indexId","uid"],Vi=["uid","sequenceNumber"],Dn=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ts=["indexId","uid","orderedDocumentKey"],Fs=["userId","collectionPath","documentId"],gi=["userId","collectionPath","largestBatchId"],as=["userId","collectionGroup","largestBatchId"],Zt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_i=[...Zt,"documentOverlays"],yi=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Wi=[...yi,"indexConfiguration","indexState","indexEntries"],Ui=[...Wi,"globals"];class Pi extends Pc{constructor(t,s){super(),this._e=t,this.currentSequenceNumber=s}}function $n(h,t){return ma.C(h._e,t)}function ws(h){let t=0;for(let s in h)Object.prototype.hasOwnProperty.call(h,s)&&t++;return t}function bs(h,t){for(let s in h)Object.prototype.hasOwnProperty.call(h,s)&&t(s,h[s])}function os(h){for(let t in h)if(Object.prototype.hasOwnProperty.call(h,t))return!1;return!0}class hi{constructor(t,s){this.comparator=t,this.root=s||T.EMPTY}insert(t,s){return new hi(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,T.BLACK,null,null))}remove(t){return new hi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,T.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){let u=this.comparator(t,s.key);if(u===0)return s.value;u<0?s=s.left:u>0&&(s=s.right)}return null}indexOf(t){let s=0,u=this.root;for(;!u.isEmpty();){let f=this.comparator(t,u.key);if(f===0)return s+u.left.size;f<0?u=u.left:(s+=u.left.size+1,u=u.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((s,u)=>(t(s,u),!1))}toString(){let t=[];return this.inorderTraversal((s,u)=>(t.push(`${s}:${u}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new xe(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new xe(this.root,t,this.comparator,!1)}getReverseIterator(){return new xe(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new xe(this.root,t,this.comparator,!0)}}class xe{constructor(t,s,u,f){this.isReverse=f,this.nodeStack=[];let w=1;for(;!t.isEmpty();)if(w=s?u(t.key,s):1,s&&f&&(w*=-1),w<0)t=this.isReverse?t.left:t.right;else{if(w===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class T{constructor(t,s,u,f,w){this.key=t,this.value=s,this.color=u??T.RED,this.left=f??T.EMPTY,this.right=w??T.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,u,f,w){return new T(t??this.key,s??this.value,u??this.color,f??this.left,w??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,u){let f=this,w=u(t,f.key);return(f=w<0?f.copy(null,null,null,f.left.insert(t,s,u),null):w===0?f.copy(null,s,null,null,null):f.copy(null,null,null,null,f.right.insert(t,s,u))).fixUp()}removeMin(){if(this.left.isEmpty())return T.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}remove(t,s){let u,f=this;if(0>s(t,f.key))f.left.isEmpty()||f.left.isRed()||f.left.left.isRed()||(f=f.moveRedLeft()),f=f.copy(null,null,null,f.left.remove(t,s),null);else{if(f.left.isRed()&&(f=f.rotateRight()),f.right.isEmpty()||f.right.isRed()||f.right.left.isRed()||(f=f.moveRedRight()),s(t,f.key)===0){if(f.right.isEmpty())return T.EMPTY;u=f.right.min(),f=f.copy(u.key,u.value,null,null,f.right.removeMin())}f=f.copy(null,null,null,null,f.right.remove(t,s))}return f.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t}rotateLeft(){let t=this.copy(null,null,T.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,T.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Lr();let t=this.left.check();if(t!==this.right.check())throw Lr();return t+(this.isRed()?0:1)}}T.EMPTY=null,T.RED=!0,T.BLACK=!1,T.EMPTY=new class{constructor(){this.size=0}get key(){throw Lr()}get value(){throw Lr()}get color(){throw Lr()}get left(){throw Lr()}get right(){throw Lr()}copy(h,t,s,u,f){return this}insert(h,t,s){return new T(h,t)}remove(h,t){return this}isEmpty(){return!0}inorderTraversal(h){return!1}reverseTraversal(h){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class G{constructor(t){this.comparator=t,this.data=new hi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((s,u)=>(t(s),!1))}forEachInRange(t,s){let u=this.data.getIteratorFrom(t[0]);for(;u.hasNext();){let f=u.getNext();if(this.comparator(f.key,t[1])>=0)return;s(f.key)}}forEachWhile(t,s){let u;for(u=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();u.hasNext();)if(!t(u.getNext().key))return}firstAfterOrEqual(t){let s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new pe(this.data.getIterator())}getIteratorFrom(t){return new pe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach(u=>{s=s.add(u)}),s}isEqual(t){if(!(t instanceof G)||this.size!==t.size)return!1;let s=this.data.getIterator(),u=t.data.getIterator();for(;s.hasNext();){let f=s.getNext().key,w=u.getNext().key;if(this.comparator(f,w)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(s=>{t.push(s)}),t}toString(){let t=[];return this.forEach(s=>t.push(s)),"SortedSet("+t.toString()+")"}copy(t){let s=new G(this.comparator);return s.data=t,s}}class pe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qe(h){return h.hasNext()?h.getNext():void 0}class wt{constructor(t){this.fields=t,t.sort(Ns.comparator)}static empty(){return new wt([])}unionWith(t){let s=new G(Ns.comparator);for(let u of this.fields)s=s.add(u);for(let u of t)s=s.add(u);return new wt(s.toArray())}covers(t){for(let s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return Zo(this.fields,t.fields,(s,u)=>s.isEqual(u))}}class Dt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pr{constructor(t){this.binaryString=t}static fromBase64String(t){return new pr(function(s){try{return atob(s)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Dt("Invalid base64 string: "+u):u}}(t))}static fromUint8Array(t){return new pr(function(s){let u="";for(let f=0;f<s.length;++f)u+=String.fromCharCode(s[f]);return u}(t))}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){let s=new Uint8Array(t.length);for(let u=0;u<t.length;u++)s[u]=t.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ci(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");let mr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sn(h){if(h||Lr(),typeof h=="string"){let t=0,s=mr.exec(h);if(s||Lr(),s[1]){let u=s[1];t=Number(u=(u+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(h).getTime()/1e3),nanos:t}}return{seconds:Sn(h.seconds),nanos:Sn(h.nanos)}}function Sn(h){return typeof h=="number"?h:typeof h=="string"?Number(h):0}function us(h){return typeof h=="string"?pr.fromBase64String(h):pr.fromUint8Array(h)}function Cs(h){var t,s;return((s=(((t=h?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function xa(h){let t=h.mapValue.fields.__previous_value__;return Cs(t)?xa(t):t}function Ea(h){let t=sn(h.mapValue.fields.__local_write_time__.timestampValue);return new ta(t.seconds,t.nanos)}class el{constructor(t,s,u,f,w,E,$,J,ge){this.databaseId=t,this.appId=s,this.persistenceKey=u,this.host=f,this.ssl=w,this.forceLongPolling=E,this.autoDetectLongPolling=$,this.longPollingOptions=J,this.useFetchStreams=ge}}class ia{constructor(t,s){this.projectId=t,this.database=s||"(default)"}static empty(){return new ia("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof ia&&t.projectId===this.projectId&&t.database===this.database}}let Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_a={nullValue:"NULL_VALUE"};function sa(h){return"nullValue"in h?0:"booleanValue"in h?1:"integerValue"in h||"doubleValue"in h?2:"timestampValue"in h?3:"stringValue"in h?5:"bytesValue"in h?6:"referenceValue"in h?7:"geoPointValue"in h?8:"arrayValue"in h?9:"mapValue"in h?Cs(h)?4:cs(h)?9007199254740991:jn(h)?10:11:Lr()}function Ks(h,t){if(h===t)return!0;let s=sa(h);if(s!==sa(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return h.booleanValue===t.booleanValue;case 4:return Ea(h).isEqual(Ea(t));case 3:return function(u,f){if(typeof u.timestampValue=="string"&&typeof f.timestampValue=="string"&&u.timestampValue.length===f.timestampValue.length)return u.timestampValue===f.timestampValue;let w=sn(u.timestampValue),E=sn(f.timestampValue);return w.seconds===E.seconds&&w.nanos===E.nanos}(h,t);case 5:return h.stringValue===t.stringValue;case 6:return us(h.bytesValue).isEqual(us(t.bytesValue));case 7:return h.referenceValue===t.referenceValue;case 8:return Sn(h.geoPointValue.latitude)===Sn(t.geoPointValue.latitude)&&Sn(h.geoPointValue.longitude)===Sn(t.geoPointValue.longitude);case 2:return function(u,f){if("integerValue"in u&&"integerValue"in f)return Sn(u.integerValue)===Sn(f.integerValue);if("doubleValue"in u&&"doubleValue"in f){let w=Sn(u.doubleValue),E=Sn(f.doubleValue);return w===E?Me(w)===Me(E):isNaN(w)&&isNaN(E)}return!1}(h,t);case 9:return Zo(h.arrayValue.values||[],t.arrayValue.values||[],Ks);case 10:case 11:return function(u,f){let w=u.mapValue.fields||{},E=f.mapValue.fields||{};if(ws(w)!==ws(E))return!1;for(let $ in w)if(w.hasOwnProperty($)&&(E[$]===void 0||!Ks(w[$],E[$])))return!1;return!0}(h,t);default:return Lr()}}function Oa(h,t){return(h.values||[]).find(s=>Ks(s,t))!==void 0}function ys(h,t){if(h===t)return 0;let s=sa(h),u=sa(t);if(s!==u)return ci(s,u);switch(s){case 0:case 9007199254740991:return 0;case 1:return ci(h.booleanValue,t.booleanValue);case 2:return function(f,w){let E=Sn(f.integerValue||f.doubleValue),$=Sn(w.integerValue||w.doubleValue);return E<$?-1:E>$?1:E===$?0:isNaN(E)?isNaN($)?0:-1:1}(h,t);case 3:return Ia(h.timestampValue,t.timestampValue);case 4:return Ia(Ea(h),Ea(t));case 5:return ci(h.stringValue,t.stringValue);case 6:return function(f,w){let E=us(f),$=us(w);return E.compareTo($)}(h.bytesValue,t.bytesValue);case 7:return function(f,w){let E=f.split("/"),$=w.split("/");for(let J=0;J<E.length&&J<$.length;J++){let ge=ci(E[J],$[J]);if(ge!==0)return ge}return ci(E.length,$.length)}(h.referenceValue,t.referenceValue);case 8:return function(f,w){let E=ci(Sn(f.latitude),Sn(w.latitude));return E!==0?E:ci(Sn(f.longitude),Sn(w.longitude))}(h.geoPointValue,t.geoPointValue);case 9:return fo(h.arrayValue,t.arrayValue);case 10:return function(f,w){var E,$,J,ge;let rt=f.fields||{},Bt=w.fields||{},ir=(E=rt.value)===null||E===void 0?void 0:E.arrayValue,Rr=($=Bt.value)===null||$===void 0?void 0:$.arrayValue,Vn=ci(((J=ir?.values)===null||J===void 0?void 0:J.length)||0,((ge=Rr?.values)===null||ge===void 0?void 0:ge.length)||0);return Vn!==0?Vn:fo(ir,Rr)}(h.mapValue,t.mapValue);case 11:return function(f,w){if(f===Ss.mapValue&&w===Ss.mapValue)return 0;if(f===Ss.mapValue)return 1;if(w===Ss.mapValue)return-1;let E=f.fields||{},$=Object.keys(E),J=w.fields||{},ge=Object.keys(J);$.sort(),ge.sort();for(let rt=0;rt<$.length&&rt<ge.length;++rt){let Bt=ci($[rt],ge[rt]);if(Bt!==0)return Bt;let ir=ys(E[$[rt]],J[ge[rt]]);if(ir!==0)return ir}return ci($.length,ge.length)}(h.mapValue,t.mapValue);default:throw Lr()}}function Ia(h,t){if(typeof h=="string"&&typeof t=="string"&&h.length===t.length)return ci(h,t);let s=sn(h),u=sn(t),f=ci(s.seconds,u.seconds);return f!==0?f:ci(s.nanos,u.nanos)}function fo(h,t){let s=h.values||[],u=t.values||[];for(let f=0;f<s.length&&f<u.length;++f){let w=ys(s[f],u[f]);if(w)return w}return ci(s.length,u.length)}function Da(h){var t,s;return"nullValue"in h?"null":"booleanValue"in h?""+h.booleanValue:"integerValue"in h?""+h.integerValue:"doubleValue"in h?""+h.doubleValue:"timestampValue"in h?function(u){let f=sn(u);return`time(${f.seconds},${f.nanos})`}(h.timestampValue):"stringValue"in h?h.stringValue:"bytesValue"in h?us(h.bytesValue).toBase64():"referenceValue"in h?(t=h.referenceValue,An.fromName(t).toString()):"geoPointValue"in h?(s=h.geoPointValue,`geo(${s.latitude},${s.longitude})`):"arrayValue"in h?function(u){let f="[",w=!0;for(let E of u.values||[])w?w=!1:f+=",",f+=Da(E);return f+"]"}(h.arrayValue):"mapValue"in h?function(u){let f=Object.keys(u.fields||{}).sort(),w="{",E=!0;for(let $ of f)E?E=!1:w+=",",w+=`${$}:${Da(u.fields[$])}`;return w+"}"}(h.mapValue):Lr()}function po(h,t){return{referenceValue:`projects/${h.projectId}/databases/${h.database}/documents/${t.path.canonicalString()}`}}function ms(h){return!!h&&"integerValue"in h}function mo(h){return!!h&&"arrayValue"in h}function Lo(h){return!!h&&"nullValue"in h}function Ya(h){return!!h&&"doubleValue"in h&&isNaN(Number(h.doubleValue))}function Ji(h){return!!h&&"mapValue"in h}function jn(h){var t,s;return((s=(((t=h?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function $i(h){if(h.geoPointValue)return{geoPointValue:Object.assign({},h.geoPointValue)};if(h.timestampValue&&typeof h.timestampValue=="object")return{timestampValue:Object.assign({},h.timestampValue)};if(h.mapValue){let t={mapValue:{fields:{}}};return bs(h.mapValue.fields,(s,u)=>t.mapValue.fields[s]=$i(u)),t}if(h.arrayValue){let t={arrayValue:{values:[]}};for(let s=0;s<(h.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=$i(h.arrayValue.values[s]);return t}return Object.assign({},h)}function cs(h){return(((h.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}let Ta={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ws(h,t){let s=ys(h.value,t.value);return s!==0?s:h.inclusive&&!t.inclusive?-1:!h.inclusive&&t.inclusive?1:0}function Ma(h,t){let s=ys(h.value,t.value);return s!==0?s:h.inclusive&&!t.inclusive?1:!h.inclusive&&t.inclusive?-1:0}class Gn{constructor(t){this.value=t}static empty(){return new Gn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let u=0;u<t.length-1;++u)if(!Ji(s=(s.mapValue.fields||{})[t.get(u)]))return null;return(s=(s.mapValue.fields||{})[t.lastSegment()])||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=$i(s)}setAll(t){let s=Ns.emptyPath(),u={},f=[];t.forEach((E,$)=>{if(!s.isImmediateParentOf($)){let J=this.getFieldsMap(s);this.applyChanges(J,u,f),u={},f=[],s=$.popLast()}E?u[$.lastSegment()]=$i(E):f.push($.lastSegment())});let w=this.getFieldsMap(s);this.applyChanges(w,u,f)}delete(t){let s=this.field(t.popLast());Ji(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return Ks(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let u=0;u<t.length;++u){let f=s.mapValue.fields[t.get(u)];Ji(f)&&f.mapValue.fields||(f={mapValue:{fields:{}}},s.mapValue.fields[t.get(u)]=f),s=f}return s.mapValue.fields}applyChanges(t,s,u){for(let f of(bs(s,(w,E)=>t[w]=E),u))delete t[f]}clone(){return new Gn($i(this.value))}}class ss{constructor(t,s,u,f,w,E,$){this.key=t,this.documentType=s,this.version=u,this.readTime=f,this.createTime=w,this.data=E,this.documentState=$}static newInvalidDocument(t){return new ss(t,0,bi.min(),bi.min(),bi.min(),Gn.empty(),0)}static newFoundDocument(t,s,u,f){return new ss(t,1,s,bi.min(),u,f,0)}static newNoDocument(t,s){return new ss(t,2,s,bi.min(),bi.min(),Gn.empty(),0)}static newUnknownDocument(t,s){return new ss(t,3,s,bi.min(),bi.min(),Gn.empty(),2)}convertToFoundDocument(t,s){return this.createTime.isEqual(bi.min())&&(this.documentType===2||this.documentType===0)&&(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bi.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ss&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ss(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ds{constructor(t,s){this.position=t,this.inclusive=s}}function Ba(h,t,s){let u=0;for(let f=0;f<h.position.length;f++){let w=t[f],E=h.position[f];if(u=w.field.isKeyField()?An.comparator(An.fromName(E.referenceValue),s.key):ys(E,s.data.field(w.field)),w.dir==="desc"&&(u*=-1),u!==0)break}return u}function Ca(h,t){if(h===null)return t===null;if(t===null||h.inclusive!==t.inclusive||h.position.length!==t.position.length)return!1;for(let s=0;s<h.position.length;s++)if(!Ks(h.position[s],t.position[s]))return!1;return!0}class Xa{constructor(t,s="asc"){this.field=t,this.dir=s}}class rs{}class Li extends rs{constructor(t,s,u){super(),this.field=t,this.op=s,this.value=u}static create(t,s,u){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,u):new kl(t,s,u):s==="array-contains"?new sf(t,u):s==="in"?new gu(t,u):s==="not-in"?new Nc(t,u):s==="array-contains-any"?new af(t,u):new Li(t,s,u)}static createKeyFieldInFilter(t,s,u){return s==="in"?new Jl(t,u):new nc(t,u)}matches(t){let s=t.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(ys(s,this.value)):s!==null&&sa(this.value)===sa(s)&&this.matchesComparison(ys(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Lr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qi extends rs{constructor(t,s){super(),this.filters=t,this.op=s,this.ae=null}static create(t,s){return new Qi(t,s)}matches(t){return ko(this)?this.filters.find(s=>!s.matches(t))===void 0:this.filters.find(s=>s.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,s)=>t.concat(s.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ko(h){return h.op==="and"}function Za(h){return h.op==="or"}function ll(h){return tl(h)&&ko(h)}function tl(h){for(let t of h.filters)if(t instanceof Qi)return!1;return!0}function Ou(h,t){let s=h.filters.concat(t);return Qi.create(s,h.op)}class kl extends Li{constructor(t,s,u){super(t,s,u),this.key=An.fromName(u.referenceValue)}matches(t){let s=An.comparator(t.key,this.key);return this.matchesComparison(s)}}class Jl extends Li{constructor(t,s){super(t,"in",s),this.keys=Ac("in",s)}matches(t){return this.keys.some(s=>s.isEqual(t.key))}}class nc extends Li{constructor(t,s){super(t,"not-in",s),this.keys=Ac("not-in",s)}matches(t){return!this.keys.some(s=>s.isEqual(t.key))}}function Ac(h,t){var s;return(((s=t.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(u=>An.fromName(u.referenceValue))}class sf extends Li{constructor(t,s){super(t,"array-contains",s)}matches(t){let s=t.data.field(this.field);return mo(s)&&Oa(s.arrayValue,this.value)}}class gu extends Li{constructor(t,s){super(t,"in",s)}matches(t){let s=t.data.field(this.field);return s!==null&&Oa(this.value.arrayValue,s)}}class Nc extends Li{constructor(t,s){super(t,"not-in",s)}matches(t){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let s=t.data.field(this.field);return s!==null&&!Oa(this.value.arrayValue,s)}}class af extends Li{constructor(t,s){super(t,"array-contains-any",s)}matches(t){let s=t.data.field(this.field);return!(!mo(s)||!s.arrayValue.values)&&s.arrayValue.values.some(u=>Oa(this.value.arrayValue,u))}}class Oc{constructor(t,s=null,u=[],f=[],w=null,E=null,$=null){this.path=t,this.collectionGroup=s,this.orderBy=u,this.filters=f,this.limit=w,this.startAt=E,this.endAt=$,this.ue=null}}function Du(h,t=null,s=[],u=[],f=null,w=null,E=null){return new Oc(h,t,s,u,f,w,E)}function eo(h){if(h.ue===null){let t=h.path.canonicalString();h.collectionGroup!==null&&(t+="|cg:"+h.collectionGroup),t+="|f:"+h.filters.map(s=>function u(f){if(f instanceof Li)return f.field.canonicalString()+f.op.toString()+Da(f.value);if(ll(f))return f.filters.map(w=>u(w)).join(",");{let w=f.filters.map(E=>u(E)).join(",");return`${f.op}(${w})`}}(s)).join(",")+"|ob:"+h.orderBy.map(s=>s.field.canonicalString()+s.dir).join(","),h.limit==null||(t+="|l:"+h.limit),h.startAt&&(t+="|lb:"+(h.startAt.inclusive?"b:":"a:")+h.startAt.position.map(s=>Da(s)).join(",")),h.endAt&&(t+="|ub:"+(h.endAt.inclusive?"a:":"b:")+h.endAt.position.map(s=>Da(s)).join(",")),h.ue=t}return h.ue}function iu(h,t){if(h.limit!==t.limit||h.orderBy.length!==t.orderBy.length)return!1;for(let f=0;f<h.orderBy.length;f++){var s,u;if(s=h.orderBy[f],u=t.orderBy[f],!(s.dir===u.dir&&s.field.isEqual(u.field)))return!1}if(h.filters.length!==t.filters.length)return!1;for(let f=0;f<h.filters.length;f++)if(!function w(E,$){return E instanceof Li?$ instanceof Li&&E.op===$.op&&E.field.isEqual($.field)&&Ks(E.value,$.value):E instanceof Qi?$ instanceof Qi&&E.op===$.op&&E.filters.length===$.filters.length&&E.filters.reduce((J,ge,rt)=>J&&w(ge,$.filters[rt]),!0):void Lr()}(h.filters[f],t.filters[f]))return!1;return h.collectionGroup===t.collectionGroup&&!!h.path.isEqual(t.path)&&!!Ca(h.startAt,t.startAt)&&Ca(h.endAt,t.endAt)}function Mu(h){return An.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}function Xc(h,t){return h.filters.filter(s=>s instanceof Li&&s.field.isEqual(t))}function Lu(h,t,s){let u=_a,f=!0;for(let E of Xc(h,t)){let $=_a,J=!0;switch(E.op){case"<":case"<=":var w;$="nullValue"in(w=E.value)?_a:"booleanValue"in w?{booleanValue:!1}:"integerValue"in w||"doubleValue"in w?{doubleValue:NaN}:"timestampValue"in w?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in w?{stringValue:""}:"bytesValue"in w?{bytesValue:""}:"referenceValue"in w?po(ia.empty(),An.empty()):"geoPointValue"in w?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in w?{arrayValue:{}}:"mapValue"in w?jn(w)?Ta:{mapValue:{}}:Lr();break;case"==":case"in":case">=":$=E.value;break;case">":$=E.value,J=!1;break;case"!=":case"not-in":$=_a}0>Ws({value:u,inclusive:f},{value:$,inclusive:J})&&(u=$,f=J)}if(s!==null){for(let E=0;E<h.orderBy.length;++E)if(h.orderBy[E].field.isEqual(t)){let $=s.position[E];0>Ws({value:u,inclusive:f},{value:$,inclusive:s.inclusive})&&(u=$,f=s.inclusive);break}}return{value:u,inclusive:f}}function yu(h,t,s){let u=Ss,f=!0;for(let E of Xc(h,t)){let $=Ss,J=!0;switch(E.op){case">=":case">":var w;$="nullValue"in(w=E.value)?{booleanValue:!1}:"booleanValue"in w?{doubleValue:NaN}:"integerValue"in w||"doubleValue"in w?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in w?{stringValue:""}:"stringValue"in w?{bytesValue:""}:"bytesValue"in w?po(ia.empty(),An.empty()):"referenceValue"in w?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in w?{arrayValue:{}}:"arrayValue"in w?Ta:"mapValue"in w?jn(w)?{mapValue:{}}:Ss:Lr(),J=!1;break;case"==":case"in":case"<=":$=E.value;break;case"<":$=E.value,J=!1;break;case"!=":case"not-in":$=Ss}Ma({value:u,inclusive:f},{value:$,inclusive:J})>0&&(u=$,f=J)}if(s!==null){for(let E=0;E<h.orderBy.length;++E)if(h.orderBy[E].field.isEqual(t)){let $=s.position[E];Ma({value:u,inclusive:f},{value:$,inclusive:s.inclusive})>0&&(u=$,f=s.inclusive);break}}return{value:u,inclusive:f}}class Be{constructor(t,s=null,u=[],f=[],w=null,E="F",$=null,J=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=u,this.filters=f,this.limit=w,this.limitType=E,this.startAt=$,this.endAt=J,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function B(h){return new Be(h)}function le(h){return h.filters.length===0&&h.limit===null&&h.startAt==null&&h.endAt==null&&(h.explicitOrderBy.length===0||h.explicitOrderBy.length===1&&h.explicitOrderBy[0].field.isKeyField())}function be(h){return h.collectionGroup!==null}function Xe(h){if(h.ce===null){let t;h.ce=[];let s=new Set;for(let f of h.explicitOrderBy)h.ce.push(f),s.add(f.field.canonicalString());let u=h.explicitOrderBy.length>0?h.explicitOrderBy[h.explicitOrderBy.length-1].dir:"asc";(t=new G(Ns.comparator),h.filters.forEach(f=>{f.getFlattenedFilters().forEach(w=>{w.isInequality()&&(t=t.add(w.field))})}),t).forEach(f=>{s.has(f.canonicalString())||f.isKeyField()||h.ce.push(new Xa(f,u))}),s.has(Ns.keyField().canonicalString())||h.ce.push(new Xa(Ns.keyField(),u))}return h.ce}function ot(h){return h.le||(h.le=function(t,s){if(t.limitType==="F")return Du(t.path,t.collectionGroup,s,t.filters,t.limit,t.startAt,t.endAt);{s=s.map(w=>{let E=w.dir==="desc"?"asc":"desc";return new Xa(w.field,E)});let u=t.endAt?new Ds(t.endAt.position,t.endAt.inclusive):null,f=t.startAt?new Ds(t.startAt.position,t.startAt.inclusive):null;return Du(t.path,t.collectionGroup,s,t.filters,t.limit,u,f)}}(h,Xe(h))),h.le}function Gt(h,t){let s=h.filters.concat([t]);return new Be(h.path,h.collectionGroup,h.explicitOrderBy.slice(),s,h.limit,h.limitType,h.startAt,h.endAt)}function cr(h,t,s){return new Be(h.path,h.collectionGroup,h.explicitOrderBy.slice(),h.filters.slice(),t,s,h.startAt,h.endAt)}function Er(h,t){return iu(ot(h),ot(t))&&h.limitType===t.limitType}function br(h){return`${eo(ot(h))}|lt:${h.limitType}`}function nn(h){var t;let s;return`Query(target=${s=(t=ot(h)).path.canonicalString(),t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(u=>function f(w){return w instanceof Li?`${w.field.canonicalString()} ${w.op} ${Da(w.value)}`:w instanceof Qi?w.op.toString()+" {"+w.getFilters().map(f).join(" ,")+"}":"Filter"}(u)).join(", ")}]`),t.limit==null||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(u=>`${u.field.canonicalString()} (${u.dir})`).join(", ")}]`),t.startAt&&(s+=", startAt: "+(t.startAt.inclusive?"b:":"a:")+t.startAt.position.map(u=>Da(u)).join(",")),t.endAt&&(s+=", endAt: "+(t.endAt.inclusive?"a:":"b:")+t.endAt.position.map(u=>Da(u)).join(",")),`Target(${s})`}; limitType=${h.limitType})`}function Mn(h,t){return t.isFoundDocument()&&function(s,u){let f=u.key.path;return s.collectionGroup!==null?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(f):An.isDocumentKey(s.path)?s.path.isEqual(f):s.path.isImmediateParentOf(f)}(h,t)&&function(s,u){for(let f of Xe(s))if(!f.field.isKeyField()&&u.data.field(f.field)===null)return!1;return!0}(h,t)&&function(s,u){for(let f of s.filters)if(!f.matches(u))return!1;return!0}(h,t)&&(!h.startAt||!!function(s,u,f){let w=Ba(s,u,f);return s.inclusive?w<=0:w<0}(h.startAt,Xe(h),t))&&(!h.endAt||!!function(s,u,f){let w=Ba(s,u,f);return s.inclusive?w>=0:w>0}(h.endAt,Xe(h),t))}function Bn(h){return h.collectionGroup||(h.path.length%2==1?h.path.lastSegment():h.path.get(h.path.length-2))}function Ci(h){return(t,s)=>{let u=!1;for(let f of Xe(h)){let w=function(E,$,J){let ge=E.field.isKeyField()?An.comparator($.key,J.key):function(rt,Bt,ir){let Rr=Bt.data.field(rt),Vn=ir.data.field(rt);return Rr!==null&&Vn!==null?ys(Rr,Vn):Lr()}(E.field,$,J);switch(E.dir){case"asc":return ge;case"desc":return-1*ge;default:return Lr()}}(f,t,s);if(w!==0)return w;u=u||f.field.isKeyField()}return 0}}class dn{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){let s=this.mapKeyFn(t),u=this.inner[s];if(u!==void 0){for(let[f,w]of u)if(this.equalsFn(f,t))return w}}has(t){return this.get(t)!==void 0}set(t,s){let u=this.mapKeyFn(t),f=this.inner[u];if(f===void 0)return this.inner[u]=[[t,s]],void this.innerSize++;for(let w=0;w<f.length;w++)if(this.equalsFn(f[w][0],t))return void(f[w]=[t,s]);f.push([t,s]),this.innerSize++}delete(t){let s=this.mapKeyFn(t),u=this.inner[s];if(u===void 0)return!1;for(let f=0;f<u.length;f++)if(this.equalsFn(u[f][0],t))return u.length===1?delete this.inner[s]:u.splice(f,1),this.innerSize--,!0;return!1}forEach(t){bs(this.inner,(s,u)=>{for(let[f,w]of u)t(f,w)})}isEmpty(){return os(this.inner)}size(){return this.innerSize}}let Wn=new hi(An.comparator),Un=new hi(An.comparator);function ns(...h){let t=Un;for(let s of h)t=t.insert(s.key,s);return t}function di(h){let t=Un;return h.forEach((s,u)=>t=t.insert(s,u.overlayedDocument)),t}function Di(){return new dn(h=>h.toString(),(h,t)=>h.isEqual(t))}let ri=new hi(An.comparator),xn=new G(An.comparator);function Ti(...h){let t=xn;for(let s of h)t=t.add(s);return t}let Js=new G(ci);function ga(h,t){if(h.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Me(t)?"-0":t}}function xi(h){return{integerValue:""+h}}function Yi(h,t){return ct(t)?xi(t):ga(h,t)}class Ms{constructor(){this._=void 0}}function qa(h,t){return h instanceof ul?ms(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class Ka extends Ms{}class aa extends Ms{constructor(t){super(),this.elements=t}}function gs(h,t){let s=ic(t);for(let u of h.elements)s.some(f=>Ks(f,u))||s.push(u);return{arrayValue:{values:s}}}class Qo extends Ms{constructor(t){super(),this.elements=t}}function Ro(h,t){let s=ic(t);for(let u of h.elements)s=s.filter(f=>!Ks(f,u));return{arrayValue:{values:s}}}class ul extends Ms{constructor(t,s){super(),this.serializer=t,this.Pe=s}}function rl(h){return Sn(h.integerValue||h.doubleValue)}function ic(h){return mo(h)&&h.arrayValue.values?h.arrayValue.values.slice():[]}class V{constructor(t,s){this.field=t,this.transform=s}}class L{constructor(t,s){this.version=t,this.transformResults=s}}class ne{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new ne}static exists(t){return new ne(void 0,t)}static updateTime(t){return new ne(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Pe(h,t){return h.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(h.updateTime):h.exists===void 0||h.exists===t.isFoundDocument()}class Oe{}function kt(h,t){if(!h.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return h.isNoDocument()?new ti(h.key,ne.none()):new sr(h.key,h.data,ne.none());{let s=h.data,u=Gn.empty(),f=new G(Ns.comparator);for(let w of t.fields)if(!f.has(w)){let E=s.field(w);E===null&&w.length>1&&(w=w.popLast(),E=s.field(w)),E===null?u.delete(w):u.set(w,E),f=f.add(w)}return new vr(h.key,u,new wt(f.toArray()),ne.none())}}function Nt(h,t,s,u){return h instanceof sr?function(f,w,E,$){if(!Pe(f.precondition,w))return E;let J=f.value.clone(),ge=fn(f.fieldTransforms,$,w);return J.setAll(ge),w.convertToFoundDocument(w.version,J).setHasLocalMutations(),null}(h,t,s,u):h instanceof vr?function(f,w,E,$){if(!Pe(f.precondition,w))return E;let J=fn(f.fieldTransforms,$,w),ge=w.data;return ge.setAll(kr(f)),ge.setAll(J),w.convertToFoundDocument(w.version,ge).setHasLocalMutations(),E===null?null:E.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(rt=>rt.field))}(h,t,s,u):Pe(h.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):s}function Mt(h,t){var s,u;return h.type===t.type&&!!h.key.isEqual(t.key)&&!!h.precondition.isEqual(t.precondition)&&(s=h.fieldTransforms,u=t.fieldTransforms,!!(s===void 0&&u===void 0||!(!s||!u)&&Zo(s,u,(f,w)=>{var E,$;return f.field.isEqual(w.field)&&(E=f.transform,$=w.transform,E instanceof aa&&$ instanceof aa||E instanceof Qo&&$ instanceof Qo?Zo(E.elements,$.elements,Ks):E instanceof ul&&$ instanceof ul?Ks(E.Pe,$.Pe):E instanceof Ka&&$ instanceof Ka)})))&&(h.type===0?h.value.isEqual(t.value):h.type!==1||h.data.isEqual(t.data)&&h.fieldMask.isEqual(t.fieldMask))}class sr extends Oe{constructor(t,s,u,f=[]){super(),this.key=t,this.value=s,this.precondition=u,this.fieldTransforms=f,this.type=0}getFieldMask(){return null}}class vr extends Oe{constructor(t,s,u,f,w=[]){super(),this.key=t,this.data=s,this.fieldMask=u,this.precondition=f,this.fieldTransforms=w,this.type=1}getFieldMask(){return this.fieldMask}}function kr(h){let t=new Map;return h.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){let u=h.data.field(s);t.set(s,u)}}),t}function Mr(h,t,s){var u;let f=new Map;h.length===s.length||Lr();for(let w=0;w<s.length;w++){let E=h[w],$=E.transform,J=t.data.field(E.field);f.set(E.field,(u=s[w],$ instanceof aa?gs($,J):$ instanceof Qo?Ro($,J):u))}return f}function fn(h,t,s){let u=new Map;for(let f of h){let w=f.transform,E=s.data.field(f.field);u.set(f.field,w instanceof Ka?function($,J){let ge={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:$.seconds,nanos:$.nanoseconds}}}};return J&&Cs(J)&&(J=xa(J)),J&&(ge.fields.__previous_value__=J),{mapValue:ge}}(t,E):w instanceof aa?gs(w,E):w instanceof Qo?Ro(w,E):function($,J){let ge=qa($,J),rt=rl(ge)+rl($.Pe);return ms(ge)&&ms($.Pe)?xi(rt):ga($.serializer,rt)}(w,E))}return u}class ti extends Oe{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fn extends Oe{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yn{constructor(t,s,u,f){this.batchId=t,this.localWriteTime=s,this.baseMutations=u,this.mutations=f}applyToRemoteDocument(t,s){let u=s.mutationResults;for(let w=0;w<this.mutations.length;w++){let E=this.mutations[w];if(E.key.isEqual(t.key)){var f;f=u[w],E instanceof sr?function($,J,ge){let rt=$.value.clone(),Bt=Mr($.fieldTransforms,J,ge.transformResults);rt.setAll(Bt),J.convertToFoundDocument(ge.version,rt).setHasCommittedMutations()}(E,t,f):E instanceof vr?function($,J,ge){if(!Pe($.precondition,J))return void J.convertToUnknownDocument(ge.version);let rt=Mr($.fieldTransforms,J,ge.transformResults),Bt=J.data;Bt.setAll(kr($)),Bt.setAll(rt),J.convertToFoundDocument(ge.version,Bt).setHasCommittedMutations()}(E,t,f):function($,J,ge){J.convertToNoDocument(ge.version).setHasCommittedMutations()}(0,t,f)}}}applyToLocalView(t,s){for(let u of this.baseMutations)u.key.isEqual(t.key)&&(s=Nt(u,t,s,this.localWriteTime));for(let u of this.mutations)u.key.isEqual(t.key)&&(s=Nt(u,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){let u=Di();return this.mutations.forEach(f=>{let w=t.get(f.key),E=w.overlayedDocument,$=this.applyToLocalView(E,w.mutatedFields),J=kt(E,$=s.has(f.key)?null:$);J!==null&&u.set(f.key,J),E.isValidDocument()||E.convertToNoDocument(bi.min())}),u}keys(){return this.mutations.reduce((t,s)=>t.add(s.key),Ti())}isEqual(t){return this.batchId===t.batchId&&Zo(this.mutations,t.mutations,(s,u)=>Mt(s,u))&&Zo(this.baseMutations,t.baseMutations,(s,u)=>Mt(s,u))}}class bn{constructor(t,s,u,f){this.batch=t,this.commitVersion=s,this.mutationResults=u,this.docVersions=f}static from(t,s,u){t.mutations.length===u.length||Lr();let f=ri,w=t.mutations;for(let E=0;E<w.length;E++)f=f.insert(w[E].key,u[E].version);return new bn(t,s,u,f)}}class Ur{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hs{constructor(t,s){this.count=t,this.unchangedNames=s}}function Pr(h){if(h===void 0)return pi("GRPC error has no .code"),Br.UNKNOWN;switch(h){case Y.OK:return Br.OK;case Y.CANCELLED:return Br.CANCELLED;case Y.UNKNOWN:return Br.UNKNOWN;case Y.DEADLINE_EXCEEDED:return Br.DEADLINE_EXCEEDED;case Y.RESOURCE_EXHAUSTED:return Br.RESOURCE_EXHAUSTED;case Y.INTERNAL:return Br.INTERNAL;case Y.UNAVAILABLE:return Br.UNAVAILABLE;case Y.UNAUTHENTICATED:return Br.UNAUTHENTICATED;case Y.INVALID_ARGUMENT:return Br.INVALID_ARGUMENT;case Y.NOT_FOUND:return Br.NOT_FOUND;case Y.ALREADY_EXISTS:return Br.ALREADY_EXISTS;case Y.PERMISSION_DENIED:return Br.PERMISSION_DENIED;case Y.FAILED_PRECONDITION:return Br.FAILED_PRECONDITION;case Y.ABORTED:return Br.ABORTED;case Y.OUT_OF_RANGE:return Br.OUT_OF_RANGE;case Y.UNIMPLEMENTED:return Br.UNIMPLEMENTED;case Y.DATA_LOSS:return Br.DATA_LOSS;default:return Lr()}}(ee=Y||(Y={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";let Si=new z([4294967295,4294967295],0);function mn(h){let t=new TextEncoder().encode(h),s=new y;return s.update(t),new Uint8Array(s.digest())}function ki(h){let t=new DataView(h.buffer),s=t.getUint32(0,!0),u=t.getUint32(4,!0),f=t.getUint32(8,!0),w=t.getUint32(12,!0);return[new z([s,u],0),new z([f,w],0)]}class Es{constructor(t,s,u){if(this.bitmap=t,this.padding=s,this.hashCount=u,s<0||s>=8)throw new Fi(`Invalid padding: ${s}`);if(u<0||t.length>0&&this.hashCount===0)throw new Fi(`Invalid hash count: ${u}`);if(t.length===0&&s!==0)throw new Fi(`Invalid padding when bitmap length is 0: ${s}`);this.Te=8*t.length-s,this.Ie=z.fromNumber(this.Te)}Ee(t,s,u){let f=t.add(s.multiply(z.fromNumber(u)));return f.compare(Si)===1&&(f=new z([f.getBits(0),f.getBits(1)],0)),f.modulo(this.Ie).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let[s,u]=ki(mn(t));for(let f=0;f<this.hashCount;f++){let w=this.Ee(s,u,f);if(!this.de(w))return!1}return!0}static create(t,s,u){let f=new Es(new Uint8Array(Math.ceil(t/8)),t%8==0?0:8-t%8,s);return u.forEach(w=>f.insert(w)),f}insert(t){if(this.Te===0)return;let[s,u]=ki(mn(t));for(let f=0;f<this.hashCount;f++){let w=this.Ee(s,u,f);this.Ae(w)}}Ae(t){this.bitmap[Math.floor(t/8)]|=1<<t%8}}class Fi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ai{constructor(t,s,u,f,w){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=u,this.documentUpdates=f,this.resolvedLimboDocuments=w}static createSynthesizedRemoteEventForCurrentChange(t,s,u){let f=new Map;return f.set(t,Qs.createSynthesizedTargetChangeForCurrentChange(t,s,u)),new Ai(bi.min(),f,new hi(ci),Wn,Ti())}}class Qs{constructor(t,s,u,f,w){this.resumeToken=t,this.current=s,this.addedDocuments=u,this.modifiedDocuments=f,this.removedDocuments=w}static createSynthesizedTargetChangeForCurrentChange(t,s,u){return new Qs(u,s,Ti(),Ti(),Ti())}}class Ls{constructor(t,s,u,f){this.Re=t,this.removedTargetIds=s,this.key=u,this.Ve=f}}class ca{constructor(t,s){this.targetId=t,this.me=s}}class Zr{constructor(t,s,u=pr.EMPTY_BYTE_STRING,f=null){this.state=t,this.targetIds=s,this.resumeToken=u,this.cause=f}}class _s{constructor(){this.fe=0,this.ge=_r(),this.pe=pr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ti(),s=Ti(),u=Ti();return this.ge.forEach((f,w)=>{switch(w){case 0:t=t.add(f);break;case 2:s=s.add(f);break;case 1:u=u.add(f);break;default:Lr()}}),new Qs(this.pe,this.ye,t,s,u)}Ce(){this.we=!1,this.ge=_r()}Fe(t,s){this.we=!0,this.ge=this.ge.insert(t,s)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,this.fe>=0||Lr()}Ne(){this.we=!0,this.ye=!0}}class zs{constructor(t){this.Le=t,this.Be=new Map,this.ke=Wn,this.qe=go(),this.Qe=go(),this.Ke=new hi(ci)}$e(t){for(let s of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(s,t.Ve):this.We(s,t.key,t.Ve);for(let s of t.removedTargetIds)this.We(s,t.key,t.Ve)}Ge(t){this.forEachTarget(t,s=>{let u=this.ze(s);switch(t.state){case 0:this.je(s)&&u.De(t.resumeToken);break;case 1:u.Oe(),u.Se||u.Ce(),u.De(t.resumeToken);break;case 2:u.Oe(),u.Se||this.removeTarget(s);break;case 3:this.je(s)&&(u.Ne(),u.De(t.resumeToken));break;case 4:this.je(s)&&(this.He(s),u.De(t.resumeToken));break;default:Lr()}})}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.Be.forEach((u,f)=>{this.je(f)&&s(f)})}Je(t){let s=t.targetId,u=t.me.count,f=this.Ye(s);if(f){let w=f.target;if(Mu(w))if(u===0){let E=new An(w.path);this.We(s,E,ss.newNoDocument(E,bi.min()))}else u===1||Lr();else{let E=this.Ze(s);if(E!==u){let $=this.Xe(t),J=$?this.et($,t,E):1;J!==0&&(this.He(s),this.Ke=this.Ke.insert(s,J===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(t){let s,u,f=t.me.unchangedNames;if(!f||!f.bits)return null;let{bits:{bitmap:w="",padding:E=0},hashCount:$=0}=f;try{s=us(w).toUint8Array()}catch(J){if(J instanceof Dt)return wi("Decoding the base64 bloom filter in existence filter failed ("+J.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw J}try{u=new Es(s,E,$)}catch(J){return wi(J instanceof Fi?"BloomFilter error: ":"Applying bloom filter failed: ",J),null}return u.Te===0?null:u}et(t,s,u){return s.me.count===u-this.rt(t,s.targetId)?0:2}rt(t,s){let u=this.Le.getRemoteKeysForTarget(s),f=0;return u.forEach(w=>{let E=this.Le.nt(),$=`projects/${E.projectId}/databases/${E.database}/documents/${w.path.canonicalString()}`;t.mightContain($)||(this.We(s,w,null),f++)}),f}it(t){let s=new Map;this.Be.forEach((w,E)=>{let $=this.Ye(E);if($){if(w.current&&Mu($.target)){let J=new An($.target.path);this.st(J).has(E)||this.ot(E,J)||this.We(E,J,ss.newNoDocument(J,t))}w.be&&(s.set(E,w.ve()),w.Ce())}});let u=Ti();this.Qe.forEach((w,E)=>{let $=!0;E.forEachWhile(J=>{let ge=this.Ye(J);return!ge||ge.purpose==="TargetPurposeLimboResolution"||($=!1,!1)}),$&&(u=u.add(w))}),this.ke.forEach((w,E)=>E.setReadTime(t));let f=new Ai(t,s,this.Ke,this.ke,u);return this.ke=Wn,this.qe=go(),this.Qe=go(),this.Ke=new hi(ci),f}Ue(t,s){if(!this.je(t))return;let u=this.ot(t,s.key)?2:0;this.ze(t).Fe(s.key,u),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(t)),this.Qe=this.Qe.insert(s.key,this._t(s.key).add(t))}We(t,s,u){if(!this.je(t))return;let f=this.ze(t);this.ot(t,s)?f.Fe(s,1):f.Me(s),this.Qe=this.Qe.insert(s,this._t(s).delete(t)),this.Qe=this.Qe.insert(s,this._t(s).add(t)),u&&(this.ke=this.ke.insert(s,u))}removeTarget(t){this.Be.delete(t)}Ze(t){let s=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let s=this.Be.get(t);return s||(s=new _s,this.Be.set(t,s)),s}_t(t){let s=this.Qe.get(t);return s||(s=new G(ci),this.Qe=this.Qe.insert(t,s)),s}st(t){let s=this.qe.get(t);return s||(s=new G(ci),this.qe=this.qe.insert(t,s)),s}je(t){let s=this.Ye(t)!==null;return s||yr("WatchChangeAggregator","Detected inactive target",t),s}Ye(t){let s=this.Be.get(t);return s&&s.Se?null:this.Le.ut(t)}He(t){this.Be.set(t,new _s),this.Le.getRemoteKeysForTarget(t).forEach(s=>{this.We(t,s,null)})}ot(t,s){return this.Le.getRemoteKeysForTarget(t).has(s)}}function go(){return new hi(An.comparator)}function _r(){return new hi(An.comparator)}let Nr={asc:"ASCENDING",desc:"DESCENDING"},Cn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ks={and:"AND",or:"OR"};class cl{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function ju(h,t){return h.useProto3Json||t==null?t:{value:t}}function za(h,t){return h.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bl(h,t){return h.useProto3Json?t.toBase64():t.toUint8Array()}function ka(h){return h||Lr(),bi.fromTimestamp(function(t){let s=sn(t);return new ta(s.seconds,s.nanos)}(h))}function yo(h,t){return Rl(h,t).canonicalString()}function Rl(h,t){let s=new Ts(["projects",h.projectId,"databases",h.database]).child("documents");return t===void 0?s:s.child(t)}function vu(h){let t=Ts.fromString(h);return vd(t)||Lr(),t}function jo(h,t){return yo(h.databaseId,t.path)}function Bi(h,t){let s=vu(t);if(s.get(1)!==h.databaseId.projectId)throw new Nn(Br.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+h.databaseId.projectId);if(s.get(3)!==h.databaseId.database)throw new Nn(Br.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+h.databaseId.database);return new An(gh(s))}function Zc(h,t){return yo(h.databaseId,t)}function bo(h){let t=vu(h);return t.length===4?Ts.emptyPath():gh(t)}function Xi(h){return new Ts(["projects",h.databaseId.projectId,"databases",h.databaseId.database]).canonicalString()}function gh(h){return h.length>4&&h.get(4)==="documents"||Lr(),h.popFirst(5)}function La(h,t,s){return{name:jo(h,t),fields:s.value.mapValue.fields}}function Fp(h,t,s){let u=Bi(h,t.name),f=ka(t.updateTime),w=t.createTime?ka(t.createTime):bi.min(),E=new Gn({mapValue:{fields:t.fields}}),$=ss.newFoundDocument(u,f,w,E);return s&&$.setHasCommittedMutations(),s?$.setHasCommittedMutations():$}function ao(h,t){var s;let u;if(t instanceof sr)u={update:La(h,t.key,t.value)};else if(t instanceof ti)u={delete:jo(h,t.key)};else if(t instanceof vr)u={update:La(h,t.key,t.data),updateMask:function(f){let w=[];return f.fields.forEach(E=>w.push(E.canonicalString())),{fieldPaths:w}}(t.fieldMask)};else{if(!(t instanceof Fn))return Lr();u={verify:jo(h,t.key)}}return t.fieldTransforms.length>0&&(u.updateTransforms=t.fieldTransforms.map(f=>function(w,E){let $=E.transform;if($ instanceof Ka)return{fieldPath:E.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if($ instanceof aa)return{fieldPath:E.field.canonicalString(),appendMissingElements:{values:$.elements}};if($ instanceof Qo)return{fieldPath:E.field.canonicalString(),removeAllFromArray:{values:$.elements}};if($ instanceof ul)return{fieldPath:E.field.canonicalString(),increment:$.Pe};throw Lr()}(0,f))),t.precondition.isNone||(u.currentDocument=(s=t.precondition).updateTime!==void 0?{updateTime:za(h,s.updateTime.toTimestamp())}:s.exists!==void 0?{exists:s.exists}:Lr()),u}function Xn(h,t){var s;let u=t.currentDocument?(s=t.currentDocument).updateTime!==void 0?ne.updateTime(ka(s.updateTime)):s.exists!==void 0?ne.exists(s.exists):ne.none():ne.none(),f=t.updateTransforms?t.updateTransforms.map(w=>{let E;return E=null,"setToServerValue"in w?(w.setToServerValue==="REQUEST_TIME"||Lr(),E=new Ka):"appendMissingElements"in w?E=new aa(w.appendMissingElements.values||[]):"removeAllFromArray"in w?E=new Qo(w.removeAllFromArray.values||[]):"increment"in w?E=new ul(h,w.increment):Lr(),new V(Ns.fromServerFormat(w.fieldPath),E)}):[];if(t.update){t.update.name;let w=Bi(h,t.update.name),E=new Gn({mapValue:{fields:t.update.fields}});return t.updateMask?new vr(w,E,new wt((t.updateMask.fieldPaths||[]).map($=>Ns.fromServerFormat($))),u,f):new sr(w,E,u,f)}return t.delete?new ti(Bi(h,t.delete),u):t.verify?new Fn(Bi(h,t.verify),u):Lr()}function Po(h,t){return{documents:[Zc(h,t.path)]}}function wu(h,t){var s,u;let f,w={structuredQuery:{}},E=t.path;t.collectionGroup!==null?(f=E,w.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(f=E.popLast(),w.structuredQuery.from=[{collectionId:E.lastSegment()}]),w.parent=Zc(h,f);let $=function(rt){if(rt.length!==0)return function Bt(ir){return ir instanceof Li?function(Rr){if(Rr.op==="=="){if(Ya(Rr.value))return{unaryFilter:{field:Fu(Rr.field),op:"IS_NAN"}};if(Lo(Rr.value))return{unaryFilter:{field:Fu(Rr.field),op:"IS_NULL"}}}else if(Rr.op==="!="){if(Ya(Rr.value))return{unaryFilter:{field:Fu(Rr.field),op:"IS_NOT_NAN"}};if(Lo(Rr.value))return{unaryFilter:{field:Fu(Rr.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(Rr.field),op:Cn[Rr.op],value:Rr.value}}}(ir):ir instanceof Qi?function(Rr){let Vn=Rr.getFilters().map(oi=>Bt(oi));return Vn.length===1?Vn[0]:{compositeFilter:{op:ks[Rr.op],filters:Vn}}}(ir):Lr()}(Qi.create(rt,"and"))}(t.filters);$&&(w.structuredQuery.where=$);let J=function(rt){if(rt.length!==0)return rt.map(Bt=>({field:Fu(Bt.field),direction:Nr[Bt.dir]}))}(t.orderBy);J&&(w.structuredQuery.orderBy=J);let ge=ju(h,t.limit);return ge!==null&&(w.structuredQuery.limit=ge),t.startAt&&(w.structuredQuery.startAt={before:(s=t.startAt).inclusive,values:s.position}),t.endAt&&(w.structuredQuery.endAt={before:!(u=t.endAt).inclusive,values:u.position}),{ct:w,parent:f}}function eh(h){var t;let s,u=bo(h.parent),f=h.structuredQuery,w=f.from?f.from.length:0,E=null;if(w>0){w===1||Lr();let ir=f.from[0];ir.allDescendants?E=ir.collectionId:u=u.child(ir.collectionId)}let $=[];f.where&&($=function(ir){let Rr=function Vn(oi){return oi.unaryFilter!==void 0?function(vi){switch(vi.unaryFilter.op){case"IS_NAN":let Gs=bu(vi.unaryFilter.field);return Li.create(Gs,"==",{doubleValue:NaN});case"IS_NULL":let ls=bu(vi.unaryFilter.field);return Li.create(ls,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let dr=bu(vi.unaryFilter.field);return Li.create(dr,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let Lt=bu(vi.unaryFilter.field);return Li.create(Lt,"!=",{nullValue:"NULL_VALUE"});default:return Lr()}}(oi):oi.fieldFilter!==void 0?Li.create(bu(oi.fieldFilter.field),function(vi){switch(vi){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lr()}}(oi.fieldFilter.op),oi.fieldFilter.value):oi.compositeFilter!==void 0?Qi.create(oi.compositeFilter.filters.map(vi=>Vn(vi)),function(vi){switch(vi){case"AND":return"and";case"OR":return"or";default:return Lr()}}(oi.compositeFilter.op)):Lr()}(ir);return Rr instanceof Qi&&ll(Rr)?Rr.getFilters():[Rr]}(f.where));let J=[];f.orderBy&&(J=f.orderBy.map(ir=>new Xa(bu(ir.field),function(Rr){switch(Rr){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ir.direction))));let ge=null;f.limit&&(ge=(s=typeof(t=f.limit)=="object"?t.value:t)==null?null:s);let rt=null;f.startAt&&(rt=function(ir){let Rr=!!ir.before;return new Ds(ir.values||[],Rr)}(f.startAt));let Bt=null;return f.endAt&&(Bt=function(ir){let Rr=!ir.before;return new Ds(ir.values||[],Rr)}(f.endAt)),new Be(u,E,J,$,ge,"F",rt,Bt)}function Fu(h){return{fieldPath:h.canonicalString()}}function bu(h){return Ns.fromServerFormat(h.fieldPath)}function vd(h){return h.length>=4&&h.get(0)==="projects"&&h.get(2)==="databases"}class mc{constructor(t,s,u,f,w=bi.min(),E=bi.min(),$=pr.EMPTY_BYTE_STRING,J=null){this.target=t,this.targetId=s,this.purpose=u,this.sequenceNumber=f,this.snapshotVersion=w,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=$,this.expectedCount=J}withSequenceNumber(t){return new mc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new mc(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new mc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new mc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Sl{constructor(t){this.ht=t}}function yh(h,t){let s=t.key,u={prefixPath:s.getCollectionPath().popLast().toArray(),collectionGroup:s.collectionGroup,documentId:s.path.lastSegment(),readTime:wd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument()){var f;u.document={name:jo(f=h.ht,t.key),fields:t.data.value.mapValue.fields,updateTime:za(f,t.version.toTimestamp()),createTime:za(f,t.createTime.toTimestamp())}}else if(t.isNoDocument())u.noDocument={path:s.path.toArray(),readTime:Dc(t.version)};else{if(!t.isUnknownDocument())return Lr();u.unknownDocument={path:s.path.toArray(),version:Dc(t.version)}}return u}function wd(h){let t=h.toTimestamp();return[t.seconds,t.nanoseconds]}function Dc(h){let t=h.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ao(h){let t=new ta(h.seconds,h.nanoseconds);return bi.fromTimestamp(t)}function gr(h,t){let s=(t.baseMutations||[]).map(w=>Xn(h.ht,w));for(let w=0;w<t.mutations.length-1;++w){let E=t.mutations[w];if(w+1<t.mutations.length&&t.mutations[w+1].transform!==void 0){let $=t.mutations[w+1];E.updateTransforms=$.transform.fieldTransforms,t.mutations.splice(w+1,1),++w}}let u=t.mutations.map(w=>Xn(h.ht,w)),f=ta.fromMillis(t.localWriteTimeMs);return new yn(t.batchId,f,s,u)}function Vu(h){var t;let s=Ao(h.readTime),u=h.lastLimboFreeSnapshotVersion!==void 0?Ao(h.lastLimboFreeSnapshotVersion):bi.min();return new mc(h.query.documents!==void 0?((t=h.query).documents.length===1||Lr(),ot(B(bo(t.documents[0])))):ot(eh(h.query)),h.targetId,"TargetPurposeListen",h.lastListenSequenceNumber,s,u,pr.fromBase64String(h.resumeToken))}function Ql(h,t){let s,u=Dc(t.snapshotVersion),f=Dc(t.lastLimboFreeSnapshotVersion);s=Mu(t.target)?Po(h.ht,t.target):wu(h.ht,t.target).ct;let w=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:eo(t.target),readTime:u,resumeToken:w,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:f,query:s}}function Uh(h){let t=eh({parent:h.parent,structuredQuery:h.structuredQuery});return h.limitType==="LAST"?cr(t,t.limit,"L"):t}function bd(h,t){return new Ur(t.largestBatchId,Xn(h.ht,t.overlayMutation))}function Uu(h,t){let s=t.path.lastSegment();return[h,St(t.path.popLast()),s]}function Su(h,t,s,u){return{indexId:h,uid:t,sequenceNumber:s,readTime:Dc(u.readTime),documentKey:St(u.documentKey.path),largestBatchId:u.largestBatchId}}class Sd{getBundleMetadata(t,s){return $u(t).get(s).next(u=>{if(u)return{id:u.bundleId,createTime:Ao(u.createTime),version:u.version}})}saveBundleMetadata(t,s){return $u(t).put({bundleId:s.id,createTime:Dc(ka(s.createTime)),version:s.version})}getNamedQuery(t,s){return gc(t).get(s).next(u=>{if(u)return{name:u.name,query:Uh(u.bundledQuery),readTime:Ao(u.readTime)}})}saveNamedQuery(t,s){return gc(t).put({name:s.name,readTime:Dc(ka(s.readTime)),bundledQuery:s.bundledQuery})}}function $u(h){return $n(h,"bundles")}function gc(h){return $n(h,"namedQueries")}class vh{constructor(t,s){this.serializer=t,this.userId=s}static Pt(t,s){return new vh(t,s.uid||"")}getOverlay(t,s){return Mc(t).get(Uu(this.userId,s)).next(u=>u?bd(this.serializer,u):null)}getOverlays(t,s){let u=Di();return Qt.forEach(s,f=>this.getOverlay(t,f).next(w=>{w!==null&&u.set(f,w)})).next(()=>u)}saveOverlays(t,s,u){let f=[];return u.forEach((w,E)=>{let $=new Ur(s,E);f.push(this.Tt(t,$))}),Qt.waitFor(f)}removeOverlaysForBatchId(t,s,u){let f=new Set;s.forEach(E=>f.add(St(E.getCollectionPath())));let w=[];return f.forEach(E=>{let $=IDBKeyRange.bound([this.userId,E,u],[this.userId,E,u+1],!1,!0);w.push(Mc(t).j("collectionPathOverlayIndex",$))}),Qt.waitFor(w)}getOverlaysForCollection(t,s,u){let f=Di(),w=St(s),E=IDBKeyRange.bound([this.userId,w,u],[this.userId,w,Number.POSITIVE_INFINITY],!0);return Mc(t).U("collectionPathOverlayIndex",E).next($=>{for(let J of $){let ge=bd(this.serializer,J);f.set(ge.getKey(),ge)}return f})}getOverlaysForCollectionGroup(t,s,u,f){let w,E=Di(),$=IDBKeyRange.bound([this.userId,s,u],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Mc(t).J({index:"collectionGroupOverlayIndex",range:$},(J,ge,rt)=>{let Bt=bd(this.serializer,ge);E.size()<f||Bt.largestBatchId===w?(E.set(Bt.getKey(),Bt),w=Bt.largestBatchId):rt.done()}).next(()=>E)}Tt(t,s){return Mc(t).put(function(u,f,w){let[E,$,J]=Uu(f,w.mutation.key);return{userId:f,collectionPath:$,documentId:J,collectionGroup:w.mutation.key.getCollectionGroup(),largestBatchId:w.largestBatchId,overlayMutation:ao(u.ht,w.mutation)}}(this.serializer,this.userId,s))}}function Mc(h){return $n(h,"documentOverlays")}class Ed{It(t){return $n(t,"globals")}getSessionToken(t){return this.It(t).get("sessionToken").next(s=>{let u=s?.value;return u?pr.fromUint8Array(u):pr.EMPTY_BYTE_STRING})}setSessionToken(t,s){return this.It(t).put({name:"sessionToken",value:s.toUint8Array()})}}class oo{constructor(){}Et(t,s){this.dt(t,s),s.At()}dt(t,s){if("nullValue"in t)this.Rt(s,5);else if("booleanValue"in t)this.Rt(s,10),s.Vt(t.booleanValue?1:0);else if("integerValue"in t)this.Rt(s,15),s.Vt(Sn(t.integerValue));else if("doubleValue"in t){let u=Sn(t.doubleValue);isNaN(u)?this.Rt(s,13):(this.Rt(s,15),Me(u)?s.Vt(0):s.Vt(u))}else if("timestampValue"in t){let u=t.timestampValue;this.Rt(s,20),typeof u=="string"&&(u=sn(u)),s.ft(`${u.seconds||""}`),s.Vt(u.nanos||0)}else if("stringValue"in t)this.gt(t.stringValue,s),this.yt(s);else if("bytesValue"in t)this.Rt(s,30),s.wt(us(t.bytesValue)),this.yt(s);else if("referenceValue"in t)this.St(t.referenceValue,s);else if("geoPointValue"in t){let u=t.geoPointValue;this.Rt(s,45),s.Vt(u.latitude||0),s.Vt(u.longitude||0)}else"mapValue"in t?cs(t)?this.Rt(s,Number.MAX_SAFE_INTEGER):jn(t)?this.bt(t.mapValue,s):(this.Dt(t.mapValue,s),this.yt(s)):"arrayValue"in t?(this.vt(t.arrayValue,s),this.yt(s)):Lr()}gt(t,s){this.Rt(s,25),this.Ct(t,s)}Ct(t,s){s.ft(t)}Dt(t,s){let u=t.fields||{};for(let f of(this.Rt(s,55),Object.keys(u)))this.gt(f,s),this.dt(u[f],s)}bt(t,s){var u,f;let w=t.fields||{};this.Rt(s,53);let E="value",$=((f=(u=w[E].arrayValue)===null||u===void 0?void 0:u.values)===null||f===void 0?void 0:f.length)||0;this.Rt(s,15),s.Vt(Sn($)),this.gt(E,s),this.dt(w[E],s)}vt(t,s){let u=t.values||[];for(let f of(this.Rt(s,50),u))this.dt(f,s)}St(t,s){this.Rt(s,37),An.fromName(t).path.forEach(u=>{this.Rt(s,60),this.Ct(u,s)})}Rt(t,s){t.Vt(s)}yt(t){t.Vt(2)}}function Vp(h){return Math.ceil((64-function(t){let s=0;for(let u=0;u<8;++u){let f=function(w){if(w===0)return 8;let E=0;return w>>4==0&&(E+=4,w<<=4),w>>6==0&&(E+=2,w<<=2),w>>7==0&&(E+=1),E}(255&t[u]);if(s+=f,f!==8)break}return s}(h))/8)}oo.Ft=new oo;class th{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(t){let s=t[Symbol.iterator](),u=s.next();for(;!u.done;)this.xt(u.value),u=s.next();this.Ot()}Nt(t){let s=t[Symbol.iterator](),u=s.next();for(;!u.done;)this.Lt(u.value),u=s.next();this.Bt()}kt(t){for(let s of t){let u=s.charCodeAt(0);if(u<128)this.xt(u);else if(u<2048)this.xt(960|u>>>6),this.xt(128|63&u);else if(s<"\uD800"||"\uDBFF"<s)this.xt(480|u>>>12),this.xt(128|63&u>>>6),this.xt(128|63&u);else{let f=s.codePointAt(0);this.xt(240|f>>>18),this.xt(128|63&f>>>12),this.xt(128|63&f>>>6),this.xt(128|63&f)}}this.Ot()}qt(t){for(let s of t){let u=s.charCodeAt(0);if(u<128)this.Lt(u);else if(u<2048)this.Lt(960|u>>>6),this.Lt(128|63&u);else if(s<"\uD800"||"\uDBFF"<s)this.Lt(480|u>>>12),this.Lt(128|63&u>>>6),this.Lt(128|63&u);else{let f=s.codePointAt(0);this.Lt(240|f>>>18),this.Lt(128|63&f>>>12),this.Lt(128|63&f>>>6),this.Lt(128|63&f)}}this.Bt()}Qt(t){let s=this.Kt(t),u=Vp(s);this.$t(1+u),this.buffer[this.position++]=255&u;for(let f=s.length-u;f<s.length;++f)this.buffer[this.position++]=255&s[f]}Ut(t){let s=this.Kt(t),u=Vp(s);this.$t(1+u),this.buffer[this.position++]=~(255&u);for(let f=s.length-u;f<s.length;++f)this.buffer[this.position++]=~(255&s[f])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(t){this.$t(t.length),this.buffer.set(t,this.position),this.position+=t.length}Ht(){return this.buffer.slice(0,this.position)}Kt(t){let s=function(f){let w=new DataView(new ArrayBuffer(8));return w.setFloat64(0,f,!1),new Uint8Array(w.buffer)}(t),u=(128&s[0])!=0;s[0]^=u?255:128;for(let f=1;f<s.length;++f)s[f]^=u?255:0;return s}xt(t){let s=255&t;s===0?(this.Gt(0),this.Gt(255)):s===255?(this.Gt(255),this.Gt(0)):this.Gt(s)}Lt(t){let s=255&t;s===0?(this.jt(0),this.jt(255)):s===255?(this.jt(255),this.jt(0)):this.jt(t)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(t){this.$t(1),this.buffer[this.position++]=t}jt(t){this.$t(1),this.buffer[this.position++]=~t}$t(t){let s=t+this.position;if(s<=this.buffer.length)return;let u=2*this.buffer.length;u<s&&(u=s);let f=new Uint8Array(u);f.set(this.buffer),this.buffer=f}}class Qf{constructor(t){this.Jt=t}wt(t){this.Jt.Mt(t)}ft(t){this.Jt.kt(t)}Vt(t){this.Jt.Qt(t)}At(){this.Jt.Wt()}}class Fo{constructor(t){this.Jt=t}wt(t){this.Jt.Nt(t)}ft(t){this.Jt.qt(t)}Vt(t){this.Jt.Ut(t)}At(){this.Jt.zt()}}class su{constructor(){this.Jt=new th,this.Yt=new Qf(this.Jt),this.Zt=new Fo(this.Jt)}seed(t){this.Jt.seed(t)}Xt(t){return t===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}class Pl{constructor(t,s,u,f){this.indexId=t,this.documentKey=s,this.arrayValue=u,this.directionalValue=f}en(){let t=this.directionalValue.length,s=t===0||this.directionalValue[t-1]===255?t+1:t,u=new Uint8Array(s);return u.set(this.directionalValue,0),s!==t?u.set([0],this.directionalValue.length):++u[u.length-1],new Pl(this.indexId,this.documentKey,this.arrayValue,u)}}function Eu(h,t){let s=h.indexId-t.indexId;return s!==0||(s=Lc(h.arrayValue,t.arrayValue))!==0||(s=Lc(h.directionalValue,t.directionalValue))!==0?s:An.comparator(h.documentKey,t.documentKey)}function Lc(h,t){for(let s=0;s<h.length&&s<t.length;++s){let u=h[s]-t[s];if(u!==0)return u}return h.length-t.length}class jc{constructor(t){for(let s of(this.tn=new G((u,f)=>Ns.comparator(u.field,f.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.nn=t.orderBy,this.rn=[],t.filters))s.isInequality()?this.tn=this.tn.add(s):this.rn.push(s)}get sn(){return this.tn.size>1}on(t){if(t.collectionGroup===this.collectionId||Lr(),this.sn)return!1;let s=zl(t);if(s!==void 0&&!this._n(s))return!1;let u=ii(t),f=new Set,w=0,E=0;for(;w<u.length&&this._n(u[w]);++w)f=f.add(u[w].fieldPath.canonicalString());if(w===u.length)return!0;if(this.tn.size>0){let $=this.tn.getIterator().getNext();if(!f.has($.field.canonicalString())){let J=u[w];if(!this.an($,J)||!this.un(this.nn[E++],J))return!1}++w}for(;w<u.length;++w){let $=u[w];if(E>=this.nn.length||!this.un(this.nn[E++],$))return!1}return!0}cn(){if(this.sn)return null;let t=new G(Ns.comparator),s=[];for(let u of this.rn)if(!u.field.isKeyField())if(u.op==="array-contains"||u.op==="array-contains-any")s.push(new ba(u.field,2));else{if(t.has(u.field))continue;t=t.add(u.field),s.push(new ba(u.field,0))}for(let u of this.nn)u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),s.push(new ba(u.field,u.dir==="asc"?0:1)));return new Qa(Qa.UNKNOWN_ID,this.collectionId,s,Gl.empty())}_n(t){for(let s of this.rn)if(this.an(s,t))return!0;return!1}an(t,s){if(t===void 0||!t.field.isEqual(s.fieldPath))return!1;let u=t.op==="array-contains"||t.op==="array-contains-any";return s.kind===2===u}un(t,s){return!!t.field.isEqual(s.fieldPath)&&(s.kind===0&&t.dir==="asc"||s.kind===1&&t.dir==="desc")}}function wh(h){return h instanceof Li}function bh(h){return h instanceof Qi&&ll(h)}function Up(h){return wh(h)||bh(h)||function(t){if(t instanceof Qi&&Za(t)){for(let s of t.getFilters())if(!wh(s)&&!bh(s))return!1;return!0}return!1}(h)}function of(h,t){return h instanceof Li||h instanceof Qi||Lr(),t instanceof Li||t instanceof Qi||Lr(),_d(h instanceof Li?t instanceof Li?Qi.create([h,t],"and"):Yf(h,t):t instanceof Li?Yf(t,h):function(s,u){if(s.filters.length>0&&u.filters.length>0||Lr(),ko(s)&&ko(u))return Ou(s,u.getFilters());let f=Za(s)?s:u,w=Za(s)?u:s,E=f.filters.map($=>of($,w));return Qi.create(E,"or")}(h,t))}function Yf(h,t){if(ko(t))return Ou(t,h.getFilters());{let s=t.filters.map(u=>of(h,u));return Qi.create(s,"or")}}function _d(h){if(h instanceof Li||h instanceof Qi||Lr(),h instanceof Li)return h;let t=h.getFilters();if(t.length===1)return _d(t[0]);if(tl(h))return h;let s=t.map(f=>_d(f)),u=[];return s.forEach(f=>{f instanceof Li?u.push(f):f instanceof Qi&&(f.op===h.op?u.push(...f.filters):u.push(f))}),u.length===1?u[0]:Qi.create(u,h.op)}class $h{constructor(){this.ln=new Sh}addToCollectionParentIndex(t,s){return this.ln.add(s),Qt.resolve()}getCollectionParents(t,s){return Qt.resolve(this.ln.getEntries(s))}addFieldIndex(t,s){return Qt.resolve()}deleteFieldIndex(t,s){return Qt.resolve()}deleteAllFieldIndexes(t){return Qt.resolve()}createTargetIndexes(t,s){return Qt.resolve()}getDocumentsMatchingTarget(t,s){return Qt.resolve(null)}getIndexType(t,s){return Qt.resolve(0)}getFieldIndexes(t,s){return Qt.resolve([])}getNextCollectionGroupToUpdate(t){return Qt.resolve(null)}getMinOffset(t,s){return Qt.resolve(so.min())}getMinOffsetFromCollectionGroup(t,s){return Qt.resolve(so.min())}updateCollectionGroup(t,s,u){return Qt.resolve()}updateIndexEntries(t,s){return Qt.resolve()}}class Sh{constructor(){this.index={}}add(t){let s=t.lastSegment(),u=t.popLast(),f=this.index[s]||new G(Ts.comparator),w=!f.has(u);return this.index[s]=f.add(u),w}has(t){let s=t.lastSegment(),u=t.popLast(),f=this.index[s];return f&&f.has(u)}getEntries(t){return(this.index[t]||new G(Ts.comparator)).toArray()}}let lf=new Uint8Array(0);class Xf{constructor(t,s){this.databaseId=s,this.hn=new Sh,this.Pn=new dn(u=>eo(u),(u,f)=>iu(u,f)),this.uid=t.uid||""}addToCollectionParentIndex(t,s){if(!this.hn.has(s)){let u=s.lastSegment(),f=s.popLast();t.addOnCommittedListener(()=>{this.hn.add(s)});let w={collectionId:u,parent:St(f)};return El(t).put(w)}return Qt.resolve()}getCollectionParents(t,s){let u=[],f=IDBKeyRange.bound([s,""],[s+"\0",""],!1,!0);return El(t).U(f).next(w=>{for(let E of w){if(E.collectionId!==s)break;u.push(Wt(E.parent))}return u})}addFieldIndex(t,s){let u=qh(t),f={indexId:s.indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(E=>[E.fieldPath.canonicalString(),E.kind])};delete f.indexId;let w=u.add(f);if(s.indexState){let E=sc(t);return w.next($=>{E.put(Su($,this.uid,s.indexState.sequenceNumber,s.indexState.offset))})}return w.next()}deleteFieldIndex(t,s){let u=qh(t),f=sc(t),w=Bh(t);return u.delete(s.indexId).next(()=>f.delete(IDBKeyRange.bound([s.indexId],[s.indexId+1],!1,!0))).next(()=>w.delete(IDBKeyRange.bound([s.indexId],[s.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let s=qh(t),u=Bh(t),f=sc(t);return s.j().next(()=>u.j()).next(()=>f.j())}createTargetIndexes(t,s){return Qt.forEach(this.Tn(s),u=>this.getIndexType(t,u).next(f=>{if(f===0||f===1){let w=new jc(u).cn();if(w!=null)return this.addFieldIndex(t,w)}}))}getDocumentsMatchingTarget(t,s){let u=Bh(t),f=!0,w=new Map;return Qt.forEach(this.Tn(s),E=>this.In(t,E).next($=>{f&&(f=!!$),w.set(E,$)})).next(()=>{if(f){let E=Ti(),$=[];return Qt.forEach(w,(J,ge)=>{yr("IndexedDbIndexManager",`Using index id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map(ls=>`${ls.fieldPath}:${ls.kind}`).join(",")} to execute ${eo(s)}`);let rt=function(ls,dr){let Lt=zl(dr);if(Lt===void 0)return null;for(let Vt of Xc(ls,Lt.fieldPath))switch(Vt.op){case"array-contains-any":return Vt.value.arrayValue.values||[];case"array-contains":return[Vt.value]}return null}(ge,J),Bt=function(ls,dr){let Lt=new Map;for(let Vt of ii(dr))for(let er of Xc(ls,Vt.fieldPath))switch(er.op){case"==":case"in":Lt.set(Vt.fieldPath.canonicalString(),er.value);break;case"not-in":case"!=":return Lt.set(Vt.fieldPath.canonicalString(),er.value),Array.from(Lt.values())}return null}(ge,J),ir=function(ls,dr){let Lt=[],Vt=!0;for(let er of ii(dr)){let fr=er.kind===0?Lu(ls,er.fieldPath,ls.startAt):yu(ls,er.fieldPath,ls.startAt);Lt.push(fr.value),Vt&&(Vt=fr.inclusive)}return new Ds(Lt,Vt)}(ge,J),Rr=function(ls,dr){let Lt=[],Vt=!0;for(let er of ii(dr)){let fr=er.kind===0?yu(ls,er.fieldPath,ls.endAt):Lu(ls,er.fieldPath,ls.endAt);Lt.push(fr.value),Vt&&(Vt=fr.inclusive)}return new Ds(Lt,Vt)}(ge,J),Vn=this.En(J,ge,ir),oi=this.En(J,ge,Rr),vi=this.dn(J,ge,Bt),Gs=this.An(J.indexId,rt,Vn,ir.inclusive,oi,Rr.inclusive,vi);return Qt.forEach(Gs,ls=>u.G(ls,s.limit).next(dr=>{dr.forEach(Lt=>{let Vt=An.fromSegments(Lt.documentKey);E.has(Vt)||(E=E.add(Vt),$.push(Vt))})}))}).next(()=>$)}return Qt.resolve(null)})}Tn(t){let s=this.Pn.get(t);return s||(s=t.filters.length===0?[t]:function(u){if(u.getFilters().length===0)return[];let f=function w(E){if(E instanceof Li||E instanceof Qi||Lr(),E instanceof Li)return E;if(E.filters.length===1)return w(E.filters[0]);let $=E.filters.map(ge=>w(ge)),J=Qi.create($,E.op);return Up(J=_d(J))?J:(J instanceof Qi||Lr(),ko(J)||Lr(),J.filters.length>1||Lr(),J.filters.reduce((ge,rt)=>of(ge,rt)))}(function w(E){var $,J;if(E instanceof Li||E instanceof Qi||Lr(),E instanceof Li){if(E instanceof gu){let rt=((J=($=E.value.arrayValue)===null||$===void 0?void 0:$.values)===null||J===void 0?void 0:J.map(Bt=>Li.create(E.field,"==",Bt)))||[];return Qi.create(rt,"or")}return E}let ge=E.filters.map(rt=>w(rt));return Qi.create(ge,E.op)}(u));return Up(f)||Lr(),wh(f)||bh(f)?[f]:f.getFilters()}(Qi.create(t.filters,"and")).map(u=>Du(t.path,t.collectionGroup,t.orderBy,u.getFilters(),t.limit,t.startAt,t.endAt)),this.Pn.set(t,s)),s}An(t,s,u,f,w,E,$){let J=(s!=null?s.length:1)*Math.max(u.length,w.length),ge=J/(s!=null?s.length:1),rt=[];for(let Bt=0;Bt<J;++Bt){let ir=s?this.Rn(s[Bt/ge]):lf,Rr=this.Vn(t,ir,u[Bt%ge],f),Vn=this.mn(t,ir,w[Bt%ge],E),oi=$.map(vi=>this.Vn(t,ir,vi,!0));rt.push(...this.createRange(Rr,Vn,oi))}return rt}Vn(t,s,u,f){let w=new Pl(t,An.empty(),s,u);return f?w:w.en()}mn(t,s,u,f){let w=new Pl(t,An.empty(),s,u);return f?w.en():w}In(t,s){let u=new jc(s),f=s.collectionGroup!=null?s.collectionGroup:s.path.lastSegment();return this.getFieldIndexes(t,f).next(w=>{let E=null;for(let $ of w)u.on($)&&(!E||$.fields.length>E.fields.length)&&(E=$);return E})}getIndexType(t,s){let u=2,f=this.Tn(s);return Qt.forEach(f,w=>this.In(t,w).next(E=>{E?u!==0&&E.fields.length<function($){let J=new G(Ns.comparator),ge=!1;for(let rt of $.filters)for(let Bt of rt.getFlattenedFilters())Bt.field.isKeyField()||(Bt.op==="array-contains"||Bt.op==="array-contains-any"?ge=!0:J=J.add(Bt.field));for(let rt of $.orderBy)rt.field.isKeyField()||(J=J.add(rt.field));return J.size+(ge?1:0)}(w)&&(u=1):u=0})).next(()=>s.limit!==null&&f.length>1&&u===2?1:u)}fn(t,s){let u=new su;for(let f of ii(t)){let w=s.data.field(f.fieldPath);if(w==null)return null;let E=u.Xt(f.kind);oo.Ft.Et(w,E)}return u.Ht()}Rn(t){let s=new su;return oo.Ft.Et(t,s.Xt(0)),s.Ht()}gn(t,s){let u=new su;return oo.Ft.Et(po(this.databaseId,s),u.Xt(function(f){let w=ii(f);return w.length===0?0:w[w.length-1].kind}(t))),u.Ht()}dn(t,s,u){if(u===null)return[];let f=[];f.push(new su);let w=0;for(let E of ii(t)){let $=u[w++];for(let J of f)if(this.pn(s,E.fieldPath)&&mo($))f=this.yn(f,E,$);else{let ge=J.Xt(E.kind);oo.Ft.Et($,ge)}}return this.wn(f)}En(t,s,u){return this.dn(t,s,u.position)}wn(t){let s=[];for(let u=0;u<t.length;++u)s[u]=t[u].Ht();return s}yn(t,s,u){let f=[...t],w=[];for(let E of u.arrayValue.values||[])for(let $ of f){let J=new su;J.seed($.Ht()),oo.Ft.Et(E,J.Xt(s.kind)),w.push(J)}return w}pn(t,s){return!!t.filters.find(u=>u instanceof Li&&u.field.isEqual(s)&&(u.op==="in"||u.op==="not-in"))}getFieldIndexes(t,s){let u=qh(t),f=sc(t);return(s?u.U("collectionGroupIndex",IDBKeyRange.bound(s,s)):u.U()).next(w=>{let E=[];return Qt.forEach(w,$=>f.get([$.indexId,this.uid]).next(J=>{E.push(function(ge,rt){let Bt=rt?new Gl(rt.sequenceNumber,new so(Ao(rt.readTime),new An(Wt(rt.documentKey)),rt.largestBatchId)):Gl.empty(),ir=ge.fields.map(([Rr,Vn])=>new ba(Ns.fromServerFormat(Rr),Vn));return new Qa(ge.indexId,ge.collectionGroup,ir,Bt)}($,J))})).next(()=>E)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(s=>s.length===0?null:(s.sort((u,f)=>{let w=u.indexState.sequenceNumber-f.indexState.sequenceNumber;return w!==0?w:ci(u.collectionGroup,f.collectionGroup)}),s[0].collectionGroup))}updateCollectionGroup(t,s,u){let f=qh(t),w=sc(t);return this.Sn(t).next(E=>f.U("collectionGroupIndex",IDBKeyRange.bound(s,s)).next($=>Qt.forEach($,J=>w.put(Su(J.indexId,this.uid,E,u)))))}updateIndexEntries(t,s){let u=new Map;return Qt.forEach(s,(f,w)=>{let E=u.get(f.collectionGroup);return(E?Qt.resolve(E):this.getFieldIndexes(t,f.collectionGroup)).next($=>(u.set(f.collectionGroup,$),Qt.forEach($,J=>this.bn(t,f,J).next(ge=>{let rt=this.Dn(w,J);return ge.isEqual(rt)?Qt.resolve():this.vn(t,w,J,ge,rt)}))))})}Cn(t,s,u,f){return Bh(t).put({indexId:f.indexId,uid:this.uid,arrayValue:f.arrayValue,directionalValue:f.directionalValue,orderedDocumentKey:this.gn(u,s.key),documentKey:s.key.path.toArray()})}Fn(t,s,u,f){return Bh(t).delete([f.indexId,this.uid,f.arrayValue,f.directionalValue,this.gn(u,s.key),s.key.path.toArray()])}bn(t,s,u){let f=Bh(t),w=new G(Eu);return f.J({index:"documentKeyIndex",range:IDBKeyRange.only([u.indexId,this.uid,this.gn(u,s)])},(E,$)=>{w=w.add(new Pl(u.indexId,s,$.arrayValue,$.directionalValue))}).next(()=>w)}Dn(t,s){let u=new G(Eu),f=this.fn(s,t);if(f==null)return u;let w=zl(s);if(w!=null){let E=t.data.field(w.fieldPath);if(mo(E))for(let $ of E.arrayValue.values||[])u=u.add(new Pl(s.indexId,t.key,this.Rn($),f))}else u=u.add(new Pl(s.indexId,t.key,lf,f));return u}vn(t,s,u,f,w){yr("IndexedDbIndexManager","Updating index entries for document '%s'",s.key);let E=[];return function($,J,ge,rt,Bt){let ir=$.getIterator(),Rr=J.getIterator(),Vn=qe(ir),oi=qe(Rr);for(;Vn||oi;){let vi=!1,Gs=!1;if(Vn&&oi){let ls=ge(Vn,oi);ls<0?Gs=!0:ls>0&&(vi=!0)}else Vn!=null?Gs=!0:vi=!0;vi?(rt(oi),oi=qe(Rr)):Gs?(Bt(Vn),Vn=qe(ir)):(Vn=qe(ir),oi=qe(Rr))}}(f,w,Eu,$=>{E.push(this.Cn(t,s,u,$))},$=>{E.push(this.Fn(t,s,u,$))}),Qt.waitFor(E)}Sn(t){let s=1;return sc(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(u,f,w)=>{w.done(),s=f.sequenceNumber+1}).next(()=>s)}createRange(t,s,u){u=u.sort((E,$)=>Eu(E,$)).filter((E,$,J)=>!$||Eu(E,J[$-1])!==0);let f=[];for(let E of(f.push(t),u)){let $=Eu(E,t),J=Eu(E,s);if($===0)f[0]=t.en();else if($>0&&J<0)f.push(E),f.push(E.en());else if(J>0)break}f.push(s);let w=[];for(let E=0;E<f.length;E+=2){if(this.Mn(f[E],f[E+1]))return[];let $=[f[E].indexId,this.uid,f[E].arrayValue,f[E].directionalValue,lf,[]],J=[f[E+1].indexId,this.uid,f[E+1].arrayValue,f[E+1].directionalValue,lf,[]];w.push(IDBKeyRange.bound($,J))}return w}Mn(t,s){return Eu(t,s)>0}getMinOffsetFromCollectionGroup(t,s){return this.getFieldIndexes(t,s).next(Bu)}getMinOffset(t,s){return Qt.mapArray(this.Tn(s),u=>this.In(t,u).next(f=>f||Lr())).next(Bu)}}function El(h){return $n(h,"collectionParents")}function Bh(h){return $n(h,"indexEntries")}function qh(h){return $n(h,"indexConfiguration")}function sc(h){return $n(h,"indexState")}function Bu(h){h.length!==0||Lr();let t=h[0].indexState.offset,s=t.largestBatchId;for(let u=1;u<h.length;u++){let f=h[u].indexState.offset;0>Cl(f,t)&&(t=f),s<f.largestBatchId&&(s=f.largestBatchId)}return new so(t.readTime,t.documentKey,s)}let rh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qo{static withCacheSize(t){return new qo(t,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,u){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=u}}function uf(h,t,s){let u=h.store("mutations"),f=h.store("documentMutations"),w=[],E=IDBKeyRange.only(s.batchId),$=0,J=u.J({range:E},(ir,Rr,Vn)=>($++,Vn.delete()));w.push(J.next(()=>{$===1||Lr()}));let ge=[];for(let ir of s.mutations){var rt,Bt;let Rr=(rt=ir.key.path,Bt=s.batchId,[t,St(rt),Bt]);w.push(f.delete(Rr)),ge.push(ir.key)}return Qt.waitFor(w).next(()=>ge)}function So(h){let t;if(!h)return 0;if(h.document)t=h.document;else if(h.unknownDocument)t=h.unknownDocument;else{if(!h.noDocument)throw Lr();t=h.noDocument}return JSON.stringify(t).length}qo.DEFAULT_COLLECTION_PERCENTILE=10,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qo.DEFAULT=new qo(41943040,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qo.DISABLED=new qo(-1,0,0);class Eh{constructor(t,s,u,f){this.userId=t,this.serializer=s,this.indexManager=u,this.referenceDelegate=f,this.xn={}}static Pt(t,s,u,f){return t.uid!==""||Lr(),new Eh(t.isAuthenticated()?t.uid:"",s,u,f)}checkEmpty(t){let s=!0,u=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return au(t).J({index:"userMutationsIndex",range:u},(f,w,E)=>{s=!1,E.done()}).next(()=>s)}addMutationBatch(t,s,u,f){let w=oa(t),E=au(t);return E.add({}).next($=>{typeof $=="number"||Lr();let J=new yn($,s,u,f),ge=function(ir,Rr,Vn){let oi=Vn.baseMutations.map(Gs=>ao(ir.ht,Gs)),vi=Vn.mutations.map(Gs=>ao(ir.ht,Gs));return{userId:Rr,batchId:Vn.batchId,localWriteTimeMs:Vn.localWriteTime.toMillis(),baseMutations:oi,mutations:vi}}(this.serializer,this.userId,J),rt=[],Bt=new G((ir,Rr)=>ci(ir.canonicalString(),Rr.canonicalString()));for(let ir of f){let Rr=[this.userId,St(ir.key.path),$];Bt=Bt.add(ir.key.path.popLast()),rt.push(E.put(ge)),rt.push(w.put(Rr,Ir))}return Bt.forEach(ir=>{rt.push(this.indexManager.addToCollectionParentIndex(t,ir))}),t.addOnCommittedListener(()=>{this.xn[$]=J.keys()}),Qt.waitFor(rt).next(()=>J)})}lookupMutationBatch(t,s){return au(t).get(s).next(u=>u?(u.userId===this.userId||Lr(),gr(this.serializer,u)):null)}On(t,s){return this.xn[s]?Qt.resolve(this.xn[s]):this.lookupMutationBatch(t,s).next(u=>{if(u){let f=u.keys();return this.xn[s]=f,f}return null})}getNextMutationBatchAfterBatchId(t,s){let u=s+1,f=IDBKeyRange.lowerBound([this.userId,u]),w=null;return au(t).J({index:"userMutationsIndex",range:f},(E,$,J)=>{$.userId===this.userId&&($.batchId>=u||Lr(),w=gr(this.serializer,$)),J.done()}).next(()=>w)}getHighestUnacknowledgedBatchId(t){let s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),u=-1;return au(t).J({index:"userMutationsIndex",range:s,reverse:!0},(f,w,E)=>{u=w.batchId,E.done()}).next(()=>u)}getAllMutationBatches(t){let s=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return au(t).U("userMutationsIndex",s).next(u=>u.map(f=>gr(this.serializer,f)))}getAllMutationBatchesAffectingDocumentKey(t,s){let u=[this.userId,St(s.path)],f=IDBKeyRange.lowerBound(u),w=[];return oa(t).J({range:f},(E,$,J)=>{let[ge,rt,Bt]=E,ir=Wt(rt);if(ge===this.userId&&s.path.isEqual(ir))return au(t).get(Bt).next(Rr=>{if(!Rr)throw Lr();Rr.userId===this.userId||Lr(),w.push(gr(this.serializer,Rr))});J.done()}).next(()=>w)}getAllMutationBatchesAffectingDocumentKeys(t,s){let u=new G(ci),f=[];return s.forEach(w=>{let E=[this.userId,St(w.path)],$=IDBKeyRange.lowerBound(E),J=oa(t).J({range:$},(ge,rt,Bt)=>{let[ir,Rr,Vn]=ge,oi=Wt(Rr);ir===this.userId&&w.path.isEqual(oi)?u=u.add(Vn):Bt.done()});f.push(J)}),Qt.waitFor(f).next(()=>this.Nn(t,u))}getAllMutationBatchesAffectingQuery(t,s){let u=s.path,f=u.length+1,w=[this.userId,St(u)],E=IDBKeyRange.lowerBound(w),$=new G(ci);return oa(t).J({range:E},(J,ge,rt)=>{let[Bt,ir,Rr]=J,Vn=Wt(ir);Bt===this.userId&&u.isPrefixOf(Vn)?Vn.length===f&&($=$.add(Rr)):rt.done()}).next(()=>this.Nn(t,$))}Nn(t,s){let u=[],f=[];return s.forEach(w=>{f.push(au(t).get(w).next(E=>{if(E===null)throw Lr();E.userId===this.userId||Lr(),u.push(gr(this.serializer,E))}))}),Qt.waitFor(f).next(()=>u)}removeMutationBatch(t,s){return uf(t._e,this.userId,s).next(u=>(t.addOnCommittedListener(()=>{this.Ln(s.batchId)}),Qt.forEach(u,f=>this.referenceDelegate.markPotentiallyOrphaned(t,f))))}Ln(t){delete this.xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(s=>{if(!s)return Qt.resolve();let u=IDBKeyRange.lowerBound([this.userId]),f=[];return oa(t).J({range:u},(w,E,$)=>{if(w[0]===this.userId){let J=Wt(w[1]);f.push(J)}else $.done()}).next(()=>{f.length===0||Lr()})})}containsKey(t,s){return _h(t,this.userId,s)}Bn(t){return Fc(t).get(this.userId).next(s=>s||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _h(h,t,s){let u=[t,St(s.path)],f=u[1],w=IDBKeyRange.lowerBound(u),E=!1;return oa(h).J({range:w,H:!0},($,J,ge)=>{let[rt,Bt,ir]=$;rt===t&&Bt===f&&(E=!0),ge.done()}).next(()=>E)}function au(h){return $n(h,"mutations")}function oa(h){return $n(h,"documentMutations")}function Fc(h){return $n(h,"mutationQueues")}class ja{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new ja(0)}static Qn(){return new ja(-1)}}class ha{constructor(t,s){this.referenceDelegate=t,this.serializer=s}allocateTargetId(t){return this.Kn(t).next(s=>{let u=new ja(s.highestTargetId);return s.highestTargetId=u.next(),this.$n(t,s).next(()=>s.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Kn(t).next(s=>bi.fromTimestamp(new ta(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Kn(t).next(s=>s.highestListenSequenceNumber)}setTargetsMetadata(t,s,u){return this.Kn(t).next(f=>(f.highestListenSequenceNumber=s,u&&(f.lastRemoteSnapshotVersion=u.toTimestamp()),s>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=s),this.$n(t,f)))}addTargetData(t,s){return this.Un(t,s).next(()=>this.Kn(t).next(u=>(u.targetCount+=1,this.Wn(s,u),this.$n(t,u))))}updateTargetData(t,s){return this.Un(t,s)}removeTargetData(t,s){return this.removeMatchingKeysForTargetId(t,s.targetId).next(()=>yc(t).delete(s.targetId)).next(()=>this.Kn(t)).next(u=>(u.targetCount>0||Lr(),u.targetCount-=1,this.$n(t,u)))}removeTargets(t,s,u){let f=0,w=[];return yc(t).J((E,$)=>{let J=Vu($);J.sequenceNumber<=s&&u.get(J.targetId)===null&&(f++,w.push(this.removeTargetData(t,J)))}).next(()=>Qt.waitFor(w)).next(()=>f)}forEachTarget(t,s){return yc(t).J((u,f)=>{s(Vu(f))})}Kn(t){return vc(t).get("targetGlobalKey").next(s=>(s!==null||Lr(),s))}$n(t,s){return vc(t).put("targetGlobalKey",s)}Un(t,s){return yc(t).put(Ql(this.serializer,s))}Wn(t,s){let u=!1;return t.targetId>s.highestTargetId&&(s.highestTargetId=t.targetId,u=!0),t.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t.sequenceNumber,u=!0),u}getTargetCount(t){return this.Kn(t).next(s=>s.targetCount)}getTargetData(t,s){let u=eo(s),f=IDBKeyRange.bound([u,Number.NEGATIVE_INFINITY],[u,Number.POSITIVE_INFINITY]),w=null;return yc(t).J({range:f,index:"queryTargetsIndex"},(E,$,J)=>{let ge=Vu($);iu(s,ge.target)&&(w=ge,J.done())}).next(()=>w)}addMatchingKeys(t,s,u){let f=[],w=hl(t);return s.forEach(E=>{let $=St(E.path);f.push(w.put({targetId:u,path:$})),f.push(this.referenceDelegate.addReference(t,u,E))}),Qt.waitFor(f)}removeMatchingKeys(t,s,u){let f=hl(t);return Qt.forEach(s,w=>{let E=St(w.path);return Qt.waitFor([f.delete([u,E]),this.referenceDelegate.removeReference(t,u,w)])})}removeMatchingKeysForTargetId(t,s){let u=hl(t),f=IDBKeyRange.bound([s],[s+1],!1,!0);return u.delete(f)}getMatchingKeysForTargetId(t,s){let u=IDBKeyRange.bound([s],[s+1],!1,!0),f=hl(t),w=Ti();return f.J({range:u,H:!0},(E,$,J)=>{let ge=new An(Wt(E[1]));w=w.add(ge)}).next(()=>w)}containsKey(t,s){let u=St(s.path),f=IDBKeyRange.bound([u],[u+"\0"],!1,!0),w=0;return hl(t).J({index:"documentTargetsIndex",H:!0,range:f},([E,$],J,ge)=>{E!==0&&(w++,ge.done())}).next(()=>w>0)}ut(t,s){return yc(t).get(s).next(u=>u?Vu(u):null)}}function yc(h){return $n(h,"targets")}function vc(h){return $n(h,"targetGlobal")}function hl(h){return $n(h,"targetDocuments")}function nh([h,t],[s,u]){let f=ci(h,s);return f===0?ci(t,u):f}class Fa{constructor(t){this.Gn=t,this.buffer=new G(nh),this.zn=0}jn(){return++this.zn}Hn(t){let s=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(s);else{let u=this.buffer.last();0>nh(s,u)&&(this.buffer=this.buffer.delete(u).add(s))}}get maxValue(){return this.buffer.last()[0]}}class Id{constructor(t,s,u){this.garbageCollector=t,this.asyncQueue=s,this.localStore=u,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){yr("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Kl(s)?yr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):await pa(s)}await this.Yn(3e5)})}}class qu{constructor(t,s){this.Zn=t,this.params=s}calculateTargetCount(t,s){return this.Zn.Xn(t).next(u=>Math.floor(s/100*u))}nthSequenceNumber(t,s){if(s===0)return Qt.resolve(ho.oe);let u=new Fa(s);return this.Zn.forEachTarget(t,f=>u.Hn(f.sequenceNumber)).next(()=>this.Zn.er(t,f=>u.Hn(f))).next(()=>u.maxValue)}removeTargets(t,s,u){return this.Zn.removeTargets(t,s,u)}removeOrphanedDocuments(t,s){return this.Zn.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(yr("LruGarbageCollector","Garbage collection skipped; disabled"),Qt.resolve(rh)):this.getCacheSize(t).next(u=>u<this.params.cacheSizeCollectionThreshold?(yr("LruGarbageCollector",`Garbage collection skipped; Cache size ${u} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rh):this.tr(t,s))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,s){let u,f,w,E,$,J,ge,rt=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(Bt=>(Bt>this.params.maximumSequenceNumbersToCollect?(yr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Bt}`),f=this.params.maximumSequenceNumbersToCollect):f=Bt,E=Date.now(),this.nthSequenceNumber(t,f))).next(Bt=>(u=Bt,$=Date.now(),this.removeTargets(t,u,s))).next(Bt=>(w=Bt,J=Date.now(),this.removeOrphanedDocuments(t,u))).next(Bt=>(ge=Date.now(),Qr()<=j.DEBUG&&yr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${E-rt}ms
	Determined least recently used ${f} in `+($-E)+`ms
	Removed ${w} targets in `+(J-$)+`ms
	Removed ${Bt} documents in `+(ge-J)+`ms
Total Duration: ${ge-rt}ms`),Qt.resolve({didRun:!0,sequenceNumbersCollected:f,targetsRemoved:w,documentsRemoved:Bt})))}}class Wa{constructor(t,s){this.db=t,this.garbageCollector=new qu(this,s)}Xn(t){let s=this.nr(t);return this.db.getTargetCache().getTargetCount(t).next(u=>s.next(f=>u+f))}nr(t){let s=0;return this.er(t,u=>{s++}).next(()=>s)}forEachTarget(t,s){return this.db.getTargetCache().forEachTarget(t,s)}er(t,s){return this.rr(t,(u,f)=>s(f))}addReference(t,s,u){return lo(t,u)}removeReference(t,s,u){return lo(t,u)}removeTargets(t,s,u){return this.db.getTargetCache().removeTargets(t,s,u)}markPotentiallyOrphaned(t,s){return lo(t,s)}ir(t,s){let u;return u=!1,Fc(t).Y(f=>_h(t,f,s).next(w=>(w&&(u=!0),Qt.resolve(!w)))).next(()=>u)}removeOrphanedDocuments(t,s){let u=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[],w=0;return this.rr(t,(E,$)=>{if($<=s){let J=this.ir(t,E).next(ge=>{if(!ge)return w++,u.getEntry(t,E).next(()=>(u.removeEntry(E,bi.min()),hl(t).delete([0,St(E.path)])))});f.push(J)}}).next(()=>Qt.waitFor(f)).next(()=>u.apply(t)).next(()=>w)}removeTarget(t,s){let u=s.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,u)}updateLimboDocument(t,s){return lo(t,s)}rr(t,s){let u=hl(t),f,w=ho.oe;return u.J({index:"documentTargetsIndex"},([E,$],{path:J,sequenceNumber:ge})=>{E===0?(w!==ho.oe&&s(new An(Wt(f)),w),w=ge,f=J):w=ho.oe}).next(()=>{w!==ho.oe&&s(new An(Wt(f)),w)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function lo(h,t){var s;return hl(h).put((s=h.currentSequenceNumber,{targetId:0,path:St(t.path),sequenceNumber:s}))}class No{constructor(){this.changes=new dn(t=>t.toString(),(t,s)=>t.isEqual(s)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,ss.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();let u=this.changes.get(s);return u!==void 0?Qt.resolve(u):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class zh{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,s,u){return dl(t).put(u)}removeEntry(t,s,u){return dl(t).delete(function(f,w){let E=f.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],wd(w),E[E.length-1]]}(s,u))}updateMetadata(t,s){return this.getMetadata(t).next(u=>(u.byteSize+=s,this.sr(t,u)))}getEntry(t,s){let u=ss.newInvalidDocument(s);return dl(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(_u(s))},(f,w)=>{u=this._r(s,w)}).next(()=>u)}ar(t,s){let u={size:0,document:ss.newInvalidDocument(s)};return dl(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(_u(s))},(f,w)=>{u={document:this._r(s,w),size:So(w)}}).next(()=>u)}getEntries(t,s){let u=Wn;return this.ur(t,s,(f,w)=>{let E=this._r(f,w);u=u.insert(f,E)}).next(()=>u)}cr(t,s){let u=Wn,f=new hi(An.comparator);return this.ur(t,s,(w,E)=>{let $=this._r(w,E);u=u.insert(w,$),f=f.insert(w,So(E))}).next(()=>({documents:u,lr:f}))}ur(t,s,u){if(s.isEmpty())return Qt.resolve();let f=new G(Vc);s.forEach(J=>f=f.add(J));let w=IDBKeyRange.bound(_u(f.first()),_u(f.last())),E=f.getIterator(),$=E.getNext();return dl(t).J({index:"documentKeyIndex",range:w},(J,ge,rt)=>{let Bt=An.fromSegments([...ge.prefixPath,ge.collectionGroup,ge.documentId]);for(;$&&0>Vc($,Bt);)u($,null),$=E.getNext();$&&$.isEqual(Bt)&&(u($,ge),$=E.hasNext()?E.getNext():null),$?rt.$(_u($)):rt.done()}).next(()=>{for(;$;)u($,null),$=E.hasNext()?E.getNext():null})}getDocumentsMatchingQuery(t,s,u,f,w){let E=s.path,$=[E.popLast().toArray(),E.lastSegment(),wd(u.readTime),u.documentKey.path.isEmpty()?"":u.documentKey.path.lastSegment()],J=[E.popLast().toArray(),E.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dl(t).U(IDBKeyRange.bound($,J,!0)).next(ge=>{w?.incrementDocumentReadCount(ge.length);let rt=Wn;for(let Bt of ge){let ir=this._r(An.fromSegments(Bt.prefixPath.concat(Bt.collectionGroup,Bt.documentId)),Bt);ir.isFoundDocument()&&(Mn(s,ir)||f.has(ir.key))&&(rt=rt.insert(ir.key,ir))}return rt})}getAllFromCollectionGroup(t,s,u,f){let w=Wn,E=Gh(s,u),$=Gh(s,so.max());return dl(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,$,!0)},(J,ge,rt)=>{let Bt=this._r(An.fromSegments(ge.prefixPath.concat(ge.collectionGroup,ge.documentId)),ge);(w=w.insert(Bt.key,Bt)).size===f&&rt.done()}).next(()=>w)}newChangeBuffer(t){return new ou(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(s=>s.byteSize)}getMetadata(t){return cf(t).get("remoteDocumentGlobalKey").next(s=>(s||Lr(),s))}sr(t,s){return cf(t).put("remoteDocumentGlobalKey",s)}_r(t,s){if(s){let u=function(f,w){let E;if(w.document)E=Fp(f.ht,w.document,!!w.hasCommittedMutations);else if(w.noDocument){let $=An.fromSegments(w.noDocument.path),J=Ao(w.noDocument.readTime);E=ss.newNoDocument($,J),w.hasCommittedMutations&&E.setHasCommittedMutations()}else{if(!w.unknownDocument)return Lr();{let $=An.fromSegments(w.unknownDocument.path),J=Ao(w.unknownDocument.version);E=ss.newUnknownDocument($,J)}}return w.readTime&&E.setReadTime(function($){let J=new ta($[0],$[1]);return bi.fromTimestamp(J)}(w.readTime)),E}(this.serializer,s);if(!(u.isNoDocument()&&u.version.isEqual(bi.min())))return u}return ss.newInvalidDocument(t)}}class ou extends No{constructor(t,s){super(),this.hr=t,this.trackRemovals=s,this.Pr=new dn(u=>u.toString(),(u,f)=>u.isEqual(f))}applyChanges(t){let s=[],u=0,f=new G((w,E)=>ci(w.canonicalString(),E.canonicalString()));return this.changes.forEach((w,E)=>{let $=this.Pr.get(w);if(s.push(this.hr.removeEntry(t,w,$.readTime)),E.isValidDocument()){let J=yh(this.hr.serializer,E);f=f.add(w.path.popLast());let ge=So(J);u+=ge-$.size,s.push(this.hr.addEntry(t,w,J))}else if(u-=$.size,this.trackRemovals){let J=yh(this.hr.serializer,E.convertToNoDocument(bi.min()));s.push(this.hr.addEntry(t,w,J))}}),f.forEach(w=>{s.push(this.hr.indexManager.addToCollectionParentIndex(t,w))}),s.push(this.hr.updateMetadata(t,u)),Qt.waitFor(s)}getFromCache(t,s){return this.hr.ar(t,s).next(u=>(this.Pr.set(s,{size:u.size,readTime:u.document.readTime}),u.document))}getAllFromCache(t,s){return this.hr.cr(t,s).next(({documents:u,lr:f})=>(f.forEach((w,E)=>{this.Pr.set(w,{size:E,readTime:u.get(w).readTime})}),u))}}function cf(h){return $n(h,"remoteDocumentGlobal")}function dl(h){return $n(h,"remoteDocumentsV14")}function _u(h){let t=h.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Gh(h,t){let s=t.documentKey.path.toArray();return[h,wd(t.readTime),s.slice(0,s.length-2),s.length>0?s[s.length-1]:""]}function Vc(h,t){let s=h.path.toArray(),u=t.path.toArray(),f=0;for(let w=0;w<s.length-2&&w<u.length-2;++w)if(f=ci(s[w],u[w]))return f;return(f=ci(s.length,u.length))||(f=ci(s[s.length-2],u[u.length-2]))||ci(s[s.length-1],u[u.length-1])}class Yl{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}class Ih{constructor(t,s,u,f){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=u,this.indexManager=f}getDocument(t,s){let u=null;return this.documentOverlayCache.getOverlay(t,s).next(f=>(u=f,this.remoteDocumentCache.getEntry(t,s))).next(f=>(u!==null&&Nt(u.mutation,f,wt.empty(),ta.now()),f))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next(u=>this.getLocalViewOfDocuments(t,u,Ti()).next(()=>u))}getLocalViewOfDocuments(t,s,u=Ti()){let f=Di();return this.populateOverlays(t,f,s).next(()=>this.computeViews(t,s,f,u).next(w=>{let E=ns();return w.forEach(($,J)=>{E=E.insert($,J.overlayedDocument)}),E}))}getOverlayedDocuments(t,s){let u=Di();return this.populateOverlays(t,u,s).next(()=>this.computeViews(t,s,u,Ti()))}populateOverlays(t,s,u){let f=[];return u.forEach(w=>{s.has(w)||f.push(w)}),this.documentOverlayCache.getOverlays(t,f).next(w=>{w.forEach((E,$)=>{s.set(E,$)})})}computeViews(t,s,u,f){let w=Wn,E=Di(),$=Di();return s.forEach((J,ge)=>{let rt=u.get(ge.key);f.has(ge.key)&&(rt===void 0||rt.mutation instanceof vr)?w=w.insert(ge.key,ge):rt!==void 0?(E.set(ge.key,rt.mutation.getFieldMask()),Nt(rt.mutation,ge,rt.mutation.getFieldMask(),ta.now())):E.set(ge.key,wt.empty())}),this.recalculateAndSaveOverlays(t,w).next(J=>(J.forEach((ge,rt)=>E.set(ge,rt)),s.forEach((ge,rt)=>{var Bt;return $.set(ge,new Yl(rt,(Bt=E.get(ge))!==null&&Bt!==void 0?Bt:null))}),$))}recalculateAndSaveOverlays(t,s){let u=Di(),f=new hi((E,$)=>E-$),w=Ti();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next(E=>{for(let $ of E)$.keys().forEach(J=>{let ge=s.get(J);if(ge===null)return;let rt=u.get(J)||wt.empty();rt=$.applyToLocalView(ge,rt),u.set(J,rt);let Bt=(f.get($.batchId)||Ti()).add(J);f=f.insert($.batchId,Bt)})}).next(()=>{let E=[],$=f.getReverseIterator();for(;$.hasNext();){let J=$.getNext(),ge=J.key,rt=J.value,Bt=Di();rt.forEach(ir=>{if(!w.has(ir)){let Rr=kt(s.get(ir),u.get(ir));Rr!==null&&Bt.set(ir,Rr),w=w.add(ir)}}),E.push(this.documentOverlayCache.saveOverlays(t,ge,Bt))}return Qt.waitFor(E)}).next(()=>u)}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next(u=>this.recalculateAndSaveOverlays(t,u))}getDocumentsMatchingQuery(t,s,u,f){return An.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0?this.getDocumentsMatchingDocumentQuery(t,s.path):be(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,u,f):this.getDocumentsMatchingCollectionQuery(t,s,u,f)}getNextDocuments(t,s,u,f){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,u,f).next(w=>{let E=f-w.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,u.largestBatchId,f-w.size):Qt.resolve(Di()),$=-1,J=w;return E.next(ge=>Qt.forEach(ge,(rt,Bt)=>($<Bt.largestBatchId&&($=Bt.largestBatchId),w.get(rt)?Qt.resolve():this.remoteDocumentCache.getEntry(t,rt).next(ir=>{J=J.insert(rt,ir)}))).next(()=>this.populateOverlays(t,ge,w)).next(()=>this.computeViews(t,J,ge,Ti())).next(rt=>({batchId:$,changes:di(rt)})))})}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new An(s)).next(u=>{let f=ns();return u.isFoundDocument()&&(f=f.insert(u.key,u)),f})}getDocumentsMatchingCollectionGroupQuery(t,s,u,f){let w=s.collectionGroup,E=ns();return this.indexManager.getCollectionParents(t,w).next($=>Qt.forEach($,J=>{let ge=new Be(J.child(w),null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt);return this.getDocumentsMatchingCollectionQuery(t,ge,u,f).next(rt=>{rt.forEach((Bt,ir)=>{E=E.insert(Bt,ir)})})}).next(()=>E))}getDocumentsMatchingCollectionQuery(t,s,u,f){let w;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,u.largestBatchId).next(E=>(w=E,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,u,w,f))).next(E=>{w.forEach((J,ge)=>{let rt=ge.getKey();E.get(rt)===null&&(E=E.insert(rt,ss.newInvalidDocument(rt)))});let $=ns();return E.forEach((J,ge)=>{let rt=w.get(J);rt!==void 0&&Nt(rt.mutation,ge,wt.empty(),ta.now()),Mn(s,ge)&&($=$.insert(J,ge))}),$})}}class wc{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,s){return Qt.resolve(this.Tr.get(s))}saveBundleMetadata(t,s){return this.Tr.set(s.id,{id:s.id,version:s.version,createTime:ka(s.createTime)}),Qt.resolve()}getNamedQuery(t,s){return Qt.resolve(this.Ir.get(s))}saveNamedQuery(t,s){return this.Ir.set(s.name,{name:s.name,query:Uh(s.bundledQuery),readTime:ka(s.readTime)}),Qt.resolve()}}class ac{constructor(){this.overlays=new hi(An.comparator),this.Er=new Map}getOverlay(t,s){return Qt.resolve(this.overlays.get(s))}getOverlays(t,s){let u=Di();return Qt.forEach(s,f=>this.getOverlay(t,f).next(w=>{w!==null&&u.set(f,w)})).next(()=>u)}saveOverlays(t,s,u){return u.forEach((f,w)=>{this.Tt(t,s,w)}),Qt.resolve()}removeOverlaysForBatchId(t,s,u){let f=this.Er.get(u);return f!==void 0&&(f.forEach(w=>this.overlays=this.overlays.remove(w)),this.Er.delete(u)),Qt.resolve()}getOverlaysForCollection(t,s,u){let f=Di(),w=s.length+1,E=new An(s.child("")),$=this.overlays.getIteratorFrom(E);for(;$.hasNext();){let J=$.getNext().value,ge=J.getKey();if(!s.isPrefixOf(ge.path))break;ge.path.length===w&&J.largestBatchId>u&&f.set(J.getKey(),J)}return Qt.resolve(f)}getOverlaysForCollectionGroup(t,s,u,f){let w=new hi((ge,rt)=>ge-rt),E=this.overlays.getIterator();for(;E.hasNext();){let ge=E.getNext().value;if(ge.getKey().getCollectionGroup()===s&&ge.largestBatchId>u){let rt=w.get(ge.largestBatchId);rt===null&&(rt=Di(),w=w.insert(ge.largestBatchId,rt)),rt.set(ge.getKey(),ge)}}let $=Di(),J=w.getIterator();for(;J.hasNext()&&(J.getNext().value.forEach((ge,rt)=>$.set(ge,rt)),!($.size()>=f)););return Qt.resolve($)}Tt(t,s,u){let f=this.overlays.get(u.key);if(f!==null){let E=this.Er.get(f.largestBatchId).delete(u.key);this.Er.set(f.largestBatchId,E)}this.overlays=this.overlays.insert(u.key,new Ur(s,u));let w=this.Er.get(s);w===void 0&&(w=Ti(),this.Er.set(s,w)),this.Er.set(s,w.add(u.key))}}class bc{constructor(){this.sessionToken=pr.EMPTY_BYTE_STRING}getSessionToken(t){return Qt.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,Qt.resolve()}}class zu{constructor(){this.dr=new G(Ra.Ar),this.Rr=new G(Ra.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(t,s){let u=new Ra(t,s);this.dr=this.dr.add(u),this.Rr=this.Rr.add(u)}mr(t,s){t.forEach(u=>this.addReference(u,s))}removeReference(t,s){this.gr(new Ra(t,s))}pr(t,s){t.forEach(u=>this.removeReference(u,s))}yr(t){let s=new An(new Ts([])),u=new Ra(s,t),f=new Ra(s,t+1),w=[];return this.Rr.forEachInRange([u,f],E=>{this.gr(E),w.push(E.key)}),w}wr(){this.dr.forEach(t=>this.gr(t))}gr(t){this.dr=this.dr.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){let s=new An(new Ts([])),u=new Ra(s,t),f=new Ra(s,t+1),w=Ti();return this.Rr.forEachInRange([u,f],E=>{w=w.add(E.key)}),w}containsKey(t){let s=new Ra(t,0),u=this.dr.firstAfterOrEqual(s);return u!==null&&t.isEqual(u.key)}}class Ra{constructor(t,s){this.key=t,this.br=s}static Ar(t,s){return An.comparator(t.key,s.key)||ci(t.br,s.br)}static Vr(t,s){return ci(t.br,s.br)||An.comparator(t.key,s.key)}}class ih{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.Dr=1,this.vr=new G(Ra.Ar)}checkEmpty(t){return Qt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,u,f){let w=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let E=new yn(w,s,u,f);for(let $ of(this.mutationQueue.push(E),f))this.vr=this.vr.add(new Ra($.key,w)),this.indexManager.addToCollectionParentIndex(t,$.key.path.popLast());return Qt.resolve(E)}lookupMutationBatch(t,s){return Qt.resolve(this.Cr(s))}getNextMutationBatchAfterBatchId(t,s){let u=this.Fr(s+1),f=u<0?0:u;return Qt.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Qt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return Qt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){let u=new Ra(s,0),f=new Ra(s,Number.POSITIVE_INFINITY),w=[];return this.vr.forEachInRange([u,f],E=>{let $=this.Cr(E.br);w.push($)}),Qt.resolve(w)}getAllMutationBatchesAffectingDocumentKeys(t,s){let u=new G(ci);return s.forEach(f=>{let w=new Ra(f,0),E=new Ra(f,Number.POSITIVE_INFINITY);this.vr.forEachInRange([w,E],$=>{u=u.add($.br)})}),Qt.resolve(this.Mr(u))}getAllMutationBatchesAffectingQuery(t,s){let u=s.path,f=u.length+1,w=u;An.isDocumentKey(w)||(w=w.child(""));let E=new Ra(new An(w),0),$=new G(ci);return this.vr.forEachWhile(J=>{let ge=J.key.path;return!!u.isPrefixOf(ge)&&(ge.length===f&&($=$.add(J.br)),!0)},E),Qt.resolve(this.Mr($))}Mr(t){let s=[];return t.forEach(u=>{let f=this.Cr(u);f!==null&&s.push(f)}),s}removeMutationBatch(t,s){this.Or(s.batchId,"removed")===0||Lr(),this.mutationQueue.shift();let u=this.vr;return Qt.forEach(s.mutations,f=>{let w=new Ra(f.key,s.batchId);return u=u.delete(w),this.referenceDelegate.markPotentiallyOrphaned(t,f.key)}).next(()=>{this.vr=u})}Ln(t){}containsKey(t,s){let u=new Ra(s,0),f=this.vr.firstAfterOrEqual(u);return Qt.resolve(s.isEqual(f&&f.key))}performConsistencyCheck(t){return this.mutationQueue.length,Qt.resolve()}Or(t,s){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){let s=this.Fr(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}class Zf{constructor(t){this.Nr=t,this.docs=new hi(An.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){let u=s.key,f=this.docs.get(u),w=f?f.size:0,E=this.Nr(s);return this.docs=this.docs.insert(u,{document:s.mutableCopy(),size:E}),this.size+=E-w,this.indexManager.addToCollectionParentIndex(t,u.path.popLast())}removeEntry(t){let s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){let u=this.docs.get(s);return Qt.resolve(u?u.document.mutableCopy():ss.newInvalidDocument(s))}getEntries(t,s){let u=Wn;return s.forEach(f=>{let w=this.docs.get(f);u=u.insert(f,w?w.document.mutableCopy():ss.newInvalidDocument(f))}),Qt.resolve(u)}getDocumentsMatchingQuery(t,s,u,f){let w=Wn,E=s.path,$=new An(E.child("")),J=this.docs.getIteratorFrom($);for(;J.hasNext();){let{key:ge,value:{document:rt}}=J.getNext();if(!E.isPrefixOf(ge.path))break;ge.path.length>E.length+1||0>=Cl(nu(rt),u)||(f.has(rt.key)||Mn(s,rt))&&(w=w.insert(rt.key,rt.mutableCopy()))}return Qt.resolve(w)}getAllFromCollectionGroup(t,s,u,f){Lr()}Lr(t,s){return Qt.forEach(this.docs,u=>s(u))}newChangeBuffer(t){return new hf(this)}getSize(t){return Qt.resolve(this.size)}}class hf extends No{constructor(t){super(),this.hr=t}applyChanges(t){let s=[];return this.changes.forEach((u,f)=>{f.isValidDocument()?s.push(this.hr.addEntry(t,f)):this.hr.removeEntry(u)}),Qt.waitFor(s)}getFromCache(t,s){return this.hr.getEntry(t,s)}getAllFromCache(t,s){return this.hr.getEntries(t,s)}}class gv{constructor(t){this.persistence=t,this.Br=new dn(s=>eo(s),iu),this.lastRemoteSnapshotVersion=bi.min(),this.highestTargetId=0,this.kr=0,this.qr=new zu,this.targetCount=0,this.Qr=ja.qn()}forEachTarget(t,s){return this.Br.forEach((u,f)=>s(f)),Qt.resolve()}getLastRemoteSnapshotVersion(t){return Qt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Qt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),Qt.resolve(this.highestTargetId)}setTargetsMetadata(t,s,u){return u&&(this.lastRemoteSnapshotVersion=u),s>this.kr&&(this.kr=s),Qt.resolve()}Un(t){this.Br.set(t.target,t);let s=t.targetId;s>this.highestTargetId&&(this.Qr=new ja(s),this.highestTargetId=s),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,s){return this.Un(s),this.targetCount+=1,Qt.resolve()}updateTargetData(t,s){return this.Un(s),Qt.resolve()}removeTargetData(t,s){return this.Br.delete(s.target),this.qr.yr(s.targetId),this.targetCount-=1,Qt.resolve()}removeTargets(t,s,u){let f=0,w=[];return this.Br.forEach((E,$)=>{$.sequenceNumber<=s&&u.get($.targetId)===null&&(this.Br.delete(E),w.push(this.removeMatchingKeysForTargetId(t,$.targetId)),f++)}),Qt.waitFor(w).next(()=>f)}getTargetCount(t){return Qt.resolve(this.targetCount)}getTargetData(t,s){let u=this.Br.get(s)||null;return Qt.resolve(u)}addMatchingKeys(t,s,u){return this.qr.mr(s,u),Qt.resolve()}removeMatchingKeys(t,s,u){this.qr.pr(s,u);let f=this.persistence.referenceDelegate,w=[];return f&&s.forEach(E=>{w.push(f.markPotentiallyOrphaned(t,E))}),Qt.waitFor(w)}removeMatchingKeysForTargetId(t,s){return this.qr.yr(s),Qt.resolve()}getMatchingKeysForTargetId(t,s){let u=this.qr.Sr(s);return Qt.resolve(u)}containsKey(t,s){return Qt.resolve(this.qr.containsKey(s))}}class $p{constructor(t,s){this.Kr={},this.overlays={},this.$r=new ho(0),this.Ur=!1,this.Ur=!0,this.Wr=new bc,this.referenceDelegate=t(this),this.Gr=new gv(this),this.indexManager=new $h,this.remoteDocumentCache=new Zf(u=>this.referenceDelegate.zr(u)),this.serializer=new Sl(s),this.jr=new wc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new ac,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let u=this.Kr[t.toKey()];return u||(u=new ih(s,this.referenceDelegate),this.Kr[t.toKey()]=u),u}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,s,u){yr("MemoryPersistence","Starting transaction:",t);let f=new Bp(this.$r.next());return this.referenceDelegate.Hr(),u(f).next(w=>this.referenceDelegate.Jr(f).next(()=>w)).toPromise().then(w=>(f.raiseOnCommittedEvent(),w))}Yr(t,s){return Qt.or(Object.values(this.Kr).map(u=>()=>u.containsKey(t,s)))}}class Bp extends Pc{constructor(t){super(),this.currentSequenceNumber=t}}class Td{constructor(t){this.persistence=t,this.Zr=new zu,this.Xr=null}static ei(t){return new Td(t)}get ti(){if(this.Xr)return this.Xr;throw Lr()}addReference(t,s,u){return this.Zr.addReference(u,s),this.ti.delete(u.toString()),Qt.resolve()}removeReference(t,s,u){return this.Zr.removeReference(u,s),this.ti.add(u.toString()),Qt.resolve()}markPotentiallyOrphaned(t,s){return this.ti.add(s.toString()),Qt.resolve()}removeTarget(t,s){this.Zr.yr(s.targetId).forEach(f=>this.ti.add(f.toString()));let u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(t,s.targetId).next(f=>{f.forEach(w=>this.ti.add(w.toString()))}).next(()=>u.removeTargetData(t,s))}Hr(){this.Xr=new Set}Jr(t){let s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qt.forEach(this.ti,u=>{let f=An.fromPath(u);return this.ni(t,f).next(w=>{w||s.removeEntry(f,bi.min())})}).next(()=>(this.Xr=null,s.apply(t)))}updateLimboDocument(t,s){return this.ni(t,s).next(u=>{u?this.ti.delete(s.toString()):this.ti.add(s.toString())})}zr(t){return 0}ni(t,s){return Qt.or([()=>Qt.resolve(this.Zr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Yr(t,s)])}}class qp{constructor(t,s){this.persistence=t,this.ri=new dn(u=>St(u.path),(u,f)=>u.isEqual(f)),this.garbageCollector=new qu(this,s)}static ei(t,s){return new qp(t,s)}Hr(){}Jr(t){return Qt.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}Xn(t){let s=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(u=>s.next(f=>u+f))}nr(t){let s=0;return this.er(t,u=>{s++}).next(()=>s)}er(t,s){return Qt.forEach(this.ri,(u,f)=>this.ir(t,u,f).next(w=>w?Qt.resolve():s(f)))}removeTargets(t,s,u){return this.persistence.getTargetCache().removeTargets(t,s,u)}removeOrphanedDocuments(t,s){let u=0,f=this.persistence.getRemoteDocumentCache(),w=f.newChangeBuffer();return f.Lr(t,E=>this.ir(t,E,s).next($=>{$||(u++,w.removeEntry(E,bi.min()))})).next(()=>w.apply(t)).next(()=>u)}markPotentiallyOrphaned(t,s){return this.ri.set(s,t.currentSequenceNumber),Qt.resolve()}removeTarget(t,s){let u=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,u)}addReference(t,s,u){return this.ri.set(u,t.currentSequenceNumber),Qt.resolve()}removeReference(t,s,u){return this.ri.set(u,t.currentSequenceNumber),Qt.resolve()}updateLimboDocument(t,s){return this.ri.set(s,t.currentSequenceNumber),Qt.resolve()}zr(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=function u(f){switch(sa(f)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let E=xa(f);return E?16+u(E):16;case 5:return 2*f.stringValue.length;case 6:return us(f.bytesValue).approximateByteSize();case 7:return f.referenceValue.length;case 9:return(f.arrayValue.values||[]).reduce((J,ge)=>J+u(ge),0);case 10:case 11:var w;let $;return w=f.mapValue,$=0,bs(w.fields,(J,ge)=>{$+=J.length+u(ge)}),$;default:throw Lr()}}(t.data.value)),s}ir(t,s,u){return Qt.or([()=>this.persistence.Yr(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{let f=this.ri.get(s);return Qt.resolve(f!==void 0&&f>u)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class yv{constructor(t){this.serializer=t}O(t,s,u,f){let w=new Sa("createOrUpgrade",s);u<1&&f>=1&&(function($){$.createObjectStore("owner")}(t),t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",or,{unique:!0}),t.createObjectStore("documentMutations"),ay(t),function($){$.createObjectStore("remoteDocuments")}(t));let E=Qt.resolve();return u<3&&f>=3&&(u!==0&&(t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal"),ay(t)),E=E.next(()=>function($){let J=$.store("targetGlobal"),ge={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bi.min().toTimestamp(),targetCount:0};return J.put("targetGlobalKey",ge)}(w))),u<4&&f>=4&&(u!==0&&(E=E.next(()=>w.store("mutations").U().next($=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",or,{unique:!0});let J=w.store("mutations"),ge=$.map(rt=>J.put(rt));return Qt.waitFor(ge)}))),E=E.next(()=>{(function($){$.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),u<5&&f>=5&&(E=E.next(()=>this.ii(w))),u<6&&f>=6&&(E=E.next(()=>(function($){$.createObjectStore("remoteDocumentGlobal")}(t),this.si(w)))),u<7&&f>=7&&(E=E.next(()=>this.oi(w))),u<8&&f>=8&&(E=E.next(()=>this._i(t,w))),u<9&&f>=9&&(E=E.next(()=>{t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")})),u<10&&f>=10&&(E=E.next(()=>this.ai(w))),u<11&&f>=11&&(E=E.next(()=>{(function($){$.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function($){$.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),u<12&&f>=12&&(E=E.next(()=>{(function($){let J=$.createObjectStore("documentOverlays",{keyPath:Fs});J.createIndex("collectionPathOverlayIndex",gi,{unique:!1}),J.createIndex("collectionGroupOverlayIndex",as,{unique:!1})})(t)})),u<13&&f>=13&&(E=E.next(()=>function($){let J=$.createObjectStore("remoteDocumentsV14",{keyPath:Tr});J.createIndex("documentKeyIndex",Cr),J.createIndex("collectionGroupIndex",Yr)}(t)).next(()=>this.ui(t,w)).next(()=>t.deleteObjectStore("remoteDocuments"))),u<14&&f>=14&&(E=E.next(()=>this.ci(t,w))),u<15&&f>=15&&(E=E.next(()=>{t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:mi}).createIndex("sequenceNumberIndex",Vi,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:Dn}).createIndex("documentKeyIndex",ts,{unique:!1})})),u<16&&f>=16&&(E=E.next(()=>{s.objectStore("indexState").clear()}).next(()=>{s.objectStore("indexEntries").clear()})),u<17&&f>=17&&(E=E.next(()=>{(function($){$.createObjectStore("globals",{keyPath:"name"})})(t)})),E}si(t){let s=0;return t.store("remoteDocuments").J((u,f)=>{s+=So(f)}).next(()=>{let u={byteSize:s};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",u)})}ii(t){let s=t.store("mutationQueues"),u=t.store("mutations");return s.U().next(f=>Qt.forEach(f,w=>{let E=IDBKeyRange.bound([w.userId,-1],[w.userId,w.lastAcknowledgedBatchId]);return u.U("userMutationsIndex",E).next($=>Qt.forEach($,J=>{J.userId===w.userId||Lr();let ge=gr(this.serializer,J);return uf(t,w.userId,ge).next(()=>{})}))}))}oi(t){let s=t.store("targetDocuments"),u=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(f=>{let w=[];return u.J((E,$)=>{let J=new Ts(E),ge=[0,St(J)];w.push(s.get(ge).next(rt=>rt?Qt.resolve():s.put({targetId:0,path:St(J),sequenceNumber:f.highestListenSequenceNumber})))}).next(()=>Qt.waitFor(w))})}_i(t,s){t.createObjectStore("collectionParents",{keyPath:Rn});let u=s.store("collectionParents"),f=new Sh,w=E=>{if(f.add(E)){let $=E.lastSegment(),J=E.popLast();return u.put({collectionId:$,parent:St(J)})}};return s.store("remoteDocuments").J({H:!0},(E,$)=>w(new Ts(E).popLast())).next(()=>s.store("documentMutations").J({H:!0},([E,$,J],ge)=>w(Wt($).popLast())))}ai(t){let s=t.store("targets");return s.J((u,f)=>{let w=Vu(f),E=Ql(this.serializer,w);return s.put(E)})}ui(t,s){let u=s.store("remoteDocuments"),f=[];return u.J((w,E)=>{let $=s.store("remoteDocumentsV14"),J=(E.document?new An(Ts.fromString(E.document.name).popFirst(5)):E.noDocument?An.fromSegments(E.noDocument.path):E.unknownDocument?An.fromSegments(E.unknownDocument.path):Lr()).path.toArray(),ge={prefixPath:J.slice(0,J.length-2),collectionGroup:J[J.length-2],documentId:J[J.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};f.push($.put(ge))}).next(()=>Qt.waitFor(f))}ci(t,s){let u=s.store("mutations"),f=new zh(this.serializer),w=new $p(Td.ei,this.serializer.ht);return u.U().next(E=>{let $=new Map;return E.forEach(J=>{var ge;let rt=(ge=$.get(J.userId))!==null&&ge!==void 0?ge:Ti();gr(this.serializer,J).keys().forEach(Bt=>rt=rt.add(Bt)),$.set(J.userId,rt)}),Qt.forEach($,(J,ge)=>{let rt=new Sr(ge),Bt=vh.Pt(this.serializer,rt),ir=w.getIndexManager(rt);return new Ih(f,Eh.Pt(rt,this.serializer,ir,w.referenceDelegate),Bt,ir).recalculateAndSaveOverlaysForDocumentKeys(new Pi(s,ho.oe),J).next()})})}}function ay(h){h.createObjectStore("targetDocuments",{keyPath:ln}).createIndex("documentTargetsIndex",Pn,{unique:!0}),h.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qr,{unique:!0}),h.createObjectStore("targetGlobal")}let ep="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class oc{constructor(t,s,u,f,w,E,$,J,ge,rt,Bt=17){if(this.allowTabSynchronization=t,this.persistenceKey=s,this.clientId=u,this.li=w,this.window=E,this.document=$,this.hi=ge,this.Pi=rt,this.Ti=Bt,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=ir=>Promise.resolve(),!oc.p())throw new Nn(Br.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wa(this,f),this.Vi=s+"main",this.serializer=new Sl(J),this.mi=new ma(this.Vi,this.Ti,new yv(this.serializer)),this.Wr=new Ed,this.Gr=new ha(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new zh(this.serializer),this.jr=new Sd,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,rt===!1&&pi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Nn(Br.FAILED_PRECONDITION,ep);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Gr.getHighestSequenceNumber(t))}).then(t=>{this.$r=new ho(t,this.hi)}).then(()=>{this.Ur=!0}).catch(t=>(this.mi&&this.mi.close(),Promise.reject(t)))}Si(t){return this.Ri=async s=>{if(this.started)return t(s)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.mi.L(async s=>{s.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Uc(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(t).next(s=>{s||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(t)).next(s=>this.isPrimary&&!s?this.vi(t).next(()=>!1):!!s&&this.Ci(t).next(()=>!0))).catch(t=>{if(Kl(t))return yr("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return yr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.li.enqueueRetryable(()=>this.Ri(t)),this.isPrimary=t})}bi(t){return Eo(t).get("owner").next(s=>Qt.resolve(this.Fi(s)))}Mi(t){return Uc(t).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();let t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{let u=$n(s,"clientMetadata");return u.U().next(f=>{let w=this.Ni(f,18e5),E=f.filter($=>w.indexOf($)===-1);return Qt.forEach(E,$=>u.delete($.clientId)).next(()=>E)})}).catch(()=>[]);if(this.fi)for(let s of t)this.fi.removeItem(this.Li(s.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(t){return!!t&&t.ownerId===this.clientId}Di(t){return this.Pi?Qt.resolve(!0):Eo(t).get("owner").next(s=>{if(s!==null&&this.Oi(s.leaseTimestampMs,5e3)&&!this.Bi(s.ownerId)){if(this.Fi(s)&&this.networkEnabled)return!0;if(!this.Fi(s)){if(!s.allowTabSynchronization)throw new Nn(Br.FAILED_PRECONDITION,ep);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uc(t).U().next(u=>this.Ni(u,5e3).find(f=>{if(this.clientId!==f.clientId){let w=!this.networkEnabled&&f.networkEnabled,E=!this.inForeground&&f.inForeground,$=this.networkEnabled===f.networkEnabled;if(w||E&&$)return!0}return!1})===void 0)}).next(s=>(this.isPrimary!==s&&yr("IndexedDbPersistence",`Client ${s?"is":"is not"} eligible for a primary lease.`),s))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let s=new Pi(t,ho.oe);return this.vi(s).next(()=>this.Mi(s))}),this.mi.close(),this.Ki()}Ni(t,s){return t.filter(u=>this.Oi(u.updateTimeMs,s)&&!this.Bi(u.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",t=>Uc(t).U().next(s=>this.Ni(s,18e5).map(u=>u.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(t,s){return Eh.Pt(t,this.serializer,s,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Xf(t,this.serializer.ht.databaseId)}getDocumentOverlayCache(t){return vh.Pt(this.serializer,t)}getBundleCache(){return this.jr}runTransaction(t,s,u){var f;let w;yr("IndexedDbPersistence","Starting transaction:",t);let E=(f=this.Ti)===17?Ui:f===16||f===15?Wi:f===14||f===13?yi:f===12?_i:f===11?Zt:void Lr();return this.mi.runTransaction(t,s==="readonly"?"readonly":"readwrite",E,$=>(w=new Pi($,this.$r?this.$r.next():ho.oe),s==="readwrite-primary"?this.bi(w).next(J=>!!J||this.Di(w)).next(J=>{if(!J)throw pi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new Nn(Br.FAILED_PRECONDITION,fc);return u(w)}).next(J=>this.Ci(w).next(()=>J)):this.Ui(w).next(()=>u(w)))).then($=>(w.raiseOnCommittedEvent(),$))}Ui(t){return Eo(t).get("owner").next(s=>{if(s!==null&&this.Oi(s.leaseTimestampMs,5e3)&&!this.Bi(s.ownerId)&&!this.Fi(s)&&!(this.Pi||this.allowTabSynchronization&&s.allowTabSynchronization))throw new Nn(Br.FAILED_PRECONDITION,ep)})}Ci(t){let s={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Eo(t).put("owner",s)}static p(){return ma.p()}vi(t){let s=Eo(t);return s.get("owner").next(u=>this.Fi(u)?(yr("IndexedDbPersistence","Releasing primary lease."),s.delete("owner")):Qt.resolve())}Oi(t,s){let u=Date.now();return!(t<u-s)&&(!(t>u)||(pi(`Detected an update time that is in the future: ${t} > ${u}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ei=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground=this.document.visibilityState==="visible")}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Ii=()=>{this.ki();let s=/(?:Version|Mobile)\/1[456]/;tt()&&(navigator.appVersion.match(s)||navigator.userAgent.match(s))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(t){var s;try{let u=((s=this.fi)===null||s===void 0?void 0:s.getItem(this.Li(t)))!==null;return yr("IndexedDbPersistence",`Client '${t}' ${u?"is":"is not"} zombied in LocalStorage`),u}catch(u){return pi("IndexedDbPersistence","Failed to get zombied client id.",u),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(t){pi("Failed to set zombie client id.",t)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch{}}Li(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Eo(h){return $n(h,"owner")}function Uc(h){return $n(h,"clientMetadata")}function vv(h,t){let s=h.projectId;return h.isDefaultDatabase||(s+="."+h.database),"firestore/"+t+"/"+s+"/"}class Ym{constructor(t,s,u,f){this.targetId=t,this.fromCache=s,this.Wi=u,this.Gi=f}static zi(t,s){let u=Ti(),f=Ti();for(let w of s.docChanges)switch(w.type){case 0:u=u.add(w.doc.key);break;case 1:f=f.add(w.doc.key)}return new Ym(t,s.fromCache,u,f)}}class zp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class oy{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=tt()?8:wl(Ne())>0?6:4}initialize(t,s){this.Zi=t,this.indexManager=s,this.ji=!0}getDocumentsMatchingQuery(t,s,u,f){let w={result:null};return this.Xi(t,s).next(E=>{w.result=E}).next(()=>{if(!w.result)return this.es(t,s,f,u).next(E=>{w.result=E})}).next(()=>{if(w.result)return;let E=new zp;return this.ts(t,s,E).next($=>{if(w.result=$,this.Hi)return this.ns(t,s,E,$.size)})}).next(()=>w.result)}ns(t,s,u,f){return u.documentReadCount<this.Ji?(Qr()<=j.DEBUG&&yr("QueryEngine","SDK will not create cache indexes for query:",nn(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Qt.resolve()):(Qr()<=j.DEBUG&&yr("QueryEngine","Query:",nn(s),"scans",u.documentReadCount,"local documents and returns",f,"documents as results."),u.documentReadCount>this.Yi*f?(Qr()<=j.DEBUG&&yr("QueryEngine","The SDK decides to create cache indexes for query:",nn(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ot(s))):Qt.resolve())}Xi(t,s){if(le(s))return Qt.resolve(null);let u=ot(s);return this.indexManager.getIndexType(t,u).next(f=>f===0?null:(s.limit!==null&&f===1&&(u=ot(s=cr(s,null,"F"))),this.indexManager.getDocumentsMatchingTarget(t,u).next(w=>{let E=Ti(...w);return this.Zi.getDocuments(t,E).next($=>this.indexManager.getMinOffset(t,u).next(J=>{let ge=this.rs(s,$);return this.ss(s,ge,E,J.readTime)?this.Xi(t,cr(s,null,"F")):this.os(t,ge,s,J)}))})))}es(t,s,u,f){return le(s)||f.isEqual(bi.min())?Qt.resolve(null):this.Zi.getDocuments(t,u).next(w=>{let E=this.rs(s,w);return this.ss(s,E,u,f)?Qt.resolve(null):(Qr()<=j.DEBUG&&yr("QueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),nn(s)),this.os(t,E,s,Hl(f,-1)).next($=>$))})}rs(t,s){let u=new G(Ci(t));return s.forEach((f,w)=>{Mn(t,w)&&(u=u.add(w))}),u}ss(t,s,u,f){if(t.limit===null)return!1;if(u.size!==s.size)return!0;let w=t.limitType==="F"?s.last():s.first();return!!w&&(w.hasPendingWrites||w.version.compareTo(f)>0)}ts(t,s,u){return Qr()<=j.DEBUG&&yr("QueryEngine","Using full collection scan to execute query:",nn(s)),this.Zi.getDocumentsMatchingQuery(t,s,so.min(),u)}os(t,s,u,f){return this.Zi.getDocumentsMatchingQuery(t,u,f).next(w=>(s.forEach(E=>{w=w.insert(E.key,E)}),w))}}class da{constructor(t,s,u,f){this.persistence=t,this._s=s,this.serializer=f,this.us=new hi(ci),this.cs=new dn(w=>eo(w),iu),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(u)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ih(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>t.collect(s,this.us))}}async function to(h,t){return await h.persistence.runTransaction("Handle user change","readonly",s=>{let u;return h.mutationQueue.getAllMutationBatches(s).next(f=>(u=f,h.Ps(t),h.mutationQueue.getAllMutationBatches(s))).next(f=>{let w=[],E=[],$=Ti();for(let J of u)for(let ge of(w.push(J.batchId),J.mutations))$=$.add(ge.key);for(let J of f)for(let ge of(E.push(J.batchId),J.mutations))$=$.add(ge.key);return h.localDocuments.getDocuments(s,$).next(J=>({Ts:J,removedBatchIds:w,addedBatchIds:E}))})})}function xd(h){return h.persistence.runTransaction("Get last remote snapshot version","readonly",t=>h.Gr.getLastRemoteSnapshotVersion(t))}function Gp(h,t,s){let u=Ti(),f=Ti();return s.forEach(w=>u=u.add(w)),t.getEntries(h,u).next(w=>{let E=Wn;return s.forEach(($,J)=>{let ge=w.get($);J.isFoundDocument()!==ge.isFoundDocument()&&(f=f.add($)),J.isNoDocument()&&J.version.isEqual(bi.min())?(t.removeEntry($,J.readTime),E=E.insert($,J)):!ge.isValidDocument()||J.version.compareTo(ge.version)>0||J.version.compareTo(ge.version)===0&&ge.hasPendingWrites?(t.addEntry(J),E=E.insert($,J)):yr("LocalStore","Ignoring outdated watch update for ",$,". Current version:",ge.version," Watch version:",J.version)}),{Is:E,Es:f}})}function tp(h,t){return h.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return h.Gr.getTargetData(s,t).next(f=>f?(u=f,Qt.resolve(u)):h.Gr.allocateTargetId(s).next(w=>(u=new mc(t,w,"TargetPurposeListen",s.currentSequenceNumber),h.Gr.addTargetData(s,u).next(()=>u))))}).then(s=>{let u=h.us.get(s.targetId);return(u===null||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(h.us=h.us.insert(s.targetId,s),h.cs.set(t,s.targetId)),s})}async function df(h,t,s){let u=h.us.get(t);try{s||await h.persistence.runTransaction("Release target",s?"readwrite":"readwrite-primary",f=>h.persistence.referenceDelegate.removeTarget(f,u))}catch(f){if(!Kl(f))throw f;yr("LocalStore",`Failed to update sequence numbers for target ${t}: ${f}`)}h.us=h.us.remove(t),h.cs.delete(u.target)}function Xm(h,t,s){let u=bi.min(),f=Ti();return h.persistence.runTransaction("Execute query","readwrite",w=>function(E,$,J){let ge=E.cs.get(J);return ge!==void 0?Qt.resolve(E.us.get(ge)):E.Gr.getTargetData($,J)}(h,w,ot(t)).next(E=>{if(E)return u=E.lastLimboFreeSnapshotVersion,h.Gr.getMatchingKeysForTargetId(w,E.targetId).next($=>{f=$})}).next(()=>h._s.getDocumentsMatchingQuery(w,t,s?u:bi.min(),s?f:Ti())).next(E=>(wv(h,Bn(t),E),{documents:E,ds:f})))}function ly(h,t){let s=h.Gr,u=h.us.get(t);return u?Promise.resolve(u.target):h.persistence.runTransaction("Get target data","readonly",f=>s.ut(f,t).next(w=>w?w.target:null))}function uy(h,t){let s=h.ls.get(t)||bi.min();return h.persistence.runTransaction("Get new document changes","readonly",u=>h.hs.getAllFromCollectionGroup(u,t,Hl(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(wv(h,t,u),u))}function wv(h,t,s){let u=h.ls.get(t)||bi.min();s.forEach((f,w)=>{w.readTime.compareTo(u)>0&&(u=w.readTime)}),h.ls.set(t,u)}function cy(h,t){return`firestore_clients_${h}_${t}`}function bv(h,t,s){let u=`firestore_mutations_${h}_${s}`;return t.isAuthenticated()&&(u+=`_${t.uid}`),u}function rp(h,t){return`firestore_targets_${h}_${t}`}class np{constructor(t,s,u,f){this.user=t,this.batchId=s,this.state=u,this.error=f}static fs(t,s,u){let f=JSON.parse(u),w,E=typeof f=="object"&&["pending","acknowledged","rejected"].indexOf(f.state)!==-1&&(f.error===void 0||typeof f.error=="object");return E&&f.error&&(E=typeof f.error.message=="string"&&typeof f.error.code=="string")&&(w=new Nn(f.error.code,f.error.message)),E?new np(t,s,f.state,w):(pi("SharedClientState",`Failed to parse mutation state for ID '${s}': ${u}`),null)}gs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Th{constructor(t,s,u){this.targetId=t,this.state=s,this.error=u}static fs(t,s){let u=JSON.parse(s),f,w=typeof u=="object"&&["not-current","current","rejected"].indexOf(u.state)!==-1&&(u.error===void 0||typeof u.error=="object");return w&&u.error&&(w=typeof u.error.message=="string"&&typeof u.error.code=="string")&&(f=new Nn(u.error.code,u.error.message)),w?new Th(t,u.state,f):(pi("SharedClientState",`Failed to parse target state for ID '${t}': ${s}`),null)}gs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Hp{constructor(t,s){this.clientId=t,this.activeTargetIds=s}static fs(t,s){let u=JSON.parse(s),f=typeof u=="object"&&u.activeTargetIds instanceof Array,w=Js;for(let E=0;f&&E<u.activeTargetIds.length;++E)f=ct(u.activeTargetIds[E]),w=w.add(u.activeTargetIds[E]);return f?new Hp(t,w):(pi("SharedClientState",`Failed to parse client data for instance '${t}': ${s}`),null)}}class ff{constructor(t,s){this.clientId=t,this.onlineState=s}static fs(t){let s=JSON.parse(t);return typeof s=="object"&&["Unknown","Online","Offline"].indexOf(s.onlineState)!==-1&&typeof s.clientId=="string"?new ff(s.clientId,s.onlineState):(pi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class sh{constructor(){this.activeTargetIds=Js}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class ah{constructor(t,s,u,f,w){var E,$,J;this.window=t,this.li=s,this.persistenceKey=u,this.ws=f,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new hi(ci),this.started=!1,this.vs=[];let ge=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=w,this.Cs=cy(this.persistenceKey,this.ws),this.Fs=(E=this.persistenceKey,`firestore_sequence_number_${E}`),this.Ds=this.Ds.insert(this.ws,new sh),this.Ms=RegExp(`^firestore_clients_${ge}_([^_]*)$`),this.xs=RegExp(`^firestore_mutations_${ge}_(\\d+)(?:_(.*))?$`),this.Os=RegExp(`^firestore_targets_${ge}_(\\d+)$`),this.Ns=($=this.persistenceKey,`firestore_online_state_${$}`),this.Ls=(J=this.persistenceKey,`firestore_bundle_loaded_v2_${J}`),this.window.addEventListener("storage",this.Ss)}static p(t){return!(!t||!t.localStorage)}async start(){for(let s of await this.syncEngine.$i()){if(s===this.ws)continue;let u=this.getItem(cy(this.persistenceKey,s));if(u){let f=Hp.fs(s,u);f&&(this.Ds=this.Ds.insert(f.clientId,f))}}this.Bs();let t=this.storage.getItem(this.Ns);if(t){let s=this.ks(t);s&&this.qs(s)}for(let s of this.vs)this.bs(s);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.Fs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(t){let s=!1;return this.Ds.forEach((u,f)=>{f.activeTargetIds.has(t)&&(s=!0)}),s}addPendingMutation(t){this.Ks(t,"pending")}updateMutationState(t,s,u){this.Ks(t,s,u),this.$s(t)}addLocalQueryTarget(t,s=!0){let u="not-current";if(this.isActiveQueryTarget(t)){let f=this.storage.getItem(rp(this.persistenceKey,t));if(f){let w=Th.fs(t,f);w&&(u=w.state)}}return s&&this.Us.ps(t),this.Bs(),u}removeLocalQueryTarget(t){this.Us.ys(t),this.Bs()}isLocalQueryTarget(t){return this.Us.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(rp(this.persistenceKey,t))}updateQueryState(t,s,u){this.Ws(t,s,u)}handleUserChange(t,s,u){s.forEach(f=>{this.$s(f)}),this.currentUser=t,u.forEach(f=>{this.addPendingMutation(f)})}setOnlineState(t){this.Gs(t)}notifyBundleLoaded(t){this.zs(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(t){let s=this.storage.getItem(t);return yr("SharedClientState","READ",t,s),s}setItem(t,s){yr("SharedClientState","SET",t,s),this.storage.setItem(t,s)}removeItem(t){yr("SharedClientState","REMOVE",t),this.storage.removeItem(t)}bs(t){if(t.storageArea===this.storage){if(yr("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Cs)return void pi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ms.test(t.key)){if(t.newValue==null){let s=this.js(t.key);return this.Hs(s,null)}{let s=this.Js(t.key,t.newValue);if(s)return this.Hs(s.clientId,s)}}else if(this.xs.test(t.key)){if(t.newValue!==null){let s=this.Ys(t.key,t.newValue);if(s)return this.Zs(s)}}else if(this.Os.test(t.key)){if(t.newValue!==null){let s=this.Xs(t.key,t.newValue);if(s)return this.eo(s)}}else if(t.key===this.Ns){if(t.newValue!==null){let s=this.ks(t.newValue);if(s)return this.qs(s)}}else if(t.key===this.Fs){let s=function(u){let f=ho.oe;if(u!=null)try{let w=JSON.parse(u);typeof w=="number"||Lr(),f=w}catch(w){pi("SharedClientState","Failed to read sequence number from WebStorage",w)}return f}(t.newValue);s!==ho.oe&&this.sequenceNumberHandler(s)}else if(t.key===this.Ls){let s=this.no(t.newValue);await Promise.all(s.map(u=>this.syncEngine.ro(u)))}}}else this.vs.push(t)})}}get Us(){return this.Ds.get(this.ws)}Bs(){this.setItem(this.Cs,this.Us.gs())}Ks(t,s,u){let f=new np(this.currentUser,t,s,u),w=bv(this.persistenceKey,this.currentUser,t);this.setItem(w,f.gs())}$s(t){let s=bv(this.persistenceKey,this.currentUser,t);this.removeItem(s)}Gs(t){let s={clientId:this.ws,onlineState:t};this.storage.setItem(this.Ns,JSON.stringify(s))}Ws(t,s,u){let f=rp(this.persistenceKey,t),w=new Th(t,s,u);this.setItem(f,w.gs())}zs(t){let s=JSON.stringify(Array.from(t));this.setItem(this.Ls,s)}js(t){let s=this.Ms.exec(t);return s?s[1]:null}Js(t,s){let u=this.js(t);return Hp.fs(u,s)}Ys(t,s){let u=this.xs.exec(t),f=Number(u[1]),w=u[2]!==void 0?u[2]:null;return np.fs(new Sr(w),f,s)}Xs(t,s){let u=Number(this.Os.exec(t)[1]);return Th.fs(u,s)}ks(t){return ff.fs(t)}no(t){return JSON.parse(t)}async Zs(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.io(t.batchId,t.state,t.error);yr("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)}eo(t){return this.syncEngine.so(t.targetId,t.state,t.error)}Hs(t,s){let u=s?this.Ds.insert(t,s):this.Ds.remove(t),f=this.Qs(this.Ds),w=this.Qs(u),E=[],$=[];return w.forEach(J=>{f.has(J)||E.push(J)}),f.forEach(J=>{w.has(J)||$.push(J)}),this.syncEngine.oo(E,$).then(()=>{this.Ds=u})}qs(t){this.Ds.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Qs(t){let s=Js;return t.forEach((u,f)=>{s=s.unionWith(f.activeTargetIds)}),s}}class Kp{constructor(){this._o=new sh,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,u){}addLocalQueryTarget(t,s=!0){return s&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,s,u){this.ao[t]=s}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new sh,Promise.resolve()}handleUserChange(t,s,u){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Zm{uo(t){}shutdown(){}}class hy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){for(let t of(yr("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.To))t(0)}Po(){for(let t of(yr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.To))t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let eg=null;function xh(){return eg===null?eg=268435456+Math.round(2147483648*Math.random()):eg++,"0x"+eg.toString(16)}let dy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fy{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}let Al="WebChannelConnection";class Wp extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let s=t.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),f=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${u}/databases/${f}`,this.xo=this.databaseId.database==="(default)"?`project_id=${u}`:`project_id=${u}&database_id=${f}`}Oo(t,s,u,f,w){let E=xh(),$=this.No(t,s.toUriEncodedString());yr("RestConnection",`Sending RPC '${t}' ${E}:`,$,u);let J={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(J,f,w),this.Bo(t,$,J,u).then(ge=>(yr("RestConnection",`Received RPC '${t}' ${E}: `,ge),ge),ge=>{throw wi("RestConnection",`RPC '${t}' ${E} failed with error: `,ge,"url: ",$,"request:",u),ge})}ko(t,s,u,f,w,E){return this.Oo(t,s,u,f,w)}Lo(t,s,u){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qn}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((f,w)=>t[w]=f),u&&u.headers.forEach((f,w)=>t[w]=f)}No(t,s){let u=dy[t];return`${this.Fo}/v1/${s}:${u}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Bo(t,s,u,f){let w=xh();return new Promise((E,$)=>{let J=new S;J.setWithCredentials(!0),J.listenOnce(I.COMPLETE,()=>{try{switch(J.getLastErrorCode()){case x.NO_ERROR:let rt=J.getResponseJson();yr(Al,`XHR for RPC '${t}' ${w} received:`,JSON.stringify(rt)),E(rt);break;case x.TIMEOUT:yr(Al,`RPC '${t}' ${w} timed out`),$(new Nn(Br.DEADLINE_EXCEEDED,"Request time out"));break;case x.HTTP_ERROR:let Bt=J.getStatus();if(yr(Al,`RPC '${t}' ${w} failed with status:`,Bt,"response text:",J.getResponseText()),Bt>0){let ir=J.getResponseJson();Array.isArray(ir)&&(ir=ir[0]);let Rr=ir?.error;if(Rr&&Rr.status&&Rr.message){let Vn=function(oi){let vi=oi.toLowerCase().replace(/_/g,"-");return Object.values(Br).indexOf(vi)>=0?vi:Br.UNKNOWN}(Rr.status);$(new Nn(Vn,Rr.message))}else $(new Nn(Br.UNKNOWN,"Server responded with status "+J.getStatus()))}else $(new Nn(Br.UNAVAILABLE,"Connection failed."));break;default:Lr()}}finally{yr(Al,`RPC '${t}' ${w} completed.`)}});let ge=JSON.stringify(f);yr(Al,`RPC '${t}' ${w} sending request:`,f),J.send(s,"POST",ge,u,15)})}qo(t,s,u){let f=xh(),w=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],E=K(),$=U(),J={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},ge=this.longPollingOptions.timeoutSeconds;ge!==void 0&&(J.longPollingTimeout=Math.round(1e3*ge)),this.useFetchStreams&&(J.useFetchStreams=!0),this.Lo(J.initMessageHeaders,s,u),J.encodeInitMessageHeaders=!0;let rt=w.join("");yr(Al,`Creating RPC '${t}' stream ${f}: ${rt}`,J);let Bt=E.createWebChannel(rt,J),ir=!1,Rr=!1,Vn=new fy({Eo:vi=>{Rr?yr(Al,`Not sending because RPC '${t}' stream ${f} is closed:`,vi):(ir||(yr(Al,`Opening RPC '${t}' stream ${f} transport.`),Bt.open(),ir=!0),yr(Al,`RPC '${t}' stream ${f} sending:`,vi),Bt.send(vi))},Ao:()=>Bt.close()}),oi=(vi,Gs,ls)=>{vi.listen(Gs,dr=>{try{ls(dr)}catch(Lt){setTimeout(()=>{throw Lt},0)}})};return oi(Bt,k.EventType.OPEN,()=>{Rr||(yr(Al,`RPC '${t}' stream ${f} transport opened.`),Vn.So())}),oi(Bt,k.EventType.CLOSE,()=>{Rr||(Rr=!0,yr(Al,`RPC '${t}' stream ${f} transport closed`),Vn.Do())}),oi(Bt,k.EventType.ERROR,vi=>{Rr||(Rr=!0,wi(Al,`RPC '${t}' stream ${f} transport errored:`,vi),Vn.Do(new Nn(Br.UNAVAILABLE,"The operation could not be completed")))}),oi(Bt,k.EventType.MESSAGE,vi=>{var Gs;if(!Rr){let ls=vi.data[0];ls||Lr();let dr=ls?.error||((Gs=ls[0])===null||Gs===void 0?void 0:Gs.error);if(dr){yr(Al,`RPC '${t}' stream ${f} received error:`,dr);let Lt=dr.status,Vt=function(fr){let Ar=Y[fr];if(Ar!==void 0)return Pr(Ar)}(Lt),er=dr.message;Vt===void 0&&(Vt=Br.INTERNAL,er="Unknown error status: "+Lt+" with message "+dr.message),Rr=!0,Vn.Do(new Nn(Vt,er)),Bt.close()}else yr(Al,`RPC '${t}' stream ${f} received:`,ls),Vn.vo(ls)}}),oi($,N.STAT_EVENT,vi=>{vi.stat===C.PROXY?yr(Al,`RPC '${t}' stream ${f} detected buffering proxy`):vi.stat===C.NOPROXY&&yr(Al,`RPC '${t}' stream ${f} detected no buffering proxy`)}),setTimeout(()=>{Vn.bo()},0),Vn}}function $c(){return typeof window<"u"?window:null}function Jp(){return typeof document<"u"?document:null}function Ch(h){return new cl(h,!0)}class pf{constructor(t,s,u=1e3,f=1.5,w=6e4){this.li=t,this.timerId=s,this.Qo=u,this.Ko=f,this.$o=w,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();let s=Math.floor(this.Uo+this.Ho()),u=Math.max(0,Date.now()-this.Go),f=Math.max(0,s-u);f>0&&yr("ExponentialBackoff",`Backing off for ${f} ms (base delay: ${this.Uo} ms, delay with jitter: ${s} ms, last attempt: ${u} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,f,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class mf{constructor(t,s,u,f,w,E,$,J){this.li=t,this.Yo=u,this.Zo=f,this.connection=w,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=$,this.listener=J,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new pf(t,s)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,s){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():s&&s.code===Br.RESOURCE_EXHAUSTED?(pi(s.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):s&&s.code===Br.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(s)}P_(){}auth(){this.state=1;let t=this.T_(this.Xo),s=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([u,f])=>{this.Xo===s&&this.I_(u,f)},u=>{t(()=>{let f=new Nn(Br.UNKNOWN,"Fetching auth token failed: "+u.message);return this.E_(f)})})}I_(t,s){let u=this.T_(this.Xo);this.stream=this.d_(t,s),this.stream.Ro(()=>{u(()=>this.listener.Ro())}),this.stream.mo(()=>{u(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(f=>{u(()=>this.E_(f))}),this.stream.onMessage(f=>{u(()=>++this.n_==1?this.A_(f):this.onNext(f))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(t){return yr("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return s=>{this.li.enqueueAndForget(()=>this.Xo===t?s():(yr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ip extends mf{constructor(t,s,u,f,w,E){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,u,f,E),this.serializer=w}d_(t,s){return this.connection.qo("Listen",t,s)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();let s=function(f,w){let E;if("targetChange"in w){var $,J;w.targetChange;let ge=($=w.targetChange.targetChangeType||"NO_CHANGE")==="NO_CHANGE"?0:$==="ADD"?1:$==="REMOVE"?2:$==="CURRENT"?3:$==="RESET"?4:Lr(),rt=w.targetChange.targetIds||[],Bt=(J=w.targetChange.resumeToken,f.useProto3Json?(J===void 0||typeof J=="string"||Lr(),pr.fromBase64String(J||"")):(J===void 0||J instanceof Ut||J instanceof Uint8Array||Lr(),pr.fromUint8Array(J||new Uint8Array))),ir=w.targetChange.cause;E=new Zr(ge,rt,Bt,ir&&new Nn(ir.code===void 0?Br.UNKNOWN:Pr(ir.code),ir.message||"")||null)}else if("documentChange"in w){w.documentChange;let ge=w.documentChange;ge.document,ge.document.name,ge.document.updateTime;let rt=Bi(f,ge.document.name),Bt=ka(ge.document.updateTime),ir=ge.document.createTime?ka(ge.document.createTime):bi.min(),Rr=new Gn({mapValue:{fields:ge.document.fields}}),Vn=ss.newFoundDocument(rt,Bt,ir,Rr);E=new Ls(ge.targetIds||[],ge.removedTargetIds||[],Vn.key,Vn)}else if("documentDelete"in w){w.documentDelete;let ge=w.documentDelete;ge.document;let rt=Bi(f,ge.document),Bt=ge.readTime?ka(ge.readTime):bi.min(),ir=ss.newNoDocument(rt,Bt);E=new Ls([],ge.removedTargetIds||[],ir.key,ir)}else if("documentRemove"in w){w.documentRemove;let ge=w.documentRemove;ge.document;let rt=Bi(f,ge.document);E=new Ls([],ge.removedTargetIds||[],rt,null)}else{if(!("filter"in w))return Lr();{w.filter;let ge=w.filter;ge.targetId;let{count:rt=0,unchangedNames:Bt}=ge,ir=new hs(rt,Bt);E=new ca(ge.targetId,ir)}}return E}(this.serializer,t),u=function(f){if(!("targetChange"in f))return bi.min();let w=f.targetChange;return w.targetIds&&w.targetIds.length?bi.min():w.readTime?ka(w.readTime):bi.min()}(t);return this.listener.R_(s,u)}V_(t){let s={};s.database=Xi(this.serializer),s.addTarget=function(f,w){let E,$=w.target;if((E=Mu($)?{documents:Po(f,$)}:{query:wu(f,$).ct}).targetId=w.targetId,w.resumeToken.approximateByteSize()>0){E.resumeToken=bl(f,w.resumeToken);let J=ju(f,w.expectedCount);J!==null&&(E.expectedCount=J)}else if(w.snapshotVersion.compareTo(bi.min())>0){E.readTime=za(f,w.snapshotVersion.toTimestamp());let J=ju(f,w.expectedCount);J!==null&&(E.expectedCount=J)}return E}(this.serializer,t);let u=function(f,w){let E=function($){switch($){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lr()}}(w.purpose);return E==null?null:{"goog-listen-tags":E}}(this.serializer,t);u&&(s.labels=u),this.c_(s)}m_(t){let s={};s.database=Xi(this.serializer),s.removeTarget=t,this.c_(s)}}class tg extends mf{constructor(t,s,u,f,w,E){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,u,f,E),this.serializer=w}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(t,s){return this.connection.qo("Write",t,s)}A_(t){return t.streamToken||Lr(),this.lastStreamToken=t.streamToken,t.writeResults&&t.writeResults.length!==0&&Lr(),this.listener.p_()}onNext(t){var s,u;t.streamToken||Lr(),this.lastStreamToken=t.streamToken,this.r_.reset();let f=(s=t.writeResults,u=t.commitTime,s&&s.length>0?(u!==void 0||Lr(),s.map(E=>{let $;return($=E.updateTime?ka(E.updateTime):ka(u)).isEqual(bi.min())&&($=ka(u)),new L($,E.transformResults||[])})):[]),w=ka(t.commitTime);return this.listener.y_(w,f)}w_(){let t={};t.database=Xi(this.serializer),this.c_(t)}g_(t){let s={streamToken:this.lastStreamToken,writes:t.map(u=>ao(this.serializer,u))};this.c_(s)}}class rg extends class{}{constructor(t,s,u,f){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=u,this.serializer=f,this.S_=!1}b_(){if(this.S_)throw new Nn(Br.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,s,u,f){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([w,E])=>this.connection.Oo(t,Rl(s,u),f,w,E)).catch(w=>{throw w.name==="FirebaseError"?(w.code===Br.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),w):new Nn(Br.UNKNOWN,w.toString())})}ko(t,s,u,f,w){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([E,$])=>this.connection.ko(t,Rl(s,u),f,E,$,w)).catch(E=>{throw E.name==="FirebaseError"?(E.code===Br.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),E):new Nn(Br.UNKNOWN,E.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Sv{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){let s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(pi(s),this.C_=!1):yr("OnlineStateTracker",s)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}class Hh{constructor(t,s,u,f,w){this.localStore=t,this.datastore=s,this.asyncQueue=u,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=w,this.Q_.uo(E=>{u.enqueueAndForget(async()=>{kh(this)&&(yr("RemoteStore","Restarting streams for network reachability change."),await async function($){$.k_.add(4),await gf($),$.K_.set("Unknown"),$.k_.delete(4),await lu($)}(this))})}),this.K_=new Sv(u,f)}}async function lu(h){if(kh(h))for(let t of h.q_)await t(!0)}async function gf(h){for(let t of h.q_)await t(!1)}function Cd(h,t){h.B_.has(t.targetId)||(h.B_.set(t.targetId,t),Ys(h)?ng(h):Xl(h).s_()&&uu(h,t))}function yf(h,t){let s=Xl(h);h.B_.delete(t),s.s_()&&py(h,t),h.B_.size===0&&(s.s_()?s.a_():kh(h)&&h.K_.set("Unknown"))}function uu(h,t){if(h.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bi.min())>0){let s=h.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Xl(h).V_(t)}function py(h,t){h.U_.xe(t),Xl(h).m_(t)}function ng(h){h.U_=new zs({getRemoteKeysForTarget:t=>h.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>h.B_.get(t)||null,nt:()=>h.datastore.serializer.databaseId}),Xl(h).start(),h.K_.F_()}function Ys(h){return kh(h)&&!Xl(h).i_()&&h.B_.size>0}function kh(h){return h.k_.size===0}async function ig(h){h.K_.set("Online")}async function Qp(h){h.B_.forEach((t,s)=>{uu(h,t)})}async function vf(h,t){h.U_=void 0,Ys(h)?(h.K_.O_(t),ng(h)):h.K_.set("Unknown")}async function Yp(h,t,s){if(h.K_.set("Online"),t instanceof Zr&&t.state===2&&t.cause)try{await async function(u,f){let w=f.cause;for(let E of f.targetIds)u.B_.has(E)&&(await u.remoteSyncer.rejectListen(E,w),u.B_.delete(E),u.U_.removeTarget(E))}(h,t)}catch(u){yr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),u),await wf(h,u)}else if(t instanceof Ls?h.U_.$e(t):t instanceof ca?h.U_.Je(t):h.U_.Ge(t),!s.isEqual(bi.min()))try{let u=await xd(h.localStore);s.compareTo(u)>=0&&await function(f,w){let E=f.U_.it(w);return E.targetChanges.forEach(($,J)=>{if($.resumeToken.approximateByteSize()>0){let ge=f.B_.get(J);ge&&f.B_.set(J,ge.withResumeToken($.resumeToken,w))}}),E.targetMismatches.forEach(($,J)=>{let ge=f.B_.get($);if(!ge)return;f.B_.set($,ge.withResumeToken(pr.EMPTY_BYTE_STRING,ge.snapshotVersion)),py(f,$);let rt=new mc(ge.target,$,J,ge.sequenceNumber);uu(f,rt)}),f.remoteSyncer.applyRemoteEvent(E)}(h,s)}catch(u){yr("RemoteStore","Failed to raise snapshot:",u),await wf(h,u)}}async function wf(h,t,s){if(!Kl(t))throw t;h.k_.add(1),await gf(h),h.K_.set("Offline"),s||(s=()=>xd(h.localStore)),h.asyncQueue.enqueueRetryable(async()=>{yr("RemoteStore","Retrying IndexedDB access"),await s(),h.k_.delete(1),await lu(h)})}function Gu(h,t){return t().catch(s=>wf(h,s,t))}async function zo(h){let t=Iu(h),s=h.L_.length>0?h.L_[h.L_.length-1].batchId:-1;for(;kh(h)&&h.L_.length<10;)try{let u=await function(f,w){return f.persistence.runTransaction("Get next mutation batch","readonly",E=>(w===void 0&&(w=-1),f.mutationQueue.getNextMutationBatchAfterBatchId(E,w)))}(h.localStore,s);if(u===null){h.L_.length===0&&t.a_();break}s=u.batchId,function(f,w){f.L_.push(w);let E=Iu(f);E.s_()&&E.f_&&E.g_(w.mutations)}(h,u)}catch(u){await wf(h,u)}Rh(h)&&kd(h)}function Rh(h){return kh(h)&&!Iu(h).i_()&&h.L_.length>0}function kd(h){Iu(h).start()}async function Ev(h){Iu(h).w_()}async function bf(h){let t=Iu(h);for(let s of h.L_)t.g_(s.mutations)}async function Xp(h,t,s){let u=h.L_.shift(),f=bn.from(u,t,s);await Gu(h,()=>h.remoteSyncer.applySuccessfulWrite(f)),await zo(h)}async function _v(h,t){t&&Iu(h).f_&&await async function(s,u){var f;if(function(w){switch(w){default:return Lr();case Br.CANCELLED:case Br.UNKNOWN:case Br.DEADLINE_EXCEEDED:case Br.RESOURCE_EXHAUSTED:case Br.INTERNAL:case Br.UNAVAILABLE:case Br.UNAUTHENTICATED:return!1;case Br.INVALID_ARGUMENT:case Br.NOT_FOUND:case Br.ALREADY_EXISTS:case Br.PERMISSION_DENIED:case Br.FAILED_PRECONDITION:case Br.ABORTED:case Br.OUT_OF_RANGE:case Br.UNIMPLEMENTED:case Br.DATA_LOSS:return!0}}(f=u.code)&&f!==Br.ABORTED){let w=s.L_.shift();Iu(s).__(),await Gu(s,()=>s.remoteSyncer.rejectFailedWrite(w.batchId,u)),await zo(s)}}(h,t),Rh(h)&&kd(h)}async function Sf(h,t){h.asyncQueue.verifyOperationInProgress(),yr("RemoteStore","RemoteStore received new credentials");let s=kh(h);h.k_.add(3),await gf(h),s&&h.K_.set("Unknown"),await h.remoteSyncer.handleCredentialChange(t),h.k_.delete(3),await lu(h)}async function Rd(h,t){t?(h.k_.delete(2),await lu(h)):t||(h.k_.add(2),await gf(h),h.K_.set("Unknown"))}function Xl(h){var t,s,u;return h.W_||(h.W_=(t=h.datastore,s=h.asyncQueue,u={Ro:ig.bind(null,h),mo:Qp.bind(null,h),po:vf.bind(null,h),R_:Yp.bind(null,h)},t.b_(),new ip(s,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,u)),h.q_.push(async f=>{f?(h.W_.__(),Ys(h)?ng(h):h.K_.set("Unknown")):(await h.W_.stop(),h.U_=void 0)})),h.W_}function Iu(h){var t,s,u;return h.G_||(h.G_=(t=h.datastore,s=h.asyncQueue,u={Ro:()=>Promise.resolve(),mo:Ev.bind(null,h),po:_v.bind(null,h),p_:bf.bind(null,h),y_:Xp.bind(null,h)},t.b_(),new tg(s,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,u)),h.q_.push(async f=>{f?(h.G_.__(),await zo(h)):(await h.G_.stop(),h.L_.length>0&&(yr("RemoteStore",`Stopping write stream with ${h.L_.length} pending writes`),h.L_=[]))})),h.G_}class Pd{constructor(t,s,u,f,w){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=u,this.op=f,this.removalCallback=w,this.deferred=new As,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,s,u,f,w){let E=new Pd(t,s,Date.now()+u,f,w);return E.start(u),E}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Nn(Br.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(h,t){if(pi("AsyncQueue",`${t}: ${h}`),Kl(h))return new Nn(Br.UNAVAILABLE,`${t}: ${h}`);throw h}class Ph{static emptySet(t){return new Ph(t.comparator)}constructor(t){this.comparator=t?(s,u)=>t(s,u)||An.comparator(s.key,u.key):(s,u)=>An.comparator(s.key,u.key),this.keyedMap=ns(),this.sortedSet=new hi(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((s,u)=>(t(s),!1))}add(t){let s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){let s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof Ph)||this.size!==t.size)return!1;let s=this.sortedSet.getIterator(),u=t.sortedSet.getIterator();for(;s.hasNext();){let f=s.getNext().key,w=u.getNext().key;if(!f.isEqual(w))return!1}return!0}toString(){let t=[];return this.forEach(s=>{t.push(s.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){let u=new Ph;return u.comparator=this.comparator,u.keyedMap=t,u.sortedSet=s,u}}class my{constructor(){this.z_=new hi(An.comparator)}track(t){let s=t.doc.key,u=this.z_.get(s);u?t.type!==0&&u.type===3?this.z_=this.z_.insert(s,t):t.type===3&&u.type!==1?this.z_=this.z_.insert(s,{type:u.type,doc:t.doc}):t.type===2&&u.type===2?this.z_=this.z_.insert(s,{type:2,doc:t.doc}):t.type===2&&u.type===0?this.z_=this.z_.insert(s,{type:0,doc:t.doc}):t.type===1&&u.type===0?this.z_=this.z_.remove(s):t.type===1&&u.type===2?this.z_=this.z_.insert(s,{type:1,doc:u.doc}):t.type===0&&u.type===1?this.z_=this.z_.insert(s,{type:2,doc:t.doc}):Lr():this.z_=this.z_.insert(s,t)}j_(){let t=[];return this.z_.inorderTraversal((s,u)=>{t.push(u)}),t}}class Ad{constructor(t,s,u,f,w,E,$,J,ge){this.query=t,this.docs=s,this.oldDocs=u,this.docChanges=f,this.mutatedKeys=w,this.fromCache=E,this.syncStateChanged=$,this.excludesMetadataChanges=J,this.hasCachedResults=ge}static fromInitialDocuments(t,s,u,f,w){let E=[];return s.forEach($=>{E.push({type:0,doc:$})}),new Ad(t,s,Ph.emptySet(s),E,u,f,!0,!1,w)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Er(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let s=this.docChanges,u=t.docChanges;if(s.length!==u.length)return!1;for(let f=0;f<s.length;f++)if(s[f].type!==u[f].type||!s[f].doc.isEqual(u[f].doc))return!1;return!0}}class Nd{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class Zp{constructor(){this.queries=gy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){let u=t.queries;t.queries=gy(),u.forEach((f,w)=>{for(let E of w.J_)E.onError(s)})})(this,new Nn(Br.ABORTED,"Firestore shutting down"))}}function gy(){return new dn(h=>br(h),Er)}function ag(h,t){let s=!1;for(let u of t){let f=u.query,w=h.queries.get(f);if(w){for(let E of w.J_)E.ta(u)&&(s=!0);w.H_=u}}s&&lg(h)}function og(h,t,s){let u=h.queries.get(t);if(u)for(let f of u.J_)f.onError(s);h.queries.delete(t)}function lg(h){h.X_.forEach(t=>{t.next()})}(Se=fe||(fe={})).na="default",Se.Cache="cache";class em{constructor(t){this.key=t}}class tm{constructor(t){this.key=t}}class ug{constructor(t,s){this.query=t,this.da=s,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ti(),this.mutatedKeys=Ti(),this.Va=Ci(t),this.ma=new Ph(this.Va)}get fa(){return this.da}ga(t,s){let u=s?s.pa:new my,f=s?s.ma:this.ma,w=s?s.mutatedKeys:this.mutatedKeys,E=f,$=!1,J=this.query.limitType==="F"&&f.size===this.query.limit?f.last():null,ge=this.query.limitType==="L"&&f.size===this.query.limit?f.first():null;if(t.inorderTraversal((rt,Bt)=>{let ir=f.get(rt),Rr=Mn(this.query,Bt)?Bt:null,Vn=!!ir&&this.mutatedKeys.has(ir.key),oi=!!Rr&&(Rr.hasLocalMutations||this.mutatedKeys.has(Rr.key)&&Rr.hasCommittedMutations),vi=!1;ir&&Rr?ir.data.isEqual(Rr.data)?Vn!==oi&&(u.track({type:3,doc:Rr}),vi=!0):this.ya(ir,Rr)||(u.track({type:2,doc:Rr}),vi=!0,(J&&this.Va(Rr,J)>0||ge&&0>this.Va(Rr,ge))&&($=!0)):!ir&&Rr?(u.track({type:0,doc:Rr}),vi=!0):ir&&!Rr&&(u.track({type:1,doc:ir}),vi=!0,(J||ge)&&($=!0)),vi&&(Rr?(E=E.add(Rr),w=oi?w.add(rt):w.delete(rt)):(E=E.delete(rt),w=w.delete(rt)))}),this.query.limit!==null)for(;E.size>this.query.limit;){let rt=this.query.limitType==="F"?E.last():E.first();E=E.delete(rt.key),w=w.delete(rt.key),u.track({type:1,doc:rt})}return{ma:E,pa:u,ss:$,mutatedKeys:w}}ya(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,u,f){let w=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;let E=t.pa.j_();E.sort((rt,Bt)=>function(ir,Rr){let Vn=oi=>{switch(oi){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lr()}};return Vn(ir)-Vn(Rr)}(rt.type,Bt.type)||this.Va(rt.doc,Bt.doc)),this.wa(u),f=f!=null&&f;let $=s&&!f?this.Sa():[],J=this.Ra.size===0&&this.current&&!f?1:0,ge=J!==this.Aa;return this.Aa=J,E.length!==0||ge?{snapshot:new Ad(this.query,t.ma,w,E,t.mutatedKeys,J===0,ge,!1,!!u&&u.resumeToken.approximateByteSize()>0),ba:$}:{ba:$}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new my,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.da.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(s=>this.da=this.da.add(s)),t.modifiedDocuments.forEach(s=>{}),t.removedDocuments.forEach(s=>this.da=this.da.delete(s)),this.current=t.current)}Sa(){if(!this.current)return[];let t=this.Ra;this.Ra=Ti(),this.ma.forEach(u=>{this.Da(u.key)&&(this.Ra=this.Ra.add(u.key))});let s=[];return t.forEach(u=>{this.Ra.has(u)||s.push(new tm(u))}),this.Ra.forEach(u=>{t.has(u)||s.push(new em(u))}),s}va(t){this.da=t.ds,this.Ra=Ti();let s=this.ga(t.documents);return this.applyChanges(s,!0)}Ca(){return Ad.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Iv{constructor(t,s,u){this.query=t,this.targetId=s,this.view=u}}class yy{constructor(t){this.key=t,this.Fa=!1}}class rm{constructor(t,s,u,f,w,E){this.localStore=t,this.remoteStore=s,this.eventManager=u,this.sharedClientState=f,this.currentUser=w,this.maxConcurrentLimboResolutions=E,this.Ma={},this.xa=new dn($=>br($),Er),this.Oa=new Map,this.Na=new Set,this.La=new hi(An.comparator),this.Ba=new Map,this.ka=new zu,this.qa={},this.Qa=new Map,this.Ka=ja.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Tv(h,t,s=!0){let u,f=am(h),w=f.xa.get(t);return w?(f.sharedClientState.addLocalQueryTarget(w.targetId),u=w.view.Ca()):u=await nm(f,t,s,!0),u}async function xv(h,t){let s=am(h);await nm(s,t,!0,!1)}async function nm(h,t,s,u){let f,w=await tp(h.localStore,ot(t)),E=w.targetId,$=h.sharedClientState.addLocalQueryTarget(E,s);return u&&(f=await sp(h,t,E,$==="current",w.resumeToken)),h.isPrimaryClient&&s&&Cd(h.remoteStore,w),f}async function sp(h,t,s,u,f){h.Ua=(Bt,ir,Rr)=>async function(Vn,oi,vi,Gs){let ls=oi.view.ga(vi);ls.ss&&(ls=await Xm(Vn.localStore,oi.query,!1).then(({documents:er})=>oi.view.ga(er,ls)));let dr=Gs&&Gs.targetChanges.get(oi.targetId),Lt=Gs&&Gs.targetMismatches.get(oi.targetId)!=null,Vt=oi.view.applyChanges(ls,Vn.isPrimaryClient,dr,Lt);return dg(Vn,oi.targetId,Vt.ba),Vt.snapshot}(h,Bt,ir,Rr);let w=await Xm(h.localStore,t,!0),E=new ug(t,w.ds),$=E.ga(w.documents),J=Qs.createSynthesizedTargetChangeForCurrentChange(s,u&&h.onlineState!=="Offline",f),ge=E.applyChanges($,h.isPrimaryClient,J);dg(h,s,ge.ba);let rt=new Iv(t,s,E);return h.xa.set(t,rt),h.Oa.has(s)?h.Oa.get(s).push(t):h.Oa.set(s,[t]),ge.snapshot}async function cg(h,t,s){let u=h.xa.get(t),f=h.Oa.get(u.targetId);if(f.length>1)return h.Oa.set(u.targetId,f.filter(w=>!Er(w,t))),void h.xa.delete(t);h.isPrimaryClient?(h.sharedClientState.removeLocalQueryTarget(u.targetId),h.sharedClientState.isActiveQueryTarget(u.targetId)||await df(h.localStore,u.targetId,!1).then(()=>{h.sharedClientState.clearQueryState(u.targetId),s&&yf(h.remoteStore,u.targetId),_f(h,u.targetId)}).catch(pa)):(_f(h,u.targetId),await df(h.localStore,u.targetId,!0))}async function im(h,t){let s=h.xa.get(t),u=h.Oa.get(s.targetId);h.isPrimaryClient&&u.length===1&&(h.sharedClientState.removeLocalQueryTarget(s.targetId),yf(h.remoteStore,s.targetId))}async function Od(h,t){try{let s=await function(u,f){let w=f.snapshotVersion,E=u.us;return u.persistence.runTransaction("Apply remote event","readwrite-primary",$=>{let J=u.hs.newChangeBuffer({trackRemovals:!0});E=u.us;let ge=[];f.targetChanges.forEach((ir,Rr)=>{var Vn;let oi=E.get(Rr);if(!oi)return;ge.push(u.Gr.removeMatchingKeys($,ir.removedDocuments,Rr).next(()=>u.Gr.addMatchingKeys($,ir.addedDocuments,Rr)));let vi=oi.withSequenceNumber($.currentSequenceNumber);f.targetMismatches.get(Rr)!==null?vi=vi.withResumeToken(pr.EMPTY_BYTE_STRING,bi.min()).withLastLimboFreeSnapshotVersion(bi.min()):ir.resumeToken.approximateByteSize()>0&&(vi=vi.withResumeToken(ir.resumeToken,w)),E=E.insert(Rr,vi),Vn=vi,(oi.resumeToken.approximateByteSize()===0||Vn.snapshotVersion.toMicroseconds()-oi.snapshotVersion.toMicroseconds()>=3e8||ir.addedDocuments.size+ir.modifiedDocuments.size+ir.removedDocuments.size>0)&&ge.push(u.Gr.updateTargetData($,vi))});let rt=Wn,Bt=Ti();if(f.documentUpdates.forEach(ir=>{f.resolvedLimboDocuments.has(ir)&&ge.push(u.persistence.referenceDelegate.updateLimboDocument($,ir))}),ge.push(Gp($,J,f.documentUpdates).next(ir=>{rt=ir.Is,Bt=ir.Es})),!w.isEqual(bi.min())){let ir=u.Gr.getLastRemoteSnapshotVersion($).next(Rr=>u.Gr.setTargetsMetadata($,$.currentSequenceNumber,w));ge.push(ir)}return Qt.waitFor(ge).next(()=>J.apply($)).next(()=>u.localDocuments.getLocalViewOfDocuments($,rt,Bt)).next(()=>rt)}).then($=>(u.us=E,$))}(h.localStore,t);t.targetChanges.forEach((u,f)=>{let w=h.Ba.get(f);w&&(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1||Lr(),u.addedDocuments.size>0?w.Fa=!0:u.modifiedDocuments.size>0?w.Fa||Lr():u.removedDocuments.size>0&&(w.Fa||Lr(),w.Fa=!1))}),await Ah(h,s,t)}catch(s){await pa(s)}}function vy(h,t,s){var u;if(h.isPrimaryClient&&s===0||!h.isPrimaryClient&&s===1){let f,w=[];h.xa.forEach((E,$)=>{let J=$.view.ea(t);J.snapshot&&w.push(J.snapshot)}),(u=h.eventManager).onlineState=t,f=!1,u.queries.forEach((E,$)=>{for(let J of $.J_)J.ea(t)&&(f=!0)}),f&&lg(u),w.length&&h.Ma.R_(w),h.onlineState=t,h.isPrimaryClient&&h.sharedClientState.setOnlineState(t)}}async function hg(h,t,s){h.sharedClientState.updateQueryState(t,"rejected",s);let u=h.Ba.get(t),f=u&&u.key;if(f){let w=new hi(An.comparator);w=w.insert(f,ss.newNoDocument(f,bi.min()));let E=Ti().add(f),$=new Ai(bi.min(),new Map,new hi(ci),w,E);await Od(h,$),h.La=h.La.remove(f),h.Ba.delete(t),fg(h)}else await df(h.localStore,t,!1).then(()=>_f(h,t,s)).catch(pa)}async function Cv(h,t){var s;let u=t.batch.batchId;try{let f=await(s=h.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",w=>{let E=t.batch.keys(),$=s.hs.newChangeBuffer({trackRemovals:!0});return function(J,ge,rt,Bt){let ir=rt.batch,Rr=ir.keys(),Vn=Qt.resolve();return Rr.forEach(oi=>{Vn=Vn.next(()=>Bt.getEntry(ge,oi)).next(vi=>{let Gs=rt.docVersions.get(oi);Gs!==null||Lr(),0>vi.version.compareTo(Gs)&&(ir.applyToRemoteDocument(vi,rt),vi.isValidDocument()&&(vi.setReadTime(rt.commitVersion),Bt.addEntry(vi)))})}),Vn.next(()=>J.mutationQueue.removeMutationBatch(ge,ir))}(s,w,t,$).next(()=>$.apply(w)).next(()=>s.mutationQueue.performConsistencyCheck(w)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(w,E,t.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,function(J){let ge=Ti();for(let rt=0;rt<J.mutationResults.length;++rt)J.mutationResults[rt].transformResults.length>0&&(ge=ge.add(J.batch.mutations[rt].key));return ge}(t))).next(()=>s.localDocuments.getDocuments(w,E))});Dd(h,u,null),Ef(h,u),h.sharedClientState.updateMutationState(u,"acknowledged"),await Ah(h,f)}catch(f){await pa(f)}}async function kv(h,t,s){var u;try{let f=await(u=h.localStore).persistence.runTransaction("Reject batch","readwrite-primary",w=>{let E;return u.mutationQueue.lookupMutationBatch(w,t).next($=>($!==null||Lr(),E=$.keys(),u.mutationQueue.removeMutationBatch(w,$))).next(()=>u.mutationQueue.performConsistencyCheck(w)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(w,E,t)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,E)).next(()=>u.localDocuments.getDocuments(w,E))});Dd(h,t,s),Ef(h,t),h.sharedClientState.updateMutationState(t,"rejected",s),await Ah(h,f)}catch(f){await pa(f)}}function Ef(h,t){(h.Qa.get(t)||[]).forEach(s=>{s.resolve()}),h.Qa.delete(t)}function Dd(h,t,s){let u=h.qa[h.currentUser.toKey()];if(u){let f=u.get(t);f&&(s?f.reject(s):f.resolve(),u=u.remove(t)),h.qa[h.currentUser.toKey()]=u}}function _f(h,t,s=null){for(let u of(h.sharedClientState.removeLocalQueryTarget(t),h.Oa.get(t)))h.xa.delete(u),s&&h.Ma.Wa(u,s);h.Oa.delete(t),h.isPrimaryClient&&h.ka.yr(t).forEach(u=>{h.ka.containsKey(u)||wy(h,u)})}function wy(h,t){h.Na.delete(t.path.canonicalString());let s=h.La.get(t);s!==null&&(yf(h.remoteStore,s),h.La=h.La.remove(t),h.Ba.delete(s),fg(h))}function dg(h,t,s){for(let u of s)u instanceof em?(h.ka.addReference(u.key,t),function(f,w){let E=w.key,$=E.path.canonicalString();f.La.get(E)||f.Na.has($)||(yr("SyncEngine","New document in limbo: "+E),f.Na.add($),fg(f))}(h,u)):u instanceof tm?(yr("SyncEngine","Document no longer in limbo: "+u.key),h.ka.removeReference(u.key,t),h.ka.containsKey(u.key)||wy(h,u.key)):Lr()}function fg(h){for(;h.Na.size>0&&h.La.size<h.maxConcurrentLimboResolutions;){let t=h.Na.values().next().value;h.Na.delete(t);let s=new An(Ts.fromString(t)),u=h.Ka.next();h.Ba.set(u,new yy(s)),h.La=h.La.insert(s,u),Cd(h.remoteStore,new mc(ot(B(s.path)),u,"TargetPurposeLimboResolution",ho.oe))}}async function Ah(h,t,s){let u=[],f=[],w=[];h.xa.isEmpty()||(h.xa.forEach((E,$)=>{w.push(h.Ua($,t,s).then(J=>{var ge;if((J||s)&&h.isPrimaryClient){let rt=J?!J.fromCache:(ge=s?.targetChanges.get($.targetId))===null||ge===void 0?void 0:ge.current;h.sharedClientState.updateQueryState($.targetId,rt?"current":"not-current")}if(J){u.push(J);let rt=Ym.zi($.targetId,J);f.push(rt)}}))}),await Promise.all(w),h.Ma.R_(u),await async function(E,$){try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",J=>Qt.forEach($,ge=>Qt.forEach(ge.Wi,rt=>E.persistence.referenceDelegate.addReference(J,ge.targetId,rt)).next(()=>Qt.forEach(ge.Gi,rt=>E.persistence.referenceDelegate.removeReference(J,ge.targetId,rt)))))}catch(J){if(!Kl(J))throw J;yr("LocalStore","Failed to update sequence numbers: "+J)}for(let J of $){let ge=J.targetId;if(!J.fromCache){let rt=E.us.get(ge),Bt=rt.snapshotVersion,ir=rt.withLastLimboFreeSnapshotVersion(Bt);E.us=E.us.insert(ge,ir)}}}(h.localStore,f))}async function If(h,t){var s;if(!h.currentUser.isEqual(t)){yr("SyncEngine","User change. New user:",t.toKey());let u=await to(h.localStore,t);h.currentUser=t,s="'waitForPendingWrites' promise is rejected due to a user change.",h.Qa.forEach(f=>{f.forEach(w=>{w.reject(new Nn(Br.CANCELLED,s))})}),h.Qa.clear(),h.sharedClientState.handleUserChange(t,u.removedBatchIds,u.addedBatchIds),await Ah(h,u.Ts)}}function by(h,t){let s=h.Ba.get(t);if(s&&s.Fa)return Ti().add(s.key);{let u=Ti(),f=h.Oa.get(t);if(!f)return u;for(let w of f){let E=h.xa.get(w);u=u.unionWith(E.view.fa)}return u}}async function Tu(h,t){let s=await Xm(h.localStore,t.query,!0),u=t.view.va(s);return h.isPrimaryClient&&dg(h,t.targetId,u.ba),u}async function Sy(h,t){return uy(h.localStore,t).then(s=>Ah(h,s))}async function Ey(h,t,s,u){let f=await function(w,E){let $=w.mutationQueue;return w.persistence.runTransaction("Lookup mutation documents","readonly",J=>$.On(J,E).next(ge=>ge?w.localDocuments.getDocuments(J,ge):Qt.resolve(null)))}(h.localStore,t);f!==null?(s==="pending"?await zo(h.remoteStore):s==="acknowledged"||s==="rejected"?(Dd(h,t,u||null),Ef(h,t),function(w,E){w.mutationQueue.Ln(E)}(h.localStore,t)):Lr(),await Ah(h,f)):yr("SyncEngine","Cannot apply mutation batch with id: "+t)}async function F0(h,t){if(am(h),_y(h),t===!0&&h.$a!==!0){let s=h.sharedClientState.getAllActiveQueryTargets(),u=await sm(h,s.toArray());for(let f of(h.$a=!0,await Rd(h.remoteStore,!0),u))Cd(h.remoteStore,f)}else if(t===!1&&h.$a!==!1){let s=[],u=Promise.resolve();h.Oa.forEach((f,w)=>{h.sharedClientState.isLocalQueryTarget(w)?s.push(w):u=u.then(()=>(_f(h,w),df(h.localStore,w,!0))),yf(h.remoteStore,w)}),await u,await sm(h,s),h.Ba.forEach((f,w)=>{yf(h.remoteStore,w)}),h.ka.wr(),h.Ba=new Map,h.La=new hi(An.comparator),h.$a=!1,await Rd(h.remoteStore,!1)}}async function sm(h,t,s){let u=[],f=[];for(let w of t){let E,$=h.Oa.get(w);if($&&$.length!==0)for(let J of(E=await tp(h.localStore,ot($[0])),$)){let ge=h.xa.get(J),rt=await Tu(h,ge);rt.snapshot&&f.push(rt.snapshot)}else{let J=await ly(h.localStore,w);E=await tp(h.localStore,J),await sp(h,Kh(J),w,!1,E.resumeToken)}u.push(E)}return h.Ma.R_(f),u}function Kh(h){var t,s,u,f;return t=h.path,s=h.collectionGroup,u=h.orderBy,f=h.filters,new Be(t,s,u,f,h.limit,"F",h.startAt,h.endAt)}function V0(h){return h.localStore.persistence.$i()}async function U0(h,t,s,u){if(h.$a)return void yr("SyncEngine","Ignoring unexpected query state notification.");let f=h.Oa.get(t);if(f&&f.length>0)switch(s){case"current":case"not-current":{let w=await uy(h.localStore,Bn(f[0])),E=Ai.createSynthesizedRemoteEventForCurrentChange(t,s==="current",pr.EMPTY_BYTE_STRING);await Ah(h,w,E);break}case"rejected":await df(h.localStore,t,!0),_f(h,t,u);break;default:Lr()}}async function Rv(h,t,s){let u=am(h);if(u.$a){for(let f of t){if(u.Oa.has(f)&&u.sharedClientState.isActiveQueryTarget(f)){yr("SyncEngine","Adding an already active target "+f);continue}let w=await ly(u.localStore,f),E=await tp(u.localStore,w);await sp(u,Kh(w),E.targetId,!1,E.resumeToken),Cd(u.remoteStore,E)}for(let f of s)u.Oa.has(f)&&await df(u.localStore,f,!1).then(()=>{yf(u.remoteStore,f),_f(u,f)}).catch(pa)}}function am(h){return h.remoteStore.remoteSyncer.applyRemoteEvent=Od.bind(null,h),h.remoteStore.remoteSyncer.getRemoteKeysForTarget=by.bind(null,h),h.remoteStore.remoteSyncer.rejectListen=hg.bind(null,h),h.Ma.R_=ag.bind(null,h.eventManager),h.Ma.Wa=og.bind(null,h.eventManager),h}function _y(h){return h.remoteStore.remoteSyncer.applySuccessfulWrite=Cv.bind(null,h),h.remoteStore.remoteSyncer.rejectFailedWrite=kv.bind(null,h),h}class ap{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ch(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,s){return null}Ya(t,s){return null}Ha(t){var s;return s=this.persistence,new da(s,new oy,t.initialUser,this.serializer)}ja(t){return new $p(Td.ei,this.serializer)}za(t){return new Kp}async terminate(){var t,s;(t=this.gcScheduler)===null||t===void 0||t.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ap.provider={build:()=>new ap};class m extends ap{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,s){return this.persistence.referenceDelegate instanceof qp||Lr(),new Id(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,s)}ja(t){let s=this.cacheSizeBytes!==void 0?qo.withCacheSize(this.cacheSizeBytes):qo.DEFAULT;return new $p(u=>qp.ei(u,s),this.serializer)}}class i extends ap{constructor(t,s,u){super(),this.Za=t,this.cacheSizeBytes=s,this.forceOwnership=u,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Za.initialize(this,t),await _y(this.Za.syncEngine),await zo(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(t){var s;return s=this.persistence,new da(s,new oy,t.initialUser,this.serializer)}Ja(t,s){return new Id(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,s)}Ya(t,s){let u=new rc(s,this.persistence);return new ol(t.asyncQueue,u)}ja(t){let s=vv(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),u=this.cacheSizeBytes!==void 0?qo.withCacheSize(this.cacheSizeBytes):qo.DEFAULT;return new oc(this.synchronizeTabs,s,t.clientId,u,t.asyncQueue,$c(),Jp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(t){return new Kp}}class o{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=u=>vy(this.syncEngine,u,1),this.remoteStore.remoteSyncer.handleCredentialChange=If.bind(null,this.syncEngine),await Rd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Zp}createDatastore(t){let s=Ch(t.databaseInfo.databaseId),u=new Wp(t.databaseInfo);return new rg(t.authCredentials,t.appCheckCredentials,u,s)}createRemoteStore(t){var s;return s=this.localStore,new Hh(s,this.datastore,t.asyncQueue,u=>vy(this.syncEngine,u,0),hy.p()?new hy:new Zm)}createSyncEngine(t,s){return function(u,f,w,E,$,J,ge){let rt=new rm(u,f,w,E,$,J);return ge&&(rt.$a=!0),rt}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await async function(u){yr("RemoteStore","RemoteStore shutting down."),u.k_.add(5),await gf(u),u.Q_.shutdown(),u.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}o.provider={build:()=>new o};class d{constructor(t,s,u,f,w){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=u,this.databaseInfo=f,this.user=Sr.UNAUTHENTICATED,this.clientId=ru.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=w,this.authCredentials.start(u,async E=>{yr("FirestoreClient","Received user=",E.uid),await this.authCredentialListener(E),this.user=E}),this.appCheckCredentials.start(u,E=>(yr("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new As;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){let u=sg(s,"Failed to shutdown persistence");t.reject(u)}}),t.promise}}async function v(h,t){h.asyncQueue.verifyOperationInProgress(),yr("FirestoreClient","Initializing OfflineComponentProvider");let s=h.configuration;await t.initialize(s);let u=s.initialUser;h.setCredentialChangeListener(async f=>{u.isEqual(f)||(await to(t.localStore,f),u=f)}),t.persistence.setDatabaseDeletedListener(()=>h.terminate()),h._offlineComponents=t}async function _(h,t){h.asyncQueue.verifyOperationInProgress();let s=await O(h);yr("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(s,h.configuration),h.setCredentialChangeListener(u=>Sf(t.remoteStore,u)),h.setAppCheckTokenChangeListener((u,f)=>Sf(t.remoteStore,f)),h._onlineComponents=t}async function O(h){if(!h._offlineComponents)if(h._uninitializedComponentsProvider){yr("FirestoreClient","Using user provided OfflineComponentProvider");try{await v(h,h._uninitializedComponentsProvider._offline)}catch(t){if(!(t.name==="FirebaseError"?t.code===Br.FAILED_PRECONDITION||t.code===Br.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11))throw t;wi("Error using user provided cache. Falling back to memory cache: "+t),await v(h,new ap)}}else yr("FirestoreClient","Using default OfflineComponentProvider"),await v(h,new m(void 0));return h._offlineComponents}async function X(h){return h._onlineComponents||(h._uninitializedComponentsProvider?(yr("FirestoreClient","Using user provided OnlineComponentProvider"),await _(h,h._uninitializedComponentsProvider._online)):(yr("FirestoreClient","Using default OnlineComponentProvider"),await _(h,new o))),h._onlineComponents}function oe(h){let t={};return h.timeoutSeconds!==void 0&&(t.timeoutSeconds=h.timeoutSeconds),t}let Ge=new Map;function Tt(h){if(h===void 0)return"undefined";if(h===null)return"null";if(typeof h=="string")return h.length>20&&(h=`${h.substring(0,20)}...`),JSON.stringify(h);if(typeof h=="number"||typeof h=="boolean")return""+h;if(typeof h=="object"){if(h instanceof Array)return"an array";{var t;let s=(t=h).constructor?t.constructor.name:null;return s?`a custom ${s} object`:"an object"}}return typeof h=="function"?"a function":Lr()}class ar{constructor(t){var s,u;if(t.host===void 0){if(t.ssl!==void 0)throw new Nn(Br.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(s=t.ssl)===null||s===void 0||s;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Nn(Br.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(f,w,E,$){if(w===!0&&$===!0)throw new Nn(Br.INVALID_ARGUMENT,`${f} and ${E} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oe((u=t.experimentalLongPollingOptions)!==null&&u!==void 0?u:{}),function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new Nn(Br.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new Nn(Br.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new Nn(Br.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){var s,u;return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(s=this.experimentalLongPollingOptions,u=t.experimentalLongPollingOptions,s.timeoutSeconds===u.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ur{constructor(t,s,u,f){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=u,this._app=f,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ar({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Nn(Br.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Nn(Br.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ar(t),t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Jo;switch(s.type){case"firstParty":return new tc(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Nn(Br.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let s=Ge.get(t);s&&(yr("ComponentProvider","Removing Datastore"),Ge.delete(t),s.terminate())}(this),Promise.resolve()}}function wr(h,t,s,u={}){var f;let w=(h=function($,J){if("_delegate"in $&&($=$._delegate),!($ instanceof J)){if(J.name===$.constructor.name)throw new Nn(Br.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let ge=Tt($);throw new Nn(Br.INVALID_ARGUMENT,`Expected type '${J.name}', but it was: ${ge}`)}}return $}(h,ur))._getSettings(),E=`${t}:${s}`;if(w.host!=="firestore.googleapis.com"&&w.host!==E&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),h._setSettings(Object.assign(Object.assign({},w),{host:E,ssl:!1})),u.mockUserToken){let $,J;if(typeof u.mockUserToken=="string")$=u.mockUserToken,J=Sr.MOCK_USER;else{$=function(rt,Bt){if(rt.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let ir=Bt||"demo-project",Rr=rt.iat||0,Vn=rt.sub||rt.user_id;if(!Vn)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let oi=Object.assign({iss:`https://securetoken.google.com/${ir}`,aud:ir,iat:Rr,exp:Rr+3600,auth_time:Rr,sub:Vn,user_id:Vn,firebase:{sign_in_provider:"custom",identities:{}}},rt);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(oi)),""].join(".")}(u.mockUserToken,(f=h._app)===null||f===void 0?void 0:f.options.projectId);let ge=u.mockUserToken.sub||u.mockUserToken.user_id;if(!ge)throw new Nn(Br.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");J=new Sr(ge)}h._authCredentials=new qs(new ql($,J))}}class vn{constructor(t,s,u){this.converter=s,this._query=u,this.type="query",this.firestore=t}withConverter(t){return new vn(this.firestore,t,this._query)}}class Hn{constructor(t,s,u){this.converter=s,this._key=u,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Hn(this.firestore,t,this._key)}}class Jn extends vn{constructor(t,s,u){super(t,s,B(u)),this._path=u,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Hn(this.firestore,null,new An(t))}withConverter(t){return new Jn(this.firestore,t,this._path)}}class Os{constructor(t=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new pf(this,"async_queue_retry"),this.fu=()=>{let u=Jp();u&&yr("AsyncQueue","Visibility state changed to "+u.visibilityState),this.r_.Jo()},this.gu=t;let s=Jp();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.Eu){this.Eu=!0,this.Vu=t||!1;let s=Jp();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.Eu)return new Promise(()=>{});let s=new As;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(t().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!Kl(t))throw t;yr("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){let s=this.gu.then(()=>(this.Ru=!0,t().catch(u=>{let f;throw this.Au=u,this.Ru=!1,pi("INTERNAL UNHANDLED ERROR: ",(f=u.message||"",u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),f)),u}).then(u=>(this.Ru=!1,u))));return this.gu=s,s}enqueueAfterDelay(t,s,u){this.pu(),this.mu.indexOf(t)>-1&&(s=0);let f=Pd.createAndSchedule(this,t,s,u,w=>this.Su(w));return this.du.push(f),f}pu(){this.Au&&Lr()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(let s of this.du)if(s.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{for(let s of(this.du.sort((u,f)=>u.targetTimeMs-f.targetTimeMs),this.du))if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){let s=this.du.indexOf(t);this.du.splice(s,1)}}class Hi extends ur{constructor(t,s,u,f){super(t,s,u,f),this.type="firestore",this._queue=new Os,this._persistenceKey=f?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new Os(t),this._firestoreClient=void 0,await t}}}class nr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nr(pr.fromBase64String(t))}catch(s){throw new Nn(Br.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new nr(pr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Ot{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new Nn(Br.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Ft{constructor(t){this._methodName=t}}class Xt{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new Nn(Br.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new Nn(Br.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ci(this._lat,t._lat)||ci(this._long,t._long)}}class hr{constructor(t){this._values=(t||[]).map(s=>s)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,u){if(s.length!==u.length)return!1;for(let f=0;f<s.length;++f)if(s[f]!==u[f])return!1;return!0}(this._values,t._values)}}let xr=/^__.*__$/;class qt{constructor(t,s,u){this.data=t,this.fieldMask=s,this.fieldTransforms=u}toMutation(t,s){return this.fieldMask!==null?new vr(t,this.data,this.fieldMask,s,this.fieldTransforms):new sr(t,this.data,s,this.fieldTransforms)}}class Nl{constructor(t,s,u){this.data=t,this.fieldMask=s,this.fieldTransforms=u}toMutation(t,s){return new vr(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function Sc(h){switch(h){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lr()}}class Wh{constructor(t,s,u,f,w,E){this.settings=t,this.databaseId=s,this.serializer=u,this.ignoreUndefinedProperties=f,w===void 0&&this.Fu(),this.fieldTransforms=w||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new Wh(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var s;let u=(s=this.path)===null||s===void 0?void 0:s.child(t),f=this.xu({path:u,Nu:!1});return f.Lu(t),f}Bu(t){var s;let u=(s=this.path)===null||s===void 0?void 0:s.child(t),f=this.xu({path:u,Nu:!1});return f.Fu(),f}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return Qh(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(s=>t.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>t.isPrefixOf(s.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lu(this.path.get(t))}Lu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(Sc(this.Mu)&&xr.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class om{constructor(t,s,u){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=u||Ch(t)}$u(t,s,u,f=!1){return new Wh({Mu:t,methodName:s,Ku:u,path:Ns.emptyPath(),Nu:!1,Qu:f},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jh(h){let t=h._freezeSettings(),s=Ch(h._databaseId);return new om(h._databaseId,!!t.ignoreUndefinedProperties,s)}class Iy extends Ft{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Iy}}function op(h,t,s){return new Wh({Mu:3,Ku:t.settings.Ku,methodName:h._methodName,Nu:s},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Hu extends null{_toFieldTransform(t){return new V(t.path,new Ka)}isEqual(t){return t instanceof Hu}}class Go extends Ft{constructor(t,s){super(t),this.Uu=s}_toFieldTransform(t){let s=op(this,t,!0),u=new aa(this.Uu.map(f=>oh(f,s)));return new V(t.path,u)}isEqual(t){return t instanceof Go&&Ve(this.Uu,t.Uu)}}class Ty extends Ft{constructor(t,s){super(t),this.Uu=s}_toFieldTransform(t){let s=op(this,t,!0),u=new Qo(this.Uu.map(f=>oh(f,s)));return new V(t.path,u)}isEqual(t){return t instanceof Ty&&Ve(this.Uu,t.Uu)}}class Tf extends Ft{constructor(t,s){super(t),this.Wu=s}_toFieldTransform(t){let s=new ul(t.serializer,Yi(t.serializer,this.Wu));return new V(t.path,s)}isEqual(t){return t instanceof Tf&&this.Wu===t.Wu}}function pg(h,t,s,u=!1){return oh(s,h.$u(u?4:3,t))}function oh(h,t){if(mg(h=Ee(h)))return lm("Unsupported field value:",t,h),Pv(h,t);if(h instanceof Ft)return function(s,u){if(!Sc(u.Mu))throw u.qu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.qu(`${s._methodName}() is not currently supported inside arrays`);let f=s._toFieldTransform(u);f&&u.fieldTransforms.push(f)}(h,t),null;if(h===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),h instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(s,u){let f=[],w=0;for(let E of s){let $=oh(E,u.ku(w));$==null&&($={nullValue:"NULL_VALUE"}),f.push($),w++}return{arrayValue:{values:f}}}(h,t)}return function(s,u){if((s=Ee(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Yi(u.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){let f=ta.fromDate(s);return{timestampValue:za(u.serializer,f)}}if(s instanceof ta){let f=new ta(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:za(u.serializer,f)}}if(s instanceof Xt)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof nr)return{bytesValue:bl(u.serializer,s._byteString)};if(s instanceof Hn){let f=u.databaseId,w=s.firestore._databaseId;if(!w.isEqual(f))throw u.qu(`Document reference is for database ${w.projectId}/${w.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:yo(s.firestore._databaseId||u.databaseId,s._key.path)}}if(s instanceof hr)return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(f=>{if(typeof f!="number")throw u.qu("VectorValues must only contain numeric values.");return ga(u.serializer,f)})}}}}};throw u.qu(`Unsupported field value: ${Tt(s)}`)}(h,t)}function Pv(h,t){let s={};return os(h)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bs(h,(u,f)=>{let w=oh(f,t.Ou(u));w!=null&&(s[u]=w)}),{mapValue:{fields:s}}}function mg(h){return!(typeof h!="object"||h===null||h instanceof Array||h instanceof Date||h instanceof ta||h instanceof Xt||h instanceof nr||h instanceof Hn||h instanceof Ft||h instanceof hr)}function lm(h,t,s){if(!mg(s)||!(typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null))){let u=Tt(s);throw u==="an object"?t.qu(h+" a custom object"):t.qu(h+" "+u)}}function lp(h,t,s){if((t=Ee(t))instanceof Ot)return t._internalPath;if(typeof t=="string")return up(h,t);throw Qh("Field path arguments must be of type string or ",h,!1,void 0,s)}let xy=RegExp("[~\\*/\\[\\]]");function up(h,t,s){if(t.search(xy)>=0)throw Qh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,h,!1,void 0,s);try{return new Ot(...t.split("."))._internalPath}catch{throw Qh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,h,!1,void 0,s)}}function Qh(h,t,s,u,f){let w=u&&!u.isEmpty(),E=f!==void 0,$=`Function ${t}() called with invalid data`;s&&($+=" (via `toFirestore()`)"),$+=". ";let J="";return(w||E)&&(J+=" (found",w&&(J+=` in field ${u}`),E&&(J+=` in document ${f}`),J+=")"),new Nn(Br.INVALID_ARGUMENT,$+h+J)}function Av(h,t){return h.some(s=>s.isEqual(t))}class um{constructor(t,s,u,f,w){this._firestore=t,this._userDataWriter=s,this._key=u,this._document=f,this._converter=w}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Md(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let s=this._document.data.field(xf("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class Md extends um{data(){return super.data()}}function xf(h,t){return typeof t=="string"?up(h,t):t instanceof Ot?t._internalPath:t._delegate._internalPath}class Cf{}class Ld extends Cf{}class cm extends Ld{constructor(t,s,u){super(),this._field=t,this._op=s,this._value=u,this.type="where"}static _create(t,s,u){return new cm(t,s,u)}_apply(t){let s=this._parse(t);return Xh(t._query,s),new vn(t.firestore,t.converter,Gt(t._query,s))}_parse(t){let s=Jh(t.firestore);return function(u,f,w,E,$,J,ge){let rt;if($.isKeyField()){if(J==="array-contains"||J==="array-contains-any")throw new Nn(Br.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if(J==="in"||J==="not-in"){yg(ge,J);let Bt=[];for(let ir of ge)Bt.push(lh(E,u,ir));rt={arrayValue:{values:Bt}}}else rt=lh(E,u,ge)}else J!=="in"&&J!=="not-in"&&J!=="array-contains-any"||yg(ge,J),rt=pg(w,f,ge,J==="in"||J==="not-in");return Li.create($,J,rt)}(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}class Ol extends Cf{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new Ol(t,s)}_parse(t){let s=this._queryConstraints.map(u=>u._parse(t)).filter(u=>u.getFilters().length>0);return s.length===1?s[0]:Qi.create(s,this._getOperator())}_apply(t){let s=this._parse(t);return s.getFilters().length===0?t:(function(u,f){let w=u;for(let E of f.getFlattenedFilters())Xh(w,E),w=Gt(w,E)}(t._query,s),new vn(t.firestore,t.converter,Gt(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zl extends Ld{constructor(t,s){super(),this._field=t,this._direction=s,this.type="orderBy"}static _create(t,s){return new Zl(t,s)}_apply(t){let s=function(u,f,w){if(u.startAt!==null)throw new Nn(Br.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(u.endAt!==null)throw new Nn(Br.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xa(f,w)}(t._query,this._field,this._direction);return new vn(t.firestore,t.converter,function(u,f){let w=u.explicitOrderBy.concat([f]);return new Be(u.path,u.collectionGroup,w,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(t._query,s))}}class Dl extends Ld{constructor(t,s,u){super(),this.type=t,this._limit=s,this._limitType=u}static _create(t,s,u){return new Dl(t,s,u)}_apply(t){return new vn(t.firestore,t.converter,cr(t._query,this._limit,this._limitType))}}class jd extends Ld{constructor(t,s,u){super(),this.type=t,this._docOrFields=s,this._inclusive=u}static _create(t,s,u){return new jd(t,s,u)}_apply(t){var s;let u=Yh(t,this.type,this._docOrFields,this._inclusive);return new vn(t.firestore,t.converter,new Be((s=t._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt))}}class gg extends Ld{constructor(t,s,u){super(),this.type=t,this._docOrFields=s,this._inclusive=u}static _create(t,s,u){return new gg(t,s,u)}_apply(t){var s;let u=Yh(t,this.type,this._docOrFields,this._inclusive);return new vn(t.firestore,t.converter,new Be((s=t._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u))}}function Yh(h,t,s,u){if(s[0]=Ee(s[0]),s[0]instanceof um)return function(f,w,E,$,J){if(!$)throw new Nn(Br.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);let ge=[];for(let rt of Xe(f))if(rt.field.isKeyField())ge.push(po(w,$.key));else{let Bt=$.data.field(rt.field);if(Cs(Bt))throw new Nn(Br.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+rt.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(Bt===null){let ir=rt.field.canonicalString();throw new Nn(Br.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ir}' (used as the orderBy) does not exist.`)}ge.push(Bt)}return new Ds(ge,J)}(h._query,h.firestore._databaseId,t,s[0]._document,u);{let f=Jh(h.firestore);return function(w,E,$,J,ge,rt){let Bt=w.explicitOrderBy;if(ge.length>Bt.length)throw new Nn(Br.INVALID_ARGUMENT,`Too many arguments provided to ${J}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let ir=[];for(let Rr=0;Rr<ge.length;Rr++){let Vn=ge[Rr];if(Bt[Rr].field.isKeyField()){if(typeof Vn!="string")throw new Nn(Br.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${J}(), but got a ${typeof Vn}`);if(!be(w)&&Vn.indexOf("/")!==-1)throw new Nn(Br.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${J}() must be a plain document ID, but '${Vn}' contains a slash.`);let oi=w.path.child(Ts.fromString(Vn));if(!An.isDocumentKey(oi))throw new Nn(Br.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${J}() must result in a valid document path, but '${oi}' is not because it contains an odd number of segments.`);let vi=new An(oi);ir.push(po(E,vi))}else{let oi=pg($,J,Vn);ir.push(oi)}}return new Ds(ir,rt)}(h._query,h.firestore._databaseId,f,t,s,u)}}function lh(h,t,s){if(typeof(s=Ee(s))=="string"){if(s==="")throw new Nn(Br.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!be(t)&&s.indexOf("/")!==-1)throw new Nn(Br.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);let u=t.path.child(Ts.fromString(s));if(!An.isDocumentKey(u))throw new Nn(Br.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${u}' is not because it has an odd number of segments (${u.length}).`);return po(h,new An(u))}if(s instanceof Hn)return po(h,s._key);throw new Nn(Br.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tt(s)}.`)}function yg(h,t){if(!Array.isArray(h)||h.length===0)throw new Nn(Br.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Xh(h,t){let s=function(u,f){for(let w of u)for(let E of w.getFlattenedFilters())if(f.indexOf(E.op)>=0)return E.op;return null}(h.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(s!==null)throw s===t.op?new Nn(Br.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Nn(Br.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}class Nv{convertValue(t,s="none"){switch(sa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(us(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw Lr()}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){let u={};return bs(t,(f,w)=>{u[f]=this.convertValue(w,s)}),u}convertVectorValue(t){var s,u,f;return new hr((f=(u=(s=t.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||u===void 0?void 0:u.values)===null||f===void 0?void 0:f.map(w=>Sn(w.doubleValue)))}convertGeoPoint(t){return new Xt(Sn(t.latitude),Sn(t.longitude))}convertArray(t,s){return(t.values||[]).map(u=>this.convertValue(u,s))}convertServerTimestamp(t,s){switch(s){case"previous":let u=xa(t);return u==null?null:this.convertValue(u,s);case"estimate":return this.convertTimestamp(Ea(t));default:return null}}convertTimestamp(t){let s=sn(t);return new ta(s.seconds,s.nanos)}convertDocumentKey(t,s){let u=Ts.fromString(t);vd(u)||Lr();let f=new ia(u.get(1),u.get(3)),w=new An(u.popFirst(5));return f.isEqual(s)||pi(`Document ${w} contains a document reference within a different database (${f.projectId}/${f.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),w}}class cp extends um{constructor(t,s,u,f,w,E){super(t,s,u,f,E),this._firestore=t,this._firestoreImpl=t,this.metadata=w}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let s=new Ov(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){let u=this._document.data.field(xf("DocumentSnapshot.get",t));if(u!==null)return this._userDataWriter.convertValue(u,s.serverTimestamps)}}}class Ov extends cp{data(t={}){return super.data(t)}}function Bc(h,t){var s={};for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&0>t.indexOf(u)&&(s[u]=h[u]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,u=Object.getOwnPropertySymbols(h);f<u.length;f++)0>t.indexOf(u[f])&&Object.prototype.propertyIsEnumerable.call(h,u[f])&&(s[u[f]]=h[u[f]]);return s}function vg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}(function(h=!0){Qn=fi,In(new Qe("firestore",(t,{instanceIdentifier:s,options:u})=>{let f=t.getProvider("app").getImmediate(),w=new Hi(new xl(t.getProvider("auth-internal")),new Rc(t.getProvider("app-check-internal")),function(E,$){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new Nn(Br.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ia(E.options.projectId,$)}(f,s),f);return u=Object.assign({useFetchStreams:h},u),w._setSettings(u),w},"PUBLIC").setMultipleInstances(!0)),ui(Jr,"4.7.5",void 0),ui(Jr,"4.7.5","esm2017")})(),ui("firebase","11.0.2","app"),typeof SuppressedError=="function"&&SuppressedError;let Cy=new We("auth","Firebase",vg()),Zh=new wn("@firebase/auth");function kf(h,...t){Zh.logLevel<=j.ERROR&&Zh.error(`Auth (${fi}): ${h}`,...t)}function Ku(h,...t){throw bg(h,...t)}function Ml(h,...t){return bg(h,...t)}function wg(h,t,s){return new We("auth","Firebase",Object.assign(Object.assign({},vg()),{[t]:s})).create(t,{appName:h.name})}function uh(h){return wg(h,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bg(h,...t){if(typeof h!="string"){let s=t[0],u=[...t.slice(1)];return u[0]&&(u[0].appName=h.name),h._errorFactory.create(s,...u)}return Cy.create(h,...t)}function ji(h,t,...s){if(!h)throw bg(t,...s)}function Vo(h){let t="INTERNAL ASSERTION FAILED: "+h;throw kf(t),Error(t)}function fl(){var h;return typeof zr<"u"&&((h=zr.location)===null||h===void 0?void 0:h.href)||""}function Sg(){var h;return typeof zr<"u"&&((h=zr.location)===null||h===void 0?void 0:h.protocol)||null}class Nh{constructor(t,s){var u;this.shortDelay=t,this.longDelay=s,u="Short delay should be less than long delay!",s>t||Vo(u),this.isMobile=typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())||typeof navigator=="object"&&navigator.product==="ReactNative"}get(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Sg()==="http:"||Sg()==="https:"||function(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rf(h,t){var s,u;s=h.emulator,u="Emulator should always be set here",s||Vo(u);let{url:f}=h.emulator;return t?`${f}${t.startsWith("/")?t.slice(1):t}`:f}class Fd{static initialize(t,s,u){this.fetchImpl=t,s&&(this.headersImpl=s),u&&(this.responseImpl=u)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof zr<"u"&&"fetch"in zr?zr.fetch:typeof hn<"u"&&hn.fetch?hn.fetch:typeof fetch<"u"?fetch:void Vo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof zr<"u"&&"Headers"in zr?zr.Headers:typeof hn<"u"&&hn.Headers?hn.Headers:typeof Headers<"u"?Headers:void Vo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof zr<"u"&&"Response"in zr?zr.Response:typeof hn<"u"&&hn.Response?hn.Response:typeof Response<"u"?Response:void Vo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let Eg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Dv=new Nh(3e4,6e4);function nl(h,t){return h.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:h.tenantId}):t}async function Oo(h,t,s,u,f={}){return _l(h,f,async()=>{let w={},E={};u&&(t==="GET"?E=u:w={body:JSON.stringify(u)});let $=mt(Object.assign({key:h.config.apiKey},E)).slice(1),J=await h._getAdditionalHeaders();J["Content-Type"]="application/json",h.languageCode&&(J["X-Firebase-Locale"]=h.languageCode);let ge=Object.assign({method:t,headers:J},w);return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||(ge.referrerPolicy="no-referrer"),Fd.fetch()(_g(h,h.config.apiHost,s,$),ge)})}async function _l(h,t,s){h._canInitEmulator=!1;let u=Object.assign(Object.assign({},Eg),t);try{let f=new ky(h),w=await Promise.race([s(),f.promise]);f.clearNetworkTimeout();let E=await w.json();if("needConfirmation"in E)throw hp(h,"account-exists-with-different-credential",E);if(w.ok&&!("errorMessage"in E))return E;{let[$,J]=(w.ok?E.errorMessage:E.error.message).split(" : ");if($==="FEDERATED_USER_ID_ALREADY_LINKED")throw hp(h,"credential-already-in-use",E);if($==="EMAIL_EXISTS")throw hp(h,"email-already-in-use",E);if($==="USER_DISABLED")throw hp(h,"user-disabled",E);let ge=u[$]||$.toLowerCase().replace(/[_\s]+/g,"-");if(J)throw wg(h,ge,J);Ku(h,ge)}}catch(f){if(f instanceof Ce)throw f;Ku(h,"network-request-failed",{message:String(f)})}}async function Vd(h,t,s,u,f={}){let w=await Oo(h,t,s,u,f);return"mfaPendingCredential"in w&&Ku(h,"multi-factor-auth-required",{_serverResponse:w}),w}function _g(h,t,s,u){let f=`${t}${s}?${u}`;return h.config.emulator?Rf(h.config,f):`${h.config.apiScheme}://${f}`}class ky{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((s,u)=>{this.timer=setTimeout(()=>u(Ml(this.auth,"network-request-failed")),Dv.get())})}}function hp(h,t,s){let u={appName:h.name};s.email&&(u.email=s.email),s.phoneNumber&&(u.phoneNumber=s.phoneNumber);let f=Ml(h,t,u);return f.customData._tokenResponse=s,f}function hm(h){return h!==void 0&&h.enterprise!==void 0}class dm{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let s of this.recaptchaEnforcementState)if(s.provider&&s.provider===t)return function(u){switch(u){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}(s.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dp(h,t){return Oo(h,"GET","/v2/recaptchaConfig",nl(h,t))}async function fp(h,t){return Oo(h,"POST","/v1/accounts:delete",t)}async function pp(h,t){return Oo(h,"POST","/v1/accounts:lookup",t)}function qc(h){if(h)try{let t=new Date(Number(h));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function fm(h,t=!1){let s=Ee(h),u=await s.getIdToken(t),f=Ud(u);ji(f&&f.exp&&f.auth_time&&f.iat,s.auth,"internal-error");let w=typeof f.firebase=="object"?f.firebase:void 0,E=w?.sign_in_provider;return{claims:f,token:u,authTime:qc(pm(f.auth_time)),issuedAtTime:qc(pm(f.iat)),expirationTime:qc(pm(f.exp)),signInProvider:E||null,signInSecondFactor:w?.sign_in_second_factor||null}}function pm(h){return 1e3*Number(h)}function Ud(h){let[t,s,u]=h.split(".");if(t===void 0||s===void 0||u===void 0)return kf("JWT malformed, contained fewer than 3 sections"),null;try{let f=se(s);return f?JSON.parse(f):(kf("Failed to decode base64 JWT payload"),null)}catch(f){return kf("Caught error parsing JWT payload as JSON",f?.toString()),null}}function mp(h){let t=Ud(h);return ji(t,"internal-error"),ji(t.exp!==void 0,"internal-error"),ji(t.iat!==void 0,"internal-error"),Number(t.exp)-Number(t.iat)}async function $d(h,t,s=!1){if(s)return t;try{return await t}catch(u){throw u instanceof Ce&&function({code:f}){return f==="auth/user-disabled"||f==="auth/user-token-expired"}(u)&&h.auth.currentUser===h&&await h.auth.signOut(),u}}class mm{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var s;if(!t)return this.errorBackoff=3e4,Math.max(0,((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5);{let u=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),u}}schedule(t=!1){if(!this.isRunning)return;let s=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gm{constructor(t,s){this.createdAt=t,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gp(h){var t;let s=h.auth,u=await h.getIdToken(),f=await $d(h,pp(s,{idToken:u}));ji(f?.users.length,s,"internal-error");let w=f.users[0];h._notifyReloadListener(w);let E=!((t=w.providerUserInfo)===null||t===void 0)&&t.length?Ig(w.providerUserInfo):[],$=[...h.providerData.filter(rt=>!E.some(Bt=>Bt.providerId===rt.providerId)),...E],J=h.isAnonymous,ge=!(h.email&&w.passwordHash)&&!$?.length;Object.assign(h,{uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:$,metadata:new gm(w.createdAt,w.lastLoginAt),isAnonymous:!!J&&ge})}async function Ry(h){let t=Ee(h);await gp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Ig(h){return h.map(t=>{var{providerId:s}=t,u=Bc(t,["providerId"]);return{providerId:s,uid:u.rawId||"",displayName:u.displayName||null,email:u.email||null,phoneNumber:u.phoneNumber||null,photoURL:u.photoUrl||null}})}async function Py(h,t){let s=await _l(h,{},async()=>{let u=mt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:f,apiKey:w}=h.config,E=_g(h,f,"/v1/token",`key=${w}`),$=await h._getAdditionalHeaders();return $["Content-Type"]="application/x-www-form-urlencoded",Fd.fetch()(E,{method:"POST",headers:$,body:u})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function Pf(h,t){return Oo(h,"POST","/v2/accounts:revokeToken",nl(h,t))}class cu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ji(t.idToken,"internal-error"),ji(t.idToken!==void 0,"internal-error"),ji(t.refreshToken!==void 0,"internal-error");let s="expiresIn"in t&&t.expiresIn!==void 0?Number(t.expiresIn):mp(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,s)}updateFromIdToken(t){ji(t.length!==0,"internal-error");let s=mp(t);this.updateTokensAndExpiration(t,null,s)}async getToken(t,s=!1){return s||!this.accessToken||this.isExpired?(ji(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,s){let{accessToken:u,refreshToken:f,expiresIn:w}=await Py(t,s);this.updateTokensAndExpiration(u,f,Number(w))}updateTokensAndExpiration(t,s,u){this.refreshToken=s||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*u}static fromJSON(t,s){let{refreshToken:u,accessToken:f,expirationTime:w}=s,E=new cu;return u&&(ji(typeof u=="string","internal-error",{appName:t}),E.refreshToken=u),f&&(ji(typeof f=="string","internal-error",{appName:t}),E.accessToken=f),w&&(ji(typeof w=="number","internal-error",{appName:t}),E.expirationTime=w),E}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new cu,this.toJSON())}_performRefresh(){return Vo("not implemented")}}function xu(h,t){ji(typeof h=="string"||h===void 0,"internal-error",{appName:t})}class lc{constructor(t){var{uid:s,auth:u,stsTokenManager:f}=t,w=Bc(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=u,this.stsTokenManager=f,this.accessToken=f.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new gm(w.createdAt||void 0,w.lastLoginAt||void 0)}async getIdToken(t){let s=await $d(this,this.stsTokenManager.getToken(this.auth,t));return ji(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(t){return fm(this,t)}reload(){return Ry(this)}_assign(t){this!==t&&(ji(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(s=>Object.assign({},s)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let s=new lc(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(t){ji(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,s=!1){let u=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),u=!0),s&&await gp(this),await this.auth._persistUserIfCurrent(this),u&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(uh(this.auth));let t=await this.getIdToken();return await $d(this,fp(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,s){var u,f,w,E,$,J,ge,rt;let Bt=(u=s.displayName)!==null&&u!==void 0?u:void 0,ir=(f=s.email)!==null&&f!==void 0?f:void 0,Rr=(w=s.phoneNumber)!==null&&w!==void 0?w:void 0,Vn=(E=s.photoURL)!==null&&E!==void 0?E:void 0,oi=($=s.tenantId)!==null&&$!==void 0?$:void 0,vi=(J=s._redirectEventId)!==null&&J!==void 0?J:void 0,Gs=(ge=s.createdAt)!==null&&ge!==void 0?ge:void 0,ls=(rt=s.lastLoginAt)!==null&&rt!==void 0?rt:void 0,{uid:dr,emailVerified:Lt,isAnonymous:Vt,providerData:er,stsTokenManager:fr}=s;ji(dr&&fr,t,"internal-error");let Ar=cu.fromJSON(this.name,fr);ji(typeof dr=="string",t,"internal-error"),xu(Bt,t.name),xu(ir,t.name),ji(typeof Lt=="boolean",t,"internal-error"),ji(typeof Vt=="boolean",t,"internal-error"),xu(Rr,t.name),xu(Vn,t.name),xu(oi,t.name),xu(vi,t.name),xu(Gs,t.name),xu(ls,t.name);let Kt=new lc({uid:dr,auth:t,email:ir,emailVerified:Lt,displayName:Bt,isAnonymous:Vt,photoURL:Vn,phoneNumber:Rr,tenantId:oi,stsTokenManager:Ar,createdAt:Gs,lastLoginAt:ls});return er&&Array.isArray(er)&&(Kt.providerData=er.map(eu=>Object.assign({},eu))),vi&&(Kt._redirectEventId=vi),Kt}static async _fromIdTokenResponse(t,s,u=!1){let f=new cu;f.updateFromServerResponse(s);let w=new lc({uid:s.localId,auth:t,stsTokenManager:f,isAnonymous:u});return await gp(w),w}static async _fromGetAccountInfoResponse(t,s,u){let f=s.users[0];ji(f.localId!==void 0,"internal-error");let w=f.providerUserInfo!==void 0?Ig(f.providerUserInfo):[],E=!(f.email&&f.passwordHash)&&!w?.length,$=new cu;$.updateFromIdToken(u);let J=new lc({uid:f.localId,auth:t,stsTokenManager:$,isAnonymous:E});return Object.assign(J,{uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:w,metadata:new gm(f.createdAt,f.lastLoginAt),isAnonymous:!(f.email&&f.passwordHash)&&!w?.length}),J}}let Tg=new Map;function Pa(h){var t,s;t="Expected a class definition",h instanceof Function||Vo(t);let u=Tg.get(h);return u?(s="Instance stored in cache mismatched with class",u instanceof h||Vo(s)):(u=new h,Tg.set(h,u)),u}class Af{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,s){this.storage[t]=s}async _get(t){let s=this.storage[t];return s===void 0?null:s}async _remove(t){delete this.storage[t]}_addListener(t,s){}_removeListener(t,s){}}function ed(h,t,s){return`firebase:${h}:${t}:${s}`}Af.type="NONE";class Oh{constructor(t,s,u){this.persistence=t,this.auth=s,this.userKey=u;let{config:f,name:w}=this.auth;this.fullUserKey=ed(this.userKey,f.apiKey,w),this.fullPersistenceKey=ed("persistence",f.apiKey,w),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){let t=await this.persistence._get(this.fullUserKey);return t?lc._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;let s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,s,u="authUser"){if(!s.length)return new Oh(Pa(Af),t,u);let f=(await Promise.all(s.map(async ge=>{if(await ge._isAvailable())return ge}))).filter(ge=>ge),w=f[0]||Pa(Af),E=ed(u,t.config.apiKey,t.name),$=null;for(let ge of s)try{let rt=await ge._get(E);if(rt){let Bt=lc._fromJSON(t,rt);ge!==w&&($=Bt),w=ge;break}}catch{}let J=f.filter(ge=>ge._shouldAllowMigration);return w._shouldAllowMigration&&J.length&&(w=J[0],$&&await w._set(E,$.toJSON()),await Promise.all(s.map(async ge=>{if(ge!==w)try{await ge._remove(E)}catch{}}))),new Oh(w,t,u)}}function xg(h){let t=h.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Cg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";{if(t.includes("edge/"))return"Edge";if(yp(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vm(t))return"Blackberry";if(Dh(t))return"Webos";if(vp(t))return"Safari";if((t.includes("chrome/")||ym(t))&&!t.includes("edge/"))return"Chrome";if(kg(t))return"Android";let s=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(s?.length===2)return s[1]}return"Other"}function yp(h=Ne()){return/firefox\//i.test(h)}function vp(h=Ne()){let t=h.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ym(h=Ne()){return/crios\//i.test(h)}function Cg(h=Ne()){return/iemobile/i.test(h)}function kg(h=Ne()){return/android/i.test(h)}function vm(h=Ne()){return/blackberry/i.test(h)}function Dh(h=Ne()){return/webos/i.test(h)}function Rg(h=Ne()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function Pg(h=Ne()){return Rg(h)||kg(h)||Dh(h)||vm(h)||/windows phone/i.test(h)||Cg(h)}function wp(h,t=[]){let s;switch(h){case"Browser":s=xg(Ne());break;case"Worker":s=`${xg(Ne())}-${h}`;break;default:s=h}let u=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${fi}/${u}`}class Bd{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,s){let u=w=>new Promise((E,$)=>{try{let J=t(w);E(J)}catch(J){$(J)}});u.onAbort=s,this.queue.push(u);let f=this.queue.length-1;return()=>{this.queue[f]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;let s=[];try{for(let u of this.queue)await u(t),u.onAbort&&s.push(u.onAbort)}catch(u){for(let f of(s.reverse(),s))try{f()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:u?.message})}}}async function qd(h,t={}){return Oo(h,"GET","/v2/passwordPolicy",nl(h,t))}class $0{constructor(t){var s,u,f,w;let E=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=E.minPasswordLength)!==null&&s!==void 0?s:6,E.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=E.maxPasswordLength),E.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=E.containsLowercaseCharacter),E.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=E.containsUppercaseCharacter),E.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=E.containsNumericCharacter),E.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=E.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(f=(u=t.allowedNonAlphanumericCharacters)===null||u===void 0?void 0:u.join(""))!==null&&f!==void 0?f:"",this.forceUpgradeOnSignin=(w=t.forceUpgradeOnSignin)!==null&&w!==void 0&&w,this.schemaVersion=t.schemaVersion}validatePassword(t){var s,u,f,w,E,$;let J={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,J),this.validatePasswordCharacterOptions(t,J),J.isValid&&(J.isValid=(s=J.meetsMinPasswordLength)===null||s===void 0||s),J.isValid&&(J.isValid=(u=J.meetsMaxPasswordLength)===null||u===void 0||u),J.isValid&&(J.isValid=(f=J.containsLowercaseLetter)===null||f===void 0||f),J.isValid&&(J.isValid=(w=J.containsUppercaseLetter)===null||w===void 0||w),J.isValid&&(J.isValid=(E=J.containsNumericCharacter)===null||E===void 0||E),J.isValid&&(J.isValid=($=J.containsNonAlphanumericCharacter)===null||$===void 0||$),J}validatePasswordLengthOptions(t,s){let u=this.customStrengthOptions.minPasswordLength,f=this.customStrengthOptions.maxPasswordLength;u&&(s.meetsMinPasswordLength=t.length>=u),f&&(s.meetsMaxPasswordLength=t.length<=f)}validatePasswordCharacterOptions(t,s){let u;this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);for(let f=0;f<t.length;f++)u=t.charAt(f),this.updatePasswordCharacterOptionsStatuses(s,u>="a"&&u<="z",u>="A"&&u<="Z",u>="0"&&u<="9",this.allowedNonAlphanumericCharacters.includes(u))}updatePasswordCharacterOptionsStatuses(t,s,u,f,w){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=u)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=f)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=w))}}class Il{constructor(t,s,u,f){this.app=t,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=u,this.config=f,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wm(this),this.idTokenSubscription=new wm(this),this.beforeStateQueue=new Bd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=f.sdkClientVersion}_initializeWithPersistence(t,s){return s&&(this._popupRedirectResolver=Pa(s)),this._initializationPromise=this.queue(async()=>{var u,f;if(!this._deleted&&(this.persistenceManager=await Oh.create(this,t),!this._deleted)){if(!((u=this._popupRedirectResolver)===null||u===void 0)&&u._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((f=this.currentUser)===null||f===void 0?void 0:f.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let t=await this.assertedPersistence.getCurrentUser();if(this.currentUser||t){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{let s=await pp(this,{idToken:t}),u=await lc._fromGetAccountInfoResponse(this,s,t);await this.directlySetCurrentUser(u)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Ln(this.app)){let E=this.app.settings.authIdToken;return E?new Promise($=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(E).then($,$))}):this.directlySetCurrentUser(null)}let u=await this.assertedPersistence.getCurrentUser(),f=u,w=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let E=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,$=f?._redirectEventId,J=await this.tryRedirectSignIn(t);(!E||E===$)&&J?.user&&(f=J.user,w=!0)}if(!f)return this.directlySetCurrentUser(null);if(!f._redirectEventId){if(w)try{await this.beforeStateQueue.runMiddleware(f)}catch(E){f=u,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(E))}return f?this.reloadAndSetCurrentUserOrClear(f):this.directlySetCurrentUser(null)}return ji(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===f._redirectEventId?this.directlySetCurrentUser(f):this.reloadAndSetCurrentUserOrClear(f)}async tryRedirectSignIn(t){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(t){try{await gp(t)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ln(this.app))return Promise.reject(uh(this));let s=t?Ee(t):null;return s&&ji(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(t,s=!1){if(!this._deleted)return t&&ji(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(uh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ln(this.app)?Promise.reject(uh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let t=new $0(await qd(this));this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new We("auth","Firebase",t())}onAuthStateChanged(t,s,u){return this.registerStateListener(this.authStateSubscription,t,s,u)}beforeAuthStateChanged(t,s){return this.beforeStateQueue.pushCallback(t,s)}onIdTokenChanged(t,s,u){return this.registerStateListener(this.idTokenSubscription,t,s,u)}authStateReady(){return new Promise((t,s)=>{if(this.currentUser)t();else{let u=this.onAuthStateChanged(()=>{u(),t()},s)}})}async revokeAccessToken(t){if(this.currentUser){let s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(s.tenantId=this.tenantId),await Pf(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,s){let u=await this.getOrInitRedirectPersistenceManager(s);return t===null?u.removeCurrentUser():u.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){let s=t&&Pa(t)||this._popupRedirectResolver;ji(s,this,"argument-error"),this.redirectPersistenceManager=await Oh.create(this,[Pa(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var s,u;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===t?this._currentUser:((u=this.redirectUser)===null||u===void 0?void 0:u._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let u=(s=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==u&&(this.lastNotifiedUid=u,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,s,u,f){if(this._deleted)return()=>{};let w=typeof s=="function"?s:s.next.bind(s),E=!1,$=this._isInitialized?Promise.resolve():this._initializationPromise;if(ji($,this,"internal-error"),$.then(()=>{E||w(this.currentUser)}),typeof s=="function"){let J=t.addObserver(s,u,f);return()=>{E=!0,J()}}{let J=t.addObserver(s);return()=>{E=!0,J()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ji(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=wp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;let s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);let u=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());u&&(s["X-Firebase-Client"]=u);let f=await this._getAppCheckToken();return f&&(s["X-Firebase-AppCheck"]=f),s}async _getAppCheckToken(){var t;let s=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return s?.error&&function(u,...f){Zh.logLevel<=j.WARN&&Zh.warn(`Auth (${fi}): ${u}`,...f)}(`Error while retrieving App Check token: ${s.error}`),s?.token}}class wm{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(s,u){let f=new bt(s,void 0);return f.subscribe.bind(f)}(s=>this.observer=s)}get next(){return ji(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bp={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function td(h){return`__${h}${Math.floor(1e6*Math.random())}`}class zd{constructor(){this.enterprise=new Ay}ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}class Ay{ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}let Gd="NO_RECAPTCHA";class il{constructor(t){this.type="recaptcha-enterprise",this.auth=Ee(t)}async verify(t="verify",s=!1){async function u(w){if(!s){if(w.tenantId==null&&w._agentRecaptchaConfig!=null)return w._agentRecaptchaConfig.siteKey;if(w.tenantId!=null&&w._tenantRecaptchaConfigs[w.tenantId]!==void 0)return w._tenantRecaptchaConfigs[w.tenantId].siteKey}return new Promise(async(E,$)=>{dp(w,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(J=>{if(J.recaptchaKey===void 0)$(Error("recaptcha Enterprise site key undefined"));else{let ge=new dm(J);return w.tenantId==null?w._agentRecaptchaConfig=ge:w._tenantRecaptchaConfigs[w.tenantId]=ge,E(ge.siteKey)}}).catch(J=>{$(J)})})}function f(w,E,$){let J=window.grecaptcha;hm(J)?J.enterprise.ready(()=>{J.enterprise.execute(w,{action:t}).then(ge=>{E(ge)}).catch(()=>{E(Gd)})}):$(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zd().execute("siteKey",{action:"verify"}):new Promise((w,E)=>{u(this.auth).then($=>{if(!s&&hm(window.grecaptcha))f($,w,E);else{var J;if(typeof window>"u"){E(Error("RecaptchaVerifier is only supported in browser"));return}let ge=bp.recaptchaEnterpriseScript;ge.length!==0&&(ge+=$),(J=ge,bp.loadJS(J)).then(()=>{f($,w,E)}).catch(rt=>{E(rt)})}}).catch($=>{E($)})})}}async function bm(h,t,s,u=!1,f=!1){let w,E=new il(h);if(f)w=Gd;else try{w=await E.verify(s)}catch{w=await E.verify(s,!0)}let $=Object.assign({},t);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in $){let J=$.phoneEnrollmentInfo.phoneNumber,ge=$.phoneEnrollmentInfo.recaptchaToken;Object.assign($,{phoneEnrollmentInfo:{phoneNumber:J,recaptchaToken:ge,captchaResponse:w,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in $){let J=$.phoneSignInInfo.recaptchaToken;Object.assign($,{phoneSignInInfo:{recaptchaToken:J,captchaResponse:w,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return $}return u?Object.assign($,{captchaResp:w}):Object.assign($,{captchaResponse:w}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$}async function Sm(h,t,s,u,f){var w,E;if(f==="EMAIL_PASSWORD_PROVIDER"){if((w=h._getRecaptchaConfig())===null||w===void 0||!w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return u(h,t).catch(async $=>{if($.code!=="auth/missing-recaptcha-token")return Promise.reject($);{console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let J=await bm(h,t,s,s==="getOobCode");return u(h,J)}});{let $=await bm(h,t,s,s==="getOobCode");return u(h,$)}}if(f!=="PHONE_PROVIDER")return Promise.reject(f+" provider is not supported.");if(!((E=h._getRecaptchaConfig())===null||E===void 0)&&E.isProviderEnabled("PHONE_PROVIDER")){let $=await bm(h,t,s);return u(h,$).catch(async J=>{var ge;if(((ge=h._getRecaptchaConfig())===null||ge===void 0?void 0:ge.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(J.code==="auth/missing-recaptcha-token"||J.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${s} flow.`);let rt=await bm(h,t,s,!1,!0);return u(h,rt)}return Promise.reject(J)})}{let $=await bm(h,t,s,!1,!0);return u(h,$)}}async function Mv(h){let t=Ee(h),s=new dm(await dp(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));t.tenantId==null?t._agentRecaptchaConfig=s:t._tenantRecaptchaConfigs[t.tenantId]=s,s.isAnyProviderEnabled()&&new il(t).verify()}function Ny(h,t,s){let u=Ee(h);ji(u._canInitEmulator,u,"emulator-config-failed"),ji(/^https?:\/\//.test(t),u,"invalid-emulator-scheme");let f=!!s?.disableWarnings,w=Sp(t),{host:E,port:$}=function(ge){let rt=Sp(ge),Bt=/(\/\/)?([^?#/]+)/.exec(ge.substr(rt.length));if(!Bt)return{host:"",port:null};let ir=Bt[2].split("@").pop()||"",Rr=/^(\[[^\]]+\])(:|$)/.exec(ir);if(Rr){let Vn=Rr[1];return{host:Vn,port:rd(ir.substr(Vn.length+1))}}{let[Vn,oi]=ir.split(":");return{host:Vn,port:rd(oi)}}}(t),J=$===null?"":`:${$}`;u.config.emulator={url:`${w}//${E}${J}/`},u.settings.appVerificationDisabledForTesting=!0,u.emulatorConfig=Object.freeze({host:E,port:$,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:f})}),f||function(){function ge(){let rt=document.createElement("p"),Bt=rt.style;rt.innerText="Running in emulator mode. Do not use with production credentials.",Bt.position="fixed",Bt.width="100%",Bt.backgroundColor="#ffffff",Bt.border=".1em solid #000000",Bt.color="#b50000",Bt.bottom="0px",Bt.left="0px",Bt.margin="0px",Bt.zIndex="10000",Bt.textAlign="center",rt.classList.add("firebase-emulator-warning"),document.body.appendChild(rt)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",ge):ge())}()}function Sp(h){let t=h.indexOf(":");return t<0?"":h.substr(0,t+1)}function rd(h){if(!h)return null;let t=Number(h);return isNaN(t)?null:t}class Hd{constructor(t,s){this.providerId=t,this.signInMethod=s}toJSON(){return Vo("not implemented")}_getIdTokenResponse(t){return Vo("not implemented")}_linkToIdToken(t,s){return Vo("not implemented")}_getReauthenticationResolver(t){return Vo("not implemented")}}async function uc(h,t){return Oo(h,"POST","/v1/accounts:signUp",t)}async function Ag(h,t){return Vd(h,"POST","/v1/accounts:signInWithPassword",nl(h,t))}async function Ep(h,t){return Vd(h,"POST","/v1/accounts:signInWithEmailLink",nl(h,t))}async function Ng(h,t){return Vd(h,"POST","/v1/accounts:signInWithEmailLink",nl(h,t))}class nd extends Hd{constructor(t,s,u,f=null){super("password",u),this._email=t,this._password=s,this._tenantId=f}static _fromEmailAndPassword(t,s){return new nd(t,s,"password")}static _fromEmailAndCode(t,s,u=null){return new nd(t,s,"emailLink",u)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let s=typeof t=="string"?JSON.parse(t):t;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Sm(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ag,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Ep(t,{email:this._email,oobCode:this._password});default:Ku(t,"internal-error")}}async _linkToIdToken(t,s){switch(this.signInMethod){case"password":return Sm(t,{idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uc,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Ng(t,{idToken:s,email:this._email,oobCode:this._password});default:Ku(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Wu(h,t){return Vd(h,"POST","/v1/accounts:signInWithIdp",nl(h,t))}class Kd extends Hd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let s=new Kd(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(s.idToken=t.idToken),t.accessToken&&(s.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(s.nonce=t.nonce),t.pendingToken&&(s.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(s.accessToken=t.oauthToken,s.secret=t.oauthTokenSecret):Ku("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let s=typeof t=="string"?JSON.parse(t):t,{providerId:u,signInMethod:f}=s,w=Bc(s,["providerId","signInMethod"]);if(!u||!f)return null;let E=new Kd(u,f);return E.idToken=w.idToken||void 0,E.accessToken=w.accessToken||void 0,E.secret=w.secret,E.nonce=w.nonce,E.pendingToken=w.pendingToken||null,E}_getIdTokenResponse(t){return Wu(t,this.buildRequest())}_linkToIdToken(t,s){let u=this.buildRequest();return u.idToken=s,Wu(t,u)}_getReauthenticationResolver(t){let s=this.buildRequest();return s.autoCreate=!1,Wu(t,s)}buildRequest(){let t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{let s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),t.postBody=mt(s)}return t}}async function Em(h,t){return Oo(h,"POST","/v1/accounts:sendVerificationCode",nl(h,t))}async function Lv(h,t){return Vd(h,"POST","/v1/accounts:signInWithPhoneNumber",nl(h,t))}async function _m(h,t){let s=await Vd(h,"POST","/v1/accounts:signInWithPhoneNumber",nl(h,t));if(s.temporaryProof)throw hp(h,"account-exists-with-different-credential",s);return s}let Im={USER_NOT_FOUND:"user-not-found"};async function Oy(h,t){return Vd(h,"POST","/v1/accounts:signInWithPhoneNumber",nl(h,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Im)}class zc extends Hd{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,s){return new zc({verificationId:t,verificationCode:s})}static _fromTokenResponse(t,s){return new zc({phoneNumber:t,temporaryProof:s})}_getIdTokenResponse(t){return Lv(t,this._makeVerificationRequest())}_linkToIdToken(t,s){return _m(t,Object.assign({idToken:s},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return Oy(t,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:t,phoneNumber:s,verificationId:u,verificationCode:f}=this.params;return t&&s?{temporaryProof:t,phoneNumber:s}:{sessionInfo:u,code:f}}toJSON(){let t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));let{verificationId:s,verificationCode:u,phoneNumber:f,temporaryProof:w}=t;return u||s||f||w?new zc({verificationId:s,verificationCode:u,phoneNumber:f,temporaryProof:w}):null}}class _p{constructor(t){var s,u,f,w,E,$;let J=lt(et(t)),ge=(s=J.apiKey)!==null&&s!==void 0?s:null,rt=(u=J.oobCode)!==null&&u!==void 0?u:null,Bt=function(ir){switch(ir){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}((f=J.mode)!==null&&f!==void 0?f:null);ji(ge&&rt&&Bt,"argument-error"),this.apiKey=ge,this.operation=Bt,this.code=rt,this.continueUrl=(w=J.continueUrl)!==null&&w!==void 0?w:null,this.languageCode=(E=J.languageCode)!==null&&E!==void 0?E:null,this.tenantId=($=J.tenantId)!==null&&$!==void 0?$:null}static parseLink(t){let s=function(u){let f=lt(et(u)).link,w=f?lt(et(f)).deep_link_id:null,E=lt(et(u)).deep_link_id;return(E?lt(et(E)).link:null)||E||w||f||u}(t);try{return new _p(s)}catch{return null}}}class Nf{constructor(){this.providerId=Nf.PROVIDER_ID}static credential(t,s){return nd._fromEmailAndPassword(t,s)}static credentialWithLink(t,s){let u=_p.parseLink(s);return ji(u,"argument-error"),nd._fromEmailAndCode(t,u.code,u.tenantId)}}Nf.PROVIDER_ID="password",Nf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Nf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Tm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Ip extends Tm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class id extends Ip{constructor(){super("facebook.com")}static credential(t){return Kd._fromParams({providerId:id.PROVIDER_ID,signInMethod:id.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return id.credentialFromTaggedObject(t)}static credentialFromError(t){return id.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return id.credential(t.oauthAccessToken)}catch{return null}}}id.FACEBOOK_SIGN_IN_METHOD="facebook.com",id.PROVIDER_ID="facebook.com";class cc extends Ip{constructor(){super("google.com"),this.addScope("profile")}static credential(t,s){return Kd._fromParams({providerId:cc.PROVIDER_ID,signInMethod:cc.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:s})}static credentialFromResult(t){return cc.credentialFromTaggedObject(t)}static credentialFromError(t){return cc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:s,oauthAccessToken:u}=t;if(!s&&!u)return null;try{return cc.credential(s,u)}catch{return null}}}cc.GOOGLE_SIGN_IN_METHOD="google.com",cc.PROVIDER_ID="google.com";class Mh extends Ip{constructor(){super("github.com")}static credential(t){return Kd._fromParams({providerId:Mh.PROVIDER_ID,signInMethod:Mh.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Mh.credentialFromTaggedObject(t)}static credentialFromError(t){return Mh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Mh.credential(t.oauthAccessToken)}catch{return null}}}Mh.GITHUB_SIGN_IN_METHOD="github.com",Mh.PROVIDER_ID="github.com";class ch extends Ip{constructor(){super("twitter.com")}static credential(t,s){return Kd._fromParams({providerId:ch.PROVIDER_ID,signInMethod:ch.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:s})}static credentialFromResult(t){return ch.credentialFromTaggedObject(t)}static credentialFromError(t){return ch.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:s,oauthTokenSecret:u}=t;if(!s||!u)return null;try{return ch.credential(s,u)}catch{return null}}}ch.TWITTER_SIGN_IN_METHOD="twitter.com",ch.PROVIDER_ID="twitter.com";class hc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,s,u,f=!1){return new hc({user:await lc._fromIdTokenResponse(t,u,f),providerId:Lh(u),_tokenResponse:u,operationType:s})}static async _forOperation(t,s,u){return await t._updateTokensIfNecessary(u,!0),new hc({user:t,providerId:Lh(u),_tokenResponse:u,operationType:s})}}function Lh(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}class sd extends Ce{constructor(t,s,u,f){var w;super(s.code,s.message),this.operationType=u,this.user=f,Object.setPrototypeOf(this,sd.prototype),this.customData={appName:t.name,tenantId:(w=t.tenantId)!==null&&w!==void 0?w:void 0,_serverResponse:s.customData._serverResponse,operationType:u}}static _fromErrorAndOperation(t,s,u,f){return new sd(t,s,u,f)}}function Ju(h,t,s,u){return(t==="reauthenticate"?s._getReauthenticationResolver(h):s._getIdTokenResponse(h)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?sd._fromErrorAndOperation(h,f,t,u):f})}async function Of(h,t,s=!1){let u=await $d(h,t._linkToIdToken(h.auth,await h.getIdToken()),s);return hc._forOperation(h,"link",u)}async function Dy(h,t,s=!1){let{auth:u}=h;if(Ln(u.app))return Promise.reject(uh(u));let f="reauthenticate";try{let w=await $d(h,Ju(u,f,t,h),s);ji(w.idToken,u,"internal-error");let E=Ud(w.idToken);ji(E,u,"internal-error");let{sub:$}=E;return ji(h.uid===$,u,"user-mismatch"),hc._forOperation(h,f,w)}catch(w){throw w?.code==="auth/user-not-found"&&Ku(u,"user-mismatch"),w}}async function hh(h,t,s=!1){if(Ln(h.app))return Promise.reject(uh(h));let u="signIn",f=await Ju(h,u,t),w=await hc._fromIdTokenResponse(h,u,f);return s||await h._updateCurrentUser(w.user),w}class R{constructor(t,s){this.factorId=t,this.uid=s.mfaEnrollmentId,this.enrollmentTime=new Date(s.enrolledAt).toUTCString(),this.displayName=s.displayName}static _fromServerResponse(t,s){return"phoneInfo"in s?ue._fromServerResponse(t,s):"totpInfo"in s?Le._fromServerResponse(t,s):Ku(t,"internal-error")}}class ue extends R{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,s){return new ue(s)}}class Le extends R{constructor(t){super("totp",t)}static _fromServerResponse(t,s){return new Le(s)}}class _t{constructor(t,s,u={}){this.isNewUser=t,this.providerId=s,this.profile=u}}class Dr{constructor(t,s,u){this.type=t,this.credential=s,this.user=u}static _fromIdtoken(t,s){return new Dr("enroll",t,s)}static _fromMfaPendingCredential(t){return new Dr("signin",t)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var s,u;if(t?.multiFactorSession){if(!((s=t.multiFactorSession)===null||s===void 0)&&s.pendingCredential)return Dr._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(!((u=t.multiFactorSession)===null||u===void 0)&&u.idToken)return Dr._fromIdtoken(t.multiFactorSession.idToken)}return null}}class $r{constructor(t,s,u){this.session=t,this.hints=s,this.signInResolver=u}static _fromError(t,s){let u=Ee(t),f=s.customData._serverResponse,w=(f.mfaInfo||[]).map($=>R._fromServerResponse(u,$));ji(f.mfaPendingCredential,u,"internal-error");let E=Dr._fromMfaPendingCredential(f.mfaPendingCredential);return new $r(E,w,async $=>{let J=await $._process(u,E);delete f.mfaInfo,delete f.mfaPendingCredential;let ge=Object.assign(Object.assign({},f),{idToken:J.idToken,refreshToken:J.refreshToken});switch(s.operationType){case"signIn":let rt=await hc._fromIdTokenResponse(u,s.operationType,ge);return await u._updateCurrentUser(rt.user),rt;case"reauthenticate":return ji(s.user,u,"internal-error"),hc._forOperation(s.user,s.operationType,ge);default:Ku(u,"internal-error")}})}async resolveSignIn(t){return this.signInResolver(t)}}function Wr(h,t){return Oo(h,"POST","/v2/accounts/mfaEnrollment:start",nl(h,t))}class Kn{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(s=>{s.mfaInfo&&(this.enrolledFactors=s.mfaInfo.map(u=>R._fromServerResponse(t.auth,u)))})}static _fromUser(t){return new Kn(t)}async getSession(){return Dr._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,s){let u=await this.getSession(),f=await $d(this.user,t._process(this.user.auth,u,s));return await this.user._updateTokensIfNecessary(f),this.user.reload()}async unenroll(t){let s=typeof t=="string"?t:t.uid,u=await this.user.getIdToken();try{var f,w;let E=await $d(this.user,(f=this.user.auth,w={idToken:u,mfaEnrollmentId:s},Oo(f,"POST","/v2/accounts/mfaEnrollment:withdraw",nl(f,w))));this.enrolledFactors=this.enrolledFactors.filter(({uid:$})=>$!==s),await this.user._updateTokensIfNecessary(E),await this.user.reload()}catch(E){throw E}}}let Mi="__sak";class Xs{constructor(t,s){this.storageRetriever=t,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Mi,"1"),this.storage.removeItem(Mi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,s){return this.storage.setItem(t,JSON.stringify(s)),Promise.resolve()}_get(t){let s=this.storage.getItem(t);return Promise.resolve(s?JSON.parse(s):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class ra extends Xs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,s)=>this.onStorageEvent(t,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pg(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let s of Object.keys(this.listeners)){let u=this.storage.getItem(s),f=this.localCache[s];u!==f&&t(s,f,u)}}onStorageEvent(t,s=!1){if(!t.key){this.forAllChangedKeys((E,$,J)=>{this.notifyListeners(E,J)});return}let u=t.key;s?this.detachListener():this.stopPolling();let f=()=>{let E=this.storage.getItem(u);(s||this.localCache[u]!==E)&&this.notifyListeners(u,E)},w=this.storage.getItem(u);(function(){let E=Ne();return E.indexOf("MSIE ")>=0||E.indexOf("Trident/")>=0})()&&document.documentMode===10&&w!==t.newValue&&t.newValue!==t.oldValue?setTimeout(f,10):f()}notifyListeners(t,s){this.localCache[t]=s;let u=this.listeners[t];if(u)for(let f of Array.from(u))f(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,s,u)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:s,newValue:u}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,s){await super._set(t,s),this.localCache[t]=JSON.stringify(s)}async _get(t){let s=await super._get(t);return this.localCache[t]=JSON.stringify(s),s}async _remove(t){await super._remove(t),delete this.localCache[t]}}ra.type="LOCAL";class Ga extends Xs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,s){}_removeListener(t,s){}}Ga.type="SESSION";class pl{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let s=this.receivers.find(f=>f.isListeningto(t));if(s)return s;let u=new pl(t);return this.receivers.push(u),u}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let{eventId:s,eventType:u,data:f}=t.data,w=this.handlersMap[u];if(!w?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:u});let E=Array.from(w).map(async J=>J(t.origin,f)),$=await Promise.all(E.map(async J=>{try{return{fulfilled:!0,value:await J}}catch(ge){return{fulfilled:!1,reason:ge}}}));t.ports[0].postMessage({status:"done",eventId:s,eventType:u,response:$})}_subscribe(t,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(s)}_unsubscribe(t,s){this.handlersMap[t]&&s&&this.handlersMap[t].delete(s),s&&this.handlersMap[t].size!==0||delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Va(h="",t=10){let s="";for(let u=0;u<t;u++)s+=Math.floor(10*Math.random());return h+s}pl.receivers=[];class Cu{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,s,u=50){let f,w,E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw Error("connection_unavailable");return new Promise(($,J)=>{let ge=Va("",20);E.port1.start();let rt=setTimeout(()=>{J(Error("unsupported_event"))},u);w={messageChannel:E,onMessage(Bt){if(Bt.data.eventId===ge)switch(Bt.data.status){case"ack":clearTimeout(rt),f=setTimeout(()=>{J(Error("timeout"))},3e3);break;case"done":clearTimeout(f),$(Bt.data.response);break;default:clearTimeout(rt),clearTimeout(f),J(Error("invalid_response"))}}},this.handlers.add(w),E.port1.addEventListener("message",w.onMessage),this.target.postMessage({eventType:t,eventId:ge,data:s},[E.port2])}).finally(()=>{w&&this.removeMessageHandler(w)})}}function Zs(){return window}function Aa(){return Zs().WorkerGlobalScope!==void 0&&typeof Zs().importScripts=="function"}async function _o(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}let Ll="firebaseLocalStorageDb",Qu="firebaseLocalStorage",Df="fbase_key";class Wd{constructor(t){this.request=t}toPromise(){return new Promise((t,s)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function My(h,t){return h.transaction([Qu],t?"readwrite":"readonly").objectStore(Qu)}function B0(){let h=indexedDB.open(Ll,1);return new Promise((t,s)=>{h.addEventListener("error",()=>{s(h.error)}),h.addEventListener("upgradeneeded",()=>{let u=h.result;try{u.createObjectStore(Qu,{keyPath:Df})}catch(f){s(f)}}),h.addEventListener("success",async()=>{let u=h.result;u.objectStoreNames.contains(Qu)?t(u):(u.close(),await new Wd(indexedDB.deleteDatabase(Ll)).toPromise(),t(await B0()))})})}async function Jw(h,t,s){return new Wd(My(h,!0).put({[Df]:t,value:s})).toPromise()}async function SS(h,t){let s=My(h,!1).get(t),u=await new Wd(s).toPromise();return u===void 0?null:u.value}function jv(h,t){return new Wd(My(h,!0).delete(t)).toPromise()}class Fv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await B0()),this.db}async _withRetries(t){let s=0;for(;;)try{let u=await this._openDb();return await t(u)}catch(u){if(s++>3)throw u;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Aa()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pl._getInstance(Aa()?zr:null),this.receiver._subscribe("keyChanged",async(t,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(t,s)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await _o(),!this.activeServiceWorker)return;this.sender=new Cu(this.activeServiceWorker);let u=await this.sender._send("ping",{},800);u&&((t=u[0])===null||t===void 0?void 0:t.fulfilled)&&((s=u[0])===null||s===void 0?void 0:s.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var s;if(this.sender&&this.activeServiceWorker&&(((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await B0();return await Jw(t,Mi,"1"),await jv(t,Mi),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,s){return this._withPendingWrite(async()=>(await this._withRetries(u=>Jw(u,t,s)),this.localCache[t]=s,this.notifyServiceWorker(t)))}async _get(t){let s=await this._withRetries(u=>SS(u,t));return this.localCache[t]=s,s}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(s=>jv(s,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(f=>new Wd(My(f,!1).getAll()).toPromise());if(!t||this.pendingWrites!==0)return[];let s=[],u=new Set;if(t.length!==0)for(let{fbase_key:f,value:w}of t)u.add(f),JSON.stringify(this.localCache[f])!==JSON.stringify(w)&&(this.notifyListeners(f,w),s.push(f));for(let f of Object.keys(this.localCache))this.localCache[f]&&!u.has(f)&&(this.notifyListeners(f,null),s.push(f));return s}notifyListeners(t,s){this.localCache[t]=s;let u=this.listeners[t];if(u)for(let f of Array.from(u))f(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}function xm(h,t){return Oo(h,"POST","/v2/accounts/mfaSignIn:start",nl(h,t))}Fv.type="LOCAL",td("rcb"),new Nh(3e4,6e4);let Ly="recaptcha";async function q0(h,t,s){var u;if(!h._getRecaptchaConfig())try{await Mv(h)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let f;if(f=typeof t=="string"?{phoneNumber:t}:t,"session"in f){let w=f.session;if("phoneNumber"in f){ji(w.type==="enroll",h,"internal-error");let E={idToken:w.credential,phoneEnrollmentInfo:{phoneNumber:f.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Sm(h,E,"mfaSmsEnrollment",async(ge,rt)=>{if(rt.phoneEnrollmentInfo.captchaResponse===Gd){ji(s?.type===Ly,ge,"argument-error");let Bt=await jy(ge,rt,s);return Wr(ge,Bt)}return Wr(ge,rt)},"PHONE_PROVIDER").catch(ge=>Promise.reject(ge))).phoneSessionInfo.sessionInfo}{ji(w.type==="signin",h,"internal-error");let E=((u=f.multiFactorHint)===null||u===void 0?void 0:u.uid)||f.multiFactorUid;ji(E,h,"missing-multi-factor-info");let $={mfaPendingCredential:w.credential,mfaEnrollmentId:E,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Sm(h,$,"mfaSmsSignIn",async(rt,Bt)=>{if(Bt.phoneSignInInfo.captchaResponse===Gd){ji(s?.type===Ly,rt,"argument-error");let ir=await jy(rt,Bt,s);return xm(rt,ir)}return xm(rt,Bt)},"PHONE_PROVIDER").catch(rt=>Promise.reject(rt))).phoneResponseInfo.sessionInfo}}{let w={phoneNumber:f.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Sm(h,w,"sendVerificationCode",async(J,ge)=>{if(ge.captchaResponse===Gd){ji(s?.type===Ly,J,"argument-error");let rt=await jy(J,ge,s);return Em(J,rt)}return Em(J,ge)},"PHONE_PROVIDER").catch(J=>Promise.reject(J))).sessionInfo}}finally{s?._reset()}}async function jy(h,t,s){ji(s.type===Ly,h,"argument-error");let u=await s.verify();ji(typeof u=="string",h,"argument-error");let f=Object.assign({},t);if("phoneEnrollmentInfo"in f){let w=f.phoneEnrollmentInfo.phoneNumber,E=f.phoneEnrollmentInfo.captchaResponse,$=f.phoneEnrollmentInfo.clientType,J=f.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:w,recaptchaToken:u,captchaResponse:E,clientType:$,recaptchaVersion:J}}),f}if(!("phoneSignInInfo"in f))return Object.assign(f,{recaptchaToken:u}),f;{let w=f.phoneSignInInfo.captchaResponse,E=f.phoneSignInInfo.clientType,$=f.phoneSignInInfo.recaptchaVersion;return Object.assign(f,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:w,clientType:E,recaptchaVersion:$}}),f}}class jh{constructor(t){this.providerId=jh.PROVIDER_ID,this.auth=Ee(t)}verifyPhoneNumber(t,s){return q0(this.auth,t,Ee(s))}static credential(t,s){return zc._fromVerification(t,s)}static credentialFromResult(t){return jh.credentialFromTaggedObject(t)}static credentialFromError(t){return jh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{phoneNumber:s,temporaryProof:u}=t;return s&&u?zc._fromTokenResponse(s,u):null}}jh.PROVIDER_ID="phone",jh.PHONE_SIGN_IN_METHOD="phone";class z0 extends Hd{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Wu(t,this._buildIdpRequest())}_linkToIdToken(t,s){return Wu(t,this._buildIdpRequest(s))}_getReauthenticationResolver(t){return Wu(t,this._buildIdpRequest())}_buildIdpRequest(t){let s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(s.idToken=t),s}}function ES(h){return hh(h.auth,new z0(h),h.bypassAuthState)}function _S(h){let{auth:t,user:s}=h;return ji(s,t,"internal-error"),Dy(s,new z0(h),h.bypassAuthState)}async function k_(h){let{auth:t,user:s}=h;return ji(s,t,"internal-error"),Of(s,new z0(h),h.bypassAuthState)}class IS{constructor(t,s,u,f,w=!1){this.auth=t,this.resolver=u,this.user=f,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(t,s)=>{this.pendingPromise={resolve:t,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(u){this.reject(u)}})}async onAuthEvent(t){let{urlResponse:s,sessionId:u,postBody:f,tenantId:w,error:E,type:$}=t;if(E){this.reject(E);return}let J={auth:this.auth,requestUri:s,sessionId:u,tenantId:w||void 0,postBody:f||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask($)(J))}catch(ge){this.reject(ge)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ES;case"linkViaPopup":case"linkViaRedirect":return k_;case"reauthViaPopup":case"reauthViaRedirect":return _S;default:Ku(this.auth,"internal-error")}}resolve(t){var s,u;s=this.pendingPromise,u="Pending promise was never set",s||Vo(u),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){var s,u;s=this.pendingPromise,u="Pending promise was never set",s||Vo(u),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let R_=new Nh(2e3,1e4);class Cm extends IS{constructor(t,s,u,f,w){super(t,s,f,w),this.provider=u,this.authWindow=null,this.pollId=null,Cm.currentPopupAction&&Cm.currentPopupAction.cancel(),Cm.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return ji(t,this.auth,"internal-error"),t}async onExecution(){var t,s;t=this.filter.length===1,s="Popup operations only handle one event",t||Vo(s);let u=Va();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],u),this.authWindow.associatedEvent=u,this.resolver._originValidation(this.auth).catch(f=>{this.reject(f)}),this.resolver._isIframeWebStorageSupported(this.auth,f=>{f||this.reject(Ml(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ml(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cm.currentPopupAction=null}pollUserCancellation(){let t=()=>{var s,u;if(!((u=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||u===void 0)&&u.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ml(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,R_.get())};t()}}Cm.currentPopupAction=null;let Fy=new Map;class P_ extends IS{constructor(t,s,u=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,u),this.eventId=null}async execute(){let t=Fy.get(this.auth._key());if(!t){try{let s=await A_(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(s){t=()=>Promise.reject(s)}Fy.set(this.auth._key(),t)}return this.bypassAuthState||Fy.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let s=await this.auth._redirectUserForId(t.eventId);if(s)return this.user=s,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A_(h,t){let s=Qw(t),u=Vv(h);if(!await u._isAvailable())return!1;let f=await u._get(s)==="true";return await u._remove(s),f}function N_(h,t){Fy.set(h._key(),t)}function Vv(h){return Pa(h._redirectPersistence)}function Qw(h){return ed("pendingRedirect",h.config.apiKey,h.name)}async function Vy(h,t,s=!1){var u,f;if(Ln(h.app))return Promise.reject(uh(h));let w=Ee(h),E=(u=w,(f=t)?Pa(f):(ji(u._popupRedirectResolver,u,"argument-error"),u._popupRedirectResolver)),$=new P_(w,E,s),J=await $.execute();return J&&!s&&(delete J.user._redirectEventId,await w._persistUserIfCurrent(J.user),await w._setRedirectUser(null,t)),J}class TS{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let s=!1;return this.consumers.forEach(u=>{this.isEventForConsumer(t,u)&&(s=!0,this.sendToConsumer(t,u),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function(u){switch(u.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uv(u);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=t,s=!0)),s}sendToConsumer(t,s){var u;if(t.error&&!Uv(t)){let f=((u=t.error.code)===null||u===void 0?void 0:u.split("auth/")[1])||"internal-error";s.onError(Ml(this.auth,f))}else s.onAuthEvent(t)}isEventForConsumer(t,s){let u=s.eventId===null||!!t.eventId&&t.eventId===s.eventId;return s.filter.includes(t.type)&&u}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xS(t))}saveEventToCache(t){this.cachedEventUids.add(xS(t)),this.lastProcessedEventTime=Date.now()}}function xS(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(t=>t).join("-")}function Uv({type:h,error:t}){return h==="unknown"&&t?.code==="auth/no-auth-event"}async function CS(h,t={}){return Oo(h,"GET","/v1/projects",t)}let kS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G0=/^https?/;async function Yw(h){if(h.config.emulator)return;let{authorizedDomains:t}=await CS(h);for(let s of t)try{if(function(u){let f=fl(),{protocol:w,hostname:E}=new URL(f);if(u.startsWith("chrome-extension://")){let J=new URL(u);return J.hostname===""&&E===""?w==="chrome-extension:"&&u.replace("chrome-extension://","")===f.replace("chrome-extension://",""):w==="chrome-extension:"&&J.hostname===E}if(!G0.test(w))return!1;if(kS.test(u))return E===u;let $=u.replace(/\./g,"\\.");return RegExp("^(.+\\."+$+"|"+$+")$","i").test(E)}(s))return}catch{}Ku(h,"unauthorized-domain")}let RS=new Nh(3e4,6e4);function Xw(){let h=Zs().___jsl;if(h?.H){for(let t of Object.keys(h.H))if(h.H[t].r=h.H[t].r||[],h.H[t].L=h.H[t].L||[],h.H[t].r=[...h.H[t].L],h.CP)for(let s=0;s<h.CP.length;s++)h.CP[s]=null}}let $v=null,Zw=new Nh(5e3,15e3),eb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function Bv(h){let t=await($v=$v||new Promise((u,f)=>{var w,E,$,J;function ge(){Xw(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Xw(),f(Ml(h,"network-request-failed"))},timeout:RS.get()})}if(!((E=(w=Zs().gapi)===null||w===void 0?void 0:w.iframes)===null||E===void 0)&&E.Iframe)u(gapi.iframes.getContext());else if(!(($=Zs().gapi)===null||$===void 0)&&$.load)ge();else{let rt=td("iframefcb");return Zs()[rt]=()=>{gapi.load?ge():f(Ml(h,"network-request-failed"))},(J=`${bp.gapiScript}?onload=${rt}`,bp.loadJS(J)).catch(Bt=>f(Bt))}}).catch(u=>{throw $v=null,u})),s=Zs().gapi;return ji(s,h,"internal-error"),t.open({where:document.body,url:function(u){let f=u.config;ji(f.authDomain,u,"auth-domain-config-required");let w=f.emulator?Rf(f,"emulator/auth/iframe"):`https://${u.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:u.name,v:fi},$=tb.get(u.config.apiHost);$&&(E.eid=$);let J=u._getFrameworks();return J.length&&(E.fw=J.join(",")),`${w}?${mt(E).slice(1)}`}(h),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eb,dontclear:!0},u=>new Promise(async(f,w)=>{await u.restyle({setHideOnLeave:!1});let E=Ml(h,"network-request-failed"),$=Zs().setTimeout(()=>{w(E)},Zw.get());function J(){Zs().clearTimeout($),f(u)}u.ping(J).then(J,()=>{w(E)})}))}let qv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class H0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}let K0=encodeURIComponent("fac");async function ad(h,t,s,u,f,w){ji(h.config.authDomain,h,"auth-domain-config-required"),ji(h.config.apiKey,h,"invalid-api-key");let E={apiKey:h.config.apiKey,appName:h.name,authType:s,redirectUrl:u,v:fi,eventId:f};if(t instanceof Tm)for(let[ge,rt]of(t.setDefaultLanguage(h.languageCode),E.providerId=t.providerId||"",!function(Bt){for(let ir in Bt)if(Object.prototype.hasOwnProperty.call(Bt,ir))return!1;return!0}(t.getCustomParameters())&&(E.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(w||{})))E[ge]=rt;if(t instanceof Ip){let ge=t.getScopes().filter(rt=>rt!=="");ge.length>0&&(E.scopes=ge.join(","))}for(let ge of(h.tenantId&&(E.tid=h.tenantId),Object.keys(E)))E[ge]===void 0&&delete E[ge];let $=await h._getAppCheckToken(),J=$?`#${K0}=${encodeURIComponent($)}`:"";return`${function({config:ge}){return ge.emulator?Rf(ge,"emulator/auth/handler"):`https://${ge.authDomain}/__/auth/handler`}(h)}?${mt(E).slice(1)}${J}`}let Gc="webStorageSupport";class Uy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ga,this._completeRedirectFn=Vy,this._overrideRedirectResult=N_}async _openPopup(t,s,u,f){var w,E,$;E=(w=this.eventManagers[t._key()])===null||w===void 0?void 0:w.manager,$="_initialize() not called before _openPopup()",E||Vo($);let J=await ad(t,s,u,fl(),f);return function(ge,rt,Bt,ir=500,Rr=600){let Vn=Math.max((window.screen.availHeight-Rr)/2,0).toString(),oi=Math.max((window.screen.availWidth-ir)/2,0).toString(),vi="",Gs=Object.assign(Object.assign({},qv),{width:ir.toString(),height:Rr.toString(),top:Vn,left:oi}),ls=Ne().toLowerCase();Bt&&(vi=ym(ls)?"_blank":Bt),yp(ls)&&(rt=rt||"http://localhost",Gs.scrollbars="yes");let dr=Object.entries(Gs).reduce((Vt,[er,fr])=>`${Vt}${er}=${fr},`,"");if(function(Vt=Ne()){var er;return Rg(Vt)&&!!(!((er=window.navigator)===null||er===void 0)&&er.standalone)}(ls)&&vi!=="_self")return function(Vt,er){let fr=document.createElement("a");fr.href=Vt,fr.target=er;let Ar=document.createEvent("MouseEvent");Ar.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),fr.dispatchEvent(Ar)}(rt||"",vi),new H0(null);let Lt=window.open(rt||"",vi,dr);ji(Lt,ge,"popup-blocked");try{Lt.focus()}catch{}return new H0(Lt)}(t,J,Va())}async _openRedirect(t,s,u,f){var w;return await this._originValidation(t),w=await ad(t,s,u,fl(),f),Zs().location.href=w,new Promise(()=>{})}_initialize(t){let s=t._key();if(this.eventManagers[s]){var u;let{manager:w,promise:E}=this.eventManagers[s];return w?Promise.resolve(w):(u="If manager is not set, promise should be",E||Vo(u),E)}let f=this.initAndGetManager(t);return this.eventManagers[s]={promise:f},f.catch(()=>{delete this.eventManagers[s]}),f}async initAndGetManager(t){let s=await Bv(t),u=new TS(t);return s.register("authEvent",f=>(ji(f?.authEvent,t,"invalid-auth-event"),{status:u.onEvent(f.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:u},this.iframes[t._key()]=s,u}_isIframeWebStorageSupported(t,s){this.iframes[t._key()].send(Gc,{type:Gc},u=>{var f;let w=(f=u?.[0])===null||f===void 0?void 0:f[Gc];w!==void 0&&s(!!w),Ku(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let s=t._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=Yw(t)),this.originValidationPromises[s]}get _shouldInitProactively(){return Pg()||vp()||Rg()}}class W0{constructor(t){this.factorId=t}_process(t,s,u){switch(s.type){case"enroll":return this._finalizeEnroll(t,s.credential,u);case"signin":return this._finalizeSignIn(t,s.credential);default:return Vo("unexpected MultiFactorSessionType")}}}class zv extends W0{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new zv(t)}_finalizeEnroll(t,s,u){return Oo(t,"POST","/v2/accounts/mfaEnrollment:finalize",nl(t,{idToken:s,displayName:u,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(t,s){return Oo(t,"POST","/v2/accounts/mfaSignIn:finalize",nl(t,{mfaPendingCredential:s,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class J0{constructor(){}static assertion(t){return zv._fromCredential(t)}}J0.FACTOR_ID="phone";class Og{static assertionForEnrollment(t,s){return km._fromSecret(t,s)}static assertionForSignIn(t,s){return km._fromEnrollmentId(t,s)}static async generateSecret(t){var s,u;ji(((s=t.user)===null||s===void 0?void 0:s.auth)!==void 0,"internal-error");let f=await Oo(u=t.user.auth,"POST","/v2/accounts/mfaEnrollment:start",nl(u,{idToken:t.credential,totpEnrollmentInfo:{}}));return Tp._fromStartTotpMfaEnrollmentResponse(f,t.user.auth)}}Og.FACTOR_ID="totp";class km extends W0{constructor(t,s,u){super("totp"),this.otp=t,this.enrollmentId=s,this.secret=u}static _fromSecret(t,s){return new km(s,void 0,t)}static _fromEnrollmentId(t,s){return new km(s,t)}async _finalizeEnroll(t,s,u){return ji(this.secret!==void 0,t,"argument-error"),Oo(t,"POST","/v2/accounts/mfaEnrollment:finalize",nl(t,{idToken:s,displayName:u,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(t,s){ji(this.enrollmentId!==void 0&&this.otp!==void 0,t,"argument-error");let u={verificationCode:this.otp};return Oo(t,"POST","/v2/accounts/mfaSignIn:finalize",nl(t,{mfaPendingCredential:s,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:u}))}}class Tp{constructor(t,s,u,f,w,E,$){this.sessionInfo=E,this.auth=$,this.secretKey=t,this.hashingAlgorithm=s,this.codeLength=u,this.codeIntervalSeconds=f,this.enrollmentCompletionDeadline=w}static _fromStartTotpMfaEnrollmentResponse(t,s){return new Tp(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,s)}_makeTotpVerificationInfo(t){return{sessionInfo:this.sessionInfo,verificationCode:t}}generateQrCodeUrl(t,s){var u;let f=!1;return(Dg(t)||Dg(s))&&(f=!0),f&&(Dg(t)&&(t=((u=this.auth.currentUser)===null||u===void 0?void 0:u.email)||"unknownuser"),Dg(s)&&(s=this.auth.name)),`otpauth://totp/${s}:${t}?secret=${this.secretKey}&issuer=${s}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Dg(h){return h===void 0||h?.length===0}var Gv="@firebase/auth",rb="1.8.1";class O_{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let s=this.auth.onIdTokenChanged(u=>{t(u?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,s),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let s=this.internalListeners.get(t);s&&(this.internalListeners.delete(t),s(),this.updateProactiveRefresh())}assertAuthConfigured(){ji(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let D_=pt("authIdTokenMaxAge")||300,Q0=null,Hv=h=>async t=>{let s=t&&await t.getIdTokenResult(),u=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(u&&u>D_)return;let f=s?.token;Q0!==f&&(Q0=f,await fetch(h,{method:f?"POST":"DELETE",headers:f?{Authorization:`Bearer ${f}`}:{}}))};bp={loadJS:h=>new Promise((t,s)=>{let u=document.createElement("script");u.setAttribute("src",h),u.onload=t,u.onerror=f=>{let w=Ml("internal-error");w.customData=f,s(w)},u.type="text/javascript",u.charset="UTF-8",function(){var f,w;return(w=(f=document.getElementsByTagName("head"))===null||f===void 0?void 0:f[0])!==null&&w!==void 0?w:document}().appendChild(u)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},function(h){In(new Qe("auth",(t,{options:s})=>{let u=t.getProvider("app").getImmediate(),f=t.getProvider("heartbeat"),w=t.getProvider("app-check-internal"),{apiKey:E,authDomain:$}=u.options;ji(E&&!E.includes(":"),"invalid-api-key",{appName:u.name});let J=new Il(u,f,w,{apiKey:E,authDomain:$,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wp(h)});return function(ge,rt){let Bt=rt?.persistence||[],ir=(Array.isArray(Bt)?Bt:[Bt]).map(Pa);rt?.errorMap&&ge._updateErrorMap(rt.errorMap),ge._initializeWithPersistence(ir,rt?.popupRedirectResolver)}(J,s),J},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,s,u)=>{t.getProvider("auth-internal").initialize()})),In(new Qe("auth-internal",t=>new O_(Ee(t.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ui(Gv,rb,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(h)),ui(Gv,rb,"esm2017")}("Browser");let nb=Array.from(En.values()).length===0?Us({apiKey:"AIzaSyAYph_1BvaIZjFDWT0PejKvNR-dFsIbDsw",authDomain:"maglit.firebaseapp.com",projectId:"maglit",storageBucket:"maglit.appspot.com",messagingSenderId:"876988542714",appId:"1:876988542714:web:24e1ddf716e4b378926343",measurementId:"G-Y4JMVH9R3W"}):ds(),ib=function(h=ds()){let t=qn(h,"auth");if(t.isInitialized())return t.getImmediate();let s=function($,J){let ge=qn($,"auth");if(ge.isInitialized()){let rt=ge.getImmediate();if(Ve(ge.getOptions(),J??{}))return rt;Ku(rt,"already-initialized")}return ge.initialize({options:J})}(h,{popupRedirectResolver:Uy,persistence:[Fv,ra,Ga]}),u=pt("authTokenSyncURL");if(u&&typeof isSecureContext=="boolean"&&isSecureContext){let $=new URL(u,location.origin);if(location.origin===$.origin){var f,w;let J=Hv($.toString());f=()=>J(s.currentUser),Ee(s).beforeAuthStateChanged(J,f),w=ge=>J(ge),Ee(s).onIdTokenChanged(w,void 0,void 0)}}let E=He("auth");return E&&Ny(s,`http://${E}`),s}(nb),sb=function(h,t){let s=qn(typeof h=="object"?h:ds(),"firestore").getImmediate({identifier:typeof h=="string"?h:"(default)"});if(!s._initialized){let u=_e("firestore");u&&wr(s,...u)}return s}(nb),ab={title:"MagLit\u{1F525} - Privacy Respecting Encrypted Link Shortener",description:"Encrypted & Privacy Respecting Magnet/HTTP(s) Link Shortener"};function ob({children:h}){return wr(sb,"localhost",8080),Ny(ib,"http://localhost:9099"),(0,ze.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,ze.jsx)("head",{}),(0,ze.jsx)("body",{children:(0,ze.jsx)(Ue,{children:h})})]})}},8837:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{createLink:()=>k});var q=M(8201);M(5974);var Z=M(1235),W=M(7261);let j=async(I,x)=>{let C=new TextEncoder,N=crypto.getRandomValues(new Uint8Array(32)),U=await crypto.subtle.importKey("raw",C.encode(x),"PBKDF2",!1,["deriveKey"]),K=await crypto.subtle.deriveKey({name:"PBKDF2",salt:N,iterations:1e5,hash:"SHA-256"},U,{name:"AES-GCM",length:256},!1,["encrypt"]),Y=crypto.getRandomValues(new Uint8Array(16)),ee=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:Y},K,C.encode(I))),fe=new Uint8Array(N.length+Y.length+ee.length);return fe.set(N),fe.set(Y,N.length),fe.set(ee,N.length+Y.length),fe};var z=M(7173),y=M.n(z);let S=async I=>{try{let x=process.env.SAFE_BROWSING_API_KEY;if(!x)throw Error("API key not found.");let C=await fetch("https://safebrowsing.googleapis.com/v4/threatMatches:find?key="+x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client:{clientId:"maglit-website",clientVersion:"1.0.0"},threatInfo:{threatTypes:["MALWARE","SOCIAL_ENGINEERING","UNWANTED_SOFTWARE","POTENTIALLY_HARMFUL_APPLICATION"],platformTypes:["ANY_PLATFORM"],threatEntryTypes:["URL"],threatEntries:[{url:I}]}})}),N=await C.json();if(console.info("Safe Browsing Check Response:",N),N&&N?.matches?.length>0)throw Error("Malicious link entered!")}catch{throw Error("Failed to check the URL.")}};async function k({url:I,password:x,userId:C,slug:N,expiry:U}){let K=N||"",Y=U;if(C||(Y=void 0),!I)return{status:"error",message:"Missing required fields"};if(!/^(https?:\/\/|ftp:\/\/|magnet:\?).+/i.test(I))return{status:"error",message:"Invalid URL"};if(K){if(K.length<3||K.length>50)return{status:"error",message:"Slug must be between 3 and 50 characters"};if(!/^[a-zA-Z0-9_-]+$/.test(K))return{status:"error",message:"Slug can only contain letters, numbers, dash and underscore"}}try{await S(I)}catch(fe){return{status:"error",message:fe.message}}let ee=null;if(Y&&C)switch(ee=new Date,Y){case"24-hours":ee.setDate(ee.getDate()+1);break;case"2-days":ee.setDate(ee.getDate()+2);break;case"1-week":ee.setDate(ee.getDate()+7);break;case"1-month":ee.setMonth(ee.getMonth()+1);break;case"never":ee=null}else Y||C||(ee=new Date(new Date().setMonth(new Date().getMonth()+6)));try{if((!K||C)&&K||(K=y().word()),(await(0,Z.QT)((0,Z.JU)(W.db,`new-links/${K}`))).exists())return{status:"error",message:"This slug is already in use. Please try another one."};let fe=!!x,Se=I;if(x){let at=await j(I,x);Se=btoa(String.fromCharCode(...at))}let ze={link:fe?Se:I,slug:K,isProtected:fe,...C&&{userId:C},createdAt:Z.EK.fromDate(new Date),expiresAt:ee?Z.EK.fromDate(ee):null},Ue=[(0,Z.pl)((0,Z.JU)(W.db,`new-links/${K}`),ze)];return C&&Ue.push((0,Z.pl)((0,Z.JU)(W.db,`users/${C}/links/${K}`),{createdAt:new Date,...!C&&{expiresAt:ee},slug:K})),await Promise.all(Ue),{status:"success",message:"Link created successfully",linkData:{createdAt:new Date().getTime(),link:`https://thiss.link/${K}`,slug:K,expiresAt:ee?ee.getTime():null,isProtected:fe,userId:C}}}catch(fe){return console.error(fe),{status:"error",message:"Something went wrong, please try again"}}}(0,M(5845).h)([k]),(0,q.j)("d190c6abc77b9ad5e6b1b18930229ac61a410b1f",k)},1833:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{createUser:()=>j});var q=M(8201);M(5974);var Z=M(7261),W=M(1235);async function j({user:z}){if(!z?.uid)return console.error("No user found"),{status:"error",message:"Missing required fields"};try{let y=(0,W.hJ)(Z.db,"users"),S=(0,W.JU)(y,z.uid);if((await(0,W.QT)(S)).exists())return console.log("User already exists"),{status:"success",message:"User already exists"};await(0,W.pl)(S,{createdAt:new Date().toISOString(),name:z?.displayName,email:z?.email,photoURL:z?.photoURL,uid:z?.uid}),console.log("User created successfully")}catch(y){return console.error("Error creating user:",y),{status:"error",message:"Error creating user"}}return{status:"success",message:"User created successfully"}}(0,M(5845).h)([j]),(0,q.j)("bc739e46f07436238c103a2aa25f334d61cc43ec",j)},1163:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{getLink:()=>j});var q=M(8201);M(5974);var Z=M(1235),W=M(7261);async function j({slug:z}){let y=z||"";if(!y)return{status:"error",message:"Slug is required"};try{let S=(0,Z.JU)(W.db,"new-links",y),k=await(0,Z.QT)(S);if(!k.exists())return{status:"error",message:"Link not found"};let I=k.data();if(I.expiresAt){let x=new Date;if(I.expiresAt.toDate()<=x)return await(0,Z.oe)(S),{status:"error",message:"Link has expired and been deleted"}}return{status:"success",message:"Link found",linkData:{...I,createdAt:I.createdAt.toDate().getTime(),expiresAt:I.expiresAt?I.expiresAt.toDate().getTime():null}}}catch(S){return console.error(S),{status:"error",message:"Something went wrong, please try again"}}}(0,M(5845).h)([j]),(0,q.j)("990083f62ad32e4709fdee275f80991c7e071a72",j)},7261:(Jt,ae,M)=>{"use strict";M.d(ae,{db:()=>hi});var q=M(1235),Z=M(1035);(0,Z.KN)("firebase","11.0.2","app");var W=M(2754),j=M(6850);function z(xe,T){var G={};for(var pe in xe)Object.prototype.hasOwnProperty.call(xe,pe)&&0>T.indexOf(pe)&&(G[pe]=xe[pe]);if(xe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var qe=0,pe=Object.getOwnPropertySymbols(xe);qe<pe.length;qe++)0>T.indexOf(pe[qe])&&Object.prototype.propertyIsEnumerable.call(xe,pe[qe])&&(G[pe[qe]]=xe[pe[qe]]);return G}var y=(typeof SuppressedError=="function"&&SuppressedError,M(578));function S(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let k=new W.LL("auth","Firebase",S()),I=new j.Yd("@firebase/auth");function x(xe,...T){I.logLevel<=j.in.ERROR&&I.error(`Auth (${Z.Jn}): ${xe}`,...T)}function C(xe,...T){throw Y(xe,...T)}function N(xe,...T){return Y(xe,...T)}function U(xe,T,G){let pe=Object.assign(Object.assign({},S()),{[T]:G});return new W.LL("auth","Firebase",pe).create(T,{appName:xe.name})}function K(xe){return U(xe,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y(xe,...T){if(typeof xe!="string"){let G=T[0],pe=[...T.slice(1)];return pe[0]&&(pe[0].appName=xe.name),xe._errorFactory.create(G,...pe)}return k.create(xe,...T)}function ee(xe,T,...G){if(!xe)throw Y(T,...G)}function fe(xe){let T="INTERNAL ASSERTION FAILED: "+xe;throw x(T),Error(T)}function Se(){var xe;return typeof zr<"u"&&((xe=zr.location)===null||xe===void 0?void 0:xe.href)||""}function ze(){var xe;return typeof zr<"u"&&((xe=zr.location)===null||xe===void 0?void 0:xe.protocol)||null}class Ue{constructor(T,G){var pe;this.shortDelay=T,this.longDelay=G,pe="Short delay should be less than long delay!",G>T||fe(pe),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ze()==="http:"||ze()==="https:"||(0,W.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function at(xe,T){var G,pe;G=xe.emulator,pe="Emulator should always be set here",G||fe(pe);let{url:qe}=xe.emulator;return T?`${qe}${T.startsWith("/")?T.slice(1):T}`:qe}class vt{static initialize(T,G,pe){this.fetchImpl=T,G&&(this.headersImpl=G),pe&&(this.responseImpl=pe)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof zr<"u"&&"fetch"in zr?zr.fetch:typeof hn<"u"&&hn.fetch?hn.fetch:typeof fetch<"u"?fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof zr<"u"&&"Headers"in zr?zr.Headers:typeof hn<"u"&&hn.Headers?hn.Headers:typeof Headers<"u"?Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof zr<"u"&&"Response"in zr?zr.Response:typeof hn<"u"&&hn.Response?hn.Response:typeof Response<"u"?Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},re=new Ue(3e4,6e4);function F(xe,T){return xe.tenantId&&!T.tenantId?Object.assign(Object.assign({},T),{tenantId:xe.tenantId}):T}async function Q(xe,T,G,pe,qe={}){return se(xe,qe,async()=>{let wt={},Dt={};pe&&(T==="GET"?Dt=pe:wt={body:JSON.stringify(pe)});let pr=(0,W.xO)(Object.assign({key:xe.config.apiKey},Dt)).slice(1),mr=await xe._getAdditionalHeaders();mr["Content-Type"]="application/json",xe.languageCode&&(mr["X-Firebase-Locale"]=xe.languageCode);let sn=Object.assign({method:T,headers:mr},wt);return(0,W.L_)()||(sn.referrerPolicy="no-referrer"),vt.fetch()(ce(xe,xe.config.apiHost,G,pr),sn)})}async function se(xe,T,G){xe._canInitEmulator=!1;let pe=Object.assign(Object.assign({},jt),T);try{let qe=new Ke(xe),wt=await Promise.race([G(),qe.promise]);qe.clearNetworkTimeout();let Dt=await wt.json();if("needConfirmation"in Dt)throw Je(xe,"account-exists-with-different-credential",Dt);if(wt.ok&&!("errorMessage"in Dt))return Dt;{let[pr,mr]=(wt.ok?Dt.errorMessage:Dt.error.message).split(" : ");if(pr==="FEDERATED_USER_ID_ALREADY_LINKED")throw Je(xe,"credential-already-in-use",Dt);if(pr==="EMAIL_EXISTS")throw Je(xe,"email-already-in-use",Dt);if(pr==="USER_DISABLED")throw Je(xe,"user-disabled",Dt);let sn=pe[pr]||pr.toLowerCase().replace(/[_\s]+/g,"-");if(mr)throw U(xe,sn,mr);C(xe,sn)}}catch(qe){if(qe instanceof W.ZR)throw qe;C(xe,"network-request-failed",{message:String(qe)})}}async function me(xe,T,G,pe,qe={}){let wt=await Q(xe,T,G,pe,qe);return"mfaPendingCredential"in wt&&C(xe,"multi-factor-auth-required",{_serverResponse:wt}),wt}function ce(xe,T,G,pe){let qe=`${T}${G}?${pe}`;return xe.config.emulator?at(xe.config,qe):`${xe.config.apiScheme}://${qe}`}class Ke{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(T){this.auth=T,this.timer=null,this.promise=new Promise((G,pe)=>{this.timer=setTimeout(()=>pe(N(this.auth,"network-request-failed")),re.get())})}}function Je(xe,T,G){let pe={appName:xe.name};G.email&&(pe.email=G.email),G.phoneNumber&&(pe.phoneNumber=G.phoneNumber);let qe=N(xe,T,pe);return qe.customData._tokenResponse=G,qe}function He(xe){return xe!==void 0&&xe.enterprise!==void 0}class _e{constructor(T){if(this.siteKey="",this.recaptchaEnforcementState=[],T.recaptchaKey===void 0)throw Error("recaptchaKey undefined");this.siteKey=T.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=T.recaptchaEnforcementState}getProviderEnforcementState(T){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let G of this.recaptchaEnforcementState)if(G.provider&&G.provider===T)return function(pe){switch(pe){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}(G.enforcementState);return null}isProviderEnabled(T){return this.getProviderEnforcementState(T)==="ENFORCE"||this.getProviderEnforcementState(T)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Fe(xe,T){return Q(xe,"GET","/v2/recaptchaConfig",F(xe,T))}async function pt(xe,T){return Q(xe,"POST","/v1/accounts:delete",T)}async function lr(xe,T){return Q(xe,"POST","/v1/accounts:lookup",T)}function Ne(xe){if(xe)try{let T=new Date(Number(xe));if(!isNaN(T.getTime()))return T.toUTCString()}catch{}}async function tt(xe,T=!1){let G=(0,W.m9)(xe),pe=await G.getIdToken(T),qe=Ce(pe);ee(qe&&qe.exp&&qe.auth_time&&qe.iat,G.auth,"internal-error");let wt=typeof qe.firebase=="object"?qe.firebase:void 0,Dt=wt?.sign_in_provider;return{claims:qe,token:pe,authTime:Ne(we(qe.auth_time)),issuedAtTime:Ne(we(qe.iat)),expirationTime:Ne(we(qe.exp)),signInProvider:Dt||null,signInSecondFactor:wt?.sign_in_second_factor||null}}function we(xe){return 1e3*Number(xe)}function Ce(xe){let[T,G,pe]=xe.split(".");if(T===void 0||G===void 0||pe===void 0)return x("JWT malformed, contained fewer than 3 sections"),null;try{let qe=(0,W.tV)(G);return qe?JSON.parse(qe):(x("Failed to decode base64 JWT payload"),null)}catch(qe){return x("Caught error parsing JWT payload as JSON",qe?.toString()),null}}function We(xe){let T=Ce(xe);return ee(T,"internal-error"),ee(T.exp!==void 0,"internal-error"),ee(T.iat!==void 0,"internal-error"),Number(T.exp)-Number(T.iat)}async function ve(xe,T,G=!1){if(G)return T;try{return await T}catch(pe){throw pe instanceof W.ZR&&function({code:qe}){return qe==="auth/user-disabled"||qe==="auth/user-token-expired"}(pe)&&xe.auth.currentUser===xe&&await xe.auth.signOut(),pe}}class Ve{constructor(T){this.user=T,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(T){var G;if(!T)return this.errorBackoff=3e4,Math.max(0,((G=this.user.stsTokenManager.expirationTime)!==null&&G!==void 0?G:0)-Date.now()-3e5);{let pe=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),pe}}schedule(T=!1){if(!this.isRunning)return;let G=this.getInterval(T);this.timerId=setTimeout(async()=>{await this.iteration()},G)}async iteration(){try{await this.user.getIdToken(!0)}catch(T){T?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gt{constructor(T,G){this.createdAt=T,this.lastLoginAt=G,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ne(this.lastLoginAt),this.creationTime=Ne(this.createdAt)}_copy(T){this.createdAt=T.createdAt,this.lastLoginAt=T.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function mt(xe){var T;let G=xe.auth,pe=await xe.getIdToken(),qe=await ve(xe,lr(G,{idToken:pe}));ee(qe?.users.length,G,"internal-error");let wt=qe.users[0];xe._notifyReloadListener(wt);let Dt=!((T=wt.providerUserInfo)===null||T===void 0)&&T.length?et(wt.providerUserInfo):[],pr=[...xe.providerData.filter(Sn=>!Dt.some(us=>us.providerId===Sn.providerId)),...Dt],mr=xe.isAnonymous,sn=!(xe.email&&wt.passwordHash)&&!pr?.length;Object.assign(xe,{uid:wt.localId,displayName:wt.displayName||null,photoURL:wt.photoUrl||null,email:wt.email||null,emailVerified:wt.emailVerified||!1,phoneNumber:wt.phoneNumber||null,tenantId:wt.tenantId||null,providerData:pr,metadata:new gt(wt.createdAt,wt.lastLoginAt),isAnonymous:!!mr&&sn})}async function lt(xe){let T=(0,W.m9)(xe);await mt(T),await T.auth._persistUserIfCurrent(T),T.auth._notifyListenersIfCurrent(T)}function et(xe){return xe.map(T=>{var{providerId:G}=T,pe=z(T,["providerId"]);return{providerId:G,uid:pe.rawId||"",displayName:pe.displayName||null,email:pe.email||null,phoneNumber:pe.phoneNumber||null,photoURL:pe.photoUrl||null}})}async function bt(xe,T){let G=await se(xe,{},async()=>{let pe=(0,W.xO)({grant_type:"refresh_token",refresh_token:T}).slice(1),{tokenApiHost:qe,apiKey:wt}=xe.config,Dt=ce(xe,qe,"/v1/token",`key=${wt}`),pr=await xe._getAdditionalHeaders();return pr["Content-Type"]="application/x-www-form-urlencoded",vt.fetch()(Dt,{method:"POST",headers:pr,body:pe})});return{accessToken:G.access_token,expiresIn:G.expires_in,refreshToken:G.refresh_token}}async function Ct(xe,T){return Q(xe,"POST","/v2/accounts:revokeToken",F(xe,T))}class Ee{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(T){ee(T.idToken,"internal-error"),ee(T.idToken!==void 0,"internal-error"),ee(T.refreshToken!==void 0,"internal-error");let G="expiresIn"in T&&T.expiresIn!==void 0?Number(T.expiresIn):We(T.idToken);this.updateTokensAndExpiration(T.idToken,T.refreshToken,G)}updateFromIdToken(T){ee(T.length!==0,"internal-error");let G=We(T);this.updateTokensAndExpiration(T,null,G)}async getToken(T,G=!1){return G||!this.accessToken||this.isExpired?(ee(this.refreshToken,T,"user-token-expired"),this.refreshToken?(await this.refresh(T,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(T,G){let{accessToken:pe,refreshToken:qe,expiresIn:wt}=await bt(T,G);this.updateTokensAndExpiration(pe,qe,Number(wt))}updateTokensAndExpiration(T,G,pe){this.refreshToken=G||null,this.accessToken=T||null,this.expirationTime=Date.now()+1e3*pe}static fromJSON(T,G){let{refreshToken:pe,accessToken:qe,expirationTime:wt}=G,Dt=new Ee;return pe&&(ee(typeof pe=="string","internal-error",{appName:T}),Dt.refreshToken=pe),qe&&(ee(typeof qe=="string","internal-error",{appName:T}),Dt.accessToken=qe),wt&&(ee(typeof wt=="number","internal-error",{appName:T}),Dt.expirationTime=wt),Dt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(T){this.accessToken=T.accessToken,this.refreshToken=T.refreshToken,this.expirationTime=T.expirationTime}_clone(){return Object.assign(new Ee,this.toJSON())}_performRefresh(){return fe("not implemented")}}function Qe(xe,T){ee(typeof xe=="string"||xe===void 0,"internal-error",{appName:T})}class yt{constructor(T){var{uid:G,auth:pe,stsTokenManager:qe}=T,wt=z(T,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ve(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=G,this.auth=pe,this.stsTokenManager=qe,this.accessToken=qe.accessToken,this.displayName=wt.displayName||null,this.email=wt.email||null,this.emailVerified=wt.emailVerified||!1,this.phoneNumber=wt.phoneNumber||null,this.photoURL=wt.photoURL||null,this.isAnonymous=wt.isAnonymous||!1,this.tenantId=wt.tenantId||null,this.providerData=wt.providerData?[...wt.providerData]:[],this.metadata=new gt(wt.createdAt||void 0,wt.lastLoginAt||void 0)}async getIdToken(T){let G=await ve(this,this.stsTokenManager.getToken(this.auth,T));return ee(G,this.auth,"internal-error"),this.accessToken!==G&&(this.accessToken=G,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),G}getIdTokenResult(T){return tt(this,T)}reload(){return lt(this)}_assign(T){this!==T&&(ee(this.uid===T.uid,this.auth,"internal-error"),this.displayName=T.displayName,this.photoURL=T.photoURL,this.email=T.email,this.emailVerified=T.emailVerified,this.phoneNumber=T.phoneNumber,this.isAnonymous=T.isAnonymous,this.tenantId=T.tenantId,this.providerData=T.providerData.map(G=>Object.assign({},G)),this.metadata._copy(T.metadata),this.stsTokenManager._assign(T.stsTokenManager))}_clone(T){let G=new yt(Object.assign(Object.assign({},this),{auth:T,stsTokenManager:this.stsTokenManager._clone()}));return G.metadata._copy(this.metadata),G}_onReload(T){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=T,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(T){this.reloadListener?this.reloadListener(T):this.reloadUserInfo=T}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(T,G=!1){let pe=!1;T.idToken&&T.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(T),pe=!0),G&&await mt(this),await this.auth._persistUserIfCurrent(this),pe&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,Z.rh)(this.auth.app))return Promise.reject(K(this.auth));let T=await this.getIdToken();return await ve(this,pt(this.auth,{idToken:T})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(T=>Object.assign({},T)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(T,G){var pe,qe,wt,Dt,pr,mr,sn,Sn;let us=(pe=G.displayName)!==null&&pe!==void 0?pe:void 0,Cs=(qe=G.email)!==null&&qe!==void 0?qe:void 0,xa=(wt=G.phoneNumber)!==null&&wt!==void 0?wt:void 0,Ea=(Dt=G.photoURL)!==null&&Dt!==void 0?Dt:void 0,el=(pr=G.tenantId)!==null&&pr!==void 0?pr:void 0,ia=(mr=G._redirectEventId)!==null&&mr!==void 0?mr:void 0,Ss=(sn=G.createdAt)!==null&&sn!==void 0?sn:void 0,_a=(Sn=G.lastLoginAt)!==null&&Sn!==void 0?Sn:void 0,{uid:sa,emailVerified:Ks,isAnonymous:Oa,providerData:ys,stsTokenManager:Ia}=G;ee(sa&&Ia,T,"internal-error");let fo=Ee.fromJSON(this.name,Ia);ee(typeof sa=="string",T,"internal-error"),Qe(us,T.name),Qe(Cs,T.name),ee(typeof Ks=="boolean",T,"internal-error"),ee(typeof Oa=="boolean",T,"internal-error"),Qe(xa,T.name),Qe(Ea,T.name),Qe(el,T.name),Qe(ia,T.name),Qe(Ss,T.name),Qe(_a,T.name);let Da=new yt({uid:sa,auth:T,email:Cs,emailVerified:Ks,displayName:us,isAnonymous:Oa,photoURL:Ea,phoneNumber:xa,tenantId:el,stsTokenManager:fo,createdAt:Ss,lastLoginAt:_a});return ys&&Array.isArray(ys)&&(Da.providerData=ys.map(po=>Object.assign({},po))),ia&&(Da._redirectEventId=ia),Da}static async _fromIdTokenResponse(T,G,pe=!1){let qe=new Ee;qe.updateFromServerResponse(G);let wt=new yt({uid:G.localId,auth:T,stsTokenManager:qe,isAnonymous:pe});return await mt(wt),wt}static async _fromGetAccountInfoResponse(T,G,pe){let qe=G.users[0];ee(qe.localId!==void 0,"internal-error");let wt=qe.providerUserInfo!==void 0?et(qe.providerUserInfo):[],Dt=!(qe.email&&qe.passwordHash)&&!wt?.length,pr=new Ee;pr.updateFromIdToken(pe);let mr=new yt({uid:qe.localId,auth:T,stsTokenManager:pr,isAnonymous:Dt});return Object.assign(mr,{uid:qe.localId,displayName:qe.displayName||null,photoURL:qe.photoUrl||null,email:qe.email||null,emailVerified:qe.emailVerified||!1,phoneNumber:qe.phoneNumber||null,tenantId:qe.tenantId||null,providerData:wt,metadata:new gt(qe.createdAt,qe.lastLoginAt),isAnonymous:!(qe.email&&qe.passwordHash)&&!wt?.length}),mr}}let Rt=new Map;function Et(xe){var T,G;T="Expected a class definition",xe instanceof Function||fe(T);let pe=Rt.get(xe);return pe?(G="Instance stored in cache mismatched with class",pe instanceof xe||fe(G)):(pe=new xe,Rt.set(xe,pe)),pe}class rr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(T,G){this.storage[T]=G}async _get(T){let G=this.storage[T];return G===void 0?null:G}async _remove(T){delete this.storage[T]}_addListener(T,G){}_removeListener(T,G){}}function an(xe,T,G){return`firebase:${xe}:${T}:${G}`}rr.type="NONE";class Hr{constructor(T,G,pe){this.persistence=T,this.auth=G,this.userKey=pe;let{config:qe,name:wt}=this.auth;this.fullUserKey=an(this.userKey,qe.apiKey,wt),this.fullPersistenceKey=an("persistence",qe.apiKey,wt),this.boundEventHandler=G._onStorageEvent.bind(G),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(T){return this.persistence._set(this.fullUserKey,T.toJSON())}async getCurrentUser(){let T=await this.persistence._get(this.fullUserKey);return T?yt._fromJSON(this.auth,T):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(T){if(this.persistence===T)return;let G=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=T,G)return this.setCurrentUser(G)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(T,G,pe="authUser"){if(!G.length)return new Hr(Et(rr),T,pe);let qe=(await Promise.all(G.map(async sn=>{if(await sn._isAvailable())return sn}))).filter(sn=>sn),wt=qe[0]||Et(rr),Dt=an(pe,T.config.apiKey,T.name),pr=null;for(let sn of G)try{let Sn=await sn._get(Dt);if(Sn){let us=yt._fromJSON(T,Sn);sn!==wt&&(pr=us),wt=sn;break}}catch{}let mr=qe.filter(sn=>sn._shouldAllowMigration);return wt._shouldAllowMigration&&mr.length&&(wt=mr[0],pr&&await wt._set(Dt,pr.toJSON()),await Promise.all(G.map(async sn=>{if(sn!==wt)try{await sn._remove(Dt)}catch{}}))),new Hr(wt,T,pe)}}function gn(xe){let T=xe.toLowerCase();if(T.includes("opera/")||T.includes("opr/")||T.includes("opios/"))return"Opera";if(tn(T))return"IEMobile";if(T.includes("msie")||T.includes("trident/"))return"IE";{if(T.includes("edge/"))return"Edge";if(Or(T))return"Firefox";if(T.includes("silk/"))return"Silk";if(on(T))return"Blackberry";if(cn(T))return"Webos";if(wn(T))return"Safari";if((T.includes("chrome/")||Tn(T))&&!T.includes("edge/"))return"Chrome";if(rn(T))return"Android";let G=xe.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(G?.length===2)return G[1]}return"Other"}function Or(xe=(0,W.z$)()){return/firefox\//i.test(xe)}function wn(xe=(0,W.z$)()){let T=xe.toLowerCase();return T.includes("safari/")&&!T.includes("chrome/")&&!T.includes("crios/")&&!T.includes("android")}function Tn(xe=(0,W.z$)()){return/crios\//i.test(xe)}function tn(xe=(0,W.z$)()){return/iemobile/i.test(xe)}function rn(xe=(0,W.z$)()){return/android/i.test(xe)}function on(xe=(0,W.z$)()){return/blackberry/i.test(xe)}function cn(xe=(0,W.z$)()){return/webos/i.test(xe)}function On(xe=(0,W.z$)()){return/iphone|ipad|ipod/i.test(xe)||/macintosh/i.test(xe)&&/mobile/i.test(xe)}function Pt(xe=(0,W.z$)()){return On(xe)||rn(xe)||cn(xe)||on(xe)||/windows phone/i.test(xe)||tn(xe)}function _n(xe,T=[]){let G;switch(xe){case"Browser":G=gn((0,W.z$)());break;case"Worker":G=`${gn((0,W.z$)())}-${xe}`;break;default:G=xe}let pe=T.length?T.join(","):"FirebaseCore-web";return`${G}/JsCore/${Z.Jn}/${pe}`}class si{constructor(T){this.auth=T,this.queue=[]}pushCallback(T,G){let pe=wt=>new Promise((Dt,pr)=>{try{let mr=T(wt);Dt(mr)}catch(mr){pr(mr)}});pe.onAbort=G,this.queue.push(pe);let qe=this.queue.length-1;return()=>{this.queue[qe]=()=>Promise.resolve()}}async runMiddleware(T){if(this.auth.currentUser===T)return;let G=[];try{for(let pe of this.queue)await pe(T),pe.onAbort&&G.push(pe.onAbort)}catch(pe){for(let qe of(G.reverse(),G))try{qe()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:pe?.message})}}}async function zi(xe,T={}){return Q(xe,"GET","/v2/passwordPolicy",F(xe,T))}class Hs{constructor(T){var G,pe,qe,wt;let Dt=T.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(G=Dt.minPasswordLength)!==null&&G!==void 0?G:6,Dt.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Dt.maxPasswordLength),Dt.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=Dt.containsLowercaseCharacter),Dt.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=Dt.containsUppercaseCharacter),Dt.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=Dt.containsNumericCharacter),Dt.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Dt.containsNonAlphanumericCharacter),this.enforcementState=T.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(qe=(pe=T.allowedNonAlphanumericCharacters)===null||pe===void 0?void 0:pe.join(""))!==null&&qe!==void 0?qe:"",this.forceUpgradeOnSignin=(wt=T.forceUpgradeOnSignin)!==null&&wt!==void 0&&wt,this.schemaVersion=T.schemaVersion}validatePassword(T){var G,pe,qe,wt,Dt,pr;let mr={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(T,mr),this.validatePasswordCharacterOptions(T,mr),mr.isValid&&(mr.isValid=(G=mr.meetsMinPasswordLength)===null||G===void 0||G),mr.isValid&&(mr.isValid=(pe=mr.meetsMaxPasswordLength)===null||pe===void 0||pe),mr.isValid&&(mr.isValid=(qe=mr.containsLowercaseLetter)===null||qe===void 0||qe),mr.isValid&&(mr.isValid=(wt=mr.containsUppercaseLetter)===null||wt===void 0||wt),mr.isValid&&(mr.isValid=(Dt=mr.containsNumericCharacter)===null||Dt===void 0||Dt),mr.isValid&&(mr.isValid=(pr=mr.containsNonAlphanumericCharacter)===null||pr===void 0||pr),mr}validatePasswordLengthOptions(T,G){let pe=this.customStrengthOptions.minPasswordLength,qe=this.customStrengthOptions.maxPasswordLength;pe&&(G.meetsMinPasswordLength=T.length>=pe),qe&&(G.meetsMaxPasswordLength=T.length<=qe)}validatePasswordCharacterOptions(T,G){let pe;this.updatePasswordCharacterOptionsStatuses(G,!1,!1,!1,!1);for(let qe=0;qe<T.length;qe++)pe=T.charAt(qe),this.updatePasswordCharacterOptionsStatuses(G,pe>="a"&&pe<="z",pe>="A"&&pe<="Z",pe>="0"&&pe<="9",this.allowedNonAlphanumericCharacters.includes(pe))}updatePasswordCharacterOptionsStatuses(T,G,pe,qe,wt){this.customStrengthOptions.containsLowercaseLetter&&(T.containsLowercaseLetter||(T.containsLowercaseLetter=G)),this.customStrengthOptions.containsUppercaseLetter&&(T.containsUppercaseLetter||(T.containsUppercaseLetter=pe)),this.customStrengthOptions.containsNumericCharacter&&(T.containsNumericCharacter||(T.containsNumericCharacter=qe)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(T.containsNonAlphanumericCharacter||(T.containsNonAlphanumericCharacter=wt))}}class es{constructor(T,G,pe,qe){this.app=T,this.heartbeatServiceProvider=G,this.appCheckServiceProvider=pe,this.config=qe,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kn(this),this.idTokenSubscription=new kn(this),this.beforeStateQueue=new si(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=T.name,this.clientVersion=qe.sdkClientVersion}_initializeWithPersistence(T,G){return G&&(this._popupRedirectResolver=Et(G)),this._initializationPromise=this.queue(async()=>{var pe,qe;if(!this._deleted&&(this.persistenceManager=await Hr.create(this,T),!this._deleted)){if(!((pe=this._popupRedirectResolver)===null||pe===void 0)&&pe._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(G),this.lastNotifiedUid=((qe=this.currentUser)===null||qe===void 0?void 0:qe.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let T=await this.assertedPersistence.getCurrentUser();if(this.currentUser||T){if(this.currentUser&&T&&this.currentUser.uid===T.uid){this._currentUser._assign(T),await this.currentUser.getIdToken();return}await this._updateCurrentUser(T,!0)}}async initializeCurrentUserFromIdToken(T){try{let G=await lr(this,{idToken:T}),pe=await yt._fromGetAccountInfoResponse(this,G,T);await this.directlySetCurrentUser(pe)}catch(G){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",G),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(T){var G;if((0,Z.rh)(this.app)){let Dt=this.app.settings.authIdToken;return Dt?new Promise(pr=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(Dt).then(pr,pr))}):this.directlySetCurrentUser(null)}let pe=await this.assertedPersistence.getCurrentUser(),qe=pe,wt=!1;if(T&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let Dt=(G=this.redirectUser)===null||G===void 0?void 0:G._redirectEventId,pr=qe?._redirectEventId,mr=await this.tryRedirectSignIn(T);(!Dt||Dt===pr)&&mr?.user&&(qe=mr.user,wt=!0)}if(!qe)return this.directlySetCurrentUser(null);if(!qe._redirectEventId){if(wt)try{await this.beforeStateQueue.runMiddleware(qe)}catch(Dt){qe=pe,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Dt))}return qe?this.reloadAndSetCurrentUserOrClear(qe):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===qe._redirectEventId?this.directlySetCurrentUser(qe):this.reloadAndSetCurrentUserOrClear(qe)}async tryRedirectSignIn(T){let G=null;try{G=await this._popupRedirectResolver._completeRedirectFn(this,T,!0)}catch{await this._setRedirectUser(null)}return G}async reloadAndSetCurrentUserOrClear(T){try{await mt(T)}catch(G){if(G?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(T)}useDeviceLanguage(){this.languageCode=function(){if(typeof navigator>"u")return null;let T=navigator;return T.languages&&T.languages[0]||T.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(T){if((0,Z.rh)(this.app))return Promise.reject(K(this));let G=T?(0,W.m9)(T):null;return G&&ee(G.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(G&&G._clone(this))}async _updateCurrentUser(T,G=!1){if(!this._deleted)return T&&ee(this.tenantId===T.tenantId,this,"tenant-id-mismatch"),G||await this.beforeStateQueue.runMiddleware(T),this.queue(async()=>{await this.directlySetCurrentUser(T),this.notifyAuthListeners()})}async signOut(){return(0,Z.rh)(this.app)?Promise.reject(K(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(T){return(0,Z.rh)(this.app)?Promise.reject(K(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Et(T))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(T){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let G=this._getPasswordPolicyInternal();return G.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):G.validatePassword(T)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let T=new Hs(await zi(this));this.tenantId===null?this._projectPasswordPolicy=T:this._tenantPasswordPolicies[this.tenantId]=T}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(T){this._errorFactory=new W.LL("auth","Firebase",T())}onAuthStateChanged(T,G,pe){return this.registerStateListener(this.authStateSubscription,T,G,pe)}beforeAuthStateChanged(T,G){return this.beforeStateQueue.pushCallback(T,G)}onIdTokenChanged(T,G,pe){return this.registerStateListener(this.idTokenSubscription,T,G,pe)}authStateReady(){return new Promise((T,G)=>{if(this.currentUser)T();else{let pe=this.onAuthStateChanged(()=>{pe(),T()},G)}})}async revokeAccessToken(T){if(this.currentUser){let G={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:T,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(G.tenantId=this.tenantId),await Ct(this,G)}}toJSON(){var T;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(T=this._currentUser)===null||T===void 0?void 0:T.toJSON()}}async _setRedirectUser(T,G){let pe=await this.getOrInitRedirectPersistenceManager(G);return T===null?pe.removeCurrentUser():pe.setCurrentUser(T)}async getOrInitRedirectPersistenceManager(T){if(!this.redirectPersistenceManager){let G=T&&Et(T)||this._popupRedirectResolver;ee(G,this,"argument-error"),this.redirectPersistenceManager=await Hr.create(this,[Et(G._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(T){var G,pe;return this._isInitialized&&await this.queue(async()=>{}),((G=this._currentUser)===null||G===void 0?void 0:G._redirectEventId)===T?this._currentUser:((pe=this.redirectUser)===null||pe===void 0?void 0:pe._redirectEventId)===T?this.redirectUser:null}async _persistUserIfCurrent(T){if(T===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(T))}_notifyListenersIfCurrent(T){T===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var T,G;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let pe=(G=(T=this.currentUser)===null||T===void 0?void 0:T.uid)!==null&&G!==void 0?G:null;this.lastNotifiedUid!==pe&&(this.lastNotifiedUid=pe,this.authStateSubscription.next(this.currentUser))}registerStateListener(T,G,pe,qe){if(this._deleted)return()=>{};let wt=typeof G=="function"?G:G.next.bind(G),Dt=!1,pr=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(pr,this,"internal-error"),pr.then(()=>{Dt||wt(this.currentUser)}),typeof G=="function"){let mr=T.addObserver(G,pe,qe);return()=>{Dt=!0,mr()}}{let mr=T.addObserver(G);return()=>{Dt=!0,mr()}}}async directlySetCurrentUser(T){this.currentUser&&this.currentUser!==T&&this._currentUser._stopProactiveRefresh(),T&&this.isProactiveRefreshEnabled&&T._startProactiveRefresh(),this.currentUser=T,T?await this.assertedPersistence.setCurrentUser(T):await this.assertedPersistence.removeCurrentUser()}queue(T){return this.operations=this.operations.then(T,T),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(T){!T||this.frameworks.includes(T)||(this.frameworks.push(T),this.frameworks.sort(),this.clientVersion=_n(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var T;let G={"X-Client-Version":this.clientVersion};this.app.options.appId&&(G["X-Firebase-gmpid"]=this.app.options.appId);let pe=await((T=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||T===void 0?void 0:T.getHeartbeatsHeader());pe&&(G["X-Firebase-Client"]=pe);let qe=await this._getAppCheckToken();return qe&&(G["X-Firebase-AppCheck"]=qe),G}async _getAppCheckToken(){var T;let G=await((T=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||T===void 0?void 0:T.getToken());return G?.error&&function(pe,...qe){I.logLevel<=j.in.WARN&&I.warn(`Auth (${Z.Jn}): ${pe}`,...qe)}(`Error while retrieving App Check token: ${G.error}`),G?.token}}function Ri(xe){return(0,W.m9)(xe)}class kn{constructor(T){this.auth=T,this.observer=null,this.addObserver=(0,W.ne)(G=>this.observer=G)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let st={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ht(xe){return`__${xe}${Math.floor(1e6*Math.random())}`}class zt{constructor(){this.enterprise=new Yt}ready(T){T()}execute(T,G){return Promise.resolve("token")}render(T,G){return""}}class Yt{ready(T){T()}execute(T,G){return Promise.resolve("token")}render(T,G){return""}}let tr="NO_RECAPTCHA";class En{constructor(T){this.type="recaptcha-enterprise",this.auth=Ri(T)}async verify(T="verify",G=!1){async function pe(wt){if(!G){if(wt.tenantId==null&&wt._agentRecaptchaConfig!=null)return wt._agentRecaptchaConfig.siteKey;if(wt.tenantId!=null&&wt._tenantRecaptchaConfigs[wt.tenantId]!==void 0)return wt._tenantRecaptchaConfigs[wt.tenantId].siteKey}return new Promise(async(Dt,pr)=>{Fe(wt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(mr=>{if(mr.recaptchaKey===void 0)pr(Error("recaptcha Enterprise site key undefined"));else{let sn=new _e(mr);return wt.tenantId==null?wt._agentRecaptchaConfig=sn:wt._tenantRecaptchaConfigs[wt.tenantId]=sn,Dt(sn.siteKey)}}).catch(mr=>{pr(mr)})})}function qe(wt,Dt,pr){let mr=window.grecaptcha;He(mr)?mr.enterprise.ready(()=>{mr.enterprise.execute(wt,{action:T}).then(sn=>{Dt(sn)}).catch(()=>{Dt(tr)})}):pr(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zt().execute("siteKey",{action:"verify"}):new Promise((wt,Dt)=>{pe(this.auth).then(pr=>{if(!G&&He(window.grecaptcha))qe(pr,wt,Dt);else{var mr;if(typeof window>"u"){Dt(Error("RecaptchaVerifier is only supported in browser"));return}let sn=st.recaptchaEnterpriseScript;sn.length!==0&&(sn+=pr),(mr=sn,st.loadJS(mr)).then(()=>{qe(pr,wt,Dt)}).catch(Sn=>{Dt(Sn)})}}).catch(pr=>{Dt(pr)})})}}async function Kr(xe,T,G,pe=!1,qe=!1){let wt,Dt=new En(xe);if(qe)wt=tr;else try{wt=await Dt.verify(G)}catch{wt=await Dt.verify(G,!0)}let pr=Object.assign({},T);if(G==="mfaSmsEnrollment"||G==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in pr){let mr=pr.phoneEnrollmentInfo.phoneNumber,sn=pr.phoneEnrollmentInfo.recaptchaToken;Object.assign(pr,{phoneEnrollmentInfo:{phoneNumber:mr,recaptchaToken:sn,captchaResponse:wt,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in pr){let mr=pr.phoneSignInInfo.recaptchaToken;Object.assign(pr,{phoneSignInInfo:{recaptchaToken:mr,captchaResponse:wt,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return pr}return pe?Object.assign(pr,{captchaResp:wt}):Object.assign(pr,{captchaResponse:wt}),Object.assign(pr,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(pr,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),pr}async function li(xe,T,G,pe,qe){var wt,Dt;if(qe==="EMAIL_PASSWORD_PROVIDER"){if((wt=xe._getRecaptchaConfig())===null||wt===void 0||!wt.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return pe(xe,T).catch(async pr=>{if(pr.code!=="auth/missing-recaptcha-token")return Promise.reject(pr);{console.log(`${G} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let mr=await Kr(xe,T,G,G==="getOobCode");return pe(xe,mr)}});{let pr=await Kr(xe,T,G,G==="getOobCode");return pe(xe,pr)}}if(qe!=="PHONE_PROVIDER")return Promise.reject(qe+" provider is not supported.");if(!((Dt=xe._getRecaptchaConfig())===null||Dt===void 0)&&Dt.isProviderEnabled("PHONE_PROVIDER")){let pr=await Kr(xe,T,G);return pe(xe,pr).catch(async mr=>{var sn;if(((sn=xe._getRecaptchaConfig())===null||sn===void 0?void 0:sn.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(mr.code==="auth/missing-recaptcha-token"||mr.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${G} flow.`);let Sn=await Kr(xe,T,G,!1,!0);return pe(xe,Sn)}return Promise.reject(mr)})}{let pr=await Kr(xe,T,G,!1,!0);return pe(xe,pr)}}async function pn(xe){let T=Ri(xe),G=new _e(await Fe(T,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));T.tenantId==null?T._agentRecaptchaConfig=G:T._tenantRecaptchaConfigs[T.tenantId]=G,G.isAnyProviderEnabled()&&new En(T).verify()}function In(xe){let T=xe.indexOf(":");return T<0?"":xe.substr(0,T+1)}function qn(xe){if(!xe)return null;let T=Number(xe);return isNaN(T)?null:T}class Ln{constructor(T,G){this.providerId=T,this.signInMethod=G}toJSON(){return fe("not implemented")}_getIdTokenResponse(T){return fe("not implemented")}_linkToIdToken(T,G){return fe("not implemented")}_getReauthenticationResolver(T){return fe("not implemented")}}async function Ei(xe,T){return Q(xe,"POST","/v1/accounts:signUp",T)}async function Ha(xe,T){return me(xe,"POST","/v1/accounts:signInWithPassword",F(xe,T))}async function fi(xe,T){return me(xe,"POST","/v1/accounts:signInWithEmailLink",F(xe,T))}async function Us(xe,T){return me(xe,"POST","/v1/accounts:signInWithEmailLink",F(xe,T))}class ds extends Ln{constructor(T,G,pe,qe=null){super("password",pe),this._email=T,this._password=G,this._tenantId=qe}static _fromEmailAndPassword(T,G){return new ds(T,G,"password")}static _fromEmailAndCode(T,G,pe=null){return new ds(T,G,"emailLink",pe)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(T){let G=typeof T=="string"?JSON.parse(T):T;if(G?.email&&G?.password){if(G.signInMethod==="password")return this._fromEmailAndPassword(G.email,G.password);if(G.signInMethod==="emailLink")return this._fromEmailAndCode(G.email,G.password,G.tenantId)}return null}async _getIdTokenResponse(T){switch(this.signInMethod){case"password":return li(T,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ha,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return fi(T,{email:this._email,oobCode:this._password});default:C(T,"internal-error")}}async _linkToIdToken(T,G){switch(this.signInMethod){case"password":return li(T,{idToken:G,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ei,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Us(T,{idToken:G,email:this._email,oobCode:this._password});default:C(T,"internal-error")}}_getReauthenticationResolver(T){return this._getIdTokenResponse(T)}}async function ui(xe,T){return me(xe,"POST","/v1/accounts:signInWithIdp",F(xe,T))}class Ki extends Ln{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(T){let G=new Ki(T.providerId,T.signInMethod);return T.idToken||T.accessToken?(T.idToken&&(G.idToken=T.idToken),T.accessToken&&(G.accessToken=T.accessToken),T.nonce&&!T.pendingToken&&(G.nonce=T.nonce),T.pendingToken&&(G.pendingToken=T.pendingToken)):T.oauthToken&&T.oauthTokenSecret?(G.accessToken=T.oauthToken,G.secret=T.oauthTokenSecret):C("argument-error"),G}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(T){let G=typeof T=="string"?JSON.parse(T):T,{providerId:pe,signInMethod:qe}=G,wt=z(G,["providerId","signInMethod"]);if(!pe||!qe)return null;let Dt=new Ki(pe,qe);return Dt.idToken=wt.idToken||void 0,Dt.accessToken=wt.accessToken||void 0,Dt.secret=wt.secret,Dt.nonce=wt.nonce,Dt.pendingToken=wt.pendingToken||null,Dt}_getIdTokenResponse(T){return ui(T,this.buildRequest())}_linkToIdToken(T,G){let pe=this.buildRequest();return pe.idToken=G,ui(T,pe)}_getReauthenticationResolver(T){let G=this.buildRequest();return G.autoCreate=!1,ui(T,G)}buildRequest(){let T={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)T.pendingToken=this.pendingToken;else{let G={};this.idToken&&(G.id_token=this.idToken),this.accessToken&&(G.access_token=this.accessToken),this.secret&&(G.oauth_token_secret=this.secret),G.providerId=this.providerId,this.nonce&&!this.pendingToken&&(G.nonce=this.nonce),T.postBody=(0,W.xO)(G)}return T}}async function $s(xe,T){return Q(xe,"POST","/v1/accounts:sendVerificationCode",F(xe,T))}async function Is(xe,T){return me(xe,"POST","/v1/accounts:signInWithPhoneNumber",F(xe,T))}async function wa(xe,T){let G=await me(xe,"POST","/v1/accounts:signInWithPhoneNumber",F(xe,T));if(G.temporaryProof)throw Je(xe,"account-exists-with-different-credential",G);return G}let ua={USER_NOT_FOUND:"user-not-found"};async function ea(xe,T){return me(xe,"POST","/v1/accounts:signInWithPhoneNumber",F(xe,Object.assign(Object.assign({},T),{operation:"REAUTH"})),ua)}class Gi extends Ln{constructor(T){super("phone","phone"),this.params=T}static _fromVerification(T,G){return new Gi({verificationId:T,verificationCode:G})}static _fromTokenResponse(T,G){return new Gi({phoneNumber:T,temporaryProof:G})}_getIdTokenResponse(T){return Is(T,this._makeVerificationRequest())}_linkToIdToken(T,G){return wa(T,Object.assign({idToken:G},this._makeVerificationRequest()))}_getReauthenticationResolver(T){return ea(T,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:T,phoneNumber:G,verificationId:pe,verificationCode:qe}=this.params;return T&&G?{temporaryProof:T,phoneNumber:G}:{sessionInfo:pe,code:qe}}toJSON(){let T={providerId:this.providerId};return this.params.phoneNumber&&(T.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(T.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(T.verificationCode=this.params.verificationCode),this.params.verificationId&&(T.verificationId=this.params.verificationId),T}static fromJSON(T){typeof T=="string"&&(T=JSON.parse(T));let{verificationId:G,verificationCode:pe,phoneNumber:qe,temporaryProof:wt}=T;return pe||G||qe||wt?new Gi({verificationId:G,verificationCode:pe,phoneNumber:qe,temporaryProof:wt}):null}}class na{constructor(T){var G,pe,qe,wt,Dt,pr;let mr=(0,W.zd)((0,W.pd)(T)),sn=(G=mr.apiKey)!==null&&G!==void 0?G:null,Sn=(pe=mr.oobCode)!==null&&pe!==void 0?pe:null,us=function(Cs){switch(Cs){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}((qe=mr.mode)!==null&&qe!==void 0?qe:null);ee(sn&&Sn&&us,"argument-error"),this.apiKey=sn,this.operation=us,this.code=Sn,this.continueUrl=(wt=mr.continueUrl)!==null&&wt!==void 0?wt:null,this.languageCode=(Dt=mr.languageCode)!==null&&Dt!==void 0?Dt:null,this.tenantId=(pr=mr.tenantId)!==null&&pr!==void 0?pr:null}static parseLink(T){let G=function(pe){let qe=(0,W.zd)((0,W.pd)(pe)).link,wt=qe?(0,W.zd)((0,W.pd)(qe)).deep_link_id:null,Dt=(0,W.zd)((0,W.pd)(pe)).deep_link_id;return(Dt?(0,W.zd)((0,W.pd)(Dt)).link:null)||Dt||wt||qe||pe}(T);try{return new na(G)}catch{return null}}}class Bs{constructor(){this.providerId=Bs.PROVIDER_ID}static credential(T,G){return ds._fromEmailAndPassword(T,G)}static credentialWithLink(T,G){let pe=na.parseLink(G);return ee(pe,"argument-error"),ds._fromEmailAndCode(T,pe.code,pe.tenantId)}}Bs.PROVIDER_ID="password",Bs.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Bs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class wo{constructor(T){this.providerId=T,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(T){this.defaultLanguageCode=T}setCustomParameters(T){return this.customParameters=T,this}getCustomParameters(){return this.customParameters}}class Te extends wo{constructor(){super(...arguments),this.scopes=[]}addScope(T){return this.scopes.includes(T)||this.scopes.push(T),this}getScopes(){return[...this.scopes]}}class dt extends Te{constructor(){super("facebook.com")}static credential(T){return Ki._fromParams({providerId:dt.PROVIDER_ID,signInMethod:dt.FACEBOOK_SIGN_IN_METHOD,accessToken:T})}static credentialFromResult(T){return dt.credentialFromTaggedObject(T)}static credentialFromError(T){return dt.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T||!("oauthAccessToken"in T)||!T.oauthAccessToken)return null;try{return dt.credential(T.oauthAccessToken)}catch{return null}}}dt.FACEBOOK_SIGN_IN_METHOD="facebook.com",dt.PROVIDER_ID="facebook.com";class At extends Te{constructor(){super("google.com"),this.addScope("profile")}static credential(T,G){return Ki._fromParams({providerId:At.PROVIDER_ID,signInMethod:At.GOOGLE_SIGN_IN_METHOD,idToken:T,accessToken:G})}static credentialFromResult(T){return At.credentialFromTaggedObject(T)}static credentialFromError(T){return At.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;let{oauthIdToken:G,oauthAccessToken:pe}=T;if(!G&&!pe)return null;try{return At.credential(G,pe)}catch{return null}}}At.GOOGLE_SIGN_IN_METHOD="google.com",At.PROVIDER_ID="google.com";class $t extends Te{constructor(){super("github.com")}static credential(T){return Ki._fromParams({providerId:$t.PROVIDER_ID,signInMethod:$t.GITHUB_SIGN_IN_METHOD,accessToken:T})}static credentialFromResult(T){return $t.credentialFromTaggedObject(T)}static credentialFromError(T){return $t.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T||!("oauthAccessToken"in T)||!T.oauthAccessToken)return null;try{return $t.credential(T.oauthAccessToken)}catch{return null}}}$t.GITHUB_SIGN_IN_METHOD="github.com",$t.PROVIDER_ID="github.com";class Ut extends Te{constructor(){super("twitter.com")}static credential(T,G){return Ki._fromParams({providerId:Ut.PROVIDER_ID,signInMethod:Ut.TWITTER_SIGN_IN_METHOD,oauthToken:T,oauthTokenSecret:G})}static credentialFromResult(T){return Ut.credentialFromTaggedObject(T)}static credentialFromError(T){return Ut.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;let{oauthAccessToken:G,oauthTokenSecret:pe}=T;if(!G||!pe)return null;try{return Ut.credential(G,pe)}catch{return null}}}Ut.TWITTER_SIGN_IN_METHOD="twitter.com",Ut.PROVIDER_ID="twitter.com";class Jr{constructor(T){this.user=T.user,this.providerId=T.providerId,this._tokenResponse=T._tokenResponse,this.operationType=T.operationType}static async _fromIdTokenResponse(T,G,pe,qe=!1){return new Jr({user:await yt._fromIdTokenResponse(T,pe,qe),providerId:Sr(pe),_tokenResponse:pe,operationType:G})}static async _forOperation(T,G,pe){return await T._updateTokensIfNecessary(pe,!0),new Jr({user:T,providerId:Sr(pe),_tokenResponse:pe,operationType:G})}}function Sr(xe){return xe.providerId?xe.providerId:"phoneNumber"in xe?"phone":null}class Qn extends W.ZR{constructor(T,G,pe,qe){var wt;super(G.code,G.message),this.operationType=pe,this.user=qe,Object.setPrototypeOf(this,Qn.prototype),this.customData={appName:T.name,tenantId:(wt=T.tenantId)!==null&&wt!==void 0?wt:void 0,_serverResponse:G.customData._serverResponse,operationType:pe}}static _fromErrorAndOperation(T,G,pe,qe){return new Qn(T,G,pe,qe)}}function zn(xe,T,G,pe){return(T==="reauthenticate"?G._getReauthenticationResolver(xe):G._getIdTokenResponse(xe)).catch(qe=>{throw qe.code==="auth/multi-factor-auth-required"?Qn._fromErrorAndOperation(xe,qe,T,pe):qe})}async function Qr(xe,T,G=!1){let pe=await ve(xe,T._linkToIdToken(xe.auth,await xe.getIdToken()),G);return Jr._forOperation(xe,"link",pe)}async function yr(xe,T,G=!1){let{auth:pe}=xe;if((0,Z.rh)(pe.app))return Promise.reject(K(pe));let qe="reauthenticate";try{let wt=await ve(xe,zn(pe,qe,T,xe),G);ee(wt.idToken,pe,"internal-error");let Dt=Ce(wt.idToken);ee(Dt,pe,"internal-error");let{sub:pr}=Dt;return ee(xe.uid===pr,pe,"user-mismatch"),Jr._forOperation(xe,qe,wt)}catch(wt){throw wt?.code==="auth/user-not-found"&&C(pe,"user-mismatch"),wt}}async function pi(xe,T,G=!1){if((0,Z.rh)(xe.app))return Promise.reject(K(xe));let pe="signIn",qe=await zn(xe,pe,T),wt=await Jr._fromIdTokenResponse(xe,pe,qe);return G||await xe._updateCurrentUser(wt.user),wt}class wi{constructor(T,G){this.factorId=T,this.uid=G.mfaEnrollmentId,this.enrollmentTime=new Date(G.enrolledAt).toUTCString(),this.displayName=G.displayName}static _fromServerResponse(T,G){return"phoneInfo"in G?$a._fromServerResponse(T,G):"totpInfo"in G?Lr._fromServerResponse(T,G):C(T,"internal-error")}}class $a extends wi{constructor(T){super("phone",T),this.phoneNumber=T.phoneInfo}static _fromServerResponse(T,G){return new $a(G)}}class Lr extends wi{constructor(T){super("totp",T)}static _fromServerResponse(T,G){return new Lr(G)}}class Br{constructor(T,G,pe={}){this.isNewUser=T,this.providerId=G,this.profile=pe}}class Nn{constructor(T,G,pe){this.type=T,this.credential=G,this.user=pe}static _fromIdtoken(T,G){return new Nn("enroll",T,G)}static _fromMfaPendingCredential(T){return new Nn("signin",T)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(T){var G,pe;if(T?.multiFactorSession){if(!((G=T.multiFactorSession)===null||G===void 0)&&G.pendingCredential)return Nn._fromMfaPendingCredential(T.multiFactorSession.pendingCredential);if(!((pe=T.multiFactorSession)===null||pe===void 0)&&pe.idToken)return Nn._fromIdtoken(T.multiFactorSession.idToken)}return null}}class As{constructor(T,G,pe){this.session=T,this.hints=G,this.signInResolver=pe}static _fromError(T,G){let pe=Ri(T),qe=G.customData._serverResponse,wt=(qe.mfaInfo||[]).map(pr=>wi._fromServerResponse(pe,pr));ee(qe.mfaPendingCredential,pe,"internal-error");let Dt=Nn._fromMfaPendingCredential(qe.mfaPendingCredential);return new As(Dt,wt,async pr=>{let mr=await pr._process(pe,Dt);delete qe.mfaInfo,delete qe.mfaPendingCredential;let sn=Object.assign(Object.assign({},qe),{idToken:mr.idToken,refreshToken:mr.refreshToken});switch(G.operationType){case"signIn":let Sn=await Jr._fromIdTokenResponse(pe,G.operationType,sn);return await pe._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return ee(G.user,pe,"internal-error"),Jr._forOperation(G.user,G.operationType,sn);default:C(pe,"internal-error")}})}async resolveSignIn(T){return this.signInResolver(T)}}function ql(xe,T){return Q(xe,"POST","/v2/accounts/mfaEnrollment:start",F(xe,T))}class Jo{constructor(T){this.user=T,this.enrolledFactors=[],T._onReload(G=>{G.mfaInfo&&(this.enrolledFactors=G.mfaInfo.map(pe=>wi._fromServerResponse(T.auth,pe)))})}static _fromUser(T){return new Jo(T)}async getSession(){return Nn._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(T,G){let pe=await this.getSession(),qe=await ve(this.user,T._process(this.user.auth,pe,G));return await this.user._updateTokensIfNecessary(qe),this.user.reload()}async unenroll(T){let G=typeof T=="string"?T:T.uid,pe=await this.user.getIdToken();try{var qe,wt;let Dt=await ve(this.user,(qe=this.user.auth,wt={idToken:pe,mfaEnrollmentId:G},Q(qe,"POST","/v2/accounts/mfaEnrollment:withdraw",F(qe,wt))));this.enrolledFactors=this.enrolledFactors.filter(({uid:pr})=>pr!==G),await this.user._updateTokensIfNecessary(Dt),await this.user.reload()}catch(Dt){throw Dt}}}let qs="__sak";class xl{constructor(T,G){this.storageRetriever=T,this.type=G}_isAvailable(){try{return this.storage?(this.storage.setItem(qs,"1"),this.storage.removeItem(qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(T,G){return this.storage.setItem(T,JSON.stringify(G)),Promise.resolve()}_get(T){let G=this.storage.getItem(T);return Promise.resolve(G?JSON.parse(G):null)}_remove(T){return this.storage.removeItem(T),Promise.resolve()}get storage(){return this.storageRetriever()}}class Au extends xl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(T,G)=>this.onStorageEvent(T,G),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pt(),this._shouldAllowMigration=!0}forAllChangedKeys(T){for(let G of Object.keys(this.listeners)){let pe=this.storage.getItem(G),qe=this.localCache[G];pe!==qe&&T(G,qe,pe)}}onStorageEvent(T,G=!1){if(!T.key){this.forAllChangedKeys((Dt,pr,mr)=>{this.notifyListeners(Dt,mr)});return}let pe=T.key;G?this.detachListener():this.stopPolling();let qe=()=>{let Dt=this.storage.getItem(pe);(G||this.localCache[pe]!==Dt)&&this.notifyListeners(pe,Dt)},wt=this.storage.getItem(pe);(0,W.w1)()&&document.documentMode===10&&wt!==T.newValue&&T.newValue!==T.oldValue?setTimeout(qe,10):qe()}notifyListeners(T,G){this.localCache[T]=G;let pe=this.listeners[T];if(pe)for(let qe of Array.from(pe))qe(G&&JSON.parse(G))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((T,G,pe)=>{this.onStorageEvent(new StorageEvent("storage",{key:T,oldValue:G,newValue:pe}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(T,G){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[T]||(this.listeners[T]=new Set,this.localCache[T]=this.storage.getItem(T)),this.listeners[T].add(G)}_removeListener(T,G){this.listeners[T]&&(this.listeners[T].delete(G),this.listeners[T].size===0&&delete this.listeners[T]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(T,G){await super._set(T,G),this.localCache[T]=JSON.stringify(G)}async _get(T){let G=await super._get(T);return this.localCache[T]=JSON.stringify(G),G}async _remove(T){await super._remove(T),delete this.localCache[T]}}Au.type="LOCAL";class tc extends xl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(T,G){}_removeListener(T,G){}}tc.type="SESSION";class $o{constructor(T){this.eventTarget=T,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(T){let G=this.receivers.find(qe=>qe.isListeningto(T));if(G)return G;let pe=new $o(T);return this.receivers.push(pe),pe}isListeningto(T){return this.eventTarget===T}async handleEvent(T){let{eventId:G,eventType:pe,data:qe}=T.data,wt=this.handlersMap[pe];if(!wt?.size)return;T.ports[0].postMessage({status:"ack",eventId:G,eventType:pe});let Dt=Array.from(wt).map(async mr=>mr(T.origin,qe)),pr=await Promise.all(Dt.map(async mr=>{try{return{fulfilled:!0,value:await mr}}catch(sn){return{fulfilled:!1,reason:sn}}}));T.ports[0].postMessage({status:"done",eventId:G,eventType:pe,response:pr})}_subscribe(T,G){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[T]||(this.handlersMap[T]=new Set),this.handlersMap[T].add(G)}_unsubscribe(T,G){this.handlersMap[T]&&G&&this.handlersMap[T].delete(G),G&&this.handlersMap[T].size!==0||delete this.handlersMap[T],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Rc(xe="",T=10){let G="";for(let pe=0;pe<T;pe++)G+=Math.floor(10*Math.random());return xe+G}$o.receivers=[];class ru{constructor(T){this.target=T,this.handlers=new Set}removeMessageHandler(T){T.messageChannel&&(T.messageChannel.port1.removeEventListener("message",T.onMessage),T.messageChannel.port1.close()),this.handlers.delete(T)}async _send(T,G,pe=50){let qe,wt,Dt=typeof MessageChannel<"u"?new MessageChannel:null;if(!Dt)throw Error("connection_unavailable");return new Promise((pr,mr)=>{let sn=Rc("",20);Dt.port1.start();let Sn=setTimeout(()=>{mr(Error("unsupported_event"))},pe);wt={messageChannel:Dt,onMessage(us){if(us.data.eventId===sn)switch(us.data.status){case"ack":clearTimeout(Sn),qe=setTimeout(()=>{mr(Error("timeout"))},3e3);break;case"done":clearTimeout(qe),pr(us.data.response);break;default:clearTimeout(Sn),clearTimeout(qe),mr(Error("invalid_response"))}}},this.handlers.add(wt),Dt.port1.addEventListener("message",wt.onMessage),this.target.postMessage({eventType:T,eventId:sn,data:G},[Dt.port2])}).finally(()=>{wt&&this.removeMessageHandler(wt)})}}function ci(){return window}function Zo(){return ci().WorkerGlobalScope!==void 0&&typeof ci().importScripts=="function"}async function ta(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}let bi="firebaseLocalStorageDb",Mo="firebaseLocalStorage",Ts="fbase_key";class io{constructor(T){this.request=T}toPromise(){return new Promise((T,G)=>{this.request.addEventListener("success",()=>{T(this.request.result)}),this.request.addEventListener("error",()=>{G(this.request.error)})})}}function Ns(xe,T){return xe.transaction([Mo],T?"readwrite":"readonly").objectStore(Mo)}function An(){let xe=indexedDB.open(bi,1);return new Promise((T,G)=>{xe.addEventListener("error",()=>{G(xe.error)}),xe.addEventListener("upgradeneeded",()=>{let pe=xe.result;try{pe.createObjectStore(Mo,{keyPath:Ts})}catch(qe){G(qe)}}),xe.addEventListener("success",async()=>{let pe=xe.result;pe.objectStoreNames.contains(Mo)?T(pe):(pe.close(),await new io(indexedDB.deleteDatabase(bi)).toPromise(),T(await An()))})})}async function Qa(xe,T,G){return new io(Ns(xe,!0).put({[Ts]:T,value:G})).toPromise()}async function zl(xe,T){let G=Ns(xe,!1).get(T),pe=await new io(G).toPromise();return pe===void 0?null:pe.value}function ii(xe,T){return new io(Ns(xe,!0).delete(T)).toPromise()}class ba{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await An()),this.db}async _withRetries(T){let G=0;for(;;)try{let pe=await this._openDb();return await T(pe)}catch(pe){if(G++>3)throw pe;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$o._getInstance(Zo()?zr:null),this.receiver._subscribe("keyChanged",async(T,G)=>({keyProcessed:(await this._poll()).includes(G.key)})),this.receiver._subscribe("ping",async(T,G)=>["keyChanged"])}async initializeSender(){var T,G;if(this.activeServiceWorker=await ta(),!this.activeServiceWorker)return;this.sender=new ru(this.activeServiceWorker);let pe=await this.sender._send("ping",{},800);pe&&((T=pe[0])===null||T===void 0?void 0:T.fulfilled)&&((G=pe[0])===null||G===void 0?void 0:G.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(T){var G;if(this.sender&&this.activeServiceWorker&&(((G=navigator?.serviceWorker)===null||G===void 0?void 0:G.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:T},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let T=await An();return await Qa(T,qs,"1"),await ii(T,qs),!0}catch{}return!1}async _withPendingWrite(T){this.pendingWrites++;try{await T()}finally{this.pendingWrites--}}async _set(T,G){return this._withPendingWrite(async()=>(await this._withRetries(pe=>Qa(pe,T,G)),this.localCache[T]=G,this.notifyServiceWorker(T)))}async _get(T){let G=await this._withRetries(pe=>zl(pe,T));return this.localCache[T]=G,G}async _remove(T){return this._withPendingWrite(async()=>(await this._withRetries(G=>ii(G,T)),delete this.localCache[T],this.notifyServiceWorker(T)))}async _poll(){let T=await this._withRetries(qe=>new io(Ns(qe,!1).getAll()).toPromise());if(!T||this.pendingWrites!==0)return[];let G=[],pe=new Set;if(T.length!==0)for(let{fbase_key:qe,value:wt}of T)pe.add(qe),JSON.stringify(this.localCache[qe])!==JSON.stringify(wt)&&(this.notifyListeners(qe,wt),G.push(qe));for(let qe of Object.keys(this.localCache))this.localCache[qe]&&!pe.has(qe)&&(this.notifyListeners(qe,null),G.push(qe));return G}notifyListeners(T,G){this.localCache[T]=G;let pe=this.listeners[T];if(pe)for(let qe of Array.from(pe))qe(G)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(T,G){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[T]||(this.listeners[T]=new Set,this._get(T)),this.listeners[T].add(G)}_removeListener(T,G){this.listeners[T]&&(this.listeners[T].delete(G),this.listeners[T].size===0&&delete this.listeners[T]),Object.keys(this.listeners).length===0&&this.stopPolling()}}function Gl(xe,T){return Q(xe,"POST","/v2/accounts/mfaSignIn:start",F(xe,T))}ba.type="LOCAL",Ht("rcb"),new Ue(3e4,6e4);let Hl="recaptcha";async function nu(xe,T,G){var pe;if(!xe._getRecaptchaConfig())try{await pn(xe)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let qe;if(qe=typeof T=="string"?{phoneNumber:T}:T,"session"in qe){let wt=qe.session;if("phoneNumber"in qe){ee(wt.type==="enroll",xe,"internal-error");let Dt={idToken:wt.credential,phoneEnrollmentInfo:{phoneNumber:qe.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await li(xe,Dt,"mfaSmsEnrollment",async(sn,Sn)=>{if(Sn.phoneEnrollmentInfo.captchaResponse===tr){ee(G?.type===Hl,sn,"argument-error");let us=await so(sn,Sn,G);return ql(sn,us)}return ql(sn,Sn)},"PHONE_PROVIDER").catch(sn=>Promise.reject(sn))).phoneSessionInfo.sessionInfo}{ee(wt.type==="signin",xe,"internal-error");let Dt=((pe=qe.multiFactorHint)===null||pe===void 0?void 0:pe.uid)||qe.multiFactorUid;ee(Dt,xe,"missing-multi-factor-info");let pr={mfaPendingCredential:wt.credential,mfaEnrollmentId:Dt,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await li(xe,pr,"mfaSmsSignIn",async(Sn,us)=>{if(us.phoneSignInInfo.captchaResponse===tr){ee(G?.type===Hl,Sn,"argument-error");let Cs=await so(Sn,us,G);return Gl(Sn,Cs)}return Gl(Sn,us)},"PHONE_PROVIDER").catch(Sn=>Promise.reject(Sn))).phoneResponseInfo.sessionInfo}}{let wt={phoneNumber:qe.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await li(xe,wt,"sendVerificationCode",async(mr,sn)=>{if(sn.captchaResponse===tr){ee(G?.type===Hl,mr,"argument-error");let Sn=await so(mr,sn,G);return $s(mr,Sn)}return $s(mr,sn)},"PHONE_PROVIDER").catch(mr=>Promise.reject(mr))).sessionInfo}}finally{G?._reset()}}async function so(xe,T,G){ee(G.type===Hl,xe,"argument-error");let pe=await G.verify();ee(typeof pe=="string",xe,"argument-error");let qe=Object.assign({},T);if("phoneEnrollmentInfo"in qe){let wt=qe.phoneEnrollmentInfo.phoneNumber,Dt=qe.phoneEnrollmentInfo.captchaResponse,pr=qe.phoneEnrollmentInfo.clientType,mr=qe.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(qe,{phoneEnrollmentInfo:{phoneNumber:wt,recaptchaToken:pe,captchaResponse:Dt,clientType:pr,recaptchaVersion:mr}}),qe}if(!("phoneSignInInfo"in qe))return Object.assign(qe,{recaptchaToken:pe}),qe;{let wt=qe.phoneSignInInfo.captchaResponse,Dt=qe.phoneSignInInfo.clientType,pr=qe.phoneSignInInfo.recaptchaVersion;return Object.assign(qe,{phoneSignInInfo:{recaptchaToken:pe,captchaResponse:wt,clientType:Dt,recaptchaVersion:pr}}),qe}}class Cl{constructor(T){this.providerId=Cl.PROVIDER_ID,this.auth=Ri(T)}verifyPhoneNumber(T,G){return nu(this.auth,T,(0,W.m9)(G))}static credential(T,G){return Gi._fromVerification(T,G)}static credentialFromResult(T){return Cl.credentialFromTaggedObject(T)}static credentialFromError(T){return Cl.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;let{phoneNumber:G,temporaryProof:pe}=T;return G&&pe?Gi._fromTokenResponse(G,pe):null}}Cl.PROVIDER_ID="phone",Cl.PHONE_SIGN_IN_METHOD="phone";class fc extends Ln{constructor(T){super("custom","custom"),this.params=T}_getIdTokenResponse(T){return ui(T,this._buildIdpRequest())}_linkToIdToken(T,G){return ui(T,this._buildIdpRequest(G))}_getReauthenticationResolver(T){return ui(T,this._buildIdpRequest())}_buildIdpRequest(T){let G={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return T&&(G.idToken=T),G}}function Pc(xe){return pi(xe.auth,new fc(xe),xe.bypassAuthState)}function pa(xe){let{auth:T,user:G}=xe;return ee(G,T,"internal-error"),yr(G,new fc(xe),xe.bypassAuthState)}async function Qt(xe){let{auth:T,user:G}=xe;return ee(G,T,"internal-error"),Qr(G,new fc(xe),xe.bypassAuthState)}class Sa{constructor(T,G,pe,qe,wt=!1){this.auth=T,this.resolver=pe,this.user=qe,this.bypassAuthState=wt,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(G)?G:[G]}execute(){return new Promise(async(T,G)=>{this.pendingPromise={resolve:T,reject:G};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(pe){this.reject(pe)}})}async onAuthEvent(T){let{urlResponse:G,sessionId:pe,postBody:qe,tenantId:wt,error:Dt,type:pr}=T;if(Dt){this.reject(Dt);return}let mr={auth:this.auth,requestUri:G,sessionId:pe,tenantId:wt||void 0,postBody:qe||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(pr)(mr))}catch(sn){this.reject(sn)}}onError(T){this.reject(T)}getIdpTask(T){switch(T){case"signInViaPopup":case"signInViaRedirect":return Pc;case"linkViaPopup":case"linkViaRedirect":return Qt;case"reauthViaPopup":case"reauthViaRedirect":return pa;default:C(this.auth,"internal-error")}}resolve(T){var G,pe;G=this.pendingPromise,pe="Pending promise was never set",G||fe(pe),this.pendingPromise.resolve(T),this.unregisterAndCleanUp()}reject(T){var G,pe;G=this.pendingPromise,pe="Pending promise was never set",G||fe(pe),this.pendingPromise.reject(T),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let ma=new Ue(2e3,1e4);class wl extends Sa{constructor(T,G,pe,qe,wt){super(T,G,qe,wt),this.provider=pe,this.authWindow=null,this.pollId=null,wl.currentPopupAction&&wl.currentPopupAction.cancel(),wl.currentPopupAction=this}async executeNotNull(){let T=await this.execute();return ee(T,this.auth,"internal-error"),T}async onExecution(){var T,G;T=this.filter.length===1,G="Popup operations only handle one event",T||fe(G);let pe=Rc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],pe),this.authWindow.associatedEvent=pe,this.resolver._originValidation(this.auth).catch(qe=>{this.reject(qe)}),this.resolver._isIframeWebStorageSupported(this.auth,qe=>{qe||this.reject(N(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var T;return((T=this.authWindow)===null||T===void 0?void 0:T.associatedEvent)||null}cancel(){this.reject(N(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wl.currentPopupAction=null}pollUserCancellation(){let T=()=>{var G,pe;if(!((pe=(G=this.authWindow)===null||G===void 0?void 0:G.window)===null||pe===void 0)&&pe.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(N(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(T,ma.get())};T()}}wl.currentPopupAction=null;let pc=new Map;class Bo extends Sa{constructor(T,G,pe=!1){super(T,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],G,void 0,pe),this.eventId=null}async execute(){let T=pc.get(this.auth._key());if(!T){try{let G=await Kl(this.resolver,this.auth)?await super.execute():null;T=()=>Promise.resolve(G)}catch(G){T=()=>Promise.reject(G)}pc.set(this.auth._key(),T)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),T()}async onAuthEvent(T){if(T.type==="signInViaRedirect")return super.onAuthEvent(T);if(T.type==="unknown"){this.resolve(null);return}if(T.eventId){let G=await this.auth._redirectUserForId(T.eventId);if(G)return this.user=G,super.onAuthEvent(T);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kl(xe,T){let G=Wl(T),pe=Rs(xe);if(!await pe._isAvailable())return!1;let qe=await pe._get(G)==="true";return await pe._remove(G),qe}function xs(xe,T){pc.set(xe._key(),T)}function Rs(xe){return Et(xe._redirectPersistence)}function Wl(xe){return an("pendingRedirect",xe.config.apiKey,xe.name)}async function Nu(xe,T,G=!1){var pe,qe;if((0,Z.rh)(xe.app))return Promise.reject(K(xe));let wt=Ri(xe),Dt=(pe=wt,(qe=T)?Et(qe):(ee(pe._popupRedirectResolver,pe,"argument-error"),pe._popupRedirectResolver)),pr=new Bo(wt,Dt,G),mr=await pr.execute();return mr&&!G&&(delete mr.user._redirectEventId,await wt._persistUserIfCurrent(mr.user),await wt._setRedirectUser(null,T)),mr}class ol{constructor(T){this.auth=T,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(T){this.consumers.add(T),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,T)&&(this.sendToConsumer(this.queuedRedirectEvent,T),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(T){this.consumers.delete(T)}onEvent(T){if(this.hasEventBeenHandled(T))return!1;let G=!1;return this.consumers.forEach(pe=>{this.isEventForConsumer(T,pe)&&(G=!0,this.sendToConsumer(T,pe),this.saveEventToCache(T))}),this.hasHandledPotentialRedirect||!function(pe){switch(pe.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ho(pe);default:return!1}}(T)||(this.hasHandledPotentialRedirect=!0,G||(this.queuedRedirectEvent=T,G=!0)),G}sendToConsumer(T,G){var pe;if(T.error&&!ho(T)){let qe=((pe=T.error.code)===null||pe===void 0?void 0:pe.split("auth/")[1])||"internal-error";G.onError(N(this.auth,qe))}else G.onAuthEvent(T)}isEventForConsumer(T,G){let pe=G.eventId===null||!!T.eventId&&T.eventId===G.eventId;return G.filter.includes(T.type)&&pe}hasEventBeenHandled(T){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rc(T))}saveEventToCache(T){this.cachedEventUids.add(rc(T)),this.lastProcessedEventTime=Date.now()}}function rc(xe){return[xe.type,xe.eventId,xe.sessionId,xe.tenantId].filter(T=>T).join("-")}function ho({type:xe,error:T}){return xe==="unknown"&&T?.code==="auth/no-auth-event"}async function Yc(xe,T={}){return Q(xe,"GET","/v1/projects",T)}let Me=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ct=/^https?/;async function St(xe){if(xe.config.emulator)return;let{authorizedDomains:T}=await Yc(xe);for(let G of T)try{if(function(pe){let qe=Se(),{protocol:wt,hostname:Dt}=new URL(qe);if(pe.startsWith("chrome-extension://")){let mr=new URL(pe);return mr.hostname===""&&Dt===""?wt==="chrome-extension:"&&pe.replace("chrome-extension://","")===qe.replace("chrome-extension://",""):wt==="chrome-extension:"&&mr.hostname===Dt}if(!ct.test(wt))return!1;if(Me.test(pe))return Dt===pe;let pr=pe.replace(/\./g,"\\.");return RegExp("^(.+\\."+pr+"|"+pr+")$","i").test(Dt)}(G))return}catch{}C(xe,"unauthorized-domain")}let Wt=new Ue(3e4,6e4);function or(){let xe=ci().___jsl;if(xe?.H){for(let T of Object.keys(xe.H))if(xe.H[T].r=xe.H[T].r||[],xe.H[T].L=xe.H[T].L||[],xe.H[T].r=[...xe.H[T].L],xe.CP)for(let G=0;G<xe.CP.length;G++)xe.CP[G]=null}}let Ir=null,Tr=new Ue(5e3,15e3),Cr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function qr(xe){let T=await(Ir=Ir||new Promise((pe,qe)=>{var wt,Dt,pr,mr;function sn(){or(),gapi.load("gapi.iframes",{callback:()=>{pe(gapi.iframes.getContext())},ontimeout:()=>{or(),qe(N(xe,"network-request-failed"))},timeout:Wt.get()})}if(!((Dt=(wt=ci().gapi)===null||wt===void 0?void 0:wt.iframes)===null||Dt===void 0)&&Dt.Iframe)pe(gapi.iframes.getContext());else if(!((pr=ci().gapi)===null||pr===void 0)&&pr.load)sn();else{let Sn=Ht("iframefcb");return ci()[Sn]=()=>{gapi.load?sn():qe(N(xe,"network-request-failed"))},(mr=`${st.gapiScript}?onload=${Sn}`,st.loadJS(mr)).catch(us=>qe(us))}}).catch(pe=>{throw Ir=null,pe})),G=ci().gapi;return ee(G,xe,"internal-error"),T.open({where:document.body,url:function(pe){let qe=pe.config;ee(qe.authDomain,pe,"auth-domain-config-required");let wt=qe.emulator?at(qe,"emulator/auth/iframe"):`https://${pe.config.authDomain}/__/auth/iframe`,Dt={apiKey:qe.apiKey,appName:pe.name,v:Z.Jn},pr=Yr.get(pe.config.apiHost);pr&&(Dt.eid=pr);let mr=pe._getFrameworks();return mr.length&&(Dt.fw=mr.join(",")),`${wt}?${(0,W.xO)(Dt).slice(1)}`}(xe),messageHandlersFilter:G.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cr,dontclear:!0},pe=>new Promise(async(qe,wt)=>{await pe.restyle({setHideOnLeave:!1});let Dt=N(xe,"network-request-failed"),pr=ci().setTimeout(()=>{wt(Dt)},Tr.get());function mr(){ci().clearTimeout(pr),qe(pe)}pe.ping(mr).then(mr,()=>{wt(Dt)})}))}let ln={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pn{constructor(T){this.window=T,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}let Rn=encodeURIComponent("fac");async function mi(xe,T,G,pe,qe,wt){ee(xe.config.authDomain,xe,"auth-domain-config-required"),ee(xe.config.apiKey,xe,"invalid-api-key");let Dt={apiKey:xe.config.apiKey,appName:xe.name,authType:G,redirectUrl:pe,v:Z.Jn,eventId:qe};if(T instanceof wo)for(let[sn,Sn]of(T.setDefaultLanguage(xe.languageCode),Dt.providerId=T.providerId||"",(0,W.xb)(T.getCustomParameters())||(Dt.customParameters=JSON.stringify(T.getCustomParameters())),Object.entries(wt||{})))Dt[sn]=Sn;if(T instanceof Te){let sn=T.getScopes().filter(Sn=>Sn!=="");sn.length>0&&(Dt.scopes=sn.join(","))}for(let sn of(xe.tenantId&&(Dt.tid=xe.tenantId),Object.keys(Dt)))Dt[sn]===void 0&&delete Dt[sn];let pr=await xe._getAppCheckToken(),mr=pr?`#${Rn}=${encodeURIComponent(pr)}`:"";return`${function({config:sn}){return sn.emulator?at(sn,"emulator/auth/handler"):`https://${sn.authDomain}/__/auth/handler`}(xe)}?${(0,W.xO)(Dt).slice(1)}${mr}`}let Vi="webStorageSupport";class Dn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tc,this._completeRedirectFn=Nu,this._overrideRedirectResult=xs}async _openPopup(T,G,pe,qe){var wt,Dt,pr;Dt=(wt=this.eventManagers[T._key()])===null||wt===void 0?void 0:wt.manager,pr="_initialize() not called before _openPopup()",Dt||fe(pr);let mr=await mi(T,G,pe,Se(),qe);return function(sn,Sn,us,Cs=500,xa=600){let Ea=Math.max((window.screen.availHeight-xa)/2,0).toString(),el=Math.max((window.screen.availWidth-Cs)/2,0).toString(),ia="",Ss=Object.assign(Object.assign({},ln),{width:Cs.toString(),height:xa.toString(),top:Ea,left:el}),_a=(0,W.z$)().toLowerCase();us&&(ia=Tn(_a)?"_blank":us),Or(_a)&&(Sn=Sn||"http://localhost",Ss.scrollbars="yes");let sa=Object.entries(Ss).reduce((Oa,[ys,Ia])=>`${Oa}${ys}=${Ia},`,"");if(function(Oa=(0,W.z$)()){var ys;return On(Oa)&&!!(!((ys=window.navigator)===null||ys===void 0)&&ys.standalone)}(_a)&&ia!=="_self")return function(Oa,ys){let Ia=document.createElement("a");Ia.href=Oa,Ia.target=ys;let fo=document.createEvent("MouseEvent");fo.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),Ia.dispatchEvent(fo)}(Sn||"",ia),new Pn(null);let Ks=window.open(Sn||"",ia,sa);ee(Ks,sn,"popup-blocked");try{Ks.focus()}catch{}return new Pn(Ks)}(T,mr,Rc())}async _openRedirect(T,G,pe,qe){var wt;return await this._originValidation(T),wt=await mi(T,G,pe,Se(),qe),ci().location.href=wt,new Promise(()=>{})}_initialize(T){let G=T._key();if(this.eventManagers[G]){var pe;let{manager:wt,promise:Dt}=this.eventManagers[G];return wt?Promise.resolve(wt):(pe="If manager is not set, promise should be",Dt||fe(pe),Dt)}let qe=this.initAndGetManager(T);return this.eventManagers[G]={promise:qe},qe.catch(()=>{delete this.eventManagers[G]}),qe}async initAndGetManager(T){let G=await qr(T),pe=new ol(T);return G.register("authEvent",qe=>(ee(qe?.authEvent,T,"invalid-auth-event"),{status:pe.onEvent(qe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[T._key()]={manager:pe},this.iframes[T._key()]=G,pe}_isIframeWebStorageSupported(T,G){this.iframes[T._key()].send(Vi,{type:Vi},pe=>{var qe;let wt=(qe=pe?.[0])===null||qe===void 0?void 0:qe[Vi];wt!==void 0&&G(!!wt),C(T,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(T){let G=T._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=St(T)),this.originValidationPromises[G]}get _shouldInitProactively(){return Pt()||wn()||On()}}class ts{constructor(T){this.factorId=T}_process(T,G,pe){switch(G.type){case"enroll":return this._finalizeEnroll(T,G.credential,pe);case"signin":return this._finalizeSignIn(T,G.credential);default:return fe("unexpected MultiFactorSessionType")}}}class Fs extends ts{constructor(T){super("phone"),this.credential=T}static _fromCredential(T){return new Fs(T)}_finalizeEnroll(T,G,pe){return Q(T,"POST","/v2/accounts/mfaEnrollment:finalize",F(T,{idToken:G,displayName:pe,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(T,G){return Q(T,"POST","/v2/accounts/mfaSignIn:finalize",F(T,{mfaPendingCredential:G,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class gi{constructor(){}static assertion(T){return Fs._fromCredential(T)}}gi.FACTOR_ID="phone";class as{static assertionForEnrollment(T,G){return Zt._fromSecret(T,G)}static assertionForSignIn(T,G){return Zt._fromEnrollmentId(T,G)}static async generateSecret(T){var G,pe;ee(((G=T.user)===null||G===void 0?void 0:G.auth)!==void 0,"internal-error");let qe=await Q(pe=T.user.auth,"POST","/v2/accounts/mfaEnrollment:start",F(pe,{idToken:T.credential,totpEnrollmentInfo:{}}));return _i._fromStartTotpMfaEnrollmentResponse(qe,T.user.auth)}}as.FACTOR_ID="totp";class Zt extends ts{constructor(T,G,pe){super("totp"),this.otp=T,this.enrollmentId=G,this.secret=pe}static _fromSecret(T,G){return new Zt(G,void 0,T)}static _fromEnrollmentId(T,G){return new Zt(G,T)}async _finalizeEnroll(T,G,pe){return ee(this.secret!==void 0,T,"argument-error"),Q(T,"POST","/v2/accounts/mfaEnrollment:finalize",F(T,{idToken:G,displayName:pe,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(T,G){ee(this.enrollmentId!==void 0&&this.otp!==void 0,T,"argument-error");let pe={verificationCode:this.otp};return Q(T,"POST","/v2/accounts/mfaSignIn:finalize",F(T,{mfaPendingCredential:G,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:pe}))}}class _i{constructor(T,G,pe,qe,wt,Dt,pr){this.sessionInfo=Dt,this.auth=pr,this.secretKey=T,this.hashingAlgorithm=G,this.codeLength=pe,this.codeIntervalSeconds=qe,this.enrollmentCompletionDeadline=wt}static _fromStartTotpMfaEnrollmentResponse(T,G){return new _i(T.totpSessionInfo.sharedSecretKey,T.totpSessionInfo.hashingAlgorithm,T.totpSessionInfo.verificationCodeLength,T.totpSessionInfo.periodSec,new Date(T.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),T.totpSessionInfo.sessionInfo,G)}_makeTotpVerificationInfo(T){return{sessionInfo:this.sessionInfo,verificationCode:T}}generateQrCodeUrl(T,G){var pe;let qe=!1;return(yi(T)||yi(G))&&(qe=!0),qe&&(yi(T)&&(T=((pe=this.auth.currentUser)===null||pe===void 0?void 0:pe.email)||"unknownuser"),yi(G)&&(G=this.auth.name)),`otpauth://totp/${G}:${T}?secret=${this.secretKey}&issuer=${G}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function yi(xe){return xe===void 0||xe?.length===0}var Wi="@firebase/auth",Ui="1.8.1";class Pi{constructor(T){this.auth=T,this.internalListeners=new Map}getUid(){var T;return this.assertAuthConfigured(),((T=this.auth.currentUser)===null||T===void 0?void 0:T.uid)||null}async getToken(T){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(T)}:null}addAuthTokenListener(T){if(this.assertAuthConfigured(),this.internalListeners.has(T))return;let G=this.auth.onIdTokenChanged(pe=>{T(pe?.stsTokenManager.accessToken||null)});this.internalListeners.set(T,G),this.updateProactiveRefresh()}removeAuthTokenListener(T){this.assertAuthConfigured();let G=this.internalListeners.get(T);G&&(this.internalListeners.delete(T),G(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let $n=(0,W.Pz)("authIdTokenMaxAge")||300,ws=null,bs=xe=>async T=>{let G=T&&await T.getIdTokenResult(),pe=G&&(new Date().getTime()-Date.parse(G.issuedAtTime))/1e3;if(pe&&pe>$n)return;let qe=G?.token;ws!==qe&&(ws=qe,await fetch(xe,{method:qe?"POST":"DELETE",headers:qe?{Authorization:`Bearer ${qe}`}:{}}))};st={loadJS:xe=>new Promise((T,G)=>{let pe=document.createElement("script");pe.setAttribute("src",xe),pe.onload=T,pe.onerror=qe=>{let wt=N("internal-error");wt.customData=qe,G(wt)},pe.type="text/javascript",pe.charset="UTF-8",function(){var qe,wt;return(wt=(qe=document.getElementsByTagName("head"))===null||qe===void 0?void 0:qe[0])!==null&&wt!==void 0?wt:document}().appendChild(pe)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},function(xe){(0,Z.Xd)(new y.wA("auth",(T,{options:G})=>{let pe=T.getProvider("app").getImmediate(),qe=T.getProvider("heartbeat"),wt=T.getProvider("app-check-internal"),{apiKey:Dt,authDomain:pr}=pe.options;ee(Dt&&!Dt.includes(":"),"invalid-api-key",{appName:pe.name});let mr=new es(pe,qe,wt,{apiKey:Dt,authDomain:pr,clientPlatform:xe,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_n(xe)});return function(sn,Sn){let us=Sn?.persistence||[],Cs=(Array.isArray(us)?us:[us]).map(Et);Sn?.errorMap&&sn._updateErrorMap(Sn.errorMap),sn._initializeWithPersistence(Cs,Sn?.popupRedirectResolver)}(mr,G),mr},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((T,G,pe)=>{T.getProvider("auth-internal").initialize()})),(0,Z.Xd)(new y.wA("auth-internal",T=>new Pi(Ri(T.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Z.KN)(Wi,Ui,function(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(xe)),(0,Z.KN)(Wi,Ui,"esm2017")}("Browser");let os=(0,Z.C6)().length===0?(0,Z.ZF)({apiKey:"AIzaSyAYph_1BvaIZjFDWT0PejKvNR-dFsIbDsw",authDomain:"maglit.firebaseapp.com",projectId:"maglit",storageBucket:"maglit.appspot.com",messagingSenderId:"876988542714",appId:"1:876988542714:web:24e1ddf716e4b378926343",measurementId:"G-Y4JMVH9R3W"}):(0,Z.Mq)();(function(xe=(0,Z.Mq)()){let T=(0,Z.qX)(xe,"auth");if(T.isInitialized())return T.getImmediate();let G=function(pr,mr){let sn=(0,Z.qX)(pr,"auth");if(sn.isInitialized()){let Sn=sn.getImmediate(),us=sn.getOptions();if((0,W.vZ)(us,mr??{}))return Sn;C(Sn,"already-initialized")}return sn.initialize({options:mr})}(xe,{popupRedirectResolver:Dn,persistence:[ba,Au,tc]}),pe=(0,W.Pz)("authTokenSyncURL");if(pe&&typeof isSecureContext=="boolean"&&isSecureContext){let pr=new URL(pe,location.origin);if(location.origin===pr.origin){var qe,wt;let mr=bs(pr.toString());qe=()=>mr(G.currentUser),(0,W.m9)(G).beforeAuthStateChanged(mr,qe),wt=sn=>mr(sn),(0,W.m9)(G).onIdTokenChanged(wt,void 0,void 0)}}let Dt=(0,W.q4)("auth");Dt&&function(pr,mr,sn){let Sn=Ri(pr);ee(Sn._canInitEmulator,Sn,"emulator-config-failed"),ee(/^https?:\/\//.test(mr),Sn,"invalid-emulator-scheme");let us=In(mr),{host:Cs,port:xa}=function(el){let ia=In(el),Ss=/(\/\/)?([^?#/]+)/.exec(el.substr(ia.length));if(!Ss)return{host:"",port:null};let _a=Ss[2].split("@").pop()||"",sa=/^(\[[^\]]+\])(:|$)/.exec(_a);if(sa){let Ks=sa[1];return{host:Ks,port:qn(_a.substr(Ks.length+1))}}{let[Ks,Oa]=_a.split(":");return{host:Ks,port:qn(Oa)}}}(mr),Ea=xa===null?"":`:${xa}`;Sn.config.emulator={url:`${us}//${Cs}${Ea}/`},Sn.settings.appVerificationDisabledForTesting=!0,Sn.emulatorConfig=Object.freeze({host:Cs,port:xa,protocol:us.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function el(){let ia=document.createElement("p"),Ss=ia.style;ia.innerText="Running in emulator mode. Do not use with production credentials.",Ss.position="fixed",Ss.width="100%",Ss.backgroundColor="#ffffff",Ss.border=".1em solid #000000",Ss.color="#b50000",Ss.bottom="0px",Ss.left="0px",Ss.margin="0px",Ss.zIndex="10000",Ss.textAlign="center",ia.classList.add("firebase-emulator-warning"),document.body.appendChild(ia)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",el):el())}()}(G,`http://${Dt}`)})(os);let hi=(0,q.ad)(os)},2754:(Jt,ae,M)=>{"use strict";M.d(ae,{BH:()=>ee,G6:()=>re,L:()=>y,LL:()=>me,L_:()=>Ue,P0:()=>U,Pz:()=>Y,Sg:()=>fe,ZR:()=>se,aH:()=>K,b$:()=>vt,eu:()=>Q,hl:()=>F,m9:()=>tt,ne:()=>pt,pd:()=>Fe,q4:()=>N,ru:()=>at,tV:()=>S,uI:()=>ze,vZ:()=>function we(Ce,We){if(Ce===We)return!0;let ve=Object.keys(Ce),Ve=Object.keys(We);for(let gt of ve){if(!Ve.includes(gt))return!1;let mt=Ce[gt],lt=We[gt];if(Je(mt)&&Je(lt)){if(!we(mt,lt))return!1}else if(mt!==lt)return!1}for(let gt of Ve)if(!ve.includes(gt))return!1;return!0},w1:()=>jt,xO:()=>He,xb:()=>Ke,z$:()=>Se,zd:()=>_e});let q=function(we){let Ce=[],We=0;for(let ve=0;ve<we.length;ve++){let Ve=we.charCodeAt(ve);Ve<128?Ce[We++]=Ve:(Ve<2048?Ce[We++]=Ve>>6|192:((64512&Ve)==55296&&ve+1<we.length&&(64512&we.charCodeAt(ve+1))==56320?(Ve=65536+((1023&Ve)<<10)+(1023&we.charCodeAt(++ve)),Ce[We++]=Ve>>18|240,Ce[We++]=Ve>>12&63|128):Ce[We++]=Ve>>12|224,Ce[We++]=Ve>>6&63|128),Ce[We++]=63&Ve|128)}return Ce},Z=function(we){let Ce=[],We=0,ve=0;for(;We<we.length;){let Ve=we[We++];if(Ve<128)Ce[ve++]=String.fromCharCode(Ve);else if(Ve>191&&Ve<224){let gt=we[We++];Ce[ve++]=String.fromCharCode((31&Ve)<<6|63&gt)}else if(Ve>239&&Ve<365){let gt=((7&Ve)<<18|(63&we[We++])<<12|(63&we[We++])<<6|63&we[We++])-65536;Ce[ve++]=String.fromCharCode(55296+(gt>>10)),Ce[ve++]=String.fromCharCode(56320+(1023&gt))}else{let gt=we[We++],mt=we[We++];Ce[ve++]=String.fromCharCode((15&Ve)<<12|(63&gt)<<6|63&mt)}}return Ce.join("")},W={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(we,Ce){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();let We=Ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Ve=0;Ve<we.length;Ve+=3){let gt=we[Ve],mt=Ve+1<we.length,lt=mt?we[Ve+1]:0,et=Ve+2<we.length,bt=et?we[Ve+2]:0,Ct=gt>>2,Ee=(3&gt)<<4|lt>>4,Qe=(15&lt)<<2|bt>>6,yt=63&bt;et||(yt=64,mt||(Qe=64)),ve.push(We[Ct],We[Ee],We[Qe],We[yt])}return ve.join("")},encodeString(we,Ce){return this.HAS_NATIVE_SUPPORT&&!Ce?btoa(we):this.encodeByteArray(q(we),Ce)},decodeString(we,Ce){return this.HAS_NATIVE_SUPPORT&&!Ce?atob(we):Z(this.decodeStringToByteArray(we,Ce))},decodeStringToByteArray(we,Ce){this.init_();let We=Ce?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Ve=0;Ve<we.length;){let gt=We[we.charAt(Ve++)],mt=Ve<we.length?We[we.charAt(Ve)]:0,lt=++Ve<we.length?We[we.charAt(Ve)]:64,et=++Ve<we.length?We[we.charAt(Ve)]:64;if(++Ve,gt==null||mt==null||lt==null||et==null)throw new j;let bt=gt<<2|mt>>4;if(ve.push(bt),lt!==64){let Ct=mt<<4&240|lt>>2;if(ve.push(Ct),et!==64){let Ee=lt<<6&192|et;ve.push(Ee)}}}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}};class j extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let z=function(we){let Ce=q(we);return W.encodeByteArray(Ce,!0)},y=function(we){return z(we).replace(/\./g,"")},S=function(we){try{return W.decodeString(we,!0)}catch(Ce){console.error("base64Decode failed: ",Ce)}return null},k=()=>function(){if(typeof zr<"u")return zr;if(typeof window<"u")return window;if(M.g!==void 0)return M.g;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,I=()=>{if(typeof process>"u"||process.env===void 0)return;let we=process.env.__FIREBASE_DEFAULTS__;if(we)return JSON.parse(we)},x=()=>{let we;if(typeof document>"u")return;try{we=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let Ce=we&&S(we[1]);return Ce&&JSON.parse(Ce)},C=()=>{try{return k()||I()||x()}catch(we){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${we}`);return}},N=we=>{var Ce,We;return(We=(Ce=C())===null||Ce===void 0?void 0:Ce.emulatorHosts)===null||We===void 0?void 0:We[we]},U=we=>{let Ce=N(we);if(!Ce)return;let We=Ce.lastIndexOf(":");if(We<=0||We+1===Ce.length)throw Error(`Invalid host ${Ce} with no separate hostname and port!`);let ve=parseInt(Ce.substring(We+1),10);return Ce[0]==="["?[Ce.substring(1,We-1),ve]:[Ce.substring(0,We),ve]},K=()=>{var we;return(we=C())===null||we===void 0?void 0:we.config},Y=we=>{var Ce;return(Ce=C())===null||Ce===void 0?void 0:Ce[`_${we}`]};class ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ce,We)=>{this.resolve=Ce,this.reject=We})}wrapCallback(Ce){return(We,ve)=>{We?this.reject(We):this.resolve(ve),typeof Ce=="function"&&(this.promise.catch(()=>{}),Ce.length===1?Ce(We):Ce(We,ve))}}}function fe(we,Ce){if(we.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let We=Ce||"demo-project",ve=we.iat||0,Ve=we.sub||we.user_id;if(!Ve)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let gt=Object.assign({iss:`https://securetoken.google.com/${We}`,aud:We,iat:ve,exp:ve+3600,auth_time:ve,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},we);return[y(JSON.stringify({alg:"none",type:"JWT"})),y(JSON.stringify(gt)),""].join(".")}function Se(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function Ue(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function at(){let we=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof we=="object"&&we.id!==void 0}function vt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jt(){let we=Se();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function re(){return!function(){var we;let Ce=(we=C())===null||we===void 0?void 0:we.forceEnvironment;if(Ce==="node")return!0;if(Ce==="browser")return!1;try{return Object.prototype.toString.call(M.g.process)==="[object process]"}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F(){try{return typeof indexedDB=="object"}catch{return!1}}function Q(){return new Promise((we,Ce)=>{try{let We=!0,ve="validate-browser-context-for-indexeddb-analytics-module",Ve=zr.indexedDB.open(ve);Ve.onsuccess=()=>{Ve.result.close(),We||zr.indexedDB.deleteDatabase(ve),we(!0)},Ve.onupgradeneeded=()=>{We=!1},Ve.onerror=()=>{var gt;Ce(((gt=Ve.error)===null||gt===void 0?void 0:gt.message)||"")}}catch(We){Ce(We)}})}class se extends Error{constructor(Ce,We,ve){super(We),this.code=Ce,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,me.prototype.create)}}class me{constructor(Ce,We,ve){this.service=Ce,this.serviceName=We,this.errors=ve}create(Ce,...We){let ve=We[0]||{},Ve=`${this.service}/${Ce}`,gt=this.errors[Ce],mt=gt?gt.replace(ce,(et,bt)=>{let Ct=ve[bt];return Ct!=null?String(Ct):`<${bt}?>`}):"Error",lt=`${this.serviceName}: ${mt} (${Ve}).`;return new se(Ve,lt,ve)}}let ce=/\{\$([^}]+)}/g;function Ke(we){for(let Ce in we)if(Object.prototype.hasOwnProperty.call(we,Ce))return!1;return!0}function Je(we){return we!==null&&typeof we=="object"}function He(we){let Ce=[];for(let[We,ve]of Object.entries(we))Array.isArray(ve)?ve.forEach(Ve=>{Ce.push(encodeURIComponent(We)+"="+encodeURIComponent(Ve))}):Ce.push(encodeURIComponent(We)+"="+encodeURIComponent(ve));return Ce.length?"&"+Ce.join("&"):""}function _e(we){let Ce={};return we.replace(/^\?/,"").split("&").forEach(We=>{if(We){let[ve,Ve]=We.split("=");Ce[decodeURIComponent(ve)]=decodeURIComponent(Ve)}}),Ce}function Fe(we){let Ce=we.indexOf("?");if(!Ce)return"";let We=we.indexOf("#",Ce);return we.substring(Ce,We>0?We:void 0)}function pt(we,Ce){let We=new lr(we,Ce);return We.subscribe.bind(We)}class lr{constructor(Ce,We){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=We,this.task.then(()=>{Ce(this)}).catch(ve=>{this.error(ve)})}next(Ce){this.forEachObserver(We=>{We.next(Ce)})}error(Ce){this.forEachObserver(We=>{We.error(Ce)}),this.close(Ce)}complete(){this.forEachObserver(Ce=>{Ce.complete()}),this.close()}subscribe(Ce,We,ve){let Ve;if(Ce===void 0&&We===void 0&&ve===void 0)throw Error("Missing Observer.");(Ve=function(mt,lt){if(typeof mt!="object"||mt===null)return!1;for(let et of lt)if(et in mt&&typeof mt[et]=="function")return!0;return!1}(Ce,["next","error","complete"])?Ce:{next:Ce,error:We,complete:ve}).next===void 0&&(Ve.next=Ne),Ve.error===void 0&&(Ve.error=Ne),Ve.complete===void 0&&(Ve.complete=Ne);let gt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ve.error(this.finalError):Ve.complete()}catch{}}),this.observers.push(Ve),gt}unsubscribeOne(Ce){this.observers!==void 0&&this.observers[Ce]!==void 0&&(delete this.observers[Ce],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(Ce){if(!this.finalized)for(let We=0;We<this.observers.length;We++)this.sendOne(We,Ce)}sendOne(Ce,We){this.task.then(()=>{if(this.observers!==void 0&&this.observers[Ce]!==void 0)try{We(this.observers[Ce])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(Ce){this.finalized||(this.finalized=!0,Ce!==void 0&&(this.finalError=Ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ne(){}function tt(we){return we&&we._delegate?we._delegate:we}},7173:Jt=>{let ae=["wa","de","re","ex","in","po","pro","con","auto","ex","extra","hyper","anti","co","in","mono","non","intra","un","post","tele","trans","up"],M=["ion","ity","ic","ical","ian","ial","ious","ing","ed","s","es","acy","ate","en","al","fy","ify","esque","able","ible","ness","ship","sion","ment","ist","ism","ful","y"],q=[["ch",10],["f",10],["k",10],["p",10],["s",10],["sh",10],["t",10]],Z=[["b",10],["d",10],["g",10],["j",2],["l",10],["m",10],["n",10],["ng",2],["r",10],["th",8],["v",10],["w",3],["y",4],["z",2]],W=[["pho",10],["lo",10],["di",10],["ta",10],["bo",10]],j=["a","e","i","o","u"],z=[[1,25],[2,10],[3,5],[4,2]];function y(x){let C=0;for(let U=0;U<x.length;++U)C+=x[U][1];let N=Math.random()*C;C=0;for(let U=0;U<x.length-1;++U)if((C+=x[U][1])>=N)return x[U][0];return x[x.length-1][0]}let S=x=>x[Math.floor(Math.random()*x.length)],k=()=>{let x=y(Z);Math.random()>.6&&(x=y(q),Math.random()>.6&&(x+=S(j)));let C=x+S(j);return Math.random()>.9&&(C=y(W)),C};class I{static slug(C=1){return Array.apply(null,Array(C)).map(N=>this.word()).join("-")}static word(){let C=[];Math.random()>.2&&C.push(S(ae));let N=Array.apply(null,Array(y(z))).map(Y=>k());(C=C.concat(N)).length||C.push(k());let U=C.join("");j.includes(U[U.length-1])&&Math.random()>.15&&U[U.length-1]!="e"&&(Math.random()>.8?C.push(y(Z)):C.push(y(q))),Math.random()>.3&&(Math.random()>.5&&C.push(y(Z)),C.push(S(M)));let K=C.join("");return K.length<3&&(K=this.word()),K}}Jt.exports=I},6395:(Jt,ae,M)=>{(()=>{"use strict";var q={491:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ContextAPI=void 0;let k=S(223),I=S(172),x=S(930),C="context",N=new k.NoopContextManager;class U{constructor(){}static getInstance(){return this._instance||(this._instance=new U),this._instance}setGlobalContextManager(Y){return(0,I.registerGlobal)(C,Y,x.DiagAPI.instance())}active(){return this._getContextManager().active()}with(Y,ee,fe,...Se){return this._getContextManager().with(Y,ee,fe,...Se)}bind(Y,ee){return this._getContextManager().bind(Y,ee)}_getContextManager(){return(0,I.getGlobal)(C)||N}disable(){this._getContextManager().disable(),(0,I.unregisterGlobal)(C,x.DiagAPI.instance())}}y.ContextAPI=U},930:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagAPI=void 0;let k=S(56),I=S(912),x=S(957),C=S(172);class N{constructor(){function K(ee){return function(...fe){let Se=(0,C.getGlobal)("diag");if(Se)return Se[ee](...fe)}}let Y=this;Y.setLogger=(ee,fe={logLevel:x.DiagLogLevel.INFO})=>{var Se,ze,Ue;if(ee===Y){let jt=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return Y.error((Se=jt.stack)!==null&&Se!==void 0?Se:jt.message),!1}typeof fe=="number"&&(fe={logLevel:fe});let at=(0,C.getGlobal)("diag"),vt=(0,I.createLogLevelDiagLogger)((ze=fe.logLevel)!==null&&ze!==void 0?ze:x.DiagLogLevel.INFO,ee);if(at&&!fe.suppressOverrideMessage){let jt=(Ue=Error().stack)!==null&&Ue!==void 0?Ue:"<failed to generate stacktrace>";at.warn(`Current logger will be overwritten from ${jt}`),vt.warn(`Current logger will overwrite one already registered from ${jt}`)}return(0,C.registerGlobal)("diag",vt,Y,!0)},Y.disable=()=>{(0,C.unregisterGlobal)("diag",Y)},Y.createComponentLogger=ee=>new k.DiagComponentLogger(ee),Y.verbose=K("verbose"),Y.debug=K("debug"),Y.info=K("info"),Y.warn=K("warn"),Y.error=K("error")}static instance(){return this._instance||(this._instance=new N),this._instance}}y.DiagAPI=N},653:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.MetricsAPI=void 0;let k=S(660),I=S(172),x=S(930),C="metrics";class N{constructor(){}static getInstance(){return this._instance||(this._instance=new N),this._instance}setGlobalMeterProvider(K){return(0,I.registerGlobal)(C,K,x.DiagAPI.instance())}getMeterProvider(){return(0,I.getGlobal)(C)||k.NOOP_METER_PROVIDER}getMeter(K,Y,ee){return this.getMeterProvider().getMeter(K,Y,ee)}disable(){(0,I.unregisterGlobal)(C,x.DiagAPI.instance())}}y.MetricsAPI=N},181:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PropagationAPI=void 0;let k=S(172),I=S(874),x=S(194),C=S(277),N=S(369),U=S(930),K="propagation",Y=new I.NoopTextMapPropagator;class ee{constructor(){this.createBaggage=N.createBaggage,this.getBaggage=C.getBaggage,this.getActiveBaggage=C.getActiveBaggage,this.setBaggage=C.setBaggage,this.deleteBaggage=C.deleteBaggage}static getInstance(){return this._instance||(this._instance=new ee),this._instance}setGlobalPropagator(Se){return(0,k.registerGlobal)(K,Se,U.DiagAPI.instance())}inject(Se,ze,Ue=x.defaultTextMapSetter){return this._getGlobalPropagator().inject(Se,ze,Ue)}extract(Se,ze,Ue=x.defaultTextMapGetter){return this._getGlobalPropagator().extract(Se,ze,Ue)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,k.unregisterGlobal)(K,U.DiagAPI.instance())}_getGlobalPropagator(){return(0,k.getGlobal)(K)||Y}}y.PropagationAPI=ee},997:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TraceAPI=void 0;let k=S(172),I=S(846),x=S(139),C=S(607),N=S(930),U="trace";class K{constructor(){this._proxyTracerProvider=new I.ProxyTracerProvider,this.wrapSpanContext=x.wrapSpanContext,this.isSpanContextValid=x.isSpanContextValid,this.deleteSpan=C.deleteSpan,this.getSpan=C.getSpan,this.getActiveSpan=C.getActiveSpan,this.getSpanContext=C.getSpanContext,this.setSpan=C.setSpan,this.setSpanContext=C.setSpanContext}static getInstance(){return this._instance||(this._instance=new K),this._instance}setGlobalTracerProvider(ee){let fe=(0,k.registerGlobal)(U,this._proxyTracerProvider,N.DiagAPI.instance());return fe&&this._proxyTracerProvider.setDelegate(ee),fe}getTracerProvider(){return(0,k.getGlobal)(U)||this._proxyTracerProvider}getTracer(ee,fe){return this.getTracerProvider().getTracer(ee,fe)}disable(){(0,k.unregisterGlobal)(U,N.DiagAPI.instance()),this._proxyTracerProvider=new I.ProxyTracerProvider}}y.TraceAPI=K},277:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.deleteBaggage=y.setBaggage=y.getActiveBaggage=y.getBaggage=void 0;let k=S(491),I=(0,S(780).createContextKey)("OpenTelemetry Baggage Key");function x(C){return C.getValue(I)||void 0}y.getBaggage=x,y.getActiveBaggage=function(){return x(k.ContextAPI.getInstance().active())},y.setBaggage=function(C,N){return C.setValue(I,N)},y.deleteBaggage=function(C){return C.deleteValue(I)}},993:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.BaggageImpl=void 0;class S{constructor(I){this._entries=I?new Map(I):new Map}getEntry(I){let x=this._entries.get(I);if(x)return Object.assign({},x)}getAllEntries(){return Array.from(this._entries.entries()).map(([I,x])=>[I,x])}setEntry(I,x){let C=new S(this._entries);return C._entries.set(I,x),C}removeEntry(I){let x=new S(this._entries);return x._entries.delete(I),x}removeEntries(...I){let x=new S(this._entries);for(let C of I)x._entries.delete(C);return x}clear(){return new S}}y.BaggageImpl=S},830:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.baggageEntryMetadataSymbol=void 0,y.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.baggageEntryMetadataFromString=y.createBaggage=void 0;let k=S(930),I=S(993),x=S(830),C=k.DiagAPI.instance();y.createBaggage=function(N={}){return new I.BaggageImpl(new Map(Object.entries(N)))},y.baggageEntryMetadataFromString=function(N){return typeof N!="string"&&(C.error(`Cannot create baggage metadata from unknown type: ${typeof N}`),N=""),{__TYPE__:x.baggageEntryMetadataSymbol,toString:()=>N}}},67:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.context=void 0;let k=S(491);y.context=k.ContextAPI.getInstance()},223:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopContextManager=void 0;let k=S(780);class I{active(){return k.ROOT_CONTEXT}with(C,N,U,...K){return N.call(U,...K)}bind(C,N){return N}enable(){return this}disable(){return this}}y.NoopContextManager=I},780:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ROOT_CONTEXT=y.createContextKey=void 0,y.createContextKey=function(k){return Symbol.for(k)};class S{constructor(I){let x=this;x._currentContext=I?new Map(I):new Map,x.getValue=C=>x._currentContext.get(C),x.setValue=(C,N)=>{let U=new S(x._currentContext);return U._currentContext.set(C,N),U},x.deleteValue=C=>{let N=new S(x._currentContext);return N._currentContext.delete(C),N}}}y.ROOT_CONTEXT=new S},506:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.diag=void 0;let k=S(930);y.diag=k.DiagAPI.instance()},56:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagComponentLogger=void 0;let k=S(172);class I{constructor(N){this._namespace=N.namespace||"DiagComponentLogger"}debug(...N){return x("debug",this._namespace,N)}error(...N){return x("error",this._namespace,N)}info(...N){return x("info",this._namespace,N)}warn(...N){return x("warn",this._namespace,N)}verbose(...N){return x("verbose",this._namespace,N)}}function x(C,N,U){let K=(0,k.getGlobal)("diag");if(K)return U.unshift(N),K[C](...U)}y.DiagComponentLogger=I},972:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagConsoleLogger=void 0;let S=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class k{constructor(){for(let x=0;x<S.length;x++)this[S[x].n]=function(C){return function(...N){if(console){let U=console[C];if(typeof U!="function"&&(U=console.log),typeof U=="function")return U.apply(console,N)}}}(S[x].c)}}y.DiagConsoleLogger=k},912:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.createLogLevelDiagLogger=void 0;let k=S(957);y.createLogLevelDiagLogger=function(I,x){function C(N,U){let K=x[N];return typeof K=="function"&&I>=U?K.bind(x):function(){}}return I<k.DiagLogLevel.NONE?I=k.DiagLogLevel.NONE:I>k.DiagLogLevel.ALL&&(I=k.DiagLogLevel.ALL),x=x||{},{error:C("error",k.DiagLogLevel.ERROR),warn:C("warn",k.DiagLogLevel.WARN),info:C("info",k.DiagLogLevel.INFO),debug:C("debug",k.DiagLogLevel.DEBUG),verbose:C("verbose",k.DiagLogLevel.VERBOSE)}}},957:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagLogLevel=void 0,function(S){S[S.NONE=0]="NONE",S[S.ERROR=30]="ERROR",S[S.WARN=50]="WARN",S[S.INFO=60]="INFO",S[S.DEBUG=70]="DEBUG",S[S.VERBOSE=80]="VERBOSE",S[S.ALL=9999]="ALL"}(y.DiagLogLevel||(y.DiagLogLevel={}))},172:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.unregisterGlobal=y.getGlobal=y.registerGlobal=void 0;let k=S(200),I=S(521),x=S(130),C=I.VERSION.split(".")[0],N=Symbol.for(`opentelemetry.js.api.${C}`),U=k._globalThis;y.registerGlobal=function(K,Y,ee,fe=!1){var Se;let ze=U[N]=(Se=U[N])!==null&&Se!==void 0?Se:{version:I.VERSION};if(!fe&&ze[K]){let Ue=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${K}`);return ee.error(Ue.stack||Ue.message),!1}if(ze.version!==I.VERSION){let Ue=Error(`@opentelemetry/api: Registration of version v${ze.version} for ${K} does not match previously registered API v${I.VERSION}`);return ee.error(Ue.stack||Ue.message),!1}return ze[K]=Y,ee.debug(`@opentelemetry/api: Registered a global for ${K} v${I.VERSION}.`),!0},y.getGlobal=function(K){var Y,ee;let fe=(Y=U[N])===null||Y===void 0?void 0:Y.version;if(fe&&(0,x.isCompatible)(fe))return(ee=U[N])===null||ee===void 0?void 0:ee[K]},y.unregisterGlobal=function(K,Y){Y.debug(`@opentelemetry/api: Unregistering a global for ${K} v${I.VERSION}.`);let ee=U[N];ee&&delete ee[K]}},130:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.isCompatible=y._makeCompatibilityCheck=void 0;let k=S(521),I=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function x(C){let N=new Set([C]),U=new Set,K=C.match(I);if(!K)return()=>!1;let Y={major:+K[1],minor:+K[2],patch:+K[3],prerelease:K[4]};if(Y.prerelease!=null)return function(fe){return fe===C};function ee(fe){return U.add(fe),!1}return function(fe){if(N.has(fe))return!0;if(U.has(fe))return!1;let Se=fe.match(I);if(!Se)return ee(fe);let ze={major:+Se[1],minor:+Se[2],patch:+Se[3],prerelease:Se[4]};return ze.prerelease!=null||Y.major!==ze.major?ee(fe):Y.major===0?Y.minor===ze.minor&&Y.patch<=ze.patch?(N.add(fe),!0):ee(fe):Y.minor<=ze.minor?(N.add(fe),!0):ee(fe)}}y._makeCompatibilityCheck=x,y.isCompatible=x(k.VERSION)},886:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.metrics=void 0;let k=S(653);y.metrics=k.MetricsAPI.getInstance()},901:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ValueType=void 0,function(S){S[S.INT=0]="INT",S[S.DOUBLE=1]="DOUBLE"}(y.ValueType||(y.ValueType={}))},102:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.createNoopMeter=y.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=y.NOOP_OBSERVABLE_GAUGE_METRIC=y.NOOP_OBSERVABLE_COUNTER_METRIC=y.NOOP_UP_DOWN_COUNTER_METRIC=y.NOOP_HISTOGRAM_METRIC=y.NOOP_COUNTER_METRIC=y.NOOP_METER=y.NoopObservableUpDownCounterMetric=y.NoopObservableGaugeMetric=y.NoopObservableCounterMetric=y.NoopObservableMetric=y.NoopHistogramMetric=y.NoopUpDownCounterMetric=y.NoopCounterMetric=y.NoopMetric=y.NoopMeter=void 0;class S{constructor(){}createHistogram(fe,Se){return y.NOOP_HISTOGRAM_METRIC}createCounter(fe,Se){return y.NOOP_COUNTER_METRIC}createUpDownCounter(fe,Se){return y.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(fe,Se){return y.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(fe,Se){return y.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(fe,Se){return y.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(fe,Se){}removeBatchObservableCallback(fe){}}y.NoopMeter=S;class k{}y.NoopMetric=k;class I extends k{add(fe,Se){}}y.NoopCounterMetric=I;class x extends k{add(fe,Se){}}y.NoopUpDownCounterMetric=x;class C extends k{record(fe,Se){}}y.NoopHistogramMetric=C;class N{addCallback(fe){}removeCallback(fe){}}y.NoopObservableMetric=N;class U extends N{}y.NoopObservableCounterMetric=U;class K extends N{}y.NoopObservableGaugeMetric=K;class Y extends N{}y.NoopObservableUpDownCounterMetric=Y,y.NOOP_METER=new S,y.NOOP_COUNTER_METRIC=new I,y.NOOP_HISTOGRAM_METRIC=new C,y.NOOP_UP_DOWN_COUNTER_METRIC=new x,y.NOOP_OBSERVABLE_COUNTER_METRIC=new U,y.NOOP_OBSERVABLE_GAUGE_METRIC=new K,y.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new Y,y.createNoopMeter=function(){return y.NOOP_METER}},660:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NOOP_METER_PROVIDER=y.NoopMeterProvider=void 0;let k=S(102);class I{getMeter(C,N,U){return k.NOOP_METER}}y.NoopMeterProvider=I,y.NOOP_METER_PROVIDER=new I},200:function(z,y,S){var k=this&&this.__createBinding||(Object.create?function(x,C,N,U){U===void 0&&(U=N),Object.defineProperty(x,U,{enumerable:!0,get:function(){return C[N]}})}:function(x,C,N,U){U===void 0&&(U=N),x[U]=C[N]}),I=this&&this.__exportStar||function(x,C){for(var N in x)N==="default"||Object.prototype.hasOwnProperty.call(C,N)||k(C,x,N)};Object.defineProperty(y,"__esModule",{value:!0}),I(S(46),y)},651:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y._globalThis=void 0,y._globalThis=typeof hn=="object"?hn:M.g},46:function(z,y,S){var k=this&&this.__createBinding||(Object.create?function(x,C,N,U){U===void 0&&(U=N),Object.defineProperty(x,U,{enumerable:!0,get:function(){return C[N]}})}:function(x,C,N,U){U===void 0&&(U=N),x[U]=C[N]}),I=this&&this.__exportStar||function(x,C){for(var N in x)N==="default"||Object.prototype.hasOwnProperty.call(C,N)||k(C,x,N)};Object.defineProperty(y,"__esModule",{value:!0}),I(S(651),y)},939:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.propagation=void 0;let k=S(181);y.propagation=k.PropagationAPI.getInstance()},874:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopTextMapPropagator=void 0;class S{inject(I,x){}extract(I,x){return I}fields(){return[]}}y.NoopTextMapPropagator=S},194:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.defaultTextMapSetter=y.defaultTextMapGetter=void 0,y.defaultTextMapGetter={get(S,k){if(S!=null)return S[k]},keys:S=>S==null?[]:Object.keys(S)},y.defaultTextMapSetter={set(S,k,I){S!=null&&(S[k]=I)}}},845:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.trace=void 0;let k=S(997);y.trace=k.TraceAPI.getInstance()},403:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NonRecordingSpan=void 0;let k=S(476);class I{constructor(C=k.INVALID_SPAN_CONTEXT){this._spanContext=C}spanContext(){return this._spanContext}setAttribute(C,N){return this}setAttributes(C){return this}addEvent(C,N){return this}setStatus(C){return this}updateName(C){return this}end(C){}isRecording(){return!1}recordException(C,N){}}y.NonRecordingSpan=I},614:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopTracer=void 0;let k=S(491),I=S(607),x=S(403),C=S(139),N=k.ContextAPI.getInstance();class U{startSpan(Y,ee,fe=N.active()){if(ee?.root)return new x.NonRecordingSpan;let Se=fe&&(0,I.getSpanContext)(fe);return typeof Se=="object"&&typeof Se.spanId=="string"&&typeof Se.traceId=="string"&&typeof Se.traceFlags=="number"&&(0,C.isSpanContextValid)(Se)?new x.NonRecordingSpan(Se):new x.NonRecordingSpan}startActiveSpan(Y,ee,fe,Se){let ze,Ue,at;if(arguments.length<2)return;arguments.length==2?at=ee:arguments.length==3?(ze=ee,at=fe):(ze=ee,Ue=fe,at=Se);let vt=Ue??N.active(),jt=this.startSpan(Y,ze,vt),re=(0,I.setSpan)(vt,jt);return N.with(re,at,void 0,jt)}}y.NoopTracer=U},124:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopTracerProvider=void 0;let k=S(614);class I{getTracer(C,N,U){return new k.NoopTracer}}y.NoopTracerProvider=I},125:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ProxyTracer=void 0;let k=new(S(614)).NoopTracer;class I{constructor(C,N,U,K){this._provider=C,this.name=N,this.version=U,this.options=K}startSpan(C,N,U){return this._getTracer().startSpan(C,N,U)}startActiveSpan(C,N,U,K){let Y=this._getTracer();return Reflect.apply(Y.startActiveSpan,Y,arguments)}_getTracer(){if(this._delegate)return this._delegate;let C=this._provider.getDelegateTracer(this.name,this.version,this.options);return C?(this._delegate=C,this._delegate):k}}y.ProxyTracer=I},846:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ProxyTracerProvider=void 0;let k=S(125),I=new(S(124)).NoopTracerProvider;class x{getTracer(N,U,K){var Y;return(Y=this.getDelegateTracer(N,U,K))!==null&&Y!==void 0?Y:new k.ProxyTracer(this,N,U,K)}getDelegate(){var N;return(N=this._delegate)!==null&&N!==void 0?N:I}setDelegate(N){this._delegate=N}getDelegateTracer(N,U,K){var Y;return(Y=this._delegate)===null||Y===void 0?void 0:Y.getTracer(N,U,K)}}y.ProxyTracerProvider=x},996:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SamplingDecision=void 0,function(S){S[S.NOT_RECORD=0]="NOT_RECORD",S[S.RECORD=1]="RECORD",S[S.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(y.SamplingDecision||(y.SamplingDecision={}))},607:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.getSpanContext=y.setSpanContext=y.deleteSpan=y.setSpan=y.getActiveSpan=y.getSpan=void 0;let k=S(780),I=S(403),x=S(491),C=(0,k.createContextKey)("OpenTelemetry Context Key SPAN");function N(K){return K.getValue(C)||void 0}function U(K,Y){return K.setValue(C,Y)}y.getSpan=N,y.getActiveSpan=function(){return N(x.ContextAPI.getInstance().active())},y.setSpan=U,y.deleteSpan=function(K){return K.deleteValue(C)},y.setSpanContext=function(K,Y){return U(K,new I.NonRecordingSpan(Y))},y.getSpanContext=function(K){var Y;return(Y=N(K))===null||Y===void 0?void 0:Y.spanContext()}},325:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TraceStateImpl=void 0;let k=S(564);class I{constructor(C){this._internalState=new Map,C&&this._parse(C)}set(C,N){let U=this._clone();return U._internalState.has(C)&&U._internalState.delete(C),U._internalState.set(C,N),U}unset(C){let N=this._clone();return N._internalState.delete(C),N}get(C){return this._internalState.get(C)}serialize(){return this._keys().reduce((C,N)=>(C.push(N+"="+this.get(N)),C),[]).join(",")}_parse(C){!(C.length>512)&&(this._internalState=C.split(",").reverse().reduce((N,U)=>{let K=U.trim(),Y=K.indexOf("=");if(Y!==-1){let ee=K.slice(0,Y),fe=K.slice(Y+1,U.length);(0,k.validateKey)(ee)&&(0,k.validateValue)(fe)&&N.set(ee,fe)}return N},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let C=new I;return C._internalState=new Map(this._internalState),C}}y.TraceStateImpl=I},564:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.validateValue=y.validateKey=void 0;let S="[_0-9a-z-*/]",k=`[a-z]${S}{0,255}`,I=`[a-z0-9]${S}{0,240}@[a-z]${S}{0,13}`,x=RegExp(`^(?:${k}|${I})$`),C=/^[ -~]{0,255}[!-~]$/,N=/,|=/;y.validateKey=function(U){return x.test(U)},y.validateValue=function(U){return C.test(U)&&!N.test(U)}},98:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.createTraceState=void 0;let k=S(325);y.createTraceState=function(I){return new k.TraceStateImpl(I)}},476:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.INVALID_SPAN_CONTEXT=y.INVALID_TRACEID=y.INVALID_SPANID=void 0;let k=S(475);y.INVALID_SPANID="0000000000000000",y.INVALID_TRACEID="00000000000000000000000000000000",y.INVALID_SPAN_CONTEXT={traceId:y.INVALID_TRACEID,spanId:y.INVALID_SPANID,traceFlags:k.TraceFlags.NONE}},357:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SpanKind=void 0,function(S){S[S.INTERNAL=0]="INTERNAL",S[S.SERVER=1]="SERVER",S[S.CLIENT=2]="CLIENT",S[S.PRODUCER=3]="PRODUCER",S[S.CONSUMER=4]="CONSUMER"}(y.SpanKind||(y.SpanKind={}))},139:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.wrapSpanContext=y.isSpanContextValid=y.isValidSpanId=y.isValidTraceId=void 0;let k=S(476),I=S(403),x=/^([0-9a-f]{32})$/i,C=/^[0-9a-f]{16}$/i;function N(K){return x.test(K)&&K!==k.INVALID_TRACEID}function U(K){return C.test(K)&&K!==k.INVALID_SPANID}y.isValidTraceId=N,y.isValidSpanId=U,y.isSpanContextValid=function(K){return N(K.traceId)&&U(K.spanId)},y.wrapSpanContext=function(K){return new I.NonRecordingSpan(K)}},847:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SpanStatusCode=void 0,function(S){S[S.UNSET=0]="UNSET",S[S.OK=1]="OK",S[S.ERROR=2]="ERROR"}(y.SpanStatusCode||(y.SpanStatusCode={}))},475:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TraceFlags=void 0,function(S){S[S.NONE=0]="NONE",S[S.SAMPLED=1]="SAMPLED"}(y.TraceFlags||(y.TraceFlags={}))},521:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.VERSION=void 0,y.VERSION="1.6.0"}},Z={};function W(z){var y=Z[z];if(y!==void 0)return y.exports;var S=Z[z]={exports:{}},k=!0;try{q[z].call(S.exports,S,S.exports,W),k=!1}finally{k&&delete Z[z]}return S.exports}W.ab="//";var j={};(()=>{Object.defineProperty(j,"__esModule",{value:!0}),j.trace=j.propagation=j.metrics=j.diag=j.context=j.INVALID_SPAN_CONTEXT=j.INVALID_TRACEID=j.INVALID_SPANID=j.isValidSpanId=j.isValidTraceId=j.isSpanContextValid=j.createTraceState=j.TraceFlags=j.SpanStatusCode=j.SpanKind=j.SamplingDecision=j.ProxyTracerProvider=j.ProxyTracer=j.defaultTextMapSetter=j.defaultTextMapGetter=j.ValueType=j.createNoopMeter=j.DiagLogLevel=j.DiagConsoleLogger=j.ROOT_CONTEXT=j.createContextKey=j.baggageEntryMetadataFromString=void 0;var z=W(369);Object.defineProperty(j,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return z.baggageEntryMetadataFromString}});var y=W(780);Object.defineProperty(j,"createContextKey",{enumerable:!0,get:function(){return y.createContextKey}}),Object.defineProperty(j,"ROOT_CONTEXT",{enumerable:!0,get:function(){return y.ROOT_CONTEXT}});var S=W(972);Object.defineProperty(j,"DiagConsoleLogger",{enumerable:!0,get:function(){return S.DiagConsoleLogger}});var k=W(957);Object.defineProperty(j,"DiagLogLevel",{enumerable:!0,get:function(){return k.DiagLogLevel}});var I=W(102);Object.defineProperty(j,"createNoopMeter",{enumerable:!0,get:function(){return I.createNoopMeter}});var x=W(901);Object.defineProperty(j,"ValueType",{enumerable:!0,get:function(){return x.ValueType}});var C=W(194);Object.defineProperty(j,"defaultTextMapGetter",{enumerable:!0,get:function(){return C.defaultTextMapGetter}}),Object.defineProperty(j,"defaultTextMapSetter",{enumerable:!0,get:function(){return C.defaultTextMapSetter}});var N=W(125);Object.defineProperty(j,"ProxyTracer",{enumerable:!0,get:function(){return N.ProxyTracer}});var U=W(846);Object.defineProperty(j,"ProxyTracerProvider",{enumerable:!0,get:function(){return U.ProxyTracerProvider}});var K=W(996);Object.defineProperty(j,"SamplingDecision",{enumerable:!0,get:function(){return K.SamplingDecision}});var Y=W(357);Object.defineProperty(j,"SpanKind",{enumerable:!0,get:function(){return Y.SpanKind}});var ee=W(847);Object.defineProperty(j,"SpanStatusCode",{enumerable:!0,get:function(){return ee.SpanStatusCode}});var fe=W(475);Object.defineProperty(j,"TraceFlags",{enumerable:!0,get:function(){return fe.TraceFlags}});var Se=W(98);Object.defineProperty(j,"createTraceState",{enumerable:!0,get:function(){return Se.createTraceState}});var ze=W(139);Object.defineProperty(j,"isSpanContextValid",{enumerable:!0,get:function(){return ze.isSpanContextValid}}),Object.defineProperty(j,"isValidTraceId",{enumerable:!0,get:function(){return ze.isValidTraceId}}),Object.defineProperty(j,"isValidSpanId",{enumerable:!0,get:function(){return ze.isValidSpanId}});var Ue=W(476);Object.defineProperty(j,"INVALID_SPANID",{enumerable:!0,get:function(){return Ue.INVALID_SPANID}}),Object.defineProperty(j,"INVALID_TRACEID",{enumerable:!0,get:function(){return Ue.INVALID_TRACEID}}),Object.defineProperty(j,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return Ue.INVALID_SPAN_CONTEXT}});let at=W(67);Object.defineProperty(j,"context",{enumerable:!0,get:function(){return at.context}});let vt=W(506);Object.defineProperty(j,"diag",{enumerable:!0,get:function(){return vt.diag}});let jt=W(886);Object.defineProperty(j,"metrics",{enumerable:!0,get:function(){return jt.metrics}});let re=W(939);Object.defineProperty(j,"propagation",{enumerable:!0,get:function(){return re.propagation}});let F=W(845);Object.defineProperty(j,"trace",{enumerable:!0,get:function(){return F.trace}}),j.default={context:at.context,diag:vt.diag,metrics:jt.metrics,propagation:re.propagation,trace:F.trace}})(),Jt.exports=j})()},8819:(Jt,ae,M)=>{(()=>{"use strict";var q={491:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ContextAPI=void 0;let k=S(223),I=S(172),x=S(930),C="context",N=new k.NoopContextManager;class U{constructor(){}static getInstance(){return this._instance||(this._instance=new U),this._instance}setGlobalContextManager(Y){return(0,I.registerGlobal)(C,Y,x.DiagAPI.instance())}active(){return this._getContextManager().active()}with(Y,ee,fe,...Se){return this._getContextManager().with(Y,ee,fe,...Se)}bind(Y,ee){return this._getContextManager().bind(Y,ee)}_getContextManager(){return(0,I.getGlobal)(C)||N}disable(){this._getContextManager().disable(),(0,I.unregisterGlobal)(C,x.DiagAPI.instance())}}y.ContextAPI=U},930:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagAPI=void 0;let k=S(56),I=S(912),x=S(957),C=S(172);class N{constructor(){function K(ee){return function(...fe){let Se=(0,C.getGlobal)("diag");if(Se)return Se[ee](...fe)}}let Y=this;Y.setLogger=(ee,fe={logLevel:x.DiagLogLevel.INFO})=>{var Se,ze,Ue;if(ee===Y){let jt=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return Y.error((Se=jt.stack)!==null&&Se!==void 0?Se:jt.message),!1}typeof fe=="number"&&(fe={logLevel:fe});let at=(0,C.getGlobal)("diag"),vt=(0,I.createLogLevelDiagLogger)((ze=fe.logLevel)!==null&&ze!==void 0?ze:x.DiagLogLevel.INFO,ee);if(at&&!fe.suppressOverrideMessage){let jt=(Ue=Error().stack)!==null&&Ue!==void 0?Ue:"<failed to generate stacktrace>";at.warn(`Current logger will be overwritten from ${jt}`),vt.warn(`Current logger will overwrite one already registered from ${jt}`)}return(0,C.registerGlobal)("diag",vt,Y,!0)},Y.disable=()=>{(0,C.unregisterGlobal)("diag",Y)},Y.createComponentLogger=ee=>new k.DiagComponentLogger(ee),Y.verbose=K("verbose"),Y.debug=K("debug"),Y.info=K("info"),Y.warn=K("warn"),Y.error=K("error")}static instance(){return this._instance||(this._instance=new N),this._instance}}y.DiagAPI=N},653:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.MetricsAPI=void 0;let k=S(660),I=S(172),x=S(930),C="metrics";class N{constructor(){}static getInstance(){return this._instance||(this._instance=new N),this._instance}setGlobalMeterProvider(K){return(0,I.registerGlobal)(C,K,x.DiagAPI.instance())}getMeterProvider(){return(0,I.getGlobal)(C)||k.NOOP_METER_PROVIDER}getMeter(K,Y,ee){return this.getMeterProvider().getMeter(K,Y,ee)}disable(){(0,I.unregisterGlobal)(C,x.DiagAPI.instance())}}y.MetricsAPI=N},181:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PropagationAPI=void 0;let k=S(172),I=S(874),x=S(194),C=S(277),N=S(369),U=S(930),K="propagation",Y=new I.NoopTextMapPropagator;class ee{constructor(){this.createBaggage=N.createBaggage,this.getBaggage=C.getBaggage,this.getActiveBaggage=C.getActiveBaggage,this.setBaggage=C.setBaggage,this.deleteBaggage=C.deleteBaggage}static getInstance(){return this._instance||(this._instance=new ee),this._instance}setGlobalPropagator(Se){return(0,k.registerGlobal)(K,Se,U.DiagAPI.instance())}inject(Se,ze,Ue=x.defaultTextMapSetter){return this._getGlobalPropagator().inject(Se,ze,Ue)}extract(Se,ze,Ue=x.defaultTextMapGetter){return this._getGlobalPropagator().extract(Se,ze,Ue)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,k.unregisterGlobal)(K,U.DiagAPI.instance())}_getGlobalPropagator(){return(0,k.getGlobal)(K)||Y}}y.PropagationAPI=ee},997:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TraceAPI=void 0;let k=S(172),I=S(846),x=S(139),C=S(607),N=S(930),U="trace";class K{constructor(){this._proxyTracerProvider=new I.ProxyTracerProvider,this.wrapSpanContext=x.wrapSpanContext,this.isSpanContextValid=x.isSpanContextValid,this.deleteSpan=C.deleteSpan,this.getSpan=C.getSpan,this.getActiveSpan=C.getActiveSpan,this.getSpanContext=C.getSpanContext,this.setSpan=C.setSpan,this.setSpanContext=C.setSpanContext}static getInstance(){return this._instance||(this._instance=new K),this._instance}setGlobalTracerProvider(ee){let fe=(0,k.registerGlobal)(U,this._proxyTracerProvider,N.DiagAPI.instance());return fe&&this._proxyTracerProvider.setDelegate(ee),fe}getTracerProvider(){return(0,k.getGlobal)(U)||this._proxyTracerProvider}getTracer(ee,fe){return this.getTracerProvider().getTracer(ee,fe)}disable(){(0,k.unregisterGlobal)(U,N.DiagAPI.instance()),this._proxyTracerProvider=new I.ProxyTracerProvider}}y.TraceAPI=K},277:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.deleteBaggage=y.setBaggage=y.getActiveBaggage=y.getBaggage=void 0;let k=S(491),I=(0,S(780).createContextKey)("OpenTelemetry Baggage Key");function x(C){return C.getValue(I)||void 0}y.getBaggage=x,y.getActiveBaggage=function(){return x(k.ContextAPI.getInstance().active())},y.setBaggage=function(C,N){return C.setValue(I,N)},y.deleteBaggage=function(C){return C.deleteValue(I)}},993:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.BaggageImpl=void 0;class S{constructor(I){this._entries=I?new Map(I):new Map}getEntry(I){let x=this._entries.get(I);if(x)return Object.assign({},x)}getAllEntries(){return Array.from(this._entries.entries()).map(([I,x])=>[I,x])}setEntry(I,x){let C=new S(this._entries);return C._entries.set(I,x),C}removeEntry(I){let x=new S(this._entries);return x._entries.delete(I),x}removeEntries(...I){let x=new S(this._entries);for(let C of I)x._entries.delete(C);return x}clear(){return new S}}y.BaggageImpl=S},830:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.baggageEntryMetadataSymbol=void 0,y.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.baggageEntryMetadataFromString=y.createBaggage=void 0;let k=S(930),I=S(993),x=S(830),C=k.DiagAPI.instance();y.createBaggage=function(N={}){return new I.BaggageImpl(new Map(Object.entries(N)))},y.baggageEntryMetadataFromString=function(N){return typeof N!="string"&&(C.error(`Cannot create baggage metadata from unknown type: ${typeof N}`),N=""),{__TYPE__:x.baggageEntryMetadataSymbol,toString:()=>N}}},67:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.context=void 0;let k=S(491);y.context=k.ContextAPI.getInstance()},223:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopContextManager=void 0;let k=S(780);class I{active(){return k.ROOT_CONTEXT}with(C,N,U,...K){return N.call(U,...K)}bind(C,N){return N}enable(){return this}disable(){return this}}y.NoopContextManager=I},780:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ROOT_CONTEXT=y.createContextKey=void 0,y.createContextKey=function(k){return Symbol.for(k)};class S{constructor(I){let x=this;x._currentContext=I?new Map(I):new Map,x.getValue=C=>x._currentContext.get(C),x.setValue=(C,N)=>{let U=new S(x._currentContext);return U._currentContext.set(C,N),U},x.deleteValue=C=>{let N=new S(x._currentContext);return N._currentContext.delete(C),N}}}y.ROOT_CONTEXT=new S},506:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.diag=void 0;let k=S(930);y.diag=k.DiagAPI.instance()},56:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagComponentLogger=void 0;let k=S(172);class I{constructor(N){this._namespace=N.namespace||"DiagComponentLogger"}debug(...N){return x("debug",this._namespace,N)}error(...N){return x("error",this._namespace,N)}info(...N){return x("info",this._namespace,N)}warn(...N){return x("warn",this._namespace,N)}verbose(...N){return x("verbose",this._namespace,N)}}function x(C,N,U){let K=(0,k.getGlobal)("diag");if(K)return U.unshift(N),K[C](...U)}y.DiagComponentLogger=I},972:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagConsoleLogger=void 0;let S=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class k{constructor(){for(let x=0;x<S.length;x++)this[S[x].n]=function(C){return function(...N){if(console){let U=console[C];if(typeof U!="function"&&(U=console.log),typeof U=="function")return U.apply(console,N)}}}(S[x].c)}}y.DiagConsoleLogger=k},912:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.createLogLevelDiagLogger=void 0;let k=S(957);y.createLogLevelDiagLogger=function(I,x){function C(N,U){let K=x[N];return typeof K=="function"&&I>=U?K.bind(x):function(){}}return I<k.DiagLogLevel.NONE?I=k.DiagLogLevel.NONE:I>k.DiagLogLevel.ALL&&(I=k.DiagLogLevel.ALL),x=x||{},{error:C("error",k.DiagLogLevel.ERROR),warn:C("warn",k.DiagLogLevel.WARN),info:C("info",k.DiagLogLevel.INFO),debug:C("debug",k.DiagLogLevel.DEBUG),verbose:C("verbose",k.DiagLogLevel.VERBOSE)}}},957:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DiagLogLevel=void 0,function(S){S[S.NONE=0]="NONE",S[S.ERROR=30]="ERROR",S[S.WARN=50]="WARN",S[S.INFO=60]="INFO",S[S.DEBUG=70]="DEBUG",S[S.VERBOSE=80]="VERBOSE",S[S.ALL=9999]="ALL"}(y.DiagLogLevel||(y.DiagLogLevel={}))},172:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.unregisterGlobal=y.getGlobal=y.registerGlobal=void 0;let k=S(200),I=S(521),x=S(130),C=I.VERSION.split(".")[0],N=Symbol.for(`opentelemetry.js.api.${C}`),U=k._globalThis;y.registerGlobal=function(K,Y,ee,fe=!1){var Se;let ze=U[N]=(Se=U[N])!==null&&Se!==void 0?Se:{version:I.VERSION};if(!fe&&ze[K]){let Ue=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${K}`);return ee.error(Ue.stack||Ue.message),!1}if(ze.version!==I.VERSION){let Ue=Error(`@opentelemetry/api: Registration of version v${ze.version} for ${K} does not match previously registered API v${I.VERSION}`);return ee.error(Ue.stack||Ue.message),!1}return ze[K]=Y,ee.debug(`@opentelemetry/api: Registered a global for ${K} v${I.VERSION}.`),!0},y.getGlobal=function(K){var Y,ee;let fe=(Y=U[N])===null||Y===void 0?void 0:Y.version;if(fe&&(0,x.isCompatible)(fe))return(ee=U[N])===null||ee===void 0?void 0:ee[K]},y.unregisterGlobal=function(K,Y){Y.debug(`@opentelemetry/api: Unregistering a global for ${K} v${I.VERSION}.`);let ee=U[N];ee&&delete ee[K]}},130:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.isCompatible=y._makeCompatibilityCheck=void 0;let k=S(521),I=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function x(C){let N=new Set([C]),U=new Set,K=C.match(I);if(!K)return()=>!1;let Y={major:+K[1],minor:+K[2],patch:+K[3],prerelease:K[4]};if(Y.prerelease!=null)return function(fe){return fe===C};function ee(fe){return U.add(fe),!1}return function(fe){if(N.has(fe))return!0;if(U.has(fe))return!1;let Se=fe.match(I);if(!Se)return ee(fe);let ze={major:+Se[1],minor:+Se[2],patch:+Se[3],prerelease:Se[4]};return ze.prerelease!=null||Y.major!==ze.major?ee(fe):Y.major===0?Y.minor===ze.minor&&Y.patch<=ze.patch?(N.add(fe),!0):ee(fe):Y.minor<=ze.minor?(N.add(fe),!0):ee(fe)}}y._makeCompatibilityCheck=x,y.isCompatible=x(k.VERSION)},886:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.metrics=void 0;let k=S(653);y.metrics=k.MetricsAPI.getInstance()},901:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ValueType=void 0,function(S){S[S.INT=0]="INT",S[S.DOUBLE=1]="DOUBLE"}(y.ValueType||(y.ValueType={}))},102:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.createNoopMeter=y.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=y.NOOP_OBSERVABLE_GAUGE_METRIC=y.NOOP_OBSERVABLE_COUNTER_METRIC=y.NOOP_UP_DOWN_COUNTER_METRIC=y.NOOP_HISTOGRAM_METRIC=y.NOOP_COUNTER_METRIC=y.NOOP_METER=y.NoopObservableUpDownCounterMetric=y.NoopObservableGaugeMetric=y.NoopObservableCounterMetric=y.NoopObservableMetric=y.NoopHistogramMetric=y.NoopUpDownCounterMetric=y.NoopCounterMetric=y.NoopMetric=y.NoopMeter=void 0;class S{constructor(){}createHistogram(fe,Se){return y.NOOP_HISTOGRAM_METRIC}createCounter(fe,Se){return y.NOOP_COUNTER_METRIC}createUpDownCounter(fe,Se){return y.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(fe,Se){return y.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(fe,Se){return y.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(fe,Se){return y.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(fe,Se){}removeBatchObservableCallback(fe){}}y.NoopMeter=S;class k{}y.NoopMetric=k;class I extends k{add(fe,Se){}}y.NoopCounterMetric=I;class x extends k{add(fe,Se){}}y.NoopUpDownCounterMetric=x;class C extends k{record(fe,Se){}}y.NoopHistogramMetric=C;class N{addCallback(fe){}removeCallback(fe){}}y.NoopObservableMetric=N;class U extends N{}y.NoopObservableCounterMetric=U;class K extends N{}y.NoopObservableGaugeMetric=K;class Y extends N{}y.NoopObservableUpDownCounterMetric=Y,y.NOOP_METER=new S,y.NOOP_COUNTER_METRIC=new I,y.NOOP_HISTOGRAM_METRIC=new C,y.NOOP_UP_DOWN_COUNTER_METRIC=new x,y.NOOP_OBSERVABLE_COUNTER_METRIC=new U,y.NOOP_OBSERVABLE_GAUGE_METRIC=new K,y.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new Y,y.createNoopMeter=function(){return y.NOOP_METER}},660:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NOOP_METER_PROVIDER=y.NoopMeterProvider=void 0;let k=S(102);class I{getMeter(C,N,U){return k.NOOP_METER}}y.NoopMeterProvider=I,y.NOOP_METER_PROVIDER=new I},200:function(z,y,S){var k=this&&this.__createBinding||(Object.create?function(x,C,N,U){U===void 0&&(U=N),Object.defineProperty(x,U,{enumerable:!0,get:function(){return C[N]}})}:function(x,C,N,U){U===void 0&&(U=N),x[U]=C[N]}),I=this&&this.__exportStar||function(x,C){for(var N in x)N==="default"||Object.prototype.hasOwnProperty.call(C,N)||k(C,x,N)};Object.defineProperty(y,"__esModule",{value:!0}),I(S(46),y)},651:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y._globalThis=void 0,y._globalThis=typeof hn=="object"?hn:M.g},46:function(z,y,S){var k=this&&this.__createBinding||(Object.create?function(x,C,N,U){U===void 0&&(U=N),Object.defineProperty(x,U,{enumerable:!0,get:function(){return C[N]}})}:function(x,C,N,U){U===void 0&&(U=N),x[U]=C[N]}),I=this&&this.__exportStar||function(x,C){for(var N in x)N==="default"||Object.prototype.hasOwnProperty.call(C,N)||k(C,x,N)};Object.defineProperty(y,"__esModule",{value:!0}),I(S(651),y)},939:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.propagation=void 0;let k=S(181);y.propagation=k.PropagationAPI.getInstance()},874:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopTextMapPropagator=void 0;class S{inject(I,x){}extract(I,x){return I}fields(){return[]}}y.NoopTextMapPropagator=S},194:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.defaultTextMapSetter=y.defaultTextMapGetter=void 0,y.defaultTextMapGetter={get(S,k){if(S!=null)return S[k]},keys:S=>S==null?[]:Object.keys(S)},y.defaultTextMapSetter={set(S,k,I){S!=null&&(S[k]=I)}}},845:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.trace=void 0;let k=S(997);y.trace=k.TraceAPI.getInstance()},403:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NonRecordingSpan=void 0;let k=S(476);class I{constructor(C=k.INVALID_SPAN_CONTEXT){this._spanContext=C}spanContext(){return this._spanContext}setAttribute(C,N){return this}setAttributes(C){return this}addEvent(C,N){return this}setStatus(C){return this}updateName(C){return this}end(C){}isRecording(){return!1}recordException(C,N){}}y.NonRecordingSpan=I},614:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopTracer=void 0;let k=S(491),I=S(607),x=S(403),C=S(139),N=k.ContextAPI.getInstance();class U{startSpan(Y,ee,fe=N.active()){if(ee?.root)return new x.NonRecordingSpan;let Se=fe&&(0,I.getSpanContext)(fe);return typeof Se=="object"&&typeof Se.spanId=="string"&&typeof Se.traceId=="string"&&typeof Se.traceFlags=="number"&&(0,C.isSpanContextValid)(Se)?new x.NonRecordingSpan(Se):new x.NonRecordingSpan}startActiveSpan(Y,ee,fe,Se){let ze,Ue,at;if(arguments.length<2)return;arguments.length==2?at=ee:arguments.length==3?(ze=ee,at=fe):(ze=ee,Ue=fe,at=Se);let vt=Ue??N.active(),jt=this.startSpan(Y,ze,vt),re=(0,I.setSpan)(vt,jt);return N.with(re,at,void 0,jt)}}y.NoopTracer=U},124:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NoopTracerProvider=void 0;let k=S(614);class I{getTracer(C,N,U){return new k.NoopTracer}}y.NoopTracerProvider=I},125:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ProxyTracer=void 0;let k=new(S(614)).NoopTracer;class I{constructor(C,N,U,K){this._provider=C,this.name=N,this.version=U,this.options=K}startSpan(C,N,U){return this._getTracer().startSpan(C,N,U)}startActiveSpan(C,N,U,K){let Y=this._getTracer();return Reflect.apply(Y.startActiveSpan,Y,arguments)}_getTracer(){if(this._delegate)return this._delegate;let C=this._provider.getDelegateTracer(this.name,this.version,this.options);return C?(this._delegate=C,this._delegate):k}}y.ProxyTracer=I},846:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.ProxyTracerProvider=void 0;let k=S(125),I=new(S(124)).NoopTracerProvider;class x{getTracer(N,U,K){var Y;return(Y=this.getDelegateTracer(N,U,K))!==null&&Y!==void 0?Y:new k.ProxyTracer(this,N,U,K)}getDelegate(){var N;return(N=this._delegate)!==null&&N!==void 0?N:I}setDelegate(N){this._delegate=N}getDelegateTracer(N,U,K){var Y;return(Y=this._delegate)===null||Y===void 0?void 0:Y.getTracer(N,U,K)}}y.ProxyTracerProvider=x},996:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SamplingDecision=void 0,function(S){S[S.NOT_RECORD=0]="NOT_RECORD",S[S.RECORD=1]="RECORD",S[S.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(y.SamplingDecision||(y.SamplingDecision={}))},607:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.getSpanContext=y.setSpanContext=y.deleteSpan=y.setSpan=y.getActiveSpan=y.getSpan=void 0;let k=S(780),I=S(403),x=S(491),C=(0,k.createContextKey)("OpenTelemetry Context Key SPAN");function N(K){return K.getValue(C)||void 0}function U(K,Y){return K.setValue(C,Y)}y.getSpan=N,y.getActiveSpan=function(){return N(x.ContextAPI.getInstance().active())},y.setSpan=U,y.deleteSpan=function(K){return K.deleteValue(C)},y.setSpanContext=function(K,Y){return U(K,new I.NonRecordingSpan(Y))},y.getSpanContext=function(K){var Y;return(Y=N(K))===null||Y===void 0?void 0:Y.spanContext()}},325:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TraceStateImpl=void 0;let k=S(564);class I{constructor(C){this._internalState=new Map,C&&this._parse(C)}set(C,N){let U=this._clone();return U._internalState.has(C)&&U._internalState.delete(C),U._internalState.set(C,N),U}unset(C){let N=this._clone();return N._internalState.delete(C),N}get(C){return this._internalState.get(C)}serialize(){return this._keys().reduce((C,N)=>(C.push(N+"="+this.get(N)),C),[]).join(",")}_parse(C){!(C.length>512)&&(this._internalState=C.split(",").reverse().reduce((N,U)=>{let K=U.trim(),Y=K.indexOf("=");if(Y!==-1){let ee=K.slice(0,Y),fe=K.slice(Y+1,U.length);(0,k.validateKey)(ee)&&(0,k.validateValue)(fe)&&N.set(ee,fe)}return N},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let C=new I;return C._internalState=new Map(this._internalState),C}}y.TraceStateImpl=I},564:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.validateValue=y.validateKey=void 0;let S="[_0-9a-z-*/]",k=`[a-z]${S}{0,255}`,I=`[a-z0-9]${S}{0,240}@[a-z]${S}{0,13}`,x=RegExp(`^(?:${k}|${I})$`),C=/^[ -~]{0,255}[!-~]$/,N=/,|=/;y.validateKey=function(U){return x.test(U)},y.validateValue=function(U){return C.test(U)&&!N.test(U)}},98:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.createTraceState=void 0;let k=S(325);y.createTraceState=function(I){return new k.TraceStateImpl(I)}},476:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.INVALID_SPAN_CONTEXT=y.INVALID_TRACEID=y.INVALID_SPANID=void 0;let k=S(475);y.INVALID_SPANID="0000000000000000",y.INVALID_TRACEID="00000000000000000000000000000000",y.INVALID_SPAN_CONTEXT={traceId:y.INVALID_TRACEID,spanId:y.INVALID_SPANID,traceFlags:k.TraceFlags.NONE}},357:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SpanKind=void 0,function(S){S[S.INTERNAL=0]="INTERNAL",S[S.SERVER=1]="SERVER",S[S.CLIENT=2]="CLIENT",S[S.PRODUCER=3]="PRODUCER",S[S.CONSUMER=4]="CONSUMER"}(y.SpanKind||(y.SpanKind={}))},139:(z,y,S)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.wrapSpanContext=y.isSpanContextValid=y.isValidSpanId=y.isValidTraceId=void 0;let k=S(476),I=S(403),x=/^([0-9a-f]{32})$/i,C=/^[0-9a-f]{16}$/i;function N(K){return x.test(K)&&K!==k.INVALID_TRACEID}function U(K){return C.test(K)&&K!==k.INVALID_SPANID}y.isValidTraceId=N,y.isValidSpanId=U,y.isSpanContextValid=function(K){return N(K.traceId)&&U(K.spanId)},y.wrapSpanContext=function(K){return new I.NonRecordingSpan(K)}},847:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SpanStatusCode=void 0,function(S){S[S.UNSET=0]="UNSET",S[S.OK=1]="OK",S[S.ERROR=2]="ERROR"}(y.SpanStatusCode||(y.SpanStatusCode={}))},475:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TraceFlags=void 0,function(S){S[S.NONE=0]="NONE",S[S.SAMPLED=1]="SAMPLED"}(y.TraceFlags||(y.TraceFlags={}))},521:(z,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.VERSION=void 0,y.VERSION="1.6.0"}},Z={};function W(z){var y=Z[z];if(y!==void 0)return y.exports;var S=Z[z]={exports:{}},k=!0;try{q[z].call(S.exports,S,S.exports,W),k=!1}finally{k&&delete Z[z]}return S.exports}W.ab="//";var j={};(()=>{Object.defineProperty(j,"__esModule",{value:!0}),j.trace=j.propagation=j.metrics=j.diag=j.context=j.INVALID_SPAN_CONTEXT=j.INVALID_TRACEID=j.INVALID_SPANID=j.isValidSpanId=j.isValidTraceId=j.isSpanContextValid=j.createTraceState=j.TraceFlags=j.SpanStatusCode=j.SpanKind=j.SamplingDecision=j.ProxyTracerProvider=j.ProxyTracer=j.defaultTextMapSetter=j.defaultTextMapGetter=j.ValueType=j.createNoopMeter=j.DiagLogLevel=j.DiagConsoleLogger=j.ROOT_CONTEXT=j.createContextKey=j.baggageEntryMetadataFromString=void 0;var z=W(369);Object.defineProperty(j,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return z.baggageEntryMetadataFromString}});var y=W(780);Object.defineProperty(j,"createContextKey",{enumerable:!0,get:function(){return y.createContextKey}}),Object.defineProperty(j,"ROOT_CONTEXT",{enumerable:!0,get:function(){return y.ROOT_CONTEXT}});var S=W(972);Object.defineProperty(j,"DiagConsoleLogger",{enumerable:!0,get:function(){return S.DiagConsoleLogger}});var k=W(957);Object.defineProperty(j,"DiagLogLevel",{enumerable:!0,get:function(){return k.DiagLogLevel}});var I=W(102);Object.defineProperty(j,"createNoopMeter",{enumerable:!0,get:function(){return I.createNoopMeter}});var x=W(901);Object.defineProperty(j,"ValueType",{enumerable:!0,get:function(){return x.ValueType}});var C=W(194);Object.defineProperty(j,"defaultTextMapGetter",{enumerable:!0,get:function(){return C.defaultTextMapGetter}}),Object.defineProperty(j,"defaultTextMapSetter",{enumerable:!0,get:function(){return C.defaultTextMapSetter}});var N=W(125);Object.defineProperty(j,"ProxyTracer",{enumerable:!0,get:function(){return N.ProxyTracer}});var U=W(846);Object.defineProperty(j,"ProxyTracerProvider",{enumerable:!0,get:function(){return U.ProxyTracerProvider}});var K=W(996);Object.defineProperty(j,"SamplingDecision",{enumerable:!0,get:function(){return K.SamplingDecision}});var Y=W(357);Object.defineProperty(j,"SpanKind",{enumerable:!0,get:function(){return Y.SpanKind}});var ee=W(847);Object.defineProperty(j,"SpanStatusCode",{enumerable:!0,get:function(){return ee.SpanStatusCode}});var fe=W(475);Object.defineProperty(j,"TraceFlags",{enumerable:!0,get:function(){return fe.TraceFlags}});var Se=W(98);Object.defineProperty(j,"createTraceState",{enumerable:!0,get:function(){return Se.createTraceState}});var ze=W(139);Object.defineProperty(j,"isSpanContextValid",{enumerable:!0,get:function(){return ze.isSpanContextValid}}),Object.defineProperty(j,"isValidTraceId",{enumerable:!0,get:function(){return ze.isValidTraceId}}),Object.defineProperty(j,"isValidSpanId",{enumerable:!0,get:function(){return ze.isValidSpanId}});var Ue=W(476);Object.defineProperty(j,"INVALID_SPANID",{enumerable:!0,get:function(){return Ue.INVALID_SPANID}}),Object.defineProperty(j,"INVALID_TRACEID",{enumerable:!0,get:function(){return Ue.INVALID_TRACEID}}),Object.defineProperty(j,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return Ue.INVALID_SPAN_CONTEXT}});let at=W(67);Object.defineProperty(j,"context",{enumerable:!0,get:function(){return at.context}});let vt=W(506);Object.defineProperty(j,"diag",{enumerable:!0,get:function(){return vt.diag}});let jt=W(886);Object.defineProperty(j,"metrics",{enumerable:!0,get:function(){return jt.metrics}});let re=W(939);Object.defineProperty(j,"propagation",{enumerable:!0,get:function(){return re.propagation}});let F=W(845);Object.defineProperty(j,"trace",{enumerable:!0,get:function(){return F.trace}}),j.default={context:at.context,diag:vt.diag,metrics:jt.metrics,propagation:re.propagation,trace:F.trace}})(),Jt.exports=j})()},6500:(Jt,ae)=>{"use strict";var M={usingClientEntryPoint:!1,Events:null,Dispatcher:{current:null}};function q(W,j){return W==="font"?"":typeof j=="string"?j==="use-credentials"?j:"":void 0}var Z=M.Dispatcher;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,ae.preconnect=function(W,j){var z=Z.current;z&&typeof W=="string"&&(j=j?typeof(j=j.crossOrigin)=="string"?j==="use-credentials"?j:"":void 0:null,z.preconnect(W,j))},ae.prefetchDNS=function(W){var j=Z.current;j&&typeof W=="string"&&j.prefetchDNS(W)},ae.preinit=function(W,j){var z=Z.current;if(z&&typeof W=="string"&&j&&typeof j.as=="string"){var y=j.as,S=q(y,j.crossOrigin),k=typeof j.integrity=="string"?j.integrity:void 0,I=typeof j.fetchPriority=="string"?j.fetchPriority:void 0;y==="style"?z.preinitStyle(W,typeof j.precedence=="string"?j.precedence:void 0,{crossOrigin:S,integrity:k,fetchPriority:I}):y==="script"&&z.preinitScript(W,{crossOrigin:S,integrity:k,fetchPriority:I,nonce:typeof j.nonce=="string"?j.nonce:void 0})}},ae.preinitModule=function(W,j){var z=Z.current;if(z&&typeof W=="string")if(typeof j=="object"&&j!==null){if(j.as==null||j.as==="script"){var y=q(j.as,j.crossOrigin);z.preinitModuleScript(W,{crossOrigin:y,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0})}}else j==null&&z.preinitModuleScript(W)},ae.preload=function(W,j){var z=Z.current;if(z&&typeof W=="string"&&typeof j=="object"&&j!==null&&typeof j.as=="string"){var y=j.as,S=q(y,j.crossOrigin);z.preload(W,y,{crossOrigin:S,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0,type:typeof j.type=="string"?j.type:void 0,fetchPriority:typeof j.fetchPriority=="string"?j.fetchPriority:void 0,referrerPolicy:typeof j.referrerPolicy=="string"?j.referrerPolicy:void 0,imageSrcSet:typeof j.imageSrcSet=="string"?j.imageSrcSet:void 0,imageSizes:typeof j.imageSizes=="string"?j.imageSizes:void 0})}},ae.preloadModule=function(W,j){var z=Z.current;if(z&&typeof W=="string")if(j){var y=q(j.as,j.crossOrigin);z.preloadModule(W,{as:typeof j.as=="string"&&j.as!=="script"?j.as:void 0,crossOrigin:y,integrity:typeof j.integrity=="string"?j.integrity:void 0})}else z.preloadModule(W)}},9642:(Jt,ae)=>{"use strict";var M={usingClientEntryPoint:!1,Events:null,Dispatcher:{current:null}};function q(W,j){return W==="font"?"":typeof j=="string"?j==="use-credentials"?j:"":void 0}var Z=M.Dispatcher;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,ae.preconnect=function(W,j){var z=Z.current;z&&typeof W=="string"&&(j=j?typeof(j=j.crossOrigin)=="string"?j==="use-credentials"?j:"":void 0:null,z.preconnect(W,j))},ae.prefetchDNS=function(W){var j=Z.current;j&&typeof W=="string"&&j.prefetchDNS(W)},ae.preinit=function(W,j){var z=Z.current;if(z&&typeof W=="string"&&j&&typeof j.as=="string"){var y=j.as,S=q(y,j.crossOrigin),k=typeof j.integrity=="string"?j.integrity:void 0,I=typeof j.fetchPriority=="string"?j.fetchPriority:void 0;y==="style"?z.preinitStyle(W,typeof j.precedence=="string"?j.precedence:void 0,{crossOrigin:S,integrity:k,fetchPriority:I}):y==="script"&&z.preinitScript(W,{crossOrigin:S,integrity:k,fetchPriority:I,nonce:typeof j.nonce=="string"?j.nonce:void 0})}},ae.preinitModule=function(W,j){var z=Z.current;if(z&&typeof W=="string")if(typeof j=="object"&&j!==null){if(j.as==null||j.as==="script"){var y=q(j.as,j.crossOrigin);z.preinitModuleScript(W,{crossOrigin:y,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0})}}else j==null&&z.preinitModuleScript(W)},ae.preload=function(W,j){var z=Z.current;if(z&&typeof W=="string"&&typeof j=="object"&&j!==null&&typeof j.as=="string"){var y=j.as,S=q(y,j.crossOrigin);z.preload(W,y,{crossOrigin:S,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0,type:typeof j.type=="string"?j.type:void 0,fetchPriority:typeof j.fetchPriority=="string"?j.fetchPriority:void 0,referrerPolicy:typeof j.referrerPolicy=="string"?j.referrerPolicy:void 0,imageSrcSet:typeof j.imageSrcSet=="string"?j.imageSrcSet:void 0,imageSizes:typeof j.imageSizes=="string"?j.imageSizes:void 0})}},ae.preloadModule=function(W,j){var z=Z.current;if(z&&typeof W=="string")if(j){var y=q(j.as,j.crossOrigin);z.preloadModule(W,{as:typeof j.as=="string"&&j.as!=="script"?j.as:void 0,crossOrigin:y,integrity:typeof j.integrity=="string"?j.integrity:void 0})}else z.preloadModule(W)}},4075:(Jt,ae,M)=>{"use strict";Jt.exports=M(6500)},5105:(Jt,ae,M)=>{"use strict";Jt.exports=M(9642)},4927:(Jt,ae,M)=>{"use strict";var q=M(4075);q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher,Symbol.for("react.element"),Symbol.for("react.lazy");var Z=Symbol.iterator,W=Array.isArray,j=Object.getPrototypeOf,z=Object.prototype,y=new WeakMap,S=new WeakMap;function k(Se,ze){var Ue=y.get(this);if(!Ue)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(Ue.id!==Se)return!1;var at=Ue.bound;if(at===null)return ze===0;switch(at.status){case"fulfilled":return at.value.length===ze;case"pending":throw at;case"rejected":throw at.reason;default:throw typeof at.status!="string"&&(at.status="pending",at.then(function(vt){at.status="fulfilled",at.value=vt},function(vt){at.status="rejected",at.reason=vt})),at}}var I=Function.prototype.bind,x=Array.prototype.slice;function C(){var Se=I.apply(this,arguments),ze=y.get(this);if(ze){var Ue=x.call(arguments,1),at=null;at=ze.bound!==null?Promise.resolve(ze.bound).then(function(vt){return vt.concat(Ue)}):Promise.resolve(Ue),Object.defineProperties(Se,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:k},bind:{value:C}}),y.set(Se,{id:ze.id,bound:at})}return Se}function N(Se,ze,Ue,at){this.status=Se,this.value=ze,this.reason=Ue,this._response=at}function U(Se,ze){for(var Ue=0;Ue<Se.length;Ue++)(0,Se[Ue])(ze)}N.prototype=Object.create(Promise.prototype),N.prototype.then=function(Se,ze){switch(this.status){case"resolved_model":ee(this);break;case"resolved_module":fe(this)}switch(this.status){case"fulfilled":Se(this.value);break;case"pending":case"blocked":case"cyclic":Se&&(this.value===null&&(this.value=[]),this.value.push(Se)),ze&&(this.reason===null&&(this.reason=[]),this.reason.push(ze));break;default:ze(this.reason)}};var K=null,Y=null;function ee(Se){var ze=K,Ue=Y;K=Se,Y=null;var at=Se.value;Se.status="cyclic",Se.value=null,Se.reason=null;try{var vt=JSON.parse(at,Se._response._fromJSON);if(Y!==null&&0<Y.deps)Y.value=vt,Se.status="blocked",Se.value=null,Se.reason=null;else{var jt=Se.value;Se.status="fulfilled",Se.value=vt,jt!==null&&U(jt,vt)}}catch(re){Se.status="rejected",Se.reason=re}finally{K=ze,Y=Ue}}function fe(Se){try{var ze=Se.value,Ue=hn.__next_require__(ze[0]);if(ze.length===4&&typeof Ue.then=="function")if(Ue.status==="fulfilled")Ue=Ue.value;else throw Ue.reason;var at=ze[2]==="*"?Ue:ze[2]===""?Ue.__esModule?Ue.default:Ue:Ue[ze[2]];Se.status="fulfilled",Se.value=at}catch(vt){Se.status="rejected",Se.reason=vt}}},960:(Jt,ae,M)=>{"use strict";var q=M(3796),Z=M(4075),W=null,j=0;function z(st,Ht){if(Ht.byteLength!==0)if(2048<Ht.byteLength)0<j&&(st.enqueue(new Uint8Array(W.buffer,0,j)),W=new Uint8Array(2048),j=0),st.enqueue(Ht);else{var zt=W.length-j;zt<Ht.byteLength&&(zt===0?st.enqueue(W):(W.set(Ht.subarray(0,zt),j),st.enqueue(W),Ht=Ht.subarray(zt)),W=new Uint8Array(2048),j=0),W.set(Ht,j),j+=Ht.byteLength}return!0}var y=new TextEncoder,S=Symbol.for("react.client.reference"),k=Symbol.for("react.server.reference");function I(st,Ht,zt){return Object.defineProperties(st,{$$typeof:{value:S},$$id:{value:Ht},$$async:{value:zt}})}var x=Function.prototype.bind,C=Array.prototype.slice;function N(){var st=x.apply(this,arguments);if(this.$$typeof===k){var Ht=C.call(arguments,1);return Object.defineProperties(st,{$$typeof:{value:k},$$id:{value:this.$$id},$$bound:{value:this.$$bound?this.$$bound.concat(Ht):Ht},bind:{value:N}})}return st}var U=Promise.prototype,K={get:function(st,Ht){switch(Ht){case"$$typeof":return st.$$typeof;case"$$id":return st.$$id;case"$$async":return st.$$async;case"name":return st.name;case"displayName":case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"Provider":throw Error("Cannot render a Client Context Provider on the Server. Instead, you can export a Client Component wrapper that itself renders a Client Context Provider.")}throw Error("Cannot access "+String(st.name)+"."+String(Ht)+" on the server. You cannot dot into a client module from a server component. You can only pass the imported name through.")},set:function(){throw Error("Cannot assign to a client module from a server module.")}};function Y(st,Ht){switch(Ht){case"$$typeof":return st.$$typeof;case"$$id":return st.$$id;case"$$async":return st.$$async;case"name":return st.name;case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"__esModule":var zt=st.$$id;return st.default=I(function(){throw Error("Attempted to call the default export of "+zt+" from the server but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},st.$$id+"#",st.$$async),!0;case"then":if(st.then)return st.then;if(st.$$async)return;var Yt=I({},st.$$id,!0),tr=new Proxy(Yt,ee);return st.status="fulfilled",st.value=tr,st.then=I(function(En){return Promise.resolve(En(tr))},st.$$id+"#then",!1)}if(typeof Ht=="symbol")throw Error("Cannot read Symbol exports. Only named exports are supported on a client module imported on the server.");return(Yt=st[Ht])||(Object.defineProperty(Yt=I(function(){throw Error("Attempted to call "+String(Ht)+"() from the server but "+String(Ht)+" is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},st.$$id+"#"+Ht,st.$$async),"name",{value:Ht}),Yt=st[Ht]=new Proxy(Yt,K)),Yt}var ee={get:function(st,Ht){return Y(st,Ht)},getOwnPropertyDescriptor:function(st,Ht){var zt=Object.getOwnPropertyDescriptor(st,Ht);return zt||(zt={value:Y(st,Ht),writable:!1,configurable:!1,enumerable:!1},Object.defineProperty(st,Ht,zt)),zt},getPrototypeOf:function(){return U},set:function(){throw Error("Cannot assign to a client module from a server module.")}};Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher;var fe=typeof AsyncLocalStorage=="function",Se=fe?new AsyncLocalStorage:null;typeof async_hooks=="object"&&async_hooks.createHook,typeof async_hooks=="object"&&async_hooks.executionAsyncId;var ze=Symbol.for("react.element"),Ue=Symbol.for("react.fragment"),at=Symbol.for("react.context"),vt=Symbol.for("react.forward_ref"),jt=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),se=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.postpone");var me=Symbol.iterator,ce=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`");function Ke(){}var Je=null;function He(){if(Je===null)throw Error("Expected a suspended thenable. This is a bug in React. Please file an issue.");var st=Je;return Je=null,st}var _e=null,Fe=0,pt=null;function lr(){var st=pt||[];return pt=null,st}var Ne={useMemo:function(st){return st()},useCallback:function(st){return st},useDebugValue:function(){},useDeferredValue:tt,useTransition:tt,readContext:Ce,useContext:Ce,useReducer:tt,useRef:tt,useState:tt,useInsertionEffect:tt,useLayoutEffect:tt,useImperativeHandle:tt,useEffect:tt,useId:function(){if(_e===null)throw Error("useId can only be used while React is rendering");var st=_e.identifierCount++;return":"+_e.identifierPrefix+"S"+st.toString(32)+":"},useSyncExternalStore:tt,useCacheRefresh:function(){return we},useMemoCache:function(st){for(var Ht=Array(st),zt=0;zt<st;zt++)Ht[zt]=se;return Ht},use:function(st){if(st!==null&&typeof st=="object"||typeof st=="function"){if(typeof st.then=="function"){var Ht=Fe;return Fe+=1,pt===null&&(pt=[]),function(zt,Yt,tr){switch((tr=zt[tr])===void 0?zt.push(Yt):tr!==Yt&&(Yt.then(Ke,Ke),Yt=tr),Yt.status){case"fulfilled":return Yt.value;case"rejected":throw Yt.reason;default:if(typeof Yt.status!="string")switch((zt=Yt).status="pending",zt.then(function(En){if(Yt.status==="pending"){var Kr=Yt;Kr.status="fulfilled",Kr.value=En}},function(En){if(Yt.status==="pending"){var Kr=Yt;Kr.status="rejected",Kr.reason=En}}),Yt.status){case"fulfilled":return Yt.value;case"rejected":throw Yt.reason}throw Je=Yt,ce}}(pt,st,Ht)}st.$$typeof===at&&Ce()}throw st.$$typeof===S?st.value!=null&&st.value.$$typeof===at?Error("Cannot read a Client Context from a Server Component."):Error("Cannot use() an already resolved Client Reference."):Error("An unsupported type was passed to use(): "+String(st))}};function tt(){throw Error("This Hook is not supported in Server Components.")}function we(){throw Error("Refreshing the cache is not supported in Server Components.")}function Ce(){throw Error("Cannot read a Client Context from a Server Component.")}var We=Array.isArray,ve=Object.getPrototypeOf;function Ve(st){return Object.prototype.toString.call(st).replace(/^\[object (.*)\]$/,function(Ht,zt){return zt})}function gt(st){switch(typeof st){case"string":return JSON.stringify(10>=st.length?st:st.slice(0,10)+"...");case"object":return We(st)?"[...]":st!==null&&st.$$typeof===mt?"client":(st=Ve(st))==="Object"?"{...}":st;case"function":return st.$$typeof===mt?"client":(st=st.displayName||st.name)?"function "+st:"function";default:return String(st)}}var mt=Symbol.for("react.client.reference");function lt(st,Ht){var zt=Ve(st);if(zt!=="Object"&&zt!=="Array")return zt;zt=-1;var Yt=0;if(We(st)){for(var tr="[",En=0;En<st.length;En++){0<En&&(tr+=", ");var Kr=st[En];Kr=typeof Kr=="object"&&Kr!==null?lt(Kr):gt(Kr),""+En===Ht?(zt=tr.length,Yt=Kr.length,tr+=Kr):tr=10>Kr.length&&40>tr.length+Kr.length?tr+Kr:tr+"..."}tr+="]"}else if(st.$$typeof===ze)tr="<"+function In(qn){if(typeof qn=="string")return qn;switch(qn){case jt:return"Suspense";case re:return"SuspenseList"}if(typeof qn=="object")switch(qn.$$typeof){case vt:return In(qn.render);case F:return In(qn.type);case Q:var Ln=qn._payload;qn=qn._init;try{return In(qn(Ln))}catch{}}return""}(st.type)+"/>";else{if(st.$$typeof===mt)return"client";for(Kr=0,tr="{",En=Object.keys(st);Kr<En.length;Kr++){0<Kr&&(tr+=", ");var li=En[Kr],pn=JSON.stringify(li);tr+=('"'+li+'"'===pn?li:pn)+": ",pn=typeof(pn=st[li])=="object"&&pn!==null?lt(pn):gt(pn),li===Ht?(zt=tr.length,Yt=pn.length,tr+=pn):tr=10>pn.length&&40>tr.length+pn.length?tr+pn:tr+"..."}tr+="}"}return Ht===void 0?tr:-1<zt&&0<Yt?`
  `+tr+`
  `+(st=" ".repeat(zt)+"^".repeat(Yt)):`
  `+tr}var et=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bt=q.__SECRET_SERVER_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;if(!bt)throw Error('The "react" package in this environment is not configured correctly. The "react-server" condition must be enabled in any environment that runs React Server Components.');var Ct=Object.prototype,Ee=JSON.stringify,Qe=(bt.ReactCurrentCache,et.ReactCurrentDispatcher),yt=null;function Rt(st){if(st.status==="fulfilled")return st.value;throw st.status==="rejected"?st.reason:st}function Et(st,Ht,zt,Yt,tr){var En=Ht.thenableState;if(Ht.thenableState=null,Fe=0,pt=En,typeof(Yt=Yt(tr,void 0))=="object"&&Yt!==null&&typeof Yt.then=="function"){if((tr=Yt).status==="fulfilled")return tr.value;Yt=function(Kr){switch(Kr.status){case"fulfilled":case"rejected":break;default:typeof Kr.status!="string"&&(Kr.status="pending",Kr.then(function(li){Kr.status==="pending"&&(Kr.status="fulfilled",Kr.value=li)},function(li){Kr.status==="pending"&&(Kr.status="rejected",Kr.reason=li)}))}return{$$typeof:Q,_payload:Kr,_init:Rt}}(Yt)}return tr=Ht.keyPath,En=Ht.implicitSlot,zt!==null?Ht.keyPath=tr===null?zt:tr+","+zt:tr===null&&(Ht.implicitSlot=!0),st=Tn(st,Ht,on,"",Yt),Ht.keyPath=tr,Ht.implicitSlot=En,st}function rr(st,Ht){var zt=st.pingedTasks;zt.push(Ht),zt.length===1&&(st.flushScheduled=st.destination!==null,setTimeout(function(){return function(Yt){var tr=Qe.current;Qe.current=Ne;var En=yt;_e=yt=Yt;try{var Kr=Yt.pingedTasks;Yt.pingedTasks=[];for(var li=0;li<Kr.length;li++)cn(Yt,Kr[li]);Yt.destination!==null&&On(Yt,Yt.destination)}catch(pn){tn(Yt,pn),function(In,qn){var Ln;In.destination!==null?(In.status=2,typeof(Ln=In.destination).error=="function"?Ln.error(qn):Ln.close()):(In.status=1,In.fatalError=qn)}(Yt,pn)}finally{Qe.current=tr,_e=null,yt=En}}(st)},0))}function an(st,Ht,zt,Yt,tr){st.pendingChunks++;var En=st.nextChunkId++;typeof Ht=="object"&&Ht!==null&&st.writtenObjects.set(Ht,En);var Kr={id:En,status:0,model:Ht,keyPath:zt,implicitSlot:Yt,ping:function(){return rr(st,Kr)},toJSON:function(li,pn){var In=Kr.keyPath,qn=Kr.implicitSlot;try{var Ln=Tn(st,Kr,this,li,pn)}catch(Ha){if(li=Ha===ce?He():Ha,pn=typeof(pn=Kr.model)=="object"&&pn!==null&&(pn.$$typeof===ze||pn.$$typeof===Q),typeof li=="object"&&li!==null&&typeof li.then=="function"){var Ei=(Ln=an(st,Kr.model,Kr.keyPath,Kr.implicitSlot,st.abortableTasks)).ping;li.then(Ei,Ei),Ln.thenableState=lr(),Kr.keyPath=In,Kr.implicitSlot=qn,Ln=pn?"$L"+Ln.id.toString(16):Hr(Ln.id)}else if(Kr.keyPath=In,Kr.implicitSlot=qn,pn)st.pendingChunks++,In=st.nextChunkId++,qn=tn(st,li),rn(st,In,qn),Ln="$L"+In.toString(16);else throw li}return Ln},thenableState:null};return tr.add(Kr),Kr}function Hr(st){return"$"+st.toString(16)}function gn(st,Ht,zt,Yt){var tr=Yt.$$async?Yt.$$id+"#async":Yt.$$id,En=st.writtenClientReferences,Kr=En.get(tr);if(Kr!==void 0)return Ht[0]===ze&&zt==="1"?"$L"+Kr.toString(16):Hr(Kr);try{var li=st.bundlerConfig,pn=Yt.$$id;Kr="";var In=li[pn];if(In)Kr=In.name;else{var qn=pn.lastIndexOf("#");if(qn!==-1&&(Kr=pn.slice(qn+1),In=li[pn.slice(0,qn)]),!In)throw Error('Could not find the module "'+pn+'" in the React Client Manifest. This is probably a bug in the React Server Components bundler.')}var Ln=Yt.$$async===!0?[In.id,In.chunks,Kr,1]:[In.id,In.chunks,Kr];st.pendingChunks++;var Ei=st.nextChunkId++,Ha=Ee(Ln),fi=Ei.toString(16)+":I"+Ha+`
`,Us=y.encode(fi);return st.completedImportChunks.push(Us),En.set(tr,Ei),Ht[0]===ze&&zt==="1"?"$L"+Ei.toString(16):Hr(Ei)}catch(ds){return st.pendingChunks++,Ht=st.nextChunkId++,zt=tn(st,ds),rn(st,Ht,zt),Hr(Ht)}}function Or(st,Ht){return Ht=an(st,Ht,null,!1,st.abortableTasks),cn(st,Ht),Ht.id}var wn=!1;function Tn(st,Ht,zt,Yt,tr){if(Ht.model=tr,tr===ze)return"$";if(tr===null)return null;if(typeof tr=="object"){switch(tr.$$typeof){case ze:if((Yt=(zt=st.writtenObjects).get(tr))!==void 0){if(wn!==tr)return Hr(Yt===-1?st=Or(st,tr):Yt);wn=null}else zt.set(tr,-1);return function pn(In,qn,Ln,Ei,Ha,fi){if(Ha!=null)throw Error("Refs cannot be used in Server Components, nor passed to Client Components.");if(typeof Ln=="function")return Ln.$$typeof===S?[ze,Ln,Ei,fi]:Et(In,qn,Ei,Ln,fi);if(typeof Ln=="string")return[ze,Ln,Ei,fi];if(typeof Ln=="symbol")return Ln===Ue&&Ei===null?(Ei=qn.implicitSlot,qn.keyPath===null&&(qn.implicitSlot=!0),In=Tn(In,qn,on,"",fi.children),qn.implicitSlot=Ei,In):[ze,Ln,Ei,fi];if(Ln!=null&&typeof Ln=="object"){if(Ln.$$typeof===S)return[ze,Ln,Ei,fi];switch(Ln.$$typeof){case Q:return pn(In,qn,Ln=(0,Ln._init)(Ln._payload),Ei,Ha,fi);case vt:return Et(In,qn,Ei,Ln.render,fi);case F:return pn(In,qn,Ln.type,Ei,Ha,fi)}}throw Error("Unsupported Server Component type: "+gt(Ln))}(st,Ht,tr.type,tr.key,tr.ref,tr.props);case Q:return Ht.thenableState=null,Tn(st,Ht,on,"",tr=(zt=tr._init)(tr._payload))}if(tr.$$typeof===S)return gn(st,zt,Yt,tr);if(Yt=(zt=st.writtenObjects).get(tr),typeof tr.then=="function"){if(Yt!==void 0){if(wn!==tr)return"$@"+Yt.toString(16);wn=null}return st=function(pn,In,qn){var Ln=an(pn,null,In.keyPath,In.implicitSlot,pn.abortableTasks);switch(qn.status){case"fulfilled":return Ln.model=qn.value,rr(pn,Ln),Ln.id;case"rejected":return In=tn(pn,qn.reason),rn(pn,Ln.id,In),Ln.id;default:typeof qn.status!="string"&&(qn.status="pending",qn.then(function(Ei){qn.status==="pending"&&(qn.status="fulfilled",qn.value=Ei)},function(Ei){qn.status==="pending"&&(qn.status="rejected",qn.reason=Ei)}))}return qn.then(function(Ei){Ln.model=Ei,rr(pn,Ln)},function(Ei){Ln.status=4,Ei=tn(pn,Ei),rn(pn,Ln.id,Ei),pn.abortableTasks.delete(Ln),pn.destination!==null&&On(pn,pn.destination)}),Ln.id}(st,Ht,tr),zt.set(tr,st),"$@"+st.toString(16)}if(Yt!==void 0){if(wn!==tr)return Hr(Yt===-1?st=Or(st,tr):Yt);wn=null}else zt.set(tr,-1);if(We(tr))return tr;if(tr instanceof Map){for(Ht=0,tr=Array.from(tr);Ht<tr.length;Ht++)typeof(zt=tr[Ht][0])=="object"&&zt!==null&&(Yt=st.writtenObjects).get(zt)===void 0&&Yt.set(zt,-1);return"$Q"+Or(st,tr).toString(16)}if(tr instanceof Set){for(Ht=0,tr=Array.from(tr);Ht<tr.length;Ht++)typeof(zt=tr[Ht])=="object"&&zt!==null&&(Yt=st.writtenObjects).get(zt)===void 0&&Yt.set(zt,-1);return"$W"+Or(st,tr).toString(16)}if(st=tr===null||typeof tr!="object"?null:typeof(st=me&&tr[me]||tr["@@iterator"])=="function"?st:null)return st=Array.from(tr);if((st=ve(tr))!==Ct&&(st===null||ve(st)!==null))throw Error("Only plain objects, and a few built-ins, can be passed to Client Components from Server Components. Classes or null prototypes are not supported.");return tr}if(typeof tr=="string")return tr[tr.length-1]==="Z"&&zt[Yt]instanceof Date?"$D"+tr:1024<=tr.length?(st.pendingChunks+=2,Ht=st.nextChunkId++,zt=(tr=y.encode(tr)).byteLength,zt=Ht.toString(16)+":T"+zt.toString(16)+",",zt=y.encode(zt),st.completedRegularChunks.push(zt,tr),Hr(Ht)):st=tr[0]==="$"?"$"+tr:tr;if(typeof tr=="boolean")return tr;if(typeof tr=="number")return Number.isFinite(tr)?tr===0&&-1/0==1/tr?"$-0":tr:1/0===tr?"$Infinity":-1/0===tr?"$-Infinity":"$NaN";if(tr===void 0)return"$undefined";if(typeof tr=="function"){if(tr.$$typeof===S)return gn(st,zt,Yt,tr);if(tr.$$typeof===k)return(zt=(Ht=st.writtenServerReferences).get(tr))!==void 0?st="$F"+zt.toString(16):(zt=tr.$$bound,st=Or(st,zt={id:tr.$$id,bound:zt?Promise.resolve(zt):null}),Ht.set(tr,st),st="$F"+st.toString(16)),st;throw/^on[A-Z]/.test(Yt)?Error("Event handlers cannot be passed to Client Component props."+lt(zt,Yt)+`
If you need interactivity, consider converting part of this to a Client Component.`):Error('Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with "use server". Or maybe you meant to call this function rather than return it.'+lt(zt,Yt))}if(typeof tr=="symbol"){var En,Kr,li=(Ht=st.writtenSymbols).get(tr);if(li!==void 0)return Hr(li);if(Symbol.for(li=tr.description)!==tr)throw Error("Only global symbols received from Symbol.for(...) can be passed to Client Components. The symbol Symbol.for("+tr.description+") cannot be found among global symbols."+lt(zt,Yt));return st.pendingChunks++,zt=st.nextChunkId++,En=st,Kr=zt,En=Ee("$S"+li),Kr=Kr.toString(16)+":"+En+`
`,Yt=y.encode(Kr),st.completedImportChunks.push(Yt),Ht.set(tr,zt),Hr(zt)}if(typeof tr=="bigint")return"$n"+tr.toString(10);throw Error("Type "+typeof tr+" is not supported in Client Component props."+lt(zt,Yt))}function tn(st,Ht){var zt=yt;yt=null;try{var Yt=st.onError,tr=fe?Se.run(void 0,Yt,Ht):Yt(Ht)}finally{yt=zt}if(tr!=null&&typeof tr!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof tr+'" instead');return tr||""}function rn(st,Ht,zt){zt={digest:zt},Ht=Ht.toString(16)+":E"+Ee(zt)+`
`,Ht=y.encode(Ht),st.completedErrorChunks.push(Ht)}var on={};function cn(st,Ht){if(Ht.status===0)try{wn=Ht.model;var zt=Tn(st,Ht,on,"",Ht.model);wn=zt,Ht.keyPath=null,Ht.implicitSlot=!1;var Yt=typeof zt=="object"&&zt!==null?Ee(zt,Ht.toJSON):Ee(zt),tr=Ht.id.toString(16)+":"+Yt+`
`,En=y.encode(tr);st.completedRegularChunks.push(En),st.abortableTasks.delete(Ht),Ht.status=1}catch(In){var Kr=In===ce?He():In;if(typeof Kr=="object"&&Kr!==null&&typeof Kr.then=="function"){var li=Ht.ping;Kr.then(li,li),Ht.thenableState=lr()}else{st.abortableTasks.delete(Ht),Ht.status=4;var pn=tn(st,Kr);rn(st,Ht.id,pn)}}finally{}}function On(st,Ht){W=new Uint8Array(2048),j=0;try{for(var zt=st.completedImportChunks,Yt=0;Yt<zt.length;Yt++)st.pendingChunks--,z(Ht,zt[Yt]);zt.splice(0,Yt);var tr=st.completedHintChunks;for(Yt=0;Yt<tr.length;Yt++)z(Ht,tr[Yt]);tr.splice(0,Yt);var En=st.completedRegularChunks;for(Yt=0;Yt<En.length;Yt++)st.pendingChunks--,z(Ht,En[Yt]);En.splice(0,Yt);var Kr=st.completedErrorChunks;for(Yt=0;Yt<Kr.length;Yt++)st.pendingChunks--,z(Ht,Kr[Yt]);Kr.splice(0,Yt)}finally{st.flushScheduled=!1,W&&0<j&&(Ht.enqueue(new Uint8Array(W.buffer,0,j)),W=null,j=0)}st.pendingChunks===0&&Ht.close()}var Pt=new Map;function _n(st){var Ht=hn.__next_require__(st);return typeof Ht.then!="function"||Ht.status==="fulfilled"?null:(Ht.then(function(zt){Ht.status="fulfilled",Ht.value=zt},function(zt){Ht.status="rejected",Ht.reason=zt}),Ht)}function si(){}function zi(st,Ht,zt,Yt){this.status=st,this.value=Ht,this.reason=zt,this._response=Yt}function Hs(st,Ht){for(var zt=0;zt<st.length;zt++)(0,st[zt])(Ht)}zi.prototype=Object.create(Promise.prototype),zi.prototype.then=function(st,Ht){switch(this.status==="resolved_model"&&kn(this),this.status){case"fulfilled":st(this.value);break;case"pending":case"blocked":st&&(this.value===null&&(this.value=[]),this.value.push(st)),Ht&&(this.reason===null&&(this.reason=[]),this.reason.push(Ht));break;default:Ht(this.reason)}};var es=null,Ri=null;function kn(st){var Ht=es,zt=Ri;es=st,Ri=null;try{var Yt=JSON.parse(st.value,st._response._fromJSON);Ri!==null&&0<Ri.deps?(Ri.value=Yt,st.status="blocked",st.value=null,st.reason=null):(st.status="fulfilled",st.value=Yt)}catch(tr){st.status="rejected",st.reason=tr}finally{es=Ht,Ri=zt}}ae.registerServerReference=function(st,Ht,zt){return Object.defineProperties(st,{$$typeof:{value:k},$$id:{value:zt===null?Ht:Ht+"#"+zt,configurable:!0},$$bound:{value:null,configurable:!0},bind:{value:N,configurable:!0}})}},1651:(Jt,ae,M)=>{"use strict";var q=M(7908),Z=M(5105),W=null,j=0;function z(Te,dt){if(dt.byteLength!==0)if(2048<dt.byteLength)0<j&&(Te.enqueue(new Uint8Array(W.buffer,0,j)),W=new Uint8Array(2048),j=0),Te.enqueue(dt);else{var At=W.length-j;At<dt.byteLength&&(At===0?Te.enqueue(W):(W.set(dt.subarray(0,At),j),Te.enqueue(W),dt=dt.subarray(At)),W=new Uint8Array(2048),j=0),W.set(dt,j),j+=dt.byteLength}return!0}var y=new TextEncoder;function S(Te,dt){typeof Te.error=="function"?Te.error(dt):Te.close()}var k=Symbol.for("react.client.reference"),I=Symbol.for("react.server.reference");function x(Te,dt,At){return Object.defineProperties(Te,{$$typeof:{value:k},$$id:{value:dt},$$async:{value:At}})}var C=Function.prototype.bind,N=Array.prototype.slice;function U(){var Te=C.apply(this,arguments);if(this.$$typeof===I){var dt=N.call(arguments,1);return Object.defineProperties(Te,{$$typeof:{value:I},$$id:{value:this.$$id},$$bound:{value:this.$$bound?this.$$bound.concat(dt):dt},bind:{value:U}})}return Te}var K=Promise.prototype,Y={get:function(Te,dt){switch(dt){case"$$typeof":return Te.$$typeof;case"$$id":return Te.$$id;case"$$async":return Te.$$async;case"name":return Te.name;case"displayName":case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"Provider":throw Error("Cannot render a Client Context Provider on the Server. Instead, you can export a Client Component wrapper that itself renders a Client Context Provider.")}throw Error("Cannot access "+String(Te.name)+"."+String(dt)+" on the server. You cannot dot into a client module from a server component. You can only pass the imported name through.")},set:function(){throw Error("Cannot assign to a client module from a server module.")}};function ee(Te,dt){switch(dt){case"$$typeof":return Te.$$typeof;case"$$id":return Te.$$id;case"$$async":return Te.$$async;case"name":return Te.name;case"defaultProps":case"toJSON":return;case Symbol.toPrimitive:return Object.prototype[Symbol.toPrimitive];case Symbol.toStringTag:return Object.prototype[Symbol.toStringTag];case"__esModule":var At=Te.$$id;return Te.default=x(function(){throw Error("Attempted to call the default export of "+At+" from the server but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},Te.$$id+"#",Te.$$async),!0;case"then":if(Te.then)return Te.then;if(Te.$$async)return;var $t=x({},Te.$$id,!0),Ut=new Proxy($t,fe);return Te.status="fulfilled",Te.value=Ut,Te.then=x(function(Jr){return Promise.resolve(Jr(Ut))},Te.$$id+"#then",!1)}if(typeof dt=="symbol")throw Error("Cannot read Symbol exports. Only named exports are supported on a client module imported on the server.");return($t=Te[dt])||(Object.defineProperty($t=x(function(){throw Error("Attempted to call "+String(dt)+"() from the server but "+String(dt)+" is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},Te.$$id+"#"+dt,Te.$$async),"name",{value:dt}),$t=Te[dt]=new Proxy($t,Y)),$t}var fe={get:function(Te,dt){return ee(Te,dt)},getOwnPropertyDescriptor:function(Te,dt){var At=Object.getOwnPropertyDescriptor(Te,dt);return At||(At={value:ee(Te,dt),writable:!1,configurable:!1,enumerable:!1},Object.defineProperty(Te,dt,At)),At},getPrototypeOf:function(){return K},set:function(){throw Error("Cannot assign to a client module from a server module.")}},Se={prefetchDNS:function(Te){if(typeof Te=="string"&&Te){var dt=rn();if(dt){var At=dt.hints,$t="D|"+Te;At.has($t)||(At.add($t),on(dt,"D",Te))}}},preconnect:function(Te,dt){if(typeof Te=="string"){var At=rn();if(At){var $t=At.hints,Ut="C|"+(dt??"null")+"|"+Te;$t.has(Ut)||($t.add(Ut),typeof dt=="string"?on(At,"C",[Te,dt]):on(At,"C",Te))}}},preload:function(Te,dt,At){if(typeof Te=="string"){var $t=rn();if($t){var Ut=$t.hints,Jr="L";if(dt==="image"&&At){var Sr=At.imageSrcSet,Qn=At.imageSizes,zn="";typeof Sr=="string"&&Sr!==""?(zn+="["+Sr+"]",typeof Qn=="string"&&(zn+="["+Qn+"]")):zn+="[][]"+Te,Jr+="[image]"+zn}else Jr+="["+dt+"]"+Te;Ut.has(Jr)||(Ut.add(Jr),(At=ze(At))?on($t,"L",[Te,dt,At]):on($t,"L",[Te,dt]))}}},preloadModule:function(Te,dt){if(typeof Te=="string"){var At=rn();if(At){var $t=At.hints,Ut="m|"+Te;if(!$t.has(Ut))return $t.add(Ut),(dt=ze(dt))?on(At,"m",[Te,dt]):on(At,"m",Te)}}},preinitStyle:function(Te,dt,At){if(typeof Te=="string"){var $t=rn();if($t){var Ut=$t.hints,Jr="S|"+Te;if(!Ut.has(Jr))return Ut.add(Jr),(At=ze(At))?on($t,"S",[Te,typeof dt=="string"?dt:0,At]):typeof dt=="string"?on($t,"S",[Te,dt]):on($t,"S",Te)}}},preinitScript:function(Te,dt){if(typeof Te=="string"){var At=rn();if(At){var $t=At.hints,Ut="X|"+Te;if(!$t.has(Ut))return $t.add(Ut),(dt=ze(dt))?on(At,"X",[Te,dt]):on(At,"X",Te)}}},preinitModuleScript:function(Te,dt){if(typeof Te=="string"){var At=rn();if(At){var $t=At.hints,Ut="M|"+Te;if(!$t.has(Ut))return $t.add(Ut),(dt=ze(dt))?on(At,"M",[Te,dt]):on(At,"M",Te)}}}};function ze(Te){if(Te==null)return null;var dt,At=!1,$t={};for(dt in Te)Te[dt]!=null&&(At=!0,$t[dt]=Te[dt]);return At?$t:null}var Ue=Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher,at=typeof AsyncLocalStorage=="function",vt=at?new AsyncLocalStorage:null;typeof async_hooks=="object"&&async_hooks.createHook,typeof async_hooks=="object"&&async_hooks.executionAsyncId;var jt=Symbol.for("react.element"),re=Symbol.for("react.fragment"),F=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),Je=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.postpone");var He=Symbol.iterator,_e=Error("Suspense Exception: This is not a real error! It's an implementation detail of `use` to interrupt the current render. You must either rethrow it immediately, or move the `use` call outside of the `try/catch` block. Capturing without rethrowing will lead to unexpected behavior.\n\nTo handle async errors, wrap your component in an error boundary, or call the promise's `.catch` method and pass the result to `use`");function Fe(){}var pt=null;function lr(){if(pt===null)throw Error("Expected a suspended thenable. This is a bug in React. Please file an issue.");var Te=pt;return pt=null,Te}var Ne=null,tt=0,we=null;function Ce(){var Te=we||[];return we=null,Te}var We={useMemo:function(Te){return Te()},useCallback:function(Te){return Te},useDebugValue:function(){},useDeferredValue:ve,useTransition:ve,readContext:gt,useContext:gt,useReducer:ve,useRef:ve,useState:ve,useInsertionEffect:ve,useLayoutEffect:ve,useImperativeHandle:ve,useEffect:ve,useId:function(){if(Ne===null)throw Error("useId can only be used while React is rendering");var Te=Ne.identifierCount++;return":"+Ne.identifierPrefix+"S"+Te.toString(32)+":"},useSyncExternalStore:ve,useCacheRefresh:function(){return Ve},useMemoCache:function(Te){for(var dt=Array(Te),At=0;At<Te;At++)dt[At]=Je;return dt},use:function(Te){if(Te!==null&&typeof Te=="object"||typeof Te=="function"){if(typeof Te.then=="function"){var dt=tt;return tt+=1,we===null&&(we=[]),function(At,$t,Ut){switch((Ut=At[Ut])===void 0?At.push($t):Ut!==$t&&($t.then(Fe,Fe),$t=Ut),$t.status){case"fulfilled":return $t.value;case"rejected":throw $t.reason;default:if(typeof $t.status!="string")switch((At=$t).status="pending",At.then(function(Jr){if($t.status==="pending"){var Sr=$t;Sr.status="fulfilled",Sr.value=Jr}},function(Jr){if($t.status==="pending"){var Sr=$t;Sr.status="rejected",Sr.reason=Jr}}),$t.status){case"fulfilled":return $t.value;case"rejected":throw $t.reason}throw pt=$t,_e}}(we,Te,dt)}Te.$$typeof===F&&gt()}throw Te.$$typeof===k?Te.value!=null&&Te.value.$$typeof===F?Error("Cannot read a Client Context from a Server Component."):Error("Cannot use() an already resolved Client Reference."):Error("An unsupported type was passed to use(): "+String(Te))}};function ve(){throw Error("This Hook is not supported in Server Components.")}function Ve(){throw Error("Refreshing the cache is not supported in Server Components.")}function gt(){throw Error("Cannot read a Client Context from a Server Component.")}function mt(){return new AbortController().signal}function lt(){var Te=rn();return Te?Te.cache:new Map}var et={getCacheSignal:function(){var Te=lt(),dt=Te.get(mt);return dt===void 0&&(dt=mt(),Te.set(mt,dt)),dt},getCacheForType:function(Te){var dt=lt(),At=dt.get(Te);return At===void 0&&(At=Te(),dt.set(Te,At)),At}},bt=Array.isArray,Ct=Object.getPrototypeOf;function Ee(Te){return Object.prototype.toString.call(Te).replace(/^\[object (.*)\]$/,function(dt,At){return At})}function Qe(Te){switch(typeof Te){case"string":return JSON.stringify(10>=Te.length?Te:Te.slice(0,10)+"...");case"object":return bt(Te)?"[...]":Te!==null&&Te.$$typeof===yt?"client":(Te=Ee(Te))==="Object"?"{...}":Te;case"function":return Te.$$typeof===yt?"client":(Te=Te.displayName||Te.name)?"function "+Te:"function";default:return String(Te)}}var yt=Symbol.for("react.client.reference");function Rt(Te,dt){var At=Ee(Te);if(At!=="Object"&&At!=="Array")return At;At=-1;var $t=0;if(bt(Te)){for(var Ut="[",Jr=0;Jr<Te.length;Jr++){0<Jr&&(Ut+=", ");var Sr=Te[Jr];Sr=typeof Sr=="object"&&Sr!==null?Rt(Sr):Qe(Sr),""+Jr===dt?(At=Ut.length,$t=Sr.length,Ut+=Sr):Ut=10>Sr.length&&40>Ut.length+Sr.length?Ut+Sr:Ut+"..."}Ut+="]"}else if(Te.$$typeof===jt)Ut="<"+function Qr(yr){if(typeof yr=="string")return yr;switch(yr){case se:return"Suspense";case me:return"SuspenseList"}if(typeof yr=="object")switch(yr.$$typeof){case Q:return Qr(yr.render);case ce:return Qr(yr.type);case Ke:var pi=yr._payload;yr=yr._init;try{return Qr(yr(pi))}catch{}}return""}(Te.type)+"/>";else{if(Te.$$typeof===yt)return"client";for(Sr=0,Ut="{",Jr=Object.keys(Te);Sr<Jr.length;Sr++){0<Sr&&(Ut+=", ");var Qn=Jr[Sr],zn=JSON.stringify(Qn);Ut+=('"'+Qn+'"'===zn?Qn:zn)+": ",zn=typeof(zn=Te[Qn])=="object"&&zn!==null?Rt(zn):Qe(zn),Qn===dt?(At=Ut.length,$t=zn.length,Ut+=zn):Ut=10>zn.length&&40>Ut.length+zn.length?Ut+zn:Ut+"..."}Ut+="}"}return dt===void 0?Ut:-1<At&&0<$t?`
  `+Ut+`
  `+(Te=" ".repeat(At)+"^".repeat($t)):`
  `+Ut}var Et=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rr=q.__SECRET_SERVER_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;if(!rr)throw Error('The "react" package in this environment is not configured correctly. The "react-server" condition must be enabled in any environment that runs React Server Components.');var an=Object.prototype,Hr=JSON.stringify,gn=rr.ReactCurrentCache,Or=Et.ReactCurrentDispatcher;function wn(Te){console.error(Te)}function Tn(){}var tn=null;function rn(){if(tn)return tn;if(at){var Te=vt.getStore();if(Te)return Te}return null}function on(Te,dt,At){At=Hr(At),dt="H"+dt,dt=(Te.nextChunkId++).toString(16)+":"+dt,At=y.encode(dt+At+`
`),Te.completedHintChunks.push(At),function($t){if($t.flushScheduled===!1&&$t.pingedTasks.length===0&&$t.destination!==null){var Ut=$t.destination;$t.flushScheduled=!0,setTimeout(function(){return Kr($t,Ut)},0)}}(Te)}function cn(Te){if(Te.status==="fulfilled")return Te.value;throw Te.status==="rejected"?Te.reason:Te}function On(Te,dt,At,$t,Ut){var Jr=dt.thenableState;if(dt.thenableState=null,tt=0,we=Jr,typeof($t=$t(Ut,void 0))=="object"&&$t!==null&&typeof $t.then=="function"){if((Ut=$t).status==="fulfilled")return Ut.value;$t=function(Sr){switch(Sr.status){case"fulfilled":case"rejected":break;default:typeof Sr.status!="string"&&(Sr.status="pending",Sr.then(function(Qn){Sr.status==="pending"&&(Sr.status="fulfilled",Sr.value=Qn)},function(Qn){Sr.status==="pending"&&(Sr.status="rejected",Sr.reason=Qn)}))}return{$$typeof:Ke,_payload:Sr,_init:cn}}($t)}return Ut=dt.keyPath,Jr=dt.implicitSlot,At!==null?dt.keyPath=Ut===null?At:Ut+","+At:Ut===null&&(dt.implicitSlot=!0),Te=kn(Te,dt,Yt,"",$t),dt.keyPath=Ut,dt.implicitSlot=Jr,Te}function Pt(Te,dt){var At=Te.pingedTasks;At.push(dt),At.length===1&&(Te.flushScheduled=Te.destination!==null,setTimeout(function(){return En(Te)},0))}function _n(Te,dt,At,$t,Ut){Te.pendingChunks++;var Jr=Te.nextChunkId++;typeof dt=="object"&&dt!==null&&Te.writtenObjects.set(dt,Jr);var Sr={id:Jr,status:0,model:dt,keyPath:At,implicitSlot:$t,ping:function(){return Pt(Te,Sr)},toJSON:function(Qn,zn){var Qr=Sr.keyPath,yr=Sr.implicitSlot;try{var pi=kn(Te,Sr,this,Qn,zn)}catch($a){if(Qn=$a===_e?lr():$a,zn=typeof(zn=Sr.model)=="object"&&zn!==null&&(zn.$$typeof===jt||zn.$$typeof===Ke),typeof Qn=="object"&&Qn!==null&&typeof Qn.then=="function"){var wi=(pi=_n(Te,Sr.model,Sr.keyPath,Sr.implicitSlot,Te.abortableTasks)).ping;Qn.then(wi,wi),pi.thenableState=Ce(),Sr.keyPath=Qr,Sr.implicitSlot=yr,pi=zn?"$L"+pi.id.toString(16):si(pi.id)}else if(Sr.keyPath=Qr,Sr.implicitSlot=yr,zn)Te.pendingChunks++,Qr=Te.nextChunkId++,yr=st(Te,Qn),zt(Te,Qr,yr),pi="$L"+Qr.toString(16);else throw Qn}return pi},thenableState:null};return Ut.add(Sr),Sr}function si(Te){return"$"+Te.toString(16)}function zi(Te,dt,At){return Te=Hr(At),dt=dt.toString(16)+":"+Te+`
`,y.encode(dt)}function Hs(Te,dt,At,$t){var Ut=$t.$$async?$t.$$id+"#async":$t.$$id,Jr=Te.writtenClientReferences,Sr=Jr.get(Ut);if(Sr!==void 0)return dt[0]===jt&&At==="1"?"$L"+Sr.toString(16):si(Sr);try{var Qn=Te.bundlerConfig,zn=$t.$$id;Sr="";var Qr=Qn[zn];if(Qr)Sr=Qr.name;else{var yr=zn.lastIndexOf("#");if(yr!==-1&&(Sr=zn.slice(yr+1),Qr=Qn[zn.slice(0,yr)]),!Qr)throw Error('Could not find the module "'+zn+'" in the React Client Manifest. This is probably a bug in the React Server Components bundler.')}var pi=$t.$$async===!0?[Qr.id,Qr.chunks,Sr,1]:[Qr.id,Qr.chunks,Sr];Te.pendingChunks++;var wi=Te.nextChunkId++,$a=Hr(pi),Lr=wi.toString(16)+":I"+$a+`
`,Br=y.encode(Lr);return Te.completedImportChunks.push(Br),Jr.set(Ut,wi),dt[0]===jt&&At==="1"?"$L"+wi.toString(16):si(wi)}catch(Nn){return Te.pendingChunks++,dt=Te.nextChunkId++,At=st(Te,Nn),zt(Te,dt,At),si(dt)}}function es(Te,dt){return dt=_n(Te,dt,null,!1,Te.abortableTasks),tr(Te,dt),dt.id}var Ri=!1;function kn(Te,dt,At,$t,Ut){if(dt.model=Ut,Ut===jt)return"$";if(Ut===null)return null;if(typeof Ut=="object"){switch(Ut.$$typeof){case jt:if(($t=(At=Te.writtenObjects).get(Ut))!==void 0){if(Ri!==Ut)return si($t===-1?Te=es(Te,Ut):$t);Ri=null}else At.set(Ut,-1);return function Sr(Qn,zn,Qr,yr,pi,wi){if(pi!=null)throw Error("Refs cannot be used in Server Components, nor passed to Client Components.");if(typeof Qr=="function")return Qr.$$typeof===k?[jt,Qr,yr,wi]:On(Qn,zn,yr,Qr,wi);if(typeof Qr=="string")return[jt,Qr,yr,wi];if(typeof Qr=="symbol")return Qr===re&&yr===null?(yr=zn.implicitSlot,zn.keyPath===null&&(zn.implicitSlot=!0),Qn=kn(Qn,zn,Yt,"",wi.children),zn.implicitSlot=yr,Qn):[jt,Qr,yr,wi];if(Qr!=null&&typeof Qr=="object"){if(Qr.$$typeof===k)return[jt,Qr,yr,wi];switch(Qr.$$typeof){case Ke:return Sr(Qn,zn,Qr=(0,Qr._init)(Qr._payload),yr,pi,wi);case Q:return On(Qn,zn,yr,Qr.render,wi);case ce:return Sr(Qn,zn,Qr.type,yr,pi,wi)}}throw Error("Unsupported Server Component type: "+Qe(Qr))}(Te,dt,Ut.type,Ut.key,Ut.ref,Ut.props);case Ke:return dt.thenableState=null,kn(Te,dt,Yt,"",Ut=(At=Ut._init)(Ut._payload))}if(Ut.$$typeof===k)return Hs(Te,At,$t,Ut);if($t=(At=Te.writtenObjects).get(Ut),typeof Ut.then=="function"){if($t!==void 0){if(Ri!==Ut)return"$@"+$t.toString(16);Ri=null}return Te=function(Sr,Qn,zn){var Qr=_n(Sr,null,Qn.keyPath,Qn.implicitSlot,Sr.abortableTasks);switch(zn.status){case"fulfilled":return Qr.model=zn.value,Pt(Sr,Qr),Qr.id;case"rejected":return Qn=st(Sr,zn.reason),zt(Sr,Qr.id,Qn),Qr.id;default:typeof zn.status!="string"&&(zn.status="pending",zn.then(function(yr){zn.status==="pending"&&(zn.status="fulfilled",zn.value=yr)},function(yr){zn.status==="pending"&&(zn.status="rejected",zn.reason=yr)}))}return zn.then(function(yr){Qr.model=yr,Pt(Sr,Qr)},function(yr){Qr.status=4,yr=st(Sr,yr),zt(Sr,Qr.id,yr),Sr.abortableTasks.delete(Qr),Sr.destination!==null&&Kr(Sr,Sr.destination)}),Qr.id}(Te,dt,Ut),At.set(Ut,Te),"$@"+Te.toString(16)}if($t!==void 0){if(Ri!==Ut)return si($t===-1?Te=es(Te,Ut):$t);Ri=null}else At.set(Ut,-1);if(bt(Ut))return Ut;if(Ut instanceof Map){for(dt=0,Ut=Array.from(Ut);dt<Ut.length;dt++)typeof(At=Ut[dt][0])=="object"&&At!==null&&($t=Te.writtenObjects).get(At)===void 0&&$t.set(At,-1);return"$Q"+es(Te,Ut).toString(16)}if(Ut instanceof Set){for(dt=0,Ut=Array.from(Ut);dt<Ut.length;dt++)typeof(At=Ut[dt])=="object"&&At!==null&&($t=Te.writtenObjects).get(At)===void 0&&$t.set(At,-1);return"$W"+es(Te,Ut).toString(16)}if(Te=Ut===null||typeof Ut!="object"?null:typeof(Te=He&&Ut[He]||Ut["@@iterator"])=="function"?Te:null)return Te=Array.from(Ut);if((Te=Ct(Ut))!==an&&(Te===null||Ct(Te)!==null))throw Error("Only plain objects, and a few built-ins, can be passed to Client Components from Server Components. Classes or null prototypes are not supported.");return Ut}if(typeof Ut=="string")return Ut[Ut.length-1]==="Z"&&At[$t]instanceof Date?"$D"+Ut:1024<=Ut.length?(Te.pendingChunks+=2,dt=Te.nextChunkId++,At=(Ut=y.encode(Ut)).byteLength,At=dt.toString(16)+":T"+At.toString(16)+",",At=y.encode(At),Te.completedRegularChunks.push(At,Ut),si(dt)):Te=Ut[0]==="$"?"$"+Ut:Ut;if(typeof Ut=="boolean")return Ut;if(typeof Ut=="number")return Number.isFinite(Ut)?Ut===0&&-1/0==1/Ut?"$-0":Ut:1/0===Ut?"$Infinity":-1/0===Ut?"$-Infinity":"$NaN";if(Ut===void 0)return"$undefined";if(typeof Ut=="function"){if(Ut.$$typeof===k)return Hs(Te,At,$t,Ut);if(Ut.$$typeof===I)return(At=(dt=Te.writtenServerReferences).get(Ut))!==void 0?Te="$F"+At.toString(16):(At=Ut.$$bound,Te=es(Te,At={id:Ut.$$id,bound:At?Promise.resolve(At):null}),dt.set(Ut,Te),Te="$F"+Te.toString(16)),Te;throw/^on[A-Z]/.test($t)?Error("Event handlers cannot be passed to Client Component props."+Rt(At,$t)+`
If you need interactivity, consider converting part of this to a Client Component.`):Error('Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with "use server". Or maybe you meant to call this function rather than return it.'+Rt(At,$t))}if(typeof Ut=="symbol"){var Jr=(dt=Te.writtenSymbols).get(Ut);if(Jr!==void 0)return si(Jr);if(Symbol.for(Jr=Ut.description)!==Ut)throw Error("Only global symbols received from Symbol.for(...) can be passed to Client Components. The symbol Symbol.for("+Ut.description+") cannot be found among global symbols."+Rt(At,$t));return Te.pendingChunks++,At=Te.nextChunkId++,$t=zi(Te,At,"$S"+Jr),Te.completedImportChunks.push($t),dt.set(Ut,At),si(At)}if(typeof Ut=="bigint")return"$n"+Ut.toString(10);throw Error("Type "+typeof Ut+" is not supported in Client Component props."+Rt(At,$t))}function st(Te,dt){var At=tn;tn=null;try{var $t=Te.onError,Ut=at?vt.run(void 0,$t,dt):$t(dt)}finally{tn=At}if(Ut!=null&&typeof Ut!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof Ut+'" instead');return Ut||""}function Ht(Te,dt){Te.destination!==null?(Te.status=2,S(Te.destination,dt)):(Te.status=1,Te.fatalError=dt)}function zt(Te,dt,At){At={digest:At},dt=dt.toString(16)+":E"+Hr(At)+`
`,dt=y.encode(dt),Te.completedErrorChunks.push(dt)}var Yt={};function tr(Te,dt){if(dt.status===0)try{Ri=dt.model;var At=kn(Te,dt,Yt,"",dt.model);Ri=At,dt.keyPath=null,dt.implicitSlot=!1;var $t=typeof At=="object"&&At!==null?Hr(At,dt.toJSON):Hr(At),Ut=dt.id.toString(16)+":"+$t+`
`,Jr=y.encode(Ut);Te.completedRegularChunks.push(Jr),Te.abortableTasks.delete(dt),dt.status=1}catch(Qr){var Sr=Qr===_e?lr():Qr;if(typeof Sr=="object"&&Sr!==null&&typeof Sr.then=="function"){var Qn=dt.ping;Sr.then(Qn,Qn),dt.thenableState=Ce()}else{Te.abortableTasks.delete(dt),dt.status=4;var zn=st(Te,Sr);zt(Te,dt.id,zn)}}finally{}}function En(Te){var dt=Or.current;Or.current=We;var At=tn;Ne=tn=Te;try{var $t=Te.pingedTasks;Te.pingedTasks=[];for(var Ut=0;Ut<$t.length;Ut++)tr(Te,$t[Ut]);Te.destination!==null&&Kr(Te,Te.destination)}catch(Jr){st(Te,Jr),Ht(Te,Jr)}finally{Or.current=dt,Ne=null,tn=At}}function Kr(Te,dt){W=new Uint8Array(2048),j=0;try{for(var At=Te.completedImportChunks,$t=0;$t<At.length;$t++)Te.pendingChunks--,z(dt,At[$t]);At.splice(0,$t);var Ut=Te.completedHintChunks;for($t=0;$t<Ut.length;$t++)z(dt,Ut[$t]);Ut.splice(0,$t);var Jr=Te.completedRegularChunks;for($t=0;$t<Jr.length;$t++)Te.pendingChunks--,z(dt,Jr[$t]);Jr.splice(0,$t);var Sr=Te.completedErrorChunks;for($t=0;$t<Sr.length;$t++)Te.pendingChunks--,z(dt,Sr[$t]);Sr.splice(0,$t)}finally{Te.flushScheduled=!1,W&&0<j&&(dt.enqueue(new Uint8Array(W.buffer,0,j)),W=null,j=0)}Te.pendingChunks===0&&dt.close()}function li(Te,dt){try{var At=Te.abortableTasks;if(0<At.size){Te.pendingChunks++;var $t=Te.nextChunkId++,Ut=dt===void 0?Error("The render was aborted by the server without a reason."):dt,Jr=st(Te,Ut);zt(Te,$t,Jr,Ut),At.forEach(function(Sr){Sr.status=3;var Qn=si($t);Sr=zi(Te,Sr.id,Qn),Te.completedErrorChunks.push(Sr)}),At.clear()}Te.destination!==null&&Kr(Te,Te.destination)}catch(Sr){st(Te,Sr),Ht(Te,Sr)}}function pn(Te,dt){var At="",$t=Te[dt];if($t)At=$t.name;else{var Ut=dt.lastIndexOf("#");if(Ut!==-1&&(At=dt.slice(Ut+1),$t=Te[dt.slice(0,Ut)]),!$t)throw Error('Could not find the module "'+dt+'" in the React Server Manifest. This is probably a bug in the React Server Components bundler.')}return[$t.id,$t.chunks,At]}var In=new Map;function qn(Te){var dt=hn.__next_require__(Te);return typeof dt.then!="function"||dt.status==="fulfilled"?null:(dt.then(function(At){dt.status="fulfilled",dt.value=At},function(At){dt.status="rejected",dt.reason=At}),dt)}function Ln(){}function Ei(Te){for(var dt=Te[1],At=[],$t=0;$t<dt.length;){var Ut=dt[$t++];dt[$t++];var Jr=In.get(Ut);if(Jr===void 0){Jr=M.e(Ut),At.push(Jr);var Sr=In.set.bind(In,Ut,null);Jr.then(Sr,Ln),In.set(Ut,Jr)}else Jr!==null&&At.push(Jr)}return Te.length===4?At.length===0?qn(Te[0]):Promise.all(At).then(function(){return qn(Te[0])}):0<At.length?Promise.all(At):null}function Ha(Te){var dt=hn.__next_require__(Te[0]);if(Te.length===4&&typeof dt.then=="function")if(dt.status==="fulfilled")dt=dt.value;else throw dt.reason;return Te[2]==="*"?dt:Te[2]===""?dt.__esModule?dt.default:dt:dt[Te[2]]}function fi(Te,dt,At,$t){this.status=Te,this.value=dt,this.reason=At,this._response=$t}function Us(Te,dt){for(var At=0;At<Te.length;At++)(0,Te[At])(dt)}function ds(Te,dt){if(Te.status==="pending"||Te.status==="blocked"){var At=Te.reason;Te.status="rejected",Te.reason=dt,At!==null&&Us(At,dt)}}fi.prototype=Object.create(Promise.prototype),fi.prototype.then=function(Te,dt){switch(this.status==="resolved_model"&&$s(this),this.status){case"fulfilled":Te(this.value);break;case"pending":case"blocked":Te&&(this.value===null&&(this.value=[]),this.value.push(Te)),dt&&(this.reason===null&&(this.reason=[]),this.reason.push(dt));break;default:dt(this.reason)}};var ui=null,Ki=null;function $s(Te){var dt=ui,At=Ki;ui=Te,Ki=null;try{var $t=JSON.parse(Te.value,Te._response._fromJSON);Ki!==null&&0<Ki.deps?(Ki.value=$t,Te.status="blocked",Te.value=null,Te.reason=null):(Te.status="fulfilled",Te.value=$t)}catch(Ut){Te.status="rejected",Te.reason=Ut}finally{ui=dt,Ki=At}}function Is(Te,dt){var At=Te._chunks,$t=At.get(dt);return $t||($t=($t=Te._formData.get(Te._prefix+dt))!=null?new fi("resolved_model",$t,null,Te):Te._closed?new fi("rejected",null,Te._closedReason,Te):new fi("pending",null,null,Te),At.set(dt,$t)),$t}function wa(Te,dt,At){if(Ki){var $t=Ki;$t.deps++}else $t=Ki={deps:1,value:null};return function(Ut){dt[At]=Ut,$t.deps--,$t.deps===0&&Te.status==="blocked"&&(Ut=Te.value,Te.status="fulfilled",Te.value=$t.value,Ut!==null&&Us(Ut,$t.value))}}function ua(Te){return function(dt){return ds(Te,dt)}}function ea(Te,dt){if((Te=Is(Te,dt)).status==="resolved_model"&&$s(Te),Te.status!=="fulfilled")throw Te.reason;return Te.value}function Gi(Te,dt){var At=2<arguments.length&&arguments[2]!==void 0?arguments[2]:new FormData,$t={_bundlerConfig:Te,_prefix:dt,_formData:At,_chunks:new Map,_fromJSON:function(Ut,Jr){return typeof Jr=="string"?function(Sr,Qn,zn,Qr){if(Qr[0]==="$")switch(Qr[1]){case"$":return Qr.slice(1);case"@":return Is(Sr,Qn=parseInt(Qr.slice(2),16));case"S":return Symbol.for(Qr.slice(2));case"F":return Qr=ea(Sr,Qr=parseInt(Qr.slice(2),16)),function(wi,$a,Lr,Br,Nn,As){var ql=pn(wi._bundlerConfig,$a);if(wi=Ei(ql),Lr)Lr=Promise.all([Lr,wi]).then(function(Jo){Jo=Jo[0];var qs=Ha(ql);return qs.bind.apply(qs,[null].concat(Jo))});else{if(!wi)return Ha(ql);Lr=Promise.resolve(wi).then(function(){return Ha(ql)})}return Lr.then(wa(Br,Nn,As),ua(Br)),null}(Sr,Qr.id,Qr.bound,ui,Qn,zn);case"Q":return new Map(Sr=ea(Sr,Qn=parseInt(Qr.slice(2),16)));case"W":return new Set(Sr=ea(Sr,Qn=parseInt(Qr.slice(2),16)));case"K":Qn=Qr.slice(2);var yr=Sr._prefix+Qn+"_",pi=new FormData;return Sr._formData.forEach(function(wi,$a){$a.startsWith(yr)&&pi.append($a.slice(yr.length),wi)}),pi;case"I":return 1/0;case"-":return Qr==="$-0"?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(Qr.slice(2)));case"n":return BigInt(Qr.slice(2));default:switch((Sr=Is(Sr,Qr=parseInt(Qr.slice(1),16))).status==="resolved_model"&&$s(Sr),Sr.status){case"fulfilled":return Sr.value;case"pending":case"blocked":return Qr=ui,Sr.then(wa(Qr,Qn,zn),ua(Qr)),null;default:throw Sr.reason}}return Qr}($t,this,Ut,Jr):Jr},_closed:!1,_closedReason:null};return $t}function na(Te){var dt;dt=Error("Connection closed."),Te._closed=!0,Te._closedReason=dt,Te._chunks.forEach(function(At){At.status==="pending"&&ds(At,dt)})}function Bs(Te,dt,At){var $t=pn(Te,dt);return Te=Ei($t),At?Promise.all([At,Te]).then(function(Ut){Ut=Ut[0];var Jr=Ha($t);return Jr.bind.apply(Jr,[null].concat(Ut))}):Te?Promise.resolve(Te).then(function(){return Ha($t)}):Promise.resolve(Ha($t))}function wo(Te,dt,At){if(na(Te=Gi(dt,At,Te)),(Te=Is(Te,0)).then(function(){}),Te.status!=="fulfilled")throw Te.reason;return Te.value}ae.createClientModuleProxy=function(Te){return new Proxy(Te=x({},Te,!1),fe)},ae.decodeAction=function(Te,dt){var At=new FormData,$t=null;return Te.forEach(function(Ut,Jr){Jr.startsWith("$ACTION_")?Jr.startsWith("$ACTION_REF_")?(Ut=wo(Te,dt,Ut="$ACTION_"+Jr.slice(12)+":"),$t=Bs(dt,Ut.id,Ut.bound)):Jr.startsWith("$ACTION_ID_")&&($t=Bs(dt,Ut=Jr.slice(11),null)):At.append(Jr,Ut)}),$t===null?null:$t.then(function(Ut){return Ut.bind(null,At)})},ae.decodeFormState=function(Te,dt,At){var $t=dt.get("$ACTION_KEY");if(typeof $t!="string")return Promise.resolve(null);var Ut=null;if(dt.forEach(function(Sr,Qn){Qn.startsWith("$ACTION_REF_")&&(Ut=wo(dt,At,"$ACTION_"+Qn.slice(12)+":"))}),Ut===null)return Promise.resolve(null);var Jr=Ut.id;return Promise.resolve(Ut.bound).then(function(Sr){return Sr===null?null:[Te,$t,Jr,Sr.length-1]})},ae.decodeReply=function(Te,dt){if(typeof Te=="string"){var At=new FormData;At.append("0",Te),Te=At}return dt=Is(Te=Gi(dt,"",Te),0),na(Te),dt},ae.renderToReadableStream=function(Te,dt,At){var $t=function(Sr,Qn,zn,Qr,yr){if(gn.current!==null&&gn.current!==et)throw Error("Currently React only supports one RSC renderer at a time.");Ue.current=Se,gn.current=et;var pi=new Set,wi=[],$a=new Set;return Sr=_n(Qn={status:0,flushScheduled:!1,fatalError:null,destination:null,bundlerConfig:Qn,cache:new Map,nextChunkId:0,pendingChunks:0,hints:$a,abortableTasks:pi,pingedTasks:wi,completedImportChunks:[],completedHintChunks:[],completedRegularChunks:[],completedErrorChunks:[],writtenSymbols:new Map,writtenClientReferences:new Map,writtenServerReferences:new Map,writtenObjects:new WeakMap,identifierPrefix:Qr||"",identifierCount:1,taintCleanupQueue:[],onError:zn===void 0?wn:zn,onPostpone:yr===void 0?Tn:yr},Sr,null,!1,pi),wi.push(Sr),Qn}(Te,dt,At?At.onError:void 0,At?At.identifierPrefix:void 0,At?At.onPostpone:void 0);if(At&&At.signal){var Ut=At.signal;if(Ut.aborted)li($t,Ut.reason);else{var Jr=function(){li($t,Ut.reason),Ut.removeEventListener("abort",Jr)};Ut.addEventListener("abort",Jr)}}return new ReadableStream({type:"bytes",start:function(){$t.flushScheduled=$t.destination!==null,setTimeout(at?function(){return vt.run($t,En,$t)}:function(){return En($t)},0)},pull:function(Sr){if($t.status===1)$t.status=2,S(Sr,$t.fatalError);else if($t.status!==2&&$t.destination===null){$t.destination=Sr;try{Kr($t,Sr)}catch(Qn){st($t,Qn),Ht($t,Qn)}}},cancel:function(Sr){$t.destination=null,li($t,Sr)}},{highWaterMark:0})}},5890:(Jt,ae,M)=>{"use strict";M(4927)},2926:(Jt,ae,M)=>{"use strict";Jt.exports=M(960)},796:(Jt,ae,M)=>{"use strict";Jt.exports=M(1651)},4814:(Jt,ae,M)=>{"use strict";var q=M(2168),Z=Symbol.for("react.element"),W=Symbol.for("react.fragment"),j=Object.prototype.hasOwnProperty,z=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner;function y(S,k,I){var x,C={},N=null,U=null;for(x in I!==void 0&&(N=""+I),k.key!==void 0&&(N=""+k.key),k.ref!==void 0&&(U=k.ref),k)j.call(k,x)&&x!=="key"&&x!=="ref"&&(C[x]=k[x]);if(S&&S.defaultProps)for(x in k=S.defaultProps)C[x]===void 0&&(C[x]=k[x]);return{$$typeof:Z,type:S,key:N,ref:U,props:C,_owner:z.current}}ae.Fragment=W,ae.jsx=y,ae.jsxs=y},5778:(Jt,ae)=>{"use strict";var M=Symbol.for("react.element"),q=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),y=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.iterator,N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,K={};function Y(Ne,tt,we){this.props=Ne,this.context=tt,this.refs=K,this.updater=we||N}function ee(){}function fe(Ne,tt,we){this.props=Ne,this.context=tt,this.refs=K,this.updater=we||N}Y.prototype.isReactComponent={},Y.prototype.setState=function(Ne,tt){if(typeof Ne!="object"&&typeof Ne!="function"&&Ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ne,tt,"setState")},Y.prototype.forceUpdate=function(Ne){this.updater.enqueueForceUpdate(this,Ne,"forceUpdate")},ee.prototype=Y.prototype;var Se=fe.prototype=new ee;Se.constructor=fe,U(Se,Y.prototype),Se.isPureReactComponent=!0;var ze=Array.isArray,Ue={current:null},at={current:null},vt={transition:null},jt={ReactCurrentDispatcher:Ue,ReactCurrentCache:at,ReactCurrentBatchConfig:vt,ReactCurrentOwner:{current:null}},re=Object.prototype.hasOwnProperty,F=jt.ReactCurrentOwner;function Q(Ne,tt,we){var Ce,We={},ve=null,Ve=null;if(tt!=null)for(Ce in tt.ref!==void 0&&(Ve=tt.ref),tt.key!==void 0&&(ve=""+tt.key),tt)re.call(tt,Ce)&&Ce!=="key"&&Ce!=="ref"&&Ce!=="__self"&&Ce!=="__source"&&(We[Ce]=tt[Ce]);var gt=arguments.length-2;if(gt===1)We.children=we;else if(1<gt){for(var mt=Array(gt),lt=0;lt<gt;lt++)mt[lt]=arguments[lt+2];We.children=mt}if(Ne&&Ne.defaultProps)for(Ce in gt=Ne.defaultProps)We[Ce]===void 0&&(We[Ce]=gt[Ce]);return{$$typeof:M,type:Ne,key:ve,ref:Ve,props:We,_owner:F.current}}function se(Ne){return typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===M}var me=/\/+/g;function ce(Ne,tt){var we,Ce;return typeof Ne=="object"&&Ne!==null&&Ne.key!=null?(we=""+Ne.key,Ce={"=":"=0",":":"=2"},"$"+we.replace(/[=:]/g,function(We){return Ce[We]})):tt.toString(36)}function Ke(){}function Je(Ne,tt,we){if(Ne==null)return Ne;var Ce=[],We=0;return function ve(Ve,gt,mt,lt,et){var bt,Ct,Ee,Qe=typeof Ve;(Qe==="undefined"||Qe==="boolean")&&(Ve=null);var yt=!1;if(Ve===null)yt=!0;else switch(Qe){case"string":case"number":yt=!0;break;case"object":switch(Ve.$$typeof){case M:case q:yt=!0;break;case x:return ve((yt=Ve._init)(Ve._payload),gt,mt,lt,et)}}if(yt)return et=et(Ve),yt=lt===""?"."+ce(Ve,0):lt,ze(et)?(mt="",yt!=null&&(mt=yt.replace(me,"$&/")+"/"),ve(et,gt,mt,"",function(rr){return rr})):et!=null&&(se(et)&&(bt=et,Ct=mt+(!et.key||Ve&&Ve.key===et.key?"":(""+et.key).replace(me,"$&/")+"/")+yt,et={$$typeof:M,type:bt.type,key:Ct,ref:bt.ref,props:bt.props,_owner:bt._owner}),gt.push(et)),1;yt=0;var Rt=lt===""?".":lt+":";if(ze(Ve))for(var Et=0;Et<Ve.length;Et++)Qe=Rt+ce(lt=Ve[Et],Et),yt+=ve(lt,gt,mt,Qe,et);else if(typeof(Et=(Ee=Ve)===null||typeof Ee!="object"?null:typeof(Ee=C&&Ee[C]||Ee["@@iterator"])=="function"?Ee:null)=="function")for(Ve=Et.call(Ve),Et=0;!(lt=Ve.next()).done;)Qe=Rt+ce(lt=lt.value,Et++),yt+=ve(lt,gt,mt,Qe,et);else if(Qe==="object"){if(typeof Ve.then=="function")return ve(function(rr){switch(rr.status){case"fulfilled":return rr.value;case"rejected":throw rr.reason;default:switch(typeof rr.status=="string"?rr.then(Ke,Ke):(rr.status="pending",rr.then(function(an){rr.status==="pending"&&(rr.status="fulfilled",rr.value=an)},function(an){rr.status==="pending"&&(rr.status="rejected",rr.reason=an)})),rr.status){case"fulfilled":return rr.value;case"rejected":throw rr.reason}}throw rr}(Ve),gt,mt,lt,et);throw Error("Objects are not valid as a React child (found: "+((gt=String(Ve))==="[object Object]"?"object with keys {"+Object.keys(Ve).join(", ")+"}":gt)+"). If you meant to render a collection of children, use an array instead.")}return yt}(Ne,Ce,"","",function(ve){return tt.call(we,ve,We++)}),Ce}function He(Ne){if(Ne._status===-1){var tt=Ne._result;(tt=tt()).then(function(we){(Ne._status===0||Ne._status===-1)&&(Ne._status=1,Ne._result=we)},function(we){(Ne._status===0||Ne._status===-1)&&(Ne._status=2,Ne._result=we)}),Ne._status===-1&&(Ne._status=0,Ne._result=tt)}if(Ne._status===1)return Ne._result.default;throw Ne._result}function _e(){return new WeakMap}function Fe(){return{s:0,v:void 0,o:null,p:null}}function pt(){}var lr=typeof reportError=="function"?reportError:function(Ne){console.error(Ne)};ae.Children={map:Je,forEach:function(Ne,tt,we){Je(Ne,function(){tt.apply(this,arguments)},we)},count:function(Ne){var tt=0;return Je(Ne,function(){tt++}),tt},toArray:function(Ne){return Je(Ne,function(tt){return tt})||[]},only:function(Ne){if(!se(Ne))throw Error("React.Children.only expected to receive a single React element child.");return Ne}},ae.Component=Y,ae.Fragment=Z,ae.Profiler=j,ae.PureComponent=fe,ae.StrictMode=W,ae.Suspense=k,ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jt,ae.act=function(){throw Error("act(...) is not supported in production builds of React.")},ae.cache=function(Ne){return function(){var tt=at.current;if(!tt)return Ne.apply(null,arguments);var we=tt.getCacheForType(_e);(tt=we.get(Ne))===void 0&&(tt=Fe(),we.set(Ne,tt)),we=0;for(var Ce=arguments.length;we<Ce;we++){var We=arguments[we];if(typeof We=="function"||typeof We=="object"&&We!==null){var ve=tt.o;ve===null&&(tt.o=ve=new WeakMap),(tt=ve.get(We))===void 0&&(tt=Fe(),ve.set(We,tt))}else(ve=tt.p)===null&&(tt.p=ve=new Map),(tt=ve.get(We))===void 0&&(tt=Fe(),ve.set(We,tt))}if(tt.s===1)return tt.v;if(tt.s===2)throw tt.v;try{var Ve=Ne.apply(null,arguments);return(we=tt).s=1,we.v=Ve}catch(gt){throw(Ve=tt).s=2,Ve.v=gt,gt}}},ae.cloneElement=function(Ne,tt,we){if(Ne==null)throw Error("The argument must be a React element, but you passed "+Ne+".");var Ce=U({},Ne.props),We=Ne.key,ve=Ne.ref,Ve=Ne._owner;if(tt!=null){if(tt.ref!==void 0&&(ve=tt.ref,Ve=F.current),tt.key!==void 0&&(We=""+tt.key),Ne.type&&Ne.type.defaultProps)var gt=Ne.type.defaultProps;for(mt in tt)re.call(tt,mt)&&mt!=="key"&&mt!=="ref"&&mt!=="__self"&&mt!=="__source"&&(Ce[mt]=tt[mt]===void 0&&gt!==void 0?gt[mt]:tt[mt])}var mt=arguments.length-2;if(mt===1)Ce.children=we;else if(1<mt){gt=Array(mt);for(var lt=0;lt<mt;lt++)gt[lt]=arguments[lt+2];Ce.children=gt}return{$$typeof:M,type:Ne.type,key:We,ref:ve,props:Ce,_owner:Ve}},ae.createContext=function(Ne){return(Ne={$$typeof:y,_currentValue:Ne,_currentValue2:Ne,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:z,_context:Ne},Ne.Consumer=Ne},ae.createElement=Q,ae.createFactory=function(Ne){var tt=Q.bind(null,Ne);return tt.type=Ne,tt},ae.createRef=function(){return{current:null}},ae.forwardRef=function(Ne){return{$$typeof:S,render:Ne}},ae.isValidElement=se,ae.lazy=function(Ne){return{$$typeof:x,_payload:{_status:-1,_result:Ne},_init:He}},ae.memo=function(Ne,tt){return{$$typeof:I,type:Ne,compare:tt===void 0?null:tt}},ae.startTransition=function(Ne){var tt=vt.transition,we=new Set;vt.transition={_callbacks:we};var Ce=vt.transition;try{var We=Ne();typeof We=="object"&&We!==null&&typeof We.then=="function"&&(we.forEach(function(ve){return ve(Ce,We)}),We.then(pt,lr))}catch(ve){lr(ve)}finally{vt.transition=tt}},ae.unstable_useCacheRefresh=function(){return Ue.current.useCacheRefresh()},ae.use=function(Ne){return Ue.current.use(Ne)},ae.useCallback=function(Ne,tt){return Ue.current.useCallback(Ne,tt)},ae.useContext=function(Ne){return Ue.current.useContext(Ne)},ae.useDebugValue=function(){},ae.useDeferredValue=function(Ne,tt){return Ue.current.useDeferredValue(Ne,tt)},ae.useEffect=function(Ne,tt){return Ue.current.useEffect(Ne,tt)},ae.useId=function(){return Ue.current.useId()},ae.useImperativeHandle=function(Ne,tt,we){return Ue.current.useImperativeHandle(Ne,tt,we)},ae.useInsertionEffect=function(Ne,tt){return Ue.current.useInsertionEffect(Ne,tt)},ae.useLayoutEffect=function(Ne,tt){return Ue.current.useLayoutEffect(Ne,tt)},ae.useMemo=function(Ne,tt){return Ue.current.useMemo(Ne,tt)},ae.useOptimistic=function(Ne,tt){return Ue.current.useOptimistic(Ne,tt)},ae.useReducer=function(Ne,tt,we){return Ue.current.useReducer(Ne,tt,we)},ae.useRef=function(Ne){return Ue.current.useRef(Ne)},ae.useState=function(Ne){return Ue.current.useState(Ne)},ae.useSyncExternalStore=function(Ne,tt,we){return Ue.current.useSyncExternalStore(Ne,tt,we)},ae.useTransition=function(){return Ue.current.useTransition()},ae.version="18.3.0-canary-178c267a4e-20241218"},8458:(Jt,ae)=>{"use strict";var M=Object.assign,q={current:null};function Z(){return new Map}if(typeof fetch=="function"){var W=fetch,j=function(He,_e){var Fe=q.current;if(!Fe||_e&&_e.signal&&_e.signal!==Fe.getCacheSignal())return W(He,_e);if(typeof He!="string"||_e){var pt=typeof He=="string"||He instanceof URL?new Request(He,_e):He;if(pt.method!=="GET"&&pt.method!=="HEAD"||pt.keepalive)return W(He,_e);var lr=JSON.stringify([pt.method,Array.from(pt.headers.entries()),null,pt.redirect,null,pt.referrer,pt.referrerPolicy,null]);pt=pt.url}else lr='["GET",[],null,"follow",null,null,null,null]',pt=He;var Ne=Fe.getCacheForType(Z);if((Fe=Ne.get(pt))===void 0)He=W(He,_e),Ne.set(pt,[lr,He]);else{for(pt=0,Ne=Fe.length;pt<Ne;pt+=2){var tt=Fe[pt+1];if(Fe[pt]===lr)return(He=tt).then(function(we){return we.clone()})}He=W(He,_e),Fe.push(lr,He)}return He.then(function(we){return we.clone()})};M(j,W);try{fetch=j}catch{try{hn.fetch=j}catch{console.warn("React was unable to patch the fetch() function in this environment. Suspensey APIs might not work correctly as a result.")}}}var z={current:null},y={ReactCurrentDispatcher:z,ReactCurrentOwner:{current:null}};function S(He){var _e="https://react.dev/errors/"+He;if(1<arguments.length){_e+="?args[]="+encodeURIComponent(arguments[1]);for(var Fe=2;Fe<arguments.length;Fe++)_e+="&args[]="+encodeURIComponent(arguments[Fe])}return"Minified React error #"+He+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k=Array.isArray,I=Symbol.for("react.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),K=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ee=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Se=Symbol.iterator,ze=Object.prototype.hasOwnProperty,Ue=y.ReactCurrentOwner;function at(He){return typeof He=="object"&&He!==null&&He.$$typeof===I}var vt=/\/+/g;function jt(He,_e){var Fe,pt;return typeof He=="object"&&He!==null&&He.key!=null?(Fe=""+He.key,pt={"=":"=0",":":"=2"},"$"+Fe.replace(/[=:]/g,function(lr){return pt[lr]})):_e.toString(36)}function re(){}function F(He,_e,Fe){if(He==null)return He;var pt=[],lr=0;return function Ne(tt,we,Ce,We,ve){var Ve,gt,mt,lt=typeof tt;(lt==="undefined"||lt==="boolean")&&(tt=null);var et=!1;if(tt===null)et=!0;else switch(lt){case"string":case"number":et=!0;break;case"object":switch(tt.$$typeof){case I:case x:et=!0;break;case fe:return Ne((et=tt._init)(tt._payload),we,Ce,We,ve)}}if(et)return ve=ve(tt),et=We===""?"."+jt(tt,0):We,k(ve)?(Ce="",et!=null&&(Ce=et.replace(vt,"$&/")+"/"),Ne(ve,we,Ce,"",function(Ee){return Ee})):ve!=null&&(at(ve)&&(Ve=ve,gt=Ce+(!ve.key||tt&&tt.key===ve.key?"":(""+ve.key).replace(vt,"$&/")+"/")+et,ve={$$typeof:I,type:Ve.type,key:gt,ref:Ve.ref,props:Ve.props,_owner:Ve._owner}),we.push(ve)),1;et=0;var bt=We===""?".":We+":";if(k(tt))for(var Ct=0;Ct<tt.length;Ct++)lt=bt+jt(We=tt[Ct],Ct),et+=Ne(We,we,Ce,lt,ve);else if(typeof(Ct=(mt=tt)===null||typeof mt!="object"?null:typeof(mt=Se&&mt[Se]||mt["@@iterator"])=="function"?mt:null)=="function")for(tt=Ct.call(tt),Ct=0;!(We=tt.next()).done;)lt=bt+jt(We=We.value,Ct++),et+=Ne(We,we,Ce,lt,ve);else if(lt==="object"){if(typeof tt.then=="function")return Ne(function(Ee){switch(Ee.status){case"fulfilled":return Ee.value;case"rejected":throw Ee.reason;default:switch(typeof Ee.status=="string"?Ee.then(re,re):(Ee.status="pending",Ee.then(function(Qe){Ee.status==="pending"&&(Ee.status="fulfilled",Ee.value=Qe)},function(Qe){Ee.status==="pending"&&(Ee.status="rejected",Ee.reason=Qe)})),Ee.status){case"fulfilled":return Ee.value;case"rejected":throw Ee.reason}}throw Ee}(tt),we,Ce,We,ve);throw Error(S(31,(we=String(tt))==="[object Object]"?"object with keys {"+Object.keys(tt).join(", ")+"}":we))}return et}(He,pt,"","",function(Ne){return _e.call(Fe,Ne,lr++)}),pt}function Q(He){if(He._status===-1){var _e=He._result;(_e=_e()).then(function(Fe){(He._status===0||He._status===-1)&&(He._status=1,He._result=Fe)},function(Fe){(He._status===0||He._status===-1)&&(He._status=2,He._result=Fe)}),He._status===-1&&(He._status=0,He._result=_e)}if(He._status===1)return He._result.default;throw He._result}function se(){return new WeakMap}function me(){return{s:0,v:void 0,o:null,p:null}}var ce={transition:null};function Ke(){}var Je=typeof reportError=="function"?reportError:function(He){console.error(He)};ae.Children={map:F,forEach:function(He,_e,Fe){F(He,function(){_e.apply(this,arguments)},Fe)},count:function(He){var _e=0;return F(He,function(){_e++}),_e},toArray:function(He){return F(He,function(_e){return _e})||[]},only:function(He){if(!at(He))throw Error(S(143));return He}},ae.Fragment=C,ae.Profiler=U,ae.StrictMode=N,ae.Suspense=Y,ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y,ae.__SECRET_SERVER_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentCache:q},ae.cache=function(He){return function(){var _e=q.current;if(!_e)return He.apply(null,arguments);var Fe=_e.getCacheForType(se);(_e=Fe.get(He))===void 0&&(_e=me(),Fe.set(He,_e)),Fe=0;for(var pt=arguments.length;Fe<pt;Fe++){var lr=arguments[Fe];if(typeof lr=="function"||typeof lr=="object"&&lr!==null){var Ne=_e.o;Ne===null&&(_e.o=Ne=new WeakMap),(_e=Ne.get(lr))===void 0&&(_e=me(),Ne.set(lr,_e))}else(Ne=_e.p)===null&&(_e.p=Ne=new Map),(_e=Ne.get(lr))===void 0&&(_e=me(),Ne.set(lr,_e))}if(_e.s===1)return _e.v;if(_e.s===2)throw _e.v;try{var tt=He.apply(null,arguments);return(Fe=_e).s=1,Fe.v=tt}catch(we){throw(tt=_e).s=2,tt.v=we,we}}},ae.cloneElement=function(He,_e,Fe){if(He==null)throw Error(S(267,He));var pt=M({},He.props),lr=He.key,Ne=He.ref,tt=He._owner;if(_e!=null){if(_e.ref!==void 0&&(Ne=_e.ref,tt=Ue.current),_e.key!==void 0&&(lr=""+_e.key),He.type&&He.type.defaultProps)var we=He.type.defaultProps;for(Ce in _e)ze.call(_e,Ce)&&Ce!=="key"&&Ce!=="ref"&&Ce!=="__self"&&Ce!=="__source"&&(pt[Ce]=_e[Ce]===void 0&&we!==void 0?we[Ce]:_e[Ce])}var Ce=arguments.length-2;if(Ce===1)pt.children=Fe;else if(1<Ce){we=Array(Ce);for(var We=0;We<Ce;We++)we[We]=arguments[We+2];pt.children=we}return{$$typeof:I,type:He.type,key:lr,ref:Ne,props:pt,_owner:tt}},ae.createElement=function(He,_e,Fe){var pt,lr={},Ne=null,tt=null;if(_e!=null)for(pt in _e.ref!==void 0&&(tt=_e.ref),_e.key!==void 0&&(Ne=""+_e.key),_e)ze.call(_e,pt)&&pt!=="key"&&pt!=="ref"&&pt!=="__self"&&pt!=="__source"&&(lr[pt]=_e[pt]);var we=arguments.length-2;if(we===1)lr.children=Fe;else if(1<we){for(var Ce=Array(we),We=0;We<we;We++)Ce[We]=arguments[We+2];lr.children=Ce}if(He&&He.defaultProps)for(pt in we=He.defaultProps)lr[pt]===void 0&&(lr[pt]=we[pt]);return{$$typeof:I,type:He,key:Ne,ref:tt,props:lr,_owner:Ue.current}},ae.createRef=function(){return{current:null}},ae.forwardRef=function(He){return{$$typeof:K,render:He}},ae.isValidElement=at,ae.lazy=function(He){return{$$typeof:fe,_payload:{_status:-1,_result:He},_init:Q}},ae.memo=function(He,_e){return{$$typeof:ee,type:He,compare:_e===void 0?null:_e}},ae.startTransition=function(He){var _e=ce.transition,Fe=new Set;ce.transition={_callbacks:Fe};var pt=ce.transition;try{var lr=He();typeof lr=="object"&&lr!==null&&typeof lr.then=="function"&&(Fe.forEach(function(Ne){return Ne(pt,lr)}),lr.then(Ke,Je))}catch(Ne){Je(Ne)}finally{ce.transition=_e}},ae.use=function(He){return z.current.use(He)},ae.useCallback=function(He,_e){return z.current.useCallback(He,_e)},ae.useDebugValue=function(){},ae.useId=function(){return z.current.useId()},ae.useMemo=function(He,_e){return z.current.useMemo(He,_e)},ae.version="18.3.0-canary-178c267a4e-20241218"},8949:(Jt,ae)=>{"use strict";var M=Object.assign,q={current:null};function Z(){return new Map}if(typeof fetch=="function"){var W=fetch,j=function(He,_e){var Fe=q.current;if(!Fe||_e&&_e.signal&&_e.signal!==Fe.getCacheSignal())return W(He,_e);if(typeof He!="string"||_e){var pt=typeof He=="string"||He instanceof URL?new Request(He,_e):He;if(pt.method!=="GET"&&pt.method!=="HEAD"||pt.keepalive)return W(He,_e);var lr=JSON.stringify([pt.method,Array.from(pt.headers.entries()),null,pt.redirect,null,pt.referrer,pt.referrerPolicy,null]);pt=pt.url}else lr='["GET",[],null,"follow",null,null,null,null]',pt=He;var Ne=Fe.getCacheForType(Z);if((Fe=Ne.get(pt))===void 0)He=W(He,_e),Ne.set(pt,[lr,He]);else{for(pt=0,Ne=Fe.length;pt<Ne;pt+=2){var tt=Fe[pt+1];if(Fe[pt]===lr)return(He=tt).then(function(we){return we.clone()})}He=W(He,_e),Fe.push(lr,He)}return He.then(function(we){return we.clone()})};M(j,W);try{fetch=j}catch{try{hn.fetch=j}catch{console.warn("React was unable to patch the fetch() function in this environment. Suspensey APIs might not work correctly as a result.")}}}var z={current:null},y={ReactCurrentDispatcher:z,ReactCurrentOwner:{current:null}};function S(He){var _e="https://react.dev/errors/"+He;if(1<arguments.length){_e+="?args[]="+encodeURIComponent(arguments[1]);for(var Fe=2;Fe<arguments.length;Fe++)_e+="&args[]="+encodeURIComponent(arguments[Fe])}return"Minified React error #"+He+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k=Array.isArray,I=Symbol.for("react.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),K=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ee=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Se=Symbol.iterator,ze=Object.prototype.hasOwnProperty,Ue=y.ReactCurrentOwner;function at(He){return typeof He=="object"&&He!==null&&He.$$typeof===I}var vt=/\/+/g;function jt(He,_e){var Fe,pt;return typeof He=="object"&&He!==null&&He.key!=null?(Fe=""+He.key,pt={"=":"=0",":":"=2"},"$"+Fe.replace(/[=:]/g,function(lr){return pt[lr]})):_e.toString(36)}function re(){}function F(He,_e,Fe){if(He==null)return He;var pt=[],lr=0;return function Ne(tt,we,Ce,We,ve){var Ve,gt,mt,lt=typeof tt;(lt==="undefined"||lt==="boolean")&&(tt=null);var et=!1;if(tt===null)et=!0;else switch(lt){case"string":case"number":et=!0;break;case"object":switch(tt.$$typeof){case I:case x:et=!0;break;case fe:return Ne((et=tt._init)(tt._payload),we,Ce,We,ve)}}if(et)return ve=ve(tt),et=We===""?"."+jt(tt,0):We,k(ve)?(Ce="",et!=null&&(Ce=et.replace(vt,"$&/")+"/"),Ne(ve,we,Ce,"",function(Ee){return Ee})):ve!=null&&(at(ve)&&(Ve=ve,gt=Ce+(!ve.key||tt&&tt.key===ve.key?"":(""+ve.key).replace(vt,"$&/")+"/")+et,ve={$$typeof:I,type:Ve.type,key:gt,ref:Ve.ref,props:Ve.props,_owner:Ve._owner}),we.push(ve)),1;et=0;var bt=We===""?".":We+":";if(k(tt))for(var Ct=0;Ct<tt.length;Ct++)lt=bt+jt(We=tt[Ct],Ct),et+=Ne(We,we,Ce,lt,ve);else if(typeof(Ct=(mt=tt)===null||typeof mt!="object"?null:typeof(mt=Se&&mt[Se]||mt["@@iterator"])=="function"?mt:null)=="function")for(tt=Ct.call(tt),Ct=0;!(We=tt.next()).done;)lt=bt+jt(We=We.value,Ct++),et+=Ne(We,we,Ce,lt,ve);else if(lt==="object"){if(typeof tt.then=="function")return Ne(function(Ee){switch(Ee.status){case"fulfilled":return Ee.value;case"rejected":throw Ee.reason;default:switch(typeof Ee.status=="string"?Ee.then(re,re):(Ee.status="pending",Ee.then(function(Qe){Ee.status==="pending"&&(Ee.status="fulfilled",Ee.value=Qe)},function(Qe){Ee.status==="pending"&&(Ee.status="rejected",Ee.reason=Qe)})),Ee.status){case"fulfilled":return Ee.value;case"rejected":throw Ee.reason}}throw Ee}(tt),we,Ce,We,ve);throw Error(S(31,(we=String(tt))==="[object Object]"?"object with keys {"+Object.keys(tt).join(", ")+"}":we))}return et}(He,pt,"","",function(Ne){return _e.call(Fe,Ne,lr++)}),pt}function Q(He){if(He._status===-1){var _e=He._result;(_e=_e()).then(function(Fe){(He._status===0||He._status===-1)&&(He._status=1,He._result=Fe)},function(Fe){(He._status===0||He._status===-1)&&(He._status=2,He._result=Fe)}),He._status===-1&&(He._status=0,He._result=_e)}if(He._status===1)return He._result.default;throw He._result}function se(){return new WeakMap}function me(){return{s:0,v:void 0,o:null,p:null}}var ce={transition:null};function Ke(){}var Je=typeof reportError=="function"?reportError:function(He){console.error(He)};ae.Children={map:F,forEach:function(He,_e,Fe){F(He,function(){_e.apply(this,arguments)},Fe)},count:function(He){var _e=0;return F(He,function(){_e++}),_e},toArray:function(He){return F(He,function(_e){return _e})||[]},only:function(He){if(!at(He))throw Error(S(143));return He}},ae.Fragment=C,ae.Profiler=U,ae.StrictMode=N,ae.Suspense=Y,ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y,ae.__SECRET_SERVER_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentCache:q},ae.cache=function(He){return function(){var _e=q.current;if(!_e)return He.apply(null,arguments);var Fe=_e.getCacheForType(se);(_e=Fe.get(He))===void 0&&(_e=me(),Fe.set(He,_e)),Fe=0;for(var pt=arguments.length;Fe<pt;Fe++){var lr=arguments[Fe];if(typeof lr=="function"||typeof lr=="object"&&lr!==null){var Ne=_e.o;Ne===null&&(_e.o=Ne=new WeakMap),(_e=Ne.get(lr))===void 0&&(_e=me(),Ne.set(lr,_e))}else(Ne=_e.p)===null&&(_e.p=Ne=new Map),(_e=Ne.get(lr))===void 0&&(_e=me(),Ne.set(lr,_e))}if(_e.s===1)return _e.v;if(_e.s===2)throw _e.v;try{var tt=He.apply(null,arguments);return(Fe=_e).s=1,Fe.v=tt}catch(we){throw(tt=_e).s=2,tt.v=we,we}}},ae.cloneElement=function(He,_e,Fe){if(He==null)throw Error(S(267,He));var pt=M({},He.props),lr=He.key,Ne=He.ref,tt=He._owner;if(_e!=null){if(_e.ref!==void 0&&(Ne=_e.ref,tt=Ue.current),_e.key!==void 0&&(lr=""+_e.key),He.type&&He.type.defaultProps)var we=He.type.defaultProps;for(Ce in _e)ze.call(_e,Ce)&&Ce!=="key"&&Ce!=="ref"&&Ce!=="__self"&&Ce!=="__source"&&(pt[Ce]=_e[Ce]===void 0&&we!==void 0?we[Ce]:_e[Ce])}var Ce=arguments.length-2;if(Ce===1)pt.children=Fe;else if(1<Ce){we=Array(Ce);for(var We=0;We<Ce;We++)we[We]=arguments[We+2];pt.children=we}return{$$typeof:I,type:He.type,key:lr,ref:Ne,props:pt,_owner:tt}},ae.createElement=function(He,_e,Fe){var pt,lr={},Ne=null,tt=null;if(_e!=null)for(pt in _e.ref!==void 0&&(tt=_e.ref),_e.key!==void 0&&(Ne=""+_e.key),_e)ze.call(_e,pt)&&pt!=="key"&&pt!=="ref"&&pt!=="__self"&&pt!=="__source"&&(lr[pt]=_e[pt]);var we=arguments.length-2;if(we===1)lr.children=Fe;else if(1<we){for(var Ce=Array(we),We=0;We<we;We++)Ce[We]=arguments[We+2];lr.children=Ce}if(He&&He.defaultProps)for(pt in we=He.defaultProps)lr[pt]===void 0&&(lr[pt]=we[pt]);return{$$typeof:I,type:He,key:Ne,ref:tt,props:lr,_owner:Ue.current}},ae.createRef=function(){return{current:null}},ae.forwardRef=function(He){return{$$typeof:K,render:He}},ae.isValidElement=at,ae.lazy=function(He){return{$$typeof:fe,_payload:{_status:-1,_result:He},_init:Q}},ae.memo=function(He,_e){return{$$typeof:ee,type:He,compare:_e===void 0?null:_e}},ae.startTransition=function(He){var _e=ce.transition,Fe=new Set;ce.transition={_callbacks:Fe};var pt=ce.transition;try{var lr=He();typeof lr=="object"&&lr!==null&&typeof lr.then=="function"&&(Fe.forEach(function(Ne){return Ne(pt,lr)}),lr.then(Ke,Je))}catch(Ne){Je(Ne)}finally{ce.transition=_e}},ae.use=function(He){return z.current.use(He)},ae.useCallback=function(He,_e){return z.current.useCallback(He,_e)},ae.useDebugValue=function(){},ae.useId=function(){return z.current.useId()},ae.useMemo=function(He,_e){return z.current.useMemo(He,_e)},ae.version="18.3.0-canary-178c267a4e-20241218"},2168:(Jt,ae,M)=>{"use strict";Jt.exports=M(5778)},2416:(Jt,ae,M)=>{"use strict";Jt.exports=M(4814)},3796:(Jt,ae,M)=>{"use strict";Jt.exports=M(8458)},7908:(Jt,ae,M)=>{"use strict";Jt.exports=M(8949)},5845:(Jt,ae,M)=>{"use strict";function q(Z){for(let W=0;W<Z.length;W++){let j=Z[W];if(typeof j!="function")throw Error(`A "use server" file can only export async functions, found ${typeof j}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`)}}M.d(ae,{h:()=>q})},8264:(Jt,ae,M)=>{"use strict";M.d(ae,{D:()=>q});let q=M(796).createClientModuleProxy},8201:(Jt,ae,M)=>{"use strict";M.d(ae,{j:()=>Z});var q=M(2926);function Z(W,j){return(0,q.registerServerReference)(j,W,null)}},2520:(Jt,ae,M)=>{"use strict";M.r(ae),M.d(ae,{default:()=>W});var q=M(2416);M(7908);let Z={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},desc:{display:"inline-block"},h1:{display:"inline-block",margin:"0 20px 0 0",padding:"0 23px 0 0",fontSize:24,fontWeight:500,verticalAlign:"top",lineHeight:"49px"},h2:{fontSize:14,fontWeight:400,lineHeight:"49px",margin:0}};function W(){return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("title",{children:"404: This page could not be found."}),(0,q.jsx)("div",{style:Z.error,children:(0,q.jsxs)("div",{children:[(0,q.jsx)("style",{dangerouslySetInnerHTML:{__html:"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}),(0,q.jsx)("h1",{className:"next-error-h1",style:Z.h1,children:"404"}),(0,q.jsx)("div",{style:Z.desc,children:(0,q.jsx)("h2",{style:Z.h2,children:"This page could not be found."})})]})})]})}},5974:(Jt,ae,M)=>{"use strict";var q,Z,W,j,z,y,S,k,I,x,C,N;let U;M(2926),M(5890),function(ce){ce.handleRequest="BaseServer.handleRequest",ce.run="BaseServer.run",ce.pipe="BaseServer.pipe",ce.getStaticHTML="BaseServer.getStaticHTML",ce.render="BaseServer.render",ce.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",ce.renderToResponse="BaseServer.renderToResponse",ce.renderToHTML="BaseServer.renderToHTML",ce.renderError="BaseServer.renderError",ce.renderErrorToResponse="BaseServer.renderErrorToResponse",ce.renderErrorToHTML="BaseServer.renderErrorToHTML",ce.render404="BaseServer.render404"}(q||(q={})),function(ce){ce.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",ce.loadComponents="LoadComponents.loadComponents"}(Z||(Z={})),function(ce){ce.getRequestHandler="NextServer.getRequestHandler",ce.getServer="NextServer.getServer",ce.getServerRequestHandler="NextServer.getServerRequestHandler",ce.createServer="createServer.createServer"}(W||(W={})),function(ce){ce.compression="NextNodeServer.compression",ce.getBuildId="NextNodeServer.getBuildId",ce.createComponentTree="NextNodeServer.createComponentTree",ce.clientComponentLoading="NextNodeServer.clientComponentLoading",ce.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",ce.generateStaticRoutes="NextNodeServer.generateStaticRoutes",ce.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",ce.generatePublicRoutes="NextNodeServer.generatePublicRoutes",ce.generateImageRoutes="NextNodeServer.generateImageRoutes.route",ce.sendRenderResult="NextNodeServer.sendRenderResult",ce.proxyRequest="NextNodeServer.proxyRequest",ce.runApi="NextNodeServer.runApi",ce.render="NextNodeServer.render",ce.renderHTML="NextNodeServer.renderHTML",ce.imageOptimizer="NextNodeServer.imageOptimizer",ce.getPagePath="NextNodeServer.getPagePath",ce.getRoutesManifest="NextNodeServer.getRoutesManifest",ce.findPageComponents="NextNodeServer.findPageComponents",ce.getFontManifest="NextNodeServer.getFontManifest",ce.getServerComponentManifest="NextNodeServer.getServerComponentManifest",ce.getRequestHandler="NextNodeServer.getRequestHandler",ce.renderToHTML="NextNodeServer.renderToHTML",ce.renderError="NextNodeServer.renderError",ce.renderErrorToHTML="NextNodeServer.renderErrorToHTML",ce.render404="NextNodeServer.render404",ce.startResponse="NextNodeServer.startResponse",ce.route="route",ce.onProxyReq="onProxyReq",ce.apiResolver="apiResolver",ce.internalFetch="internalFetch"}(j||(j={})),(z||(z={})).startServer="startServer.startServer",function(ce){ce.getServerSideProps="Render.getServerSideProps",ce.getStaticProps="Render.getStaticProps",ce.renderToString="Render.renderToString",ce.renderDocument="Render.renderDocument",ce.createBodyResult="Render.createBodyResult"}(y||(y={})),function(ce){ce.renderToString="AppRender.renderToString",ce.renderToReadableStream="AppRender.renderToReadableStream",ce.getBodyResult="AppRender.getBodyResult",ce.fetch="AppRender.fetch"}(S||(S={})),(k||(k={})).executeRoute="Router.executeRoute",(I||(I={})).runHandler="Node.runHandler",(x||(x={})).runHandler="AppRouteRouteHandlers.runHandler",function(ce){ce.generateMetadata="ResolveMetadata.generateMetadata",ce.generateViewport="ResolveMetadata.generateViewport"}(C||(C={})),(N||(N={})).execute="Middleware.execute";let K=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],Y=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"],{context:ee,propagation:fe,trace:Se,SpanStatusCode:ze,SpanKind:Ue,ROOT_CONTEXT:at}=U=M(6395),vt=ce=>ce!==null&&typeof ce=="object"&&typeof ce.then=="function",jt=(ce,Ke)=>{Ke?.bubble===!0?ce.setAttribute("next.bubble",!0):(Ke&&ce.recordException(Ke),ce.setStatus({code:ze.ERROR,message:Ke?.message})),ce.end()},re=new Map,F=U.createContextKey("next.rootSpanId"),Q=0,se=()=>Q++;class me{getTracerInstance(){return Se.getTracer("next.js","0.0.1")}getContext(){return ee}getActiveScopeSpan(){return Se.getSpan(ee?.active())}withPropagatedContext(Ke,Je,He){let _e=ee.active();if(Se.getSpanContext(_e))return Je();let Fe=fe.extract(_e,Ke,He);return ee.with(Fe,Je)}trace(...Ke){var Je;let[He,_e,Fe]=Ke,{fn:pt,options:lr}=typeof _e=="function"?{fn:_e,options:{}}:{fn:Fe,options:{..._e}},Ne=lr.spanName??He;if(!K.includes(He)&&process.env.NEXT_OTEL_VERBOSE!=="1"||lr.hideSpan)return pt();let tt=this.getSpanContext(lr?.parentSpan??this.getActiveScopeSpan()),we=!1;tt?(Je=Se.getSpanContext(tt))!=null&&Je.isRemote&&(we=!0):(tt=ee?.active()??at,we=!0);let Ce=se();return lr.attributes={"next.span_name":Ne,"next.span_type":He,...lr.attributes},ee.with(tt.setValue(F,Ce),()=>this.getTracerInstance().startActiveSpan(Ne,lr,We=>{let ve="performance"in hn?hn.performance.now():void 0,Ve=()=>{re.delete(Ce),ve&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&Y.includes(He||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(He.split(".").pop()||"").replace(/[A-Z]/g,gt=>"-"+gt.toLowerCase())}`,{start:ve,end:performance.now()})};we&&re.set(Ce,new Map(Object.entries(lr.attributes??{})));try{if(pt.length>1)return pt(We,mt=>jt(We,mt));let gt=pt(We);return vt(gt)?gt.then(mt=>(We.end(),mt)).catch(mt=>{throw jt(We,mt),mt}).finally(Ve):(We.end(),Ve(),gt)}catch(gt){throw jt(We,gt),Ve(),gt}}))}wrap(...Ke){let Je=this,[He,_e,Fe]=Ke.length===3?Ke:[Ke[0],{},Ke[1]];return K.includes(He)||process.env.NEXT_OTEL_VERBOSE==="1"?function(){let pt=_e;typeof pt=="function"&&typeof Fe=="function"&&(pt=pt.apply(this,arguments));let lr=arguments.length-1,Ne=arguments[lr];if(typeof Ne!="function")return Je.trace(He,pt,()=>Fe.apply(this,arguments));{let tt=Je.getContext().bind(ee.active(),Ne);return Je.trace(He,pt,(we,Ce)=>(arguments[lr]=function(We){return Ce?.(We),tt.apply(this,arguments)},Fe.apply(this,arguments)))}}:Fe}startSpan(...Ke){let[Je,He]=Ke,_e=this.getSpanContext(He?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(Je,He,_e)}getSpanContext(Ke){return Ke?Se.setSpan(ee.active(),Ke):void 0}getRootSpanAttributes(){let Ke=ee.active().getValue(F);return re.get(Ke)}}(()=>{let ce=new me;return()=>ce})(),new Uint8Array([60,104,116,109,108]),new Uint8Array([60,98,111,100,121]),new Uint8Array([60,47,104,101,97,100,62]),new Uint8Array([60,47,98,111,100,121,62]),new Uint8Array([60,47,104,116,109,108,62]),new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62]),new TextEncoder,Symbol.for("next.server.action-manifests"),new TextEncoder,new TextDecoder},4630:(Jt,ae,M)=>{Jt.exports=M(5172)},2296:(Jt,ae,M)=>{"use strict";M.d(ae,{W:()=>q});let q=(0,M(5228).P)()},5228:(Jt,ae,M)=>{"use strict";M.d(ae,{P:()=>j});let q=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class Z{disable(){throw q}getStore(){}run(){throw q}exit(){throw q}enterWith(){throw q}}let W=hn.AsyncLocalStorage;function j(){return W?new W:new Z}},8983:(Jt,ae,M)=>{"use strict";M.d(ae,{O:()=>q});let q=(0,M(5228).P)()},9182:(Jt,ae,M)=>{"use strict";M.d(ae,{A:()=>q});let q=(0,M(5228).P)()},7001:()=>{},5996:()=>{},7633:()=>{},2307:()=>{},2324:Jt=>{(()=>{typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab="//");var ae={};({318:function(M,q){(function(Z){"use strict";class W extends TypeError{constructor(Q,se){let me,{message:ce,explanation:Ke,...Je}=Q,{path:He}=Q,_e=He.length===0?ce:`At path: ${He.join(".")} -- ${ce}`;super(Ke??_e),Ke!=null&&(this.cause=_e),Object.assign(this,Je),this.name=this.constructor.name,this.failures=()=>me??(me=[Q,...se()])}}function j(F){return typeof F=="object"&&F!=null}function z(F){if(Object.prototype.toString.call(F)!=="[object Object]")return!1;let Q=Object.getPrototypeOf(F);return Q===null||Q===Object.prototype}function y(F){return typeof F=="symbol"?F.toString():typeof F=="string"?JSON.stringify(F):`${F}`}function*S(F,Q,se,me){var ce;for(let Ke of(j(ce=F)&&typeof ce[Symbol.iterator]=="function"||(F=[F]),F)){let Je=function(He,_e,Fe,pt){if(He===!0)return;He===!1?He={}:typeof He=="string"&&(He={message:He});let{path:lr,branch:Ne}=_e,{type:tt}=Fe,{refinement:we,message:Ce=`Expected a value of type \`${tt}\`${we?` with refinement \`${we}\``:""}, but received: \`${y(pt)}\``}=He;return{value:pt,type:tt,refinement:we,key:lr[lr.length-1],path:lr,branch:Ne,...He,message:Ce}}(Ke,Q,se,me);Je&&(yield Je)}}function*k(F,Q,se={}){let{path:me=[],branch:ce=[F],coerce:Ke=!1,mask:Je=!1}=se,He={path:me,branch:ce};if(Ke&&(F=Q.coercer(F,He),Je&&Q.type!=="type"&&j(Q.schema)&&j(F)&&!Array.isArray(F)))for(let Fe in F)Q.schema[Fe]===void 0&&delete F[Fe];let _e="valid";for(let Fe of Q.validator(F,He))Fe.explanation=se.message,_e="not_valid",yield[Fe,void 0];for(let[Fe,pt,lr]of Q.entries(F,He))for(let Ne of k(pt,lr,{path:Fe===void 0?me:[...me,Fe],branch:Fe===void 0?ce:[...ce,pt],coerce:Ke,mask:Je,message:se.message}))Ne[0]?(_e=Ne[0].refinement!=null?"not_refined":"not_valid",yield[Ne[0],void 0]):Ke&&(pt=Ne[1],Fe===void 0?F=pt:F instanceof Map?F.set(Fe,pt):F instanceof Set?F.add(pt):j(F)&&(pt!==void 0||Fe in F)&&(F[Fe]=pt));if(_e!=="not_valid")for(let Fe of Q.refiner(F,He))Fe.explanation=se.message,_e="not_refined",yield[Fe,void 0];_e==="valid"&&(yield[void 0,F])}class I{constructor(Q){let{type:se,schema:me,validator:ce,refiner:Ke,coercer:Je=_e=>_e,entries:He=function*(){}}=Q;this.type=se,this.schema=me,this.entries=He,this.coercer=Je,ce?this.validator=(_e,Fe)=>S(ce(_e,Fe),Fe,this,_e):this.validator=()=>[],Ke?this.refiner=(_e,Fe)=>S(Ke(_e,Fe),Fe,this,_e):this.refiner=()=>[]}assert(Q,se){return x(Q,this,se)}create(Q,se){return C(Q,this,se)}is(Q){return U(Q,this)}mask(Q,se){return N(Q,this,se)}validate(Q,se={}){return K(Q,this,se)}}function x(F,Q,se){let me=K(F,Q,{message:se});if(me[0])throw me[0]}function C(F,Q,se){let me=K(F,Q,{coerce:!0,message:se});if(!me[0])return me[1];throw me[0]}function N(F,Q,se){let me=K(F,Q,{coerce:!0,mask:!0,message:se});if(!me[0])return me[1];throw me[0]}function U(F,Q){return!K(F,Q)[0]}function K(F,Q,se={}){let me=k(F,Q,se),ce=function(Ke){let{done:Je,value:He}=Ke.next();return Je?void 0:He}(me);return ce[0]?[new W(ce[0],function*(){for(let Ke of me)Ke[0]&&(yield Ke[0])}),void 0]:[void 0,ce[1]]}function Y(F,Q){return new I({type:F,schema:null,validator:Q})}function ee(){return Y("never",()=>!1)}function fe(F){let Q=F?Object.keys(F):[],se=ee();return new I({type:"object",schema:F||null,*entries(me){if(F&&j(me)){let ce=new Set(Object.keys(me));for(let Ke of Q)ce.delete(Ke),yield[Ke,me[Ke],F[Ke]];for(let Ke of ce)yield[Ke,me[Ke],se]}},validator:me=>j(me)||`Expected an object, but received: ${y(me)}`,coercer:me=>j(me)?{...me}:me})}function Se(F){return new I({...F,validator:(Q,se)=>Q===void 0||F.validator(Q,se),refiner:(Q,se)=>Q===void 0||F.refiner(Q,se)})}function ze(){return Y("string",F=>typeof F=="string"||`Expected a string, but received: ${y(F)}`)}function Ue(F){let Q=Object.keys(F);return new I({type:"type",schema:F,*entries(se){if(j(se))for(let me of Q)yield[me,se[me],F[me]]},validator:se=>j(se)||`Expected an object, but received: ${y(se)}`,coercer:se=>j(se)?{...se}:se})}function at(){return Y("unknown",()=>!0)}function vt(F,Q,se){return new I({...F,coercer:(me,ce)=>U(me,Q)?F.coercer(se(me,ce),ce):F.coercer(me,ce)})}function jt(F){return F instanceof Map||F instanceof Set?F.size:F.length}function re(F,Q,se){return new I({...F,*refiner(me,ce){for(let Ke of(yield*F.refiner(me,ce),S(se(me,ce),ce,F,me)))yield{...Ke,refinement:Q}}})}Z.Struct=I,Z.StructError=W,Z.any=function(){return Y("any",()=>!0)},Z.array=function(F){return new I({type:"array",schema:F,*entries(Q){if(F&&Array.isArray(Q))for(let[se,me]of Q.entries())yield[se,me,F]},coercer:Q=>Array.isArray(Q)?Q.slice():Q,validator:Q=>Array.isArray(Q)||`Expected an array value, but received: ${y(Q)}`})},Z.assert=x,Z.assign=function(...F){let Q=F[0].type==="type",se=Object.assign({},...F.map(me=>me.schema));return Q?Ue(se):fe(se)},Z.bigint=function(){return Y("bigint",F=>typeof F=="bigint")},Z.boolean=function(){return Y("boolean",F=>typeof F=="boolean")},Z.coerce=vt,Z.create=C,Z.date=function(){return Y("date",F=>F instanceof Date&&!isNaN(F.getTime())||`Expected a valid \`Date\` object, but received: ${y(F)}`)},Z.defaulted=function(F,Q,se={}){return vt(F,at(),me=>{let ce=typeof Q=="function"?Q():Q;if(me===void 0)return ce;if(!se.strict&&z(me)&&z(ce)){let Ke={...me},Je=!1;for(let He in ce)Ke[He]===void 0&&(Ke[He]=ce[He],Je=!0);if(Je)return Ke}return me})},Z.define=Y,Z.deprecated=function(F,Q){return new I({...F,refiner:(se,me)=>se===void 0||F.refiner(se,me),validator:(se,me)=>se===void 0||(Q(se,me),F.validator(se,me))})},Z.dynamic=function(F){return new I({type:"dynamic",schema:null,*entries(Q,se){yield*F(Q,se).entries(Q,se)},validator:(Q,se)=>F(Q,se).validator(Q,se),coercer:(Q,se)=>F(Q,se).coercer(Q,se),refiner:(Q,se)=>F(Q,se).refiner(Q,se)})},Z.empty=function(F){return re(F,"empty",Q=>{let se=jt(Q);return se===0||`Expected an empty ${F.type} but received one with a size of \`${se}\``})},Z.enums=function(F){let Q={},se=F.map(me=>y(me)).join();for(let me of F)Q[me]=me;return new I({type:"enums",schema:Q,validator:me=>F.includes(me)||`Expected one of \`${se}\`, but received: ${y(me)}`})},Z.func=function(){return Y("func",F=>typeof F=="function"||`Expected a function, but received: ${y(F)}`)},Z.instance=function(F){return Y("instance",Q=>Q instanceof F||`Expected a \`${F.name}\` instance, but received: ${y(Q)}`)},Z.integer=function(){return Y("integer",F=>typeof F=="number"&&!isNaN(F)&&Number.isInteger(F)||`Expected an integer, but received: ${y(F)}`)},Z.intersection=function(F){return new I({type:"intersection",schema:null,*entries(Q,se){for(let me of F)yield*me.entries(Q,se)},*validator(Q,se){for(let me of F)yield*me.validator(Q,se)},*refiner(Q,se){for(let me of F)yield*me.refiner(Q,se)}})},Z.is=U,Z.lazy=function(F){let Q;return new I({type:"lazy",schema:null,*entries(se,me){Q??(Q=F()),yield*Q.entries(se,me)},validator:(se,me)=>(Q??(Q=F()),Q.validator(se,me)),coercer:(se,me)=>(Q??(Q=F()),Q.coercer(se,me)),refiner:(se,me)=>(Q??(Q=F()),Q.refiner(se,me))})},Z.literal=function(F){let Q=y(F),se=typeof F;return new I({type:"literal",schema:se==="string"||se==="number"||se==="boolean"?F:null,validator:me=>me===F||`Expected the literal \`${Q}\`, but received: ${y(me)}`})},Z.map=function(F,Q){return new I({type:"map",schema:null,*entries(se){if(F&&Q&&se instanceof Map)for(let[me,ce]of se.entries())yield[me,me,F],yield[me,ce,Q]},coercer:se=>se instanceof Map?new Map(se):se,validator:se=>se instanceof Map||`Expected a \`Map\` object, but received: ${y(se)}`})},Z.mask=N,Z.max=function(F,Q,se={}){let{exclusive:me}=se;return re(F,"max",ce=>me?ce<Q:ce<=Q||`Expected a ${F.type} less than ${me?"":"or equal to "}${Q} but received \`${ce}\``)},Z.min=function(F,Q,se={}){let{exclusive:me}=se;return re(F,"min",ce=>me?ce>Q:ce>=Q||`Expected a ${F.type} greater than ${me?"":"or equal to "}${Q} but received \`${ce}\``)},Z.never=ee,Z.nonempty=function(F){return re(F,"nonempty",Q=>jt(Q)>0||`Expected a nonempty ${F.type} but received an empty one`)},Z.nullable=function(F){return new I({...F,validator:(Q,se)=>Q===null||F.validator(Q,se),refiner:(Q,se)=>Q===null||F.refiner(Q,se)})},Z.number=function(){return Y("number",F=>typeof F=="number"&&!isNaN(F)||`Expected a number, but received: ${y(F)}`)},Z.object=fe,Z.omit=function(F,Q){let{schema:se}=F,me={...se};for(let ce of Q)delete me[ce];return F.type==="type"?Ue(me):fe(me)},Z.optional=Se,Z.partial=function(F){let Q=F instanceof I?{...F.schema}:{...F};for(let se in Q)Q[se]=Se(Q[se]);return fe(Q)},Z.pattern=function(F,Q){return re(F,"pattern",se=>Q.test(se)||`Expected a ${F.type} matching \`/${Q.source}/\` but received "${se}"`)},Z.pick=function(F,Q){let{schema:se}=F,me={};for(let ce of Q)me[ce]=se[ce];return fe(me)},Z.record=function(F,Q){return new I({type:"record",schema:null,*entries(se){if(j(se))for(let me in se){let ce=se[me];yield[me,me,F],yield[me,ce,Q]}},validator:se=>j(se)||`Expected an object, but received: ${y(se)}`})},Z.refine=re,Z.regexp=function(){return Y("regexp",F=>F instanceof RegExp)},Z.set=function(F){return new I({type:"set",schema:null,*entries(Q){if(F&&Q instanceof Set)for(let se of Q)yield[se,se,F]},coercer:Q=>Q instanceof Set?new Set(Q):Q,validator:Q=>Q instanceof Set||`Expected a \`Set\` object, but received: ${y(Q)}`})},Z.size=function(F,Q,se=Q){let me=`Expected a ${F.type}`,ce=Q===se?`of \`${Q}\``:`between \`${Q}\` and \`${se}\``;return re(F,"size",Ke=>{if(typeof Ke=="number"||Ke instanceof Date)return Q<=Ke&&Ke<=se||`${me} ${ce} but received \`${Ke}\``;if(Ke instanceof Map||Ke instanceof Set){let{size:Je}=Ke;return Q<=Je&&Je<=se||`${me} with a size ${ce} but received one with a size of \`${Je}\``}{let{length:Je}=Ke;return Q<=Je&&Je<=se||`${me} with a length ${ce} but received one with a length of \`${Je}\``}})},Z.string=ze,Z.struct=function(F,Q){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),Y(F,Q)},Z.trimmed=function(F){return vt(F,ze(),Q=>Q.trim())},Z.tuple=function(F){let Q=ee();return new I({type:"tuple",schema:null,*entries(se){if(Array.isArray(se)){let me=Math.max(F.length,se.length);for(let ce=0;ce<me;ce++)yield[ce,se[ce],F[ce]||Q]}},validator:se=>Array.isArray(se)||`Expected an array, but received: ${y(se)}`})},Z.type=Ue,Z.union=function(F){let Q=F.map(se=>se.type).join(" | ");return new I({type:"union",schema:null,coercer(se){for(let me of F){let[ce,Ke]=me.validate(se,{coerce:!0});if(!ce)return Ke}return se},validator(se,me){let ce=[];for(let Ke of F){let[...Je]=k(se,Ke,me),[He]=Je;if(!He[0])return[];for(let[_e]of Je)_e&&ce.push(_e)}return[`Expected the value to satisfy a union of \`${Q}\`, but received: ${y(se)}`,...ce]}})},Z.unknown=at,Z.validate=K})(q)}})[318](0,ae),Jt.exports=ae})()},8408:(Jt,ae,M)=>{"use strict";function q(Z,W,{checkForDefaultPrevented:j=!0}={}){return function(z){if(Z?.(z),j===!1||!z.defaultPrevented)return W?.(z)}}M.d(ae,{M:()=>q})},3179:(Jt,ae,M)=>{"use strict";M.d(ae,{B:()=>z});var q=M(9220),Z=M(926),W=M(9677),j=M(2001);function z(y){let S=y+"CollectionProvider",[k,I]=function(Se,ze=[]){let Ue=[],at=()=>{let vt=Ue.map(jt=>q.createContext(jt));return function(jt){let re=jt?.[Se]||vt;return q.useMemo(()=>({[`__scope${Se}`]:{...jt,[Se]:re}}),[jt,re])}};return at.scopeName=Se,[function(vt,jt){let re=q.createContext(jt),F=Ue.length;function Q(se){let{scope:me,children:ce,...Ke}=se,Je=me?.[Se][F]||re,He=q.useMemo(()=>Ke,Object.values(Ke));return(0,Z.jsx)(Je.Provider,{value:He,children:ce})}return Ue=[...Ue,jt],Q.displayName=vt+"Provider",[Q,function(se,me){let ce=me?.[Se][F]||re,Ke=q.useContext(ce);if(Ke)return Ke;if(jt!==void 0)return jt;throw Error(`\`${se}\` must be used within \`${vt}\``)}]},function(...vt){let jt=vt[0];if(vt.length===1)return jt;let re=()=>{let F=vt.map(Q=>({useScope:Q(),scopeName:Q.scopeName}));return function(Q){let se=F.reduce((me,{useScope:ce,scopeName:Ke})=>{let Je=ce(Q)[`__scope${Ke}`];return{...me,...Je}},{});return q.useMemo(()=>({[`__scope${jt.scopeName}`]:se}),[se])}};return re.scopeName=jt.scopeName,re}(at,...ze)]}(S),[x,C]=k(S,{collectionRef:{current:null},itemMap:new Map}),N=Se=>{let{scope:ze,children:Ue}=Se,at=q.useRef(null),vt=q.useRef(new Map).current;return(0,Z.jsx)(x,{scope:ze,itemMap:vt,collectionRef:at,children:Ue})};N.displayName=S;let U=y+"CollectionSlot",K=q.forwardRef((Se,ze)=>{let{scope:Ue,children:at}=Se,vt=C(U,Ue),jt=(0,W.e)(ze,vt.collectionRef);return(0,Z.jsx)(j.g7,{ref:jt,children:at})});K.displayName=U;let Y=y+"CollectionItemSlot",ee="data-radix-collection-item",fe=q.forwardRef((Se,ze)=>{let{scope:Ue,children:at,...vt}=Se,jt=q.useRef(null),re=(0,W.e)(ze,jt),F=C(Y,Ue);return q.useEffect(()=>(F.itemMap.set(jt,{ref:jt,...vt}),()=>void F.itemMap.delete(jt))),(0,Z.jsx)(j.g7,{[ee]:"",ref:re,children:at})});return fe.displayName=Y,[{Provider:N,Slot:K,ItemSlot:fe},function(Se){let ze=C(y+"CollectionConsumer",Se);return q.useCallback(()=>{let Ue=ze.collectionRef.current;if(!Ue)return[];let at=Array.from(Ue.querySelectorAll(`[${ee}]`));return Array.from(ze.itemMap.values()).sort((vt,jt)=>at.indexOf(vt.ref.current)-at.indexOf(jt.ref.current))},[ze.collectionRef,ze.itemMap])},I]}},9677:(Jt,ae,M)=>{"use strict";M.d(ae,{F:()=>Z,e:()=>W});var q=M(9220);function Z(...j){return z=>j.forEach(y=>{typeof y=="function"?y(z):y!=null&&(y.current=z)})}function W(...j){return q.useCallback(Z(...j),j)}},6769:(Jt,ae,M)=>{"use strict";M.d(ae,{b:()=>j,k:()=>W});var q=M(9220),Z=M(926);function W(z,y){let S=q.createContext(y),k=I=>{let{children:x,...C}=I,N=q.useMemo(()=>C,Object.values(C));return(0,Z.jsx)(S.Provider,{value:N,children:x})};return k.displayName=z+"Provider",[k,function(I){let x=q.useContext(S);if(x)return x;if(y!==void 0)return y;throw Error(`\`${I}\` must be used within \`${z}\``)}]}function j(z,y=[]){let S=[],k=()=>{let I=S.map(x=>q.createContext(x));return function(x){let C=x?.[z]||I;return q.useMemo(()=>({[`__scope${z}`]:{...x,[z]:C}}),[x,C])}};return k.scopeName=z,[function(I,x){let C=q.createContext(x),N=S.length;S=[...S,x];let U=K=>{let{scope:Y,children:ee,...fe}=K,Se=Y?.[z]?.[N]||C,ze=q.useMemo(()=>fe,Object.values(fe));return(0,Z.jsx)(Se.Provider,{value:ze,children:ee})};return U.displayName=I+"Provider",[U,function(K,Y){let ee=Y?.[z]?.[N]||C,fe=q.useContext(ee);if(fe)return fe;if(x!==void 0)return x;throw Error(`\`${K}\` must be used within \`${I}\``)}]},function(...I){let x=I[0];if(I.length===1)return x;let C=()=>{let N=I.map(U=>({useScope:U(),scopeName:U.scopeName}));return function(U){let K=N.reduce((Y,{useScope:ee,scopeName:fe})=>{let Se=ee(U)[`__scope${fe}`];return{...Y,...Se}},{});return q.useMemo(()=>({[`__scope${x.scopeName}`]:K}),[K])}};return C.scopeName=x.scopeName,C}(k,...y)]}},1335:(Jt,ae,M)=>{"use strict";M.d(ae,{I0:()=>Y,XB:()=>x,fC:()=>K});var q,Z=M(9220),W=M(8408),j=M(2316),z=M(9677),y=M(8466),S=M(926),k="dismissableLayer.update",I=Z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),x=Z.forwardRef((ee,fe)=>{let{disableOutsidePointerEvents:Se=!1,onEscapeKeyDown:ze,onPointerDownOutside:Ue,onFocusOutside:at,onInteractOutside:vt,onDismiss:jt,...re}=ee,F=Z.useContext(I),[Q,se]=Z.useState(null),me=Q?.ownerDocument??hn?.document,[,ce]=Z.useState({}),Ke=(0,z.e)(fe,we=>se(we)),Je=Array.from(F.layers),[He]=[...F.layersWithOutsidePointerEventsDisabled].slice(-1),_e=Je.indexOf(He),Fe=Q?Je.indexOf(Q):-1,pt=F.layersWithOutsidePointerEventsDisabled.size>0,lr=Fe>=_e,Ne=function(we,Ce=hn?.document){let We=(0,y.W)(we),ve=Z.useRef(!1),Ve=Z.useRef(()=>{});return Z.useEffect(()=>{let gt=lt=>{if(lt.target&&!ve.current){let et=function(){U("dismissableLayer.pointerDownOutside",We,bt,{discrete:!0})},bt={originalEvent:lt};lt.pointerType==="touch"?(Ce.removeEventListener("click",Ve.current),Ve.current=et,Ce.addEventListener("click",Ve.current,{once:!0})):et()}else Ce.removeEventListener("click",Ve.current);ve.current=!1},mt=window.setTimeout(()=>{Ce.addEventListener("pointerdown",gt)},0);return()=>{window.clearTimeout(mt),Ce.removeEventListener("pointerdown",gt),Ce.removeEventListener("click",Ve.current)}},[Ce,We]),{onPointerDownCapture:()=>ve.current=!0}}(we=>{let Ce=we.target,We=[...F.branches].some(ve=>ve.contains(Ce));!lr||We||(Ue?.(we),vt?.(we),we.defaultPrevented||jt?.())},me),tt=function(we,Ce=hn?.document){let We=(0,y.W)(we),ve=Z.useRef(!1);return Z.useEffect(()=>{let Ve=gt=>{gt.target&&!ve.current&&U("dismissableLayer.focusOutside",We,{originalEvent:gt},{discrete:!1})};return Ce.addEventListener("focusin",Ve),()=>Ce.removeEventListener("focusin",Ve)},[Ce,We]),{onFocusCapture:()=>ve.current=!0,onBlurCapture:()=>ve.current=!1}}(we=>{let Ce=we.target;[...F.branches].some(We=>We.contains(Ce))||(at?.(we),vt?.(we),we.defaultPrevented||jt?.())},me);return function(we,Ce=hn?.document){let We=(0,y.W)(we);Z.useEffect(()=>{let ve=Ve=>{Ve.key==="Escape"&&We(Ve)};return Ce.addEventListener("keydown",ve,{capture:!0}),()=>Ce.removeEventListener("keydown",ve,{capture:!0})},[We,Ce])}(we=>{Fe!==F.layers.size-1||(ze?.(we),!we.defaultPrevented&&jt&&(we.preventDefault(),jt()))},me),Z.useEffect(()=>{if(Q)return Se&&(F.layersWithOutsidePointerEventsDisabled.size===0&&(q=me.body.style.pointerEvents,me.body.style.pointerEvents="none"),F.layersWithOutsidePointerEventsDisabled.add(Q)),F.layers.add(Q),N(),()=>{Se&&F.layersWithOutsidePointerEventsDisabled.size===1&&(me.body.style.pointerEvents=q)}},[Q,me,Se,F]),Z.useEffect(()=>()=>{Q&&(F.layers.delete(Q),F.layersWithOutsidePointerEventsDisabled.delete(Q),N())},[Q,F]),Z.useEffect(()=>{let we=()=>ce({});return document.addEventListener(k,we),()=>document.removeEventListener(k,we)},[]),(0,S.jsx)(j.WV.div,{...re,ref:Ke,style:{pointerEvents:pt?lr?"auto":"none":void 0,...ee.style},onFocusCapture:(0,W.M)(ee.onFocusCapture,tt.onFocusCapture),onBlurCapture:(0,W.M)(ee.onBlurCapture,tt.onBlurCapture),onPointerDownCapture:(0,W.M)(ee.onPointerDownCapture,Ne.onPointerDownCapture)})});x.displayName="DismissableLayer";var C=Z.forwardRef((ee,fe)=>{let Se=Z.useContext(I),ze=Z.useRef(null),Ue=(0,z.e)(fe,ze);return Z.useEffect(()=>{let at=ze.current;if(at)return Se.branches.add(at),()=>{Se.branches.delete(at)}},[Se.branches]),(0,S.jsx)(j.WV.div,{...ee,ref:Ue})});function N(){let ee=new CustomEvent(k);document.dispatchEvent(ee)}function U(ee,fe,Se,{discrete:ze}){let Ue=Se.originalEvent.target,at=new CustomEvent(ee,{bubbles:!1,cancelable:!0,detail:Se});fe&&Ue.addEventListener(ee,fe,{once:!0}),ze?(0,j.jH)(Ue,at):Ue.dispatchEvent(at)}C.displayName="DismissableLayerBranch";var K=x,Y=C},1338:(Jt,ae,M)=>{"use strict";M.d(ae,{h:()=>y});var q=M(9220),Z=M(8066),W=M(2316),j=M(7730),z=M(926),y=q.forwardRef((S,k)=>{let{container:I,...x}=S,[C,N]=q.useState(!1);(0,j.b)(()=>N(!0),[]);let U=I||C&&hn?.document?.body;return U?Z.createPortal((0,z.jsx)(W.WV.div,{...x,ref:k}),U):null});y.displayName="Portal"},27:(Jt,ae,M)=>{"use strict";M.d(ae,{z:()=>j});var q=M(9220),Z=M(9677),W=M(7730),j=y=>{let{present:S,children:k}=y,I=function(N){var U,K;let[Y,ee]=q.useState(),fe=q.useRef({}),Se=q.useRef(N),ze=q.useRef("none"),[Ue,at]=(U=N?"mounted":"unmounted",K={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},q.useReducer((vt,jt)=>K[vt][jt]??vt,U));return q.useEffect(()=>{let vt=z(fe.current);ze.current=Ue==="mounted"?vt:"none"},[Ue]),(0,W.b)(()=>{let vt=fe.current,jt=Se.current;if(jt!==N){let re=ze.current,F=z(vt);N?at("MOUNT"):F==="none"||vt?.display==="none"?at("UNMOUNT"):at(jt&&re!==F?"ANIMATION_OUT":"UNMOUNT"),Se.current=N}},[N,at]),(0,W.b)(()=>{if(Y){let vt,jt=Y.ownerDocument.defaultView??window,re=Q=>{let se=z(fe.current).includes(Q.animationName);if(Q.target===Y&&se&&(at("ANIMATION_END"),!Se.current)){let me=Y.style.animationFillMode;Y.style.animationFillMode="forwards",vt=jt.setTimeout(()=>{Y.style.animationFillMode==="forwards"&&(Y.style.animationFillMode=me)})}},F=Q=>{Q.target===Y&&(ze.current=z(fe.current))};return Y.addEventListener("animationstart",F),Y.addEventListener("animationcancel",re),Y.addEventListener("animationend",re),()=>{jt.clearTimeout(vt),Y.removeEventListener("animationstart",F),Y.removeEventListener("animationcancel",re),Y.removeEventListener("animationend",re)}}at("ANIMATION_END")},[Y,at]),{isPresent:["mounted","unmountSuspended"].includes(Ue),ref:q.useCallback(vt=>{vt&&(fe.current=getComputedStyle(vt)),ee(vt)},[])}}(S),x=typeof k=="function"?k({present:I.isPresent}):q.Children.only(k),C=(0,Z.e)(I.ref,function(N){let U=Object.getOwnPropertyDescriptor(N.props,"ref")?.get,K=U&&"isReactWarning"in U&&U.isReactWarning;return K?N.ref:(K=(U=Object.getOwnPropertyDescriptor(N,"ref")?.get)&&"isReactWarning"in U&&U.isReactWarning)?N.props.ref:N.props.ref||N.ref}(x));return typeof k=="function"||I.isPresent?q.cloneElement(x,{ref:C}):null};function z(y){return y?.animationName||"none"}j.displayName="Presence"},2316:(Jt,ae,M)=>{"use strict";M.d(ae,{WV:()=>z,jH:()=>y});var q=M(9220),Z=M(8066),W=M(2001),j=M(926),z=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((S,k)=>{let I=q.forwardRef((x,C)=>{let{asChild:N,...U}=x,K=N?W.g7:k;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,j.jsx)(K,{...U,ref:C})});return I.displayName=`Primitive.${k}`,{...S,[k]:I}},{});function y(S,k){S&&Z.flushSync(()=>S.dispatchEvent(k))}},2001:(Jt,ae,M)=>{"use strict";M.d(ae,{g7:()=>j});var q=M(9220),Z=M(9677),W=M(926),j=q.forwardRef((k,I)=>{let{children:x,...C}=k,N=q.Children.toArray(x),U=N.find(S);if(U){let K=U.props.children,Y=N.map(ee=>ee!==U?ee:q.Children.count(K)>1?q.Children.only(null):q.isValidElement(K)?K.props.children:null);return(0,W.jsx)(z,{...C,ref:I,children:q.isValidElement(K)?q.cloneElement(K,void 0,Y):null})}return(0,W.jsx)(z,{...C,ref:I,children:x})});j.displayName="Slot";var z=q.forwardRef((k,I)=>{let{children:x,...C}=k;if(q.isValidElement(x)){let N=function(U){let K=Object.getOwnPropertyDescriptor(U.props,"ref")?.get,Y=K&&"isReactWarning"in K&&K.isReactWarning;return Y?U.ref:(Y=(K=Object.getOwnPropertyDescriptor(U,"ref")?.get)&&"isReactWarning"in K&&K.isReactWarning)?U.props.ref:U.props.ref||U.ref}(x);return q.cloneElement(x,{...function(U,K){let Y={...K};for(let ee in K){let fe=U[ee],Se=K[ee];/^on[A-Z]/.test(ee)?fe&&Se?Y[ee]=(...ze)=>{Se(...ze),fe(...ze)}:fe&&(Y[ee]=fe):ee==="style"?Y[ee]={...fe,...Se}:ee==="className"&&(Y[ee]=[fe,Se].filter(Boolean).join(" "))}return{...U,...Y}}(C,x.props),ref:I?(0,Z.F)(I,N):N})}return q.Children.count(x)>1?q.Children.only(null):null});z.displayName="SlotClone";var y=({children:k})=>(0,W.jsx)(W.Fragment,{children:k});function S(k){return q.isValidElement(k)&&k.type===y}},8466:(Jt,ae,M)=>{"use strict";M.d(ae,{W:()=>Z});var q=M(9220);function Z(W){let j=q.useRef(W);return q.useEffect(()=>{j.current=W}),q.useMemo(()=>(...z)=>j.current?.(...z),[])}},8878:(Jt,ae,M)=>{"use strict";M.d(ae,{T:()=>W});var q=M(9220),Z=M(8466);function W({prop:j,defaultProp:z,onChange:y=()=>{}}){let[S,k]=function({defaultProp:N,onChange:U}){let K=q.useState(N),[Y]=K,ee=q.useRef(Y),fe=(0,Z.W)(U);return q.useEffect(()=>{ee.current!==Y&&(fe(Y),ee.current=Y)},[Y,ee,fe]),K}({defaultProp:z,onChange:y}),I=j!==void 0,x=I?j:S,C=(0,Z.W)(y);return[x,q.useCallback(N=>{if(I){let U=typeof N=="function"?N(j):N;U!==j&&C(U)}else k(N)},[I,j,k,C])]}},7730:(Jt,ae,M)=>{"use strict";M.d(ae,{b:()=>Z});var q=M(9220),Z=hn?.document?q.useLayoutEffect:()=>{}},8110:(Jt,ae,M)=>{"use strict";M.d(ae,{T:()=>j});var q=M(9220),Z=M(2316),W=M(926),j=q.forwardRef((z,y)=>(0,W.jsx)(Z.WV.span,{...z,ref:y,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...z.style}}));j.displayName="VisuallyHidden"},8206:(Jt,ae,M)=>{"use strict";M.d(ae,{j:()=>j});var q=M(5116);let Z=z=>typeof z=="boolean"?`${z}`:z===0?"0":z,W=q.W,j=(z,y)=>S=>{var k;if(y?.variants==null)return W(z,S?.class,S?.className);let{variants:I,defaultVariants:x}=y,C=Object.keys(I).map(U=>{let K=S?.[U],Y=x?.[U];if(K===null)return null;let ee=Z(K)||Z(Y);return I[U][ee]}),N=S&&Object.entries(S).reduce((U,K)=>{let[Y,ee]=K;return ee===void 0||(U[Y]=ee),U},{});return W(z,C,y==null||(k=y.compoundVariants)===null||k===void 0?void 0:k.reduce((U,K)=>{let{class:Y,className:ee,...fe}=K;return Object.entries(fe).every(Se=>{let[ze,Ue]=Se;return Array.isArray(Ue)?Ue.includes({...x,...N}[ze]):{...x,...N}[ze]===Ue})?[...U,Y,ee]:U},[]),S?.class,S?.className)}},5116:(Jt,ae,M)=>{"use strict";function q(){for(var Z,W,j=0,z="",y=arguments.length;j<y;j++)(Z=arguments[j])&&(W=function S(k){var I,x,C="";if(typeof k=="string"||typeof k=="number")C+=k;else if(typeof k=="object")if(Array.isArray(k)){var N=k.length;for(I=0;I<N;I++)k[I]&&(x=S(k[I]))&&(C&&(C+=" "),C+=x)}else for(x in k)k[x]&&(C&&(C+=" "),C+=x);return C}(Z))&&(z&&(z+=" "),z+=W);return z}M.d(ae,{W:()=>q})},7490:(Jt,ae,M)=>{"use strict";M.d(ae,{Dv:()=>C,KO:()=>N,zt:()=>z});var q=M(9220),Z=M(9798);let W=(0,q.createContext)(void 0),j=U=>{let K=(0,q.useContext)(W);return U?.store||K||(0,Z.K7)()},z=({children:U,store:K})=>{let Y=(0,q.useRef)();return K||Y.current||(Y.current=(0,Z.MT)()),(0,q.createElement)(W.Provider,{value:K||Y.current},U)},y=U=>typeof U?.then=="function",S=U=>{U.status="pending",U.then(K=>{U.status="fulfilled",U.value=K},K=>{U.status="rejected",U.reason=K})},k=q.use||(U=>{if(U.status==="pending")throw U;if(U.status==="fulfilled")return U.value;throw U.status==="rejected"?U.reason:(S(U),U)}),I=new WeakMap,x=U=>{let K=I.get(U);return K||(K=new Promise((Y,ee)=>{let fe=U,Se=at=>vt=>{fe===at&&Y(vt)},ze=at=>vt=>{fe===at&&ee(vt)},Ue=at=>{"onCancel"in at&&typeof at.onCancel=="function"&&at.onCancel(vt=>{if(vt===at)throw Error("[Bug] p is not updated even after cancelation");y(vt)?(I.set(vt,K),fe=vt,vt.then(Se(vt),ze(vt)),Ue(vt)):Y(vt)})};U.then(Se(U),ze(U)),Ue(U)}),I.set(U,K)),K};function C(U,K){let Y=j(K),[[ee,fe,Se],ze]=(0,q.useReducer)(at=>{let vt=Y.get(U);return Object.is(at[0],vt)&&at[1]===Y&&at[2]===U?at:[vt,Y,U]},void 0,()=>[Y.get(U),Y,U]),Ue=ee;return(fe!==Y||Se!==U)&&(ze(),Ue=Y.get(U)),K?.delay,(0,q.useDebugValue)(Ue),y(Ue)?k(x(Ue)):Ue}function N(U,K){return[C(U,K),function(Y,ee){let fe=j(ee);return(0,q.useCallback)((...Se)=>{if(!("write"in Y))throw Error("not writable atom");return fe.set(Y,...Se)},[fe,Y])}(U,K)]}},9798:(Jt,ae,M)=>{"use strict";let q;M.d(ae,{K7:()=>Q,MT:()=>F,cn:()=>W});let Z=0;function W(se,me){let ce=`atom${++Z}`,Ke={toString(){return this.debugLabel?ce+":"+this.debugLabel:ce}};return typeof se=="function"?Ke.read=se:(Ke.init=se,Ke.read=j,Ke.write=z),me&&(Ke.write=me),Ke}function j(se){return se(this)}function z(se,me,ce){return me(this,typeof ce=="function"?ce(se(this)):ce)}let y=(se,me)=>se.unstable_is?se.unstable_is(me):me===se,S=se=>"init"in se,k=se=>!!se.write,I=new WeakMap,x=se=>{var me;return U(se)&&!((me=I.get(se))!=null&&me[1])},C=(se,me)=>{let ce=I.get(se);if(ce)ce[1]=!0,ce[0].forEach(Ke=>Ke(me));else throw Error("[Bug] cancelable promise not found")},N=se=>{if(I.has(se))return;let me=[new Set,!1];I.set(se,me);let ce=()=>{me[1]=!0};se.then(ce,ce),se.onCancel=Ke=>{me[0].add(Ke)}},U=se=>typeof se?.then=="function",K=se=>"v"in se||"e"in se,Y=se=>{if("e"in se)throw se.e;if(!("v"in se))throw Error("[Bug] atom state is not initialized");return se.v},ee=(se,me,ce)=>{ce.p.has(se)||(ce.p.add(se),me.then(()=>{ce.p.delete(se)},()=>{ce.p.delete(se)}))},fe=(se,me,ce,Ke,Je)=>{var He;if(Ke===me)throw Error("[Bug] atom cannot depend on itself");ce.d.set(Ke,Je.n),x(ce.v)&&ee(me,ce.v,Je),(He=Je.m)==null||He.t.add(me),se&&Ue(se,Ke,me)},Se=()=>[new Map,new Map,new Set],ze=(se,me,ce)=>{se[0].has(me)||se[0].set(me,new Set),se[1].set(me,ce)},Ue=(se,me,ce)=>{let Ke=se[0].get(me);Ke&&Ke.add(ce)},at=(se,me)=>se[0].get(me),vt=(se,me)=>{se[2].add(me)},jt=se=>{let me,ce=!1,Ke=Je=>{try{Je()}catch(He){ce||(me=He,ce=!0)}};for(;se[1].size||se[2].size;){se[0].clear();let Je=new Set(se[1].values());se[1].clear();let He=new Set(se[2]);se[2].clear(),Je.forEach(_e=>{var Fe;return(Fe=_e.m)==null?void 0:Fe.l.forEach(Ke)}),He.forEach(Ke)}if(ce)throw me},re=(...[se,me,ce,Ke])=>{let Je;Je=new Set;let He=(ve,Ve,gt)=>{let mt="v"in Ve,lt=Ve.v,et=x(Ve.v)?Ve.v:null;if(U(gt)){for(let bt of(N(gt),Ve.d.keys()))ee(ve,gt,se(bt));Ve.v=gt,delete Ve.e}else Ve.v=gt,delete Ve.e;mt&&Object.is(lt,Ve.v)||(++Ve.n,et&&C(et,gt))},_e=(ve,Ve,gt)=>{var mt;let lt,et,bt=se(Ve);if(K(bt)&&(bt.m&&!gt?.has(Ve)||Array.from(bt.d).every(([Ee,Qe])=>_e(ve,Ee,gt).n===Qe)))return bt;bt.d.clear();let Ct=!0;try{let Ee=me(Ve,Qe=>{if(y(Ve,Qe)){let Rt=se(Qe);if(!K(Rt))if(S(Qe))He(Qe,Rt,Qe.init);else throw Error("no atom init");return Y(Rt)}let yt=_e(ve,Qe,gt);try{return Y(yt)}finally{if(Ct)fe(ve,Ve,bt,Qe,yt);else{let Rt=Se();fe(Rt,Ve,bt,Qe,yt),tt(Rt,Ve,bt),jt(Rt)}}},{get signal(){return lt||(lt=new AbortController),lt.signal},get setSelf(){return k(Ve)||console.warn("setSelf function cannot be used with read-only atom"),!et&&k(Ve)&&(et=(...Qe)=>{if(Ct&&console.warn("setSelf function cannot be called in sync"),!Ct)return Ne(Ve,...Qe)}),et}});if(He(Ve,bt,Ee),U(Ee)){(mt=Ee.onCancel)==null||mt.call(Ee,()=>lt?.abort());let Qe=()=>{if(bt.m){let yt=Se();tt(yt,Ve,bt),jt(yt)}};Ee.then(Qe,Qe)}return bt}catch(Ee){return delete bt.v,bt.e=Ee,++bt.n,bt}finally{Ct=!1}},Fe=(ve,Ve,gt)=>{var mt,lt;let et=new Map;for(let bt of((mt=gt.m)==null?void 0:mt.t)||[])et.set(bt,se(bt));for(let bt of gt.p)et.set(bt,se(bt));return(lt=at(ve,Ve))==null||lt.forEach(bt=>{et.set(bt,se(bt))}),et},pt=(ve,Ve,gt)=>{let[mt,lt]=function(bt,Ct,Ee){let Qe=[],yt=new Set,Rt=new Set,Et=[[Ct,Ee]];for(;Et.length>0;){let[rr,an]=Et[Et.length-1];if(Rt.has(rr)){Et.pop();continue}if(yt.has(rr)){Qe.push([rr,an,an.n]),Rt.add(rr),Et.pop();continue}for(let[Hr,gn]of(yt.add(rr),Fe(bt,rr,an)))rr===Hr||yt.has(Hr)||Et.push([Hr,gn])}return[Qe,Rt]}(ve,Ve,gt),et=new Set([Ve]);for(let bt=mt.length-1;bt>=0;--bt){let[Ct,Ee,Qe]=mt[bt],yt=!1;for(let Rt of Ee.d.keys())if(Rt!==Ct&&et.has(Rt)){yt=!0;break}yt&&(_e(ve,Ct,lt),tt(ve,Ct,Ee),Qe!==Ee.n&&(ze(ve,Ct,Ee),et.add(Ct))),lt.delete(Ct)}},lr=(ve,Ve,...gt)=>{let mt=!0;try{return ce(Ve,lt=>Y(_e(ve,lt)),(lt,...et)=>{let bt=se(lt);try{if(!y(Ve,lt))return lr(ve,lt,...et);{if(!S(lt))throw Error("atom not writable");let Ct=bt.n,Ee=et[0];He(lt,bt,Ee),tt(ve,lt,bt),Ct!==bt.n&&(ze(ve,lt,bt),pt(ve,lt,bt));return}}finally{mt||jt(ve)}},...gt)}finally{mt=!1}},Ne=(ve,...Ve)=>{let gt=Se();try{return lr(gt,ve,...Ve)}finally{jt(gt)}},tt=(ve,Ve,gt)=>{if(gt.m&&!x(gt.v)){for(let mt of gt.d.keys())gt.m.d.has(mt)||(we(ve,mt,se(mt)).t.add(Ve),gt.m.d.add(mt));for(let mt of gt.m.d||[])if(!gt.d.has(mt)){gt.m.d.delete(mt);let lt=Ce(ve,mt,se(mt));lt?.t.delete(Ve)}}},we=(ve,Ve,gt)=>{if(!gt.m){for(let mt of(_e(ve,Ve),gt.d.keys()))we(ve,mt,se(mt)).t.add(Ve);if(gt.m={l:new Set,d:new Set(gt.d.keys()),t:new Set},Je.add(Ve),k(Ve)){let mt,lt=gt.m,et=(bt,Ct)=>{let Ee=!0;mt=(...Qe)=>{try{return lr(bt,Ve,...Qe)}finally{Ee||jt(bt)}};try{return Ct()}finally{Ee=!1}};vt(ve,()=>{let bt=et(ve,()=>Ke(Ve,(...Ct)=>mt(...Ct)));bt&&(lt.u=Ct=>et(Ct,bt))})}}return gt.m},Ce=(ve,Ve,gt)=>{if(gt.m&&!gt.m.l.size&&!Array.from(gt.m.t).some(mt=>{var lt;return(lt=se(mt).m)==null?void 0:lt.d.has(Ve)})){let mt=gt.m.u;for(let lt of(mt&&vt(ve,()=>mt(ve)),delete gt.m,Je.delete(Ve),gt.d.keys())){let et=Ce(ve,lt,se(lt));et?.t.delete(Ve)}return}return gt.m},We={get:ve=>Y(_e(void 0,ve)),set:Ne,sub:(ve,Ve)=>{let gt=Se(),mt=se(ve),lt=we(gt,ve,mt).l;return lt.add(Ve),jt(gt),()=>{lt.delete(Ve);let et=Se();Ce(et,ve,mt),jt(et)}},unstable_derive:ve=>re(...ve(se,me,ce,Ke))};return Object.assign(We,{dev4_get_internal_weak_map:()=>({get:ve=>{let Ve=se(ve);if(Ve.n!==0)return Ve}}),dev4_get_mounted_atoms:()=>Je,dev4_restore_atoms:ve=>{let Ve=Se();for(let[gt,mt]of ve)if(S(gt)){let lt=se(gt),et=lt.n;He(gt,lt,mt),tt(Ve,gt,lt),et!==lt.n&&(ze(Ve,gt,lt),pt(Ve,gt,lt))}jt(Ve)}}),We},F=()=>{let se=new WeakMap;return re(me=>{if(!me)throw Error("Atom is undefined or null");let ce=se.get(me);return ce||(ce={d:new Map,p:new Set,n:0},se.set(me,ce)),ce},(me,...ce)=>me.read(...ce),(me,...ce)=>me.write(...ce),(me,...ce)=>{var Ke;return(Ke=me.onMount)==null?void 0:Ke.call(me,...ce)})},Q=()=>(q||(q=F(),hn.__JOTAI_DEFAULT_STORE__||(hn.__JOTAI_DEFAULT_STORE__=q),hn.__JOTAI_DEFAULT_STORE__!==q&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044")),q)},1035:(Jt,ae,M)=>{"use strict";let q,Z,W;M.d(ae,{Jn:()=>pt,qX:()=>Je,rh:()=>He,Xd:()=>Ke,Mq:()=>Ne,C6:()=>tt,ZF:()=>lr,KN:()=>we});var j=M(578),z=M(6850),y=M(2754);let S=(Ee,Qe)=>Qe.some(yt=>Ee instanceof yt),k=new WeakMap,I=new WeakMap,x=new WeakMap,C=new WeakMap,N=new WeakMap,U={get(Ee,Qe,yt){if(Ee instanceof IDBTransaction){if(Qe==="done")return I.get(Ee);if(Qe==="objectStoreNames")return Ee.objectStoreNames||x.get(Ee);if(Qe==="store")return yt.objectStoreNames[1]?void 0:yt.objectStore(yt.objectStoreNames[0])}return K(Ee[Qe])},set:(Ee,Qe,yt)=>(Ee[Qe]=yt,!0),has:(Ee,Qe)=>Ee instanceof IDBTransaction&&(Qe==="done"||Qe==="store")||Qe in Ee};function K(Ee){var Qe;if(Ee instanceof IDBRequest)return function(Rt){let Et=new Promise((rr,an)=>{let Hr=()=>{Rt.removeEventListener("success",gn),Rt.removeEventListener("error",Or)},gn=()=>{rr(K(Rt.result)),Hr()},Or=()=>{an(Rt.error),Hr()};Rt.addEventListener("success",gn),Rt.addEventListener("error",Or)});return Et.then(rr=>{rr instanceof IDBCursor&&k.set(rr,Rt)}).catch(()=>{}),N.set(Et,Rt),Et}(Ee);if(C.has(Ee))return C.get(Ee);let yt=typeof(Qe=Ee)=="function"?Qe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Qe)?function(...Rt){return Qe.apply(Y(this),Rt),K(k.get(this))}:function(...Rt){return K(Qe.apply(Y(this),Rt))}:function(Rt,...Et){let rr=Qe.call(Y(this),Rt,...Et);return x.set(rr,Rt.sort?Rt.sort():[Rt]),K(rr)}:(Qe instanceof IDBTransaction&&function(Rt){if(I.has(Rt))return;let Et=new Promise((rr,an)=>{let Hr=()=>{Rt.removeEventListener("complete",gn),Rt.removeEventListener("error",Or),Rt.removeEventListener("abort",Or)},gn=()=>{rr(),Hr()},Or=()=>{an(Rt.error||new DOMException("AbortError","AbortError")),Hr()};Rt.addEventListener("complete",gn),Rt.addEventListener("error",Or),Rt.addEventListener("abort",Or)});I.set(Rt,Et)}(Qe),S(Qe,q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Qe,U):Qe);return yt!==Ee&&(C.set(Ee,yt),N.set(yt,Ee)),yt}let Y=Ee=>N.get(Ee),ee=["get","getKey","getAll","getAllKeys","count"],fe=["put","add","delete","clear"],Se=new Map;function ze(Ee,Qe){if(!(Ee instanceof IDBDatabase&&!(Qe in Ee)&&typeof Qe=="string"))return;if(Se.get(Qe))return Se.get(Qe);let yt=Qe.replace(/FromIndex$/,""),Rt=Qe!==yt,Et=fe.includes(yt);if(!(yt in(Rt?IDBIndex:IDBObjectStore).prototype)||!(Et||ee.includes(yt)))return;let rr=async function(an,...Hr){let gn=this.transaction(an,Et?"readwrite":"readonly"),Or=gn.store;return Rt&&(Or=Or.index(Hr.shift())),(await Promise.all([Or[yt](...Hr),Et&&gn.done]))[0]};return Se.set(Qe,rr),rr}U={...W=U,get:(Ee,Qe,yt)=>ze(Ee,Qe)||W.get(Ee,Qe,yt),has:(Ee,Qe)=>!!ze(Ee,Qe)||W.has(Ee,Qe)};class Ue{constructor(Qe){this.container=Qe}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(!function(yt){let Rt=yt.getComponent();return Rt?.type==="VERSION"}(Qe))return null;{let yt=Qe.getImmediate();return`${yt.library}/${yt.version}`}}).filter(Qe=>Qe).join(" ")}}let at="@firebase/app",vt="0.10.16",jt=new z.Yd("@firebase/app"),re="[DEFAULT]",F={[at]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Q=new Map,se=new Map,me=new Map;function ce(Ee,Qe){try{Ee.container.addComponent(Qe)}catch(yt){jt.debug(`Component ${Qe.name} failed to register with FirebaseApp ${Ee.name}`,yt)}}function Ke(Ee){let Qe=Ee.name;if(me.has(Qe))return jt.debug(`There were multiple attempts to register component ${Qe}.`),!1;for(let yt of(me.set(Qe,Ee),Q.values()))ce(yt,Ee);for(let yt of se.values())ce(yt,Ee);return!0}function Je(Ee,Qe){let yt=Ee.container.getProvider("heartbeat").getImmediate({optional:!0});return yt&&yt.triggerHeartbeat(),Ee.container.getProvider(Qe)}function He(Ee){return Ee.settings!==void 0}let _e=new y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Fe{constructor(Qe,yt,Rt){this._isDeleted=!1,this._options=Object.assign({},Qe),this._config=Object.assign({},yt),this._name=yt.name,this._automaticDataCollectionEnabled=yt.automaticDataCollectionEnabled,this._container=Rt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Qe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Qe){this._isDeleted=Qe}checkDestroyed(){if(this.isDeleted)throw _e.create("app-deleted",{appName:this._name})}}let pt="11.0.2";function lr(Ee,Qe={}){let yt=Ee;typeof Qe!="object"&&(Qe={name:Qe});let Rt=Object.assign({name:re,automaticDataCollectionEnabled:!1},Qe),Et=Rt.name;if(typeof Et!="string"||!Et)throw _e.create("bad-app-name",{appName:String(Et)});if(yt||(yt=(0,y.aH)()),!yt)throw _e.create("no-options");let rr=Q.get(Et);if(rr){if((0,y.vZ)(yt,rr.options)&&(0,y.vZ)(Rt,rr.config))return rr;throw _e.create("duplicate-app",{appName:Et})}let an=new j.H0(Et);for(let gn of me.values())an.addComponent(gn);let Hr=new Fe(yt,Rt,an);return Q.set(Et,Hr),Hr}function Ne(Ee=re){let Qe=Q.get(Ee);if(!Qe&&Ee===re&&(0,y.aH)())return lr();if(!Qe)throw _e.create("no-app",{appName:Ee});return Qe}function tt(){return Array.from(Q.values())}function we(Ee,Qe,yt){var Rt;let Et=(Rt=F[Ee])!==null&&Rt!==void 0?Rt:Ee;yt&&(Et+=`-${yt}`);let rr=Et.match(/\s|\//),an=Qe.match(/\s|\//);if(rr||an){let Hr=[`Unable to register library "${Et}" with version "${Qe}":`];rr&&Hr.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),rr&&an&&Hr.push("and"),an&&Hr.push(`version name "${Qe}" contains illegal characters (whitespace or "/")`),jt.warn(Hr.join(" "));return}Ke(new j.wA(`${Et}-version`,()=>({library:Et,version:Qe}),"VERSION"))}let Ce="firebase-heartbeat-store",We=null;function ve(){return We||(We=function(Ee,Qe,{blocked:yt,upgrade:Rt,blocking:Et,terminated:rr}={}){let an=indexedDB.open(Ee,1),Hr=K(an);return Rt&&an.addEventListener("upgradeneeded",gn=>{Rt(K(an.result),gn.oldVersion,gn.newVersion,K(an.transaction),gn)}),yt&&an.addEventListener("blocked",gn=>yt(gn.oldVersion,gn.newVersion,gn)),Hr.then(gn=>{rr&&gn.addEventListener("close",()=>rr()),Et&&gn.addEventListener("versionchange",Or=>Et(Or.oldVersion,Or.newVersion,Or))}).catch(()=>{}),Hr}("firebase-heartbeat-database",0,{upgrade:(Ee,Qe)=>{if(Qe===0)try{Ee.createObjectStore(Ce)}catch(yt){console.warn(yt)}}}).catch(Ee=>{throw _e.create("idb-open",{originalErrorMessage:Ee.message})})),We}async function Ve(Ee){try{let Qe=(await ve()).transaction(Ce),yt=await Qe.objectStore(Ce).get(mt(Ee));return await Qe.done,yt}catch(Qe){if(Qe instanceof y.ZR)jt.warn(Qe.message);else{let yt=_e.create("idb-get",{originalErrorMessage:Qe?.message});jt.warn(yt.message)}}}async function gt(Ee,Qe){try{let yt=(await ve()).transaction(Ce,"readwrite");await yt.objectStore(Ce).put(Qe,mt(Ee)),await yt.done}catch(yt){if(yt instanceof y.ZR)jt.warn(yt.message);else{let Rt=_e.create("idb-set",{originalErrorMessage:yt?.message});jt.warn(Rt.message)}}}function mt(Ee){return`${Ee.name}!${Ee.options.appId}`}class lt{constructor(Qe){this.container=Qe,this._heartbeatsCache=null;let yt=this.container.getProvider("app").getImmediate();this._storage=new bt(yt),this._heartbeatsCachePromise=this._storage.read().then(Rt=>(this._heartbeatsCache=Rt,Rt))}async triggerHeartbeat(){var Qe,yt;try{let Rt=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=et();return((Qe=this._heartbeatsCache)===null||Qe===void 0?void 0:Qe.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((yt=this._heartbeatsCache)===null||yt===void 0?void 0:yt.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===Et||this._heartbeatsCache.heartbeats.some(rr=>rr.date===Et)?void 0:(this._heartbeatsCache.heartbeats.push({date:Et,agent:Rt}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(rr=>{let an=new Date(rr.date).valueOf();return Date.now()-an<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}catch(Rt){jt.warn(Rt)}}async getHeartbeatsHeader(){var Qe;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((Qe=this._heartbeatsCache)===null||Qe===void 0?void 0:Qe.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let yt=et(),{heartbeatsToSend:Rt,unsentEntries:Et}=function(an,Hr=1024){let gn=[],Or=an.slice();for(let wn of an){let Tn=gn.find(tn=>tn.agent===wn.agent);if(Tn){if(Tn.dates.push(wn.date),Ct(gn)>Hr){Tn.dates.pop();break}}else if(gn.push({agent:wn.agent,dates:[wn.date]}),Ct(gn)>Hr){gn.pop();break}Or=Or.slice(1)}return{heartbeatsToSend:gn,unsentEntries:Or}}(this._heartbeatsCache.heartbeats),rr=(0,y.L)(JSON.stringify({version:2,heartbeats:Rt}));return this._heartbeatsCache.lastSentHeartbeatDate=yt,Et.length>0?(this._heartbeatsCache.heartbeats=Et,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),rr}catch(yt){return jt.warn(yt),""}}}function et(){return new Date().toISOString().substring(0,10)}class bt{constructor(Qe){this.app=Qe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,y.hl)()&&(0,y.eu)().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let Qe=await Ve(this.app);return Qe?.heartbeats?Qe:{heartbeats:[]}}}async overwrite(Qe){var yt;if(await this._canUseIndexedDBPromise){let Rt=await this.read();return gt(this.app,{lastSentHeartbeatDate:(yt=Qe.lastSentHeartbeatDate)!==null&&yt!==void 0?yt:Rt.lastSentHeartbeatDate,heartbeats:Qe.heartbeats})}}async add(Qe){var yt;if(await this._canUseIndexedDBPromise){let Rt=await this.read();return gt(this.app,{lastSentHeartbeatDate:(yt=Qe.lastSentHeartbeatDate)!==null&&yt!==void 0?yt:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...Qe.heartbeats]})}}}function Ct(Ee){return(0,y.L)(JSON.stringify({version:2,heartbeats:Ee})).length}Ke(new j.wA("platform-logger",Ee=>new Ue(Ee),"PRIVATE")),Ke(new j.wA("heartbeat",Ee=>new lt(Ee),"PRIVATE")),we(at,vt,""),we(at,vt,"esm2017"),we("fire-js","")},578:(Jt,ae,M)=>{"use strict";M.d(ae,{H0:()=>z,wA:()=>Z});var q=M(2754);class Z{constructor(S,k,I){this.name=S,this.instanceFactory=k,this.type=I,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(S){return this.instantiationMode=S,this}setMultipleInstances(S){return this.multipleInstances=S,this}setServiceProps(S){return this.serviceProps=S,this}setInstanceCreatedCallback(S){return this.onInstanceCreated=S,this}}let W="[DEFAULT]";class j{constructor(S,k){this.name=S,this.container=k,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(S){let k=this.normalizeInstanceIdentifier(S);if(!this.instancesDeferred.has(k)){let I=new q.BH;if(this.instancesDeferred.set(k,I),this.isInitialized(k)||this.shouldAutoInitialize())try{let x=this.getOrInitializeService({instanceIdentifier:k});x&&I.resolve(x)}catch{}}return this.instancesDeferred.get(k).promise}getImmediate(S){var k;let I=this.normalizeInstanceIdentifier(S?.identifier),x=(k=S?.optional)!==null&&k!==void 0&&k;if(this.isInitialized(I)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:I})}catch(C){if(x)return null;throw C}else{if(x)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(S){if(S.name!==this.name)throw Error(`Mismatching Component ${S.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=S,this.shouldAutoInitialize()){if(S.instantiationMode==="EAGER")try{this.getOrInitializeService({instanceIdentifier:W})}catch{}for(let[k,I]of this.instancesDeferred.entries()){let x=this.normalizeInstanceIdentifier(k);try{let C=this.getOrInitializeService({instanceIdentifier:x});I.resolve(C)}catch{}}}}clearInstance(S=W){this.instancesDeferred.delete(S),this.instancesOptions.delete(S),this.instances.delete(S)}async delete(){let S=Array.from(this.instances.values());await Promise.all([...S.filter(k=>"INTERNAL"in k).map(k=>k.INTERNAL.delete()),...S.filter(k=>"_delete"in k).map(k=>k._delete())])}isComponentSet(){return this.component!=null}isInitialized(S=W){return this.instances.has(S)}getOptions(S=W){return this.instancesOptions.get(S)||{}}initialize(S={}){let{options:k={}}=S,I=this.normalizeInstanceIdentifier(S.instanceIdentifier);if(this.isInitialized(I))throw Error(`${this.name}(${I}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let x=this.getOrInitializeService({instanceIdentifier:I,options:k});for(let[C,N]of this.instancesDeferred.entries())I===this.normalizeInstanceIdentifier(C)&&N.resolve(x);return x}onInit(S,k){var I;let x=this.normalizeInstanceIdentifier(k),C=(I=this.onInitCallbacks.get(x))!==null&&I!==void 0?I:new Set;C.add(S),this.onInitCallbacks.set(x,C);let N=this.instances.get(x);return N&&S(N,x),()=>{C.delete(S)}}invokeOnInitCallbacks(S,k){let I=this.onInitCallbacks.get(k);if(I)for(let x of I)try{x(S,k)}catch{}}getOrInitializeService({instanceIdentifier:S,options:k={}}){let I=this.instances.get(S);if(!I&&this.component&&(I=this.component.instanceFactory(this.container,{instanceIdentifier:S===W?void 0:S,options:k}),this.instances.set(S,I),this.instancesOptions.set(S,k),this.invokeOnInitCallbacks(I,S),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,S,I)}catch{}return I||null}normalizeInstanceIdentifier(S=W){return this.component?this.component.multipleInstances?S:W:S}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}class z{constructor(S){this.name=S,this.providers=new Map}addComponent(S){let k=this.getProvider(S.name);if(k.isComponentSet())throw Error(`Component ${S.name} has already been registered with ${this.name}`);k.setComponent(S)}addOrOverwriteComponent(S){this.getProvider(S.name).isComponentSet()&&this.providers.delete(S.name),this.addComponent(S)}getProvider(S){if(this.providers.has(S))return this.providers.get(S);let k=new j(S,this);return this.providers.set(S,k),k}getProviders(){return Array.from(this.providers.values())}}},6850:(Jt,ae,M)=>{"use strict";var q;M.d(ae,{Yd:()=>S,in:()=>q});let Z=[];(function(k){k[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT"})(q||(q={}));let W={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},j=q.INFO,z={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},y=(k,I,...x)=>{if(I<k.logLevel)return;let C=new Date().toISOString(),N=z[I];if(N)console[N](`[${C}]  ${k.name}:`,...x);else throw Error(`Attempted to log a message with an invalid logType (value: ${I})`)};class S{constructor(I){this.name=I,this._logLevel=j,this._logHandler=y,this._userLogHandler=null,Z.push(this)}get logLevel(){return this._logLevel}set logLevel(I){if(!(I in q))throw TypeError(`Invalid value "${I}" assigned to \`logLevel\``);this._logLevel=I}setLogLevel(I){this._logLevel=typeof I=="string"?W[I]:I}get logHandler(){return this._logHandler}set logHandler(I){if(typeof I!="function")throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=I}get userLogHandler(){return this._userLogHandler}set userLogHandler(I){this._userLogHandler=I}debug(...I){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...I),this._logHandler(this,q.DEBUG,...I)}log(...I){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...I),this._logHandler(this,q.VERBOSE,...I)}info(...I){this._userLogHandler&&this._userLogHandler(this,q.INFO,...I),this._logHandler(this,q.INFO,...I)}warn(...I){this._userLogHandler&&this._userLogHandler(this,q.WARN,...I),this._logHandler(this,q.WARN,...I)}error(...I){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...I),this._logHandler(this,q.ERROR,...I)}}},1235:(Jt,ae,M)=>{"use strict";M.d(ae,{EK:()=>bt,hJ:()=>kd,oe:()=>_y,JU:()=>Ev,QT:()=>U0,ad:()=>_v,pl:()=>am});var q,Z,W,j,z,y,S,k,I,x,C,N,U,K,Y=M(1035),ee=M(578),fe=M(6850),Se=M(2754),ze=typeof hn<"u"?hn:typeof window<"u"?window:typeof Pu<"u"?Pu:typeof zr<"u"?zr:{},Ue={};(function(){function m(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(nr,Ot,Ft){Ft||(Ft=0);var Xt=Array(16);if(typeof Ot=="string")for(var hr=0;16>hr;++hr)Xt[hr]=Ot.charCodeAt(Ft++)|Ot.charCodeAt(Ft++)<<8|Ot.charCodeAt(Ft++)<<16|Ot.charCodeAt(Ft++)<<24;else for(hr=0;16>hr;++hr)Xt[hr]=Ot[Ft++]|Ot[Ft++]<<8|Ot[Ft++]<<16|Ot[Ft++]<<24;Ot=nr.g[0],Ft=nr.g[1],hr=nr.g[2];var xr=nr.g[3],qt=Ot+(xr^Ft&(hr^xr))+Xt[0]+3614090360&4294967295;qt=xr+(hr^(Ot=Ft+(qt<<7&4294967295|qt>>>25))&(Ft^hr))+Xt[1]+3905402710&4294967295,qt=hr+(Ft^(xr=Ot+(qt<<12&4294967295|qt>>>20))&(Ot^Ft))+Xt[2]+606105819&4294967295,qt=Ft+(Ot^(hr=xr+(qt<<17&4294967295|qt>>>15))&(xr^Ot))+Xt[3]+3250441966&4294967295,qt=Ot+(xr^(Ft=hr+(qt<<22&4294967295|qt>>>10))&(hr^xr))+Xt[4]+4118548399&4294967295,qt=xr+(hr^(Ot=Ft+(qt<<7&4294967295|qt>>>25))&(Ft^hr))+Xt[5]+1200080426&4294967295,qt=hr+(Ft^(xr=Ot+(qt<<12&4294967295|qt>>>20))&(Ot^Ft))+Xt[6]+2821735955&4294967295,qt=Ft+(Ot^(hr=xr+(qt<<17&4294967295|qt>>>15))&(xr^Ot))+Xt[7]+4249261313&4294967295,qt=Ot+(xr^(Ft=hr+(qt<<22&4294967295|qt>>>10))&(hr^xr))+Xt[8]+1770035416&4294967295,qt=xr+(hr^(Ot=Ft+(qt<<7&4294967295|qt>>>25))&(Ft^hr))+Xt[9]+2336552879&4294967295,qt=hr+(Ft^(xr=Ot+(qt<<12&4294967295|qt>>>20))&(Ot^Ft))+Xt[10]+4294925233&4294967295,qt=Ft+(Ot^(hr=xr+(qt<<17&4294967295|qt>>>15))&(xr^Ot))+Xt[11]+2304563134&4294967295,qt=Ot+(xr^(Ft=hr+(qt<<22&4294967295|qt>>>10))&(hr^xr))+Xt[12]+1804603682&4294967295,qt=xr+(hr^(Ot=Ft+(qt<<7&4294967295|qt>>>25))&(Ft^hr))+Xt[13]+4254626195&4294967295,qt=hr+(Ft^(xr=Ot+(qt<<12&4294967295|qt>>>20))&(Ot^Ft))+Xt[14]+2792965006&4294967295,qt=Ft+(Ot^(hr=xr+(qt<<17&4294967295|qt>>>15))&(xr^Ot))+Xt[15]+1236535329&4294967295,Ft=hr+(qt<<22&4294967295|qt>>>10),qt=Ot+(hr^xr&(Ft^hr))+Xt[1]+4129170786&4294967295,Ot=Ft+(qt<<5&4294967295|qt>>>27),qt=xr+(Ft^hr&(Ot^Ft))+Xt[6]+3225465664&4294967295,xr=Ot+(qt<<9&4294967295|qt>>>23),qt=hr+(Ot^Ft&(xr^Ot))+Xt[11]+643717713&4294967295,hr=xr+(qt<<14&4294967295|qt>>>18),qt=Ft+(xr^Ot&(hr^xr))+Xt[0]+3921069994&4294967295,Ft=hr+(qt<<20&4294967295|qt>>>12),qt=Ot+(hr^xr&(Ft^hr))+Xt[5]+3593408605&4294967295,Ot=Ft+(qt<<5&4294967295|qt>>>27),qt=xr+(Ft^hr&(Ot^Ft))+Xt[10]+38016083&4294967295,xr=Ot+(qt<<9&4294967295|qt>>>23),qt=hr+(Ot^Ft&(xr^Ot))+Xt[15]+3634488961&4294967295,hr=xr+(qt<<14&4294967295|qt>>>18),qt=Ft+(xr^Ot&(hr^xr))+Xt[4]+3889429448&4294967295,Ft=hr+(qt<<20&4294967295|qt>>>12),qt=Ot+(hr^xr&(Ft^hr))+Xt[9]+568446438&4294967295,Ot=Ft+(qt<<5&4294967295|qt>>>27),qt=xr+(Ft^hr&(Ot^Ft))+Xt[14]+3275163606&4294967295,xr=Ot+(qt<<9&4294967295|qt>>>23),qt=hr+(Ot^Ft&(xr^Ot))+Xt[3]+4107603335&4294967295,hr=xr+(qt<<14&4294967295|qt>>>18),qt=Ft+(xr^Ot&(hr^xr))+Xt[8]+1163531501&4294967295,Ft=hr+(qt<<20&4294967295|qt>>>12),qt=Ot+(hr^xr&(Ft^hr))+Xt[13]+2850285829&4294967295,Ot=Ft+(qt<<5&4294967295|qt>>>27),qt=xr+(Ft^hr&(Ot^Ft))+Xt[2]+4243563512&4294967295,xr=Ot+(qt<<9&4294967295|qt>>>23),qt=hr+(Ot^Ft&(xr^Ot))+Xt[7]+1735328473&4294967295,hr=xr+(qt<<14&4294967295|qt>>>18),qt=Ft+(xr^Ot&(hr^xr))+Xt[12]+2368359562&4294967295,qt=Ot+((Ft=hr+(qt<<20&4294967295|qt>>>12))^hr^xr)+Xt[5]+4294588738&4294967295,qt=xr+((Ot=Ft+(qt<<4&4294967295|qt>>>28))^Ft^hr)+Xt[8]+2272392833&4294967295,qt=hr+((xr=Ot+(qt<<11&4294967295|qt>>>21))^Ot^Ft)+Xt[11]+1839030562&4294967295,qt=Ft+((hr=xr+(qt<<16&4294967295|qt>>>16))^xr^Ot)+Xt[14]+4259657740&4294967295,qt=Ot+((Ft=hr+(qt<<23&4294967295|qt>>>9))^hr^xr)+Xt[1]+2763975236&4294967295,qt=xr+((Ot=Ft+(qt<<4&4294967295|qt>>>28))^Ft^hr)+Xt[4]+1272893353&4294967295,qt=hr+((xr=Ot+(qt<<11&4294967295|qt>>>21))^Ot^Ft)+Xt[7]+4139469664&4294967295,qt=Ft+((hr=xr+(qt<<16&4294967295|qt>>>16))^xr^Ot)+Xt[10]+3200236656&4294967295,qt=Ot+((Ft=hr+(qt<<23&4294967295|qt>>>9))^hr^xr)+Xt[13]+681279174&4294967295,qt=xr+((Ot=Ft+(qt<<4&4294967295|qt>>>28))^Ft^hr)+Xt[0]+3936430074&4294967295,qt=hr+((xr=Ot+(qt<<11&4294967295|qt>>>21))^Ot^Ft)+Xt[3]+3572445317&4294967295,qt=Ft+((hr=xr+(qt<<16&4294967295|qt>>>16))^xr^Ot)+Xt[6]+76029189&4294967295,qt=Ot+((Ft=hr+(qt<<23&4294967295|qt>>>9))^hr^xr)+Xt[9]+3654602809&4294967295,qt=xr+((Ot=Ft+(qt<<4&4294967295|qt>>>28))^Ft^hr)+Xt[12]+3873151461&4294967295,qt=hr+((xr=Ot+(qt<<11&4294967295|qt>>>21))^Ot^Ft)+Xt[15]+530742520&4294967295,qt=Ft+((hr=xr+(qt<<16&4294967295|qt>>>16))^xr^Ot)+Xt[2]+3299628645&4294967295,Ft=hr+(qt<<23&4294967295|qt>>>9),qt=Ot+(hr^(Ft|~xr))+Xt[0]+4096336452&4294967295,Ot=Ft+(qt<<6&4294967295|qt>>>26),qt=xr+(Ft^(Ot|~hr))+Xt[7]+1126891415&4294967295,xr=Ot+(qt<<10&4294967295|qt>>>22),qt=hr+(Ot^(xr|~Ft))+Xt[14]+2878612391&4294967295,hr=xr+(qt<<15&4294967295|qt>>>17),qt=Ft+(xr^(hr|~Ot))+Xt[5]+4237533241&4294967295,Ft=hr+(qt<<21&4294967295|qt>>>11),qt=Ot+(hr^(Ft|~xr))+Xt[12]+1700485571&4294967295,Ot=Ft+(qt<<6&4294967295|qt>>>26),qt=xr+(Ft^(Ot|~hr))+Xt[3]+2399980690&4294967295,xr=Ot+(qt<<10&4294967295|qt>>>22),qt=hr+(Ot^(xr|~Ft))+Xt[10]+4293915773&4294967295,hr=xr+(qt<<15&4294967295|qt>>>17),qt=Ft+(xr^(hr|~Ot))+Xt[1]+2240044497&4294967295,Ft=hr+(qt<<21&4294967295|qt>>>11),qt=Ot+(hr^(Ft|~xr))+Xt[8]+1873313359&4294967295,Ot=Ft+(qt<<6&4294967295|qt>>>26),qt=xr+(Ft^(Ot|~hr))+Xt[15]+4264355552&4294967295,xr=Ot+(qt<<10&4294967295|qt>>>22),qt=hr+(Ot^(xr|~Ft))+Xt[6]+2734768916&4294967295,hr=xr+(qt<<15&4294967295|qt>>>17),qt=Ft+(xr^(hr|~Ot))+Xt[13]+1309151649&4294967295,Ft=hr+(qt<<21&4294967295|qt>>>11),qt=Ot+(hr^(Ft|~xr))+Xt[4]+4149444226&4294967295,Ot=Ft+(qt<<6&4294967295|qt>>>26),qt=xr+(Ft^(Ot|~hr))+Xt[11]+3174756917&4294967295,xr=Ot+(qt<<10&4294967295|qt>>>22),qt=hr+(Ot^(xr|~Ft))+Xt[2]+718787259&4294967295,hr=xr+(qt<<15&4294967295|qt>>>17),qt=Ft+(xr^(hr|~Ot))+Xt[9]+3951481745&4294967295,nr.g[0]=nr.g[0]+Ot&4294967295,nr.g[1]=nr.g[1]+(hr+(qt<<21&4294967295|qt>>>11))&4294967295,nr.g[2]=nr.g[2]+hr&4294967295,nr.g[3]=nr.g[3]+xr&4294967295}function o(nr,Ot){this.h=Ot;for(var Ft=[],Xt=!0,hr=nr.length-1;0<=hr;hr--){var xr=0|nr[hr];Xt&&xr==Ot||(Ft[hr]=xr,Xt=!1)}this.g=Ft}(function(nr,Ot){function Ft(){}Ft.prototype=Ot.prototype,nr.D=Ot.prototype,nr.prototype=new Ft,nr.prototype.constructor=nr,nr.C=function(Xt,hr,xr){for(var qt=Array(arguments.length-2),Nl=2;Nl<arguments.length;Nl++)qt[Nl-2]=arguments[Nl];return Ot.prototype[hr].apply(Xt,qt)}})(m,function(){this.blockSize=-1}),m.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},m.prototype.u=function(nr,Ot){Ot===void 0&&(Ot=nr.length);for(var Ft=Ot-this.blockSize,Xt=this.B,hr=this.h,xr=0;xr<Ot;){if(hr==0)for(;xr<=Ft;)i(this,nr,xr),xr+=this.blockSize;if(typeof nr=="string"){for(;xr<Ot;)if(Xt[hr++]=nr.charCodeAt(xr++),hr==this.blockSize){i(this,Xt),hr=0;break}}else for(;xr<Ot;)if(Xt[hr++]=nr[xr++],hr==this.blockSize){i(this,Xt),hr=0;break}}this.h=hr,this.o+=Ot},m.prototype.v=function(){var nr=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);nr[0]=128;for(var Ot=1;Ot<nr.length-8;++Ot)nr[Ot]=0;var Ft=8*this.o;for(Ot=nr.length-8;Ot<nr.length;++Ot)nr[Ot]=255&Ft,Ft/=256;for(this.u(nr),nr=Array(16),Ot=Ft=0;4>Ot;++Ot)for(var Xt=0;32>Xt;Xt+=8)nr[Ft++]=this.g[Ot]>>>Xt&255;return nr};var d,v={};function _(nr){var Ot;return-128<=nr&&128>nr?(Ot=function(Ft){return new o([0|Ft],0>Ft?-1:0)},Object.prototype.hasOwnProperty.call(v,nr)?v[nr]:v[nr]=Ot(nr)):new o([0|nr],0>nr?-1:0)}function O(nr){if(isNaN(nr)||!isFinite(nr))return X;if(0>nr)return ur(O(-nr));for(var Ot=[],Ft=1,Xt=0;nr>=Ft;Xt++)Ot[Xt]=nr/Ft|0,Ft*=4294967296;return new o(Ot,0)}var X=_(0),oe=_(1),Ge=_(16777216);function Tt(nr){if(nr.h!=0)return!1;for(var Ot=0;Ot<nr.g.length;Ot++)if(nr.g[Ot]!=0)return!1;return!0}function ar(nr){return nr.h==-1}function ur(nr){for(var Ot=nr.g.length,Ft=[],Xt=0;Xt<Ot;Xt++)Ft[Xt]=~nr.g[Xt];return new o(Ft,~nr.h).add(oe)}function wr(nr,Ot){return nr.add(ur(Ot))}function vn(nr,Ot){for(;(65535&nr[Ot])!=nr[Ot];)nr[Ot+1]+=nr[Ot]>>>16,nr[Ot]&=65535,Ot++}function Hn(nr,Ot){this.g=nr,this.h=Ot}function Jn(nr,Ot){if(Tt(Ot))throw Error("division by zero");if(Tt(nr))return new Hn(X,X);if(ar(nr))return Ot=Jn(ur(nr),Ot),new Hn(ur(Ot.g),ur(Ot.h));if(ar(Ot))return Ot=Jn(nr,ur(Ot)),new Hn(ur(Ot.g),Ot.h);if(30<nr.g.length){if(ar(nr)||ar(Ot))throw Error("slowDivide_ only works with positive integers.");for(var Ft=oe,Xt=Ot;0>=Xt.l(nr);)Ft=Os(Ft),Xt=Os(Xt);var hr=Hi(Ft,1),xr=Hi(Xt,1);for(Xt=Hi(Xt,2),Ft=Hi(Ft,2);!Tt(Xt);){var qt=xr.add(Xt);0>=qt.l(nr)&&(hr=hr.add(Ft),xr=qt),Xt=Hi(Xt,1),Ft=Hi(Ft,1)}return Ot=wr(nr,hr.j(Ot)),new Hn(hr,Ot)}for(hr=X;0<=nr.l(Ot);){for(Xt=48>=(Xt=Math.ceil(Math.log(Ft=Math.max(1,Math.floor(nr.m()/Ot.m())))/Math.LN2))?1:Math.pow(2,Xt-48),qt=(xr=O(Ft)).j(Ot);ar(qt)||0<qt.l(nr);)Ft-=Xt,qt=(xr=O(Ft)).j(Ot);Tt(xr)&&(xr=oe),hr=hr.add(xr),nr=wr(nr,qt)}return new Hn(hr,nr)}function Os(nr){for(var Ot=nr.g.length+1,Ft=[],Xt=0;Xt<Ot;Xt++)Ft[Xt]=nr.i(Xt)<<1|nr.i(Xt-1)>>>31;return new o(Ft,nr.h)}function Hi(nr,Ot){var Ft=Ot>>5;Ot%=32;for(var Xt=nr.g.length-Ft,hr=[],xr=0;xr<Xt;xr++)hr[xr]=0<Ot?nr.i(xr+Ft)>>>Ot|nr.i(xr+Ft+1)<<32-Ot:nr.i(xr+Ft);return new o(hr,nr.h)}(d=o.prototype).m=function(){if(ar(this))return-ur(this).m();for(var nr=0,Ot=1,Ft=0;Ft<this.g.length;Ft++){var Xt=this.i(Ft);nr+=(0<=Xt?Xt:4294967296+Xt)*Ot,Ot*=4294967296}return nr},d.toString=function(nr){if(2>(nr=nr||10)||36<nr)throw Error("radix out of range: "+nr);if(Tt(this))return"0";if(ar(this))return"-"+ur(this).toString(nr);for(var Ot=O(Math.pow(nr,6)),Ft=this,Xt="";;){var hr=Jn(Ft,Ot).g,xr=((0<(Ft=wr(Ft,hr.j(Ot))).g.length?Ft.g[0]:Ft.h)>>>0).toString(nr);if(Tt(Ft=hr))return xr+Xt;for(;6>xr.length;)xr="0"+xr;Xt=xr+Xt}},d.i=function(nr){return 0>nr?0:nr<this.g.length?this.g[nr]:this.h},d.l=function(nr){return ar(nr=wr(this,nr))?-1:Tt(nr)?0:1},d.abs=function(){return ar(this)?ur(this):this},d.add=function(nr){for(var Ot=Math.max(this.g.length,nr.g.length),Ft=[],Xt=0,hr=0;hr<=Ot;hr++){var xr=Xt+(65535&this.i(hr))+(65535&nr.i(hr)),qt=(xr>>>16)+(this.i(hr)>>>16)+(nr.i(hr)>>>16);Xt=qt>>>16,xr&=65535,qt&=65535,Ft[hr]=qt<<16|xr}return new o(Ft,-2147483648&Ft[Ft.length-1]?-1:0)},d.j=function(nr){if(Tt(this)||Tt(nr))return X;if(ar(this))return ar(nr)?ur(this).j(ur(nr)):ur(ur(this).j(nr));if(ar(nr))return ur(this.j(ur(nr)));if(0>this.l(Ge)&&0>nr.l(Ge))return O(this.m()*nr.m());for(var Ot=this.g.length+nr.g.length,Ft=[],Xt=0;Xt<2*Ot;Xt++)Ft[Xt]=0;for(Xt=0;Xt<this.g.length;Xt++)for(var hr=0;hr<nr.g.length;hr++){var xr=this.i(Xt)>>>16,qt=65535&this.i(Xt),Nl=nr.i(hr)>>>16,Sc=65535&nr.i(hr);Ft[2*Xt+2*hr]+=qt*Sc,vn(Ft,2*Xt+2*hr),Ft[2*Xt+2*hr+1]+=xr*Sc,vn(Ft,2*Xt+2*hr+1),Ft[2*Xt+2*hr+1]+=qt*Nl,vn(Ft,2*Xt+2*hr+1),Ft[2*Xt+2*hr+2]+=xr*Nl,vn(Ft,2*Xt+2*hr+2)}for(Xt=0;Xt<Ot;Xt++)Ft[Xt]=Ft[2*Xt+1]<<16|Ft[2*Xt];for(Xt=Ot;Xt<2*Ot;Xt++)Ft[Xt]=0;return new o(Ft,0)},d.A=function(nr){return Jn(this,nr).h},d.and=function(nr){for(var Ot=Math.max(this.g.length,nr.g.length),Ft=[],Xt=0;Xt<Ot;Xt++)Ft[Xt]=this.i(Xt)&nr.i(Xt);return new o(Ft,this.h&nr.h)},d.or=function(nr){for(var Ot=Math.max(this.g.length,nr.g.length),Ft=[],Xt=0;Xt<Ot;Xt++)Ft[Xt]=this.i(Xt)|nr.i(Xt);return new o(Ft,this.h|nr.h)},d.xor=function(nr){for(var Ot=Math.max(this.g.length,nr.g.length),Ft=[],Xt=0;Xt<Ot;Xt++)Ft[Xt]=this.i(Xt)^nr.i(Xt);return new o(Ft,this.h^nr.h)},m.prototype.digest=m.prototype.v,m.prototype.reset=m.prototype.s,m.prototype.update=m.prototype.u,Z=Ue.Md5=m,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=O,o.fromString=function nr(Ot,Ft){if(Ot.length==0)throw Error("number format error: empty string");if(2>(Ft=Ft||10)||36<Ft)throw Error("radix out of range: "+Ft);if(Ot.charAt(0)=="-")return ur(nr(Ot.substring(1),Ft));if(0<=Ot.indexOf("-"))throw Error('number format error: interior "-" character');for(var Xt=O(Math.pow(Ft,8)),hr=X,xr=0;xr<Ot.length;xr+=8){var qt=Math.min(8,Ot.length-xr),Nl=parseInt(Ot.substring(xr,xr+qt),Ft);8>qt?(qt=O(Math.pow(Ft,qt)),hr=hr.j(qt).add(O(Nl))):hr=(hr=hr.j(Xt)).add(O(Nl))}return hr},q=Ue.Integer=o}).apply(ze!==void 0?ze:typeof zr<"u"?zr:typeof window<"u"?window:{});var at=typeof hn<"u"?hn:typeof window<"u"?window:typeof Pu<"u"?Pu:typeof zr<"u"?zr:{},vt={};(function(){var m,i,o,d=typeof Object.defineProperties=="function"?Object.defineProperty:function(R,ue,Le){return R==Array.prototype||R==Object.prototype||(R[ue]=Le.value),R},v=function(R){R=[typeof hn=="object"&&hn,R,typeof window=="object"&&window,typeof zr=="object"&&zr,typeof at=="object"&&at];for(var ue=0;ue<R.length;++ue){var Le=R[ue];if(Le&&Le.Math==Math)return Le}throw Error("Cannot find global object")}(this);(function(R,ue){if(ue)e:{var Le=v;R=R.split(".");for(var _t=0;_t<R.length-1;_t++){var Dr=R[_t];if(!(Dr in Le))break e;Le=Le[Dr]}(ue=ue(_t=Le[R=R[R.length-1]]))!=_t&&ue!=null&&d(Le,R,{configurable:!0,writable:!0,value:ue})}})("Array.prototype.values",function(R){return R||function(){var ue,Le,_t,Dr,$r;return ue=this,Le=function(Wr,Kn){return Kn},ue instanceof String&&(ue+=""),_t=0,Dr=!1,($r={next:function(){if(!Dr&&_t<ue.length){var Wr=_t++;return{value:Le(Wr,ue[Wr]),done:!1}}return Dr=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return $r},$r}});var _=_||{},O=this||zr;function X(R){var ue=typeof R;return(ue=ue!="object"?ue:R?Array.isArray(R)?"array":ue:"null")=="array"||ue=="object"&&typeof R.length=="number"}function oe(R){var ue=typeof R;return ue=="object"&&R!=null||ue=="function"}function Ge(R,ue,Le){return R.call.apply(R.bind,arguments)}function Tt(R,ue,Le){if(!R)throw Error();if(2<arguments.length){var _t=Array.prototype.slice.call(arguments,2);return function(){var Dr=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Dr,_t),R.apply(ue,Dr)}}return function(){return R.apply(ue,arguments)}}function ar(R,ue,Le){return(ar=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ge:Tt).apply(null,arguments)}function ur(R,ue){var Le=Array.prototype.slice.call(arguments,1);return function(){var _t=Le.slice();return _t.push.apply(_t,arguments),R.apply(this,_t)}}function wr(R,ue){function Le(){}Le.prototype=ue.prototype,R.aa=ue.prototype,R.prototype=new Le,R.prototype.constructor=R,R.Qb=function(_t,Dr,$r){for(var Wr=Array(arguments.length-2),Kn=2;Kn<arguments.length;Kn++)Wr[Kn-2]=arguments[Kn];return ue.prototype[Dr].apply(_t,Wr)}}function vn(R){let ue=R.length;if(0<ue){let Le=Array(ue);for(let _t=0;_t<ue;_t++)Le[_t]=R[_t];return Le}return[]}function Hn(R,ue){for(let Le=1;Le<arguments.length;Le++){let _t=arguments[Le];if(X(_t)){let Dr=R.length||0,$r=_t.length||0;R.length=Dr+$r;for(let Wr=0;Wr<$r;Wr++)R[Dr+Wr]=_t[Wr]}else R.push(_t)}}class Jn{constructor(ue,Le){this.i=ue,this.j=Le,this.h=0,this.g=null}get(){let ue;return 0<this.h?(this.h--,ue=this.g,this.g=ue.next,ue.next=null):ue=this.i(),ue}}function Os(R){return/^[\s\xa0]*$/.test(R)}function Hi(){var R=O.navigator;return R&&(R=R.userAgent)?R:""}function nr(R){return nr[" "](R),R}nr[" "]=function(){};var Ot=Hi().indexOf("Gecko")!=-1&&!(Hi().toLowerCase().indexOf("webkit")!=-1&&Hi().indexOf("Edge")==-1)&&!(Hi().indexOf("Trident")!=-1||Hi().indexOf("MSIE")!=-1)&&Hi().indexOf("Edge")==-1;function Ft(R,ue,Le){for(let _t in R)ue.call(Le,R[_t],_t,R)}function Xt(R){let ue={};for(let Le in R)ue[Le]=R[Le];return ue}let hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xr(R,ue){let Le,_t;for(let Dr=1;Dr<arguments.length;Dr++){for(Le in _t=arguments[Dr])R[Le]=_t[Le];for(let $r=0;$r<hr.length;$r++)Le=hr[$r],Object.prototype.hasOwnProperty.call(_t,Le)&&(R[Le]=_t[Le])}}class qt{constructor(){this.h=this.g=null}add(ue,Le){let _t=Nl.get();_t.set(ue,Le),this.h?this.h.next=_t:this.g=_t,this.h=_t}}var Nl=new Jn(()=>new Sc,R=>R.reset());class Sc{constructor(){this.next=this.g=this.h=null}set(ue,Le){this.h=ue,this.g=Le,this.next=null}reset(){this.next=this.g=this.h=null}}let Wh,om=!1,Jh=new qt,Iy=()=>{let R=O.Promise.resolve(void 0);Wh=()=>{R.then(op)}};var op=()=>{let R;for(var ue;R=null,Jh.g&&(R=Jh.g,Jh.g=Jh.g.next,Jh.g||(Jh.h=null),R.next=null),ue=R;){try{ue.h.call(ue.g)}catch(Le){(function(_t){O.setTimeout(()=>{throw _t},0)})(Le)}Nl.j(ue),100>Nl.h&&(Nl.h++,ue.next=Nl.g,Nl.g=ue)}om=!1};function Hu(){this.s=this.s,this.C=this.C}function Go(R,ue){this.type=R,this.g=this.target=ue,this.defaultPrevented=!1}Hu.prototype.s=!1,Hu.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Go.prototype.h=function(){this.defaultPrevented=!0};var Ty=function(){if(!O.addEventListener||!Object.defineProperty)return!1;var R=!1,ue=Object.defineProperty({},"passive",{get:function(){R=!0}});try{let Le=()=>{};O.addEventListener("test",Le,ue),O.removeEventListener("test",Le,ue)}catch{}return R}();function Tf(R,ue){if(Go.call(this,R?R.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,R){var Le=this.type=R.type,_t=R.changedTouches&&R.changedTouches.length?R.changedTouches[0]:null;if(this.target=R.target||R.srcElement,this.g=ue,ue=R.relatedTarget){if(Ot){e:{try{nr(ue.nodeName);var Dr=!0;break e}catch{}Dr=!1}Dr||(ue=null)}}else Le=="mouseover"?ue=R.fromElement:Le=="mouseout"&&(ue=R.toElement);this.relatedTarget=ue,_t?(this.clientX=_t.clientX!==void 0?_t.clientX:_t.pageX,this.clientY=_t.clientY!==void 0?_t.clientY:_t.pageY,this.screenX=_t.screenX||0,this.screenY=_t.screenY||0):(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0),this.button=R.button,this.key=R.key||"",this.ctrlKey=R.ctrlKey,this.altKey=R.altKey,this.shiftKey=R.shiftKey,this.metaKey=R.metaKey,this.pointerId=R.pointerId||0,this.pointerType=typeof R.pointerType=="string"?R.pointerType:pg[R.pointerType]||"",this.state=R.state,this.i=R,R.defaultPrevented&&Tf.aa.h.call(this)}}wr(Tf,Go);var pg={2:"touch",3:"pen",4:"mouse"};Tf.prototype.h=function(){Tf.aa.h.call(this);var R=this.i;R.preventDefault?R.preventDefault():R.returnValue=!1};var oh="closure_listenable_"+(1e6*Math.random()|0),Pv=0;function mg(R,ue,Le,_t,Dr){this.listener=R,this.proxy=null,this.src=ue,this.type=Le,this.capture=!!_t,this.ha=Dr,this.key=++Pv,this.da=this.fa=!1}function lm(R){R.da=!0,R.listener=null,R.proxy=null,R.src=null,R.ha=null}function lp(R){this.src=R,this.g={},this.h=0}function xy(R,ue){var Le=ue.type;if(Le in R.g){var _t,Dr=R.g[Le],$r=Array.prototype.indexOf.call(Dr,ue,void 0);(_t=0<=$r)&&Array.prototype.splice.call(Dr,$r,1),_t&&(lm(ue),R.g[Le].length==0&&(delete R.g[Le],R.h--))}}function up(R,ue,Le,_t){for(var Dr=0;Dr<R.length;++Dr){var $r=R[Dr];if(!$r.da&&$r.listener==ue&&!!Le==$r.capture&&$r.ha==_t)return Dr}return-1}lp.prototype.add=function(R,ue,Le,_t,Dr){var $r=R.toString();(R=this.g[$r])||(R=this.g[$r]=[],this.h++);var Wr=up(R,ue,_t,Dr);return-1<Wr?(ue=R[Wr],Le||(ue.fa=!1)):((ue=new mg(ue,this.src,$r,!!_t,Dr)).fa=Le,R.push(ue)),ue};var Qh="closure_lm_"+(1e6*Math.random()|0),Av={};function um(R,ue,Le,_t,Dr,$r){if(!ue)throw Error("Invalid event type");var Wr=oe(Dr)?!!Dr.capture:!!Dr,Kn=Ld(R);if(Kn||(R[Qh]=Kn=new lp(R)),(Le=Kn.add(ue,Le,_t,Wr,$r)).proxy)return Le;if(_t=function Mi(Xs){return Cf.call(Mi.src,Mi.listener,Xs)},Le.proxy=_t,_t.src=R,_t.listener=Le,R.addEventListener)Ty||(Dr=Wr),Dr===void 0&&(Dr=!1),R.addEventListener(ue.toString(),_t,Dr);else if(R.attachEvent)R.attachEvent(xf(ue.toString()),_t);else if(R.addListener&&R.removeListener)R.addListener(_t);else throw Error("addEventListener and attachEvent are unavailable.");return Le}function Md(R){if(typeof R!="number"&&R&&!R.da){var ue=R.src;if(ue&&ue[oh])xy(ue.i,R);else{var Le=R.type,_t=R.proxy;ue.removeEventListener?ue.removeEventListener(Le,_t,R.capture):ue.detachEvent?ue.detachEvent(xf(Le),_t):ue.addListener&&ue.removeListener&&ue.removeListener(_t),(Le=Ld(ue))?(xy(Le,R),Le.h==0&&(Le.src=null,ue[Qh]=null)):lm(R)}}}function xf(R){return R in Av?Av[R]:Av[R]="on"+R}function Cf(R,ue){if(R.da)R=!0;else{ue=new Tf(ue,this);var Le=R.listener,_t=R.ha||R.src;R.fa&&Md(R),R=Le.call(_t,ue)}return R}function Ld(R){return(R=R[Qh])instanceof lp?R:null}var cm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ol(R){return typeof R=="function"?R:(R[cm]||(R[cm]=function(ue){return R.handleEvent(ue)}),R[cm])}function Zl(){Hu.call(this),this.i=new lp(this),this.M=this,this.F=null}function Dl(R,ue){var Le,_t=R.F;if(_t)for(Le=[];_t;_t=_t.F)Le.push(_t);if(R=R.M,_t=ue.type||ue,typeof ue=="string")ue=new Go(ue,R);else if(ue instanceof Go)ue.target=ue.target||R;else{var Dr=ue;xr(ue=new Go(_t,R),Dr)}if(Dr=!0,Le)for(var $r=Le.length-1;0<=$r;$r--){var Wr=ue.g=Le[$r];Dr=jd(Wr,_t,!0,ue)&&Dr}if(Dr=jd(Wr=ue.g=R,_t,!0,ue)&&Dr,Dr=jd(Wr,_t,!1,ue)&&Dr,Le)for($r=0;$r<Le.length;$r++)Dr=jd(Wr=ue.g=Le[$r],_t,!1,ue)&&Dr}function jd(R,ue,Le,_t){if(!(ue=R.i.g[String(ue)]))return!0;ue=ue.concat();for(var Dr=!0,$r=0;$r<ue.length;++$r){var Wr=ue[$r];if(Wr&&!Wr.da&&Wr.capture==Le){var Kn=Wr.listener,Mi=Wr.ha||Wr.src;Wr.fa&&xy(R.i,Wr),Dr=Kn.call(Mi,_t)!==!1&&Dr}}return Dr&&!_t.defaultPrevented}function gg(R,ue,Le){if(typeof R=="function")Le&&(R=ar(R,Le));else if(R&&typeof R.handleEvent=="function")R=ar(R.handleEvent,R);else throw Error("Invalid listener argument");return 2147483647<Number(ue)?-1:O.setTimeout(R,ue||0)}wr(Zl,Hu),Zl.prototype[oh]=!0,Zl.prototype.removeEventListener=function(R,ue,Le,_t){(function Dr($r,Wr,Kn,Mi,Xs){if(Array.isArray(Wr))for(var ra=0;ra<Wr.length;ra++)Dr($r,Wr[ra],Kn,Mi,Xs);else Mi=oe(Mi)?!!Mi.capture:!!Mi,Kn=Ol(Kn),$r&&$r[oh]?($r=$r.i,(Wr=String(Wr).toString())in $r.g&&-1<(Kn=up(ra=$r.g[Wr],Kn,Mi,Xs))&&(lm(ra[Kn]),Array.prototype.splice.call(ra,Kn,1),ra.length==0&&(delete $r.g[Wr],$r.h--))):$r&&($r=Ld($r))&&(Wr=$r.g[Wr.toString()],$r=-1,Wr&&($r=up(Wr,Kn,Mi,Xs)),(Kn=-1<$r?Wr[$r]:null)&&Md(Kn))})(this,R,ue,Le,_t)},Zl.prototype.N=function(){if(Zl.aa.N.call(this),this.i){var R,ue=this.i;for(R in ue.g){for(var Le=ue.g[R],_t=0;_t<Le.length;_t++)lm(Le[_t]);delete ue.g[R],ue.h--}}this.F=null},Zl.prototype.K=function(R,ue,Le,_t){return this.i.add(String(R),ue,!1,Le,_t)},Zl.prototype.L=function(R,ue,Le,_t){return this.i.add(String(R),ue,!0,Le,_t)};class Yh extends Hu{constructor(ue,Le){super(),this.m=ue,this.l=Le,this.h=null,this.i=!1,this.g=null}j(ue){this.h=arguments,this.g?this.i=!0:function Le(_t){_t.g=gg(()=>{_t.g=null,_t.i&&(_t.i=!1,Le(_t))},_t.l);let Dr=_t.h;_t.h=null,_t.m.apply(null,Dr)}(this)}N(){super.N(),this.g&&(O.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lh(R){Hu.call(this),this.h=R,this.g={}}wr(lh,Hu);var yg=[];function Xh(R){Ft(R.g,function(ue,Le){this.g.hasOwnProperty(Le)&&Md(ue)},R),R.g={}}lh.prototype.N=function(){lh.aa.N.call(this),Xh(this)},lh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nv=O.JSON.stringify,cp=O.JSON.parse,Ov=class{stringify(R){return O.JSON.stringify(R,void 0)}parse(R){return O.JSON.parse(R,void 0)}};function Bc(){}function vg(R){return R.h||(R.h=R.i())}function Cy(){}Bc.prototype.h=null;var Zh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kf(){Go.call(this,"d")}function Ku(){Go.call(this,"c")}wr(kf,Go),wr(Ku,Go);var Ml={},wg=null;function uh(){return wg=wg||new Zl}function bg(R){Go.call(this,Ml.La,R)}function ji(R){let ue=uh();Dl(ue,new bg(ue))}function Vo(R,ue){Go.call(this,Ml.STAT_EVENT,R),this.stat=ue}function fl(R){let ue=uh();Dl(ue,new Vo(ue,R))}function Sg(R,ue){Go.call(this,Ml.Ma,R),this.size=ue}function Nh(R,ue){if(typeof R!="function")throw Error("Fn must not be null and must be a function");return O.setTimeout(function(){R()},ue)}function Rf(){this.g=!0}function Fd(R,ue,Le,_t){R.info(function(){return"XMLHTTP TEXT ("+ue+"): "+function(Dr,$r){if(!Dr.g)return $r;if(!$r)return null;try{var Wr=JSON.parse($r);if(Wr){for(Dr=0;Dr<Wr.length;Dr++)if(Array.isArray(Wr[Dr])){var Kn=Wr[Dr];if(!(2>Kn.length)){var Mi=Kn[1];if(Array.isArray(Mi)&&!(1>Mi.length)){var Xs=Mi[0];if(Xs!="noop"&&Xs!="stop"&&Xs!="close")for(var ra=1;ra<Mi.length;ra++)Mi[ra]=""}}}}return Nv(Wr)}catch{return $r}}(R,Le)+(_t?" "+_t:"")})}Ml.La="serverreachability",wr(bg,Go),Ml.STAT_EVENT="statevent",wr(Vo,Go),Ml.Ma="timingevent",wr(Sg,Go),Rf.prototype.xa=function(){this.g=!1},Rf.prototype.info=function(){};var Eg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function nl(){}function Oo(R,ue,Le,_t){this.j=R,this.i=ue,this.l=Le,this.R=_t||1,this.U=new lh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _l}function _l(){this.i=null,this.g="",this.h=!1}wr(nl,Bc),nl.prototype.g=function(){return new XMLHttpRequest},nl.prototype.i=function(){return{}},i=new nl;var Vd={},_g={};function ky(R,ue,Le){R.L=1,R.v=Af(cu(ue)),R.m=Le,R.P=!0,hp(R,null)}function hp(R,ue){R.F=Date.now(),dm(R),R.A=cu(R.v);var Le=R.A,_t=R.R;Array.isArray(_t)||(_t=[String(_t)]),wp(Le.i,"t",_t),R.C=0,Le=R.j.J,R.h=new _l,R.g=hc(R.j,Le?ue:null,!R.m),0<R.O&&(R.M=new Yh(ar(R.Y,R,R.g),R.O)),ue=R.U,Le=R.g,_t=R.ca;var Dr="readystatechange";Array.isArray(Dr)||(Dr&&(yg[0]=Dr.toString()),Dr=yg);for(var $r=0;$r<Dr.length;$r++){var Wr=function Kn(Mi,Xs,ra,Ga,pl){if(Ga&&Ga.once)return function Cu(Zs,Aa,_o,Ll,Qu){if(Array.isArray(Aa)){for(var Df=0;Df<Aa.length;Df++)Cu(Zs,Aa[Df],_o,Ll,Qu);return null}return _o=Ol(_o),Zs&&Zs[oh]?Zs.L(Aa,_o,oe(Ll)?!!Ll.capture:!!Ll,Qu):um(Zs,Aa,_o,!0,Ll,Qu)}(Mi,Xs,ra,Ga,pl);if(Array.isArray(Xs)){for(var Va=0;Va<Xs.length;Va++)Kn(Mi,Xs[Va],ra,Ga,pl);return null}return ra=Ol(ra),Mi&&Mi[oh]?Mi.K(Xs,ra,oe(Ga)?!!Ga.capture:!!Ga,pl):um(Mi,Xs,ra,!1,Ga,pl)}(Le,Dr[$r],_t||ue.handleEvent,!1,ue.h||ue);if(!Wr)break;ue.g[Wr.key]=Wr}ue=R.H?Xt(R.H):{},R.m?(R.u||(R.u="POST"),ue["Content-Type"]="application/x-www-form-urlencoded",R.g.ea(R.A,R.u,R.m,ue)):(R.u="GET",R.g.ea(R.A,R.u,null,ue)),ji(),function(Kn,Mi,Xs,ra,Ga,pl){Kn.info(function(){if(Kn.g)if(pl)for(var Va="",Cu=pl.split("&"),Zs=0;Zs<Cu.length;Zs++){var Aa=Cu[Zs].split("=");if(1<Aa.length){var _o=Aa[0];Aa=Aa[1];var Ll=_o.split("_");Va=2<=Ll.length&&Ll[1]=="type"?Va+(_o+"=")+Aa+"&":Va+(_o+"=redacted&")}}else Va=null;else Va=pl;return"XMLHTTP REQ ("+ra+") [attempt "+Ga+"]: "+Mi+`
`+Xs+`
`+Va})}(R.i,R.u,R.A,R.l,R.R,R.m)}function hm(R){return!!R.g&&R.u=="GET"&&R.L!=2&&R.j.Ca}function dm(R){R.S=Date.now()+R.I,dp(R,R.I)}function dp(R,ue){if(R.B!=null)throw Error("WatchDog timer not null");R.B=Nh(ar(R.ba,R),ue)}function fp(R){R.B&&(O.clearTimeout(R.B),R.B=null)}function pp(R){R.j.G==0||R.J||Ip(R.j,R)}function qc(R){fp(R);var ue=R.M;ue&&typeof ue.ma=="function"&&ue.ma(),R.M=null,Xh(R.U),R.g&&(ue=R.g,R.g=null,ue.abort(),ue.ma())}function fm(R,ue){try{var Le=R.j;if(Le.G!=0&&(Le.g==R||mm(Le.h,R))){if(!R.K&&mm(Le.h,R)&&Le.G==3){try{var _t=Le.Da.g.parse(ue)}catch{_t=null}if(Array.isArray(_t)&&_t.length==3){var Dr=_t;if(Dr[0]==0){e:if(!Le.u){if(Le.g)if(Le.g.F+3e3<R.F)Tm(Le),Wu(Le);else break e;zc(Le),fl(18)}}else Le.za=Dr[1],0<Le.za-Le.T&&37500>Dr[2]&&Le.F&&Le.v==0&&!Le.C&&(Le.C=Nh(ar(Le.Za,Le),6e3));if(1>=$d(Le.h)&&Le.ca){try{Le.ca()}catch{}Le.ca=void 0}}else cc(Le,11)}else if((R.K||Le.g==R)&&Tm(Le),!Os(ue))for(Dr=Le.Da.g.parse(ue),ue=0;ue<Dr.length;ue++){let Kn=Dr[ue];if(Le.T=Kn[0],Kn=Kn[1],Le.G==2)if(Kn[0]=="c"){Le.K=Kn[1],Le.ia=Kn[2];let Mi=Kn[3];Mi!=null&&(Le.la=Mi,Le.j.info("VER="+Le.la));let Xs=Kn[4];Xs!=null&&(Le.Aa=Xs,Le.j.info("SVER="+Le.Aa));let ra=Kn[5];ra!=null&&typeof ra=="number"&&0<ra&&(_t=1.5*ra,Le.L=_t,Le.j.info("backChannelRequestTimeoutMs_="+_t)),_t=Le;let Ga=R.g;if(Ga){let pl=Ga.g?Ga.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pl){var $r=_t.h;$r.g||pl.indexOf("spdy")==-1&&pl.indexOf("quic")==-1&&pl.indexOf("h2")==-1||($r.j=$r.l,$r.g=new Set,$r.h&&(gm($r,$r.h),$r.h=null))}if(_t.D){let Va=Ga.g?Ga.g.getResponseHeader("X-HTTP-Session-Id"):null;Va&&(_t.ya=Va,Pa(_t.I,_t.D,Va))}}if(Le.G=3,Le.l&&Le.l.ua(),Le.ba&&(Le.R=Date.now()-R.F,Le.j.info("Handshake RTT: "+Le.R+"ms")),(_t=Le).qa=ch(_t,_t.J?_t.ia:null,_t.W),R.K){gp(_t.h,R);var Wr=_t.L;Wr&&(R.I=Wr),R.B&&(fp(R),dm(R)),_t.g=R}else Oy(_t);0<Le.i.length&&Em(Le)}else Kn[0]!="stop"&&Kn[0]!="close"||cc(Le,7);else Le.G==3&&(Kn[0]=="stop"||Kn[0]=="close"?Kn[0]=="stop"?cc(Le,7):nd(Le):Kn[0]!="noop"&&Le.l&&Le.l.ta(Kn),Le.v=0)}}ji(4)}catch{}}Oo.prototype.ca=function(R){R=R.target;let ue=this.M;ue&&uc(R)==3?ue.j():this.Y(R)},Oo.prototype.Y=function(R){try{if(R==this.g)e:{let Ga=uc(this.g);var ue=this.g.Ba();let pl=this.g.Z();if(!(3>Ga)&&(Ga!=3||this.g&&(this.h.h||this.g.oa()||Ag(this.g)))){this.J||Ga!=4||ue==7||(ue==8||0>=pl?ji(3):ji(2)),fp(this);var Le=this.g.Z();this.X=Le;t:if(hm(this)){var _t=Ag(this.g);R="";var Dr=_t.length,$r=uc(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qc(this),pp(this);var Wr="";break t}this.h.i=new O.TextDecoder}for(ue=0;ue<Dr;ue++)this.h.h=!0,R+=this.h.i.decode(_t[ue],{stream:!($r&&ue==Dr-1)});_t.length=0,this.h.g+=R,this.C=0,Wr=this.h.g}else Wr=this.g.oa();if(this.o=Le==200,function(Va,Cu,Zs,Aa,_o,Ll,Qu){Va.info(function(){return"XMLHTTP RESP ("+Aa+") [ attempt "+_o+"]: "+Cu+`
`+Zs+`
`+Ll+" "+Qu})}(this.i,this.u,this.A,this.l,this.R,Ga,Le),this.o){if(this.T&&!this.K){t:{if(this.g){var Kn,Mi=this.g;if((Kn=Mi.g?Mi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Os(Kn)){var Xs=Kn;break t}}Xs=null}if(Le=Xs)Fd(this.i,this.l,Le,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fm(this,Le);else{this.o=!1,this.s=3,fl(12),qc(this),pp(this);break e}}if(this.P){let Va;for(Le=!0;!this.J&&this.C<Wr.length;)if((Va=function(Cu,Zs){var Aa=Cu.C,_o=Zs.indexOf(`
`,Aa);return _o==-1?_g:isNaN(Aa=Number(Zs.substring(Aa,_o)))?Vd:(_o+=1)+Aa>Zs.length?_g:(Zs=Zs.slice(_o,_o+Aa),Cu.C=_o+Aa,Zs)}(this,Wr))==_g){Ga==4&&(this.s=4,fl(14),Le=!1),Fd(this.i,this.l,null,"[Incomplete Response]");break}else if(Va==Vd){this.s=4,fl(15),Fd(this.i,this.l,Wr,"[Invalid Chunk]"),Le=!1;break}else Fd(this.i,this.l,Va,null),fm(this,Va);if(hm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ga!=4||Wr.length!=0||this.h.h||(this.s=1,fl(16),Le=!1),this.o=this.o&&Le,Le){if(0<Wr.length&&!this.W){this.W=!0;var ra=this.j;ra.g==this&&ra.ba&&!ra.M&&(ra.j.info("Great, no buffering proxy detected. Bytes received: "+Wr.length),_p(ra),ra.M=!0,fl(11))}}else Fd(this.i,this.l,Wr,"[Invalid Chunked Response]"),qc(this),pp(this)}else Fd(this.i,this.l,Wr,null),fm(this,Wr);Ga==4&&qc(this),this.o&&!this.J&&(Ga==4?Ip(this.j,this):(this.o=!1,dm(this)))}else(function(Va){let Cu={};Va=(Va.g&&2<=uc(Va)&&Va.g.getAllResponseHeaders()||"").split(`\r
`);for(let Aa=0;Aa<Va.length;Aa++){if(Os(Va[Aa]))continue;var Zs=function(Qu){var Df=1;Qu=Qu.split(":");let Wd=[];for(;0<Df&&Qu.length;)Wd.push(Qu.shift()),Df--;return Qu.length&&Wd.push(Qu.join(":")),Wd}(Va[Aa]);let _o=Zs[0];if(typeof(Zs=Zs[1])!="string")continue;Zs=Zs.trim();let Ll=Cu[_o]||[];Cu[_o]=Ll,Ll.push(Zs)}(function(Aa,_o){for(let Ll in Aa)_o.call(void 0,Aa[Ll],Ll,Aa)})(Cu,function(Aa){return Aa.join(", ")})})(this.g),Le==400&&0<Wr.indexOf("Unknown SID")?(this.s=3,fl(12)):(this.s=0,fl(13)),qc(this),pp(this)}}}catch{}finally{}},Oo.prototype.cancel=function(){this.J=!0,qc(this)},Oo.prototype.ba=function(){this.B=null;let R=Date.now();0<=R-this.S?(function(ue,Le){ue.info(function(){return"TIMEOUT: "+Le})}(this.i,this.A),this.L!=2&&(ji(),fl(17)),qc(this),this.s=2,pp(this)):dp(this,this.S-R)};var pm=class{constructor(R,ue){this.g=R,this.map=ue}};function Ud(R){this.l=R||10,R=O.PerformanceNavigationTiming?0<(R=O.performance.getEntriesByType("navigation")).length&&(R[0].nextHopProtocol=="hq"||R[0].nextHopProtocol=="h2"):!!(O.chrome&&O.chrome.loadTimes&&O.chrome.loadTimes()&&O.chrome.loadTimes().wasFetchedViaSpdy),this.j=R?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mp(R){return!!R.h||!!R.g&&R.g.size>=R.j}function $d(R){return R.h?1:R.g?R.g.size:0}function mm(R,ue){return R.h?R.h==ue:!!R.g&&R.g.has(ue)}function gm(R,ue){R.g?R.g.add(ue):R.h=ue}function gp(R,ue){R.h&&R.h==ue?R.h=null:R.g&&R.g.has(ue)&&R.g.delete(ue)}function Ry(R){if(R.h!=null)return R.i.concat(R.h.D);if(R.g!=null&&R.g.size!==0){let ue=R.i;for(let Le of R.g.values())ue=ue.concat(Le.D);return ue}return vn(R.i)}function Ig(R,ue){if(R.forEach&&typeof R.forEach=="function")R.forEach(ue,void 0);else if(X(R)||typeof R=="string")Array.prototype.forEach.call(R,ue,void 0);else for(var Le=function(Wr){if(Wr.na&&typeof Wr.na=="function")return Wr.na();if(!Wr.V||typeof Wr.V!="function"){if(typeof Map<"u"&&Wr instanceof Map)return Array.from(Wr.keys());if(!(typeof Set<"u"&&Wr instanceof Set)){if(X(Wr)||typeof Wr=="string"){var Kn=[];Wr=Wr.length;for(var Mi=0;Mi<Wr;Mi++)Kn.push(Mi);return Kn}for(let Xs in Kn=[],Mi=0,Wr)Kn[Mi++]=Xs;return Kn}}}(R),_t=function(Wr){if(Wr.V&&typeof Wr.V=="function")return Wr.V();if(typeof Map<"u"&&Wr instanceof Map||typeof Set<"u"&&Wr instanceof Set)return Array.from(Wr.values());if(typeof Wr=="string")return Wr.split("");if(X(Wr)){for(var Kn=[],Mi=Wr.length,Xs=0;Xs<Mi;Xs++)Kn.push(Wr[Xs]);return Kn}for(Xs in Kn=[],Mi=0,Wr)Kn[Mi++]=Wr[Xs];return Kn}(R),Dr=_t.length,$r=0;$r<Dr;$r++)ue.call(void 0,_t[$r],Le&&Le[$r],R)}Ud.prototype.cancel=function(){if(this.i=Ry(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let R of this.g.values())R.cancel();this.g.clear()}};var Py=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pf(R){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,R instanceof Pf){this.h=R.h,xu(this,R.j),this.o=R.o,this.g=R.g,lc(this,R.s),this.l=R.l;var ue=R.i,Le=new vm;Le.i=ue.i,ue.g&&(Le.g=new Map(ue.g),Le.h=ue.h),Tg(this,Le),this.m=R.m}else R&&(ue=String(R).match(Py))?(this.h=!1,xu(this,ue[1]||"",!0),this.o=ed(ue[2]||""),this.g=ed(ue[3]||"",!0),lc(this,ue[4]),this.l=ed(ue[5]||"",!0),Tg(this,ue[6]||"",!0),this.m=ed(ue[7]||"")):(this.h=!1,this.i=new vm(null,this.h))}function cu(R){return new Pf(R)}function xu(R,ue,Le){R.j=Le?ed(ue,!0):ue,R.j&&(R.j=R.j.replace(/:$/,""))}function lc(R,ue){if(ue){if(isNaN(ue=Number(ue))||0>ue)throw Error("Bad port number "+ue);R.s=ue}else R.s=null}function Tg(R,ue,Le){var _t,Dr;ue instanceof vm?(R.i=ue,_t=R.i,(Dr=R.h)&&!_t.j&&(Dh(_t),_t.i=null,_t.g.forEach(function($r,Wr){var Kn=Wr.toLowerCase();Wr!=Kn&&(Rg(this,Wr),wp(this,Kn,$r))},_t)),_t.j=Dr):(Le||(ue=Oh(ue,Cg)),R.i=new vm(ue,R.h))}function Pa(R,ue,Le){R.i.set(ue,Le)}function Af(R){return Pa(R,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),R}function ed(R,ue){return R?ue?decodeURI(R.replace(/%25/g,"%2525")):decodeURIComponent(R):""}function Oh(R,ue,Le){return typeof R=="string"?(R=encodeURI(R).replace(ue,xg),Le&&(R=R.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R):null}function xg(R){return"%"+((R=R.charCodeAt(0))>>4&15).toString(16)+(15&R).toString(16)}Pf.prototype.toString=function(){var R=[],ue=this.j;ue&&R.push(Oh(ue,yp,!0),":");var Le=this.g;return(Le||ue=="file")&&(R.push("//"),(ue=this.o)&&R.push(Oh(ue,yp,!0),"@"),R.push(encodeURIComponent(String(Le)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),(Le=this.s)!=null&&R.push(":",String(Le))),(Le=this.l)&&(this.g&&Le.charAt(0)!="/"&&R.push("/"),R.push(Oh(Le,Le.charAt(0)=="/"?ym:vp,!0))),(Le=this.i.toString())&&R.push("?",Le),(Le=this.m)&&R.push("#",Oh(Le,kg)),R.join("")};var yp=/[#\/\?@]/g,vp=/[#\?:]/g,ym=/[#\?]/g,Cg=/[#\?@]/g,kg=/#/g;function vm(R,ue){this.h=this.g=null,this.i=R||null,this.j=!!ue}function Dh(R){R.g||(R.g=new Map,R.h=0,R.i&&function(ue,Le){if(ue){ue=ue.split("&");for(var _t=0;_t<ue.length;_t++){var Dr=ue[_t].indexOf("="),$r=null;if(0<=Dr){var Wr=ue[_t].substring(0,Dr);$r=ue[_t].substring(Dr+1)}else Wr=ue[_t];Le(Wr,$r?decodeURIComponent($r.replace(/\+/g," ")):"")}}}(R.i,function(ue,Le){R.add(decodeURIComponent(ue.replace(/\+/g," ")),Le)}))}function Rg(R,ue){Dh(R),ue=Bd(R,ue),R.g.has(ue)&&(R.i=null,R.h-=R.g.get(ue).length,R.g.delete(ue))}function Pg(R,ue){return Dh(R),ue=Bd(R,ue),R.g.has(ue)}function wp(R,ue,Le){Rg(R,ue),0<Le.length&&(R.i=null,R.g.set(Bd(R,ue),vn(Le)),R.h+=Le.length)}function Bd(R,ue){return ue=String(ue),R.j&&(ue=ue.toLowerCase()),ue}function qd(R,ue,Le,_t,Dr){try{Dr&&(Dr.onload=null,Dr.onerror=null,Dr.onabort=null,Dr.ontimeout=null),_t(Le)}catch{}}function $0(){this.g=new Ov}function Il(R){this.l=R.Ub||null,this.j=R.eb||!1}function wm(R,ue){Zl.call(this),this.D=R,this.o=ue,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function bp(R){R.j.read().then(R.Pa.bind(R)).catch(R.ga.bind(R))}function td(R){R.readyState=4,R.l=null,R.j=null,R.v=null,zd(R)}function zd(R){R.onreadystatechange&&R.onreadystatechange.call(R)}function Ay(R){let ue="";return Ft(R,function(Le,_t){ue+=_t+":"+Le+`\r
`}),ue}function Gd(R,ue,Le){e:{for(_t in Le){var _t=!1;break e}_t=!0}_t||(Le=Ay(Le),typeof R=="string"?Le!=null&&encodeURIComponent(String(Le)):Pa(R,ue,Le))}function il(R){Zl.call(this),this.headers=new Map,this.o=R||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(o=vm.prototype).add=function(R,ue){Dh(this),this.i=null,R=Bd(this,R);var Le=this.g.get(R);return Le||this.g.set(R,Le=[]),Le.push(ue),this.h+=1,this},o.forEach=function(R,ue){Dh(this),this.g.forEach(function(Le,_t){Le.forEach(function(Dr){R.call(ue,Dr,_t,this)},this)},this)},o.na=function(){Dh(this);let R=Array.from(this.g.values()),ue=Array.from(this.g.keys()),Le=[];for(let _t=0;_t<ue.length;_t++){let Dr=R[_t];for(let $r=0;$r<Dr.length;$r++)Le.push(ue[_t])}return Le},o.V=function(R){Dh(this);let ue=[];if(typeof R=="string")Pg(this,R)&&(ue=ue.concat(this.g.get(Bd(this,R))));else{R=Array.from(this.g.values());for(let Le=0;Le<R.length;Le++)ue=ue.concat(R[Le])}return ue},o.set=function(R,ue){return Dh(this),this.i=null,Pg(this,R=Bd(this,R))&&(this.h-=this.g.get(R).length),this.g.set(R,[ue]),this.h+=1,this},o.get=function(R,ue){return R&&0<(R=this.V(R)).length?String(R[0]):ue},o.toString=function(){if(this.i)return this.i;if(!this.g)return"";let R=[],ue=Array.from(this.g.keys());for(var Le=0;Le<ue.length;Le++){var _t=ue[Le];let $r=encodeURIComponent(String(_t)),Wr=this.V(_t);for(_t=0;_t<Wr.length;_t++){var Dr=$r;Wr[_t]!==""&&(Dr+="="+encodeURIComponent(String(Wr[_t]))),R.push(Dr)}}return this.i=R.join("&")},wr(Il,Bc),Il.prototype.g=function(){return new wm(this.l,this.j)},Il.prototype.i=(m={},function(){return m}),wr(wm,Zl),(o=wm.prototype).open=function(R,ue){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=R,this.A=ue,this.readyState=1,zd(this)},o.send=function(R){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let ue={headers:this.u,method:this.B,credentials:this.m,cache:void 0};R&&(ue.body=R),(this.D||O).fetch(new Request(this.A,ue)).then(this.Sa.bind(this),this.ga.bind(this))},o.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,td(this)),this.readyState=0},o.Sa=function(R){if(this.g&&(this.l=R,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=R.headers,this.readyState=2,zd(this)),this.g&&(this.readyState=3,zd(this),this.g)))if(this.responseType==="arraybuffer")R.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(O.ReadableStream!==void 0&&"body"in R){if(this.j=R.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bp(this)}else R.text().then(this.Ra.bind(this),this.ga.bind(this))},o.Pa=function(R){if(this.g){if(this.o&&R.value)this.response.push(R.value);else if(!this.o){var ue=R.value?R.value:new Uint8Array(0);(ue=this.v.decode(ue,{stream:!R.done}))&&(this.response=this.responseText+=ue)}R.done?td(this):zd(this),this.readyState==3&&bp(this)}},o.Ra=function(R){this.g&&(this.response=this.responseText=R,td(this))},o.Qa=function(R){this.g&&(this.response=R,td(this))},o.ga=function(){this.g&&td(this)},o.setRequestHeader=function(R,ue){this.u.append(R,ue)},o.getResponseHeader=function(R){return this.h&&this.h.get(R.toLowerCase())||""},o.getAllResponseHeaders=function(){if(!this.h)return"";let R=[],ue=this.h.entries();for(var Le=ue.next();!Le.done;)R.push((Le=Le.value)[0]+": "+Le[1]),Le=ue.next();return R.join(`\r
`)},Object.defineProperty(wm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(R){this.m=R?"include":"same-origin"}}),wr(il,Zl);var bm=/^https?$/i,Sm=["POST","PUT"];function Mv(R,ue){R.h=!1,R.g&&(R.j=!0,R.g.abort(),R.j=!1),R.l=ue,R.m=5,Ny(R),rd(R)}function Ny(R){R.A||(R.A=!0,Dl(R,"complete"),Dl(R,"error"))}function Sp(R){if(R.h&&_!==void 0&&(!R.v[1]||uc(R)!=4||R.Z()!=2)){if(R.u&&uc(R)==4)gg(R.Ea,0,R);else if(Dl(R,"readystatechange"),uc(R)==4){R.h=!1;try{let Wr=R.Z();switch(Wr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ue,Le,_t=!0;break;default:_t=!1}if(!(ue=_t)){if(Le=Wr===0){var Dr=String(R.D).match(Py)[1]||null;!Dr&&O.self&&O.self.location&&(Dr=O.self.location.protocol.slice(0,-1)),Le=!bm.test(Dr?Dr.toLowerCase():"")}ue=Le}if(ue)Dl(R,"complete"),Dl(R,"success");else{R.m=6;try{var $r=2<uc(R)?R.g.statusText:""}catch{$r=""}R.l=$r+" ["+R.Z()+"]",Ny(R)}}finally{rd(R)}}}}function rd(R,ue){if(R.g){Hd(R);let Le=R.g,_t=R.v[0]?()=>{}:null;R.g=null,R.v=null,ue||Dl(R,"ready");try{Le.onreadystatechange=_t}catch{}}}function Hd(R){R.I&&(O.clearTimeout(R.I),R.I=null)}function uc(R){return R.g?R.g.readyState:0}function Ag(R){try{if(!R.g)return null;if("response"in R.g)return R.g.response;switch(R.H){case"":case"text":return R.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in R.g)return R.g.mozResponseArrayBuffer}return null}catch{return null}}function Ep(R,ue,Le){return Le&&Le.internalChannelParams&&Le.internalChannelParams[R]||ue}function Ng(R){this.Aa=0,this.i=[],this.j=new Rf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ep("failFast",!1,R),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ep("baseRetryDelayMs",5e3,R),this.cb=Ep("retryDelaySeedMs",1e4,R),this.Wa=Ep("forwardChannelMaxRetries",2,R),this.wa=Ep("forwardChannelRequestTimeoutMs",2e4,R),this.pa=R&&R.xmlHttpFactory||void 0,this.Xa=R&&R.Tb||void 0,this.Ca=R&&R.useFetchStreams||!1,this.L=void 0,this.J=R&&R.supportsCrossDomainXhr||!1,this.K="",this.h=new Ud(R&&R.concurrentRequestLimit),this.Da=new $0,this.P=R&&R.fastHandshake||!1,this.O=R&&R.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=R&&R.Rb||!1,R&&R.xa&&this.j.xa(),R&&R.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&R&&R.detectBufferingProxy||!1,this.ja=void 0,R&&R.longPollingTimeout&&0<R.longPollingTimeout&&(this.ja=R.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function nd(R){if(Kd(R),R.G==3){var ue=R.U++,Le=cu(R.I);if(Pa(Le,"SID",R.K),Pa(Le,"RID",ue),Pa(Le,"TYPE","terminate"),_m(R,Le),(ue=new Oo(R,R.j,ue)).L=2,ue.v=Af(cu(Le)),Le=!1,O.navigator&&O.navigator.sendBeacon)try{Le=O.navigator.sendBeacon(ue.v.toString(),"")}catch{}!Le&&O.Image&&(new Image().src=ue.v,Le=!0),Le||(ue.g=hc(ue.j,null),ue.g.ea(ue.v)),ue.F=Date.now(),dm(ue)}Mh(R)}function Wu(R){R.g&&(_p(R),R.g.cancel(),R.g=null)}function Kd(R){Wu(R),R.u&&(O.clearTimeout(R.u),R.u=null),Tm(R),R.h.cancel(),R.s&&(typeof R.s=="number"&&O.clearTimeout(R.s),R.s=null)}function Em(R){if(!mp(R.h)&&!R.s){R.s=!0;var ue=R.Ga;Wh||Iy(),om||(Wh(),om=!0),Jh.add(ue,R),R.B=0}}function Lv(R,ue){var Le;Le=ue?ue.l:R.U++;let _t=cu(R.I);Pa(_t,"SID",R.K),Pa(_t,"RID",Le),Pa(_t,"AID",R.T),_m(R,_t),R.m&&R.o&&Gd(_t,R.m,R.o),Le=new Oo(R,R.j,Le,R.B+1),R.m===null&&(Le.H=R.o),ue&&(R.i=ue.D.concat(R.i)),ue=Im(R,Le,1e3),Le.I=Math.round(.5*R.wa)+Math.round(.5*R.wa*Math.random()),gm(R.h,Le),ky(Le,_t,ue)}function _m(R,ue){R.H&&Ft(R.H,function(Le,_t){Pa(ue,_t,Le)}),R.l&&Ig({},function(Le,_t){Pa(ue,_t,Le)})}function Im(R,ue,Le){Le=Math.min(R.i.length,Le);var _t=R.l?ar(R.l.Na,R.l,R):null;e:{var Dr=R.i;let $r=-1;for(;;){let Wr=["count="+Le];$r==-1?0<Le?($r=Dr[0].g,Wr.push("ofs="+$r)):$r=0:Wr.push("ofs="+$r);let Kn=!0;for(let Mi=0;Mi<Le;Mi++){let Xs=Dr[Mi].g,ra=Dr[Mi].map;if(0>(Xs-=$r))$r=Math.max(0,Dr[Mi].g-100),Kn=!1;else try{(function(Ga,pl,Va){let Cu=Va||"";try{Ig(Ga,function(Zs,Aa){let _o=Zs;oe(Zs)&&(_o=Nv(Zs)),pl.push(Cu+Aa+"="+encodeURIComponent(_o))})}catch(Zs){throw pl.push(Cu+"type="+encodeURIComponent("_badmap")),Zs}})(ra,Wr,"req"+Xs+"_")}catch{_t&&_t(ra)}}if(Kn){_t=Wr.join("&");break e}}}return R=R.i.splice(0,Le),ue.D=R,_t}function Oy(R){if(!R.g&&!R.u){R.Y=1;var ue=R.Fa;Wh||Iy(),om||(Wh(),om=!0),Jh.add(ue,R),R.v=0}}function zc(R){return!R.g&&!R.u&&!(3<=R.v)&&(R.Y++,R.u=Nh(ar(R.Fa,R),id(R,R.v)),R.v++,!0)}function _p(R){R.A!=null&&(O.clearTimeout(R.A),R.A=null)}function Nf(R){R.g=new Oo(R,R.j,"rpc",R.Y),R.m===null&&(R.g.H=R.o),R.g.O=0;var ue=cu(R.qa);Pa(ue,"RID","rpc"),Pa(ue,"SID",R.K),Pa(ue,"AID",R.T),Pa(ue,"CI",R.F?"0":"1"),!R.F&&R.ja&&Pa(ue,"TO",R.ja),Pa(ue,"TYPE","xmlhttp"),_m(R,ue),R.m&&R.o&&Gd(ue,R.m,R.o),R.L&&(R.g.I=R.L);var Le=R.g;R=R.ia,Le.L=1,Le.v=Af(cu(ue)),Le.m=null,Le.P=!0,hp(Le,R)}function Tm(R){R.C!=null&&(O.clearTimeout(R.C),R.C=null)}function Ip(R,ue){var Le=null;if(R.g==ue){Tm(R),_p(R),R.g=null;var _t=2}else{if(!mm(R.h,ue))return;Le=ue.D,gp(R.h,ue),_t=1}if(R.G!=0){if(ue.o)if(_t==1){Le=ue.m?ue.m.length:0,ue=Date.now()-ue.F;var Dr,$r=R.B;Dl(_t=uh(),new Sg(_t,Le)),Em(R)}else Oy(R);else if(($r=ue.s)==3||$r==0&&0<ue.X||!(_t==1&&(Dr=ue,!($d(R.h)>=R.h.j-(R.s?1:0))&&(R.s?(R.i=Dr.D.concat(R.i),!0):R.G!=1&&R.G!=2&&!(R.B>=(R.Va?0:R.Wa))&&(R.s=Nh(ar(R.Ga,R,Dr),id(R,R.B)),R.B++,!0)))||_t==2&&zc(R)))switch(Le&&0<Le.length&&((ue=R.h).i=ue.i.concat(Le)),$r){case 1:cc(R,5);break;case 4:cc(R,10);break;case 3:cc(R,6);break;default:cc(R,2)}}}function id(R,ue){let Le=R.Ta+Math.floor(Math.random()*R.cb);return R.isActive()||(Le*=2),Le*ue}function cc(R,ue){if(R.j.info("Error code "+ue),ue==2){var Le=ar(R.fb,R),_t=R.Xa;let Dr=!_t;_t=new Pf(_t||"//www.google.com/images/cleardot.gif"),O.location&&O.location.protocol=="http"||xu(_t,"https"),Af(_t),Dr?function($r,Wr){let Kn=new Rf;if(O.Image){let Mi=new Image;Mi.onload=ur(qd,Kn,"TestLoadImage: loaded",!0,Wr,Mi),Mi.onerror=ur(qd,Kn,"TestLoadImage: error",!1,Wr,Mi),Mi.onabort=ur(qd,Kn,"TestLoadImage: abort",!1,Wr,Mi),Mi.ontimeout=ur(qd,Kn,"TestLoadImage: timeout",!1,Wr,Mi),O.setTimeout(function(){Mi.ontimeout&&Mi.ontimeout()},1e4),Mi.src=$r}else Wr(!1)}(_t.toString(),Le):function($r,Wr){let Kn=new Rf,Mi=new AbortController,Xs=setTimeout(()=>{Mi.abort(),qd(Kn,"TestPingServer: timeout",!1,Wr)},1e4);fetch($r,{signal:Mi.signal}).then(ra=>{clearTimeout(Xs),ra.ok?qd(Kn,"TestPingServer: ok",!0,Wr):qd(Kn,"TestPingServer: server error",!1,Wr)}).catch(()=>{clearTimeout(Xs),qd(Kn,"TestPingServer: error",!1,Wr)})}(_t.toString(),Le)}else fl(2);R.G=0,R.l&&R.l.sa(ue),Mh(R),Kd(R)}function Mh(R){if(R.G=0,R.ka=[],R.l){let ue=Ry(R.h);(ue.length!=0||R.i.length!=0)&&(Hn(R.ka,ue),Hn(R.ka,R.i),R.h.i.length=0,vn(R.i),R.i.length=0),R.l.ra()}}function ch(R,ue,Le){var _t=Le instanceof Pf?cu(Le):new Pf(Le);if(_t.g!="")ue&&(_t.g=ue+"."+_t.g),lc(_t,_t.s);else{var Dr=O.location;_t=Dr.protocol,ue=ue?ue+"."+Dr.hostname:Dr.hostname,Dr=+Dr.port;var $r=new Pf(null);_t&&xu($r,_t),ue&&($r.g=ue),Dr&&lc($r,Dr),Le&&($r.l=Le),_t=$r}return Le=R.D,ue=R.ya,Le&&ue&&Pa(_t,Le,ue),Pa(_t,"VER",R.la),_m(R,_t),_t}function hc(R,ue,Le){if(ue&&!R.J)throw Error("Can't create secondary domain capable XhrIo object.");return(ue=new il(R.Ca&&!R.pa?new Il({eb:Le}):R.pa)).Ha(R.J),ue}function Lh(){}function sd(){}function Ju(R,ue){Zl.call(this),this.g=new Ng(ue),this.l=R,this.h=ue&&ue.messageUrlParams||null,R=ue&&ue.messageHeaders||null,ue&&ue.clientProtocolHeaderRequired&&(R?R["X-Client-Protocol"]="webchannel":R={"X-Client-Protocol":"webchannel"}),this.g.o=R,R=ue&&ue.initMessageHeaders||null,ue&&ue.messageContentType&&(R?R["X-WebChannel-Content-Type"]=ue.messageContentType:R={"X-WebChannel-Content-Type":ue.messageContentType}),ue&&ue.va&&(R?R["X-WebChannel-Client-Profile"]=ue.va:R={"X-WebChannel-Client-Profile":ue.va}),this.g.S=R,(R=ue&&ue.Sb)&&!Os(R)&&(this.g.m=R),this.v=ue&&ue.supportsCrossDomainXhr||!1,this.u=ue&&ue.sendRawJson||!1,(ue=ue&&ue.httpSessionIdParam)&&!Os(ue)&&(this.g.D=ue,(R=this.h)!==null&&ue in R&&ue in(R=this.h)&&delete R[ue]),this.j=new hh(this)}function Of(R){kf.call(this),R.__headers__&&(this.headers=R.__headers__,this.statusCode=R.__status__,delete R.__headers__,delete R.__status__);var ue=R.__sm__;if(ue){e:{for(let Le in ue){R=Le;break e}R=void 0}(this.i=R)&&(R=this.i,ue=ue!==null&&R in ue?ue[R]:void 0),this.data=ue}else this.data=R}function Dy(){Ku.call(this),this.status=1}function hh(R){this.g=R}(o=il.prototype).Ha=function(R){this.J=R},o.ea=function(R,ue,Le,_t){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+R);ue=ue?ue.toUpperCase():"GET",this.D=R,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():i.g(),this.v=this.o?vg(this.o):vg(i),this.g.onreadystatechange=ar(this.Ea,this);try{this.B=!0,this.g.open(ue,String(R),!0),this.B=!1}catch($r){Mv(this,$r);return}if(R=Le||"",Le=new Map(this.headers),_t)if(Object.getPrototypeOf(_t)===Object.prototype)for(var Dr in _t)Le.set(Dr,_t[Dr]);else if(typeof _t.keys=="function"&&typeof _t.get=="function")for(let $r of _t.keys())Le.set($r,_t.get($r));else throw Error("Unknown input type for opt_headers: "+String(_t));for(let[$r,Wr]of(_t=Array.from(Le.keys()).find(Kn=>Kn.toLowerCase()=="content-type"),Dr=O.FormData&&R instanceof O.FormData,!(0<=Array.prototype.indexOf.call(Sm,ue,void 0))||_t||Dr||Le.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),Le))this.g.setRequestHeader($r,Wr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hd(this),this.u=!0,this.g.send(R),this.u=!1}catch($r){Mv(this,$r)}},o.abort=function(R){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=R||7,Dl(this,"complete"),Dl(this,"abort"),rd(this))},o.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rd(this,!0)),il.aa.N.call(this)},o.Ea=function(){this.s||(this.B||this.u||this.j?Sp(this):this.bb())},o.bb=function(){Sp(this)},o.isActive=function(){return!!this.g},o.Z=function(){try{return 2<uc(this)?this.g.status:-1}catch{return-1}},o.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},o.Oa=function(R){if(this.g){var ue=this.g.responseText;return R&&ue.indexOf(R)==0&&(ue=ue.substring(R.length)),cp(ue)}},o.Ba=function(){return this.m},o.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)},(o=Ng.prototype).la=8,o.G=1,o.connect=function(R,ue,Le,_t){fl(0),this.W=R,this.H=ue||{},Le&&_t!==void 0&&(this.H.OSID=Le,this.H.OAID=_t),this.F=this.X,this.I=ch(this,null,this.W),Em(this)},o.Ga=function(R){if(this.s)if(this.s=null,this.G==1){if(!R){this.U=Math.floor(1e5*Math.random()),R=this.U++;let Dr=new Oo(this,this.j,R),$r=this.o;if(this.S&&($r?xr($r=Xt($r),this.S):$r=this.S),this.m!==null||this.O||(Dr.H=$r,$r=null),this.P)e:{for(var ue=0,Le=0;Le<this.i.length;Le++){t:{var _t=this.i[Le];if("__data__"in _t.map&&typeof(_t=_t.map.__data__)=="string"){_t=_t.length;break t}_t=void 0}if(_t===void 0)break;if(4096<(ue+=_t)){ue=Le;break e}if(ue===4096||Le===this.i.length-1){ue=Le+1;break e}}ue=1e3}else ue=1e3;ue=Im(this,Dr,ue),Pa(Le=cu(this.I),"RID",R),Pa(Le,"CVER",22),this.D&&Pa(Le,"X-HTTP-Session-Id",this.D),_m(this,Le),$r&&(this.O?ue="headers="+encodeURIComponent(String(Ay($r)))+"&"+ue:this.m&&Gd(Le,this.m,$r)),gm(this.h,Dr),this.Ua&&Pa(Le,"TYPE","init"),this.P?(Pa(Le,"$req",ue),Pa(Le,"SID","null"),Dr.T=!0,ky(Dr,Le,null)):ky(Dr,Le,ue),this.G=2}}else this.G==3&&(R?Lv(this,R):this.i.length==0||mp(this.h)||Lv(this))},o.Fa=function(){if(this.u=null,Nf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var R=2*this.R;this.j.info("BP detection timer enabled: "+R),this.A=Nh(ar(this.ab,this),R)}},o.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fl(10),Wu(this),Nf(this))},o.Za=function(){this.C!=null&&(this.C=null,Wu(this),zc(this),fl(19))},o.fb=function(R){R?(this.j.info("Successfully pinged google.com"),fl(2)):(this.j.info("Failed to ping google.com"),fl(1))},o.isActive=function(){return!!this.l&&this.l.isActive(this)},(o=Lh.prototype).ua=function(){},o.ta=function(){},o.sa=function(){},o.ra=function(){},o.isActive=function(){return!0},o.Na=function(){},sd.prototype.g=function(R,ue){return new Ju(R,ue)},wr(Ju,Zl),Ju.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ju.prototype.close=function(){nd(this.g)},Ju.prototype.o=function(R){var ue=this.g;if(typeof R=="string"){var Le={};Le.__data__=R,R=Le}else this.u&&((Le={}).__data__=Nv(R),R=Le);ue.i.push(new pm(ue.Ya++,R)),ue.G==3&&Em(ue)},Ju.prototype.N=function(){this.g.l=null,delete this.j,nd(this.g),delete this.g,Ju.aa.N.call(this)},wr(Of,kf),wr(Dy,Ku),wr(hh,Lh),hh.prototype.ua=function(){Dl(this.g,"a")},hh.prototype.ta=function(R){Dl(this.g,new Of(R))},hh.prototype.sa=function(R){Dl(this.g,new Dy)},hh.prototype.ra=function(){Dl(this.g,"b")},sd.prototype.createWebChannel=sd.prototype.g,Ju.prototype.send=Ju.prototype.o,Ju.prototype.open=Ju.prototype.m,Ju.prototype.close=Ju.prototype.close,x=vt.createWebChannelTransport=function(){return new sd},I=vt.getStatEventTarget=function(){return uh()},k=vt.Event=Ml,S=vt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Eg.NO_ERROR=0,Eg.TIMEOUT=8,Eg.HTTP_ERROR=6,y=vt.ErrorCode=Eg,Dv.COMPLETE="complete",z=vt.EventType=Dv,Cy.EventType=Zh,Zh.OPEN="a",Zh.CLOSE="b",Zh.ERROR="c",Zh.MESSAGE="d",Zl.prototype.listen=Zl.prototype.K,j=vt.WebChannel=Cy,vt.FetchXmlHttpFactory=Il,il.prototype.listenOnce=il.prototype.L,il.prototype.getLastError=il.prototype.Ka,il.prototype.getLastErrorCode=il.prototype.Ba,il.prototype.getStatus=il.prototype.Z,il.prototype.getResponseJson=il.prototype.Oa,il.prototype.getResponseText=il.prototype.oa,il.prototype.send=il.prototype.ea,il.prototype.setWithCredentials=il.prototype.Ha,W=vt.XhrIo=il}).apply(at!==void 0?at:typeof zr<"u"?zr:typeof window<"u"?window:{});var jt=M(6195).Buffer;let re="@firebase/firestore";class F{constructor(i){this.uid=i}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(i){return i.uid===this.uid}}F.UNAUTHENTICATED=new F(null),F.GOOGLE_CREDENTIALS=new F("google-credentials-uid"),F.FIRST_PARTY=new F("first-party-uid"),F.MOCK_USER=new F("mock-user");let Q="11.0.2",se=new fe.Yd("@firebase/firestore");function me(){return se.logLevel}function ce(m,...i){if(se.logLevel<=fe.in.DEBUG){let o=i.map(He);se.debug(`Firestore (${Q}): ${m}`,...o)}}function Ke(m,...i){if(se.logLevel<=fe.in.ERROR){let o=i.map(He);se.error(`Firestore (${Q}): ${m}`,...o)}}function Je(m,...i){if(se.logLevel<=fe.in.WARN){let o=i.map(He);se.warn(`Firestore (${Q}): ${m}`,...o)}}function He(m){if(typeof m=="string")return m;try{return JSON.stringify(m)}catch{return m}}function _e(m="Unexpected state"){let i=`FIRESTORE (${Q}) INTERNAL ASSERTION FAILED: `+m;throw Ke(i),Error(i)}let Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends Se.ZR{constructor(i,o){super(i,o),this.code=i,this.message=o,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}}class Ne{constructor(i,o){this.user=o,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${i}`)}}class tt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(i,o){i.enqueueRetryable(()=>o(F.UNAUTHENTICATED))}shutdown(){}}class we{constructor(i){this.token=i,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(i,o){this.changeListener=o,i.enqueueRetryable(()=>o(this.token.user))}shutdown(){this.changeListener=null}}class Ce{constructor(i){this.t=i,this.currentUser=F.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(i,o){this.o===void 0||_e();let d=this.i,v=oe=>this.i!==d?(d=this.i,o(oe)):Promise.resolve(),_=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),_.resolve(),_=new lr,i.enqueueRetryable(()=>v(this.currentUser))};let O=()=>{let oe=_;i.enqueueRetryable(async()=>{await oe.promise,await v(this.currentUser)})},X=oe=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=oe,this.o&&(this.auth.addAuthTokenListener(this.o),O())};this.t.onInit(oe=>X(oe)),setTimeout(()=>{if(!this.auth){let oe=this.t.getImmediate({optional:!0});oe?X(oe):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),_.resolve(),_=new lr)}},0),O()}getToken(){let i=this.i,o=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(o).then(d=>this.i!==i?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):d?(typeof d.accessToken=="string"||_e(),new Ne(d.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let i=this.auth&&this.auth.getUid();return i===null||typeof i=="string"||_e(),new F(i)}}class We{constructor(i,o,d){this.l=i,this.h=o,this.P=d,this.type="FirstParty",this.user=F.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let i=this.I();return i&&this.T.set("Authorization",i),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ve{constructor(i,o,d){this.l=i,this.h=o,this.P=d}getToken(){return Promise.resolve(new We(this.l,this.h,this.P))}start(i,o){i.enqueueRetryable(()=>o(F.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ve{constructor(i){this.value=i,this.type="AppCheck",this.headers=new Map,i&&i.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gt{constructor(i){this.A=i,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(i,o){this.o===void 0||_e();let d=_=>{_.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);let O=_.token!==this.R;return this.R=_.token,ce("FirebaseAppCheckTokenProvider",`Received ${O?"new":"existing"} token.`),O?o(_.token):Promise.resolve()};this.o=_=>{i.enqueueRetryable(()=>d(_))};let v=_=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(_=>v(_)),setTimeout(()=>{if(!this.appCheck){let _=this.A.getImmediate({optional:!0});_?v(_):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let i=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(i).then(o=>o?(typeof o.token=="string"||_e(),this.R=o.token,new Ve(o.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class mt{static newId(){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=Math.floor(256/i.length)*i.length,d="";for(;d.length<20;){let v=function(_){let O=typeof zr<"u"&&(zr.crypto||zr.msCrypto),X=new Uint8Array(40);if(O&&typeof O.getRandomValues=="function")O.getRandomValues(X);else for(let oe=0;oe<40;oe++)X[oe]=Math.floor(256*Math.random());return X}(0);for(let _=0;_<v.length;++_)d.length<20&&v[_]<o&&(d+=i.charAt(v[_]%i.length))}return d}}function lt(m,i){return m<i?-1:m>i?1:0}function et(m,i,o){return m.length===i.length&&m.every((d,v)=>o(d,i[v]))}class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(i){return bt.fromMillis(i.getTime())}static fromMillis(i){let o=Math.floor(i/1e3);return new bt(o,Math.floor(1e6*(i-1e3*o)))}constructor(i,o){if(this.seconds=i,this.nanoseconds=o,o<0||o>=1e9)throw new pt(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+o);if(i<-62135596800||i>=253402300800)throw new pt(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(i){return this.seconds===i.seconds?lt(this.nanoseconds,i.nanoseconds):lt(this.seconds,i.seconds)}isEqual(i){return i.seconds===this.seconds&&i.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{static fromTimestamp(i){return new Ct(i)}static min(){return new Ct(new bt(0,0))}static max(){return new Ct(new bt(253402300799,999999999))}constructor(i){this.timestamp=i}compareTo(i){return this.timestamp._compareTo(i.timestamp)}isEqual(i){return this.timestamp.isEqual(i.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ee{constructor(i,o,d){o===void 0?o=0:o>i.length&&_e(),d===void 0?d=i.length-o:d>i.length-o&&_e(),this.segments=i,this.offset=o,this.len=d}get length(){return this.len}isEqual(i){return Ee.comparator(this,i)===0}child(i){let o=this.segments.slice(this.offset,this.limit());return i instanceof Ee?i.forEach(d=>{o.push(d)}):o.push(i),this.construct(o)}limit(){return this.offset+this.length}popFirst(i){return i=i===void 0?1:i,this.construct(this.segments,this.offset+i,this.length-i)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(i){return this.segments[this.offset+i]}isEmpty(){return this.length===0}isPrefixOf(i){if(i.length<this.length)return!1;for(let o=0;o<this.length;o++)if(this.get(o)!==i.get(o))return!1;return!0}isImmediateParentOf(i){if(this.length+1!==i.length)return!1;for(let o=0;o<this.length;o++)if(this.get(o)!==i.get(o))return!1;return!0}forEach(i){for(let o=this.offset,d=this.limit();o<d;o++)i(this.segments[o])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(i,o){let d=Math.min(i.length,o.length);for(let v=0;v<d;v++){let _=i.get(v),O=o.get(v);if(_<O)return-1;if(_>O)return 1}return i.length<o.length?-1:i.length>o.length?1:0}}class Qe extends Ee{construct(i,o,d){return new Qe(i,o,d)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...i){let o=[];for(let d of i){if(d.indexOf("//")>=0)throw new pt(Fe.INVALID_ARGUMENT,`Invalid segment (${d}). Paths must not contain // in them.`);o.push(...d.split("/").filter(v=>v.length>0))}return new Qe(o)}static emptyPath(){return new Qe([])}}let yt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Ee{construct(i,o,d){return new Rt(i,o,d)}static isValidIdentifier(i){return yt.test(i)}canonicalString(){return this.toArray().map(i=>(i=i.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(i)||(i="`"+i+"`"),i)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rt(["__name__"])}static fromServerFormat(i){let o=[],d="",v=0,_=()=>{if(d.length===0)throw new pt(Fe.INVALID_ARGUMENT,`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);o.push(d),d=""},O=!1;for(;v<i.length;){let X=i[v];if(X==="\\"){if(v+1===i.length)throw new pt(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+i);let oe=i[v+1];if(oe!=="\\"&&oe!=="."&&oe!=="`")throw new pt(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+i);d+=oe,v+=2}else X==="`"?O=!O:X!=="."||O?d+=X:_(),v++}if(_(),O)throw new pt(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+i);return new Rt(o)}static emptyPath(){return new Rt([])}}class Et{constructor(i){this.path=i}static fromPath(i){return new Et(Qe.fromString(i))}static fromName(i){return new Et(Qe.fromString(i).popFirst(5))}static empty(){return new Et(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(i){return this.path.length>=2&&this.path.get(this.path.length-2)===i}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(i){return i!==null&&Qe.comparator(this.path,i.path)===0}toString(){return this.path.toString()}static comparator(i,o){return Qe.comparator(i.path,o.path)}static isDocumentKey(i){return i.length%2==0}static fromSegments(i){return new Et(new Qe(i.slice()))}}class rr{constructor(i,o,d,v){this.indexId=i,this.collectionGroup=o,this.fields=d,this.indexState=v}}function an(m){return m.fields.find(i=>i.kind===2)}function Hr(m){return m.fields.filter(i=>i.kind!==2)}rr.UNKNOWN_ID=-1;class gn{constructor(i,o){this.fieldPath=i,this.kind=o}}class Or{constructor(i,o){this.sequenceNumber=i,this.offset=o}static empty(){return new Or(0,tn.min())}}function wn(m,i){let o=m.toTimestamp().seconds,d=m.toTimestamp().nanoseconds+1;return new tn(Ct.fromTimestamp(d===1e9?new bt(o+1,0):new bt(o,d)),Et.empty(),i)}function Tn(m){return new tn(m.readTime,m.key,-1)}class tn{constructor(i,o,d){this.readTime=i,this.documentKey=o,this.largestBatchId=d}static min(){return new tn(Ct.min(),Et.empty(),-1)}static max(){return new tn(Ct.max(),Et.empty(),-1)}}function rn(m,i){let o=m.readTime.compareTo(i.readTime);return o!==0||(o=Et.comparator(m.documentKey,i.documentKey))!==0?o:lt(m.largestBatchId,i.largestBatchId)}let on="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(i){this.onCommittedListeners.push(i)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(i=>i())}}async function On(m){if(m.code!==Fe.FAILED_PRECONDITION||m.message!==on)throw m;ce("LocalStore","Unexpectedly lost primary lease")}class Pt{constructor(i){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,i(o=>{this.isDone=!0,this.result=o,this.nextCallback&&this.nextCallback(o)},o=>{this.isDone=!0,this.error=o,this.catchCallback&&this.catchCallback(o)})}catch(i){return this.next(void 0,i)}next(i,o){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(o,this.error):this.wrapSuccess(i,this.result):new Pt((d,v)=>{this.nextCallback=_=>{this.wrapSuccess(i,_).next(d,v)},this.catchCallback=_=>{this.wrapFailure(o,_).next(d,v)}})}toPromise(){return new Promise((i,o)=>{this.next(i,o)})}wrapUserFunction(i){try{let o=i();return o instanceof Pt?o:Pt.resolve(o)}catch(o){return Pt.reject(o)}}wrapSuccess(i,o){return i?this.wrapUserFunction(()=>i(o)):Pt.resolve(o)}wrapFailure(i,o){return i?this.wrapUserFunction(()=>i(o)):Pt.reject(o)}static resolve(i){return new Pt((o,d)=>{o(i)})}static reject(i){return new Pt((o,d)=>{d(i)})}static waitFor(i){return new Pt((o,d)=>{let v=0,_=0,O=!1;i.forEach(X=>{++v,X.next(()=>{++_,O&&_===v&&o()},oe=>d(oe))}),O=!0,_===v&&o()})}static or(i){let o=Pt.resolve(!1);for(let d of i)o=o.next(v=>v?Pt.resolve(v):d());return o}static forEach(i,o){let d=[];return i.forEach((v,_)=>{d.push(o.call(this,v,_))}),this.waitFor(d)}static mapArray(i,o){return new Pt((d,v)=>{let _=i.length,O=Array(_),X=0;for(let oe=0;oe<_;oe++){let Ge=oe;o(i[Ge]).next(Tt=>{O[Ge]=Tt,++X===_&&d(O)},Tt=>v(Tt))}})}static doWhile(i,o){return new Pt((d,v)=>{let _=()=>{i()===!0?o().next(()=>{_()},v):d()};_()})}}class _n{static open(i,o,d,v){try{return new _n(o,i.transaction(v,d))}catch(_){throw new es(o,_)}}constructor(i,o){this.action=i,this.transaction=o,this.aborted=!1,this.V=new lr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{o.error?this.V.reject(new es(i,o.error)):this.V.resolve()},this.transaction.onerror=d=>{let v=zt(d.target.error);this.V.reject(new es(i,v))}}get m(){return this.V.promise}abort(i){i&&this.V.reject(i),this.aborted||(ce("SimpleDb","Aborting transaction:",i?i.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let i=this.transaction;this.aborted||typeof i.commit!="function"||i.commit()}store(i){return new kn(this.transaction.objectStore(i))}}class si{static delete(i){return ce("SimpleDb","Removing database:",i),st(window.indexedDB.deleteDatabase(i)).toPromise()}static p(){if(!(0,Se.hl)())return!1;if(si.S())return!0;let i=(0,Se.z$)(),o=si.D(i),d=zi(i);return!(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0||i.indexOf("Edge/")>0||0<o&&o<10||0<d&&d<4.5)}static S(){var i;return typeof process<"u"&&((i=process.__PRIVATE_env)===null||i===void 0?void 0:i.v)==="YES"}static C(i,o){return i.store(o)}static D(i){let o=i.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(o?o[1].split("_").slice(0,2).join("."):"-1")}constructor(i,o,d){this.name=i,this.version=o,this.F=d,si.D((0,Se.z$)())===12.2&&Ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(i){return this.db||(ce("SimpleDb","Opening database:",this.name),this.db=await new Promise((o,d)=>{let v=indexedDB.open(this.name,this.version);v.onsuccess=_=>{o(_.target.result)},v.onblocked=()=>{d(new es(i,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=_=>{let O=_.target.error;O.name==="VersionError"?d(new pt(Fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):O.name==="InvalidStateError"?d(new pt(Fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O)):d(new es(i,O))},v.onupgradeneeded=_=>{ce("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',_.oldVersion);let O=_.target.result;this.F.O(O,v.transaction,_.oldVersion,this.version).next(()=>{ce("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=o=>this.N(o)),this.db}L(i){this.N=i,this.db&&(this.db.onversionchange=o=>i(o))}async runTransaction(i,o,d,v){let _=o==="readonly",O=0;for(;;){++O;try{this.db=await this.M(i);let X=_n.open(this.db,i,_?"readonly":"readwrite",d),oe=v(X).next(Ge=>(X.g(),Ge)).catch(Ge=>(X.abort(Ge),Pt.reject(Ge))).toPromise();return oe.catch(()=>{}),await X.m,oe}catch(X){let oe=X.name!=="FirebaseError"&&O<3;if(ce("SimpleDb","Transaction failed with error:",X.message,"Retrying:",oe),this.close(),!oe)return Promise.reject(X)}}}close(){this.db&&this.db.close(),this.db=void 0}}function zi(m){let i=m.match(/Android ([\d.]+)/i);return Number(i?i[1].split(".").slice(0,2).join("."):"-1")}class Hs{constructor(i){this.B=i,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(i){this.B=i}done(){this.k=!0}$(i){this.q=i}delete(){return st(this.B.delete())}}class es extends pt{constructor(i,o){super(Fe.UNAVAILABLE,`IndexedDB transaction '${i}' failed: ${o}`),this.name="IndexedDbTransactionError"}}function Ri(m){return m.name==="IndexedDbTransactionError"}class kn{constructor(i){this.store=i}put(i,o){let d;return o!==void 0?(ce("SimpleDb","PUT",this.store.name,i,o),d=this.store.put(o,i)):(ce("SimpleDb","PUT",this.store.name,"<auto-key>",i),d=this.store.put(i)),st(d)}add(i){return ce("SimpleDb","ADD",this.store.name,i,i),st(this.store.add(i))}get(i){return st(this.store.get(i)).next(o=>(o===void 0&&(o=null),ce("SimpleDb","GET",this.store.name,i,o),o))}delete(i){return ce("SimpleDb","DELETE",this.store.name,i),st(this.store.delete(i))}count(){return ce("SimpleDb","COUNT",this.store.name),st(this.store.count())}U(i,o){let d=this.options(i,o),v=d.index?this.store.index(d.index):this.store;if(typeof v.getAll=="function"){let _=v.getAll(d.range);return new Pt((O,X)=>{_.onerror=oe=>{X(oe.target.error)},_.onsuccess=oe=>{O(oe.target.result)}})}{let _=this.cursor(d),O=[];return this.W(_,(X,oe)=>{O.push(oe)}).next(()=>O)}}G(i,o){let d=this.store.getAll(i,o===null?void 0:o);return new Pt((v,_)=>{d.onerror=O=>{_(O.target.error)},d.onsuccess=O=>{v(O.target.result)}})}j(i,o){ce("SimpleDb","DELETE ALL",this.store.name);let d=this.options(i,o);d.H=!1;let v=this.cursor(d);return this.W(v,(_,O,X)=>X.delete())}J(i,o){let d;o?d=i:(d={},o=i);let v=this.cursor(d);return this.W(v,o)}Y(i){let o=this.cursor({});return new Pt((d,v)=>{o.onerror=_=>{v(zt(_.target.error))},o.onsuccess=_=>{let O=_.target.result;O?i(O.primaryKey,O.value).next(X=>{X?O.continue():d()}):d()}})}W(i,o){let d=[];return new Pt((v,_)=>{i.onerror=O=>{_(O.target.error)},i.onsuccess=O=>{let X=O.target.result;if(!X)return void v();let oe=new Hs(X),Ge=o(X.primaryKey,X.value,oe);if(Ge instanceof Pt){let Tt=Ge.catch(ar=>(oe.done(),Pt.reject(ar)));d.push(Tt)}oe.isDone?v():oe.K===null?X.continue():X.continue(oe.K)}}).next(()=>Pt.waitFor(d))}options(i,o){let d;return i!==void 0&&(typeof i=="string"?d=i:o=i),{index:d,range:o}}cursor(i){let o="next";if(i.reverse&&(o="prev"),i.index){let d=this.store.index(i.index);return i.H?d.openKeyCursor(i.range,o):d.openCursor(i.range,o)}return this.store.openCursor(i.range,o)}}function st(m){return new Pt((i,o)=>{m.onsuccess=d=>{i(d.target.result)},m.onerror=d=>{o(zt(d.target.error))}})}let Ht=!1;function zt(m){let i=si.D((0,Se.z$)());if(i>=12.2&&i<13){let o="An internal error was encountered in the Indexed Database server";if(m.message.indexOf(o)>=0){let d=new pt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${o}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ht||(Ht=!0,setTimeout(()=>{throw d},0)),d}}return m}class Yt{constructor(i,o){this.asyncQueue=i,this.Z=o,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(i){ce("IndexBackfiller",`Scheduled in ${i}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",i,async()=>{this.task=null;try{ce("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(o){Ri(o)?ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):await On(o)}await this.X(6e4)})}}class tr{constructor(i,o){this.localStore=i,this.persistence=o}async ee(i=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>this.te(o,i))}te(i,o){let d=new Set,v=o,_=!0;return Pt.doWhile(()=>_===!0&&v>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(i).next(O=>{if(O!==null&&!d.has(O))return ce("IndexBackfiller",`Processing collection: ${O}`),this.ne(i,O,v).next(X=>{v-=X,d.add(O)});_=!1})).next(()=>o-v)}ne(i,o,d){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(i,o).next(v=>this.localStore.localDocuments.getNextDocuments(i,o,v,d).next(_=>{let O=_.changes;return this.localStore.indexManager.updateIndexEntries(i,O).next(()=>this.re(v,_)).next(X=>(ce("IndexBackfiller",`Updating offset: ${X}`),this.localStore.indexManager.updateCollectionGroup(i,o,X))).next(()=>O.size)}))}re(i,o){let d=i;return o.changes.forEach((v,_)=>{let O=Tn(_);rn(O,d)>0&&(d=O)}),new tn(d.readTime,d.documentKey,Math.max(o.batchId,i.largestBatchId))}}class En{constructor(i,o){this.previousValue=i,o&&(o.sequenceNumberHandler=d=>this.ie(d),this.se=d=>o.writeSequenceNumber(d))}ie(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){let i=++this.previousValue;return this.se&&this.se(i),i}}function Kr(m){return m==null}function li(m){return m===0&&1/m==-1/0}function pn(m){return typeof m=="number"&&Number.isInteger(m)&&!li(m)&&m<=Number.MAX_SAFE_INTEGER&&m>=Number.MIN_SAFE_INTEGER}function In(m){let i="";for(let o=0;o<m.length;o++)i.length>0&&(i+=""),i=function(d,v){let _=v,O=d.length;for(let X=0;X<O;X++){let oe=d.charAt(X);switch(oe){case"\0":_+="";break;case"":_+="";break;default:_+=oe}}return _}(m.get(o),i);return i+""}function qn(m){let i=m.length;if(i>=2||_e(),i===2)return m.charAt(0)===""&&m.charAt(1)===""||_e(),Qe.emptyPath();let o=i-2,d=[],v="";for(let _=0;_<i;){let O=m.indexOf("",_);switch((O<0||O>o)&&_e(),m.charAt(O+1)){case"":let X,oe=m.substring(_,O);v.length===0?X=oe:(v+=oe,X=v,v=""),d.push(X);break;case"":v+=m.substring(_,O)+"\0";break;case"":v+=m.substring(_,O+1);break;default:_e()}_=O+2}return new Qe(d)}En.oe=-1;let Ln=["userId","batchId"],Ei={},Ha=["prefixPath","collectionGroup","readTime","documentId"],fi=["prefixPath","collectionGroup","documentId"],Us=["collectionGroup","readTime","prefixPath","documentId"],ds=["canonicalId","targetId"],ui=["targetId","path"],Ki=["path","targetId"],$s=["collectionId","parent"],Is=["indexId","uid"],wa=["uid","sequenceNumber"],ua=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ea=["indexId","uid","orderedDocumentKey"],Gi=["userId","collectionPath","documentId"],na=["userId","collectionPath","largestBatchId"],Bs=["userId","collectionGroup","largestBatchId"],wo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Te=[...wo,"documentOverlays"],dt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],At=[...dt,"indexConfiguration","indexState","indexEntries"],$t=[...At,"globals"];class Ut extends cn{constructor(i,o){super(),this._e=i,this.currentSequenceNumber=o}}function Jr(m,i){return si.C(m._e,i)}function Sr(m){let i=0;for(let o in m)Object.prototype.hasOwnProperty.call(m,o)&&i++;return i}function Qn(m,i){for(let o in m)Object.prototype.hasOwnProperty.call(m,o)&&i(o,m[o])}function zn(m){for(let i in m)if(Object.prototype.hasOwnProperty.call(m,i))return!1;return!0}class Qr{constructor(i,o){this.comparator=i,this.root=o||pi.EMPTY}insert(i,o){return new Qr(this.comparator,this.root.insert(i,o,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(i){return new Qr(this.comparator,this.root.remove(i,this.comparator).copy(null,null,pi.BLACK,null,null))}get(i){let o=this.root;for(;!o.isEmpty();){let d=this.comparator(i,o.key);if(d===0)return o.value;d<0?o=o.left:d>0&&(o=o.right)}return null}indexOf(i){let o=0,d=this.root;for(;!d.isEmpty();){let v=this.comparator(i,d.key);if(v===0)return o+d.left.size;v<0?d=d.left:(o+=d.left.size+1,d=d.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(i){return this.root.inorderTraversal(i)}forEach(i){this.inorderTraversal((o,d)=>(i(o,d),!1))}toString(){let i=[];return this.inorderTraversal((o,d)=>(i.push(`${o}:${d}`),!1)),`{${i.join(", ")}}`}reverseTraversal(i){return this.root.reverseTraversal(i)}getIterator(){return new yr(this.root,null,this.comparator,!1)}getIteratorFrom(i){return new yr(this.root,i,this.comparator,!1)}getReverseIterator(){return new yr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(i){return new yr(this.root,i,this.comparator,!0)}}class yr{constructor(i,o,d,v){this.isReverse=v,this.nodeStack=[];let _=1;for(;!i.isEmpty();)if(_=o?d(i.key,o):1,o&&v&&(_*=-1),_<0)i=this.isReverse?i.left:i.right;else{if(_===0){this.nodeStack.push(i);break}this.nodeStack.push(i),i=this.isReverse?i.right:i.left}}getNext(){let i=this.nodeStack.pop(),o={key:i.key,value:i.value};if(this.isReverse)for(i=i.left;!i.isEmpty();)this.nodeStack.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack.push(i),i=i.left;return o}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let i=this.nodeStack[this.nodeStack.length-1];return{key:i.key,value:i.value}}}class pi{constructor(i,o,d,v,_){this.key=i,this.value=o,this.color=d??pi.RED,this.left=v??pi.EMPTY,this.right=_??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(i,o,d,v,_){return new pi(i??this.key,o??this.value,d??this.color,v??this.left,_??this.right)}isEmpty(){return!1}inorderTraversal(i){return this.left.inorderTraversal(i)||i(this.key,this.value)||this.right.inorderTraversal(i)}reverseTraversal(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(i,o,d){let v=this,_=d(i,v.key);return(v=_<0?v.copy(null,null,null,v.left.insert(i,o,d),null):_===0?v.copy(null,o,null,null,null):v.copy(null,null,null,null,v.right.insert(i,o,d))).fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let i=this;return i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),(i=i.copy(null,null,null,i.left.removeMin(),null)).fixUp()}remove(i,o){let d,v=this;if(0>o(i,v.key))v.left.isEmpty()||v.left.isRed()||v.left.left.isRed()||(v=v.moveRedLeft()),v=v.copy(null,null,null,v.left.remove(i,o),null);else{if(v.left.isRed()&&(v=v.rotateRight()),v.right.isEmpty()||v.right.isRed()||v.right.left.isRed()||(v=v.moveRedRight()),o(i,v.key)===0){if(v.right.isEmpty())return pi.EMPTY;d=v.right.min(),v=v.copy(d.key,d.value,null,null,v.right.removeMin())}v=v.copy(null,null,null,null,v.right.remove(i,o))}return v.fixUp()}isRed(){return this.color}fixUp(){let i=this;return i.right.isRed()&&!i.left.isRed()&&(i=i.rotateLeft()),i.left.isRed()&&i.left.left.isRed()&&(i=i.rotateRight()),i.left.isRed()&&i.right.isRed()&&(i=i.colorFlip()),i}moveRedLeft(){let i=this.colorFlip();return i.right.left.isRed()&&(i=(i=(i=i.copy(null,null,null,null,i.right.rotateRight())).rotateLeft()).colorFlip()),i}moveRedRight(){let i=this.colorFlip();return i.left.left.isRed()&&(i=(i=i.rotateRight()).colorFlip()),i}rotateLeft(){let i=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)}rotateRight(){let i=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)}colorFlip(){let i=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,o)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();let i=this.left.check();if(i!==this.right.check())throw _e();return i+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1,pi.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(m,i,o,d,v){return this}insert(m,i,o){return new pi(m,i)}remove(m,i){return this}isEmpty(){return!0}inorderTraversal(m){return!1}reverseTraversal(m){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wi{constructor(i){this.comparator=i,this.data=new Qr(this.comparator)}has(i){return this.data.get(i)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(i){return this.data.indexOf(i)}forEach(i){this.data.inorderTraversal((o,d)=>(i(o),!1))}forEachInRange(i,o){let d=this.data.getIteratorFrom(i[0]);for(;d.hasNext();){let v=d.getNext();if(this.comparator(v.key,i[1])>=0)return;o(v.key)}}forEachWhile(i,o){let d;for(d=o!==void 0?this.data.getIteratorFrom(o):this.data.getIterator();d.hasNext();)if(!i(d.getNext().key))return}firstAfterOrEqual(i){let o=this.data.getIteratorFrom(i);return o.hasNext()?o.getNext().key:null}getIterator(){return new $a(this.data.getIterator())}getIteratorFrom(i){return new $a(this.data.getIteratorFrom(i))}add(i){return this.copy(this.data.remove(i).insert(i,!0))}delete(i){return this.has(i)?this.copy(this.data.remove(i)):this}isEmpty(){return this.data.isEmpty()}unionWith(i){let o=this;return o.size<i.size&&(o=i,i=this),i.forEach(d=>{o=o.add(d)}),o}isEqual(i){if(!(i instanceof wi)||this.size!==i.size)return!1;let o=this.data.getIterator(),d=i.data.getIterator();for(;o.hasNext();){let v=o.getNext().key,_=d.getNext().key;if(this.comparator(v,_)!==0)return!1}return!0}toArray(){let i=[];return this.forEach(o=>{i.push(o)}),i}toString(){let i=[];return this.forEach(o=>i.push(o)),"SortedSet("+i.toString()+")"}copy(i){let o=new wi(this.comparator);return o.data=i,o}}class $a{constructor(i){this.iter=i}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lr(m){return m.hasNext()?m.getNext():void 0}class Br{constructor(i){this.fields=i,i.sort(Rt.comparator)}static empty(){return new Br([])}unionWith(i){let o=new wi(Rt.comparator);for(let d of this.fields)o=o.add(d);for(let d of i)o=o.add(d);return new Br(o.toArray())}covers(i){for(let o of this.fields)if(o.isPrefixOf(i))return!0;return!1}isEqual(i){return et(this.fields,i.fields,(o,d)=>o.isEqual(d))}}class Nn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class As{constructor(i){this.binaryString=i}static fromBase64String(i){return new As(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Nn("Invalid base64 string: "+d):d}}(i))}static fromUint8Array(i){return new As(function(o){let d="";for(let v=0;v<o.length;++v)d+=String.fromCharCode(o[v]);return d}(i))}[Symbol.iterator](){let i=0;return{next:()=>i<this.binaryString.length?{value:this.binaryString.charCodeAt(i++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(i){let o=new Uint8Array(i.length);for(let d=0;d<i.length;d++)o[d]=i.charCodeAt(d);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(i){return lt(this.binaryString,i.binaryString)}isEqual(i){return this.binaryString===i.binaryString}}As.EMPTY_BYTE_STRING=new As("");let ql=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(m){if(m||_e(),typeof m=="string"){let i=0,o=ql.exec(m);if(o||_e(),o[1]){let d=o[1];i=Number(d=(d+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(m).getTime()/1e3),nanos:i}}return{seconds:qs(m.seconds),nanos:qs(m.nanos)}}function qs(m){return typeof m=="number"?m:typeof m=="string"?Number(m):0}function xl(m){return typeof m=="string"?As.fromBase64String(m):As.fromUint8Array(m)}function Au(m){var i,o;return((o=(((i=m?.mapValue)===null||i===void 0?void 0:i.fields)||{}).__type__)===null||o===void 0?void 0:o.stringValue)==="server_timestamp"}function tc(m){let i=m.mapValue.fields.__previous_value__;return Au(i)?tc(i):i}function $o(m){let i=Jo(m.mapValue.fields.__local_write_time__.timestampValue);return new bt(i.seconds,i.nanos)}class Rc{constructor(i,o,d,v,_,O,X,oe,Ge){this.databaseId=i,this.appId=o,this.persistenceKey=d,this.host=v,this.ssl=_,this.forceLongPolling=O,this.autoDetectLongPolling=X,this.longPollingOptions=oe,this.useFetchStreams=Ge}}class ru{constructor(i,o){this.projectId=i,this.database=o||"(default)"}static empty(){return new ru("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(i){return i instanceof ru&&i.projectId===this.projectId&&i.database===this.database}}let ci={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zo={nullValue:"NULL_VALUE"};function ta(m){return"nullValue"in m?0:"booleanValue"in m?1:"integerValue"in m||"doubleValue"in m?2:"timestampValue"in m?3:"stringValue"in m?5:"bytesValue"in m?6:"referenceValue"in m?7:"geoPointValue"in m?8:"arrayValue"in m?9:"mapValue"in m?Au(m)?4:Cl(m)?9007199254740991:nu(m)?10:11:_e()}function bi(m,i){if(m===i)return!0;let o=ta(m);if(o!==ta(i))return!1;switch(o){case 0:case 9007199254740991:return!0;case 1:return m.booleanValue===i.booleanValue;case 4:return $o(m).isEqual($o(i));case 3:return function(d,v){if(typeof d.timestampValue=="string"&&typeof v.timestampValue=="string"&&d.timestampValue.length===v.timestampValue.length)return d.timestampValue===v.timestampValue;let _=Jo(d.timestampValue),O=Jo(v.timestampValue);return _.seconds===O.seconds&&_.nanos===O.nanos}(m,i);case 5:return m.stringValue===i.stringValue;case 6:return xl(m.bytesValue).isEqual(xl(i.bytesValue));case 7:return m.referenceValue===i.referenceValue;case 8:return qs(m.geoPointValue.latitude)===qs(i.geoPointValue.latitude)&&qs(m.geoPointValue.longitude)===qs(i.geoPointValue.longitude);case 2:return function(d,v){if("integerValue"in d&&"integerValue"in v)return qs(d.integerValue)===qs(v.integerValue);if("doubleValue"in d&&"doubleValue"in v){let _=qs(d.doubleValue),O=qs(v.doubleValue);return _===O?li(_)===li(O):isNaN(_)&&isNaN(O)}return!1}(m,i);case 9:return et(m.arrayValue.values||[],i.arrayValue.values||[],bi);case 10:case 11:return function(d,v){let _=d.mapValue.fields||{},O=v.mapValue.fields||{};if(Sr(_)!==Sr(O))return!1;for(let X in _)if(_.hasOwnProperty(X)&&(O[X]===void 0||!bi(_[X],O[X])))return!1;return!0}(m,i);default:return _e()}}function Mo(m,i){return(m.values||[]).find(o=>bi(o,i))!==void 0}function Ts(m,i){if(m===i)return 0;let o=ta(m),d=ta(i);if(o!==d)return lt(o,d);switch(o){case 0:case 9007199254740991:return 0;case 1:return lt(m.booleanValue,i.booleanValue);case 2:return function(v,_){let O=qs(v.integerValue||v.doubleValue),X=qs(_.integerValue||_.doubleValue);return O<X?-1:O>X?1:O===X?0:isNaN(O)?isNaN(X)?0:-1:1}(m,i);case 3:return io(m.timestampValue,i.timestampValue);case 4:return io($o(m),$o(i));case 5:return lt(m.stringValue,i.stringValue);case 6:return function(v,_){let O=xl(v),X=xl(_);return O.compareTo(X)}(m.bytesValue,i.bytesValue);case 7:return function(v,_){let O=v.split("/"),X=_.split("/");for(let oe=0;oe<O.length&&oe<X.length;oe++){let Ge=lt(O[oe],X[oe]);if(Ge!==0)return Ge}return lt(O.length,X.length)}(m.referenceValue,i.referenceValue);case 8:return function(v,_){let O=lt(qs(v.latitude),qs(_.latitude));return O!==0?O:lt(qs(v.longitude),qs(_.longitude))}(m.geoPointValue,i.geoPointValue);case 9:return Ns(m.arrayValue,i.arrayValue);case 10:return function(v,_){var O,X,oe,Ge;let Tt=v.fields||{},ar=_.fields||{},ur=(O=Tt.value)===null||O===void 0?void 0:O.arrayValue,wr=(X=ar.value)===null||X===void 0?void 0:X.arrayValue,vn=lt(((oe=ur?.values)===null||oe===void 0?void 0:oe.length)||0,((Ge=wr?.values)===null||Ge===void 0?void 0:Ge.length)||0);return vn!==0?vn:Ns(ur,wr)}(m.mapValue,i.mapValue);case 11:return function(v,_){if(v===ci.mapValue&&_===ci.mapValue)return 0;if(v===ci.mapValue)return 1;if(_===ci.mapValue)return-1;let O=v.fields||{},X=Object.keys(O),oe=_.fields||{},Ge=Object.keys(oe);X.sort(),Ge.sort();for(let Tt=0;Tt<X.length&&Tt<Ge.length;++Tt){let ar=lt(X[Tt],Ge[Tt]);if(ar!==0)return ar;let ur=Ts(O[X[Tt]],oe[Ge[Tt]]);if(ur!==0)return ur}return lt(X.length,Ge.length)}(m.mapValue,i.mapValue);default:throw _e()}}function io(m,i){if(typeof m=="string"&&typeof i=="string"&&m.length===i.length)return lt(m,i);let o=Jo(m),d=Jo(i),v=lt(o.seconds,d.seconds);return v!==0?v:lt(o.nanos,d.nanos)}function Ns(m,i){let o=m.values||[],d=i.values||[];for(let v=0;v<o.length&&v<d.length;++v){let _=Ts(o[v],d[v]);if(_)return _}return lt(o.length,d.length)}function An(m){var i,o;return"nullValue"in m?"null":"booleanValue"in m?""+m.booleanValue:"integerValue"in m?""+m.integerValue:"doubleValue"in m?""+m.doubleValue:"timestampValue"in m?function(d){let v=Jo(d);return`time(${v.seconds},${v.nanos})`}(m.timestampValue):"stringValue"in m?m.stringValue:"bytesValue"in m?xl(m.bytesValue).toBase64():"referenceValue"in m?(i=m.referenceValue,Et.fromName(i).toString()):"geoPointValue"in m?(o=m.geoPointValue,`geo(${o.latitude},${o.longitude})`):"arrayValue"in m?function(d){let v="[",_=!0;for(let O of d.values||[])_?_=!1:v+=",",v+=An(O);return v+"]"}(m.arrayValue):"mapValue"in m?function(d){let v=Object.keys(d.fields||{}).sort(),_="{",O=!0;for(let X of v)O?O=!1:_+=",",_+=`${X}:${An(d.fields[X])}`;return _+"}"}(m.mapValue):_e()}function Qa(m,i){return{referenceValue:`projects/${m.projectId}/databases/${m.database}/documents/${i.path.canonicalString()}`}}function zl(m){return!!m&&"integerValue"in m}function ii(m){return!!m&&"arrayValue"in m}function ba(m){return!!m&&"nullValue"in m}function Gl(m){return!!m&&"doubleValue"in m&&isNaN(Number(m.doubleValue))}function Hl(m){return!!m&&"mapValue"in m}function nu(m){var i,o;return((o=(((i=m?.mapValue)===null||i===void 0?void 0:i.fields)||{}).__type__)===null||o===void 0?void 0:o.stringValue)==="__vector__"}function so(m){if(m.geoPointValue)return{geoPointValue:Object.assign({},m.geoPointValue)};if(m.timestampValue&&typeof m.timestampValue=="object")return{timestampValue:Object.assign({},m.timestampValue)};if(m.mapValue){let i={mapValue:{fields:{}}};return Qn(m.mapValue.fields,(o,d)=>i.mapValue.fields[o]=so(d)),i}if(m.arrayValue){let i={arrayValue:{values:[]}};for(let o=0;o<(m.arrayValue.values||[]).length;++o)i.arrayValue.values[o]=so(m.arrayValue.values[o]);return i}return Object.assign({},m)}function Cl(m){return(((m.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}let fc={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Pc(m,i){let o=Ts(m.value,i.value);return o!==0?o:m.inclusive&&!i.inclusive?-1:!m.inclusive&&i.inclusive?1:0}function pa(m,i){let o=Ts(m.value,i.value);return o!==0?o:m.inclusive&&!i.inclusive?1:!m.inclusive&&i.inclusive?-1:0}class Qt{constructor(i){this.value=i}static empty(){return new Qt({mapValue:{}})}field(i){if(i.isEmpty())return this.value;{let o=this.value;for(let d=0;d<i.length-1;++d)if(!Hl(o=(o.mapValue.fields||{})[i.get(d)]))return null;return(o=(o.mapValue.fields||{})[i.lastSegment()])||null}}set(i,o){this.getFieldsMap(i.popLast())[i.lastSegment()]=so(o)}setAll(i){let o=Rt.emptyPath(),d={},v=[];i.forEach((O,X)=>{if(!o.isImmediateParentOf(X)){let oe=this.getFieldsMap(o);this.applyChanges(oe,d,v),d={},v=[],o=X.popLast()}O?d[X.lastSegment()]=so(O):v.push(X.lastSegment())});let _=this.getFieldsMap(o);this.applyChanges(_,d,v)}delete(i){let o=this.field(i.popLast());Hl(o)&&o.mapValue.fields&&delete o.mapValue.fields[i.lastSegment()]}isEqual(i){return bi(this.value,i.value)}getFieldsMap(i){let o=this.value;o.mapValue.fields||(o.mapValue={fields:{}});for(let d=0;d<i.length;++d){let v=o.mapValue.fields[i.get(d)];Hl(v)&&v.mapValue.fields||(v={mapValue:{fields:{}}},o.mapValue.fields[i.get(d)]=v),o=v}return o.mapValue.fields}applyChanges(i,o,d){for(let v of(Qn(o,(_,O)=>i[_]=O),d))delete i[v]}clone(){return new Qt(so(this.value))}}class Sa{constructor(i,o,d,v,_,O,X){this.key=i,this.documentType=o,this.version=d,this.readTime=v,this.createTime=_,this.data=O,this.documentState=X}static newInvalidDocument(i){return new Sa(i,0,Ct.min(),Ct.min(),Ct.min(),Qt.empty(),0)}static newFoundDocument(i,o,d,v){return new Sa(i,1,o,Ct.min(),d,v,0)}static newNoDocument(i,o){return new Sa(i,2,o,Ct.min(),Ct.min(),Qt.empty(),0)}static newUnknownDocument(i,o){return new Sa(i,3,o,Ct.min(),Ct.min(),Qt.empty(),2)}convertToFoundDocument(i,o){return this.createTime.isEqual(Ct.min())&&(this.documentType===2||this.documentType===0)&&(this.createTime=i),this.version=i,this.documentType=1,this.data=o,this.documentState=0,this}convertToNoDocument(i){return this.version=i,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(i){return this.version=i,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(i){return this.readTime=i,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(i){return i instanceof Sa&&this.key.isEqual(i.key)&&this.version.isEqual(i.version)&&this.documentType===i.documentType&&this.documentState===i.documentState&&this.data.isEqual(i.data)}mutableCopy(){return new Sa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ma{constructor(i,o){this.position=i,this.inclusive=o}}function wl(m,i,o){let d=0;for(let v=0;v<m.position.length;v++){let _=i[v],O=m.position[v];if(d=_.field.isKeyField()?Et.comparator(Et.fromName(O.referenceValue),o.key):Ts(O,o.data.field(_.field)),_.dir==="desc"&&(d*=-1),d!==0)break}return d}function pc(m,i){if(m===null)return i===null;if(i===null||m.inclusive!==i.inclusive||m.position.length!==i.position.length)return!1;for(let o=0;o<m.position.length;o++)if(!bi(m.position[o],i.position[o]))return!1;return!0}class Bo{constructor(i,o="asc"){this.field=i,this.dir=o}}class Kl{}class xs extends Kl{constructor(i,o,d){super(),this.field=i,this.op=o,this.value=d}static create(i,o,d){return i.isKeyField()?o==="in"||o==="not-in"?this.createKeyFieldInFilter(i,o,d):new Yc(i,o,d):o==="array-contains"?new Wt(i,d):o==="in"?new or(i,d):o==="not-in"?new Ir(i,d):o==="array-contains-any"?new Tr(i,d):new xs(i,o,d)}static createKeyFieldInFilter(i,o,d){return o==="in"?new Me(i,d):new ct(i,d)}matches(i){let o=i.data.field(this.field);return this.op==="!="?o!==null&&this.matchesComparison(Ts(o,this.value)):o!==null&&ta(this.value)===ta(o)&&this.matchesComparison(Ts(o,this.value))}matchesComparison(i){switch(this.op){case"<":return i<0;case"<=":return i<=0;case"==":return i===0;case"!=":return i!==0;case">":return i>0;case">=":return i>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rs extends Kl{constructor(i,o){super(),this.filters=i,this.op=o,this.ae=null}static create(i,o){return new Rs(i,o)}matches(i){return Wl(this)?this.filters.find(o=>!o.matches(i))===void 0:this.filters.find(o=>o.matches(i))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((i,o)=>i.concat(o.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Wl(m){return m.op==="and"}function Nu(m){return m.op==="or"}function ol(m){return rc(m)&&Wl(m)}function rc(m){for(let i of m.filters)if(i instanceof Rs)return!1;return!0}function ho(m,i){let o=m.filters.concat(i);return Rs.create(o,m.op)}class Yc extends xs{constructor(i,o,d){super(i,o,d),this.key=Et.fromName(d.referenceValue)}matches(i){let o=Et.comparator(i.key,this.key);return this.matchesComparison(o)}}class Me extends xs{constructor(i,o){super(i,"in",o),this.keys=St("in",o)}matches(i){return this.keys.some(o=>o.isEqual(i.key))}}class ct extends xs{constructor(i,o){super(i,"not-in",o),this.keys=St("not-in",o)}matches(i){return!this.keys.some(o=>o.isEqual(i.key))}}function St(m,i){var o;return(((o=i.arrayValue)===null||o===void 0?void 0:o.values)||[]).map(d=>Et.fromName(d.referenceValue))}class Wt extends xs{constructor(i,o){super(i,"array-contains",o)}matches(i){let o=i.data.field(this.field);return ii(o)&&Mo(o.arrayValue,this.value)}}class or extends xs{constructor(i,o){super(i,"in",o)}matches(i){let o=i.data.field(this.field);return o!==null&&Mo(this.value.arrayValue,o)}}class Ir extends xs{constructor(i,o){super(i,"not-in",o)}matches(i){if(Mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let o=i.data.field(this.field);return o!==null&&!Mo(this.value.arrayValue,o)}}class Tr extends xs{constructor(i,o){super(i,"array-contains-any",o)}matches(i){let o=i.data.field(this.field);return!(!ii(o)||!o.arrayValue.values)&&o.arrayValue.values.some(d=>Mo(this.value.arrayValue,d))}}class Cr{constructor(i,o=null,d=[],v=[],_=null,O=null,X=null){this.path=i,this.collectionGroup=o,this.orderBy=d,this.filters=v,this.limit=_,this.startAt=O,this.endAt=X,this.ue=null}}function Yr(m,i=null,o=[],d=[],v=null,_=null,O=null){return new Cr(m,i,o,d,v,_,O)}function qr(m){if(m.ue===null){let i=m.path.canonicalString();m.collectionGroup!==null&&(i+="|cg:"+m.collectionGroup),i+="|f:"+m.filters.map(o=>function d(v){if(v instanceof xs)return v.field.canonicalString()+v.op.toString()+An(v.value);if(ol(v))return v.filters.map(_=>d(_)).join(",");{let _=v.filters.map(O=>d(O)).join(",");return`${v.op}(${_})`}}(o)).join(",")+"|ob:"+m.orderBy.map(o=>o.field.canonicalString()+o.dir).join(","),m.limit==null||(i+="|l:"+m.limit),m.startAt&&(i+="|lb:"+(m.startAt.inclusive?"b:":"a:")+m.startAt.position.map(o=>An(o)).join(",")),m.endAt&&(i+="|ub:"+(m.endAt.inclusive?"a:":"b:")+m.endAt.position.map(o=>An(o)).join(",")),m.ue=i}return m.ue}function ln(m,i){if(m.limit!==i.limit||m.orderBy.length!==i.orderBy.length)return!1;for(let v=0;v<m.orderBy.length;v++){var o,d;if(o=m.orderBy[v],d=i.orderBy[v],!(o.dir===d.dir&&o.field.isEqual(d.field)))return!1}if(m.filters.length!==i.filters.length)return!1;for(let v=0;v<m.filters.length;v++)if(!function _(O,X){return O instanceof xs?X instanceof xs&&O.op===X.op&&O.field.isEqual(X.field)&&bi(O.value,X.value):O instanceof Rs?X instanceof Rs&&O.op===X.op&&O.filters.length===X.filters.length&&O.filters.reduce((oe,Ge,Tt)=>oe&&_(Ge,X.filters[Tt]),!0):void _e()}(m.filters[v],i.filters[v]))return!1;return m.collectionGroup===i.collectionGroup&&!!m.path.isEqual(i.path)&&!!pc(m.startAt,i.startAt)&&pc(m.endAt,i.endAt)}function Pn(m){return Et.isDocumentKey(m.path)&&m.collectionGroup===null&&m.filters.length===0}function Rn(m,i){return m.filters.filter(o=>o instanceof xs&&o.field.isEqual(i))}function mi(m,i,o){let d=Zo,v=!0;for(let O of Rn(m,i)){let X=Zo,oe=!0;switch(O.op){case"<":case"<=":var _;X="nullValue"in(_=O.value)?Zo:"booleanValue"in _?{booleanValue:!1}:"integerValue"in _||"doubleValue"in _?{doubleValue:NaN}:"timestampValue"in _?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in _?{stringValue:""}:"bytesValue"in _?{bytesValue:""}:"referenceValue"in _?Qa(ru.empty(),Et.empty()):"geoPointValue"in _?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in _?{arrayValue:{}}:"mapValue"in _?nu(_)?fc:{mapValue:{}}:_e();break;case"==":case"in":case">=":X=O.value;break;case">":X=O.value,oe=!1;break;case"!=":case"not-in":X=Zo}0>Pc({value:d,inclusive:v},{value:X,inclusive:oe})&&(d=X,v=oe)}if(o!==null){for(let O=0;O<m.orderBy.length;++O)if(m.orderBy[O].field.isEqual(i)){let X=o.position[O];0>Pc({value:d,inclusive:v},{value:X,inclusive:o.inclusive})&&(d=X,v=o.inclusive);break}}return{value:d,inclusive:v}}function Vi(m,i,o){let d=ci,v=!0;for(let O of Rn(m,i)){let X=ci,oe=!0;switch(O.op){case">=":case">":var _;X="nullValue"in(_=O.value)?{booleanValue:!1}:"booleanValue"in _?{doubleValue:NaN}:"integerValue"in _||"doubleValue"in _?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in _?{stringValue:""}:"stringValue"in _?{bytesValue:""}:"bytesValue"in _?Qa(ru.empty(),Et.empty()):"referenceValue"in _?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in _?{arrayValue:{}}:"arrayValue"in _?fc:"mapValue"in _?nu(_)?{mapValue:{}}:ci:_e(),oe=!1;break;case"==":case"in":case"<=":X=O.value;break;case"<":X=O.value,oe=!1;break;case"!=":case"not-in":X=ci}pa({value:d,inclusive:v},{value:X,inclusive:oe})>0&&(d=X,v=oe)}if(o!==null){for(let O=0;O<m.orderBy.length;++O)if(m.orderBy[O].field.isEqual(i)){let X=o.position[O];pa({value:d,inclusive:v},{value:X,inclusive:o.inclusive})>0&&(d=X,v=o.inclusive);break}}return{value:d,inclusive:v}}class Dn{constructor(i,o=null,d=[],v=[],_=null,O="F",X=null,oe=null){this.path=i,this.collectionGroup=o,this.explicitOrderBy=d,this.filters=v,this.limit=_,this.limitType=O,this.startAt=X,this.endAt=oe,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ts(m){return new Dn(m)}function Fs(m){return m.filters.length===0&&m.limit===null&&m.startAt==null&&m.endAt==null&&(m.explicitOrderBy.length===0||m.explicitOrderBy.length===1&&m.explicitOrderBy[0].field.isKeyField())}function gi(m){return m.collectionGroup!==null}function as(m){if(m.ce===null){let i;m.ce=[];let o=new Set;for(let v of m.explicitOrderBy)m.ce.push(v),o.add(v.field.canonicalString());let d=m.explicitOrderBy.length>0?m.explicitOrderBy[m.explicitOrderBy.length-1].dir:"asc";(i=new wi(Rt.comparator),m.filters.forEach(v=>{v.getFlattenedFilters().forEach(_=>{_.isInequality()&&(i=i.add(_.field))})}),i).forEach(v=>{o.has(v.canonicalString())||v.isKeyField()||m.ce.push(new Bo(v,d))}),o.has(Rt.keyField().canonicalString())||m.ce.push(new Bo(Rt.keyField(),d))}return m.ce}function Zt(m){return m.le||(m.le=function(i,o){if(i.limitType==="F")return Yr(i.path,i.collectionGroup,o,i.filters,i.limit,i.startAt,i.endAt);{o=o.map(_=>{let O=_.dir==="desc"?"asc":"desc";return new Bo(_.field,O)});let d=i.endAt?new ma(i.endAt.position,i.endAt.inclusive):null,v=i.startAt?new ma(i.startAt.position,i.startAt.inclusive):null;return Yr(i.path,i.collectionGroup,o,i.filters,i.limit,d,v)}}(m,as(m))),m.le}function _i(m,i){let o=m.filters.concat([i]);return new Dn(m.path,m.collectionGroup,m.explicitOrderBy.slice(),o,m.limit,m.limitType,m.startAt,m.endAt)}function yi(m,i,o){return new Dn(m.path,m.collectionGroup,m.explicitOrderBy.slice(),m.filters.slice(),i,o,m.startAt,m.endAt)}function Wi(m,i){return ln(Zt(m),Zt(i))&&m.limitType===i.limitType}function Ui(m){return`${qr(Zt(m))}|lt:${m.limitType}`}function Pi(m){var i;let o;return`Query(target=${o=(i=Zt(m)).path.canonicalString(),i.collectionGroup!==null&&(o+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(o+=`, filters: [${i.filters.map(d=>function v(_){return _ instanceof xs?`${_.field.canonicalString()} ${_.op} ${An(_.value)}`:_ instanceof Rs?_.op.toString()+" {"+_.getFilters().map(v).join(" ,")+"}":"Filter"}(d)).join(", ")}]`),i.limit==null||(o+=", limit: "+i.limit),i.orderBy.length>0&&(o+=`, orderBy: [${i.orderBy.map(d=>`${d.field.canonicalString()} (${d.dir})`).join(", ")}]`),i.startAt&&(o+=", startAt: "+(i.startAt.inclusive?"b:":"a:")+i.startAt.position.map(d=>An(d)).join(",")),i.endAt&&(o+=", endAt: "+(i.endAt.inclusive?"a:":"b:")+i.endAt.position.map(d=>An(d)).join(",")),`Target(${o})`}; limitType=${m.limitType})`}function $n(m,i){return i.isFoundDocument()&&function(o,d){let v=d.key.path;return o.collectionGroup!==null?d.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(v):Et.isDocumentKey(o.path)?o.path.isEqual(v):o.path.isImmediateParentOf(v)}(m,i)&&function(o,d){for(let v of as(o))if(!v.field.isKeyField()&&d.data.field(v.field)===null)return!1;return!0}(m,i)&&function(o,d){for(let v of o.filters)if(!v.matches(d))return!1;return!0}(m,i)&&(!m.startAt||!!function(o,d,v){let _=wl(o,d,v);return o.inclusive?_<=0:_<0}(m.startAt,as(m),i))&&(!m.endAt||!!function(o,d,v){let _=wl(o,d,v);return o.inclusive?_>=0:_>0}(m.endAt,as(m),i))}function ws(m){return m.collectionGroup||(m.path.length%2==1?m.path.lastSegment():m.path.get(m.path.length-2))}function bs(m){return(i,o)=>{let d=!1;for(let v of as(m)){let _=function(O,X,oe){let Ge=O.field.isKeyField()?Et.comparator(X.key,oe.key):function(Tt,ar,ur){let wr=ar.data.field(Tt),vn=ur.data.field(Tt);return wr!==null&&vn!==null?Ts(wr,vn):_e()}(O.field,X,oe);switch(O.dir){case"asc":return Ge;case"desc":return-1*Ge;default:return _e()}}(v,i,o);if(_!==0)return _;d=d||v.field.isKeyField()}return 0}}class os{constructor(i,o){this.mapKeyFn=i,this.equalsFn=o,this.inner={},this.innerSize=0}get(i){let o=this.mapKeyFn(i),d=this.inner[o];if(d!==void 0){for(let[v,_]of d)if(this.equalsFn(v,i))return _}}has(i){return this.get(i)!==void 0}set(i,o){let d=this.mapKeyFn(i),v=this.inner[d];if(v===void 0)return this.inner[d]=[[i,o]],void this.innerSize++;for(let _=0;_<v.length;_++)if(this.equalsFn(v[_][0],i))return void(v[_]=[i,o]);v.push([i,o]),this.innerSize++}delete(i){let o=this.mapKeyFn(i),d=this.inner[o];if(d===void 0)return!1;for(let v=0;v<d.length;v++)if(this.equalsFn(d[v][0],i))return d.length===1?delete this.inner[o]:d.splice(v,1),this.innerSize--,!0;return!1}forEach(i){Qn(this.inner,(o,d)=>{for(let[v,_]of d)i(v,_)})}isEmpty(){return zn(this.inner)}size(){return this.innerSize}}let hi=new Qr(Et.comparator),xe=new Qr(Et.comparator);function T(...m){let i=xe;for(let o of m)i=i.insert(o.key,o);return i}function G(m){let i=xe;return m.forEach((o,d)=>i=i.insert(o,d.overlayedDocument)),i}function pe(){return new os(m=>m.toString(),(m,i)=>m.isEqual(i))}let qe=new Qr(Et.comparator),wt=new wi(Et.comparator);function Dt(...m){let i=wt;for(let o of m)i=i.add(o);return i}let pr=new wi(lt);function mr(m,i){if(m.useProto3Json){if(isNaN(i))return{doubleValue:"NaN"};if(i===1/0)return{doubleValue:"Infinity"};if(i===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:li(i)?"-0":i}}function sn(m){return{integerValue:""+m}}function Sn(m,i){return pn(i)?sn(i):mr(m,i)}class us{constructor(){this._=void 0}}function Cs(m,i){return m instanceof _a?zl(i)||i&&"doubleValue"in i?i:{integerValue:0}:null}class xa extends us{}class Ea extends us{constructor(i){super(),this.elements=i}}function el(m,i){let o=Ks(i);for(let d of m.elements)o.some(v=>bi(v,d))||o.push(d);return{arrayValue:{values:o}}}class ia extends us{constructor(i){super(),this.elements=i}}function Ss(m,i){let o=Ks(i);for(let d of m.elements)o=o.filter(v=>!bi(v,d));return{arrayValue:{values:o}}}class _a extends us{constructor(i,o){super(),this.serializer=i,this.Pe=o}}function sa(m){return qs(m.integerValue||m.doubleValue)}function Ks(m){return ii(m)&&m.arrayValue.values?m.arrayValue.values.slice():[]}class Oa{constructor(i,o){this.field=i,this.transform=o}}class ys{constructor(i,o){this.version=i,this.transformResults=o}}class Ia{constructor(i,o){this.updateTime=i,this.exists=o}static none(){return new Ia}static exists(i){return new Ia(void 0,i)}static updateTime(i){return new Ia(i)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(i){return this.exists===i.exists&&(this.updateTime?!!i.updateTime&&this.updateTime.isEqual(i.updateTime):!i.updateTime)}}function fo(m,i){return m.updateTime!==void 0?i.isFoundDocument()&&i.version.isEqual(m.updateTime):m.exists===void 0||m.exists===i.isFoundDocument()}class Da{}function po(m,i){if(!m.hasLocalMutations||i&&i.fields.length===0)return null;if(i===null)return m.isNoDocument()?new cs(m.key,Ia.none()):new Lo(m.key,m.data,Ia.none());{let o=m.data,d=Qt.empty(),v=new wi(Rt.comparator);for(let _ of i.fields)if(!v.has(_)){let O=o.field(_);O===null&&_.length>1&&(_=_.popLast(),O=o.field(_)),O===null?d.delete(_):d.set(_,O),v=v.add(_)}return new Ya(m.key,d,new Br(v.toArray()),Ia.none())}}function ms(m,i,o,d){return m instanceof Lo?function(v,_,O,X){if(!fo(v.precondition,_))return O;let oe=v.value.clone(),Ge=$i(v.fieldTransforms,X,_);return oe.setAll(Ge),_.convertToFoundDocument(_.version,oe).setHasLocalMutations(),null}(m,i,o,d):m instanceof Ya?function(v,_,O,X){if(!fo(v.precondition,_))return O;let oe=$i(v.fieldTransforms,X,_),Ge=_.data;return Ge.setAll(Ji(v)),Ge.setAll(oe),_.convertToFoundDocument(_.version,Ge).setHasLocalMutations(),O===null?null:O.unionWith(v.fieldMask.fields).unionWith(v.fieldTransforms.map(Tt=>Tt.field))}(m,i,o,d):fo(m.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}function mo(m,i){var o,d;return m.type===i.type&&!!m.key.isEqual(i.key)&&!!m.precondition.isEqual(i.precondition)&&(o=m.fieldTransforms,d=i.fieldTransforms,!!(o===void 0&&d===void 0||!(!o||!d)&&et(o,d,(v,_)=>{var O,X;return v.field.isEqual(_.field)&&(O=v.transform,X=_.transform,O instanceof Ea&&X instanceof Ea||O instanceof ia&&X instanceof ia?et(O.elements,X.elements,bi):O instanceof _a&&X instanceof _a?bi(O.Pe,X.Pe):O instanceof xa&&X instanceof xa)})))&&(m.type===0?m.value.isEqual(i.value):m.type!==1||m.data.isEqual(i.data)&&m.fieldMask.isEqual(i.fieldMask))}class Lo extends Da{constructor(i,o,d,v=[]){super(),this.key=i,this.value=o,this.precondition=d,this.fieldTransforms=v,this.type=0}getFieldMask(){return null}}class Ya extends Da{constructor(i,o,d,v,_=[]){super(),this.key=i,this.data=o,this.fieldMask=d,this.precondition=v,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function Ji(m){let i=new Map;return m.fieldMask.fields.forEach(o=>{if(!o.isEmpty()){let d=m.data.field(o);i.set(o,d)}}),i}function jn(m,i,o){var d;let v=new Map;m.length===o.length||_e();for(let _=0;_<o.length;_++){let O=m[_],X=O.transform,oe=i.data.field(O.field);v.set(O.field,(d=o[_],X instanceof Ea?el(X,oe):X instanceof ia?Ss(X,oe):d))}return v}function $i(m,i,o){let d=new Map;for(let v of m){let _=v.transform,O=o.data.field(v.field);d.set(v.field,_ instanceof xa?function(X,oe){let Ge={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:X.seconds,nanos:X.nanoseconds}}}};return oe&&Au(oe)&&(oe=tc(oe)),oe&&(Ge.fields.__previous_value__=oe),{mapValue:Ge}}(i,O):_ instanceof Ea?el(_,O):_ instanceof ia?Ss(_,O):function(X,oe){let Ge=Cs(X,oe),Tt=sa(Ge)+sa(X.Pe);return zl(Ge)&&zl(X.Pe)?sn(Tt):mr(X.serializer,Tt)}(_,O))}return d}class cs extends Da{constructor(i,o){super(),this.key=i,this.precondition=o,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ta extends Da{constructor(i,o){super(),this.key=i,this.precondition=o,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ws{constructor(i,o,d,v){this.batchId=i,this.localWriteTime=o,this.baseMutations=d,this.mutations=v}applyToRemoteDocument(i,o){let d=o.mutationResults;for(let _=0;_<this.mutations.length;_++){let O=this.mutations[_];if(O.key.isEqual(i.key)){var v;v=d[_],O instanceof Lo?function(X,oe,Ge){let Tt=X.value.clone(),ar=jn(X.fieldTransforms,oe,Ge.transformResults);Tt.setAll(ar),oe.convertToFoundDocument(Ge.version,Tt).setHasCommittedMutations()}(O,i,v):O instanceof Ya?function(X,oe,Ge){if(!fo(X.precondition,oe))return void oe.convertToUnknownDocument(Ge.version);let Tt=jn(X.fieldTransforms,oe,Ge.transformResults),ar=oe.data;ar.setAll(Ji(X)),ar.setAll(Tt),oe.convertToFoundDocument(Ge.version,ar).setHasCommittedMutations()}(O,i,v):function(X,oe,Ge){oe.convertToNoDocument(Ge.version).setHasCommittedMutations()}(0,i,v)}}}applyToLocalView(i,o){for(let d of this.baseMutations)d.key.isEqual(i.key)&&(o=ms(d,i,o,this.localWriteTime));for(let d of this.mutations)d.key.isEqual(i.key)&&(o=ms(d,i,o,this.localWriteTime));return o}applyToLocalDocumentSet(i,o){let d=pe();return this.mutations.forEach(v=>{let _=i.get(v.key),O=_.overlayedDocument,X=this.applyToLocalView(O,_.mutatedFields),oe=po(O,X=o.has(v.key)?null:X);oe!==null&&d.set(v.key,oe),O.isValidDocument()||O.convertToNoDocument(Ct.min())}),d}keys(){return this.mutations.reduce((i,o)=>i.add(o.key),Dt())}isEqual(i){return this.batchId===i.batchId&&et(this.mutations,i.mutations,(o,d)=>mo(o,d))&&et(this.baseMutations,i.baseMutations,(o,d)=>mo(o,d))}}class Ma{constructor(i,o,d,v){this.batch=i,this.commitVersion=o,this.mutationResults=d,this.docVersions=v}static from(i,o,d){i.mutations.length===d.length||_e();let v=qe,_=i.mutations;for(let O=0;O<_.length;O++)v=v.insert(_[O].key,d[O].version);return new Ma(i,o,d,v)}}class Gn{constructor(i,o){this.largestBatchId=i,this.mutation=o}getKey(){return this.mutation.key}isEqual(i){return i!==null&&this.mutation===i.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ss{constructor(i,o){this.count=i,this.unchangedNames=o}}function Ds(m){if(m===void 0)return Ke("GRPC error has no .code"),Fe.UNKNOWN;switch(m){case C.OK:return Fe.OK;case C.CANCELLED:return Fe.CANCELLED;case C.UNKNOWN:return Fe.UNKNOWN;case C.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case C.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case C.INTERNAL:return Fe.INTERNAL;case C.UNAVAILABLE:return Fe.UNAVAILABLE;case C.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case C.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case C.NOT_FOUND:return Fe.NOT_FOUND;case C.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case C.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case C.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case C.ABORTED:return Fe.ABORTED;case C.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case C.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case C.DATA_LOSS:return Fe.DATA_LOSS;default:return _e()}}(N=C||(C={}))[N.OK=0]="OK",N[N.CANCELLED=1]="CANCELLED",N[N.UNKNOWN=2]="UNKNOWN",N[N.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",N[N.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",N[N.NOT_FOUND=5]="NOT_FOUND",N[N.ALREADY_EXISTS=6]="ALREADY_EXISTS",N[N.PERMISSION_DENIED=7]="PERMISSION_DENIED",N[N.UNAUTHENTICATED=16]="UNAUTHENTICATED",N[N.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",N[N.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",N[N.ABORTED=10]="ABORTED",N[N.OUT_OF_RANGE=11]="OUT_OF_RANGE",N[N.UNIMPLEMENTED=12]="UNIMPLEMENTED",N[N.INTERNAL=13]="INTERNAL",N[N.UNAVAILABLE=14]="UNAVAILABLE",N[N.DATA_LOSS=15]="DATA_LOSS";let Ba=new q([4294967295,4294967295],0);function Ca(m){let i=new TextEncoder().encode(m),o=new Z;return o.update(i),new Uint8Array(o.digest())}function Xa(m){let i=new DataView(m.buffer),o=i.getUint32(0,!0),d=i.getUint32(4,!0),v=i.getUint32(8,!0),_=i.getUint32(12,!0);return[new q([o,d],0),new q([v,_],0)]}class rs{constructor(i,o,d){if(this.bitmap=i,this.padding=o,this.hashCount=d,o<0||o>=8)throw new Li(`Invalid padding: ${o}`);if(d<0||i.length>0&&this.hashCount===0)throw new Li(`Invalid hash count: ${d}`);if(i.length===0&&o!==0)throw new Li(`Invalid padding when bitmap length is 0: ${o}`);this.Te=8*i.length-o,this.Ie=q.fromNumber(this.Te)}Ee(i,o,d){let v=i.add(o.multiply(q.fromNumber(d)));return v.compare(Ba)===1&&(v=new q([v.getBits(0),v.getBits(1)],0)),v.modulo(this.Ie).toNumber()}de(i){return(this.bitmap[Math.floor(i/8)]&1<<i%8)!=0}mightContain(i){if(this.Te===0)return!1;let[o,d]=Xa(Ca(i));for(let v=0;v<this.hashCount;v++){let _=this.Ee(o,d,v);if(!this.de(_))return!1}return!0}static create(i,o,d){let v=new rs(new Uint8Array(Math.ceil(i/8)),i%8==0?0:8-i%8,o);return d.forEach(_=>v.insert(_)),v}insert(i){if(this.Te===0)return;let[o,d]=Xa(Ca(i));for(let v=0;v<this.hashCount;v++){let _=this.Ee(o,d,v);this.Ae(_)}}Ae(i){this.bitmap[Math.floor(i/8)]|=1<<i%8}}class Li extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qi{constructor(i,o,d,v,_){this.snapshotVersion=i,this.targetChanges=o,this.targetMismatches=d,this.documentUpdates=v,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(i,o,d){let v=new Map;return v.set(i,ko.createSynthesizedTargetChangeForCurrentChange(i,o,d)),new Qi(Ct.min(),v,new Qr(lt),hi,Dt())}}class ko{constructor(i,o,d,v,_){this.resumeToken=i,this.current=o,this.addedDocuments=d,this.modifiedDocuments=v,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(i,o,d){return new ko(d,o,Dt(),Dt(),Dt())}}class Za{constructor(i,o,d,v){this.Re=i,this.removedTargetIds=o,this.key=d,this.Ve=v}}class ll{constructor(i,o){this.targetId=i,this.me=o}}class tl{constructor(i,o,d=As.EMPTY_BYTE_STRING,v=null){this.state=i,this.targetIds=o,this.resumeToken=d,this.cause=v}}class Ou{constructor(){this.fe=0,this.ge=nc(),this.pe=As.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(i){i.approximateByteSize()>0&&(this.we=!0,this.pe=i)}ve(){let i=Dt(),o=Dt(),d=Dt();return this.ge.forEach((v,_)=>{switch(_){case 0:i=i.add(v);break;case 2:o=o.add(v);break;case 1:d=d.add(v);break;default:_e()}}),new ko(this.pe,this.ye,i,o,d)}Ce(){this.we=!1,this.ge=nc()}Fe(i,o){this.we=!0,this.ge=this.ge.insert(i,o)}Me(i){this.we=!0,this.ge=this.ge.remove(i)}xe(){this.fe+=1}Oe(){this.fe-=1,this.fe>=0||_e()}Ne(){this.we=!0,this.ye=!0}}class kl{constructor(i){this.Le=i,this.Be=new Map,this.ke=hi,this.qe=Jl(),this.Qe=Jl(),this.Ke=new Qr(lt)}$e(i){for(let o of i.Re)i.Ve&&i.Ve.isFoundDocument()?this.Ue(o,i.Ve):this.We(o,i.key,i.Ve);for(let o of i.removedTargetIds)this.We(o,i.key,i.Ve)}Ge(i){this.forEachTarget(i,o=>{let d=this.ze(o);switch(i.state){case 0:this.je(o)&&d.De(i.resumeToken);break;case 1:d.Oe(),d.Se||d.Ce(),d.De(i.resumeToken);break;case 2:d.Oe(),d.Se||this.removeTarget(o);break;case 3:this.je(o)&&(d.Ne(),d.De(i.resumeToken));break;case 4:this.je(o)&&(this.He(o),d.De(i.resumeToken));break;default:_e()}})}forEachTarget(i,o){i.targetIds.length>0?i.targetIds.forEach(o):this.Be.forEach((d,v)=>{this.je(v)&&o(v)})}Je(i){let o=i.targetId,d=i.me.count,v=this.Ye(o);if(v){let _=v.target;if(Pn(_))if(d===0){let O=new Et(_.path);this.We(o,O,Sa.newNoDocument(O,Ct.min()))}else d===1||_e();else{let O=this.Ze(o);if(O!==d){let X=this.Xe(i),oe=X?this.et(X,i,O):1;oe!==0&&(this.He(o),this.Ke=this.Ke.insert(o,oe===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(i){let o,d,v=i.me.unchangedNames;if(!v||!v.bits)return null;let{bits:{bitmap:_="",padding:O=0},hashCount:X=0}=v;try{o=xl(_).toUint8Array()}catch(oe){if(oe instanceof Nn)return Je("Decoding the base64 bloom filter in existence filter failed ("+oe.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw oe}try{d=new rs(o,O,X)}catch(oe){return Je(oe instanceof Li?"BloomFilter error: ":"Applying bloom filter failed: ",oe),null}return d.Te===0?null:d}et(i,o,d){return o.me.count===d-this.rt(i,o.targetId)?0:2}rt(i,o){let d=this.Le.getRemoteKeysForTarget(o),v=0;return d.forEach(_=>{let O=this.Le.nt(),X=`projects/${O.projectId}/databases/${O.database}/documents/${_.path.canonicalString()}`;i.mightContain(X)||(this.We(o,_,null),v++)}),v}it(i){let o=new Map;this.Be.forEach((_,O)=>{let X=this.Ye(O);if(X){if(_.current&&Pn(X.target)){let oe=new Et(X.target.path);this.st(oe).has(O)||this.ot(O,oe)||this.We(O,oe,Sa.newNoDocument(oe,i))}_.be&&(o.set(O,_.ve()),_.Ce())}});let d=Dt();this.Qe.forEach((_,O)=>{let X=!0;O.forEachWhile(oe=>{let Ge=this.Ye(oe);return!Ge||Ge.purpose==="TargetPurposeLimboResolution"||(X=!1,!1)}),X&&(d=d.add(_))}),this.ke.forEach((_,O)=>O.setReadTime(i));let v=new Qi(i,o,this.Ke,this.ke,d);return this.ke=hi,this.qe=Jl(),this.Qe=Jl(),this.Ke=new Qr(lt),v}Ue(i,o){if(!this.je(i))return;let d=this.ot(i,o.key)?2:0;this.ze(i).Fe(o.key,d),this.ke=this.ke.insert(o.key,o),this.qe=this.qe.insert(o.key,this.st(o.key).add(i)),this.Qe=this.Qe.insert(o.key,this._t(o.key).add(i))}We(i,o,d){if(!this.je(i))return;let v=this.ze(i);this.ot(i,o)?v.Fe(o,1):v.Me(o),this.Qe=this.Qe.insert(o,this._t(o).delete(i)),this.Qe=this.Qe.insert(o,this._t(o).add(i)),d&&(this.ke=this.ke.insert(o,d))}removeTarget(i){this.Be.delete(i)}Ze(i){let o=this.ze(i).ve();return this.Le.getRemoteKeysForTarget(i).size+o.addedDocuments.size-o.removedDocuments.size}xe(i){this.ze(i).xe()}ze(i){let o=this.Be.get(i);return o||(o=new Ou,this.Be.set(i,o)),o}_t(i){let o=this.Qe.get(i);return o||(o=new wi(lt),this.Qe=this.Qe.insert(i,o)),o}st(i){let o=this.qe.get(i);return o||(o=new wi(lt),this.qe=this.qe.insert(i,o)),o}je(i){let o=this.Ye(i)!==null;return o||ce("WatchChangeAggregator","Detected inactive target",i),o}Ye(i){let o=this.Be.get(i);return o&&o.Se?null:this.Le.ut(i)}He(i){this.Be.set(i,new Ou),this.Le.getRemoteKeysForTarget(i).forEach(o=>{this.We(i,o,null)})}ot(i,o){return this.Le.getRemoteKeysForTarget(i).has(o)}}function Jl(){return new Qr(Et.comparator)}function nc(){return new Qr(Et.comparator)}let Ac={asc:"ASCENDING",desc:"DESCENDING"},sf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gu={and:"AND",or:"OR"};class Nc{constructor(i,o){this.databaseId=i,this.useProto3Json=o}}function af(m,i){return m.useProto3Json||i==null?i:{value:i}}function Oc(m,i){return m.useProto3Json?`${new Date(1e3*i.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+i.nanoseconds).slice(-9)}Z`:{seconds:""+i.seconds,nanos:i.nanoseconds}}function Du(m,i){return m.useProto3Json?i.toBase64():i.toUint8Array()}function eo(m){return m||_e(),Ct.fromTimestamp(function(i){let o=Jo(i);return new bt(o.seconds,o.nanos)}(m))}function iu(m,i){return Mu(m,i).canonicalString()}function Mu(m,i){let o=new Qe(["projects",m.projectId,"databases",m.database]).child("documents");return i===void 0?o:o.child(i)}function Xc(m){let i=Qe.fromString(m);return Ci(i)||_e(),i}function Lu(m,i){return iu(m.databaseId,i.path)}function yu(m,i){let o=Xc(i);if(o.get(1)!==m.databaseId.projectId)throw new pt(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+o.get(1)+" vs "+m.databaseId.projectId);if(o.get(3)!==m.databaseId.database)throw new pt(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+o.get(3)+" vs "+m.databaseId.database);return new Et(be(o))}function Be(m,i){return iu(m.databaseId,i)}function B(m){let i=Xc(m);return i.length===4?Qe.emptyPath():be(i)}function le(m){return new Qe(["projects",m.databaseId.projectId,"databases",m.databaseId.database]).canonicalString()}function be(m){return m.length>4&&m.get(4)==="documents"||_e(),m.popFirst(5)}function Xe(m,i,o){return{name:Lu(m,i),fields:o.value.mapValue.fields}}function ot(m,i,o){let d=yu(m,i.name),v=eo(i.updateTime),_=i.createTime?eo(i.createTime):Ct.min(),O=new Qt({mapValue:{fields:i.fields}}),X=Sa.newFoundDocument(d,v,_,O);return o&&X.setHasCommittedMutations(),o?X.setHasCommittedMutations():X}function Gt(m,i){var o;let d;if(i instanceof Lo)d={update:Xe(m,i.key,i.value)};else if(i instanceof cs)d={delete:Lu(m,i.key)};else if(i instanceof Ya)d={update:Xe(m,i.key,i.data),updateMask:function(v){let _=[];return v.fields.forEach(O=>_.push(O.canonicalString())),{fieldPaths:_}}(i.fieldMask)};else{if(!(i instanceof Ta))return _e();d={verify:Lu(m,i.key)}}return i.fieldTransforms.length>0&&(d.updateTransforms=i.fieldTransforms.map(v=>function(_,O){let X=O.transform;if(X instanceof xa)return{fieldPath:O.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(X instanceof Ea)return{fieldPath:O.field.canonicalString(),appendMissingElements:{values:X.elements}};if(X instanceof ia)return{fieldPath:O.field.canonicalString(),removeAllFromArray:{values:X.elements}};if(X instanceof _a)return{fieldPath:O.field.canonicalString(),increment:X.Pe};throw _e()}(0,v))),i.precondition.isNone||(d.currentDocument=(o=i.precondition).updateTime!==void 0?{updateTime:Oc(m,o.updateTime.toTimestamp())}:o.exists!==void 0?{exists:o.exists}:_e()),d}function cr(m,i){var o;let d=i.currentDocument?(o=i.currentDocument).updateTime!==void 0?Ia.updateTime(eo(o.updateTime)):o.exists!==void 0?Ia.exists(o.exists):Ia.none():Ia.none(),v=i.updateTransforms?i.updateTransforms.map(_=>{let O;return O=null,"setToServerValue"in _?(_.setToServerValue==="REQUEST_TIME"||_e(),O=new xa):"appendMissingElements"in _?O=new Ea(_.appendMissingElements.values||[]):"removeAllFromArray"in _?O=new ia(_.removeAllFromArray.values||[]):"increment"in _?O=new _a(m,_.increment):_e(),new Oa(Rt.fromServerFormat(_.fieldPath),O)}):[];if(i.update){i.update.name;let _=yu(m,i.update.name),O=new Qt({mapValue:{fields:i.update.fields}});return i.updateMask?new Ya(_,O,new Br((i.updateMask.fieldPaths||[]).map(X=>Rt.fromServerFormat(X))),d,v):new Lo(_,O,d,v)}return i.delete?new cs(yu(m,i.delete),d):i.verify?new Ta(yu(m,i.verify),d):_e()}function Er(m,i){return{documents:[Be(m,i.path)]}}function br(m,i){var o,d;let v,_={structuredQuery:{}},O=i.path;i.collectionGroup!==null?(v=O,_.structuredQuery.from=[{collectionId:i.collectionGroup,allDescendants:!0}]):(v=O.popLast(),_.structuredQuery.from=[{collectionId:O.lastSegment()}]),_.parent=Be(m,v);let X=function(Tt){if(Tt.length!==0)return function ar(ur){return ur instanceof xs?function(wr){if(wr.op==="=="){if(Gl(wr.value))return{unaryFilter:{field:Mn(wr.field),op:"IS_NAN"}};if(ba(wr.value))return{unaryFilter:{field:Mn(wr.field),op:"IS_NULL"}}}else if(wr.op==="!="){if(Gl(wr.value))return{unaryFilter:{field:Mn(wr.field),op:"IS_NOT_NAN"}};if(ba(wr.value))return{unaryFilter:{field:Mn(wr.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mn(wr.field),op:sf[wr.op],value:wr.value}}}(ur):ur instanceof Rs?function(wr){let vn=wr.getFilters().map(Hn=>ar(Hn));return vn.length===1?vn[0]:{compositeFilter:{op:gu[wr.op],filters:vn}}}(ur):_e()}(Rs.create(Tt,"and"))}(i.filters);X&&(_.structuredQuery.where=X);let oe=function(Tt){if(Tt.length!==0)return Tt.map(ar=>({field:Mn(ar.field),direction:Ac[ar.dir]}))}(i.orderBy);oe&&(_.structuredQuery.orderBy=oe);let Ge=af(m,i.limit);return Ge!==null&&(_.structuredQuery.limit=Ge),i.startAt&&(_.structuredQuery.startAt={before:(o=i.startAt).inclusive,values:o.position}),i.endAt&&(_.structuredQuery.endAt={before:!(d=i.endAt).inclusive,values:d.position}),{ct:_,parent:v}}function nn(m){var i;let o,d=B(m.parent),v=m.structuredQuery,_=v.from?v.from.length:0,O=null;if(_>0){_===1||_e();let ur=v.from[0];ur.allDescendants?O=ur.collectionId:d=d.child(ur.collectionId)}let X=[];v.where&&(X=function(ur){let wr=function vn(Hn){return Hn.unaryFilter!==void 0?function(Jn){switch(Jn.unaryFilter.op){case"IS_NAN":let Os=Bn(Jn.unaryFilter.field);return xs.create(Os,"==",{doubleValue:NaN});case"IS_NULL":let Hi=Bn(Jn.unaryFilter.field);return xs.create(Hi,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let nr=Bn(Jn.unaryFilter.field);return xs.create(nr,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let Ot=Bn(Jn.unaryFilter.field);return xs.create(Ot,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(Hn):Hn.fieldFilter!==void 0?xs.create(Bn(Hn.fieldFilter.field),function(Jn){switch(Jn){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(Hn.fieldFilter.op),Hn.fieldFilter.value):Hn.compositeFilter!==void 0?Rs.create(Hn.compositeFilter.filters.map(Jn=>vn(Jn)),function(Jn){switch(Jn){case"AND":return"and";case"OR":return"or";default:return _e()}}(Hn.compositeFilter.op)):_e()}(ur);return wr instanceof Rs&&ol(wr)?wr.getFilters():[wr]}(v.where));let oe=[];v.orderBy&&(oe=v.orderBy.map(ur=>new Bo(Bn(ur.field),function(wr){switch(wr){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ur.direction))));let Ge=null;v.limit&&(Ge=(o=typeof(i=v.limit)=="object"?i.value:i)==null?null:o);let Tt=null;v.startAt&&(Tt=function(ur){let wr=!!ur.before;return new ma(ur.values||[],wr)}(v.startAt));let ar=null;return v.endAt&&(ar=function(ur){let wr=!ur.before;return new ma(ur.values||[],wr)}(v.endAt)),new Dn(d,O,oe,X,Ge,"F",Tt,ar)}function Mn(m){return{fieldPath:m.canonicalString()}}function Bn(m){return Rt.fromServerFormat(m.fieldPath)}function Ci(m){return m.length>=4&&m.get(0)==="projects"&&m.get(2)==="databases"}class dn{constructor(i,o,d,v,_=Ct.min(),O=Ct.min(),X=As.EMPTY_BYTE_STRING,oe=null){this.target=i,this.targetId=o,this.purpose=d,this.sequenceNumber=v,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=O,this.resumeToken=X,this.expectedCount=oe}withSequenceNumber(i){return new dn(this.target,this.targetId,this.purpose,i,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(i,o){return new dn(this.target,this.targetId,this.purpose,this.sequenceNumber,o,this.lastLimboFreeSnapshotVersion,i,null)}withExpectedCount(i){return new dn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,i)}withLastLimboFreeSnapshotVersion(i){return new dn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,i,this.resumeToken,this.expectedCount)}}class Wn{constructor(i){this.ht=i}}function Un(m,i){let o=i.key,d={prefixPath:o.getCollectionPath().popLast().toArray(),collectionGroup:o.collectionGroup,documentId:o.path.lastSegment(),readTime:ns(i.readTime),hasCommittedMutations:i.hasCommittedMutations};if(i.isFoundDocument()){var v;d.document={name:Lu(v=m.ht,i.key),fields:i.data.value.mapValue.fields,updateTime:Oc(v,i.version.toTimestamp()),createTime:Oc(v,i.createTime.toTimestamp())}}else if(i.isNoDocument())d.noDocument={path:o.path.toArray(),readTime:di(i.version)};else{if(!i.isUnknownDocument())return _e();d.unknownDocument={path:o.path.toArray(),version:di(i.version)}}return d}function ns(m){let i=m.toTimestamp();return[i.seconds,i.nanoseconds]}function di(m){let i=m.toTimestamp();return{seconds:i.seconds,nanoseconds:i.nanoseconds}}function Di(m){let i=new bt(m.seconds,m.nanoseconds);return Ct.fromTimestamp(i)}function ri(m,i){let o=(i.baseMutations||[]).map(_=>cr(m.ht,_));for(let _=0;_<i.mutations.length-1;++_){let O=i.mutations[_];if(_+1<i.mutations.length&&i.mutations[_+1].transform!==void 0){let X=i.mutations[_+1];O.updateTransforms=X.transform.fieldTransforms,i.mutations.splice(_+1,1),++_}}let d=i.mutations.map(_=>cr(m.ht,_)),v=bt.fromMillis(i.localWriteTimeMs);return new Ws(i.batchId,v,o,d)}function xn(m){var i;let o=Di(m.readTime),d=m.lastLimboFreeSnapshotVersion!==void 0?Di(m.lastLimboFreeSnapshotVersion):Ct.min();return new dn(m.query.documents!==void 0?((i=m.query).documents.length===1||_e(),Zt(ts(B(i.documents[0])))):Zt(nn(m.query)),m.targetId,"TargetPurposeListen",m.lastListenSequenceNumber,o,d,As.fromBase64String(m.resumeToken))}function Ti(m,i){let o,d=di(i.snapshotVersion),v=di(i.lastLimboFreeSnapshotVersion);o=Pn(i.target)?Er(m.ht,i.target):br(m.ht,i.target).ct;let _=i.resumeToken.toBase64();return{targetId:i.targetId,canonicalId:qr(i.target),readTime:d,resumeToken:_,lastListenSequenceNumber:i.sequenceNumber,lastLimboFreeSnapshotVersion:v,query:o}}function Js(m){let i=nn({parent:m.parent,structuredQuery:m.structuredQuery});return m.limitType==="LAST"?yi(i,i.limit,"L"):i}function ga(m,i){return new Gn(i.largestBatchId,cr(m.ht,i.overlayMutation))}function xi(m,i){let o=i.path.lastSegment();return[m,In(i.path.popLast()),o]}function Yi(m,i,o,d){return{indexId:m,uid:i,sequenceNumber:o,readTime:di(d.readTime),documentKey:In(d.documentKey.path),largestBatchId:d.largestBatchId}}class Ms{getBundleMetadata(i,o){return qa(i).get(o).next(d=>{if(d)return{id:d.bundleId,createTime:Di(d.createTime),version:d.version}})}saveBundleMetadata(i,o){return qa(i).put({bundleId:o.id,createTime:di(eo(o.createTime)),version:o.version})}getNamedQuery(i,o){return Ka(i).get(o).next(d=>{if(d)return{name:d.name,query:Js(d.bundledQuery),readTime:Di(d.readTime)}})}saveNamedQuery(i,o){return Ka(i).put({name:o.name,readTime:di(eo(o.readTime)),bundledQuery:o.bundledQuery})}}function qa(m){return Jr(m,"bundles")}function Ka(m){return Jr(m,"namedQueries")}class aa{constructor(i,o){this.serializer=i,this.userId=o}static Pt(i,o){return new aa(i,o.uid||"")}getOverlay(i,o){return gs(i).get(xi(this.userId,o)).next(d=>d?ga(this.serializer,d):null)}getOverlays(i,o){let d=pe();return Pt.forEach(o,v=>this.getOverlay(i,v).next(_=>{_!==null&&d.set(v,_)})).next(()=>d)}saveOverlays(i,o,d){let v=[];return d.forEach((_,O)=>{let X=new Gn(o,O);v.push(this.Tt(i,X))}),Pt.waitFor(v)}removeOverlaysForBatchId(i,o,d){let v=new Set;o.forEach(O=>v.add(In(O.getCollectionPath())));let _=[];return v.forEach(O=>{let X=IDBKeyRange.bound([this.userId,O,d],[this.userId,O,d+1],!1,!0);_.push(gs(i).j("collectionPathOverlayIndex",X))}),Pt.waitFor(_)}getOverlaysForCollection(i,o,d){let v=pe(),_=In(o),O=IDBKeyRange.bound([this.userId,_,d],[this.userId,_,Number.POSITIVE_INFINITY],!0);return gs(i).U("collectionPathOverlayIndex",O).next(X=>{for(let oe of X){let Ge=ga(this.serializer,oe);v.set(Ge.getKey(),Ge)}return v})}getOverlaysForCollectionGroup(i,o,d,v){let _,O=pe(),X=IDBKeyRange.bound([this.userId,o,d],[this.userId,o,Number.POSITIVE_INFINITY],!0);return gs(i).J({index:"collectionGroupOverlayIndex",range:X},(oe,Ge,Tt)=>{let ar=ga(this.serializer,Ge);O.size()<v||ar.largestBatchId===_?(O.set(ar.getKey(),ar),_=ar.largestBatchId):Tt.done()}).next(()=>O)}Tt(i,o){return gs(i).put(function(d,v,_){let[O,X,oe]=xi(v,_.mutation.key);return{userId:v,collectionPath:X,documentId:oe,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Gt(d.ht,_.mutation)}}(this.serializer,this.userId,o))}}function gs(m){return Jr(m,"documentOverlays")}class Qo{It(i){return Jr(i,"globals")}getSessionToken(i){return this.It(i).get("sessionToken").next(o=>{let d=o?.value;return d?As.fromUint8Array(d):As.EMPTY_BYTE_STRING})}setSessionToken(i,o){return this.It(i).put({name:"sessionToken",value:o.toUint8Array()})}}class Ro{constructor(){}Et(i,o){this.dt(i,o),o.At()}dt(i,o){if("nullValue"in i)this.Rt(o,5);else if("booleanValue"in i)this.Rt(o,10),o.Vt(i.booleanValue?1:0);else if("integerValue"in i)this.Rt(o,15),o.Vt(qs(i.integerValue));else if("doubleValue"in i){let d=qs(i.doubleValue);isNaN(d)?this.Rt(o,13):(this.Rt(o,15),li(d)?o.Vt(0):o.Vt(d))}else if("timestampValue"in i){let d=i.timestampValue;this.Rt(o,20),typeof d=="string"&&(d=Jo(d)),o.ft(`${d.seconds||""}`),o.Vt(d.nanos||0)}else if("stringValue"in i)this.gt(i.stringValue,o),this.yt(o);else if("bytesValue"in i)this.Rt(o,30),o.wt(xl(i.bytesValue)),this.yt(o);else if("referenceValue"in i)this.St(i.referenceValue,o);else if("geoPointValue"in i){let d=i.geoPointValue;this.Rt(o,45),o.Vt(d.latitude||0),o.Vt(d.longitude||0)}else"mapValue"in i?Cl(i)?this.Rt(o,Number.MAX_SAFE_INTEGER):nu(i)?this.bt(i.mapValue,o):(this.Dt(i.mapValue,o),this.yt(o)):"arrayValue"in i?(this.vt(i.arrayValue,o),this.yt(o)):_e()}gt(i,o){this.Rt(o,25),this.Ct(i,o)}Ct(i,o){o.ft(i)}Dt(i,o){let d=i.fields||{};for(let v of(this.Rt(o,55),Object.keys(d)))this.gt(v,o),this.dt(d[v],o)}bt(i,o){var d,v;let _=i.fields||{};this.Rt(o,53);let O="value",X=((v=(d=_[O].arrayValue)===null||d===void 0?void 0:d.values)===null||v===void 0?void 0:v.length)||0;this.Rt(o,15),o.Vt(qs(X)),this.gt(O,o),this.dt(_[O],o)}vt(i,o){let d=i.values||[];for(let v of(this.Rt(o,50),d))this.dt(v,o)}St(i,o){this.Rt(o,37),Et.fromName(i).path.forEach(d=>{this.Rt(o,60),this.Ct(d,o)})}Rt(i,o){i.Vt(o)}yt(i){i.Vt(2)}}function ul(m){return Math.ceil((64-function(i){let o=0;for(let d=0;d<8;++d){let v=function(_){if(_===0)return 8;let O=0;return _>>4==0&&(O+=4,_<<=4),_>>6==0&&(O+=2,_<<=2),_>>7==0&&(O+=1),O}(255&i[d]);if(o+=v,v!==8)break}return o}(m))/8)}Ro.Ft=new Ro;class rl{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(i){let o=i[Symbol.iterator](),d=o.next();for(;!d.done;)this.xt(d.value),d=o.next();this.Ot()}Nt(i){let o=i[Symbol.iterator](),d=o.next();for(;!d.done;)this.Lt(d.value),d=o.next();this.Bt()}kt(i){for(let o of i){let d=o.charCodeAt(0);if(d<128)this.xt(d);else if(d<2048)this.xt(960|d>>>6),this.xt(128|63&d);else if(o<"\uD800"||"\uDBFF"<o)this.xt(480|d>>>12),this.xt(128|63&d>>>6),this.xt(128|63&d);else{let v=o.codePointAt(0);this.xt(240|v>>>18),this.xt(128|63&v>>>12),this.xt(128|63&v>>>6),this.xt(128|63&v)}}this.Ot()}qt(i){for(let o of i){let d=o.charCodeAt(0);if(d<128)this.Lt(d);else if(d<2048)this.Lt(960|d>>>6),this.Lt(128|63&d);else if(o<"\uD800"||"\uDBFF"<o)this.Lt(480|d>>>12),this.Lt(128|63&d>>>6),this.Lt(128|63&d);else{let v=o.codePointAt(0);this.Lt(240|v>>>18),this.Lt(128|63&v>>>12),this.Lt(128|63&v>>>6),this.Lt(128|63&v)}}this.Bt()}Qt(i){let o=this.Kt(i),d=ul(o);this.$t(1+d),this.buffer[this.position++]=255&d;for(let v=o.length-d;v<o.length;++v)this.buffer[this.position++]=255&o[v]}Ut(i){let o=this.Kt(i),d=ul(o);this.$t(1+d),this.buffer[this.position++]=~(255&d);for(let v=o.length-d;v<o.length;++v)this.buffer[this.position++]=~(255&o[v])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(i){this.$t(i.length),this.buffer.set(i,this.position),this.position+=i.length}Ht(){return this.buffer.slice(0,this.position)}Kt(i){let o=function(v){let _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,v,!1),new Uint8Array(_.buffer)}(i),d=(128&o[0])!=0;o[0]^=d?255:128;for(let v=1;v<o.length;++v)o[v]^=d?255:0;return o}xt(i){let o=255&i;o===0?(this.Gt(0),this.Gt(255)):o===255?(this.Gt(255),this.Gt(0)):this.Gt(o)}Lt(i){let o=255&i;o===0?(this.jt(0),this.jt(255)):o===255?(this.jt(255),this.jt(0)):this.jt(i)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(i){this.$t(1),this.buffer[this.position++]=i}jt(i){this.$t(1),this.buffer[this.position++]=~i}$t(i){let o=i+this.position;if(o<=this.buffer.length)return;let d=2*this.buffer.length;d<o&&(d=o);let v=new Uint8Array(d);v.set(this.buffer),this.buffer=v}}class ic{constructor(i){this.Jt=i}wt(i){this.Jt.Mt(i)}ft(i){this.Jt.kt(i)}Vt(i){this.Jt.Qt(i)}At(){this.Jt.Wt()}}class V{constructor(i){this.Jt=i}wt(i){this.Jt.Nt(i)}ft(i){this.Jt.qt(i)}Vt(i){this.Jt.Ut(i)}At(){this.Jt.zt()}}class L{constructor(){this.Jt=new rl,this.Yt=new ic(this.Jt),this.Zt=new V(this.Jt)}seed(i){this.Jt.seed(i)}Xt(i){return i===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}class ne{constructor(i,o,d,v){this.indexId=i,this.documentKey=o,this.arrayValue=d,this.directionalValue=v}en(){let i=this.directionalValue.length,o=i===0||this.directionalValue[i-1]===255?i+1:i,d=new Uint8Array(o);return d.set(this.directionalValue,0),o!==i?d.set([0],this.directionalValue.length):++d[d.length-1],new ne(this.indexId,this.documentKey,this.arrayValue,d)}}function Pe(m,i){let o=m.indexId-i.indexId;return o!==0||(o=Oe(m.arrayValue,i.arrayValue))!==0||(o=Oe(m.directionalValue,i.directionalValue))!==0?o:Et.comparator(m.documentKey,i.documentKey)}function Oe(m,i){for(let o=0;o<m.length&&o<i.length;++o){let d=m[o]-i[o];if(d!==0)return d}return m.length-i.length}class kt{constructor(i){for(let o of(this.tn=new wi((d,v)=>Rt.comparator(d.field,v.field)),this.collectionId=i.collectionGroup!=null?i.collectionGroup:i.path.lastSegment(),this.nn=i.orderBy,this.rn=[],i.filters))o.isInequality()?this.tn=this.tn.add(o):this.rn.push(o)}get sn(){return this.tn.size>1}on(i){if(i.collectionGroup===this.collectionId||_e(),this.sn)return!1;let o=an(i);if(o!==void 0&&!this._n(o))return!1;let d=Hr(i),v=new Set,_=0,O=0;for(;_<d.length&&this._n(d[_]);++_)v=v.add(d[_].fieldPath.canonicalString());if(_===d.length)return!0;if(this.tn.size>0){let X=this.tn.getIterator().getNext();if(!v.has(X.field.canonicalString())){let oe=d[_];if(!this.an(X,oe)||!this.un(this.nn[O++],oe))return!1}++_}for(;_<d.length;++_){let X=d[_];if(O>=this.nn.length||!this.un(this.nn[O++],X))return!1}return!0}cn(){if(this.sn)return null;let i=new wi(Rt.comparator),o=[];for(let d of this.rn)if(!d.field.isKeyField())if(d.op==="array-contains"||d.op==="array-contains-any")o.push(new gn(d.field,2));else{if(i.has(d.field))continue;i=i.add(d.field),o.push(new gn(d.field,0))}for(let d of this.nn)d.field.isKeyField()||i.has(d.field)||(i=i.add(d.field),o.push(new gn(d.field,d.dir==="asc"?0:1)));return new rr(rr.UNKNOWN_ID,this.collectionId,o,Or.empty())}_n(i){for(let o of this.rn)if(this.an(o,i))return!0;return!1}an(i,o){if(i===void 0||!i.field.isEqual(o.fieldPath))return!1;let d=i.op==="array-contains"||i.op==="array-contains-any";return o.kind===2===d}un(i,o){return!!i.field.isEqual(o.fieldPath)&&(o.kind===0&&i.dir==="asc"||o.kind===1&&i.dir==="desc")}}function Nt(m){return m instanceof xs}function Mt(m){return m instanceof Rs&&ol(m)}function sr(m){return Nt(m)||Mt(m)||function(i){if(i instanceof Rs&&Nu(i)){for(let o of i.getFilters())if(!Nt(o)&&!Mt(o))return!1;return!0}return!1}(m)}function vr(m,i){return m instanceof xs||m instanceof Rs||_e(),i instanceof xs||i instanceof Rs||_e(),Mr(m instanceof xs?i instanceof xs?Rs.create([m,i],"and"):kr(m,i):i instanceof xs?kr(i,m):function(o,d){if(o.filters.length>0&&d.filters.length>0||_e(),Wl(o)&&Wl(d))return ho(o,d.getFilters());let v=Nu(o)?o:d,_=Nu(o)?d:o,O=v.filters.map(X=>vr(X,_));return Rs.create(O,"or")}(m,i))}function kr(m,i){if(Wl(i))return ho(i,m.getFilters());{let o=i.filters.map(d=>vr(m,d));return Rs.create(o,"or")}}function Mr(m){if(m instanceof xs||m instanceof Rs||_e(),m instanceof xs)return m;let i=m.getFilters();if(i.length===1)return Mr(i[0]);if(rc(m))return m;let o=i.map(v=>Mr(v)),d=[];return o.forEach(v=>{v instanceof xs?d.push(v):v instanceof Rs&&(v.op===m.op?d.push(...v.filters):d.push(v))}),d.length===1?d[0]:Rs.create(d,m.op)}class fn{constructor(){this.ln=new ti}addToCollectionParentIndex(i,o){return this.ln.add(o),Pt.resolve()}getCollectionParents(i,o){return Pt.resolve(this.ln.getEntries(o))}addFieldIndex(i,o){return Pt.resolve()}deleteFieldIndex(i,o){return Pt.resolve()}deleteAllFieldIndexes(i){return Pt.resolve()}createTargetIndexes(i,o){return Pt.resolve()}getDocumentsMatchingTarget(i,o){return Pt.resolve(null)}getIndexType(i,o){return Pt.resolve(0)}getFieldIndexes(i,o){return Pt.resolve([])}getNextCollectionGroupToUpdate(i){return Pt.resolve(null)}getMinOffset(i,o){return Pt.resolve(tn.min())}getMinOffsetFromCollectionGroup(i,o){return Pt.resolve(tn.min())}updateCollectionGroup(i,o,d){return Pt.resolve()}updateIndexEntries(i,o){return Pt.resolve()}}class ti{constructor(){this.index={}}add(i){let o=i.lastSegment(),d=i.popLast(),v=this.index[o]||new wi(Qe.comparator),_=!v.has(d);return this.index[o]=v.add(d),_}has(i){let o=i.lastSegment(),d=i.popLast(),v=this.index[o];return v&&v.has(d)}getEntries(i){return(this.index[i]||new wi(Qe.comparator)).toArray()}}let Fn=new Uint8Array(0);class yn{constructor(i,o){this.databaseId=o,this.hn=new ti,this.Pn=new os(d=>qr(d),(d,v)=>ln(d,v)),this.uid=i.uid||""}addToCollectionParentIndex(i,o){if(!this.hn.has(o)){let d=o.lastSegment(),v=o.popLast();i.addOnCommittedListener(()=>{this.hn.add(o)});let _={collectionId:d,parent:In(v)};return bn(i).put(_)}return Pt.resolve()}getCollectionParents(i,o){let d=[],v=IDBKeyRange.bound([o,""],[o+"\0",""],!1,!0);return bn(i).U(v).next(_=>{for(let O of _){if(O.collectionId!==o)break;d.push(qn(O.parent))}return d})}addFieldIndex(i,o){let d=hs(i),v={indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};delete v.indexId;let _=d.add(v);if(o.indexState){let O=Pr(i);return _.next(X=>{O.put(Yi(X,this.uid,o.indexState.sequenceNumber,o.indexState.offset))})}return _.next()}deleteFieldIndex(i,o){let d=hs(i),v=Pr(i),_=Ur(i);return d.delete(o.indexId).next(()=>v.delete(IDBKeyRange.bound([o.indexId],[o.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([o.indexId],[o.indexId+1],!1,!0)))}deleteAllFieldIndexes(i){let o=hs(i),d=Ur(i),v=Pr(i);return o.j().next(()=>d.j()).next(()=>v.j())}createTargetIndexes(i,o){return Pt.forEach(this.Tn(o),d=>this.getIndexType(i,d).next(v=>{if(v===0||v===1){let _=new kt(d).cn();if(_!=null)return this.addFieldIndex(i,_)}}))}getDocumentsMatchingTarget(i,o){let d=Ur(i),v=!0,_=new Map;return Pt.forEach(this.Tn(o),O=>this.In(i,O).next(X=>{v&&(v=!!X),_.set(O,X)})).next(()=>{if(v){let O=Dt(),X=[];return Pt.forEach(_,(oe,Ge)=>{ce("IndexedDbIndexManager",`Using index id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map(Hi=>`${Hi.fieldPath}:${Hi.kind}`).join(",")} to execute ${qr(o)}`);let Tt=function(Hi,nr){let Ot=an(nr);if(Ot===void 0)return null;for(let Ft of Rn(Hi,Ot.fieldPath))switch(Ft.op){case"array-contains-any":return Ft.value.arrayValue.values||[];case"array-contains":return[Ft.value]}return null}(Ge,oe),ar=function(Hi,nr){let Ot=new Map;for(let Ft of Hr(nr))for(let Xt of Rn(Hi,Ft.fieldPath))switch(Xt.op){case"==":case"in":Ot.set(Ft.fieldPath.canonicalString(),Xt.value);break;case"not-in":case"!=":return Ot.set(Ft.fieldPath.canonicalString(),Xt.value),Array.from(Ot.values())}return null}(Ge,oe),ur=function(Hi,nr){let Ot=[],Ft=!0;for(let Xt of Hr(nr)){let hr=Xt.kind===0?mi(Hi,Xt.fieldPath,Hi.startAt):Vi(Hi,Xt.fieldPath,Hi.startAt);Ot.push(hr.value),Ft&&(Ft=hr.inclusive)}return new ma(Ot,Ft)}(Ge,oe),wr=function(Hi,nr){let Ot=[],Ft=!0;for(let Xt of Hr(nr)){let hr=Xt.kind===0?Vi(Hi,Xt.fieldPath,Hi.endAt):mi(Hi,Xt.fieldPath,Hi.endAt);Ot.push(hr.value),Ft&&(Ft=hr.inclusive)}return new ma(Ot,Ft)}(Ge,oe),vn=this.En(oe,Ge,ur),Hn=this.En(oe,Ge,wr),Jn=this.dn(oe,Ge,ar),Os=this.An(oe.indexId,Tt,vn,ur.inclusive,Hn,wr.inclusive,Jn);return Pt.forEach(Os,Hi=>d.G(Hi,o.limit).next(nr=>{nr.forEach(Ot=>{let Ft=Et.fromSegments(Ot.documentKey);O.has(Ft)||(O=O.add(Ft),X.push(Ft))})}))}).next(()=>X)}return Pt.resolve(null)})}Tn(i){let o=this.Pn.get(i);return o||(o=i.filters.length===0?[i]:function(d){if(d.getFilters().length===0)return[];let v=function _(O){if(O instanceof xs||O instanceof Rs||_e(),O instanceof xs)return O;if(O.filters.length===1)return _(O.filters[0]);let X=O.filters.map(Ge=>_(Ge)),oe=Rs.create(X,O.op);return sr(oe=Mr(oe))?oe:(oe instanceof Rs||_e(),Wl(oe)||_e(),oe.filters.length>1||_e(),oe.filters.reduce((Ge,Tt)=>vr(Ge,Tt)))}(function _(O){var X,oe;if(O instanceof xs||O instanceof Rs||_e(),O instanceof xs){if(O instanceof or){let Tt=((oe=(X=O.value.arrayValue)===null||X===void 0?void 0:X.values)===null||oe===void 0?void 0:oe.map(ar=>xs.create(O.field,"==",ar)))||[];return Rs.create(Tt,"or")}return O}let Ge=O.filters.map(Tt=>_(Tt));return Rs.create(Ge,O.op)}(d));return sr(v)||_e(),Nt(v)||Mt(v)?[v]:v.getFilters()}(Rs.create(i.filters,"and")).map(d=>Yr(i.path,i.collectionGroup,i.orderBy,d.getFilters(),i.limit,i.startAt,i.endAt)),this.Pn.set(i,o)),o}An(i,o,d,v,_,O,X){let oe=(o!=null?o.length:1)*Math.max(d.length,_.length),Ge=oe/(o!=null?o.length:1),Tt=[];for(let ar=0;ar<oe;++ar){let ur=o?this.Rn(o[ar/Ge]):Fn,wr=this.Vn(i,ur,d[ar%Ge],v),vn=this.mn(i,ur,_[ar%Ge],O),Hn=X.map(Jn=>this.Vn(i,ur,Jn,!0));Tt.push(...this.createRange(wr,vn,Hn))}return Tt}Vn(i,o,d,v){let _=new ne(i,Et.empty(),o,d);return v?_:_.en()}mn(i,o,d,v){let _=new ne(i,Et.empty(),o,d);return v?_.en():_}In(i,o){let d=new kt(o),v=o.collectionGroup!=null?o.collectionGroup:o.path.lastSegment();return this.getFieldIndexes(i,v).next(_=>{let O=null;for(let X of _)d.on(X)&&(!O||X.fields.length>O.fields.length)&&(O=X);return O})}getIndexType(i,o){let d=2,v=this.Tn(o);return Pt.forEach(v,_=>this.In(i,_).next(O=>{O?d!==0&&O.fields.length<function(X){let oe=new wi(Rt.comparator),Ge=!1;for(let Tt of X.filters)for(let ar of Tt.getFlattenedFilters())ar.field.isKeyField()||(ar.op==="array-contains"||ar.op==="array-contains-any"?Ge=!0:oe=oe.add(ar.field));for(let Tt of X.orderBy)Tt.field.isKeyField()||(oe=oe.add(Tt.field));return oe.size+(Ge?1:0)}(_)&&(d=1):d=0})).next(()=>o.limit!==null&&v.length>1&&d===2?1:d)}fn(i,o){let d=new L;for(let v of Hr(i)){let _=o.data.field(v.fieldPath);if(_==null)return null;let O=d.Xt(v.kind);Ro.Ft.Et(_,O)}return d.Ht()}Rn(i){let o=new L;return Ro.Ft.Et(i,o.Xt(0)),o.Ht()}gn(i,o){let d=new L;return Ro.Ft.Et(Qa(this.databaseId,o),d.Xt(function(v){let _=Hr(v);return _.length===0?0:_[_.length-1].kind}(i))),d.Ht()}dn(i,o,d){if(d===null)return[];let v=[];v.push(new L);let _=0;for(let O of Hr(i)){let X=d[_++];for(let oe of v)if(this.pn(o,O.fieldPath)&&ii(X))v=this.yn(v,O,X);else{let Ge=oe.Xt(O.kind);Ro.Ft.Et(X,Ge)}}return this.wn(v)}En(i,o,d){return this.dn(i,o,d.position)}wn(i){let o=[];for(let d=0;d<i.length;++d)o[d]=i[d].Ht();return o}yn(i,o,d){let v=[...i],_=[];for(let O of d.arrayValue.values||[])for(let X of v){let oe=new L;oe.seed(X.Ht()),Ro.Ft.Et(O,oe.Xt(o.kind)),_.push(oe)}return _}pn(i,o){return!!i.filters.find(d=>d instanceof xs&&d.field.isEqual(o)&&(d.op==="in"||d.op==="not-in"))}getFieldIndexes(i,o){let d=hs(i),v=Pr(i);return(o?d.U("collectionGroupIndex",IDBKeyRange.bound(o,o)):d.U()).next(_=>{let O=[];return Pt.forEach(_,X=>v.get([X.indexId,this.uid]).next(oe=>{O.push(function(Ge,Tt){let ar=Tt?new Or(Tt.sequenceNumber,new tn(Di(Tt.readTime),new Et(qn(Tt.documentKey)),Tt.largestBatchId)):Or.empty(),ur=Ge.fields.map(([wr,vn])=>new gn(Rt.fromServerFormat(wr),vn));return new rr(Ge.indexId,Ge.collectionGroup,ur,ar)}(X,oe))})).next(()=>O)})}getNextCollectionGroupToUpdate(i){return this.getFieldIndexes(i).next(o=>o.length===0?null:(o.sort((d,v)=>{let _=d.indexState.sequenceNumber-v.indexState.sequenceNumber;return _!==0?_:lt(d.collectionGroup,v.collectionGroup)}),o[0].collectionGroup))}updateCollectionGroup(i,o,d){let v=hs(i),_=Pr(i);return this.Sn(i).next(O=>v.U("collectionGroupIndex",IDBKeyRange.bound(o,o)).next(X=>Pt.forEach(X,oe=>_.put(Yi(oe.indexId,this.uid,O,d)))))}updateIndexEntries(i,o){let d=new Map;return Pt.forEach(o,(v,_)=>{let O=d.get(v.collectionGroup);return(O?Pt.resolve(O):this.getFieldIndexes(i,v.collectionGroup)).next(X=>(d.set(v.collectionGroup,X),Pt.forEach(X,oe=>this.bn(i,v,oe).next(Ge=>{let Tt=this.Dn(_,oe);return Ge.isEqual(Tt)?Pt.resolve():this.vn(i,_,oe,Ge,Tt)}))))})}Cn(i,o,d,v){return Ur(i).put({indexId:v.indexId,uid:this.uid,arrayValue:v.arrayValue,directionalValue:v.directionalValue,orderedDocumentKey:this.gn(d,o.key),documentKey:o.key.path.toArray()})}Fn(i,o,d,v){return Ur(i).delete([v.indexId,this.uid,v.arrayValue,v.directionalValue,this.gn(d,o.key),o.key.path.toArray()])}bn(i,o,d){let v=Ur(i),_=new wi(Pe);return v.J({index:"documentKeyIndex",range:IDBKeyRange.only([d.indexId,this.uid,this.gn(d,o)])},(O,X)=>{_=_.add(new ne(d.indexId,o,X.arrayValue,X.directionalValue))}).next(()=>_)}Dn(i,o){let d=new wi(Pe),v=this.fn(o,i);if(v==null)return d;let _=an(o);if(_!=null){let O=i.data.field(_.fieldPath);if(ii(O))for(let X of O.arrayValue.values||[])d=d.add(new ne(o.indexId,i.key,this.Rn(X),v))}else d=d.add(new ne(o.indexId,i.key,Fn,v));return d}vn(i,o,d,v,_){ce("IndexedDbIndexManager","Updating index entries for document '%s'",o.key);let O=[];return function(X,oe,Ge,Tt,ar){let ur=X.getIterator(),wr=oe.getIterator(),vn=Lr(ur),Hn=Lr(wr);for(;vn||Hn;){let Jn=!1,Os=!1;if(vn&&Hn){let Hi=Ge(vn,Hn);Hi<0?Os=!0:Hi>0&&(Jn=!0)}else vn!=null?Os=!0:Jn=!0;Jn?(Tt(Hn),Hn=Lr(wr)):Os?(ar(vn),vn=Lr(ur)):(vn=Lr(ur),Hn=Lr(wr))}}(v,_,Pe,X=>{O.push(this.Cn(i,o,d,X))},X=>{O.push(this.Fn(i,o,d,X))}),Pt.waitFor(O)}Sn(i){let o=1;return Pr(i).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(d,v,_)=>{_.done(),o=v.sequenceNumber+1}).next(()=>o)}createRange(i,o,d){d=d.sort((O,X)=>Pe(O,X)).filter((O,X,oe)=>!X||Pe(O,oe[X-1])!==0);let v=[];for(let O of(v.push(i),d)){let X=Pe(O,i),oe=Pe(O,o);if(X===0)v[0]=i.en();else if(X>0&&oe<0)v.push(O),v.push(O.en());else if(oe>0)break}v.push(o);let _=[];for(let O=0;O<v.length;O+=2){if(this.Mn(v[O],v[O+1]))return[];let X=[v[O].indexId,this.uid,v[O].arrayValue,v[O].directionalValue,Fn,[]],oe=[v[O+1].indexId,this.uid,v[O+1].arrayValue,v[O+1].directionalValue,Fn,[]];_.push(IDBKeyRange.bound(X,oe))}return _}Mn(i,o){return Pe(i,o)>0}getMinOffsetFromCollectionGroup(i,o){return this.getFieldIndexes(i,o).next(Si)}getMinOffset(i,o){return Pt.mapArray(this.Tn(o),d=>this.In(i,d).next(v=>v||_e())).next(Si)}}function bn(m){return Jr(m,"collectionParents")}function Ur(m){return Jr(m,"indexEntries")}function hs(m){return Jr(m,"indexConfiguration")}function Pr(m){return Jr(m,"indexState")}function Si(m){m.length!==0||_e();let i=m[0].indexState.offset,o=i.largestBatchId;for(let d=1;d<m.length;d++){let v=m[d].indexState.offset;0>rn(v,i)&&(i=v),o<v.largestBatchId&&(o=v.largestBatchId)}return new tn(i.readTime,i.documentKey,o)}let mn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ki{static withCacheSize(i){return new ki(i,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(i,o,d){this.cacheSizeCollectionThreshold=i,this.percentileToCollect=o,this.maximumSequenceNumbersToCollect=d}}function Es(m,i,o){let d=m.store("mutations"),v=m.store("documentMutations"),_=[],O=IDBKeyRange.only(o.batchId),X=0,oe=d.J({range:O},(ur,wr,vn)=>(X++,vn.delete()));_.push(oe.next(()=>{X===1||_e()}));let Ge=[];for(let ur of o.mutations){var Tt,ar;let wr=(Tt=ur.key.path,ar=o.batchId,[i,In(Tt),ar]);_.push(v.delete(wr)),Ge.push(ur.key)}return Pt.waitFor(_).next(()=>Ge)}function Fi(m){let i;if(!m)return 0;if(m.document)i=m.document;else if(m.unknownDocument)i=m.unknownDocument;else{if(!m.noDocument)throw _e();i=m.noDocument}return JSON.stringify(i).length}ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(41943040,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);class Ai{constructor(i,o,d,v){this.userId=i,this.serializer=o,this.indexManager=d,this.referenceDelegate=v,this.xn={}}static Pt(i,o,d,v){return i.uid!==""||_e(),new Ai(i.isAuthenticated()?i.uid:"",o,d,v)}checkEmpty(i){let o=!0,d=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ls(i).J({index:"userMutationsIndex",range:d},(v,_,O)=>{o=!1,O.done()}).next(()=>o)}addMutationBatch(i,o,d,v){let _=ca(i),O=Ls(i);return O.add({}).next(X=>{typeof X=="number"||_e();let oe=new Ws(X,o,d,v),Ge=function(ur,wr,vn){let Hn=vn.baseMutations.map(Os=>Gt(ur.ht,Os)),Jn=vn.mutations.map(Os=>Gt(ur.ht,Os));return{userId:wr,batchId:vn.batchId,localWriteTimeMs:vn.localWriteTime.toMillis(),baseMutations:Hn,mutations:Jn}}(this.serializer,this.userId,oe),Tt=[],ar=new wi((ur,wr)=>lt(ur.canonicalString(),wr.canonicalString()));for(let ur of v){let wr=[this.userId,In(ur.key.path),X];ar=ar.add(ur.key.path.popLast()),Tt.push(O.put(Ge)),Tt.push(_.put(wr,Ei))}return ar.forEach(ur=>{Tt.push(this.indexManager.addToCollectionParentIndex(i,ur))}),i.addOnCommittedListener(()=>{this.xn[X]=oe.keys()}),Pt.waitFor(Tt).next(()=>oe)})}lookupMutationBatch(i,o){return Ls(i).get(o).next(d=>d?(d.userId===this.userId||_e(),ri(this.serializer,d)):null)}On(i,o){return this.xn[o]?Pt.resolve(this.xn[o]):this.lookupMutationBatch(i,o).next(d=>{if(d){let v=d.keys();return this.xn[o]=v,v}return null})}getNextMutationBatchAfterBatchId(i,o){let d=o+1,v=IDBKeyRange.lowerBound([this.userId,d]),_=null;return Ls(i).J({index:"userMutationsIndex",range:v},(O,X,oe)=>{X.userId===this.userId&&(X.batchId>=d||_e(),_=ri(this.serializer,X)),oe.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(i){let o=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),d=-1;return Ls(i).J({index:"userMutationsIndex",range:o,reverse:!0},(v,_,O)=>{d=_.batchId,O.done()}).next(()=>d)}getAllMutationBatches(i){let o=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ls(i).U("userMutationsIndex",o).next(d=>d.map(v=>ri(this.serializer,v)))}getAllMutationBatchesAffectingDocumentKey(i,o){let d=[this.userId,In(o.path)],v=IDBKeyRange.lowerBound(d),_=[];return ca(i).J({range:v},(O,X,oe)=>{let[Ge,Tt,ar]=O,ur=qn(Tt);if(Ge===this.userId&&o.path.isEqual(ur))return Ls(i).get(ar).next(wr=>{if(!wr)throw _e();wr.userId===this.userId||_e(),_.push(ri(this.serializer,wr))});oe.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(i,o){let d=new wi(lt),v=[];return o.forEach(_=>{let O=[this.userId,In(_.path)],X=IDBKeyRange.lowerBound(O),oe=ca(i).J({range:X},(Ge,Tt,ar)=>{let[ur,wr,vn]=Ge,Hn=qn(wr);ur===this.userId&&_.path.isEqual(Hn)?d=d.add(vn):ar.done()});v.push(oe)}),Pt.waitFor(v).next(()=>this.Nn(i,d))}getAllMutationBatchesAffectingQuery(i,o){let d=o.path,v=d.length+1,_=[this.userId,In(d)],O=IDBKeyRange.lowerBound(_),X=new wi(lt);return ca(i).J({range:O},(oe,Ge,Tt)=>{let[ar,ur,wr]=oe,vn=qn(ur);ar===this.userId&&d.isPrefixOf(vn)?vn.length===v&&(X=X.add(wr)):Tt.done()}).next(()=>this.Nn(i,X))}Nn(i,o){let d=[],v=[];return o.forEach(_=>{v.push(Ls(i).get(_).next(O=>{if(O===null)throw _e();O.userId===this.userId||_e(),d.push(ri(this.serializer,O))}))}),Pt.waitFor(v).next(()=>d)}removeMutationBatch(i,o){return Es(i._e,this.userId,o).next(d=>(i.addOnCommittedListener(()=>{this.Ln(o.batchId)}),Pt.forEach(d,v=>this.referenceDelegate.markPotentiallyOrphaned(i,v))))}Ln(i){delete this.xn[i]}performConsistencyCheck(i){return this.checkEmpty(i).next(o=>{if(!o)return Pt.resolve();let d=IDBKeyRange.lowerBound([this.userId]),v=[];return ca(i).J({range:d},(_,O,X)=>{if(_[0]===this.userId){let oe=qn(_[1]);v.push(oe)}else X.done()}).next(()=>{v.length===0||_e()})})}containsKey(i,o){return Qs(i,this.userId,o)}Bn(i){return Zr(i).get(this.userId).next(o=>o||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Qs(m,i,o){let d=[i,In(o.path)],v=d[1],_=IDBKeyRange.lowerBound(d),O=!1;return ca(m).J({range:_,H:!0},(X,oe,Ge)=>{let[Tt,ar,ur]=X;Tt===i&&ar===v&&(O=!0),Ge.done()}).next(()=>O)}function Ls(m){return Jr(m,"mutations")}function ca(m){return Jr(m,"documentMutations")}function Zr(m){return Jr(m,"mutationQueues")}class _s{constructor(i){this.kn=i}next(){return this.kn+=2,this.kn}static qn(){return new _s(0)}static Qn(){return new _s(-1)}}class zs{constructor(i,o){this.referenceDelegate=i,this.serializer=o}allocateTargetId(i){return this.Kn(i).next(o=>{let d=new _s(o.highestTargetId);return o.highestTargetId=d.next(),this.$n(i,o).next(()=>o.highestTargetId)})}getLastRemoteSnapshotVersion(i){return this.Kn(i).next(o=>Ct.fromTimestamp(new bt(o.lastRemoteSnapshotVersion.seconds,o.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(i){return this.Kn(i).next(o=>o.highestListenSequenceNumber)}setTargetsMetadata(i,o,d){return this.Kn(i).next(v=>(v.highestListenSequenceNumber=o,d&&(v.lastRemoteSnapshotVersion=d.toTimestamp()),o>v.highestListenSequenceNumber&&(v.highestListenSequenceNumber=o),this.$n(i,v)))}addTargetData(i,o){return this.Un(i,o).next(()=>this.Kn(i).next(d=>(d.targetCount+=1,this.Wn(o,d),this.$n(i,d))))}updateTargetData(i,o){return this.Un(i,o)}removeTargetData(i,o){return this.removeMatchingKeysForTargetId(i,o.targetId).next(()=>go(i).delete(o.targetId)).next(()=>this.Kn(i)).next(d=>(d.targetCount>0||_e(),d.targetCount-=1,this.$n(i,d)))}removeTargets(i,o,d){let v=0,_=[];return go(i).J((O,X)=>{let oe=xn(X);oe.sequenceNumber<=o&&d.get(oe.targetId)===null&&(v++,_.push(this.removeTargetData(i,oe)))}).next(()=>Pt.waitFor(_)).next(()=>v)}forEachTarget(i,o){return go(i).J((d,v)=>{o(xn(v))})}Kn(i){return _r(i).get("targetGlobalKey").next(o=>(o!==null||_e(),o))}$n(i,o){return _r(i).put("targetGlobalKey",o)}Un(i,o){return go(i).put(Ti(this.serializer,o))}Wn(i,o){let d=!1;return i.targetId>o.highestTargetId&&(o.highestTargetId=i.targetId,d=!0),i.sequenceNumber>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=i.sequenceNumber,d=!0),d}getTargetCount(i){return this.Kn(i).next(o=>o.targetCount)}getTargetData(i,o){let d=qr(o),v=IDBKeyRange.bound([d,Number.NEGATIVE_INFINITY],[d,Number.POSITIVE_INFINITY]),_=null;return go(i).J({range:v,index:"queryTargetsIndex"},(O,X,oe)=>{let Ge=xn(X);ln(o,Ge.target)&&(_=Ge,oe.done())}).next(()=>_)}addMatchingKeys(i,o,d){let v=[],_=Nr(i);return o.forEach(O=>{let X=In(O.path);v.push(_.put({targetId:d,path:X})),v.push(this.referenceDelegate.addReference(i,d,O))}),Pt.waitFor(v)}removeMatchingKeys(i,o,d){let v=Nr(i);return Pt.forEach(o,_=>{let O=In(_.path);return Pt.waitFor([v.delete([d,O]),this.referenceDelegate.removeReference(i,d,_)])})}removeMatchingKeysForTargetId(i,o){let d=Nr(i),v=IDBKeyRange.bound([o],[o+1],!1,!0);return d.delete(v)}getMatchingKeysForTargetId(i,o){let d=IDBKeyRange.bound([o],[o+1],!1,!0),v=Nr(i),_=Dt();return v.J({range:d,H:!0},(O,X,oe)=>{let Ge=new Et(qn(O[1]));_=_.add(Ge)}).next(()=>_)}containsKey(i,o){let d=In(o.path),v=IDBKeyRange.bound([d],[d+"\0"],!1,!0),_=0;return Nr(i).J({index:"documentTargetsIndex",H:!0,range:v},([O,X],oe,Ge)=>{O!==0&&(_++,Ge.done())}).next(()=>_>0)}ut(i,o){return go(i).get(o).next(d=>d?xn(d):null)}}function go(m){return Jr(m,"targets")}function _r(m){return Jr(m,"targetGlobal")}function Nr(m){return Jr(m,"targetDocuments")}function Cn([m,i],[o,d]){let v=lt(m,o);return v===0?lt(i,d):v}class ks{constructor(i){this.Gn=i,this.buffer=new wi(Cn),this.zn=0}jn(){return++this.zn}Hn(i){let o=[i,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(o);else{let d=this.buffer.last();0>Cn(o,d)&&(this.buffer=this.buffer.delete(d).add(o))}}get maxValue(){return this.buffer.last()[0]}}class cl{constructor(i,o,d){this.garbageCollector=i,this.asyncQueue=o,this.localStore=d,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(i){ce("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(o){Ri(o)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):await On(o)}await this.Yn(3e5)})}}class ju{constructor(i,o){this.Zn=i,this.params=o}calculateTargetCount(i,o){return this.Zn.Xn(i).next(d=>Math.floor(o/100*d))}nthSequenceNumber(i,o){if(o===0)return Pt.resolve(En.oe);let d=new ks(o);return this.Zn.forEachTarget(i,v=>d.Hn(v.sequenceNumber)).next(()=>this.Zn.er(i,v=>d.Hn(v))).next(()=>d.maxValue)}removeTargets(i,o,d){return this.Zn.removeTargets(i,o,d)}removeOrphanedDocuments(i,o){return this.Zn.removeOrphanedDocuments(i,o)}collect(i,o){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),Pt.resolve(mn)):this.getCacheSize(i).next(d=>d<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${d} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mn):this.tr(i,o))}getCacheSize(i){return this.Zn.getCacheSize(i)}tr(i,o){let d,v,_,O,X,oe,Ge,Tt=Date.now();return this.calculateTargetCount(i,this.params.percentileToCollect).next(ar=>(ar>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ar}`),v=this.params.maximumSequenceNumbersToCollect):v=ar,O=Date.now(),this.nthSequenceNumber(i,v))).next(ar=>(d=ar,X=Date.now(),this.removeTargets(i,d,o))).next(ar=>(_=ar,oe=Date.now(),this.removeOrphanedDocuments(i,d))).next(ar=>(Ge=Date.now(),me()<=fe.in.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${O-Tt}ms
	Determined least recently used ${v} in `+(X-O)+`ms
	Removed ${_} targets in `+(oe-X)+`ms
	Removed ${ar} documents in `+(Ge-oe)+`ms
Total Duration: ${Ge-Tt}ms`),Pt.resolve({didRun:!0,sequenceNumbersCollected:v,targetsRemoved:_,documentsRemoved:ar})))}}class za{constructor(i,o){this.db=i,this.garbageCollector=new ju(this,o)}Xn(i){let o=this.nr(i);return this.db.getTargetCache().getTargetCount(i).next(d=>o.next(v=>d+v))}nr(i){let o=0;return this.er(i,d=>{o++}).next(()=>o)}forEachTarget(i,o){return this.db.getTargetCache().forEachTarget(i,o)}er(i,o){return this.rr(i,(d,v)=>o(v))}addReference(i,o,d){return bl(i,d)}removeReference(i,o,d){return bl(i,d)}removeTargets(i,o,d){return this.db.getTargetCache().removeTargets(i,o,d)}markPotentiallyOrphaned(i,o){return bl(i,o)}ir(i,o){let d;return d=!1,Zr(i).Y(v=>Qs(i,v,o).next(_=>(_&&(d=!0),Pt.resolve(!_)))).next(()=>d)}removeOrphanedDocuments(i,o){let d=this.db.getRemoteDocumentCache().newChangeBuffer(),v=[],_=0;return this.rr(i,(O,X)=>{if(X<=o){let oe=this.ir(i,O).next(Ge=>{if(!Ge)return _++,d.getEntry(i,O).next(()=>(d.removeEntry(O,Ct.min()),Nr(i).delete([0,In(O.path)])))});v.push(oe)}}).next(()=>Pt.waitFor(v)).next(()=>d.apply(i)).next(()=>_)}removeTarget(i,o){let d=o.withSequenceNumber(i.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(i,d)}updateLimboDocument(i,o){return bl(i,o)}rr(i,o){let d=Nr(i),v,_=En.oe;return d.J({index:"documentTargetsIndex"},([O,X],{path:oe,sequenceNumber:Ge})=>{O===0?(_!==En.oe&&o(new Et(qn(v)),_),_=Ge,v=oe):_=En.oe}).next(()=>{_!==En.oe&&o(new Et(qn(v)),_)})}getCacheSize(i){return this.db.getRemoteDocumentCache().getSize(i)}}function bl(m,i){var o;return Nr(m).put((o=m.currentSequenceNumber,{targetId:0,path:In(i.path),sequenceNumber:o}))}class ka{constructor(){this.changes=new os(i=>i.toString(),(i,o)=>i.isEqual(o)),this.changesApplied=!1}addEntry(i){this.assertNotApplied(),this.changes.set(i.key,i)}removeEntry(i,o){this.assertNotApplied(),this.changes.set(i,Sa.newInvalidDocument(i).setReadTime(o))}getEntry(i,o){this.assertNotApplied();let d=this.changes.get(o);return d!==void 0?Pt.resolve(d):this.getFromCache(i,o)}getEntries(i,o){return this.getAllFromCache(i,o)}apply(i){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(i)}assertNotApplied(){}}class yo{constructor(i){this.serializer=i}setIndexManager(i){this.indexManager=i}addEntry(i,o,d){return jo(i).put(d)}removeEntry(i,o,d){return jo(i).delete(function(v,_){let O=v.path.toArray();return[O.slice(0,O.length-2),O[O.length-2],ns(_),O[O.length-1]]}(o,d))}updateMetadata(i,o){return this.getMetadata(i).next(d=>(d.byteSize+=o,this.sr(i,d)))}getEntry(i,o){let d=Sa.newInvalidDocument(o);return jo(i).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bi(o))},(v,_)=>{d=this._r(o,_)}).next(()=>d)}ar(i,o){let d={size:0,document:Sa.newInvalidDocument(o)};return jo(i).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bi(o))},(v,_)=>{d={document:this._r(o,_),size:Fi(_)}}).next(()=>d)}getEntries(i,o){let d=hi;return this.ur(i,o,(v,_)=>{let O=this._r(v,_);d=d.insert(v,O)}).next(()=>d)}cr(i,o){let d=hi,v=new Qr(Et.comparator);return this.ur(i,o,(_,O)=>{let X=this._r(_,O);d=d.insert(_,X),v=v.insert(_,Fi(O))}).next(()=>({documents:d,lr:v}))}ur(i,o,d){if(o.isEmpty())return Pt.resolve();let v=new wi(bo);o.forEach(oe=>v=v.add(oe));let _=IDBKeyRange.bound(Bi(v.first()),Bi(v.last())),O=v.getIterator(),X=O.getNext();return jo(i).J({index:"documentKeyIndex",range:_},(oe,Ge,Tt)=>{let ar=Et.fromSegments([...Ge.prefixPath,Ge.collectionGroup,Ge.documentId]);for(;X&&0>bo(X,ar);)d(X,null),X=O.getNext();X&&X.isEqual(ar)&&(d(X,Ge),X=O.hasNext()?O.getNext():null),X?Tt.$(Bi(X)):Tt.done()}).next(()=>{for(;X;)d(X,null),X=O.hasNext()?O.getNext():null})}getDocumentsMatchingQuery(i,o,d,v,_){let O=o.path,X=[O.popLast().toArray(),O.lastSegment(),ns(d.readTime),d.documentKey.path.isEmpty()?"":d.documentKey.path.lastSegment()],oe=[O.popLast().toArray(),O.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jo(i).U(IDBKeyRange.bound(X,oe,!0)).next(Ge=>{_?.incrementDocumentReadCount(Ge.length);let Tt=hi;for(let ar of Ge){let ur=this._r(Et.fromSegments(ar.prefixPath.concat(ar.collectionGroup,ar.documentId)),ar);ur.isFoundDocument()&&($n(o,ur)||v.has(ur.key))&&(Tt=Tt.insert(ur.key,ur))}return Tt})}getAllFromCollectionGroup(i,o,d,v){let _=hi,O=Zc(o,d),X=Zc(o,tn.max());return jo(i).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(O,X,!0)},(oe,Ge,Tt)=>{let ar=this._r(Et.fromSegments(Ge.prefixPath.concat(Ge.collectionGroup,Ge.documentId)),Ge);(_=_.insert(ar.key,ar)).size===v&&Tt.done()}).next(()=>_)}newChangeBuffer(i){return new Rl(this,!!i&&i.trackRemovals)}getSize(i){return this.getMetadata(i).next(o=>o.byteSize)}getMetadata(i){return vu(i).get("remoteDocumentGlobalKey").next(o=>(o||_e(),o))}sr(i,o){return vu(i).put("remoteDocumentGlobalKey",o)}_r(i,o){if(o){let d=function(v,_){let O;if(_.document)O=ot(v.ht,_.document,!!_.hasCommittedMutations);else if(_.noDocument){let X=Et.fromSegments(_.noDocument.path),oe=Di(_.noDocument.readTime);O=Sa.newNoDocument(X,oe),_.hasCommittedMutations&&O.setHasCommittedMutations()}else{if(!_.unknownDocument)return _e();{let X=Et.fromSegments(_.unknownDocument.path),oe=Di(_.unknownDocument.version);O=Sa.newUnknownDocument(X,oe)}}return _.readTime&&O.setReadTime(function(X){let oe=new bt(X[0],X[1]);return Ct.fromTimestamp(oe)}(_.readTime)),O}(this.serializer,o);if(!(d.isNoDocument()&&d.version.isEqual(Ct.min())))return d}return Sa.newInvalidDocument(i)}}class Rl extends ka{constructor(i,o){super(),this.hr=i,this.trackRemovals=o,this.Pr=new os(d=>d.toString(),(d,v)=>d.isEqual(v))}applyChanges(i){let o=[],d=0,v=new wi((_,O)=>lt(_.canonicalString(),O.canonicalString()));return this.changes.forEach((_,O)=>{let X=this.Pr.get(_);if(o.push(this.hr.removeEntry(i,_,X.readTime)),O.isValidDocument()){let oe=Un(this.hr.serializer,O);v=v.add(_.path.popLast());let Ge=Fi(oe);d+=Ge-X.size,o.push(this.hr.addEntry(i,_,oe))}else if(d-=X.size,this.trackRemovals){let oe=Un(this.hr.serializer,O.convertToNoDocument(Ct.min()));o.push(this.hr.addEntry(i,_,oe))}}),v.forEach(_=>{o.push(this.hr.indexManager.addToCollectionParentIndex(i,_))}),o.push(this.hr.updateMetadata(i,d)),Pt.waitFor(o)}getFromCache(i,o){return this.hr.ar(i,o).next(d=>(this.Pr.set(o,{size:d.size,readTime:d.document.readTime}),d.document))}getAllFromCache(i,o){return this.hr.cr(i,o).next(({documents:d,lr:v})=>(v.forEach((_,O)=>{this.Pr.set(_,{size:O,readTime:d.get(_).readTime})}),d))}}function vu(m){return Jr(m,"remoteDocumentGlobal")}function jo(m){return Jr(m,"remoteDocumentsV14")}function Bi(m){let i=m.path.toArray();return[i.slice(0,i.length-2),i[i.length-2],i[i.length-1]]}function Zc(m,i){let o=i.documentKey.path.toArray();return[m,ns(i.readTime),o.slice(0,o.length-2),o.length>0?o[o.length-1]:""]}function bo(m,i){let o=m.path.toArray(),d=i.path.toArray(),v=0;for(let _=0;_<o.length-2&&_<d.length-2;++_)if(v=lt(o[_],d[_]))return v;return(v=lt(o.length,d.length))||(v=lt(o[o.length-2],d[d.length-2]))||lt(o[o.length-1],d[d.length-1])}class Xi{constructor(i,o){this.overlayedDocument=i,this.mutatedFields=o}}class gh{constructor(i,o,d,v){this.remoteDocumentCache=i,this.mutationQueue=o,this.documentOverlayCache=d,this.indexManager=v}getDocument(i,o){let d=null;return this.documentOverlayCache.getOverlay(i,o).next(v=>(d=v,this.remoteDocumentCache.getEntry(i,o))).next(v=>(d!==null&&ms(d.mutation,v,Br.empty(),bt.now()),v))}getDocuments(i,o){return this.remoteDocumentCache.getEntries(i,o).next(d=>this.getLocalViewOfDocuments(i,d,Dt()).next(()=>d))}getLocalViewOfDocuments(i,o,d=Dt()){let v=pe();return this.populateOverlays(i,v,o).next(()=>this.computeViews(i,o,v,d).next(_=>{let O=T();return _.forEach((X,oe)=>{O=O.insert(X,oe.overlayedDocument)}),O}))}getOverlayedDocuments(i,o){let d=pe();return this.populateOverlays(i,d,o).next(()=>this.computeViews(i,o,d,Dt()))}populateOverlays(i,o,d){let v=[];return d.forEach(_=>{o.has(_)||v.push(_)}),this.documentOverlayCache.getOverlays(i,v).next(_=>{_.forEach((O,X)=>{o.set(O,X)})})}computeViews(i,o,d,v){let _=hi,O=pe(),X=pe();return o.forEach((oe,Ge)=>{let Tt=d.get(Ge.key);v.has(Ge.key)&&(Tt===void 0||Tt.mutation instanceof Ya)?_=_.insert(Ge.key,Ge):Tt!==void 0?(O.set(Ge.key,Tt.mutation.getFieldMask()),ms(Tt.mutation,Ge,Tt.mutation.getFieldMask(),bt.now())):O.set(Ge.key,Br.empty())}),this.recalculateAndSaveOverlays(i,_).next(oe=>(oe.forEach((Ge,Tt)=>O.set(Ge,Tt)),o.forEach((Ge,Tt)=>{var ar;return X.set(Ge,new Xi(Tt,(ar=O.get(Ge))!==null&&ar!==void 0?ar:null))}),X))}recalculateAndSaveOverlays(i,o){let d=pe(),v=new Qr((O,X)=>O-X),_=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(i,o).next(O=>{for(let X of O)X.keys().forEach(oe=>{let Ge=o.get(oe);if(Ge===null)return;let Tt=d.get(oe)||Br.empty();Tt=X.applyToLocalView(Ge,Tt),d.set(oe,Tt);let ar=(v.get(X.batchId)||Dt()).add(oe);v=v.insert(X.batchId,ar)})}).next(()=>{let O=[],X=v.getReverseIterator();for(;X.hasNext();){let oe=X.getNext(),Ge=oe.key,Tt=oe.value,ar=pe();Tt.forEach(ur=>{if(!_.has(ur)){let wr=po(o.get(ur),d.get(ur));wr!==null&&ar.set(ur,wr),_=_.add(ur)}}),O.push(this.documentOverlayCache.saveOverlays(i,Ge,ar))}return Pt.waitFor(O)}).next(()=>d)}recalculateAndSaveOverlaysForDocumentKeys(i,o){return this.remoteDocumentCache.getEntries(i,o).next(d=>this.recalculateAndSaveOverlays(i,d))}getDocumentsMatchingQuery(i,o,d,v){return Et.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0?this.getDocumentsMatchingDocumentQuery(i,o.path):gi(o)?this.getDocumentsMatchingCollectionGroupQuery(i,o,d,v):this.getDocumentsMatchingCollectionQuery(i,o,d,v)}getNextDocuments(i,o,d,v){return this.remoteDocumentCache.getAllFromCollectionGroup(i,o,d,v).next(_=>{let O=v-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(i,o,d.largestBatchId,v-_.size):Pt.resolve(pe()),X=-1,oe=_;return O.next(Ge=>Pt.forEach(Ge,(Tt,ar)=>(X<ar.largestBatchId&&(X=ar.largestBatchId),_.get(Tt)?Pt.resolve():this.remoteDocumentCache.getEntry(i,Tt).next(ur=>{oe=oe.insert(Tt,ur)}))).next(()=>this.populateOverlays(i,Ge,_)).next(()=>this.computeViews(i,oe,Ge,Dt())).next(Tt=>({batchId:X,changes:G(Tt)})))})}getDocumentsMatchingDocumentQuery(i,o){return this.getDocument(i,new Et(o)).next(d=>{let v=T();return d.isFoundDocument()&&(v=v.insert(d.key,d)),v})}getDocumentsMatchingCollectionGroupQuery(i,o,d,v){let _=o.collectionGroup,O=T();return this.indexManager.getCollectionParents(i,_).next(X=>Pt.forEach(X,oe=>{let Ge=new Dn(oe.child(_),null,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt);return this.getDocumentsMatchingCollectionQuery(i,Ge,d,v).next(Tt=>{Tt.forEach((ar,ur)=>{O=O.insert(ar,ur)})})}).next(()=>O))}getDocumentsMatchingCollectionQuery(i,o,d,v){let _;return this.documentOverlayCache.getOverlaysForCollection(i,o.path,d.largestBatchId).next(O=>(_=O,this.remoteDocumentCache.getDocumentsMatchingQuery(i,o,d,_,v))).next(O=>{_.forEach((oe,Ge)=>{let Tt=Ge.getKey();O.get(Tt)===null&&(O=O.insert(Tt,Sa.newInvalidDocument(Tt)))});let X=T();return O.forEach((oe,Ge)=>{let Tt=_.get(oe);Tt!==void 0&&ms(Tt.mutation,Ge,Br.empty(),bt.now()),$n(o,Ge)&&(X=X.insert(oe,Ge))}),X})}}class La{constructor(i){this.serializer=i,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(i,o){return Pt.resolve(this.Tr.get(o))}saveBundleMetadata(i,o){return this.Tr.set(o.id,{id:o.id,version:o.version,createTime:eo(o.createTime)}),Pt.resolve()}getNamedQuery(i,o){return Pt.resolve(this.Ir.get(o))}saveNamedQuery(i,o){return this.Ir.set(o.name,{name:o.name,query:Js(o.bundledQuery),readTime:eo(o.readTime)}),Pt.resolve()}}class Fp{constructor(){this.overlays=new Qr(Et.comparator),this.Er=new Map}getOverlay(i,o){return Pt.resolve(this.overlays.get(o))}getOverlays(i,o){let d=pe();return Pt.forEach(o,v=>this.getOverlay(i,v).next(_=>{_!==null&&d.set(v,_)})).next(()=>d)}saveOverlays(i,o,d){return d.forEach((v,_)=>{this.Tt(i,o,_)}),Pt.resolve()}removeOverlaysForBatchId(i,o,d){let v=this.Er.get(d);return v!==void 0&&(v.forEach(_=>this.overlays=this.overlays.remove(_)),this.Er.delete(d)),Pt.resolve()}getOverlaysForCollection(i,o,d){let v=pe(),_=o.length+1,O=new Et(o.child("")),X=this.overlays.getIteratorFrom(O);for(;X.hasNext();){let oe=X.getNext().value,Ge=oe.getKey();if(!o.isPrefixOf(Ge.path))break;Ge.path.length===_&&oe.largestBatchId>d&&v.set(oe.getKey(),oe)}return Pt.resolve(v)}getOverlaysForCollectionGroup(i,o,d,v){let _=new Qr((Ge,Tt)=>Ge-Tt),O=this.overlays.getIterator();for(;O.hasNext();){let Ge=O.getNext().value;if(Ge.getKey().getCollectionGroup()===o&&Ge.largestBatchId>d){let Tt=_.get(Ge.largestBatchId);Tt===null&&(Tt=pe(),_=_.insert(Ge.largestBatchId,Tt)),Tt.set(Ge.getKey(),Ge)}}let X=pe(),oe=_.getIterator();for(;oe.hasNext()&&(oe.getNext().value.forEach((Ge,Tt)=>X.set(Ge,Tt)),!(X.size()>=v)););return Pt.resolve(X)}Tt(i,o,d){let v=this.overlays.get(d.key);if(v!==null){let O=this.Er.get(v.largestBatchId).delete(d.key);this.Er.set(v.largestBatchId,O)}this.overlays=this.overlays.insert(d.key,new Gn(o,d));let _=this.Er.get(o);_===void 0&&(_=Dt(),this.Er.set(o,_)),this.Er.set(o,_.add(d.key))}}class ao{constructor(){this.sessionToken=As.EMPTY_BYTE_STRING}getSessionToken(i){return Pt.resolve(this.sessionToken)}setSessionToken(i,o){return this.sessionToken=o,Pt.resolve()}}class Xn{constructor(){this.dr=new wi(Po.Ar),this.Rr=new wi(Po.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(i,o){let d=new Po(i,o);this.dr=this.dr.add(d),this.Rr=this.Rr.add(d)}mr(i,o){i.forEach(d=>this.addReference(d,o))}removeReference(i,o){this.gr(new Po(i,o))}pr(i,o){i.forEach(d=>this.removeReference(d,o))}yr(i){let o=new Et(new Qe([])),d=new Po(o,i),v=new Po(o,i+1),_=[];return this.Rr.forEachInRange([d,v],O=>{this.gr(O),_.push(O.key)}),_}wr(){this.dr.forEach(i=>this.gr(i))}gr(i){this.dr=this.dr.delete(i),this.Rr=this.Rr.delete(i)}Sr(i){let o=new Et(new Qe([])),d=new Po(o,i),v=new Po(o,i+1),_=Dt();return this.Rr.forEachInRange([d,v],O=>{_=_.add(O.key)}),_}containsKey(i){let o=new Po(i,0),d=this.dr.firstAfterOrEqual(o);return d!==null&&i.isEqual(d.key)}}class Po{constructor(i,o){this.key=i,this.br=o}static Ar(i,o){return Et.comparator(i.key,o.key)||lt(i.br,o.br)}static Vr(i,o){return lt(i.br,o.br)||Et.comparator(i.key,o.key)}}class wu{constructor(i,o){this.indexManager=i,this.referenceDelegate=o,this.mutationQueue=[],this.Dr=1,this.vr=new wi(Po.Ar)}checkEmpty(i){return Pt.resolve(this.mutationQueue.length===0)}addMutationBatch(i,o,d,v){let _=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let O=new Ws(_,o,d,v);for(let X of(this.mutationQueue.push(O),v))this.vr=this.vr.add(new Po(X.key,_)),this.indexManager.addToCollectionParentIndex(i,X.key.path.popLast());return Pt.resolve(O)}lookupMutationBatch(i,o){return Pt.resolve(this.Cr(o))}getNextMutationBatchAfterBatchId(i,o){let d=this.Fr(o+1),v=d<0?0:d;return Pt.resolve(this.mutationQueue.length>v?this.mutationQueue[v]:null)}getHighestUnacknowledgedBatchId(){return Pt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(i){return Pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(i,o){let d=new Po(o,0),v=new Po(o,Number.POSITIVE_INFINITY),_=[];return this.vr.forEachInRange([d,v],O=>{let X=this.Cr(O.br);_.push(X)}),Pt.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(i,o){let d=new wi(lt);return o.forEach(v=>{let _=new Po(v,0),O=new Po(v,Number.POSITIVE_INFINITY);this.vr.forEachInRange([_,O],X=>{d=d.add(X.br)})}),Pt.resolve(this.Mr(d))}getAllMutationBatchesAffectingQuery(i,o){let d=o.path,v=d.length+1,_=d;Et.isDocumentKey(_)||(_=_.child(""));let O=new Po(new Et(_),0),X=new wi(lt);return this.vr.forEachWhile(oe=>{let Ge=oe.key.path;return!!d.isPrefixOf(Ge)&&(Ge.length===v&&(X=X.add(oe.br)),!0)},O),Pt.resolve(this.Mr(X))}Mr(i){let o=[];return i.forEach(d=>{let v=this.Cr(d);v!==null&&o.push(v)}),o}removeMutationBatch(i,o){this.Or(o.batchId,"removed")===0||_e(),this.mutationQueue.shift();let d=this.vr;return Pt.forEach(o.mutations,v=>{let _=new Po(v.key,o.batchId);return d=d.delete(_),this.referenceDelegate.markPotentiallyOrphaned(i,v.key)}).next(()=>{this.vr=d})}Ln(i){}containsKey(i,o){let d=new Po(o,0),v=this.vr.firstAfterOrEqual(d);return Pt.resolve(o.isEqual(v&&v.key))}performConsistencyCheck(i){return this.mutationQueue.length,Pt.resolve()}Or(i,o){return this.Fr(i)}Fr(i){return this.mutationQueue.length===0?0:i-this.mutationQueue[0].batchId}Cr(i){let o=this.Fr(i);return o<0||o>=this.mutationQueue.length?null:this.mutationQueue[o]}}class eh{constructor(i){this.Nr=i,this.docs=new Qr(Et.comparator),this.size=0}setIndexManager(i){this.indexManager=i}addEntry(i,o){let d=o.key,v=this.docs.get(d),_=v?v.size:0,O=this.Nr(o);return this.docs=this.docs.insert(d,{document:o.mutableCopy(),size:O}),this.size+=O-_,this.indexManager.addToCollectionParentIndex(i,d.path.popLast())}removeEntry(i){let o=this.docs.get(i);o&&(this.docs=this.docs.remove(i),this.size-=o.size)}getEntry(i,o){let d=this.docs.get(o);return Pt.resolve(d?d.document.mutableCopy():Sa.newInvalidDocument(o))}getEntries(i,o){let d=hi;return o.forEach(v=>{let _=this.docs.get(v);d=d.insert(v,_?_.document.mutableCopy():Sa.newInvalidDocument(v))}),Pt.resolve(d)}getDocumentsMatchingQuery(i,o,d,v){let _=hi,O=o.path,X=new Et(O.child("")),oe=this.docs.getIteratorFrom(X);for(;oe.hasNext();){let{key:Ge,value:{document:Tt}}=oe.getNext();if(!O.isPrefixOf(Ge.path))break;Ge.path.length>O.length+1||0>=rn(Tn(Tt),d)||(v.has(Tt.key)||$n(o,Tt))&&(_=_.insert(Tt.key,Tt.mutableCopy()))}return Pt.resolve(_)}getAllFromCollectionGroup(i,o,d,v){_e()}Lr(i,o){return Pt.forEach(this.docs,d=>o(d))}newChangeBuffer(i){return new Fu(this)}getSize(i){return Pt.resolve(this.size)}}class Fu extends ka{constructor(i){super(),this.hr=i}applyChanges(i){let o=[];return this.changes.forEach((d,v)=>{v.isValidDocument()?o.push(this.hr.addEntry(i,v)):this.hr.removeEntry(d)}),Pt.waitFor(o)}getFromCache(i,o){return this.hr.getEntry(i,o)}getAllFromCache(i,o){return this.hr.getEntries(i,o)}}class bu{constructor(i){this.persistence=i,this.Br=new os(o=>qr(o),ln),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.kr=0,this.qr=new Xn,this.targetCount=0,this.Qr=_s.qn()}forEachTarget(i,o){return this.Br.forEach((d,v)=>o(v)),Pt.resolve()}getLastRemoteSnapshotVersion(i){return Pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(i){return Pt.resolve(this.kr)}allocateTargetId(i){return this.highestTargetId=this.Qr.next(),Pt.resolve(this.highestTargetId)}setTargetsMetadata(i,o,d){return d&&(this.lastRemoteSnapshotVersion=d),o>this.kr&&(this.kr=o),Pt.resolve()}Un(i){this.Br.set(i.target,i);let o=i.targetId;o>this.highestTargetId&&(this.Qr=new _s(o),this.highestTargetId=o),i.sequenceNumber>this.kr&&(this.kr=i.sequenceNumber)}addTargetData(i,o){return this.Un(o),this.targetCount+=1,Pt.resolve()}updateTargetData(i,o){return this.Un(o),Pt.resolve()}removeTargetData(i,o){return this.Br.delete(o.target),this.qr.yr(o.targetId),this.targetCount-=1,Pt.resolve()}removeTargets(i,o,d){let v=0,_=[];return this.Br.forEach((O,X)=>{X.sequenceNumber<=o&&d.get(X.targetId)===null&&(this.Br.delete(O),_.push(this.removeMatchingKeysForTargetId(i,X.targetId)),v++)}),Pt.waitFor(_).next(()=>v)}getTargetCount(i){return Pt.resolve(this.targetCount)}getTargetData(i,o){let d=this.Br.get(o)||null;return Pt.resolve(d)}addMatchingKeys(i,o,d){return this.qr.mr(o,d),Pt.resolve()}removeMatchingKeys(i,o,d){this.qr.pr(o,d);let v=this.persistence.referenceDelegate,_=[];return v&&o.forEach(O=>{_.push(v.markPotentiallyOrphaned(i,O))}),Pt.waitFor(_)}removeMatchingKeysForTargetId(i,o){return this.qr.yr(o),Pt.resolve()}getMatchingKeysForTargetId(i,o){let d=this.qr.Sr(o);return Pt.resolve(d)}containsKey(i,o){return Pt.resolve(this.qr.containsKey(o))}}class vd{constructor(i,o){this.Kr={},this.overlays={},this.$r=new En(0),this.Ur=!1,this.Ur=!0,this.Wr=new ao,this.referenceDelegate=i(this),this.Gr=new bu(this),this.indexManager=new fn,this.remoteDocumentCache=new eh(d=>this.referenceDelegate.zr(d)),this.serializer=new Wn(o),this.jr=new La(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(i){return this.indexManager}getDocumentOverlayCache(i){let o=this.overlays[i.toKey()];return o||(o=new Fp,this.overlays[i.toKey()]=o),o}getMutationQueue(i,o){let d=this.Kr[i.toKey()];return d||(d=new wu(o,this.referenceDelegate),this.Kr[i.toKey()]=d),d}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(i,o,d){ce("MemoryPersistence","Starting transaction:",i);let v=new mc(this.$r.next());return this.referenceDelegate.Hr(),d(v).next(_=>this.referenceDelegate.Jr(v).next(()=>_)).toPromise().then(_=>(v.raiseOnCommittedEvent(),_))}Yr(i,o){return Pt.or(Object.values(this.Kr).map(d=>()=>d.containsKey(i,o)))}}class mc extends cn{constructor(i){super(),this.currentSequenceNumber=i}}class Sl{constructor(i){this.persistence=i,this.Zr=new Xn,this.Xr=null}static ei(i){return new Sl(i)}get ti(){if(this.Xr)return this.Xr;throw _e()}addReference(i,o,d){return this.Zr.addReference(d,o),this.ti.delete(d.toString()),Pt.resolve()}removeReference(i,o,d){return this.Zr.removeReference(d,o),this.ti.add(d.toString()),Pt.resolve()}markPotentiallyOrphaned(i,o){return this.ti.add(o.toString()),Pt.resolve()}removeTarget(i,o){this.Zr.yr(o.targetId).forEach(v=>this.ti.add(v.toString()));let d=this.persistence.getTargetCache();return d.getMatchingKeysForTargetId(i,o.targetId).next(v=>{v.forEach(_=>this.ti.add(_.toString()))}).next(()=>d.removeTargetData(i,o))}Hr(){this.Xr=new Set}Jr(i){let o=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pt.forEach(this.ti,d=>{let v=Et.fromPath(d);return this.ni(i,v).next(_=>{_||o.removeEntry(v,Ct.min())})}).next(()=>(this.Xr=null,o.apply(i)))}updateLimboDocument(i,o){return this.ni(i,o).next(d=>{d?this.ti.delete(o.toString()):this.ti.add(o.toString())})}zr(i){return 0}ni(i,o){return Pt.or([()=>Pt.resolve(this.Zr.containsKey(o)),()=>this.persistence.getTargetCache().containsKey(i,o),()=>this.persistence.Yr(i,o)])}}class yh{constructor(i,o){this.persistence=i,this.ri=new os(d=>In(d.path),(d,v)=>d.isEqual(v)),this.garbageCollector=new ju(this,o)}static ei(i,o){return new yh(i,o)}Hr(){}Jr(i){return Pt.resolve()}forEachTarget(i,o){return this.persistence.getTargetCache().forEachTarget(i,o)}Xn(i){let o=this.nr(i);return this.persistence.getTargetCache().getTargetCount(i).next(d=>o.next(v=>d+v))}nr(i){let o=0;return this.er(i,d=>{o++}).next(()=>o)}er(i,o){return Pt.forEach(this.ri,(d,v)=>this.ir(i,d,v).next(_=>_?Pt.resolve():o(v)))}removeTargets(i,o,d){return this.persistence.getTargetCache().removeTargets(i,o,d)}removeOrphanedDocuments(i,o){let d=0,v=this.persistence.getRemoteDocumentCache(),_=v.newChangeBuffer();return v.Lr(i,O=>this.ir(i,O,o).next(X=>{X||(d++,_.removeEntry(O,Ct.min()))})).next(()=>_.apply(i)).next(()=>d)}markPotentiallyOrphaned(i,o){return this.ri.set(o,i.currentSequenceNumber),Pt.resolve()}removeTarget(i,o){let d=o.withSequenceNumber(i.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(i,d)}addReference(i,o,d){return this.ri.set(d,i.currentSequenceNumber),Pt.resolve()}removeReference(i,o,d){return this.ri.set(d,i.currentSequenceNumber),Pt.resolve()}updateLimboDocument(i,o){return this.ri.set(o,i.currentSequenceNumber),Pt.resolve()}zr(i){let o=i.key.toString().length;return i.isFoundDocument()&&(o+=function d(v){switch(ta(v)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let O=tc(v);return O?16+d(O):16;case 5:return 2*v.stringValue.length;case 6:return xl(v.bytesValue).approximateByteSize();case 7:return v.referenceValue.length;case 9:return(v.arrayValue.values||[]).reduce((oe,Ge)=>oe+d(Ge),0);case 10:case 11:var _;let X;return _=v.mapValue,X=0,Qn(_.fields,(oe,Ge)=>{X+=oe.length+d(Ge)}),X;default:throw _e()}}(i.data.value)),o}ir(i,o,d){return Pt.or([()=>this.persistence.Yr(i,o),()=>this.persistence.getTargetCache().containsKey(i,o),()=>{let v=this.ri.get(o);return Pt.resolve(v!==void 0&&v>d)}])}getCacheSize(i){return this.persistence.getRemoteDocumentCache().getSize(i)}}class wd{constructor(i){this.serializer=i}O(i,o,d,v){let _=new _n("createOrUpgrade",o);d<1&&v>=1&&(function(X){X.createObjectStore("owner")}(i),i.createObjectStore("mutationQueues",{keyPath:"userId"}),i.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ln,{unique:!0}),i.createObjectStore("documentMutations"),Dc(i),function(X){X.createObjectStore("remoteDocuments")}(i));let O=Pt.resolve();return d<3&&v>=3&&(d!==0&&(i.deleteObjectStore("targetDocuments"),i.deleteObjectStore("targets"),i.deleteObjectStore("targetGlobal"),Dc(i)),O=O.next(()=>function(X){let oe=X.store("targetGlobal"),Ge={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return oe.put("targetGlobalKey",Ge)}(_))),d<4&&v>=4&&(d!==0&&(O=O.next(()=>_.store("mutations").U().next(X=>{i.deleteObjectStore("mutations"),i.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ln,{unique:!0});let oe=_.store("mutations"),Ge=X.map(Tt=>oe.put(Tt));return Pt.waitFor(Ge)}))),O=O.next(()=>{(function(X){X.createObjectStore("clientMetadata",{keyPath:"clientId"})})(i)})),d<5&&v>=5&&(O=O.next(()=>this.ii(_))),d<6&&v>=6&&(O=O.next(()=>(function(X){X.createObjectStore("remoteDocumentGlobal")}(i),this.si(_)))),d<7&&v>=7&&(O=O.next(()=>this.oi(_))),d<8&&v>=8&&(O=O.next(()=>this._i(i,_))),d<9&&v>=9&&(O=O.next(()=>{i.objectStoreNames.contains("remoteDocumentChanges")&&i.deleteObjectStore("remoteDocumentChanges")})),d<10&&v>=10&&(O=O.next(()=>this.ai(_))),d<11&&v>=11&&(O=O.next(()=>{(function(X){X.createObjectStore("bundles",{keyPath:"bundleId"})})(i),function(X){X.createObjectStore("namedQueries",{keyPath:"name"})}(i)})),d<12&&v>=12&&(O=O.next(()=>{(function(X){let oe=X.createObjectStore("documentOverlays",{keyPath:Gi});oe.createIndex("collectionPathOverlayIndex",na,{unique:!1}),oe.createIndex("collectionGroupOverlayIndex",Bs,{unique:!1})})(i)})),d<13&&v>=13&&(O=O.next(()=>function(X){let oe=X.createObjectStore("remoteDocumentsV14",{keyPath:Ha});oe.createIndex("documentKeyIndex",fi),oe.createIndex("collectionGroupIndex",Us)}(i)).next(()=>this.ui(i,_)).next(()=>i.deleteObjectStore("remoteDocuments"))),d<14&&v>=14&&(O=O.next(()=>this.ci(i,_))),d<15&&v>=15&&(O=O.next(()=>{i.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),i.createObjectStore("indexState",{keyPath:Is}).createIndex("sequenceNumberIndex",wa,{unique:!1}),i.createObjectStore("indexEntries",{keyPath:ua}).createIndex("documentKeyIndex",ea,{unique:!1})})),d<16&&v>=16&&(O=O.next(()=>{o.objectStore("indexState").clear()}).next(()=>{o.objectStore("indexEntries").clear()})),d<17&&v>=17&&(O=O.next(()=>{(function(X){X.createObjectStore("globals",{keyPath:"name"})})(i)})),O}si(i){let o=0;return i.store("remoteDocuments").J((d,v)=>{o+=Fi(v)}).next(()=>{let d={byteSize:o};return i.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",d)})}ii(i){let o=i.store("mutationQueues"),d=i.store("mutations");return o.U().next(v=>Pt.forEach(v,_=>{let O=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return d.U("userMutationsIndex",O).next(X=>Pt.forEach(X,oe=>{oe.userId===_.userId||_e();let Ge=ri(this.serializer,oe);return Es(i,_.userId,Ge).next(()=>{})}))}))}oi(i){let o=i.store("targetDocuments"),d=i.store("remoteDocuments");return i.store("targetGlobal").get("targetGlobalKey").next(v=>{let _=[];return d.J((O,X)=>{let oe=new Qe(O),Ge=[0,In(oe)];_.push(o.get(Ge).next(Tt=>Tt?Pt.resolve():o.put({targetId:0,path:In(oe),sequenceNumber:v.highestListenSequenceNumber})))}).next(()=>Pt.waitFor(_))})}_i(i,o){i.createObjectStore("collectionParents",{keyPath:$s});let d=o.store("collectionParents"),v=new ti,_=O=>{if(v.add(O)){let X=O.lastSegment(),oe=O.popLast();return d.put({collectionId:X,parent:In(oe)})}};return o.store("remoteDocuments").J({H:!0},(O,X)=>_(new Qe(O).popLast())).next(()=>o.store("documentMutations").J({H:!0},([O,X,oe],Ge)=>_(qn(X).popLast())))}ai(i){let o=i.store("targets");return o.J((d,v)=>{let _=xn(v),O=Ti(this.serializer,_);return o.put(O)})}ui(i,o){let d=o.store("remoteDocuments"),v=[];return d.J((_,O)=>{let X=o.store("remoteDocumentsV14"),oe=(O.document?new Et(Qe.fromString(O.document.name).popFirst(5)):O.noDocument?Et.fromSegments(O.noDocument.path):O.unknownDocument?Et.fromSegments(O.unknownDocument.path):_e()).path.toArray(),Ge={prefixPath:oe.slice(0,oe.length-2),collectionGroup:oe[oe.length-2],documentId:oe[oe.length-1],readTime:O.readTime||[0,0],unknownDocument:O.unknownDocument,noDocument:O.noDocument,document:O.document,hasCommittedMutations:!!O.hasCommittedMutations};v.push(X.put(Ge))}).next(()=>Pt.waitFor(v))}ci(i,o){let d=o.store("mutations"),v=new yo(this.serializer),_=new vd(Sl.ei,this.serializer.ht);return d.U().next(O=>{let X=new Map;return O.forEach(oe=>{var Ge;let Tt=(Ge=X.get(oe.userId))!==null&&Ge!==void 0?Ge:Dt();ri(this.serializer,oe).keys().forEach(ar=>Tt=Tt.add(ar)),X.set(oe.userId,Tt)}),Pt.forEach(X,(oe,Ge)=>{let Tt=new F(Ge),ar=aa.Pt(this.serializer,Tt),ur=_.getIndexManager(Tt);return new gh(v,Ai.Pt(Tt,this.serializer,ur,_.referenceDelegate),ar,ur).recalculateAndSaveOverlaysForDocumentKeys(new Ut(o,En.oe),oe).next()})})}}function Dc(m){m.createObjectStore("targetDocuments",{keyPath:ui}).createIndex("documentTargetsIndex",Ki,{unique:!0}),m.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ds,{unique:!0}),m.createObjectStore("targetGlobal")}let Ao="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gr{constructor(i,o,d,v,_,O,X,oe,Ge,Tt,ar=17){if(this.allowTabSynchronization=i,this.persistenceKey=o,this.clientId=d,this.li=_,this.window=O,this.document=X,this.hi=Ge,this.Pi=Tt,this.Ti=ar,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=ur=>Promise.resolve(),!gr.p())throw new pt(Fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new za(this,v),this.Vi=o+"main",this.serializer=new Wn(oe),this.mi=new si(this.Vi,this.Ti,new wd(this.serializer)),this.Wr=new Qo,this.Gr=new zs(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new yo(this.serializer),this.jr=new Ms,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,Tt===!1&&Ke("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pt(Fe.FAILED_PRECONDITION,Ao);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",i=>this.Gr.getHighestSequenceNumber(i))}).then(i=>{this.$r=new En(i,this.hi)}).then(()=>{this.Ur=!0}).catch(i=>(this.mi&&this.mi.close(),Promise.reject(i)))}Si(i){return this.Ri=async o=>{if(this.started)return i(o)},i(this.isPrimary)}setDatabaseDeletedListener(i){this.mi.L(async o=>{o.newVersion===null&&await i()})}setNetworkEnabled(i){this.networkEnabled!==i&&(this.networkEnabled=i,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",i=>Ql(i).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(i).next(o=>{o||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(i)).next(o=>this.isPrimary&&!o?this.vi(i).next(()=>!1):!!o&&this.Ci(i).next(()=>!0))).catch(i=>{if(Ri(i))return ce("IndexedDbPersistence","Failed to extend owner lease: ",i),this.isPrimary;if(!this.allowTabSynchronization)throw i;return ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",i),!1}).then(i=>{this.isPrimary!==i&&this.li.enqueueRetryable(()=>this.Ri(i)),this.isPrimary=i})}bi(i){return Vu(i).get("owner").next(o=>Pt.resolve(this.Fi(o)))}Mi(i){return Ql(i).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();let i=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{let d=Jr(o,"clientMetadata");return d.U().next(v=>{let _=this.Ni(v,18e5),O=v.filter(X=>_.indexOf(X)===-1);return Pt.forEach(O,X=>d.delete(X.clientId)).next(()=>O)})}).catch(()=>[]);if(this.fi)for(let o of i)this.fi.removeItem(this.Li(o.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(i){return!!i&&i.ownerId===this.clientId}Di(i){return this.Pi?Pt.resolve(!0):Vu(i).get("owner").next(o=>{if(o!==null&&this.Oi(o.leaseTimestampMs,5e3)&&!this.Bi(o.ownerId)){if(this.Fi(o)&&this.networkEnabled)return!0;if(!this.Fi(o)){if(!o.allowTabSynchronization)throw new pt(Fe.FAILED_PRECONDITION,Ao);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ql(i).U().next(d=>this.Ni(d,5e3).find(v=>{if(this.clientId!==v.clientId){let _=!this.networkEnabled&&v.networkEnabled,O=!this.inForeground&&v.inForeground,X=this.networkEnabled===v.networkEnabled;if(_||O&&X)return!0}return!1})===void 0)}).next(o=>(this.isPrimary!==o&&ce("IndexedDbPersistence",`Client ${o?"is":"is not"} eligible for a primary lease.`),o))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],i=>{let o=new Ut(i,En.oe);return this.vi(o).next(()=>this.Mi(o))}),this.mi.close(),this.Ki()}Ni(i,o){return i.filter(d=>this.Oi(d.updateTimeMs,o)&&!this.Bi(d.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",i=>Ql(i).U().next(o=>this.Ni(o,18e5).map(d=>d.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(i,o){return Ai.Pt(i,this.serializer,o,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(i){return new yn(i,this.serializer.ht.databaseId)}getDocumentOverlayCache(i){return aa.Pt(this.serializer,i)}getBundleCache(){return this.jr}runTransaction(i,o,d){var v;let _;ce("IndexedDbPersistence","Starting transaction:",i);let O=(v=this.Ti)===17?$t:v===16||v===15?At:v===14||v===13?dt:v===12?Te:v===11?wo:void _e();return this.mi.runTransaction(i,o==="readonly"?"readonly":"readwrite",O,X=>(_=new Ut(X,this.$r?this.$r.next():En.oe),o==="readwrite-primary"?this.bi(_).next(oe=>!!oe||this.Di(_)).next(oe=>{if(!oe)throw Ke(`Failed to obtain primary lease for action '${i}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new pt(Fe.FAILED_PRECONDITION,on);return d(_)}).next(oe=>this.Ci(_).next(()=>oe)):this.Ui(_).next(()=>d(_)))).then(X=>(_.raiseOnCommittedEvent(),X))}Ui(i){return Vu(i).get("owner").next(o=>{if(o!==null&&this.Oi(o.leaseTimestampMs,5e3)&&!this.Bi(o.ownerId)&&!this.Fi(o)&&!(this.Pi||this.allowTabSynchronization&&o.allowTabSynchronization))throw new pt(Fe.FAILED_PRECONDITION,Ao)})}Ci(i){let o={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vu(i).put("owner",o)}static p(){return si.p()}vi(i){let o=Vu(i);return o.get("owner").next(d=>this.Fi(d)?(ce("IndexedDbPersistence","Releasing primary lease."),o.delete("owner")):Pt.resolve())}Oi(i,o){let d=Date.now();return!(i<d-o)&&(!(i>d)||(Ke(`Detected an update time that is in the future: ${i} > ${d}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ei=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground=this.document.visibilityState==="visible")}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var i;typeof((i=this.window)===null||i===void 0?void 0:i.addEventListener)=="function"&&(this.Ii=()=>{this.ki();let o=/(?:Version|Mobile)\/1[456]/;(0,Se.G6)()&&(navigator.appVersion.match(o)||navigator.userAgent.match(o))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(i){var o;try{let d=((o=this.fi)===null||o===void 0?void 0:o.getItem(this.Li(i)))!==null;return ce("IndexedDbPersistence",`Client '${i}' ${d?"is":"is not"} zombied in LocalStorage`),d}catch(d){return Ke("IndexedDbPersistence","Failed to get zombied client id.",d),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(i){Ke("Failed to set zombie client id.",i)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch{}}Li(i){return`firestore_zombie_${this.persistenceKey}_${i}`}}function Vu(m){return Jr(m,"owner")}function Ql(m){return Jr(m,"clientMetadata")}function Uh(m,i){let o=m.projectId;return m.isDefaultDatabase||(o+="."+m.database),"firestore/"+i+"/"+o+"/"}class bd{constructor(i,o,d,v){this.targetId=i,this.fromCache=o,this.Wi=d,this.Gi=v}static zi(i,o){let d=Dt(),v=Dt();for(let _ of o.docChanges)switch(_.type){case 0:d=d.add(_.doc.key);break;case 1:v=v.add(_.doc.key)}return new bd(i,o.fromCache,d,v)}}class Uu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(i){this._documentReadCount+=i}}class Su{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=(0,Se.G6)()?8:zi((0,Se.z$)())>0?6:4}initialize(i,o){this.Zi=i,this.indexManager=o,this.ji=!0}getDocumentsMatchingQuery(i,o,d,v){let _={result:null};return this.Xi(i,o).next(O=>{_.result=O}).next(()=>{if(!_.result)return this.es(i,o,v,d).next(O=>{_.result=O})}).next(()=>{if(_.result)return;let O=new Uu;return this.ts(i,o,O).next(X=>{if(_.result=X,this.Hi)return this.ns(i,o,O,X.size)})}).next(()=>_.result)}ns(i,o,d,v){return d.documentReadCount<this.Ji?(me()<=fe.in.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Pi(o),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Pt.resolve()):(me()<=fe.in.DEBUG&&ce("QueryEngine","Query:",Pi(o),"scans",d.documentReadCount,"local documents and returns",v,"documents as results."),d.documentReadCount>this.Yi*v?(me()<=fe.in.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Pi(o),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(i,Zt(o))):Pt.resolve())}Xi(i,o){if(Fs(o))return Pt.resolve(null);let d=Zt(o);return this.indexManager.getIndexType(i,d).next(v=>v===0?null:(o.limit!==null&&v===1&&(d=Zt(o=yi(o,null,"F"))),this.indexManager.getDocumentsMatchingTarget(i,d).next(_=>{let O=Dt(..._);return this.Zi.getDocuments(i,O).next(X=>this.indexManager.getMinOffset(i,d).next(oe=>{let Ge=this.rs(o,X);return this.ss(o,Ge,O,oe.readTime)?this.Xi(i,yi(o,null,"F")):this.os(i,Ge,o,oe)}))})))}es(i,o,d,v){return Fs(o)||v.isEqual(Ct.min())?Pt.resolve(null):this.Zi.getDocuments(i,d).next(_=>{let O=this.rs(o,_);return this.ss(o,O,d,v)?Pt.resolve(null):(me()<=fe.in.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",v.toString(),Pi(o)),this.os(i,O,o,wn(v,-1)).next(X=>X))})}rs(i,o){let d=new wi(bs(i));return o.forEach((v,_)=>{$n(i,_)&&(d=d.add(_))}),d}ss(i,o,d,v){if(i.limit===null)return!1;if(d.size!==o.size)return!0;let _=i.limitType==="F"?o.last():o.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(v)>0)}ts(i,o,d){return me()<=fe.in.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Pi(o)),this.Zi.getDocumentsMatchingQuery(i,o,tn.min(),d)}os(i,o,d,v){return this.Zi.getDocumentsMatchingQuery(i,d,v).next(_=>(o.forEach(O=>{_=_.insert(O.key,O)}),_))}}class Sd{constructor(i,o,d,v){this.persistence=i,this._s=o,this.serializer=v,this.us=new Qr(lt),this.cs=new os(_=>qr(_),ln),this.ls=new Map,this.hs=i.getRemoteDocumentCache(),this.Gr=i.getTargetCache(),this.jr=i.getBundleCache(),this.Ps(d)}Ps(i){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(i),this.indexManager=this.persistence.getIndexManager(i),this.mutationQueue=this.persistence.getMutationQueue(i,this.indexManager),this.localDocuments=new gh(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(i){return this.persistence.runTransaction("Collect garbage","readwrite-primary",o=>i.collect(o,this.us))}}async function $u(m,i){return await m.persistence.runTransaction("Handle user change","readonly",o=>{let d;return m.mutationQueue.getAllMutationBatches(o).next(v=>(d=v,m.Ps(i),m.mutationQueue.getAllMutationBatches(o))).next(v=>{let _=[],O=[],X=Dt();for(let oe of d)for(let Ge of(_.push(oe.batchId),oe.mutations))X=X.add(Ge.key);for(let oe of v)for(let Ge of(O.push(oe.batchId),oe.mutations))X=X.add(Ge.key);return m.localDocuments.getDocuments(o,X).next(oe=>({Ts:oe,removedBatchIds:_,addedBatchIds:O}))})})}function gc(m){return m.persistence.runTransaction("Get last remote snapshot version","readonly",i=>m.Gr.getLastRemoteSnapshotVersion(i))}function vh(m,i,o){let d=Dt(),v=Dt();return o.forEach(_=>d=d.add(_)),i.getEntries(m,d).next(_=>{let O=hi;return o.forEach((X,oe)=>{let Ge=_.get(X);oe.isFoundDocument()!==Ge.isFoundDocument()&&(v=v.add(X)),oe.isNoDocument()&&oe.version.isEqual(Ct.min())?(i.removeEntry(X,oe.readTime),O=O.insert(X,oe)):!Ge.isValidDocument()||oe.version.compareTo(Ge.version)>0||oe.version.compareTo(Ge.version)===0&&Ge.hasPendingWrites?(i.addEntry(oe),O=O.insert(X,oe)):ce("LocalStore","Ignoring outdated watch update for ",X,". Current version:",Ge.version," Watch version:",oe.version)}),{Is:O,Es:v}})}function Mc(m,i){return m.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return m.Gr.getTargetData(o,i).next(v=>v?(d=v,Pt.resolve(d)):m.Gr.allocateTargetId(o).next(_=>(d=new dn(i,_,"TargetPurposeListen",o.currentSequenceNumber),m.Gr.addTargetData(o,d).next(()=>d))))}).then(o=>{let d=m.us.get(o.targetId);return(d===null||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(m.us=m.us.insert(o.targetId,o),m.cs.set(i,o.targetId)),o})}async function Ed(m,i,o){let d=m.us.get(i);try{o||await m.persistence.runTransaction("Release target",o?"readwrite":"readwrite-primary",v=>m.persistence.referenceDelegate.removeTarget(v,d))}catch(v){if(!Ri(v))throw v;ce("LocalStore",`Failed to update sequence numbers for target ${i}: ${v}`)}m.us=m.us.remove(i),m.cs.delete(d.target)}function oo(m,i,o){let d=Ct.min(),v=Dt();return m.persistence.runTransaction("Execute query","readwrite",_=>function(O,X,oe){let Ge=O.cs.get(oe);return Ge!==void 0?Pt.resolve(O.us.get(Ge)):O.Gr.getTargetData(X,oe)}(m,_,Zt(i)).next(O=>{if(O)return d=O.lastLimboFreeSnapshotVersion,m.Gr.getMatchingKeysForTargetId(_,O.targetId).next(X=>{v=X})}).next(()=>m._s.getDocumentsMatchingQuery(_,i,o?d:Ct.min(),o?v:Dt())).next(O=>(Qf(m,ws(i),O),{documents:O,ds:v})))}function Vp(m,i){let o=m.Gr,d=m.us.get(i);return d?Promise.resolve(d.target):m.persistence.runTransaction("Get target data","readonly",v=>o.ut(v,i).next(_=>_?_.target:null))}function th(m,i){let o=m.ls.get(i)||Ct.min();return m.persistence.runTransaction("Get new document changes","readonly",d=>m.hs.getAllFromCollectionGroup(d,i,wn(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(Qf(m,i,d),d))}function Qf(m,i,o){let d=m.ls.get(i)||Ct.min();o.forEach((v,_)=>{_.readTime.compareTo(d)>0&&(d=_.readTime)}),m.ls.set(i,d)}function Fo(m,i){return`firestore_clients_${m}_${i}`}function su(m,i,o){let d=`firestore_mutations_${m}_${o}`;return i.isAuthenticated()&&(d+=`_${i.uid}`),d}function Pl(m,i){return`firestore_targets_${m}_${i}`}class Eu{constructor(i,o,d,v){this.user=i,this.batchId=o,this.state=d,this.error=v}static fs(i,o,d){let v=JSON.parse(d),_,O=typeof v=="object"&&["pending","acknowledged","rejected"].indexOf(v.state)!==-1&&(v.error===void 0||typeof v.error=="object");return O&&v.error&&(O=typeof v.error.message=="string"&&typeof v.error.code=="string")&&(_=new pt(v.error.code,v.error.message)),O?new Eu(i,o,v.state,_):(Ke("SharedClientState",`Failed to parse mutation state for ID '${o}': ${d}`),null)}gs(){let i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)}}class Lc{constructor(i,o,d){this.targetId=i,this.state=o,this.error=d}static fs(i,o){let d=JSON.parse(o),v,_=typeof d=="object"&&["not-current","current","rejected"].indexOf(d.state)!==-1&&(d.error===void 0||typeof d.error=="object");return _&&d.error&&(_=typeof d.error.message=="string"&&typeof d.error.code=="string")&&(v=new pt(d.error.code,d.error.message)),_?new Lc(i,d.state,v):(Ke("SharedClientState",`Failed to parse target state for ID '${i}': ${o}`),null)}gs(){let i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)}}class jc{constructor(i,o){this.clientId=i,this.activeTargetIds=o}static fs(i,o){let d=JSON.parse(o),v=typeof d=="object"&&d.activeTargetIds instanceof Array,_=pr;for(let O=0;v&&O<d.activeTargetIds.length;++O)v=pn(d.activeTargetIds[O]),_=_.add(d.activeTargetIds[O]);return v?new jc(i,_):(Ke("SharedClientState",`Failed to parse client data for instance '${i}': ${o}`),null)}}class wh{constructor(i,o){this.clientId=i,this.onlineState=o}static fs(i){let o=JSON.parse(i);return typeof o=="object"&&["Unknown","Online","Offline"].indexOf(o.onlineState)!==-1&&typeof o.clientId=="string"?new wh(o.clientId,o.onlineState):(Ke("SharedClientState",`Failed to parse online state: ${i}`),null)}}class bh{constructor(){this.activeTargetIds=pr}ps(i){this.activeTargetIds=this.activeTargetIds.add(i)}ys(i){this.activeTargetIds=this.activeTargetIds.delete(i)}gs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class Up{constructor(i,o,d,v,_){var O,X,oe;this.window=i,this.li=o,this.persistenceKey=d,this.ws=v,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new Qr(lt),this.started=!1,this.vs=[];let Ge=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.Cs=Fo(this.persistenceKey,this.ws),this.Fs=(O=this.persistenceKey,`firestore_sequence_number_${O}`),this.Ds=this.Ds.insert(this.ws,new bh),this.Ms=RegExp(`^firestore_clients_${Ge}_([^_]*)$`),this.xs=RegExp(`^firestore_mutations_${Ge}_(\\d+)(?:_(.*))?$`),this.Os=RegExp(`^firestore_targets_${Ge}_(\\d+)$`),this.Ns=(X=this.persistenceKey,`firestore_online_state_${X}`),this.Ls=(oe=this.persistenceKey,`firestore_bundle_loaded_v2_${oe}`),this.window.addEventListener("storage",this.Ss)}static p(i){return!(!i||!i.localStorage)}async start(){for(let o of await this.syncEngine.$i()){if(o===this.ws)continue;let d=this.getItem(Fo(this.persistenceKey,o));if(d){let v=jc.fs(o,d);v&&(this.Ds=this.Ds.insert(v.clientId,v))}}this.Bs();let i=this.storage.getItem(this.Ns);if(i){let o=this.ks(i);o&&this.qs(o)}for(let o of this.vs)this.bs(o);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(i){this.setItem(this.Fs,JSON.stringify(i))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(i){let o=!1;return this.Ds.forEach((d,v)=>{v.activeTargetIds.has(i)&&(o=!0)}),o}addPendingMutation(i){this.Ks(i,"pending")}updateMutationState(i,o,d){this.Ks(i,o,d),this.$s(i)}addLocalQueryTarget(i,o=!0){let d="not-current";if(this.isActiveQueryTarget(i)){let v=this.storage.getItem(Pl(this.persistenceKey,i));if(v){let _=Lc.fs(i,v);_&&(d=_.state)}}return o&&this.Us.ps(i),this.Bs(),d}removeLocalQueryTarget(i){this.Us.ys(i),this.Bs()}isLocalQueryTarget(i){return this.Us.activeTargetIds.has(i)}clearQueryState(i){this.removeItem(Pl(this.persistenceKey,i))}updateQueryState(i,o,d){this.Ws(i,o,d)}handleUserChange(i,o,d){o.forEach(v=>{this.$s(v)}),this.currentUser=i,d.forEach(v=>{this.addPendingMutation(v)})}setOnlineState(i){this.Gs(i)}notifyBundleLoaded(i){this.zs(i)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(i){let o=this.storage.getItem(i);return ce("SharedClientState","READ",i,o),o}setItem(i,o){ce("SharedClientState","SET",i,o),this.storage.setItem(i,o)}removeItem(i){ce("SharedClientState","REMOVE",i),this.storage.removeItem(i)}bs(i){if(i.storageArea===this.storage){if(ce("SharedClientState","EVENT",i.key,i.newValue),i.key===this.Cs)return void Ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(i.key!==null){if(this.Ms.test(i.key)){if(i.newValue==null){let o=this.js(i.key);return this.Hs(o,null)}{let o=this.Js(i.key,i.newValue);if(o)return this.Hs(o.clientId,o)}}else if(this.xs.test(i.key)){if(i.newValue!==null){let o=this.Ys(i.key,i.newValue);if(o)return this.Zs(o)}}else if(this.Os.test(i.key)){if(i.newValue!==null){let o=this.Xs(i.key,i.newValue);if(o)return this.eo(o)}}else if(i.key===this.Ns){if(i.newValue!==null){let o=this.ks(i.newValue);if(o)return this.qs(o)}}else if(i.key===this.Fs){let o=function(d){let v=En.oe;if(d!=null)try{let _=JSON.parse(d);typeof _=="number"||_e(),v=_}catch(_){Ke("SharedClientState","Failed to read sequence number from WebStorage",_)}return v}(i.newValue);o!==En.oe&&this.sequenceNumberHandler(o)}else if(i.key===this.Ls){let o=this.no(i.newValue);await Promise.all(o.map(d=>this.syncEngine.ro(d)))}}}else this.vs.push(i)})}}get Us(){return this.Ds.get(this.ws)}Bs(){this.setItem(this.Cs,this.Us.gs())}Ks(i,o,d){let v=new Eu(this.currentUser,i,o,d),_=su(this.persistenceKey,this.currentUser,i);this.setItem(_,v.gs())}$s(i){let o=su(this.persistenceKey,this.currentUser,i);this.removeItem(o)}Gs(i){let o={clientId:this.ws,onlineState:i};this.storage.setItem(this.Ns,JSON.stringify(o))}Ws(i,o,d){let v=Pl(this.persistenceKey,i),_=new Lc(i,o,d);this.setItem(v,_.gs())}zs(i){let o=JSON.stringify(Array.from(i));this.setItem(this.Ls,o)}js(i){let o=this.Ms.exec(i);return o?o[1]:null}Js(i,o){let d=this.js(i);return jc.fs(d,o)}Ys(i,o){let d=this.xs.exec(i),v=Number(d[1]),_=d[2]!==void 0?d[2]:null;return Eu.fs(new F(_),v,o)}Xs(i,o){let d=Number(this.Os.exec(i)[1]);return Lc.fs(d,o)}ks(i){return wh.fs(i)}no(i){return JSON.parse(i)}async Zs(i){if(i.user.uid===this.currentUser.uid)return this.syncEngine.io(i.batchId,i.state,i.error);ce("SharedClientState",`Ignoring mutation for non-active user ${i.user.uid}`)}eo(i){return this.syncEngine.so(i.targetId,i.state,i.error)}Hs(i,o){let d=o?this.Ds.insert(i,o):this.Ds.remove(i),v=this.Qs(this.Ds),_=this.Qs(d),O=[],X=[];return _.forEach(oe=>{v.has(oe)||O.push(oe)}),v.forEach(oe=>{_.has(oe)||X.push(oe)}),this.syncEngine.oo(O,X).then(()=>{this.Ds=d})}qs(i){this.Ds.get(i.clientId)&&this.onlineStateHandler(i.onlineState)}Qs(i){let o=pr;return i.forEach((d,v)=>{o=o.unionWith(v.activeTargetIds)}),o}}class of{constructor(){this._o=new bh,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(i){}updateMutationState(i,o,d){}addLocalQueryTarget(i,o=!0){return o&&this._o.ps(i),this.ao[i]||"not-current"}updateQueryState(i,o,d){this.ao[i]=o}removeLocalQueryTarget(i){this._o.ys(i)}isLocalQueryTarget(i){return this._o.activeTargetIds.has(i)}clearQueryState(i){delete this.ao[i]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(i){return this._o.activeTargetIds.has(i)}start(){return this._o=new bh,Promise.resolve()}handleUserChange(i,o,d){}setOnlineState(i){}shutdown(){}writeSequenceNumber(i){}notifyBundleLoaded(i){}}class Yf{uo(i){}shutdown(){}}class _d{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(i){this.To.push(i)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){for(let i of(ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.To))i(0)}Po(){for(let i of(ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.To))i(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $h=null;function Sh(){return $h===null?$h=268435456+Math.round(2147483648*Math.random()):$h++,"0x"+$h.toString(16)}let lf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xf{constructor(i){this.Eo=i.Eo,this.Ao=i.Ao}Ro(i){this.Vo=i}mo(i){this.fo=i}po(i){this.yo=i}onMessage(i){this.wo=i}close(){this.Ao()}send(i){this.Eo(i)}So(){this.Vo()}bo(){this.fo()}Do(i){this.yo(i)}vo(i){this.wo(i)}}let El="WebChannelConnection";class Bh extends class{get Co(){return!1}constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId;let o=i.ssl?"https":"http",d=encodeURIComponent(this.databaseId.projectId),v=encodeURIComponent(this.databaseId.database);this.Fo=o+"://"+i.host,this.Mo=`projects/${d}/databases/${v}`,this.xo=this.databaseId.database==="(default)"?`project_id=${d}`:`project_id=${d}&database_id=${v}`}Oo(i,o,d,v,_){let O=Sh(),X=this.No(i,o.toUriEncodedString());ce("RestConnection",`Sending RPC '${i}' ${O}:`,X,d);let oe={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(oe,v,_),this.Bo(i,X,oe,d).then(Ge=>(ce("RestConnection",`Received RPC '${i}' ${O}: `,Ge),Ge),Ge=>{throw Je("RestConnection",`RPC '${i}' ${O} failed with error: `,Ge,"url: ",X,"request:",d),Ge})}ko(i,o,d,v,_,O){return this.Oo(i,o,d,v,_)}Lo(i,o,d){i["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Q}(),i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((v,_)=>i[_]=v),d&&d.headers.forEach((v,_)=>i[_]=v)}No(i,o){let d=lf[i];return`${this.Fo}/v1/${o}:${d}`}terminate(){}}{constructor(i){super(i),this.forceLongPolling=i.forceLongPolling,this.autoDetectLongPolling=i.autoDetectLongPolling,this.useFetchStreams=i.useFetchStreams,this.longPollingOptions=i.longPollingOptions}Bo(i,o,d,v){let _=Sh();return new Promise((O,X)=>{let oe=new W;oe.setWithCredentials(!0),oe.listenOnce(z.COMPLETE,()=>{try{switch(oe.getLastErrorCode()){case y.NO_ERROR:let Tt=oe.getResponseJson();ce(El,`XHR for RPC '${i}' ${_} received:`,JSON.stringify(Tt)),O(Tt);break;case y.TIMEOUT:ce(El,`RPC '${i}' ${_} timed out`),X(new pt(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case y.HTTP_ERROR:let ar=oe.getStatus();if(ce(El,`RPC '${i}' ${_} failed with status:`,ar,"response text:",oe.getResponseText()),ar>0){let ur=oe.getResponseJson();Array.isArray(ur)&&(ur=ur[0]);let wr=ur?.error;if(wr&&wr.status&&wr.message){let vn=function(Hn){let Jn=Hn.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(Jn)>=0?Jn:Fe.UNKNOWN}(wr.status);X(new pt(vn,wr.message))}else X(new pt(Fe.UNKNOWN,"Server responded with status "+oe.getStatus()))}else X(new pt(Fe.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{ce(El,`RPC '${i}' ${_} completed.`)}});let Ge=JSON.stringify(v);ce(El,`RPC '${i}' ${_} sending request:`,v),oe.send(o,"POST",Ge,d,15)})}qo(i,o,d){let v=Sh(),_=[this.Fo,"/","google.firestore.v1.Firestore","/",i,"/channel"],O=x(),X=I(),oe={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Ge=this.longPollingOptions.timeoutSeconds;Ge!==void 0&&(oe.longPollingTimeout=Math.round(1e3*Ge)),this.useFetchStreams&&(oe.useFetchStreams=!0),this.Lo(oe.initMessageHeaders,o,d),oe.encodeInitMessageHeaders=!0;let Tt=_.join("");ce(El,`Creating RPC '${i}' stream ${v}: ${Tt}`,oe);let ar=O.createWebChannel(Tt,oe),ur=!1,wr=!1,vn=new Xf({Eo:Jn=>{wr?ce(El,`Not sending because RPC '${i}' stream ${v} is closed:`,Jn):(ur||(ce(El,`Opening RPC '${i}' stream ${v} transport.`),ar.open(),ur=!0),ce(El,`RPC '${i}' stream ${v} sending:`,Jn),ar.send(Jn))},Ao:()=>ar.close()}),Hn=(Jn,Os,Hi)=>{Jn.listen(Os,nr=>{try{Hi(nr)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Hn(ar,j.EventType.OPEN,()=>{wr||(ce(El,`RPC '${i}' stream ${v} transport opened.`),vn.So())}),Hn(ar,j.EventType.CLOSE,()=>{wr||(wr=!0,ce(El,`RPC '${i}' stream ${v} transport closed`),vn.Do())}),Hn(ar,j.EventType.ERROR,Jn=>{wr||(wr=!0,Je(El,`RPC '${i}' stream ${v} transport errored:`,Jn),vn.Do(new pt(Fe.UNAVAILABLE,"The operation could not be completed")))}),Hn(ar,j.EventType.MESSAGE,Jn=>{var Os;if(!wr){let Hi=Jn.data[0];Hi||_e();let nr=Hi?.error||((Os=Hi[0])===null||Os===void 0?void 0:Os.error);if(nr){ce(El,`RPC '${i}' stream ${v} received error:`,nr);let Ot=nr.status,Ft=function(hr){let xr=C[hr];if(xr!==void 0)return Ds(xr)}(Ot),Xt=nr.message;Ft===void 0&&(Ft=Fe.INTERNAL,Xt="Unknown error status: "+Ot+" with message "+nr.message),wr=!0,vn.Do(new pt(Ft,Xt)),ar.close()}else ce(El,`RPC '${i}' stream ${v} received:`,Hi),vn.vo(Hi)}}),Hn(X,k.STAT_EVENT,Jn=>{Jn.stat===S.PROXY?ce(El,`RPC '${i}' stream ${v} detected buffering proxy`):Jn.stat===S.NOPROXY&&ce(El,`RPC '${i}' stream ${v} detected no buffering proxy`)}),setTimeout(()=>{vn.bo()},0),vn}}function qh(){return typeof window<"u"?window:null}function sc(){return typeof document<"u"?document:null}function Bu(m){return new Nc(m,!0)}class rh{constructor(i,o,d=1e3,v=1.5,_=6e4){this.li=i,this.timerId=o,this.Qo=d,this.Ko=v,this.$o=_,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(i){this.cancel();let o=Math.floor(this.Uo+this.Ho()),d=Math.max(0,Date.now()-this.Go),v=Math.max(0,o-d);v>0&&ce("ExponentialBackoff",`Backing off for ${v} ms (base delay: ${this.Uo} ms, delay with jitter: ${o} ms, last attempt: ${d} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,v,()=>(this.Go=Date.now(),i())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class qo{constructor(i,o,d,v,_,O,X,oe){this.li=i,this.Yo=d,this.Zo=v,this.connection=_,this.authCredentialsProvider=O,this.appCheckCredentialsProvider=X,this.listener=oe,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new rh(i,o)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(i){this.l_(),this.stream.send(i)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(i,o){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,i!==4?this.r_.reset():o&&o.code===Fe.RESOURCE_EXHAUSTED?(Ke(o.toString()),Ke("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):o&&o.code===Fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=i,await this.listener.po(o)}P_(){}auth(){this.state=1;let i=this.T_(this.Xo),o=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([d,v])=>{this.Xo===o&&this.I_(d,v)},d=>{i(()=>{let v=new pt(Fe.UNKNOWN,"Fetching auth token failed: "+d.message);return this.E_(v)})})}I_(i,o){let d=this.T_(this.Xo);this.stream=this.d_(i,o),this.stream.Ro(()=>{d(()=>this.listener.Ro())}),this.stream.mo(()=>{d(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(v=>{d(()=>this.E_(v))}),this.stream.onMessage(v=>{d(()=>++this.n_==1?this.A_(v):this.onNext(v))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(i){return ce("PersistentStream",`close with error: ${i}`),this.stream=null,this.close(4,i)}T_(i){return o=>{this.li.enqueueAndForget(()=>this.Xo===i?o():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uf extends qo{constructor(i,o,d,v,_,O){super(i,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",o,d,v,O),this.serializer=_}d_(i,o){return this.connection.qo("Listen",i,o)}A_(i){return this.onNext(i)}onNext(i){this.r_.reset();let o=function(v,_){let O;if("targetChange"in _){var X,oe;_.targetChange;let Ge=(X=_.targetChange.targetChangeType||"NO_CHANGE")==="NO_CHANGE"?0:X==="ADD"?1:X==="REMOVE"?2:X==="CURRENT"?3:X==="RESET"?4:_e(),Tt=_.targetChange.targetIds||[],ar=(oe=_.targetChange.resumeToken,v.useProto3Json?(oe===void 0||typeof oe=="string"||_e(),As.fromBase64String(oe||"")):(oe===void 0||oe instanceof jt||oe instanceof Uint8Array||_e(),As.fromUint8Array(oe||new Uint8Array))),ur=_.targetChange.cause;O=new tl(Ge,Tt,ar,ur&&new pt(ur.code===void 0?Fe.UNKNOWN:Ds(ur.code),ur.message||"")||null)}else if("documentChange"in _){_.documentChange;let Ge=_.documentChange;Ge.document,Ge.document.name,Ge.document.updateTime;let Tt=yu(v,Ge.document.name),ar=eo(Ge.document.updateTime),ur=Ge.document.createTime?eo(Ge.document.createTime):Ct.min(),wr=new Qt({mapValue:{fields:Ge.document.fields}}),vn=Sa.newFoundDocument(Tt,ar,ur,wr);O=new Za(Ge.targetIds||[],Ge.removedTargetIds||[],vn.key,vn)}else if("documentDelete"in _){_.documentDelete;let Ge=_.documentDelete;Ge.document;let Tt=yu(v,Ge.document),ar=Ge.readTime?eo(Ge.readTime):Ct.min(),ur=Sa.newNoDocument(Tt,ar);O=new Za([],Ge.removedTargetIds||[],ur.key,ur)}else if("documentRemove"in _){_.documentRemove;let Ge=_.documentRemove;Ge.document;let Tt=yu(v,Ge.document);O=new Za([],Ge.removedTargetIds||[],Tt,null)}else{if(!("filter"in _))return _e();{_.filter;let Ge=_.filter;Ge.targetId;let{count:Tt=0,unchangedNames:ar}=Ge,ur=new ss(Tt,ar);O=new ll(Ge.targetId,ur)}}return O}(this.serializer,i),d=function(v){if(!("targetChange"in v))return Ct.min();let _=v.targetChange;return _.targetIds&&_.targetIds.length?Ct.min():_.readTime?eo(_.readTime):Ct.min()}(i);return this.listener.R_(o,d)}V_(i){let o={};o.database=le(this.serializer),o.addTarget=function(v,_){let O,X=_.target;if((O=Pn(X)?{documents:Er(v,X)}:{query:br(v,X).ct}).targetId=_.targetId,_.resumeToken.approximateByteSize()>0){O.resumeToken=Du(v,_.resumeToken);let oe=af(v,_.expectedCount);oe!==null&&(O.expectedCount=oe)}else if(_.snapshotVersion.compareTo(Ct.min())>0){O.readTime=Oc(v,_.snapshotVersion.toTimestamp());let oe=af(v,_.expectedCount);oe!==null&&(O.expectedCount=oe)}return O}(this.serializer,i);let d=function(v,_){let O=function(X){switch(X){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(_.purpose);return O==null?null:{"goog-listen-tags":O}}(this.serializer,i);d&&(o.labels=d),this.c_(o)}m_(i){let o={};o.database=le(this.serializer),o.removeTarget=i,this.c_(o)}}class So extends qo{constructor(i,o,d,v,_,O){super(i,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",o,d,v,O),this.serializer=_}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(i,o){return this.connection.qo("Write",i,o)}A_(i){return i.streamToken||_e(),this.lastStreamToken=i.streamToken,i.writeResults&&i.writeResults.length!==0&&_e(),this.listener.p_()}onNext(i){var o,d;i.streamToken||_e(),this.lastStreamToken=i.streamToken,this.r_.reset();let v=(o=i.writeResults,d=i.commitTime,o&&o.length>0?(d!==void 0||_e(),o.map(O=>{let X;return(X=O.updateTime?eo(O.updateTime):eo(d)).isEqual(Ct.min())&&(X=eo(d)),new ys(X,O.transformResults||[])})):[]),_=eo(i.commitTime);return this.listener.y_(_,v)}w_(){let i={};i.database=le(this.serializer),this.c_(i)}g_(i){let o={streamToken:this.lastStreamToken,writes:i.map(d=>Gt(this.serializer,d))};this.c_(o)}}class Eh extends class{}{constructor(i,o,d,v){super(),this.authCredentials=i,this.appCheckCredentials=o,this.connection=d,this.serializer=v,this.S_=!1}b_(){if(this.S_)throw new pt(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(i,o,d,v){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,O])=>this.connection.Oo(i,Mu(o,d),v,_,O)).catch(_=>{throw _.name==="FirebaseError"?(_.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new pt(Fe.UNKNOWN,_.toString())})}ko(i,o,d,v,_){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([O,X])=>this.connection.ko(i,Mu(o,d),v,O,X,_)).catch(O=>{throw O.name==="FirebaseError"?(O.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),O):new pt(Fe.UNKNOWN,O.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class _h{constructor(i,o){this.asyncQueue=i,this.onlineStateHandler=o,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(i){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${i.toString()}`),this.M_("Offline")))}set(i){this.N_(),this.D_=0,i==="Online"&&(this.C_=!1),this.M_(i)}M_(i){i!==this.state&&(this.state=i,this.onlineStateHandler(i))}x_(i){let o=`Could not reach Cloud Firestore backend. ${i}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ke(o),this.C_=!1):ce("OnlineStateTracker",o)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}class au{constructor(i,o,d,v,_){this.localStore=i,this.datastore=o,this.asyncQueue=d,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=_,this.Q_.uo(O=>{d.enqueueAndForget(async()=>{Fa(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(X){X.k_.add(4),await Fc(X),X.K_.set("Unknown"),X.k_.delete(4),await oa(X)}(this))})}),this.K_=new _h(d,v)}}async function oa(m){if(Fa(m))for(let i of m.q_)await i(!0)}async function Fc(m){for(let i of m.q_)await i(!1)}function ja(m,i){m.B_.has(i.targetId)||(m.B_.set(i.targetId,i),nh(m)?hl(m):ac(m).s_()&&yc(m,i))}function ha(m,i){let o=ac(m);m.B_.delete(i),o.s_()&&vc(m,i),m.B_.size===0&&(o.s_()?o.a_():Fa(m)&&m.K_.set("Unknown"))}function yc(m,i){if(m.U_.xe(i.targetId),i.resumeToken.approximateByteSize()>0||i.snapshotVersion.compareTo(Ct.min())>0){let o=m.remoteSyncer.getRemoteKeysForTarget(i.targetId).size;i=i.withExpectedCount(o)}ac(m).V_(i)}function vc(m,i){m.U_.xe(i),ac(m).m_(i)}function hl(m){m.U_=new kl({getRemoteKeysForTarget:i=>m.remoteSyncer.getRemoteKeysForTarget(i),ut:i=>m.B_.get(i)||null,nt:()=>m.datastore.serializer.databaseId}),ac(m).start(),m.K_.F_()}function nh(m){return Fa(m)&&!ac(m).i_()&&m.B_.size>0}function Fa(m){return m.k_.size===0}async function Id(m){m.K_.set("Online")}async function qu(m){m.B_.forEach((i,o)=>{yc(m,i)})}async function Wa(m,i){m.U_=void 0,nh(m)?(m.K_.O_(i),hl(m)):m.K_.set("Unknown")}async function lo(m,i,o){if(m.K_.set("Online"),i instanceof tl&&i.state===2&&i.cause)try{await async function(d,v){let _=v.cause;for(let O of v.targetIds)d.B_.has(O)&&(await d.remoteSyncer.rejectListen(O,_),d.B_.delete(O),d.U_.removeTarget(O))}(m,i)}catch(d){ce("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),d),await No(m,d)}else if(i instanceof Za?m.U_.$e(i):i instanceof ll?m.U_.Je(i):m.U_.Ge(i),!o.isEqual(Ct.min()))try{let d=await gc(m.localStore);o.compareTo(d)>=0&&await function(v,_){let O=v.U_.it(_);return O.targetChanges.forEach((X,oe)=>{if(X.resumeToken.approximateByteSize()>0){let Ge=v.B_.get(oe);Ge&&v.B_.set(oe,Ge.withResumeToken(X.resumeToken,_))}}),O.targetMismatches.forEach((X,oe)=>{let Ge=v.B_.get(X);if(!Ge)return;v.B_.set(X,Ge.withResumeToken(As.EMPTY_BYTE_STRING,Ge.snapshotVersion)),vc(v,X);let Tt=new dn(Ge.target,X,oe,Ge.sequenceNumber);yc(v,Tt)}),v.remoteSyncer.applyRemoteEvent(O)}(m,o)}catch(d){ce("RemoteStore","Failed to raise snapshot:",d),await No(m,d)}}async function No(m,i,o){if(!Ri(i))throw i;m.k_.add(1),await Fc(m),m.K_.set("Offline"),o||(o=()=>gc(m.localStore)),m.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await o(),m.k_.delete(1),await oa(m)})}function zh(m,i){return i().catch(o=>No(m,o,i))}async function ou(m){let i=bc(m),o=m.L_.length>0?m.L_[m.L_.length-1].batchId:-1;for(;Fa(m)&&m.L_.length<10;)try{let d=await function(v,_){return v.persistence.runTransaction("Get next mutation batch","readonly",O=>(_===void 0&&(_=-1),v.mutationQueue.getNextMutationBatchAfterBatchId(O,_)))}(m.localStore,o);if(d===null){m.L_.length===0&&i.a_();break}o=d.batchId,function(v,_){v.L_.push(_);let O=bc(v);O.s_()&&O.f_&&O.g_(_.mutations)}(m,d)}catch(d){await No(m,d)}cf(m)&&dl(m)}function cf(m){return Fa(m)&&!bc(m).i_()&&m.L_.length>0}function dl(m){bc(m).start()}async function _u(m){bc(m).w_()}async function Gh(m){let i=bc(m);for(let o of m.L_)i.g_(o.mutations)}async function Vc(m,i,o){let d=m.L_.shift(),v=Ma.from(d,i,o);await zh(m,()=>m.remoteSyncer.applySuccessfulWrite(v)),await ou(m)}async function Yl(m,i){i&&bc(m).f_&&await async function(o,d){var v;if(function(_){switch(_){default:return _e();case Fe.CANCELLED:case Fe.UNKNOWN:case Fe.DEADLINE_EXCEEDED:case Fe.RESOURCE_EXHAUSTED:case Fe.INTERNAL:case Fe.UNAVAILABLE:case Fe.UNAUTHENTICATED:return!1;case Fe.INVALID_ARGUMENT:case Fe.NOT_FOUND:case Fe.ALREADY_EXISTS:case Fe.PERMISSION_DENIED:case Fe.FAILED_PRECONDITION:case Fe.ABORTED:case Fe.OUT_OF_RANGE:case Fe.UNIMPLEMENTED:case Fe.DATA_LOSS:return!0}}(v=d.code)&&v!==Fe.ABORTED){let _=o.L_.shift();bc(o).__(),await zh(o,()=>o.remoteSyncer.rejectFailedWrite(_.batchId,d)),await ou(o)}}(m,i),cf(m)&&dl(m)}async function Ih(m,i){m.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");let o=Fa(m);m.k_.add(3),await Fc(m),o&&m.K_.set("Unknown"),await m.remoteSyncer.handleCredentialChange(i),m.k_.delete(3),await oa(m)}async function wc(m,i){i?(m.k_.delete(2),await oa(m)):i||(m.k_.add(2),await Fc(m),m.K_.set("Unknown"))}function ac(m){var i,o,d;return m.W_||(m.W_=(i=m.datastore,o=m.asyncQueue,d={Ro:Id.bind(null,m),mo:qu.bind(null,m),po:Wa.bind(null,m),R_:lo.bind(null,m)},i.b_(),new uf(o,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,d)),m.q_.push(async v=>{v?(m.W_.__(),nh(m)?hl(m):m.K_.set("Unknown")):(await m.W_.stop(),m.U_=void 0)})),m.W_}function bc(m){var i,o,d;return m.G_||(m.G_=(i=m.datastore,o=m.asyncQueue,d={Ro:()=>Promise.resolve(),mo:_u.bind(null,m),po:Yl.bind(null,m),p_:Gh.bind(null,m),y_:Vc.bind(null,m)},i.b_(),new So(o,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,d)),m.q_.push(async v=>{v?(m.G_.__(),await ou(m)):(await m.G_.stop(),m.L_.length>0&&(ce("RemoteStore",`Stopping write stream with ${m.L_.length} pending writes`),m.L_=[]))})),m.G_}class zu{constructor(i,o,d,v,_){this.asyncQueue=i,this.timerId=o,this.targetTimeMs=d,this.op=v,this.removalCallback=_,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(O=>{})}get promise(){return this.deferred.promise}static createAndSchedule(i,o,d,v,_){let O=new zu(i,o,Date.now()+d,v,_);return O.start(d),O}start(i){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),i)}skipDelay(){return this.handleDelayElapsed()}cancel(i){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(Fe.CANCELLED,"Operation cancelled"+(i?": "+i:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(i=>this.deferred.resolve(i))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ra(m,i){if(Ke("AsyncQueue",`${i}: ${m}`),Ri(m))return new pt(Fe.UNAVAILABLE,`${i}: ${m}`);throw m}class ih{static emptySet(i){return new ih(i.comparator)}constructor(i){this.comparator=i?(o,d)=>i(o,d)||Et.comparator(o.key,d.key):(o,d)=>Et.comparator(o.key,d.key),this.keyedMap=T(),this.sortedSet=new Qr(this.comparator)}has(i){return this.keyedMap.get(i)!=null}get(i){return this.keyedMap.get(i)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(i){let o=this.keyedMap.get(i);return o?this.sortedSet.indexOf(o):-1}get size(){return this.sortedSet.size}forEach(i){this.sortedSet.inorderTraversal((o,d)=>(i(o),!1))}add(i){let o=this.delete(i.key);return o.copy(o.keyedMap.insert(i.key,i),o.sortedSet.insert(i,null))}delete(i){let o=this.get(i);return o?this.copy(this.keyedMap.remove(i),this.sortedSet.remove(o)):this}isEqual(i){if(!(i instanceof ih)||this.size!==i.size)return!1;let o=this.sortedSet.getIterator(),d=i.sortedSet.getIterator();for(;o.hasNext();){let v=o.getNext().key,_=d.getNext().key;if(!v.isEqual(_))return!1}return!0}toString(){let i=[];return this.forEach(o=>{i.push(o.toString())}),i.length===0?"DocumentSet ()":`DocumentSet (
  `+i.join(`  
`)+`
)`}copy(i,o){let d=new ih;return d.comparator=this.comparator,d.keyedMap=i,d.sortedSet=o,d}}class Zf{constructor(){this.z_=new Qr(Et.comparator)}track(i){let o=i.doc.key,d=this.z_.get(o);d?i.type!==0&&d.type===3?this.z_=this.z_.insert(o,i):i.type===3&&d.type!==1?this.z_=this.z_.insert(o,{type:d.type,doc:i.doc}):i.type===2&&d.type===2?this.z_=this.z_.insert(o,{type:2,doc:i.doc}):i.type===2&&d.type===0?this.z_=this.z_.insert(o,{type:0,doc:i.doc}):i.type===1&&d.type===0?this.z_=this.z_.remove(o):i.type===1&&d.type===2?this.z_=this.z_.insert(o,{type:1,doc:d.doc}):i.type===0&&d.type===1?this.z_=this.z_.insert(o,{type:2,doc:i.doc}):_e():this.z_=this.z_.insert(o,i)}j_(){let i=[];return this.z_.inorderTraversal((o,d)=>{i.push(d)}),i}}class hf{constructor(i,o,d,v,_,O,X,oe,Ge){this.query=i,this.docs=o,this.oldDocs=d,this.docChanges=v,this.mutatedKeys=_,this.fromCache=O,this.syncStateChanged=X,this.excludesMetadataChanges=oe,this.hasCachedResults=Ge}static fromInitialDocuments(i,o,d,v,_){let O=[];return o.forEach(X=>{O.push({type:0,doc:X})}),new hf(i,o,ih.emptySet(o),O,d,v,!0,!1,_)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(i){if(!(this.fromCache===i.fromCache&&this.hasCachedResults===i.hasCachedResults&&this.syncStateChanged===i.syncStateChanged&&this.mutatedKeys.isEqual(i.mutatedKeys)&&Wi(this.query,i.query)&&this.docs.isEqual(i.docs)&&this.oldDocs.isEqual(i.oldDocs)))return!1;let o=this.docChanges,d=i.docChanges;if(o.length!==d.length)return!1;for(let v=0;v<o.length;v++)if(o[v].type!==d[v].type||!o[v].doc.isEqual(d[v].doc))return!1;return!0}}class gv{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(i=>i.Z_())}}class $p{constructor(){this.queries=Bp(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(i,o){let d=i.queries;i.queries=Bp(),d.forEach((v,_)=>{for(let O of _.J_)O.onError(o)})})(this,new pt(Fe.ABORTED,"Firestore shutting down"))}}function Bp(){return new os(m=>Ui(m),Wi)}async function Td(m,i){let o=3,d=i.query,v=m.queries.get(d);v?!v.Y_()&&i.Z_()&&(o=2):(v=new gv,o=i.Z_()?0:1);try{switch(o){case 0:v.H_=await m.onListen(d,!0);break;case 1:v.H_=await m.onListen(d,!1);break;case 2:await m.onFirstRemoteStoreListen(d)}}catch(_){let O=Ra(_,`Initialization of query '${Pi(i.query)}' failed`);return void i.onError(O)}m.queries.set(d,v),v.J_.push(i),i.ea(m.onlineState),v.H_&&i.ta(v.H_)&&ep(m)}async function qp(m,i){let o=i.query,d=3,v=m.queries.get(o);if(v){let _=v.J_.indexOf(i);_>=0&&(v.J_.splice(_,1),v.J_.length===0?d=i.Z_()?0:1:!v.Y_()&&i.Z_()&&(d=2))}switch(d){case 0:return m.queries.delete(o),m.onUnlisten(o,!0);case 1:return m.queries.delete(o),m.onUnlisten(o,!1);case 2:return m.onLastRemoteStoreUnlisten(o);default:return}}function yv(m,i){let o=!1;for(let d of i){let v=d.query,_=m.queries.get(v);if(_){for(let O of _.J_)O.ta(d)&&(o=!0);_.H_=d}}o&&ep(m)}function ay(m,i,o){let d=m.queries.get(i);if(d)for(let v of d.J_)v.onError(o);m.queries.delete(i)}function ep(m){m.X_.forEach(i=>{i.next()})}(K=U||(U={})).na="default",K.Cache="cache";class oc{constructor(i,o,d){this.query=i,this.ra=o,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=d||{}}ta(i){if(!this.options.includeMetadataChanges){let d=[];for(let v of i.docChanges)v.type!==3&&d.push(v);i=new hf(i.query,i.docs,i.oldDocs,d,i.mutatedKeys,i.fromCache,i.syncStateChanged,!0,i.hasCachedResults)}let o=!1;return this.ia?this.oa(i)&&(this.ra.next(i),o=!0):this._a(i,this.onlineState)&&(this.aa(i),o=!0),this.sa=i,o}onError(i){this.ra.error(i)}ea(i){this.onlineState=i;let o=!1;return this.sa&&!this.ia&&this._a(this.sa,i)&&(this.aa(this.sa),o=!0),o}_a(i,o){return!(i.fromCache&&this.Z_())||(!this.options.ua||o==="Offline")&&(!i.docs.isEmpty()||i.hasCachedResults||o==="Offline")}oa(i){if(i.docChanges.length>0)return!0;let o=this.sa&&this.sa.hasPendingWrites!==i.hasPendingWrites;return!(!i.syncStateChanged&&!o)&&this.options.includeMetadataChanges===!0}aa(i){i=hf.fromInitialDocuments(i.query,i.docs,i.mutatedKeys,i.fromCache,i.hasCachedResults),this.ia=!0,this.ra.next(i)}Z_(){return this.options.source!==U.Cache}}class Eo{constructor(i){this.key=i}}class Uc{constructor(i){this.key=i}}class vv{constructor(i,o){this.query=i,this.da=o,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Dt(),this.mutatedKeys=Dt(),this.Va=bs(i),this.ma=new ih(this.Va)}get fa(){return this.da}ga(i,o){let d=o?o.pa:new Zf,v=o?o.ma:this.ma,_=o?o.mutatedKeys:this.mutatedKeys,O=v,X=!1,oe=this.query.limitType==="F"&&v.size===this.query.limit?v.last():null,Ge=this.query.limitType==="L"&&v.size===this.query.limit?v.first():null;if(i.inorderTraversal((Tt,ar)=>{let ur=v.get(Tt),wr=$n(this.query,ar)?ar:null,vn=!!ur&&this.mutatedKeys.has(ur.key),Hn=!!wr&&(wr.hasLocalMutations||this.mutatedKeys.has(wr.key)&&wr.hasCommittedMutations),Jn=!1;ur&&wr?ur.data.isEqual(wr.data)?vn!==Hn&&(d.track({type:3,doc:wr}),Jn=!0):this.ya(ur,wr)||(d.track({type:2,doc:wr}),Jn=!0,(oe&&this.Va(wr,oe)>0||Ge&&0>this.Va(wr,Ge))&&(X=!0)):!ur&&wr?(d.track({type:0,doc:wr}),Jn=!0):ur&&!wr&&(d.track({type:1,doc:ur}),Jn=!0,(oe||Ge)&&(X=!0)),Jn&&(wr?(O=O.add(wr),_=Hn?_.add(Tt):_.delete(Tt)):(O=O.delete(Tt),_=_.delete(Tt)))}),this.query.limit!==null)for(;O.size>this.query.limit;){let Tt=this.query.limitType==="F"?O.last():O.first();O=O.delete(Tt.key),_=_.delete(Tt.key),d.track({type:1,doc:Tt})}return{ma:O,pa:d,ss:X,mutatedKeys:_}}ya(i,o){return i.hasLocalMutations&&o.hasCommittedMutations&&!o.hasLocalMutations}applyChanges(i,o,d,v){let _=this.ma;this.ma=i.ma,this.mutatedKeys=i.mutatedKeys;let O=i.pa.j_();O.sort((Tt,ar)=>function(ur,wr){let vn=Hn=>{switch(Hn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return vn(ur)-vn(wr)}(Tt.type,ar.type)||this.Va(Tt.doc,ar.doc)),this.wa(d),v=v!=null&&v;let X=o&&!v?this.Sa():[],oe=this.Ra.size===0&&this.current&&!v?1:0,Ge=oe!==this.Aa;return this.Aa=oe,O.length!==0||Ge?{snapshot:new hf(this.query,i.ma,_,O,i.mutatedKeys,oe===0,Ge,!1,!!d&&d.resumeToken.approximateByteSize()>0),ba:X}:{ba:X}}ea(i){return this.current&&i==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Zf,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(i){return!this.da.has(i)&&!!this.ma.has(i)&&!this.ma.get(i).hasLocalMutations}wa(i){i&&(i.addedDocuments.forEach(o=>this.da=this.da.add(o)),i.modifiedDocuments.forEach(o=>{}),i.removedDocuments.forEach(o=>this.da=this.da.delete(o)),this.current=i.current)}Sa(){if(!this.current)return[];let i=this.Ra;this.Ra=Dt(),this.ma.forEach(d=>{this.Da(d.key)&&(this.Ra=this.Ra.add(d.key))});let o=[];return i.forEach(d=>{this.Ra.has(d)||o.push(new Uc(d))}),this.Ra.forEach(d=>{i.has(d)||o.push(new Eo(d))}),o}va(i){this.da=i.ds,this.Ra=Dt();let o=this.ga(i.documents);return this.applyChanges(o,!0)}Ca(){return hf.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Ym{constructor(i,o,d){this.query=i,this.targetId=o,this.view=d}}class zp{constructor(i){this.key=i,this.Fa=!1}}class oy{constructor(i,o,d,v,_,O){this.localStore=i,this.remoteStore=o,this.eventManager=d,this.sharedClientState=v,this.currentUser=_,this.maxConcurrentLimboResolutions=O,this.Ma={},this.xa=new os(X=>Ui(X),Wi),this.Oa=new Map,this.Na=new Set,this.La=new Qr(Et.comparator),this.Ba=new Map,this.ka=new Xn,this.qa={},this.Qa=new Map,this.Ka=_s.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function da(m,i,o=!0){let d,v=Ch(m),_=v.xa.get(i);return _?(v.sharedClientState.addLocalQueryTarget(_.targetId),d=_.view.Ca()):d=await xd(v,i,o,!0),d}async function to(m,i){let o=Ch(m);await xd(o,i,!0,!1)}async function xd(m,i,o,d){let v,_=await Mc(m.localStore,Zt(i)),O=_.targetId,X=m.sharedClientState.addLocalQueryTarget(O,o);return d&&(v=await Gp(m,i,O,X==="current",_.resumeToken)),m.isPrimaryClient&&o&&ja(m.remoteStore,_),v}async function Gp(m,i,o,d,v){m.Ua=(ar,ur,wr)=>async function(vn,Hn,Jn,Os){let Hi=Hn.view.ga(Jn);Hi.ss&&(Hi=await oo(vn.localStore,Hn.query,!1).then(({documents:Xt})=>Hn.view.ga(Xt,Hi)));let nr=Os&&Os.targetChanges.get(Hn.targetId),Ot=Os&&Os.targetMismatches.get(Hn.targetId)!=null,Ft=Hn.view.applyChanges(Hi,vn.isPrimaryClient,nr,Ot);return ff(vn,Hn.targetId,Ft.ba),Ft.snapshot}(m,ar,ur,wr);let _=await oo(m.localStore,i,!0),O=new vv(i,_.ds),X=O.ga(_.documents),oe=ko.createSynthesizedTargetChangeForCurrentChange(o,d&&m.onlineState!=="Offline",v),Ge=O.applyChanges(X,m.isPrimaryClient,oe);ff(m,o,Ge.ba);let Tt=new Ym(i,o,O);return m.xa.set(i,Tt),m.Oa.has(o)?m.Oa.get(o).push(i):m.Oa.set(o,[i]),Ge.snapshot}async function tp(m,i,o){let d=m.xa.get(i),v=m.Oa.get(d.targetId);if(v.length>1)return m.Oa.set(d.targetId,v.filter(_=>!Wi(_,i))),void m.xa.delete(i);m.isPrimaryClient?(m.sharedClientState.removeLocalQueryTarget(d.targetId),m.sharedClientState.isActiveQueryTarget(d.targetId)||await Ed(m.localStore,d.targetId,!1).then(()=>{m.sharedClientState.clearQueryState(d.targetId),o&&ha(m.remoteStore,d.targetId),Th(m,d.targetId)}).catch(On)):(Th(m,d.targetId),await Ed(m.localStore,d.targetId,!0))}async function df(m,i){let o=m.xa.get(i),d=m.Oa.get(o.targetId);m.isPrimaryClient&&d.length===1&&(m.sharedClientState.removeLocalQueryTarget(o.targetId),ha(m.remoteStore,o.targetId))}async function Xm(m,i,o){let d=pf(m);try{var v;let _,O=await function(X,oe){let Ge,Tt,ar=bt.now(),ur=oe.reduce((wr,vn)=>wr.add(vn.key),Dt());return X.persistence.runTransaction("Locally write mutations","readwrite",wr=>{let vn=hi,Hn=Dt();return X.hs.getEntries(wr,ur).next(Jn=>{(vn=Jn).forEach((Os,Hi)=>{Hi.isValidDocument()||(Hn=Hn.add(Os))})}).next(()=>X.localDocuments.getOverlayedDocuments(wr,vn)).next(Jn=>{Ge=Jn;let Os=[];for(let Hi of oe){let nr=function(Ot,Ft){let Xt=null;for(let hr of Ot.fieldTransforms){let xr=Ft.data.field(hr.field),qt=Cs(hr.transform,xr||null);qt!=null&&(Xt===null&&(Xt=Qt.empty()),Xt.set(hr.field,qt))}return Xt||null}(Hi,Ge.get(Hi.key).overlayedDocument);nr!=null&&Os.push(new Ya(Hi.key,nr,function Ot(Ft){let Xt=[];return Qn(Ft.fields,(hr,xr)=>{let qt=new Rt([hr]);if(Hl(xr)){let Nl=Ot(xr.mapValue).fields;if(Nl.length===0)Xt.push(qt);else for(let Sc of Nl)Xt.push(qt.child(Sc))}else Xt.push(qt)}),new Br(Xt)}(nr.value.mapValue),Ia.exists(!0)))}return X.mutationQueue.addMutationBatch(wr,ar,Os,oe)}).next(Jn=>{Tt=Jn;let Os=Jn.applyToLocalDocumentSet(Ge,Hn);return X.documentOverlayCache.saveOverlays(wr,Jn.batchId,Os)})}).then(()=>({batchId:Tt.batchId,changes:G(Ge)}))}(d.localStore,i);d.sharedClientState.addPendingMutation(O.batchId),v=O.batchId,(_=d.qa[d.currentUser.toKey()])||(_=new Qr(lt)),_=_.insert(v,o),d.qa[d.currentUser.toKey()]=_,await ah(d,O.changes),await ou(d.remoteStore)}catch(_){let O=Ra(_,"Failed to persist write");o.reject(O)}}async function ly(m,i){try{let o=await function(d,v){let _=v.snapshotVersion,O=d.us;return d.persistence.runTransaction("Apply remote event","readwrite-primary",X=>{let oe=d.hs.newChangeBuffer({trackRemovals:!0});O=d.us;let Ge=[];v.targetChanges.forEach((ur,wr)=>{var vn;let Hn=O.get(wr);if(!Hn)return;Ge.push(d.Gr.removeMatchingKeys(X,ur.removedDocuments,wr).next(()=>d.Gr.addMatchingKeys(X,ur.addedDocuments,wr)));let Jn=Hn.withSequenceNumber(X.currentSequenceNumber);v.targetMismatches.get(wr)!==null?Jn=Jn.withResumeToken(As.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):ur.resumeToken.approximateByteSize()>0&&(Jn=Jn.withResumeToken(ur.resumeToken,_)),O=O.insert(wr,Jn),vn=Jn,(Hn.resumeToken.approximateByteSize()===0||vn.snapshotVersion.toMicroseconds()-Hn.snapshotVersion.toMicroseconds()>=3e8||ur.addedDocuments.size+ur.modifiedDocuments.size+ur.removedDocuments.size>0)&&Ge.push(d.Gr.updateTargetData(X,Jn))});let Tt=hi,ar=Dt();if(v.documentUpdates.forEach(ur=>{v.resolvedLimboDocuments.has(ur)&&Ge.push(d.persistence.referenceDelegate.updateLimboDocument(X,ur))}),Ge.push(vh(X,oe,v.documentUpdates).next(ur=>{Tt=ur.Is,ar=ur.Es})),!_.isEqual(Ct.min())){let ur=d.Gr.getLastRemoteSnapshotVersion(X).next(wr=>d.Gr.setTargetsMetadata(X,X.currentSequenceNumber,_));Ge.push(ur)}return Pt.waitFor(Ge).next(()=>oe.apply(X)).next(()=>d.localDocuments.getLocalViewOfDocuments(X,Tt,ar)).next(()=>Tt)}).then(X=>(d.us=O,X))}(m.localStore,i);i.targetChanges.forEach((d,v)=>{let _=m.Ba.get(v);_&&(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1||_e(),d.addedDocuments.size>0?_.Fa=!0:d.modifiedDocuments.size>0?_.Fa||_e():d.removedDocuments.size>0&&(_.Fa||_e(),_.Fa=!1))}),await ah(m,o,i)}catch(o){await On(o)}}function uy(m,i,o){var d;if(m.isPrimaryClient&&o===0||!m.isPrimaryClient&&o===1){let v,_=[];m.xa.forEach((O,X)=>{let oe=X.view.ea(i);oe.snapshot&&_.push(oe.snapshot)}),(d=m.eventManager).onlineState=i,v=!1,d.queries.forEach((O,X)=>{for(let oe of X.J_)oe.ea(i)&&(v=!0)}),v&&ep(d),_.length&&m.Ma.R_(_),m.onlineState=i,m.isPrimaryClient&&m.sharedClientState.setOnlineState(i)}}async function wv(m,i,o){m.sharedClientState.updateQueryState(i,"rejected",o);let d=m.Ba.get(i),v=d&&d.key;if(v){let _=new Qr(Et.comparator);_=_.insert(v,Sa.newNoDocument(v,Ct.min()));let O=Dt().add(v),X=new Qi(Ct.min(),new Map,new Qr(lt),_,O);await ly(m,X),m.La=m.La.remove(v),m.Ba.delete(i),sh(m)}else await Ed(m.localStore,i,!1).then(()=>Th(m,i,o)).catch(On)}async function cy(m,i){var o;let d=i.batch.batchId;try{let v=await(o=m.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",_=>{let O=i.batch.keys(),X=o.hs.newChangeBuffer({trackRemovals:!0});return function(oe,Ge,Tt,ar){let ur=Tt.batch,wr=ur.keys(),vn=Pt.resolve();return wr.forEach(Hn=>{vn=vn.next(()=>ar.getEntry(Ge,Hn)).next(Jn=>{let Os=Tt.docVersions.get(Hn);Os!==null||_e(),0>Jn.version.compareTo(Os)&&(ur.applyToRemoteDocument(Jn,Tt),Jn.isValidDocument()&&(Jn.setReadTime(Tt.commitVersion),ar.addEntry(Jn)))})}),vn.next(()=>oe.mutationQueue.removeMutationBatch(Ge,ur))}(o,_,i,X).next(()=>X.apply(_)).next(()=>o.mutationQueue.performConsistencyCheck(_)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(_,O,i.batch.batchId)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,function(oe){let Ge=Dt();for(let Tt=0;Tt<oe.mutationResults.length;++Tt)oe.mutationResults[Tt].transformResults.length>0&&(Ge=Ge.add(oe.batch.mutations[Tt].key));return Ge}(i))).next(()=>o.localDocuments.getDocuments(_,O))});np(m,d,null),rp(m,d),m.sharedClientState.updateMutationState(d,"acknowledged"),await ah(m,v)}catch(v){await On(v)}}async function bv(m,i,o){var d;try{let v=await(d=m.localStore).persistence.runTransaction("Reject batch","readwrite-primary",_=>{let O;return d.mutationQueue.lookupMutationBatch(_,i).next(X=>(X!==null||_e(),O=X.keys(),d.mutationQueue.removeMutationBatch(_,X))).next(()=>d.mutationQueue.performConsistencyCheck(_)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(_,O,i)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,O)).next(()=>d.localDocuments.getDocuments(_,O))});np(m,i,o),rp(m,i),m.sharedClientState.updateMutationState(i,"rejected",o),await ah(m,v)}catch(v){await On(v)}}function rp(m,i){(m.Qa.get(i)||[]).forEach(o=>{o.resolve()}),m.Qa.delete(i)}function np(m,i,o){let d=m.qa[m.currentUser.toKey()];if(d){let v=d.get(i);v&&(o?v.reject(o):v.resolve(),d=d.remove(i)),m.qa[m.currentUser.toKey()]=d}}function Th(m,i,o=null){for(let d of(m.sharedClientState.removeLocalQueryTarget(i),m.Oa.get(i)))m.xa.delete(d),o&&m.Ma.Wa(d,o);m.Oa.delete(i),m.isPrimaryClient&&m.ka.yr(i).forEach(d=>{m.ka.containsKey(d)||Hp(m,d)})}function Hp(m,i){m.Na.delete(i.path.canonicalString());let o=m.La.get(i);o!==null&&(ha(m.remoteStore,o),m.La=m.La.remove(i),m.Ba.delete(o),sh(m))}function ff(m,i,o){for(let d of o)d instanceof Eo?(m.ka.addReference(d.key,i),function(v,_){let O=_.key,X=O.path.canonicalString();v.La.get(O)||v.Na.has(X)||(ce("SyncEngine","New document in limbo: "+O),v.Na.add(X),sh(v))}(m,d)):d instanceof Uc?(ce("SyncEngine","Document no longer in limbo: "+d.key),m.ka.removeReference(d.key,i),m.ka.containsKey(d.key)||Hp(m,d.key)):_e()}function sh(m){for(;m.Na.size>0&&m.La.size<m.maxConcurrentLimboResolutions;){let i=m.Na.values().next().value;m.Na.delete(i);let o=new Et(Qe.fromString(i)),d=m.Ka.next();m.Ba.set(d,new zp(o)),m.La=m.La.insert(o,d),ja(m.remoteStore,new dn(Zt(ts(o.path)),d,"TargetPurposeLimboResolution",En.oe))}}async function ah(m,i,o){let d=[],v=[],_=[];m.xa.isEmpty()||(m.xa.forEach((O,X)=>{_.push(m.Ua(X,i,o).then(oe=>{var Ge;if((oe||o)&&m.isPrimaryClient){let Tt=oe?!oe.fromCache:(Ge=o?.targetChanges.get(X.targetId))===null||Ge===void 0?void 0:Ge.current;m.sharedClientState.updateQueryState(X.targetId,Tt?"current":"not-current")}if(oe){d.push(oe);let Tt=bd.zi(X.targetId,oe);v.push(Tt)}}))}),await Promise.all(_),m.Ma.R_(d),await async function(O,X){try{await O.persistence.runTransaction("notifyLocalViewChanges","readwrite",oe=>Pt.forEach(X,Ge=>Pt.forEach(Ge.Wi,Tt=>O.persistence.referenceDelegate.addReference(oe,Ge.targetId,Tt)).next(()=>Pt.forEach(Ge.Gi,Tt=>O.persistence.referenceDelegate.removeReference(oe,Ge.targetId,Tt)))))}catch(oe){if(!Ri(oe))throw oe;ce("LocalStore","Failed to update sequence numbers: "+oe)}for(let oe of X){let Ge=oe.targetId;if(!oe.fromCache){let Tt=O.us.get(Ge),ar=Tt.snapshotVersion,ur=Tt.withLastLimboFreeSnapshotVersion(ar);O.us=O.us.insert(Ge,ur)}}}(m.localStore,v))}async function Kp(m,i){var o;if(!m.currentUser.isEqual(i)){ce("SyncEngine","User change. New user:",i.toKey());let d=await $u(m.localStore,i);m.currentUser=i,o="'waitForPendingWrites' promise is rejected due to a user change.",m.Qa.forEach(v=>{v.forEach(_=>{_.reject(new pt(Fe.CANCELLED,o))})}),m.Qa.clear(),m.sharedClientState.handleUserChange(i,d.removedBatchIds,d.addedBatchIds),await ah(m,d.Ts)}}function Zm(m,i){let o=m.Ba.get(i);if(o&&o.Fa)return Dt().add(o.key);{let d=Dt(),v=m.Oa.get(i);if(!v)return d;for(let _ of v){let O=m.xa.get(_);d=d.unionWith(O.view.fa)}return d}}async function hy(m,i){let o=await oo(m.localStore,i.query,!0),d=i.view.va(o);return m.isPrimaryClient&&ff(m,i.targetId,d.ba),d}async function eg(m,i){return th(m.localStore,i).then(o=>ah(m,o))}async function xh(m,i,o,d){let v=await function(_,O){let X=_.mutationQueue;return _.persistence.runTransaction("Lookup mutation documents","readonly",oe=>X.On(oe,O).next(Ge=>Ge?_.localDocuments.getDocuments(oe,Ge):Pt.resolve(null)))}(m.localStore,i);v!==null?(o==="pending"?await ou(m.remoteStore):o==="acknowledged"||o==="rejected"?(np(m,i,d||null),rp(m,i),function(_,O){_.mutationQueue.Ln(O)}(m.localStore,i)):_e(),await ah(m,v)):ce("SyncEngine","Cannot apply mutation batch with id: "+i)}async function dy(m,i){if(Ch(m),pf(m),i===!0&&m.$a!==!0){let o=m.sharedClientState.getAllActiveQueryTargets(),d=await fy(m,o.toArray());for(let v of(m.$a=!0,await wc(m.remoteStore,!0),d))ja(m.remoteStore,v)}else if(i===!1&&m.$a!==!1){let o=[],d=Promise.resolve();m.Oa.forEach((v,_)=>{m.sharedClientState.isLocalQueryTarget(_)?o.push(_):d=d.then(()=>(Th(m,_),Ed(m.localStore,_,!0))),ha(m.remoteStore,_)}),await d,await fy(m,o),m.Ba.forEach((v,_)=>{ha(m.remoteStore,_)}),m.ka.wr(),m.Ba=new Map,m.La=new Qr(Et.comparator),m.$a=!1,await wc(m.remoteStore,!1)}}async function fy(m,i,o){let d=[],v=[];for(let _ of i){let O,X=m.Oa.get(_);if(X&&X.length!==0)for(let oe of(O=await Mc(m.localStore,Zt(X[0])),X)){let Ge=m.xa.get(oe),Tt=await hy(m,Ge);Tt.snapshot&&v.push(Tt.snapshot)}else{let oe=await Vp(m.localStore,_);O=await Mc(m.localStore,oe),await Gp(m,Al(oe),_,!1,O.resumeToken)}d.push(O)}return m.Ma.R_(v),d}function Al(m){var i,o,d,v;return i=m.path,o=m.collectionGroup,d=m.orderBy,v=m.filters,new Dn(i,o,d,v,m.limit,"F",m.startAt,m.endAt)}function Wp(m){return m.localStore.persistence.$i()}async function $c(m,i,o,d){if(m.$a)return void ce("SyncEngine","Ignoring unexpected query state notification.");let v=m.Oa.get(i);if(v&&v.length>0)switch(o){case"current":case"not-current":{let _=await th(m.localStore,ws(v[0])),O=Qi.createSynthesizedRemoteEventForCurrentChange(i,o==="current",As.EMPTY_BYTE_STRING);await ah(m,_,O);break}case"rejected":await Ed(m.localStore,i,!0),Th(m,i,d);break;default:_e()}}async function Jp(m,i,o){let d=Ch(m);if(d.$a){for(let v of i){if(d.Oa.has(v)&&d.sharedClientState.isActiveQueryTarget(v)){ce("SyncEngine","Adding an already active target "+v);continue}let _=await Vp(d.localStore,v),O=await Mc(d.localStore,_);await Gp(d,Al(_),O.targetId,!1,O.resumeToken),ja(d.remoteStore,O)}for(let v of o)d.Oa.has(v)&&await Ed(d.localStore,v,!1).then(()=>{ha(d.remoteStore,v),Th(d,v)}).catch(On)}}function Ch(m){return m.remoteStore.remoteSyncer.applyRemoteEvent=ly.bind(null,m),m.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zm.bind(null,m),m.remoteStore.remoteSyncer.rejectListen=wv.bind(null,m),m.Ma.R_=yv.bind(null,m.eventManager),m.Ma.Wa=ay.bind(null,m.eventManager),m}function pf(m){return m.remoteStore.remoteSyncer.applySuccessfulWrite=cy.bind(null,m),m.remoteStore.remoteSyncer.rejectFailedWrite=bv.bind(null,m),m}class mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(i){this.serializer=Bu(i.databaseInfo.databaseId),this.sharedClientState=this.za(i),this.persistence=this.ja(i),await this.persistence.start(),this.localStore=this.Ha(i),this.gcScheduler=this.Ja(i,this.localStore),this.indexBackfillerScheduler=this.Ya(i,this.localStore)}Ja(i,o){return null}Ya(i,o){return null}Ha(i){var o;return o=this.persistence,new Sd(o,new Su,i.initialUser,this.serializer)}ja(i){return new vd(Sl.ei,this.serializer)}za(i){return new of}async terminate(){var i,o;(i=this.gcScheduler)===null||i===void 0||i.stop(),(o=this.indexBackfillerScheduler)===null||o===void 0||o.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mf.provider={build:()=>new mf};class ip extends mf{constructor(i){super(),this.cacheSizeBytes=i}Ja(i,o){return this.persistence.referenceDelegate instanceof yh||_e(),new cl(this.persistence.referenceDelegate.garbageCollector,i.asyncQueue,o)}ja(i){let o=this.cacheSizeBytes!==void 0?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new vd(d=>yh.ei(d,o),this.serializer)}}class tg extends mf{constructor(i,o,d){super(),this.Za=i,this.cacheSizeBytes=o,this.forceOwnership=d,this.kind="persistent",this.synchronizeTabs=!1}async initialize(i){await super.initialize(i),await this.Za.initialize(this,i),await pf(this.Za.syncEngine),await ou(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(i){var o;return o=this.persistence,new Sd(o,new Su,i.initialUser,this.serializer)}Ja(i,o){return new cl(this.persistence.referenceDelegate.garbageCollector,i.asyncQueue,o)}Ya(i,o){let d=new tr(o,this.persistence);return new Yt(i.asyncQueue,d)}ja(i){let o=Uh(i.databaseInfo.databaseId,i.databaseInfo.persistenceKey),d=this.cacheSizeBytes!==void 0?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new gr(this.synchronizeTabs,o,i.clientId,d,i.asyncQueue,qh(),sc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(i){return new of}}class rg{async initialize(i,o){this.localStore||(this.localStore=i.localStore,this.sharedClientState=i.sharedClientState,this.datastore=this.createDatastore(o),this.remoteStore=this.createRemoteStore(o),this.eventManager=this.createEventManager(o),this.syncEngine=this.createSyncEngine(o,!i.synchronizeTabs),this.sharedClientState.onlineStateHandler=d=>uy(this.syncEngine,d,1),this.remoteStore.remoteSyncer.handleCredentialChange=Kp.bind(null,this.syncEngine),await wc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(i){return new $p}createDatastore(i){let o=Bu(i.databaseInfo.databaseId),d=new Bh(i.databaseInfo);return new Eh(i.authCredentials,i.appCheckCredentials,d,o)}createRemoteStore(i){var o;return o=this.localStore,new au(o,this.datastore,i.asyncQueue,d=>uy(this.syncEngine,d,0),_d.p()?new _d:new Yf)}createSyncEngine(i,o){return function(d,v,_,O,X,oe,Ge){let Tt=new oy(d,v,_,O,X,oe);return Ge&&(Tt.$a=!0),Tt}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,i.initialUser,i.maxConcurrentLimboResolutions,o)}async terminate(){var i,o;await async function(d){ce("RemoteStore","RemoteStore shutting down."),d.k_.add(5),await Fc(d),d.Q_.shutdown(),d.K_.set("Unknown")}(this.remoteStore),(i=this.datastore)===null||i===void 0||i.terminate(),(o=this.eventManager)===null||o===void 0||o.terminate()}}rg.provider={build:()=>new rg};class Sv{constructor(i){this.observer=i,this.muted=!1}next(i){this.muted||this.observer.next&&this.Xa(this.observer.next,i)}error(i){this.muted||(this.observer.error?this.Xa(this.observer.error,i):Ke("Uncaught Error in snapshot listener:",i.toString()))}eu(){this.muted=!0}Xa(i,o){setTimeout(()=>{this.muted||i(o)},0)}}class Hh{constructor(i,o,d,v,_){this.authCredentials=i,this.appCheckCredentials=o,this.asyncQueue=d,this.databaseInfo=v,this.user=F.UNAUTHENTICATED,this.clientId=mt.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=_,this.authCredentials.start(d,async O=>{ce("FirestoreClient","Received user=",O.uid),await this.authCredentialListener(O),this.user=O}),this.appCheckCredentials.start(d,O=>(ce("FirestoreClient","Received new app check token=",O),this.appCheckCredentialListener(O,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(i){this.authCredentialListener=i}setAppCheckTokenChangeListener(i){this.appCheckCredentialListener=i}terminate(){this.asyncQueue.enterRestrictedMode();let i=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),i.resolve()}catch(o){let d=Ra(o,"Failed to shutdown persistence");i.reject(d)}}),i.promise}}async function lu(m,i){m.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");let o=m.configuration;await i.initialize(o);let d=o.initialUser;m.setCredentialChangeListener(async v=>{d.isEqual(v)||(await $u(i.localStore,v),d=v)}),i.persistence.setDatabaseDeletedListener(()=>m.terminate()),m._offlineComponents=i}async function gf(m,i){m.asyncQueue.verifyOperationInProgress();let o=await Cd(m);ce("FirestoreClient","Initializing OnlineComponentProvider"),await i.initialize(o,m.configuration),m.setCredentialChangeListener(d=>Ih(i.remoteStore,d)),m.setAppCheckTokenChangeListener((d,v)=>Ih(i.remoteStore,v)),m._onlineComponents=i}async function Cd(m){if(!m._offlineComponents)if(m._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await lu(m,m._uninitializedComponentsProvider._offline)}catch(i){if(!(i.name==="FirebaseError"?i.code===Fe.FAILED_PRECONDITION||i.code===Fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11))throw i;Je("Error using user provided cache. Falling back to memory cache: "+i),await lu(m,new mf)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await lu(m,new ip(void 0));return m._offlineComponents}async function yf(m){return m._onlineComponents||(m._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await gf(m,m._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await gf(m,new rg))),m._onlineComponents}async function uu(m){let i=await yf(m),o=i.eventManager;return o.onListen=da.bind(null,i.syncEngine),o.onUnlisten=tp.bind(null,i.syncEngine),o.onFirstRemoteStoreListen=to.bind(null,i.syncEngine),o.onLastRemoteStoreUnlisten=df.bind(null,i.syncEngine),o}function py(m){let i={};return m.timeoutSeconds!==void 0&&(i.timeoutSeconds=m.timeoutSeconds),i}let ng=new Map;function Ys(m,i,o){if(!o)throw new pt(Fe.INVALID_ARGUMENT,`Function ${m}() cannot be called with an empty ${i}.`)}function kh(m){if(!Et.isDocumentKey(m))throw new pt(Fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${m} has ${m.length}.`)}function ig(m){if(Et.isDocumentKey(m))throw new pt(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${m} has ${m.length}.`)}function Qp(m){if(m===void 0)return"undefined";if(m===null)return"null";if(typeof m=="string")return m.length>20&&(m=`${m.substring(0,20)}...`),JSON.stringify(m);if(typeof m=="number"||typeof m=="boolean")return""+m;if(typeof m=="object"){if(m instanceof Array)return"an array";{var i;let o=(i=m).constructor?i.constructor.name:null;return o?`a custom ${o} object`:"an object"}}return typeof m=="function"?"a function":_e()}function vf(m,i){if("_delegate"in m&&(m=m._delegate),!(m instanceof i)){if(i.name===m.constructor.name)throw new pt(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let o=Qp(m);throw new pt(Fe.INVALID_ARGUMENT,`Expected type '${i.name}', but it was: ${o}`)}}return m}class Yp{constructor(i){var o,d;if(i.host===void 0){if(i.ssl!==void 0)throw new pt(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=i.host,this.ssl=(o=i.ssl)===null||o===void 0||o;if(this.credentials=i.credentials,this.ignoreUndefinedProperties=!!i.ignoreUndefinedProperties,this.localCache=i.localCache,i.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(i.cacheSizeBytes!==-1&&i.cacheSizeBytes<1048576)throw new pt(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=i.cacheSizeBytes}(function(v,_,O,X){if(_===!0&&X===!0)throw new pt(Fe.INVALID_ARGUMENT,`${v} and ${O} cannot be used together.`)})("experimentalForceLongPolling",i.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",i.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!i.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:i.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!i.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=py((d=i.experimentalLongPollingOptions)!==null&&d!==void 0?d:{}),function(v){if(v.timeoutSeconds!==void 0){if(isNaN(v.timeoutSeconds))throw new pt(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${v.timeoutSeconds} (must not be NaN)`);if(v.timeoutSeconds<5)throw new pt(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${v.timeoutSeconds} (minimum allowed value is 5)`);if(v.timeoutSeconds>30)throw new pt(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${v.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!i.useFetchStreams}isEqual(i){var o,d;return this.host===i.host&&this.ssl===i.ssl&&this.credentials===i.credentials&&this.cacheSizeBytes===i.cacheSizeBytes&&this.experimentalForceLongPolling===i.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===i.experimentalAutoDetectLongPolling&&(o=this.experimentalLongPollingOptions,d=i.experimentalLongPollingOptions,o.timeoutSeconds===d.timeoutSeconds)&&this.ignoreUndefinedProperties===i.ignoreUndefinedProperties&&this.useFetchStreams===i.useFetchStreams}}class wf{constructor(i,o,d,v){this._authCredentials=i,this._appCheckCredentials=o,this._databaseId=d,this._app=v,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(i){if(this._settingsFrozen)throw new pt(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yp(i),i.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new tt;switch(o.type){case"firstParty":return new ve(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new pt(Fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(i.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){let o=ng.get(i);o&&(ce("ComponentProvider","Removing Datastore"),ng.delete(i),o.terminate())}(this),Promise.resolve()}}class Gu{constructor(i,o,d){this.converter=o,this._query=d,this.type="query",this.firestore=i}withConverter(i){return new Gu(this.firestore,i,this._query)}}class zo{constructor(i,o,d){this.converter=o,this._key=d,this.type="document",this.firestore=i}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rh(this.firestore,this.converter,this._key.path.popLast())}withConverter(i){return new zo(this.firestore,i,this._key)}}class Rh extends Gu{constructor(i,o,d){super(i,o,ts(d)),this._path=d,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let i=this._path.popLast();return i.isEmpty()?null:new zo(this.firestore,null,new Et(i))}withConverter(i){return new Rh(this.firestore,i,this._path)}}function kd(m,i,...o){if(m=(0,Se.m9)(m),Ys("collection","path",i),m instanceof wf){let d=Qe.fromString(i,...o);return ig(d),new Rh(m,null,d)}{if(!(m instanceof zo||m instanceof Rh))throw new pt(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let d=m._path.child(Qe.fromString(i,...o));return ig(d),new Rh(m.firestore,null,d)}}function Ev(m,i,...o){if(m=(0,Se.m9)(m),arguments.length==1&&(i=mt.newId()),Ys("doc","path",i),m instanceof wf){let d=Qe.fromString(i,...o);return kh(d),new zo(m,null,new Et(d))}{if(!(m instanceof zo||m instanceof Rh))throw new pt(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let d=m._path.child(Qe.fromString(i,...o));return kh(d),new zo(m.firestore,m instanceof Rh?m.converter:null,new Et(d))}}class bf{constructor(i=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new rh(this,"async_queue_retry"),this.fu=()=>{let d=sc();d&&ce("AsyncQueue","Visibility state changed to "+d.visibilityState),this.r_.Jo()},this.gu=i;let o=sc();o&&typeof o.addEventListener=="function"&&o.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(i){this.enqueue(i)}enqueueAndForgetEvenWhileRestricted(i){this.pu(),this.yu(i)}enterRestrictedMode(i){if(!this.Eu){this.Eu=!0,this.Vu=i||!1;let o=sc();o&&typeof o.removeEventListener=="function"&&o.removeEventListener("visibilitychange",this.fu)}}enqueue(i){if(this.pu(),this.Eu)return new Promise(()=>{});let o=new lr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(i().then(o.resolve,o.reject),o.promise)).then(()=>o.promise)}enqueueRetryable(i){this.enqueueAndForget(()=>(this.Iu.push(i),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(i){if(!Ri(i))throw i;ce("AsyncQueue","Operation failed with retryable error: "+i)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(i){let o=this.gu.then(()=>(this.Ru=!0,i().catch(d=>{let v;throw this.Au=d,this.Ru=!1,Ke("INTERNAL UNHANDLED ERROR: ",(v=d.message||"",d.stack&&(v=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),v)),d}).then(d=>(this.Ru=!1,d))));return this.gu=o,o}enqueueAfterDelay(i,o,d){this.pu(),this.mu.indexOf(i)>-1&&(o=0);let v=zu.createAndSchedule(this,i,o,d,_=>this.Su(_));return this.du.push(v),v}pu(){this.Au&&_e()}verifyOperationInProgress(){}async bu(){let i;do i=this.gu,await i;while(i!==this.gu)}Du(i){for(let o of this.du)if(o.timerId===i)return!0;return!1}vu(i){return this.bu().then(()=>{for(let o of(this.du.sort((d,v)=>d.targetTimeMs-v.targetTimeMs),this.du))if(o.skipDelay(),i!=="all"&&o.timerId===i)break;return this.bu()})}Cu(i){this.mu.push(i)}Su(i){let o=this.du.indexOf(i);this.du.splice(o,1)}}class Xp extends wf{constructor(i,o,d,v){super(i,o,d,v),this.type="firestore",this._queue=new bf,this._persistenceKey=v?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let i=this._firestoreClient.terminate();this._queue=new bf(i),this._firestoreClient=void 0,await i}}}function _v(m,i){let o=typeof m=="object"?m:(0,Y.Mq)(),d=(0,Y.qX)(o,"firestore").getImmediate({identifier:typeof m=="string"?m:i||"(default)"});if(!d._initialized){let v=(0,Se.P0)("firestore");v&&function(_,O,X,oe={}){var Ge;let Tt=(_=vf(_,wf))._getSettings(),ar=`${O}:${X}`;if(Tt.host!=="firestore.googleapis.com"&&Tt.host!==ar&&Je("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),_._setSettings(Object.assign(Object.assign({},Tt),{host:ar,ssl:!1})),oe.mockUserToken){let ur,wr;if(typeof oe.mockUserToken=="string")ur=oe.mockUserToken,wr=F.MOCK_USER;else{ur=(0,Se.Sg)(oe.mockUserToken,(Ge=_._app)===null||Ge===void 0?void 0:Ge.options.projectId);let vn=oe.mockUserToken.sub||oe.mockUserToken.user_id;if(!vn)throw new pt(Fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");wr=new F(vn)}_._authCredentials=new we(new Ne(ur,wr))}}(d,...v)}return d}function Sf(m){if(m._terminated)throw new pt(Fe.FAILED_PRECONDITION,"The client has already been terminated.");return m._firestoreClient||function(i){var o,d,v,_;let O=i._freezeSettings(),X=(_=i._databaseId,new Rc(_,((o=i._app)===null||o===void 0?void 0:o.options.appId)||"",i._persistenceKey,O.host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,py(O.experimentalLongPollingOptions),O.useFetchStreams));i._componentsProvider||((d=O.localCache)===null||d===void 0?void 0:d._offlineComponentProvider)&&((v=O.localCache)===null||v===void 0?void 0:v._onlineComponentProvider)&&(i._componentsProvider={_offline:O.localCache._offlineComponentProvider,_online:O.localCache._onlineComponentProvider}),i._firestoreClient=new Hh(i._authCredentials,i._appCheckCredentials,i._queue,X,i._componentsProvider&&function(oe){let Ge=oe?._online.build();return{_offline:oe?._offline.build(Ge),_online:Ge}}(i._componentsProvider))}(m),m._firestoreClient}class Rd{constructor(i){this._byteString=i}static fromBase64String(i){try{return new Rd(As.fromBase64String(i))}catch(o){throw new pt(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+o)}}static fromUint8Array(i){return new Rd(As.fromUint8Array(i))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(i){return this._byteString.isEqual(i._byteString)}}class Xl{constructor(...i){for(let o=0;o<i.length;++o)if(i[o].length===0)throw new pt(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(i)}isEqual(i){return this._internalPath.isEqual(i._internalPath)}}class Iu{constructor(i){this._methodName=i}}class Pd{constructor(i,o){if(!isFinite(i)||i<-90||i>90)throw new pt(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+i);if(!isFinite(o)||o<-180||o>180)throw new pt(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+o);this._lat=i,this._long=o}get latitude(){return this._lat}get longitude(){return this._long}isEqual(i){return this._lat===i._lat&&this._long===i._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(i){return lt(this._lat,i._lat)||lt(this._long,i._long)}}class sg{constructor(i){this._values=(i||[]).map(o=>o)}toArray(){return this._values.map(i=>i)}isEqual(i){return function(o,d){if(o.length!==d.length)return!1;for(let v=0;v<o.length;++v)if(o[v]!==d[v])return!1;return!0}(this._values,i._values)}}let Ph=/^__.*__$/;class my{constructor(i,o,d){this.data=i,this.fieldMask=o,this.fieldTransforms=d}toMutation(i,o){return this.fieldMask!==null?new Ya(i,this.data,this.fieldMask,o,this.fieldTransforms):new Lo(i,this.data,o,this.fieldTransforms)}}class Ad{constructor(i,o,d){this.data=i,this.fieldMask=o,this.fieldTransforms=d}toMutation(i,o){return new Ya(i,this.data,this.fieldMask,o,this.fieldTransforms)}}function Nd(m){switch(m){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Zp{constructor(i,o,d,v,_,O){this.settings=i,this.databaseId=o,this.serializer=d,this.ignoreUndefinedProperties=v,_===void 0&&this.Fu(),this.fieldTransforms=_||[],this.fieldMask=O||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(i){return new Zp(Object.assign(Object.assign({},this.settings),i),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(i){var o;let d=(o=this.path)===null||o===void 0?void 0:o.child(i),v=this.xu({path:d,Nu:!1});return v.Lu(i),v}Bu(i){var o;let d=(o=this.path)===null||o===void 0?void 0:o.child(i),v=this.xu({path:d,Nu:!1});return v.Fu(),v}ku(i){return this.xu({path:void 0,Nu:!0})}qu(i){return Od(i,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(i){return this.fieldMask.find(o=>i.isPrefixOf(o))!==void 0||this.fieldTransforms.find(o=>i.isPrefixOf(o.field))!==void 0}Fu(){if(this.path)for(let i=0;i<this.path.length;i++)this.Lu(this.path.get(i))}Lu(i){if(i.length===0)throw this.qu("Document fields must not be empty");if(Nd(this.Mu)&&Ph.test(i))throw this.qu('Document fields cannot begin and end with "__"')}}class gy{constructor(i,o,d){this.databaseId=i,this.ignoreUndefinedProperties=o,this.serializer=d||Bu(i)}$u(i,o,d,v=!1){return new Zp({Mu:i,methodName:o,Ku:d,path:Rt.emptyPath(),Nu:!1,Qu:v},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ag(m){let i=m._freezeSettings(),o=Bu(m._databaseId);return new gy(m._databaseId,!!i.ignoreUndefinedProperties,o)}class og extends Iu{_toFieldTransform(i){if(i.Mu!==2)throw i.Mu===1?i.qu(`${this._methodName}() can only appear at the top level of your update data`):i.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return i.fieldMask.push(i.path),null}isEqual(i){return i instanceof og}}function lg(m,i,o){return new Zp({Mu:3,Ku:i.settings.Ku,methodName:m._methodName,Nu:o},i.databaseId,i.serializer,i.ignoreUndefinedProperties)}class em extends null{_toFieldTransform(i){return new Oa(i.path,new xa)}isEqual(i){return i instanceof em}}class tm extends Iu{constructor(i,o){super(i),this.Uu=o}_toFieldTransform(i){let o=lg(this,i,!0),d=new Ea(this.Uu.map(v=>rm(v,o)));return new Oa(i.path,d)}isEqual(i){return i instanceof tm&&(0,Se.vZ)(this.Uu,i.Uu)}}class ug extends Iu{constructor(i,o){super(i),this.Uu=o}_toFieldTransform(i){let o=lg(this,i,!0),d=new ia(this.Uu.map(v=>rm(v,o)));return new Oa(i.path,d)}isEqual(i){return i instanceof ug&&(0,Se.vZ)(this.Uu,i.Uu)}}class Iv extends Iu{constructor(i,o){super(i),this.Wu=o}_toFieldTransform(i){let o=new _a(i.serializer,Sn(i.serializer,this.Wu));return new Oa(i.path,o)}isEqual(i){return i instanceof Iv&&this.Wu===i.Wu}}function yy(m,i,o,d=!1){return rm(o,m.$u(d?4:3,i))}function rm(m,i){if(xv(m=(0,Se.m9)(m)))return nm("Unsupported field value:",i,m),Tv(m,i);if(m instanceof Iu)return function(o,d){if(!Nd(d.Mu))throw d.qu(`${o._methodName}() can only be used with update() and set()`);if(!d.path)throw d.qu(`${o._methodName}() is not currently supported inside arrays`);let v=o._toFieldTransform(d);v&&d.fieldTransforms.push(v)}(m,i),null;if(m===void 0&&i.ignoreUndefinedProperties)return null;if(i.path&&i.fieldMask.push(i.path),m instanceof Array){if(i.settings.Nu&&i.Mu!==4)throw i.qu("Nested arrays are not supported");return function(o,d){let v=[],_=0;for(let O of o){let X=rm(O,d.ku(_));X==null&&(X={nullValue:"NULL_VALUE"}),v.push(X),_++}return{arrayValue:{values:v}}}(m,i)}return function(o,d){if((o=(0,Se.m9)(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return Sn(d.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){let v=bt.fromDate(o);return{timestampValue:Oc(d.serializer,v)}}if(o instanceof bt){let v=new bt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Oc(d.serializer,v)}}if(o instanceof Pd)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Rd)return{bytesValue:Du(d.serializer,o._byteString)};if(o instanceof zo){let v=d.databaseId,_=o.firestore._databaseId;if(!_.isEqual(v))throw d.qu(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${v.projectId}/${v.database}`);return{referenceValue:iu(o.firestore._databaseId||d.databaseId,o._key.path)}}if(o instanceof sg)return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(v=>{if(typeof v!="number")throw d.qu("VectorValues must only contain numeric values.");return mr(d.serializer,v)})}}}}};throw d.qu(`Unsupported field value: ${Qp(o)}`)}(m,i)}function Tv(m,i){let o={};return zn(m)?i.path&&i.path.length>0&&i.fieldMask.push(i.path):Qn(m,(d,v)=>{let _=rm(v,i.Ou(d));_!=null&&(o[d]=_)}),{mapValue:{fields:o}}}function xv(m){return!(typeof m!="object"||m===null||m instanceof Array||m instanceof Date||m instanceof bt||m instanceof Pd||m instanceof Rd||m instanceof zo||m instanceof Iu||m instanceof sg)}function nm(m,i,o){if(!xv(o)||!(typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null))){let d=Qp(o);throw d==="an object"?i.qu(m+" a custom object"):i.qu(m+" "+d)}}function sp(m,i,o){if((i=(0,Se.m9)(i))instanceof Xl)return i._internalPath;if(typeof i=="string")return im(m,i);throw Od("Field path arguments must be of type string or ",m,!1,void 0,o)}let cg=RegExp("[~\\*/\\[\\]]");function im(m,i,o){if(i.search(cg)>=0)throw Od(`Invalid field path (${i}). Paths must not contain '~', '*', '/', '[', or ']'`,m,!1,void 0,o);try{return new Xl(...i.split("."))._internalPath}catch{throw Od(`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,m,!1,void 0,o)}}function Od(m,i,o,d,v){let _=d&&!d.isEmpty(),O=v!==void 0,X=`Function ${i}() called with invalid data`;o&&(X+=" (via `toFirestore()`)"),X+=". ";let oe="";return(_||O)&&(oe+=" (found",_&&(oe+=` in field ${d}`),O&&(oe+=` in document ${v}`),oe+=")"),new pt(Fe.INVALID_ARGUMENT,X+m+oe)}function vy(m,i){return m.some(o=>o.isEqual(i))}class hg{constructor(i,o,d,v,_){this._firestore=i,this._userDataWriter=o,this._key=d,this._document=v,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new zo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let i=new Cv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(i)}return this._userDataWriter.convertValue(this._document.data.value)}}get(i){if(this._document){let o=this._document.data.field(kv("DocumentSnapshot.get",i));if(o!==null)return this._userDataWriter.convertValue(o)}}}class Cv extends hg{data(){return super.data()}}function kv(m,i){return typeof i=="string"?im(m,i):i instanceof Xl?i._internalPath:i._delegate._internalPath}class Ef{}class Dd extends Ef{}class _f extends Dd{constructor(i,o,d){super(),this._field=i,this._op=o,this._value=d,this.type="where"}static _create(i,o,d){return new _f(i,o,d)}_apply(i){let o=this._parse(i);return Ey(i._query,o),new Gu(i.firestore,i.converter,_i(i._query,o))}_parse(i){let o=ag(i.firestore);return function(d,v,_,O,X,oe,Ge){let Tt;if(X.isKeyField()){if(oe==="array-contains"||oe==="array-contains-any")throw new pt(Fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${oe}' queries on documentId().`);if(oe==="in"||oe==="not-in"){Sy(Ge,oe);let ar=[];for(let ur of Ge)ar.push(Tu(O,d,ur));Tt={arrayValue:{values:ar}}}else Tt=Tu(O,d,Ge)}else oe!=="in"&&oe!=="not-in"&&oe!=="array-contains-any"||Sy(Ge,oe),Tt=yy(_,v,Ge,oe==="in"||oe==="not-in");return xs.create(X,oe,Tt)}(i._query,"where",o,i.firestore._databaseId,this._field,this._op,this._value)}}class wy extends Ef{constructor(i,o){super(),this.type=i,this._queryConstraints=o}static _create(i,o){return new wy(i,o)}_parse(i){let o=this._queryConstraints.map(d=>d._parse(i)).filter(d=>d.getFilters().length>0);return o.length===1?o[0]:Rs.create(o,this._getOperator())}_apply(i){let o=this._parse(i);return o.getFilters().length===0?i:(function(d,v){let _=d;for(let O of v.getFlattenedFilters())Ey(_,O),_=_i(_,O)}(i._query,o),new Gu(i.firestore,i.converter,_i(i._query,o)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dg extends Dd{constructor(i,o){super(),this._field=i,this._direction=o,this.type="orderBy"}static _create(i,o){return new dg(i,o)}_apply(i){let o=function(d,v,_){if(d.startAt!==null)throw new pt(Fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(d.endAt!==null)throw new pt(Fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bo(v,_)}(i._query,this._field,this._direction);return new Gu(i.firestore,i.converter,function(d,v){let _=d.explicitOrderBy.concat([v]);return new Dn(d.path,d.collectionGroup,_,d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(i._query,o))}}class fg extends Dd{constructor(i,o,d){super(),this.type=i,this._limit=o,this._limitType=d}static _create(i,o,d){return new fg(i,o,d)}_apply(i){return new Gu(i.firestore,i.converter,yi(i._query,this._limit,this._limitType))}}class Ah extends Dd{constructor(i,o,d){super(),this.type=i,this._docOrFields=o,this._inclusive=d}static _create(i,o,d){return new Ah(i,o,d)}_apply(i){var o;let d=by(i,this.type,this._docOrFields,this._inclusive);return new Gu(i.firestore,i.converter,new Dn((o=i._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt))}}class If extends Dd{constructor(i,o,d){super(),this.type=i,this._docOrFields=o,this._inclusive=d}static _create(i,o,d){return new If(i,o,d)}_apply(i){var o;let d=by(i,this.type,this._docOrFields,this._inclusive);return new Gu(i.firestore,i.converter,new Dn((o=i._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d))}}function by(m,i,o,d){if(o[0]=(0,Se.m9)(o[0]),o[0]instanceof hg)return function(v,_,O,X,oe){if(!X)throw new pt(Fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${O}().`);let Ge=[];for(let Tt of as(v))if(Tt.field.isKeyField())Ge.push(Qa(_,X.key));else{let ar=X.data.field(Tt.field);if(Au(ar))throw new pt(Fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Tt.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(ar===null){let ur=Tt.field.canonicalString();throw new pt(Fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ur}' (used as the orderBy) does not exist.`)}Ge.push(ar)}return new ma(Ge,oe)}(m._query,m.firestore._databaseId,i,o[0]._document,d);{let v=ag(m.firestore);return function(_,O,X,oe,Ge,Tt){let ar=_.explicitOrderBy;if(Ge.length>ar.length)throw new pt(Fe.INVALID_ARGUMENT,`Too many arguments provided to ${oe}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let ur=[];for(let wr=0;wr<Ge.length;wr++){let vn=Ge[wr];if(ar[wr].field.isKeyField()){if(typeof vn!="string")throw new pt(Fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${oe}(), but got a ${typeof vn}`);if(!gi(_)&&vn.indexOf("/")!==-1)throw new pt(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${oe}() must be a plain document ID, but '${vn}' contains a slash.`);let Hn=_.path.child(Qe.fromString(vn));if(!Et.isDocumentKey(Hn))throw new pt(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${oe}() must result in a valid document path, but '${Hn}' is not because it contains an odd number of segments.`);let Jn=new Et(Hn);ur.push(Qa(O,Jn))}else{let Hn=yy(X,oe,vn);ur.push(Hn)}}return new ma(ur,Tt)}(m._query,m.firestore._databaseId,v,i,o,d)}}function Tu(m,i,o){if(typeof(o=(0,Se.m9)(o))=="string"){if(o==="")throw new pt(Fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gi(i)&&o.indexOf("/")!==-1)throw new pt(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${o}' contains a '/' character.`);let d=i.path.child(Qe.fromString(o));if(!Et.isDocumentKey(d))throw new pt(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${d}' is not because it has an odd number of segments (${d.length}).`);return Qa(m,new Et(d))}if(o instanceof zo)return Qa(m,o._key);throw new pt(Fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qp(o)}.`)}function Sy(m,i){if(!Array.isArray(m)||m.length===0)throw new pt(Fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${i.toString()}' filters.`)}function Ey(m,i){let o=function(d,v){for(let _ of d)for(let O of _.getFlattenedFilters())if(v.indexOf(O.op)>=0)return O.op;return null}(m.filters,function(d){switch(d){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(i.op));if(o!==null)throw o===i.op?new pt(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${i.op.toString()}' filter.`):new pt(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${i.op.toString()}' filters with '${o.toString()}' filters.`)}class F0{convertValue(i,o="none"){switch(ta(i)){case 0:return null;case 1:return i.booleanValue;case 2:return qs(i.integerValue||i.doubleValue);case 3:return this.convertTimestamp(i.timestampValue);case 4:return this.convertServerTimestamp(i,o);case 5:return i.stringValue;case 6:return this.convertBytes(xl(i.bytesValue));case 7:return this.convertReference(i.referenceValue);case 8:return this.convertGeoPoint(i.geoPointValue);case 9:return this.convertArray(i.arrayValue,o);case 11:return this.convertObject(i.mapValue,o);case 10:return this.convertVectorValue(i.mapValue);default:throw _e()}}convertObject(i,o){return this.convertObjectMap(i.fields,o)}convertObjectMap(i,o="none"){let d={};return Qn(i,(v,_)=>{d[v]=this.convertValue(_,o)}),d}convertVectorValue(i){var o,d,v;return new sg((v=(d=(o=i.fields)===null||o===void 0?void 0:o.value.arrayValue)===null||d===void 0?void 0:d.values)===null||v===void 0?void 0:v.map(_=>qs(_.doubleValue)))}convertGeoPoint(i){return new Pd(qs(i.latitude),qs(i.longitude))}convertArray(i,o){return(i.values||[]).map(d=>this.convertValue(d,o))}convertServerTimestamp(i,o){switch(o){case"previous":let d=tc(i);return d==null?null:this.convertValue(d,o);case"estimate":return this.convertTimestamp($o(i));default:return null}}convertTimestamp(i){let o=Jo(i);return new bt(o.seconds,o.nanos)}convertDocumentKey(i,o){let d=Qe.fromString(i);Ci(d)||_e();let v=new ru(d.get(1),d.get(3)),_=new Et(d.popFirst(5));return v.isEqual(o)||Ke(`Document ${_} contains a document reference within a different database (${v.projectId}/${v.database}) which is not supported. It will be treated as a reference in the current database (${o.projectId}/${o.database}) instead.`),_}}class sm{constructor(i,o){this.hasPendingWrites=i,this.fromCache=o}isEqual(i){return this.hasPendingWrites===i.hasPendingWrites&&this.fromCache===i.fromCache}}class Kh extends hg{constructor(i,o,d,v,_,O){super(i,o,d,v,O),this._firestore=i,this._firestoreImpl=i,this.metadata=_}exists(){return super.exists()}data(i={}){if(this._document){if(this._converter){let o=new V0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,i)}return this._userDataWriter.convertValue(this._document.data.value,i.serverTimestamps)}}get(i,o={}){if(this._document){let d=this._document.data.field(kv("DocumentSnapshot.get",i));if(d!==null)return this._userDataWriter.convertValue(d,o.serverTimestamps)}}}class V0 extends Kh{data(i={}){return super.data(i)}}function U0(m){m=vf(m,zo);let i=vf(m.firestore,Xp);return function(o,d,v={}){let _=new lr;return o.asyncQueue.enqueueAndForget(async()=>function(O,X,oe,Ge,Tt){let ar=new Sv({next:wr=>{ar.eu(),X.enqueueAndForget(()=>qp(O,ur));let vn=wr.docs.has(oe);!vn&&wr.fromCache?Tt.reject(new pt(Fe.UNAVAILABLE,"Failed to get document because the client is offline.")):vn&&wr.fromCache&&Ge&&Ge.source==="server"?Tt.reject(new pt(Fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Tt.resolve(wr)},error:wr=>Tt.reject(wr)}),ur=new oc(ts(oe.path),ar,{includeMetadataChanges:!0,ua:!0});return Td(O,ur)}(await uu(o),o.asyncQueue,d,v,_)),_.promise}(Sf(i),m._key).then(o=>function(d,v,_){let O=_.docs.get(v._key),X=new Rv(d);return new Kh(d,X,v._key,O,new sm(_.hasPendingWrites,_.fromCache),v.converter)}(i,m,o))}class Rv extends F0{constructor(i){super(),this.firestore=i}convertBytes(i){return new Rd(i)}convertReference(i){let o=this.convertDocumentKey(i,this.firestore._databaseId);return new zo(this.firestore,null,o)}}function am(m,i,o){var d,v,_;m=vf(m,zo);let O=vf(m.firestore,Xp),X=(d=m.converter,v=i,_=o,d?_&&(_.merge||_.mergeFields)?d.toFirestore(v,_):d.toFirestore(v):v);return ap(O,[function(oe,Ge,Tt,ar,ur,wr={}){let vn,Hn,Jn=oe.$u(wr.merge||wr.mergeFields?2:0,Ge,Tt,ur);nm("Data must be an object, but it was:",Jn,ar);let Os=Tv(ar,Jn);if(wr.merge)vn=new Br(Jn.fieldMask),Hn=Jn.fieldTransforms;else if(wr.mergeFields){let Hi=[];for(let nr of wr.mergeFields){let Ot=sp(Ge,nr,Tt);if(!Jn.contains(Ot))throw new pt(Fe.INVALID_ARGUMENT,`Field '${Ot}' is specified in your field mask but missing from your input data.`);vy(Hi,Ot)||Hi.push(Ot)}vn=new Br(Hi),Hn=Jn.fieldTransforms.filter(nr=>vn.covers(nr.field))}else vn=null,Hn=Jn.fieldTransforms;return new my(new Qt(Os),vn,Hn)}(ag(O),"setDoc",m._key,X,m.converter!==null,o).toMutation(m._key,Ia.none())])}function _y(m){return ap(vf(m.firestore,Xp),[new cs(m._key,Ia.none())])}function ap(m,i){return function(o,d){let v=new lr;return o.asyncQueue.enqueueAndForget(async()=>Xm(await yf(o).then(_=>_.syncEngine),d,v)),v.promise}(Sf(m),i)}(function(m=!0){Q=Y.Jn,(0,Y.Xd)(new ee.wA("firestore",(i,{instanceIdentifier:o,options:d})=>{let v=i.getProvider("app").getImmediate(),_=new Xp(new Ce(i.getProvider("auth-internal")),new gt(i.getProvider("app-check-internal")),function(O,X){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new pt(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(O.options.projectId,X)}(v,o),v);return d=Object.assign({useFetchStreams:m},d),_._setSettings(d),_},"PUBLIC").setMultipleInstances(!0)),(0,Y.KN)(re,"4.7.5",void 0),(0,Y.KN)(re,"4.7.5","esm2017")})()}},Jt=>{var ae=Jt(Jt.s=4769);(hn._ENTRIES=typeof hn._ENTRIES>"u"?{}:hn._ENTRIES)["middleware_app/[slug]/page"]=ae}]),function(){let Jt={exports:{},loaded:!1};return function(M,q){var Z=Object.create,W=Object.defineProperty,j=Object.getOwnPropertyDescriptor,z=Object.getOwnPropertyNames,y=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,k=F=>W(F,"__esModule",{value:!0}),I=(F,Q)=>{k(F);for(var se in Q)W(F,se,{get:Q[se],enumerable:!0})},x=(F,Q,se)=>{if(Q&&typeof Q=="object"||typeof Q=="function")for(let me of z(Q))!S.call(F,me)&&me!=="default"&&W(F,me,{get:()=>Q[me],enumerable:!(se=j(Q,me))||se.enumerable});return F},C=F=>x(k(W(F!=null?Z(y(F)):{},"default",F&&F.__esModule&&"default"in F?{get:()=>F.default,enumerable:!0}:{value:F,enumerable:!0})),F);I(q,{default:()=>at});var N=C((Q1(),x_(Ww))),U="@next/request-context",K=Symbol.for(U),Y=Symbol.for("internal.storage");function ee(){let F=hn;if(!F[K]){let Q=new N.AsyncLocalStorage,se={get:()=>Q.getStore(),[Y]:Q};F[K]=se}return F[K]}var fe=ee();function Se(F,Q){return fe[Y].run(F,Q)}function ze(F){let Q={};return F&&F.forEach((se,me)=>{Q[me]=se,me.toLowerCase()==="set-cookie"&&(Q[me]=Ue(se))}),Q}function Ue(F){let Q=[],se=0,me,ce,Ke,Je,He;function _e(){for(;se<F.length&&/\s/.test(F.charAt(se));)se+=1;return se<F.length}function Fe(){return ce=F.charAt(se),ce!=="="&&ce!==";"&&ce!==","}for(;se<F.length;){for(me=se,He=!1;_e();)if(ce=F.charAt(se),ce===","){for(Ke=se,se+=1,_e(),Je=se;se<F.length&&Fe();)se+=1;se<F.length&&F.charAt(se)==="="?(He=!0,se=Je,Q.push(F.substring(me,Ke)),me=se):se=Ke+1}else se+=1;(!He||se>=F.length)&&Q.push(F.substring(me,F.length))}return Q}function at(F){let Q=F.staticRoutes.map(me=>({regexp:new RegExp(me.namedRegex),page:me.page})),se=F.dynamicRoutes?.map(me=>({regexp:new RegExp(me.namedRegex),page:me.page}))||[];return async function(me,ce){let Ke=new URL(me.url).pathname,Je={};if(F.nextConfig?.basePath&&Ke.startsWith(F.nextConfig.basePath)&&(Ke=Ke.replace(F.nextConfig.basePath,"")||"/"),F.nextConfig?.i18n)for(let _e of F.nextConfig.i18n.locales){let Fe=new RegExp(`^/${_e}($|/)`,"i");if(Ke.match(Fe)){Ke=Ke.replace(Fe,"/")||"/";break}}for(let _e of Q)if(_e.regexp.exec(Ke)){Je.name=_e.page;break}if(!Je.name){let _e=jt(Ke);for(let Fe of se||[]){if(_e&&!jt(Fe.page))continue;let pt=Fe.regexp.exec(Ke);if(pt){Je={name:Fe.page,params:pt.groups};break}}}let He=await Se({waitUntil:ce.waitUntil},()=>hn._ENTRIES[`middleware_${F.name}`].default.call({},{request:{url:me.url,method:me.method,headers:ze(me.headers),ip:vt(me.headers,re.Ip),geo:{city:vt(me.headers,re.City,!0),country:vt(me.headers,re.Country,!0),latitude:vt(me.headers,re.Latitude),longitude:vt(me.headers,re.Longitude),region:vt(me.headers,re.Region,!0)},nextConfig:F.nextConfig,page:Je,body:me.body}}));return He.waitUntil&&ce.waitUntil(He.waitUntil),He.response}}function vt(F,Q,se=!1){let me=F.get(Q)||void 0;return se&&me?decodeURIComponent(me):me}function jt(F){return F==="/api"||F.startsWith("/api/")}var re;(function(F){F.City="x-vercel-ip-city",F.Country="x-vercel-ip-country",F.Ip="x-real-ip",F.Latitude="x-vercel-ip-latitude",F.Longitude="x-vercel-ip-longitude",F.Region="x-vercel-ip-country-region"})(re||(re={}))}(Jt,Jt.exports),Jt.exports}.call({}).default({name:"app/[slug]/page",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"}],dynamicRoutes:[{page:"/[slug]",regex:"^/([^/]+?)(?:/)?$",routeKeys:{nxtPslug:"nxtPslug"},namedRegex:"^/(?<nxtPslug>[^/]+?)(?:/)?$"}],nextConfig:{basePath:""}})))(C_,C_,C_);export{TP as default};
